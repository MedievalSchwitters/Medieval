"use strict";(self.webpackChunkmedieval_angular=self.webpackChunkmedieval_angular||[]).push([[179],{48:(Uc,bx,Cv)=>{function ei(o){return"function"==typeof o}function _t(o){const i=o(a=>{Error.call(a),a.stack=(new Error).stack});return i.prototype=Object.create(Error.prototype),i.prototype.constructor=i,i}const Ox=_t(o=>function(i){o(this),this.message=i?`${i.length} errors occurred during unsubscription:\n${i.map((a,h)=>`${h+1}) ${a.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=i});function Lx(o,r){if(o){const i=o.indexOf(r);0<=i&&o.splice(i,1)}}class sa{constructor(r){this.initialTeardown=r,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let r;if(!this.closed){this.closed=!0;const{_parentage:i}=this;if(i)if(this._parentage=null,Array.isArray(i))for(const f of i)f.remove(this);else i.remove(this);const{initialTeardown:a}=this;if(ei(a))try{a()}catch(f){r=f instanceof Ox?f.errors:[f]}const{_finalizers:h}=this;if(h){this._finalizers=null;for(const f of h)try{xS(f)}catch(m){r=r??[],m instanceof Ox?r=[...r,...m.errors]:r.push(m)}}if(r)throw new Ox(r)}}add(r){var i;if(r&&r!==this)if(this.closed)xS(r);else{if(r instanceof sa){if(r.closed||r._hasParent(this))return;r._addParent(this)}(this._finalizers=null!==(i=this._finalizers)&&void 0!==i?i:[]).push(r)}}_hasParent(r){const{_parentage:i}=this;return i===r||Array.isArray(i)&&i.includes(r)}_addParent(r){const{_parentage:i}=this;this._parentage=Array.isArray(i)?(i.push(r),i):i?[i,r]:r}_removeParent(r){const{_parentage:i}=this;i===r?this._parentage=null:Array.isArray(i)&&Lx(i,r)}remove(r){const{_finalizers:i}=this;i&&Lx(i,r),r instanceof sa&&r._removeParent(this)}}sa.EMPTY=(()=>{const o=new sa;return o.closed=!0,o})();const wS=sa.EMPTY;function Fx(o){return o instanceof sa||o&&"closed"in o&&ei(o.remove)&&ei(o.add)&&ei(o.unsubscribe)}function xS(o){ei(o)?o():o.unsubscribe()}const Ch={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Mv={setTimeout(o,r,...i){const{delegate:a}=Mv;return a?.setTimeout?a.setTimeout(o,r,...i):setTimeout(o,r,...i)},clearTimeout(o){const{delegate:r}=Mv;return(r?.clearTimeout||clearTimeout)(o)},delegate:void 0};function Rx(o){Mv.setTimeout(()=>{const{onUnhandledError:r}=Ch;if(!r)throw o;r(o)})}function jx(){}const fE=Vx("C",void 0,void 0);function Vx(o,r,i){return{kind:o,value:r,error:i}}let Hc=null;function Sv(o){if(Ch.useDeprecatedSynchronousErrorHandling){const r=!Hc;if(r&&(Hc={errorThrown:!1,error:null}),o(),r){const{errorThrown:i,error:a}=Hc;if(Hc=null,i)throw a}}else o()}class Bx extends sa{constructor(r){super(),this.isStopped=!1,r?(this.destination=r,Fx(r)&&r.add(this)):this.destination=vE}static create(r,i,a){return new Wg(r,i,a)}next(r){this.isStopped?Ux(function pE(o){return Vx("N",o,void 0)}(r),this):this._next(r)}error(r){this.isStopped?Ux(function dE(o){return Vx("E",void 0,o)}(r),this):(this.isStopped=!0,this._error(r))}complete(){this.isStopped?Ux(fE,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(r){this.destination.next(r)}_error(r){try{this.destination.error(r)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const CS=Function.prototype.bind;function Dv(o,r){return CS.call(o,r)}class mE{constructor(r){this.partialObserver=r}next(r){const{partialObserver:i}=this;if(i.next)try{i.next(r)}catch(a){_v(a)}}error(r){const{partialObserver:i}=this;if(i.error)try{i.error(r)}catch(a){_v(a)}else _v(r)}complete(){const{partialObserver:r}=this;if(r.complete)try{r.complete()}catch(i){_v(i)}}}class Wg extends Bx{constructor(r,i,a){let h;if(super(),ei(r)||!r)h={next:r??void 0,error:i??void 0,complete:a??void 0};else{let f;this&&Ch.useDeprecatedNextContext?(f=Object.create(r),f.unsubscribe=()=>this.unsubscribe(),h={next:r.next&&Dv(r.next,f),error:r.error&&Dv(r.error,f),complete:r.complete&&Dv(r.complete,f)}):h=r}this.destination=new mE(h)}}function _v(o){Ch.useDeprecatedSynchronousErrorHandling?function gE(o){Ch.useDeprecatedSynchronousErrorHandling&&Hc&&(Hc.errorThrown=!0,Hc.error=o)}(o):Rx(o)}function Ux(o,r){const{onStoppedNotification:i}=Ch;i&&Mv.setTimeout(()=>i(o,r))}const vE={closed:!0,next:jx,error:function yE(o){throw o},complete:jx},Hx="function"==typeof Symbol&&Symbol.observable||"@@observable";function zc(o){return o}function MS(o){return 0===o.length?zc:1===o.length?o[0]:function(i){return o.reduce((a,h)=>h(a),i)}}let $i=(()=>{class o{constructor(i){i&&(this._subscribe=i)}lift(i){const a=new o;return a.source=this,a.operator=i,a}subscribe(i,a,h){const f=function CE(o){return o&&o instanceof Bx||function xE(o){return o&&ei(o.next)&&ei(o.error)&&ei(o.complete)}(o)&&Fx(o)}(i)?i:new Wg(i,a,h);return Sv(()=>{const{operator:m,source:v}=this;f.add(m?m.call(f,v):v?this._subscribe(f):this._trySubscribe(f))}),f}_trySubscribe(i){try{return this._subscribe(i)}catch(a){i.error(a)}}forEach(i,a){return new(a=SS(a))((h,f)=>{const m=new Wg({next:v=>{try{i(v)}catch(x){f(x),m.unsubscribe()}},error:f,complete:h});this.subscribe(m)})}_subscribe(i){var a;return null===(a=this.source)||void 0===a?void 0:a.subscribe(i)}[Hx](){return this}pipe(...i){return MS(i)(this)}toPromise(i){return new(i=SS(i))((a,h)=>{let f;this.subscribe(m=>f=m,m=>h(m),()=>a(f))})}}return o.create=r=>new o(r),o})();function SS(o){var r;return null!==(r=o??Ch.Promise)&&void 0!==r?r:Promise}const ME=_t(o=>function(){o(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let bs=(()=>{class o extends $i{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(i){const a=new DS(this,this);return a.operator=i,a}_throwIfClosed(){if(this.closed)throw new ME}next(i){Sv(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const a of this.currentObservers)a.next(i)}})}error(i){Sv(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=i;const{observers:a}=this;for(;a.length;)a.shift().error(i)}})}complete(){Sv(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:i}=this;for(;i.length;)i.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var i;return(null===(i=this.observers)||void 0===i?void 0:i.length)>0}_trySubscribe(i){return this._throwIfClosed(),super._trySubscribe(i)}_subscribe(i){return this._throwIfClosed(),this._checkFinalizedStatuses(i),this._innerSubscribe(i)}_innerSubscribe(i){const{hasError:a,isStopped:h,observers:f}=this;return a||h?wS:(this.currentObservers=null,f.push(i),new sa(()=>{this.currentObservers=null,Lx(f,i)}))}_checkFinalizedStatuses(i){const{hasError:a,thrownError:h,isStopped:f}=this;a?i.error(h):f&&i.complete()}asObservable(){const i=new $i;return i.source=this,i}}return o.create=(r,i)=>new DS(r,i),o})();class DS extends bs{constructor(r,i){super(),this.destination=r,this.source=i}next(r){var i,a;null===(a=null===(i=this.destination)||void 0===i?void 0:i.next)||void 0===a||a.call(i,r)}error(r){var i,a;null===(a=null===(i=this.destination)||void 0===i?void 0:i.error)||void 0===a||a.call(i,r)}complete(){var r,i;null===(i=null===(r=this.destination)||void 0===r?void 0:r.complete)||void 0===i||i.call(r)}_subscribe(r){var i,a;return null!==(a=null===(i=this.source)||void 0===i?void 0:i.subscribe(r))&&void 0!==a?a:wS}}function _S(o){return ei(o?.lift)}function Or(o){return r=>{if(_S(r))return r.lift(function(i){try{return o(i,this)}catch(a){this.error(a)}});throw new TypeError("Unable to lift unknown Observable type")}}function yr(o,r,i,a,h){return new SE(o,r,i,a,h)}class SE extends Bx{constructor(r,i,a,h,f,m){super(r),this.onFinalize=f,this.shouldUnsubscribe=m,this._next=i?function(v){try{i(v)}catch(x){r.error(x)}}:super._next,this._error=h?function(v){try{h(v)}catch(x){r.error(x)}finally{this.unsubscribe()}}:super._error,this._complete=a?function(){try{a()}catch(v){r.error(v)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var r;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:i}=this;super.unsubscribe(),!i&&(null===(r=this.onFinalize)||void 0===r||r.call(this))}}}function Re(o,r){return Or((i,a)=>{let h=0;i.subscribe(yr(a,f=>{a.next(o.call(r,f,h++))}))})}function Mh(o){return this instanceof Mh?(this.v=o,this):new Mh(o)}function PE(o,r,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var h,a=i.apply(o,r||[]),f=[];return h={},m("next"),m("throw"),m("return"),h[Symbol.asyncIterator]=function(){return this},h;function m(F){a[F]&&(h[F]=function(j){return new Promise(function(B,W){f.push([F,j,B,W])>1||v(F,j)})})}function v(F,j){try{!function x(F){F.value instanceof Mh?Promise.resolve(F.value.v).then(S,T):N(f[0][2],F)}(a[F](j))}catch(B){N(f[0][3],B)}}function S(F){v("next",F)}function T(F){v("throw",F)}function N(F,j){F(j),f.shift(),f.length&&v(f[0][0],f[0][1])}}function NE(o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=o[Symbol.asyncIterator];return r?r.call(o):(o=function $x(o){var r="function"==typeof Symbol&&Symbol.iterator,i=r&&o[r],a=0;if(i)return i.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&a>=o.length&&(o=void 0),{value:o&&o[a++],done:!o}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")}(o),i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i);function a(f){i[f]=o[f]&&function(m){return new Promise(function(v,x){!function h(f,m,v,x){Promise.resolve(x).then(function(S){f({value:S,done:v})},m)}(v,x,(m=o[f](m)).done,m.value)})}}}const PS=o=>o&&"number"==typeof o.length&&"function"!=typeof o;function NS(o){return ei(o?.then)}function IS(o){return ei(o[Hx])}function AS(o){return Symbol.asyncIterator&&ei(o?.[Symbol.asyncIterator])}function kS(o){return new TypeError(`You provided ${null!==o&&"object"==typeof o?"an invalid object":`'${o}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const bS=function AE(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function OS(o){return ei(o?.[bS])}function LS(o){return PE(this,arguments,function*(){const i=o.getReader();try{for(;;){const{value:a,done:h}=yield Mh(i.read());if(h)return yield Mh(void 0);yield yield Mh(a)}}finally{i.releaseLock()}})}function FS(o){return ei(o?.getReader)}function aa(o){if(o instanceof $i)return o;if(null!=o){if(IS(o))return function kE(o){return new $i(r=>{const i=o[Hx]();if(ei(i.subscribe))return i.subscribe(r);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(o);if(PS(o))return function bE(o){return new $i(r=>{for(let i=0;i<o.length&&!r.closed;i++)r.next(o[i]);r.complete()})}(o);if(NS(o))return function OE(o){return new $i(r=>{o.then(i=>{r.closed||(r.next(i),r.complete())},i=>r.error(i)).then(null,Rx)})}(o);if(AS(o))return _(o);if(OS(o))return function LE(o){return new $i(r=>{for(const i of o)if(r.next(i),r.closed)return;r.complete()})}(o);if(FS(o))return function RS(o){return _(LS(o))}(o)}throw kS(o)}function _(o){return new $i(r=>{(function Wx(o,r){var i,a,h,f;return function ES(o,r,i,a){return new(i||(i=Promise))(function(f,m){function v(T){try{S(a.next(T))}catch(N){m(N)}}function x(T){try{S(a.throw(T))}catch(N){m(N)}}function S(T){T.done?f(T.value):function h(f){return f instanceof i?f:new i(function(m){m(f)})}(T.value).then(v,x)}S((a=a.apply(o,r||[])).next())})}(this,void 0,void 0,function*(){try{for(i=NE(o);!(a=yield i.next()).done;)if(r.next(a.value),r.closed)return}catch(m){h={error:m}}finally{try{a&&!a.done&&(f=i.return)&&(yield f.call(i))}finally{if(h)throw h.error}}r.complete()})})(o,r).catch(i=>r.error(i))})}function ja(o,r,i,a=0,h=!1){const f=r.schedule(function(){i(),h?o.add(this.schedule(null,a)):this.unsubscribe()},a);if(o.add(f),!h)return f}function or(o,r,i=1/0){return ei(r)?or((a,h)=>Re((f,m)=>r(a,f,h,m))(aa(o(a,h))),i):("number"==typeof r&&(i=r),Or((a,h)=>function jS(o,r,i,a,h,f,m,v){const x=[];let S=0,T=0,N=!1;const F=()=>{N&&!x.length&&!S&&r.complete()},j=W=>S<a?B(W):x.push(W),B=W=>{f&&r.next(W),S++;let it=!1;aa(i(W,T++)).subscribe(yr(r,rt=>{h?.(rt),f?j(rt):r.next(rt)},()=>{it=!0},void 0,()=>{if(it)try{for(S--;x.length&&S<a;){const rt=x.shift();m?ja(r,m,()=>B(rt)):B(rt)}F()}catch(rt){r.error(rt)}}))};return o.subscribe(yr(r,j,()=>{N=!0,F()})),()=>{v?.()}}(a,h,o,i)))}function vu(o=1/0){return or(zc,o)}const El=new $i(o=>o.complete());function St(o){return o[o.length-1]}function Yx(o){return ei(St(o))?o.pop():void 0}function $d(o){return function zt(o){return o&&ei(o.schedule)}(St(o))?o.pop():void 0}function mt(o,r=0){return Or((i,a)=>{i.subscribe(yr(a,h=>ja(a,o,()=>a.next(h),r),()=>ja(a,o,()=>a.complete(),r),h=>ja(a,o,()=>a.error(h),r)))})}function wu(o,r=0){return Or((i,a)=>{a.add(o.schedule(()=>i.subscribe(a),r))})}function Nt(o,r){if(!o)throw new Error("Iterable cannot be null");return new $i(i=>{ja(i,r,()=>{const a=o[Symbol.asyncIterator]();ja(i,r,()=>{a.next().then(h=>{h.done?i.complete():i.next(h.value)})},0,!0)})})}function Vt(o,r){return r?function wi(o,r){if(null!=o){if(IS(o))return function Tv(o,r){return aa(o).pipe(wu(r),mt(r))}(o,r);if(PS(o))return function hs(o,r){return new $i(i=>{let a=0;return r.schedule(function(){a===o.length?i.complete():(i.next(o[a++]),i.closed||this.schedule())})})}(o,r);if(NS(o))return function xu(o,r){return aa(o).pipe(wu(r),mt(r))}(o,r);if(AS(o))return Nt(o,r);if(OS(o))return function Y(o,r){return new $i(i=>{let a;return ja(i,r,()=>{a=o[bS](),ja(i,r,()=>{let h,f;try{({value:h,done:f}=a.next())}catch(m){return void i.error(m)}f?i.complete():i.next(h)},0,!0)}),()=>ei(a?.return)&&a.return()})}(o,r);if(FS(o))return function pe(o,r){return Nt(LS(o),r)}(o,r)}throw kS(o)}(o,r):aa(o)}function Cu(o,r,...i){if(!0===r)return void o();if(!1===r)return;const a=new Wg({next:()=>{a.unsubscribe(),o()}});return r(...i).subscribe(a)}function en(o){for(let r in o)if(o[r]===en)return r;throw Error("Could not find renamed property on target object.")}function ce(o,r){for(const i in r)r.hasOwnProperty(i)&&!o.hasOwnProperty(i)&&(o[i]=r[i])}function It(o){if("string"==typeof o)return o;if(Array.isArray(o))return"["+o.map(It).join(", ")+"]";if(null==o)return""+o;if(o.overriddenName)return`${o.overriddenName}`;if(o.name)return`${o.name}`;const r=o.toString();if(null==r)return""+r;const i=r.indexOf("\n");return-1===i?r:r.substring(0,i)}function la(o,r){return null==o||""===o?null===r?"":r:null==r||""===r?o:o+" "+r}const vo=en({__forward_ref__:en});function Tn(o){return o.__forward_ref__=Tn,o.toString=function(){return It(this())},o}function Gt(o){return $t(o)?o():o}function $t(o){return"function"==typeof o&&o.hasOwnProperty(vo)&&o.__forward_ref__===Tn}class dt extends Error{constructor(r,i){super(function Ro(o,r){return`NG0${Math.abs(o)}${r?": "+r.trim():""}`}(r,i)),this.code=r}}function ye(o){return"string"==typeof o?o:null==o?"":String(o)}function Sh(o,r){throw new dt(-201,!1)}function qt(o,r){null==o&&function te(o,r,i,a){throw new Error(`ASSERTION ERROR: ${o}`+(null==a?"":` [Expected=> ${i} ${a} ${r} <=Actual]`))}(r,o,null,"!=")}function A(o){return{token:o.token,providedIn:o.providedIn||null,factory:o.factory,value:void 0}}function Xn(o){return{providers:o.providers||[],imports:o.imports||[]}}function $c(o){return Wd(o,Jn)||Wd(o,Os)}function Wd(o,r){return o.hasOwnProperty(r)?o[r]:null}function Nv(o){return o&&(o.hasOwnProperty(ni)||o.hasOwnProperty(Iv))?o[ni]:null}const Jn=en({\u0275prov:en}),ni=en({\u0275inj:en}),Os=en({ngInjectableDef:en}),Iv=en({ngInjectorDef:en});var Zt=(()=>((Zt=Zt||{})[Zt.Default=0]="Default",Zt[Zt.Host=1]="Host",Zt[Zt.Self=2]="Self",Zt[Zt.SkipSelf=4]="SkipSelf",Zt[Zt.Optional=8]="Optional",Zt))();let gt;function wo(o){const r=gt;return gt=o,r}function Yg(o,r,i){const a=$c(o);return a&&"root"==a.providedIn?void 0===a.value?a.value=a.factory():a.value:i&Zt.Optional?null:void 0!==r?r:void Sh(It(o))}function Nl(o){return{toString:o}.toString()}var cs=(()=>((cs=cs||{})[cs.OnPush=0]="OnPush",cs[cs.Default=1]="Default",cs))(),Ls=(()=>{return(o=Ls||(Ls={}))[o.Emulated=0]="Emulated",o[o.None=2]="None",o[o.ShadowDom=3]="ShadowDom",Ls;var o})();const bn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Th={},an=[],Kc=en({\u0275cmp:en}),Yc=en({\u0275dir:en}),Xg=en({\u0275pipe:en}),kv=en({\u0275mod:en}),Ke=en({\u0275fac:en}),vr=en({__NG_ELEMENT_ID__:en});let Qx=0;function Lr(o){return Nl(()=>{const i=!0===o.standalone,a={},h={type:o.type,providersResolver:null,decls:o.decls,vars:o.vars,factory:null,template:o.template||null,consts:o.consts||null,ngContentSelectors:o.ngContentSelectors,hostBindings:o.hostBindings||null,hostVars:o.hostVars||0,hostAttrs:o.hostAttrs||null,contentQueries:o.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:o.exportAs||null,onPush:o.changeDetection===cs.OnPush,directiveDefs:null,pipeDefs:null,standalone:i,dependencies:i&&o.dependencies||null,getStandaloneInjector:null,selectors:o.selectors||an,viewQuery:o.viewQuery||null,features:o.features||null,data:o.data||{},encapsulation:o.encapsulation||Ls.Emulated,id:"c"+Qx++,styles:o.styles||an,_:null,setInput:null,schemas:o.schemas||null,tView:null},f=o.dependencies,m=o.features;return h.inputs=Eh(o.inputs,a),h.outputs=Eh(o.outputs),m&&m.forEach(v=>v(h)),h.directiveDefs=f?()=>("function"==typeof f?f():f).map(Jg).filter(Ht):null,h.pipeDefs=f?()=>("function"==typeof f?f():f).map(je).filter(Ht):null,h})}function Jg(o){return ot(o)||Oe(o)}function Ht(o){return null!==o}function ci(o){return Nl(()=>({type:o.type,bootstrap:o.bootstrap||an,declarations:o.declarations||an,imports:o.imports||an,exports:o.exports||an,transitiveCompileScopes:null,schemas:o.schemas||null,id:o.id||null}))}function Eh(o,r){if(null==o)return Th;const i={};for(const a in o)if(o.hasOwnProperty(a)){let h=o[a],f=h;Array.isArray(h)&&(f=h[1],h=h[0]),i[h]=a,r&&(r[h]=f)}return i}const Xt=Lr;function ot(o){return o[Kc]||null}function Oe(o){return o[Yc]||null}function je(o){return o[Xg]||null}function wr(o,r){const i=o[kv]||null;if(!i&&!0===r)throw new Error(`Type ${It(o)} does not have '\u0275mod' property.`);return i}function wn(o){return Array.isArray(o)&&"object"==typeof o[1]}function ds(o){return Array.isArray(o)&&!0===o[1]}function Qg(o){return 0!=(8&o.flags)}function Xd(o){return 2==(2&o.flags)}function Dt(o){return 1==(1&o.flags)}function Rs(o){return null!==o.template}function R(o){return 0!=(256&o[2])}function re(o,r){return o.hasOwnProperty(Ke)?o[Ke]:null}class un{constructor(r,i,a){this.previousValue=r,this.currentValue=i,this.firstChange=a}isFirstChange(){return this.firstChange}}function Me(){return Pn}function Pn(o){return o.type.prototype.ngOnChanges&&(o.setInput=a1),Le}function Le(){const o=l1(this),r=o?.current;if(r){const i=o.previous;if(i===Th)o.previous=r;else for(let a in r)i[a]=r[a];o.current=null,this.ngOnChanges(r)}}function a1(o,r,i,a){const h=l1(o)||function Te(o,r){return o[Ot]=r}(o,{previous:Th,current:null}),f=h.current||(h.current={}),m=h.previous,v=this.declaredInputs[i],x=m[v];f[v]=new un(x&&x.currentValue,r,m===Th),o[a]=r}Me.ngInherit=!0;const Ot="__ngSimpleChanges__";function l1(o){return o[Ot]||null}function Un(o){for(;Array.isArray(o);)o=o[0];return o}function Jd(o,r){return Un(r[o])}function Bo(o,r){return Un(r[o.index])}function tm(o,r){return o.data[r]}function Mo(o,r){const i=r[o];return wn(i)?i:i[0]}function Zd(o){return 64==(64&o[2])}function kl(o,r){return null==r?null:o[r]}function Vv(o){o[18]=0}function em(o,r){o[5]+=r;let i=o,a=o[3];for(;null!==a&&(1===r&&1===i[5]||-1===r&&0===i[5]);)a[5]+=r,i=a,a=a[3]}const we={lFrame:tf(null),bindingsEnabled:!0};function Qn(){return we.bindingsEnabled}function yt(){return we.lFrame.lView}function Ye(){return we.lFrame.tView}function oe(o){return we.lFrame.contextLView=o,o[8]}function qe(o){return we.lFrame.contextLView=null,o}function Ki(){let o=Uv();for(;null!==o&&64===o.type;)o=o.parent;return o}function Uv(){return we.lFrame.currentTNode}function ha(o,r){const i=we.lFrame;i.currentTNode=o,i.isParent=r}function Xe(){return we.lFrame.isParent}function Tu(){we.lFrame.isParent=!1}function ze(){const o=we.lFrame;let r=o.bindingRootIndex;return-1===r&&(r=o.bindingRootIndex=o.tView.bindingStartIndex),r}function So(){return we.lFrame.bindingIndex++}function no(o){const r=we.lFrame,i=r.bindingIndex;return r.bindingIndex=r.bindingIndex+o,i}function za(o,r){const i=we.lFrame;i.bindingIndex=i.bindingRootIndex=o,Xi(r)}function Xi(o){we.lFrame.currentDirectiveIndex=o}function im(){return we.lFrame.currentQueryIndex}function rm(o){we.lFrame.currentQueryIndex=o}function g1(o){const r=o[1];return 2===r.type?r.declTNode:1===r.type?o[6]:null}function m1(o,r,i){if(i&Zt.SkipSelf){let h=r,f=o;for(;!(h=h.parent,null!==h||i&Zt.Host||(h=g1(f),null===h||(f=f[15],10&h.type))););if(null===h)return!1;r=h,o=f}const a=we.lFrame=om();return a.currentTNode=r,a.lView=o,!0}function Eu(o){const r=om(),i=o[1];we.lFrame=r,r.currentTNode=i.firstChild,r.lView=o,r.tView=i,r.contextLView=o,r.bindingIndex=i.bindingStartIndex,r.inI18n=!1}function om(){const o=we.lFrame,r=null===o?null:o.child;return null===r?tf(o):r}function tf(o){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:o,child:null,inI18n:!1};return null!==o&&(o.child=r),r}function ef(){const o=we.lFrame;return we.lFrame=o.parent,o.currentTNode=null,o.lView=null,o}const fe=ef;function zv(){const o=ef();o.isParent=!0,o.tView=null,o.selectedIndex=-1,o.contextLView=null,o.elementDepthCount=0,o.currentDirectiveIndex=-1,o.currentNamespace=null,o.bindingRootIndex=-1,o.bindingIndex=-1,o.currentQueryIndex=0}function Dr(){return we.lFrame.selectedIndex}function Ga(o){we.lFrame.selectedIndex=o}function qn(){const o=we.lFrame;return tm(o.tView,o.selectedIndex)}function nf(o,r){for(let i=r.directiveStart,a=r.directiveEnd;i<a;i++){const f=o.data[i].type.prototype,{ngAfterContentInit:m,ngAfterContentChecked:v,ngAfterViewInit:x,ngAfterViewChecked:S,ngOnDestroy:T}=f;m&&(o.contentHooks||(o.contentHooks=[])).push(-i,m),v&&((o.contentHooks||(o.contentHooks=[])).push(i,v),(o.contentCheckHooks||(o.contentCheckHooks=[])).push(i,v)),x&&(o.viewHooks||(o.viewHooks=[])).push(-i,x),S&&((o.viewHooks||(o.viewHooks=[])).push(i,S),(o.viewCheckHooks||(o.viewCheckHooks=[])).push(i,S)),null!=T&&(o.destroyHooks||(o.destroyHooks=[])).push(i,T)}}function Pu(o,r,i){_r(o,r,3,i)}function rf(o,r,i,a){(3&o[2])===i&&_r(o,r,i,a)}function bl(o,r){let i=o[2];(3&i)===r&&(i&=2047,i+=1,o[2]=i)}function _r(o,r,i,a){const f=a??-1,m=r.length-1;let v=0;for(let x=void 0!==a?65535&o[18]:0;x<m;x++)if("number"==typeof r[x+1]){if(v=r[x],null!=a&&v>=a)break}else r[x]<0&&(o[18]+=65536),(v<f||-1==f)&&($a(o,i,r,x),o[18]=(4294901760&o[18])+x+2),x++}function $a(o,r,i,a){const h=i[a]<0,f=i[a+1],v=o[h?-i[a]:i[a]];if(h){if(o[2]>>11<o[18]>>16&&(3&o[2])===r){o[2]+=2048;try{f.call(v)}finally{}}}else try{f.call(v)}finally{}}class Nu{constructor(r,i,a){this.factory=r,this.resolving=!1,this.canSeeViewProviders=i,this.injectImpl=a}}function ip(o,r,i){let a=0;for(;a<i.length;){const h=i[a];if("number"==typeof h){if(0!==h)break;a++;const f=i[a++],m=i[a++],v=i[a++];o.setAttribute(r,m,v,f)}else{const f=h,m=i[++a];op(f)?o.setProperty(r,f,m):o.setAttribute(r,f,m),a++}}return a}function rp(o){return 3===o||4===o||6===o}function op(o){return 64===o.charCodeAt(0)}function kh(o,r){if(null!==r&&0!==r.length)if(null===o||0===o.length)o=r.slice();else{let i=-1;for(let a=0;a<r.length;a++){const h=r[a];"number"==typeof h?i=h:0===i||Wv(o,i,h,null,-1===i||2===i?r[++a]:null)}}return o}function Wv(o,r,i,a,h){let f=0,m=o.length;if(-1===r)m=-1;else for(;f<o.length;){const v=o[f++];if("number"==typeof v){if(v===r){m=-1;break}if(v>r){m=f-1;break}}}for(;f<o.length;){const v=o[f];if("number"==typeof v)break;if(v===i){if(null===a)return void(null!==h&&(o[f+1]=h));if(a===o[f+1])return void(o[f+2]=h)}f++,null!==a&&f++,null!==h&&f++}-1!==m&&(o.splice(m,0,r),f=m+1),o.splice(f++,0,i),null!==a&&o.splice(f++,0,a),null!==h&&o.splice(f++,0,h)}function Kv(o){return-1!==o}function Nn(o){return 32767&o}function Au(o,r){let i=function am(o){return o>>16}(o),a=r;for(;i>0;)a=a[15],i--;return a}let ku=!0;function sp(o){const r=ku;return ku=o,r}let M1=0;const ki={};function af(o,r){const i=lm(o,r);if(-1!==i)return i;const a=r[1];a.firstCreatePass&&(o.injectorIndex=r.length,ap(a.data,o),ap(r,null),ap(a.blueprint,null));const h=Gn(o,r),f=o.injectorIndex;if(Kv(h)){const m=Nn(h),v=Au(h,r),x=v[1].data;for(let S=0;S<8;S++)r[f+S]=v[m+S]|x[m+S]}return r[f+8]=h,f}function ap(o,r){o.push(0,0,0,0,0,0,0,0,r)}function lm(o,r){return-1===o.injectorIndex||o.parent&&o.parent.injectorIndex===o.injectorIndex||null===r[o.injectorIndex+8]?-1:o.injectorIndex}function Gn(o,r){if(o.parent&&-1!==o.parent.injectorIndex)return o.parent.injectorIndex;let i=0,a=null,h=r;for(;null!==h;){if(a=Qv(h),null===a)return-1;if(i++,h=h[15],-1!==a.injectorIndex)return a.injectorIndex|i<<16}return-1}function Ol(o,r,i){!function YS(o,r,i){let a;"string"==typeof i?a=i.charCodeAt(0)||0:i.hasOwnProperty(vr)&&(a=i[vr]),null==a&&(a=i[vr]=M1++);const h=255&a;r.data[o+(h>>5)]|=1<<h}(o,r,i)}function S1(o,r,i){if(i&Zt.Optional||void 0!==o)return o;Sh()}function V(o,r,i,a){if(i&Zt.Optional&&void 0===a&&(a=null),0==(i&(Zt.Self|Zt.Host))){const h=o[9],f=wo(void 0);try{return h?h.get(r,a,i&Zt.Optional):Yg(r,a,i&Zt.Optional)}finally{wo(f)}}return S1(a,0,i)}function Jv(o,r,i,a=Zt.Default,h){if(null!==o){if(1024&r[2]){const m=function JS(o,r,i,a,h){let f=o,m=r;for(;null!==f&&null!==m&&1024&m[2]&&!(256&m[2]);){const v=bh(f,m,i,a|Zt.Self,ki);if(v!==ki)return v;let x=f.parent;if(!x){const S=m[21];if(S){const T=S.get(i,ki,a);if(T!==ki)return T}x=Qv(m),m=m[15]}f=x}return h}(o,r,i,a,ki);if(m!==ki)return m}const f=bh(o,r,i,a,ki);if(f!==ki)return f}return V(r,i,a,h)}function bh(o,r,i,a,h){const f=function XS(o){if("string"==typeof o)return o.charCodeAt(0)||0;const r=o.hasOwnProperty(vr)?o[vr]:void 0;return"number"==typeof r?r>=0?255&r:_1:r}(i);if("function"==typeof f){if(!m1(r,o,a))return a&Zt.Host?S1(h,0,a):V(r,i,a,h);try{const m=f(a);if(null!=m||a&Zt.Optional)return m;Sh()}finally{fe()}}else if("number"==typeof f){let m=null,v=lm(o,r),x=-1,S=a&Zt.Host?r[16][6]:null;for((-1===v||a&Zt.SkipSelf)&&(x=-1===v?Gn(o,r):r[v+8],-1!==x&&up(a,!1)?(m=r[1],v=Nn(x),r=Au(x,r)):v=-1);-1!==v;){const T=r[1];if(uf(f,v,T.data)){const N=D1(v,r,i,m,a,S);if(N!==ki)return N}x=r[v+8],-1!==x&&up(a,r[1].data[v+8]===S)&&uf(f,v,r)?(m=T,v=Nn(x),r=Au(x,r)):v=-1}}return h}function D1(o,r,i,a,h,f){const m=r[1],v=m.data[o+8],T=lp(v,m,i,null==a?Xd(v)&&ku:a!=m&&0!=(3&v.type),h&Zt.Host&&f===v);return null!==T?lf(r,m,T,v):ki}function lp(o,r,i,a,h){const f=o.providerIndexes,m=r.data,v=1048575&f,x=o.directiveStart,T=f>>20,F=h?v+T:o.directiveEnd;for(let j=a?v:v+T;j<F;j++){const B=m[j];if(j<x&&i===B||j>=x&&B.type===i)return j}if(h){const j=m[x];if(j&&Rs(j)&&j.type===i)return x}return null}function lf(o,r,i,a){let h=o[i];const f=r.data;if(function x1(o){return o instanceof Nu}(h)){const m=h;m.resolving&&function ua(o,r){const i=r?`. Dependency path: ${r.join(" > ")} > ${o}`:"";throw new dt(-200,`Circular dependency in DI detected for ${o}${i}`)}(function K(o){return"function"==typeof o?o.name||o.toString():"object"==typeof o&&null!=o&&"function"==typeof o.type?o.type.name||o.type.toString():ye(o)}(f[i]));const v=sp(m.canSeeViewProviders);m.resolving=!0;const x=m.injectImpl?wo(m.injectImpl):null;m1(o,a,Zt.Default);try{h=o[i]=m.factory(void 0,f,o,a),r.firstCreatePass&&i>=a.directiveStart&&function sm(o,r,i){const{ngOnChanges:a,ngOnInit:h,ngDoCheck:f}=r.type.prototype;if(a){const m=Pn(r);(i.preOrderHooks||(i.preOrderHooks=[])).push(o,m),(i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(o,m)}h&&(i.preOrderHooks||(i.preOrderHooks=[])).push(0-o,h),f&&((i.preOrderHooks||(i.preOrderHooks=[])).push(o,f),(i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(o,f))}(i,f[i],r)}finally{null!==x&&wo(x),sp(v),m.resolving=!1,fe()}}return h}function uf(o,r,i){return!!(i[r+(o>>5)]&1<<o)}function up(o,r){return!(o&Zt.Self||o&Zt.Host&&r)}class bu{constructor(r,i){this._tNode=r,this._lView=i}get(r,i,a){return Jv(this._tNode,this._lView,r,a,i)}}function _1(){return new bu(Ki(),yt())}function Zv(o){return $t(o)?()=>{const r=Zv(Gt(o));return r&&r()}:re(o)}function Qv(o){const r=o[1],i=r.type;return 2===i?r.declTNode:1===i?o[6]:null}const Ou="__parameters__";function hf(o,r,i){return Nl(()=>{const a=function qv(o){return function(...i){if(o){const a=o(...i);for(const h in a)this[h]=a[h]}}}(r);function h(...f){if(this instanceof h)return a.apply(this,f),this;const m=new h(...f);return v.annotation=m,v;function v(x,S,T){const N=x.hasOwnProperty(Ou)?x[Ou]:Object.defineProperty(x,Ou,{value:[]})[Ou];for(;N.length<=T;)N.push(null);return(N[T]=N[T]||[]).push(m),x}}return i&&(h.prototype=Object.create(i.prototype)),h.prototype.ngMetadataName=o,h.annotationCls=h,h})}class Yt{constructor(r,i){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof i?this.__NG_ELEMENT_ID__=i:void 0!==i&&(this.\u0275prov=A({token:this,providedIn:i.providedIn||"root",factory:i.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Ho(o,r){void 0===r&&(r=o);for(let i=0;i<o.length;i++){let a=o[i];Array.isArray(a)?(r===o&&(r=o.slice(0,i)),Ho(a,r)):r!==o&&r.push(a)}return r}function fa(o,r){o.forEach(i=>Array.isArray(i)?fa(i,r):r(i))}function cm(o,r,i){r>=o.length?o.push(i):o.splice(r,0,i)}function ys(o,r){return r>=o.length-1?o.pop():o.splice(r,1)[0]}function Rh(o,r){const i=[];for(let a=0;a<o;a++)i.push(r);return i}function zo(o,r,i){let a=jh(o,r);return a>=0?o[1|a]=i:(a=~a,function dm(o,r,i,a){let h=o.length;if(h==r)o.push(i,a);else if(1===h)o.push(a,o[0]),o[0]=i;else{for(h--,o.push(o[h-1],o[h]);h>r;)o[h]=o[h-2],h--;o[r]=i,o[r+1]=a}}(o,a,r,i)),a}function Us(o,r){const i=jh(o,r);if(i>=0)return o[1|i]}function jh(o,r){return function r0(o,r,i){let a=0,h=o.length>>i;for(;h!==a;){const f=a+(h-a>>1),m=o[f<<i];if(r===m)return f<<i;m>r?h=f:a=f+1}return~(h<<i)}(o,r,1)}const ff={},pp="__NG_DI_FLAG__",gp="ngTempTokenPath",N1=/\n/gm,ym="__source";let df;function Vh(o){const r=df;return df=o,r}function I1(o,r=Zt.Default){if(void 0===df)throw new dt(-203,!1);return null===df?Yg(o,void 0,r):df.get(o,r&Zt.Optional?null:void 0,r)}function kt(o,r=Zt.Default){return(function _h(){return gt}()||I1)(Gt(o),r)}function Je(o,r=Zt.Default){return"number"!=typeof r&&(r=0|(r.optional&&8)|(r.host&&1)|(r.self&&2)|(r.skipSelf&&4)),kt(o,r)}function Fu(o){const r=[];for(let i=0;i<o.length;i++){const a=Gt(o[i]);if(Array.isArray(a)){if(0===a.length)throw new dt(900,!1);let h,f=Zt.Default;for(let m=0;m<a.length;m++){const v=a[m],x=Rr(v);"number"==typeof x?-1===x?h=v.token:f|=x:h=v}r.push(kt(h,f))}else r.push(kt(a))}return r}function Fl(o,r){return o[pp]=r,o.prototype[pp]=r,o}function Rr(o){return o[pp]}const gf=Fl(hf("Optional"),8),mf=Fl(hf("SkipSelf"),4);let Bh;function jl(o){return o instanceof class Mf{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}?o.changingThisBreaksApplicationSecurity:o}const Tp=new Yt("ENVIRONMENT_INITIALIZER"),T0=new Yt("INJECTOR",-1),Gu=new Yt("INJECTOR_DEF_TYPES");class Mm{get(r,i=ff){if(i===ff){const a=new Error(`NullInjectorError: No provider for ${It(r)}!`);throw a.name="NullInjectorError",a}return i}}function E0(...o){return{\u0275providers:Ep(0,o)}}function Ep(o,...r){const i=[],a=new Set;let h;return fa(r,f=>{const m=f;Pp(m,i,[],a)&&(h||(h=[]),h.push(m))}),void 0!==h&&Gh(h,i),i}function Gh(o,r){for(let i=0;i<o.length;i++){const{providers:h}=o[i];fa(h,f=>{r.push(f)})}}function Pp(o,r,i,a){if(!(o=Gt(o)))return!1;let h=null,f=Nv(o);const m=!f&&ot(o);if(f||m){if(m&&!m.standalone)return!1;h=o}else{const x=o.ngModule;if(f=Nv(x),!f)return!1;h=x}const v=a.has(h);if(m){if(v)return!1;if(a.add(h),m.dependencies){const x="function"==typeof m.dependencies?m.dependencies():m.dependencies;for(const S of x)Pp(S,r,i,a)}}else{if(!f)return!1;{if(null!=f.imports&&!v){let S;a.add(h);try{fa(f.imports,T=>{Pp(T,r,i,a)&&(S||(S=[]),S.push(T))})}finally{}void 0!==S&&Gh(S,r)}if(!v){const S=re(h)||(()=>new h);r.push({provide:h,useFactory:S,deps:an},{provide:Gu,useValue:h,multi:!0},{provide:Tp,useValue:()=>kt(h),multi:!0})}const x=f.providers;null==x||v||fa(x,T=>{r.push(T)})}}return h!==o&&void 0!==o.providers}const Pr=en({provide:String,useValue:en});function ri(o){return null!==o&&"object"==typeof o&&Pr in o}function oo(o){return"function"==typeof o}const Ji=new Yt("Set Injector scope."),zl={},Ef={};let Sm;function $e(){return void 0===Sm&&(Sm=new Mm),Sm}class va{}class Np extends va{constructor(r,i,a,h){super(),this.parent=i,this.source=a,this.scopes=h,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Nf(r,m=>this.processProvider(m)),this.records.set(T0,Gl(void 0,this)),h.has("environment")&&this.records.set(va,Gl(void 0,this));const f=this.records.get(Ji);null!=f&&"string"==typeof f.value&&this.scopes.add(f.value),this.injectorDefTypes=new Set(this.get(Gu.multi,an,Zt.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const r of this._ngOnDestroyHooks)r.ngOnDestroy();for(const r of this._onDestroyHooks)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(r){this._onDestroyHooks.push(r)}runInContext(r){this.assertNotDestroyed();const i=Vh(this),a=wo(void 0);try{return r()}finally{Vh(i),wo(a)}}get(r,i=ff,a=Zt.Default){this.assertNotDestroyed();const h=Vh(this),f=wo(void 0);try{if(!(a&Zt.SkipSelf)){let v=this.records.get(r);if(void 0===v){const x=function Em(o){return"function"==typeof o||"object"==typeof o&&o instanceof Yt}(r)&&$c(r);v=x&&this.injectableDefInScope(x)?Gl(Pf(r),zl):null,this.records.set(r,v)}if(null!=v)return this.hydrate(r,v)}return(a&Zt.Self?$e():this.parent).get(r,i=a&Zt.Optional&&i===ff?null:i)}catch(m){if("NullInjectorError"===m.name){if((m[gp]=m[gp]||[]).unshift(It(r)),h)throw m;return function pf(o,r,i,a){const h=o[gp];throw r[ym]&&h.unshift(r[ym]),o.message=function vm(o,r,i,a=null){o=o&&"\n"===o.charAt(0)&&"\u0275"==o.charAt(1)?o.slice(2):o;let h=It(r);if(Array.isArray(r))h=r.map(It).join(" -> ");else if("object"==typeof r){let f=[];for(let m in r)if(r.hasOwnProperty(m)){let v=r[m];f.push(m+":"+("string"==typeof v?JSON.stringify(v):It(v)))}h=`{${f.join(", ")}}`}return`${i}${a?"("+a+")":""}[${h}]: ${o.replace(N1,"\n  ")}`}("\n"+o.message,h,i,a),o.ngTokenPath=h,o[gp]=null,o}(m,r,"R3InjectorError",this.source)}throw m}finally{wo(f),Vh(h)}}resolveInjectorInitializers(){const r=Vh(this),i=wo(void 0);try{const a=this.get(Tp.multi,an,Zt.Self);for(const h of a)h()}finally{Vh(r),wo(i)}}toString(){const r=[],i=this.records;for(const a of i.keys())r.push(It(a));return`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new dt(205,!1)}processProvider(r){let i=oo(r=Gt(r))?r:Gt(r&&r.provide);const a=function P0(o){return ri(o)?Gl(void 0,o.useValue):Gl(Ip(o),zl)}(r);if(oo(r)||!0!==r.multi)this.records.get(i);else{let h=this.records.get(i);h||(h=Gl(void 0,zl,!0),h.factory=()=>Fu(h.multi),this.records.set(i,h)),i=r,h.multi.push(r)}this.records.set(i,a)}hydrate(r,i){return i.value===zl&&(i.value=Ef,i.value=i.factory()),"object"==typeof i.value&&i.value&&function Tm(o){return null!==o&&"object"==typeof o&&"function"==typeof o.ngOnDestroy}(i.value)&&this._ngOnDestroyHooks.add(i.value),i.value}injectableDefInScope(r){if(!r.providedIn)return!1;const i=Gt(r.providedIn);return"string"==typeof i?"any"===i||this.scopes.has(i):this.injectorDefTypes.has(i)}}function Pf(o){const r=$c(o),i=null!==r?r.factory:re(o);if(null!==i)return i;if(o instanceof Yt)throw new dt(204,!1);if(o instanceof Function)return function Dm(o){const r=o.length;if(r>0)throw Rh(r,"?"),new dt(204,!1);const i=function Jx(o){const r=o&&(o[Jn]||o[Os]);if(r){const i=function Zx(o){if(o.hasOwnProperty("name"))return o.name;const r=(""+o).match(/^function\s*([^\s(]+)/);return null===r?"":r[1]}(o);return console.warn(`DEPRECATED: DI is instantiating a token "${i}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${i}" class.`),r}return null}(o);return null!==i?()=>i.factory(o):()=>new o}(o);throw new dt(204,!1)}function Ip(o,r,i){let a;if(oo(o)){const h=Gt(o);return re(h)||Pf(h)}if(ri(o))a=()=>Gt(o.useValue);else if(function $h(o){return!(!o||!o.useFactory)}(o))a=()=>o.useFactory(...Fu(o.deps||[]));else if(function xs(o){return!(!o||!o.useExisting)}(o))a=()=>kt(Gt(o.useExisting));else{const h=Gt(o&&(o.useClass||o.provide));if(!function _m(o){return!!o.deps}(o))return re(h)||Pf(h);a=()=>new h(...Fu(o.deps))}return a}function Gl(o,r,i=!1){return{factory:o,value:r,multi:i?[]:void 0}}function Ap(o){return!!o.\u0275providers}function Nf(o,r){for(const i of o)Array.isArray(i)?Nf(i,r):Ap(i)?Nf(i.\u0275providers,r):r(i)}class N0{}class Nm{resolveComponentFactory(r){throw function kp(o){const r=Error(`No component factory found for ${It(o)}. Did you add it to @NgModule.entryComponents?`);return r.ngComponent=o,r}(r)}}let If=(()=>{class o{}return o.NULL=new Nm,o})();function I0(){return so(Ki(),yt())}function so(o,r){return new Kn(Bo(o,r))}let Kn=(()=>{class o{constructor(i){this.nativeElement=i}}return o.__NG_ELEMENT_ID__=I0,o})();function R1(o){return o instanceof Kn?o.nativeElement:o}class Af{}let Ja=(()=>{class o{}return o.__NG_ELEMENT_ID__=()=>function j1(){const o=yt(),i=Mo(Ki().index,o);return(wn(i)?i:o)[11]}(),o})(),A0=(()=>{class o{}return o.\u0275prov=A({token:o,providedIn:"root",factory:()=>null}),o})();class Wh{constructor(r){this.full=r,this.major=r.split(".")[0],this.minor=r.split(".")[1],this.patch=r.split(".").slice(2).join(".")}}const k0=new Wh("14.2.8"),bp={};function kf(o){return o.ngOriginalError}class $u{constructor(){this._console=console}handleError(r){const i=this._findOriginalError(r);this._console.error("ERROR",r),i&&this._console.error("ORIGINAL ERROR",i)}_findOriginalError(r){let i=r&&kf(r);for(;i&&kf(i);)i=kf(i);return i||null}}const Za=new Map;let G1=0;const Lp="__ngContext__";function Oi(o,r){wn(r)?(o[Lp]=r[20],function Ys(o){Za.set(o[20],o)}(r)):o[Lp]=r}function Rp(o){return o.ownerDocument.defaultView}function wa(o){return o instanceof Function?o():o}var jr=(()=>((jr=jr||{})[jr.Important=1]="Important",jr[jr.DashCase=2]="DashCase",jr))();function $o(o,r){return undefined(o,r)}function jf(o){const r=o[3];return ds(r)?r[3]:r}function Gm(o){return V0(o[13])}function $m(o){return V0(o[4])}function V0(o){for(;null!==o&&!ds(o);)o=o[4];return o}function xa(o,r,i,a,h){if(null!=a){let f,m=!1;ds(a)?f=a:wn(a)&&(m=!0,a=a[0]);const v=Un(a);0===o&&null!==i?null==h?W0(r,i,v):Wu(r,i,v,h||null,!0):1===o&&null!==i?Wu(r,i,v,h||null,!0):2===o?function qm(o,r,i){const a=Bf(o,r);a&&function Y0(o,r,i,a){o.removeChild(r,i,a)}(o,a,r,i)}(r,v,m):3===o&&r.destroyNode(v),null!=f&&function eC(o,r,i,a,h){const f=i[7];f!==Un(i)&&xa(r,o,a,f,h);for(let v=10;v<i.length;v++){const x=i[v];Wo(x[1],x,o,r,a,f)}}(r,o,f,i,h)}}function U0(o,r,i){return o.createElement(r,i)}function Ym(o,r){const i=o[9],a=i.indexOf(r),h=r[3];512&r[2]&&(r[2]&=-513,em(h,-1)),i.splice(a,1)}function z0(o,r){if(o.length<=10)return;const i=10+r,a=o[i];if(a){const h=a[17];null!==h&&h!==o&&Ym(h,a),r>0&&(o[i-1][4]=a[4]);const f=ys(o,10+r);!function q1(o,r){Wo(o,r,r[11],2,null,null),r[0]=null,r[6]=null}(a[1],a);const m=f[19];null!==m&&m.detachView(f[1]),a[3]=null,a[4]=null,a[2]&=-65}return a}function Bp(o,r){if(!(128&r[2])){const i=r[11];i.destroyNode&&Wo(o,r,i,3,null,null),function H0(o){let r=o[13];if(!r)return Xm(o[1],o);for(;r;){let i=null;if(wn(r))i=r[13];else{const a=r[10];a&&(i=a)}if(!i){for(;r&&!r[4]&&r!==o;)wn(r)&&Xm(r[1],r),r=r[3];null===r&&(r=o),wn(r)&&Xm(r[1],r),i=r&&r[4]}r=i}}(r)}}function Xm(o,r){if(!(128&r[2])){r[2]&=-65,r[2]|=128,function Xh(o,r){let i;if(null!=o&&null!=(i=o.destroyHooks))for(let a=0;a<i.length;a+=2){const h=r[i[a]];if(!(h instanceof Nu)){const f=i[a+1];if(Array.isArray(f))for(let m=0;m<f.length;m+=2){const v=h[f[m]],x=f[m+1];try{x.call(v)}finally{}}else try{f.call(h)}finally{}}}}(o,r),function Qa(o,r){const i=o.cleanup,a=r[7];let h=-1;if(null!==i)for(let f=0;f<i.length-1;f+=2)if("string"==typeof i[f]){const m=i[f+1],v="function"==typeof m?m(r):Un(r[m]),x=a[h=i[f+2]],S=i[f+3];"boolean"==typeof S?v.removeEventListener(i[f],x,S):S>=0?a[h=S]():a[h=-S].unsubscribe(),f+=2}else{const m=a[h=i[f+1]];i[f].call(m)}if(null!==a){for(let f=h+1;f<a.length;f++)(0,a[f])();r[7]=null}}(o,r),1===r[1].type&&r[11].destroy();const i=r[17];if(null!==i&&ds(r[3])){i!==r[3]&&Ym(i,r);const a=r[19];null!==a&&a.detachView(o)}!function F0(o){Za.delete(o[20])}(r)}}function G0(o,r,i){return function $0(o,r,i){let a=r;for(;null!==a&&40&a.type;)a=(r=a).parent;if(null===a)return i[0];if(2&a.flags){const h=o.data[a.directiveStart].encapsulation;if(h===Ls.None||h===Ls.Emulated)return null}return Bo(a,i)}(o,r.parent,i)}function Wu(o,r,i,a,h){o.insertBefore(r,i,a,h)}function W0(o,r,i){o.appendChild(r,i)}function K0(o,r,i,a,h){null!==a?Wu(o,r,i,a,h):W0(o,r,i)}function Bf(o,r){return o.parentNode(r)}function qa(o,r,i){return Jm(o,r,i)}let Jm=function Up(o,r,i){return 40&o.type?Bo(o,i):null};function Hp(o,r,i,a){const h=G0(o,a,r),f=r[11],v=qa(a.parent||r[6],a,r);if(null!=h)if(Array.isArray(i))for(let x=0;x<i.length;x++)K0(f,h,i[x],v,!1);else K0(f,h,i,v,!1)}function Xs(o,r){if(null!==r){const i=r.type;if(3&i)return Bo(r,o);if(4&i)return At(-1,o[r.index]);if(8&i){const a=r.child;if(null!==a)return Xs(o,a);{const h=o[r.index];return ds(h)?At(-1,h):Un(h)}}if(32&i)return $o(r,o)()||Un(o[r.index]);{const a=J0(o,r);return null!==a?Array.isArray(a)?a[0]:Xs(jf(o[16]),a):Xs(o,r.next)}}return null}function J0(o,r){return null!==r?o[16][6].projection[r.projection]:null}function At(o,r){const i=10+o+1;if(i<r.length){const a=r[i],h=a[1].firstChild;if(null!==h)return Xs(a,h)}return r[7]}function Z(o,r,i,a,h,f,m){for(;null!=i;){const v=a[i.index],x=i.type;if(m&&0===r&&(v&&Oi(Un(v),a),i.flags|=4),64!=(64&i.flags))if(8&x)Z(o,r,i.child,a,h,f,!1),xa(r,o,h,v,f);else if(32&x){const S=$o(i,a);let T;for(;T=S();)xa(r,o,h,T,f);xa(r,o,h,v,f)}else 16&x?Z0(o,r,a,i,h,f):xa(r,o,h,v,f);i=m?i.projectionNext:i.next}}function Wo(o,r,i,a,h,f){Z(i,a,o.firstChild,r,h,f,!1)}function Z0(o,r,i,a,h,f){const m=i[16],x=m[6].projection[a.projection];if(Array.isArray(x))for(let S=0;S<x.length;S++)xa(r,o,h,x[S],f);else Z(o,r,x,m[3],h,f,!0)}function Q0(o,r,i){o.setAttribute(r,"style",i)}function Uf(o,r,i){""===i?o.removeAttribute(r,"class"):o.setAttribute(r,"class",i)}function zp(o,r,i){let a=o.length;for(;;){const h=o.indexOf(r,i);if(-1===h)return h;if(0===h||o.charCodeAt(h-1)<=32){const f=r.length;if(h+f===a||o.charCodeAt(h+f)<=32)return h}i=h+1}}const q0="ng-template";function nC(o,r,i){let a=0;for(;a<o.length;){let h=o[a++];if(i&&"class"===h){if(h=o[a],-1!==zp(h.toLowerCase(),r,0))return!0}else if(1===h){for(;a<o.length&&"string"==typeof(h=o[a++]);)if(h.toLowerCase()===r)return!0;return!1}}return!1}function ey(o){return 4===o.type&&o.value!==q0}function iC(o,r,i){return r===(4!==o.type||i?o.value:q0)}function rC(o,r,i){let a=4;const h=o.attrs||[],f=function tw(o){for(let r=0;r<o.length;r++)if(rp(o[r]))return r;return o.length}(h);let m=!1;for(let v=0;v<r.length;v++){const x=r[v];if("number"!=typeof x){if(!m)if(4&a){if(a=2|1&a,""!==x&&!iC(o,x,i)||""===x&&1===r.length){if(Js(a))return!1;m=!0}}else{const S=8&a?x:r[++v];if(8&a&&null!==o.attrs){if(!nC(o.attrs,S,i)){if(Js(a))return!1;m=!0}continue}const N=oC(8&a?"class":x,h,ey(o),i);if(-1===N){if(Js(a))return!1;m=!0;continue}if(""!==S){let F;F=N>f?"":h[N+1].toLowerCase();const j=8&a?F:null;if(j&&-1!==zp(j,S,0)||2&a&&S!==F){if(Js(a))return!1;m=!0}}}}else{if(!m&&!Js(a)&&!Js(x))return!1;if(m&&Js(x))continue;m=!1,a=x|1&a}}return Js(a)||m}function Js(o){return 0==(1&o)}function oC(o,r,i,a){if(null===r)return-1;let h=0;if(a||!i){let f=!1;for(;h<r.length;){const m=r[h];if(m===o)return h;if(3===m||6===m)f=!0;else{if(1===m||2===m){let v=r[++h];for(;"string"==typeof v;)v=r[++h];continue}if(4===m)break;if(0===m){h+=4;continue}}h+=f?1:2}return-1}return function wt(o,r){let i=o.indexOf(4);if(i>-1)for(i++;i<o.length;){const a=o[i];if("number"==typeof a)return-1;if(a===r)return i;i++}return-1}(r,o)}function sC(o,r,i=!1){for(let a=0;a<r.length;a++)if(rC(o,r[a],i))return!0;return!1}function ew(o,r){t:for(let i=0;i<r.length;i++){const a=r[i];if(o.length===a.length){for(let h=0;h<o.length;h++)if(o[h]!==a[h])continue t;return!0}}return!1}function iy(o,r){return o?":not("+r.trim()+")":r}function aC(o){let r=o[0],i=1,a=2,h="",f=!1;for(;i<o.length;){let m=o[i];if("string"==typeof m)if(2&a){const v=o[++i];h+="["+m+(v.length>0?'="'+v+'"':"")+"]"}else 8&a?h+="."+m:4&a&&(h+=" "+m);else""!==h&&!Js(m)&&(r+=iy(f,h),h=""),a=m,f=f||!Js(a);i++}return""!==h&&(r+=iy(f,h)),r}const z={};function ee(o){nw(Ye(),yt(),Dr()+o,!1)}function nw(o,r,i,a){if(!a)if(3==(3&r[2])){const f=o.preOrderCheckHooks;null!==f&&Pu(r,f,i)}else{const f=o.preOrderHooks;null!==f&&rf(r,f,0,i)}Ga(i)}function Ku(o,r=null,i=null,a){const h=oy(o,r,i,a);return h.resolveInjectorInitializers(),h}function oy(o,r=null,i=null,a,h=new Set){const f=[i||an,E0(o)];return a=a||("object"==typeof o?void 0:It(o)),new Np(f,r||$e(),a||null,h)}let fr=(()=>{class o{static create(i,a){if(Array.isArray(i))return Ku({name:""},a,i,"");{const h=i.name??"";return Ku({name:h},i.parent,i.providers,h)}}}return o.THROW_IF_NOT_FOUND=ff,o.NULL=new Mm,o.\u0275prov=A({token:o,providedIn:"any",factory:()=>kt(T0)}),o.__NG_ELEMENT_ID__=-1,o})();function ct(o,r=Zt.Default){const i=yt();return null===i?kt(o,r):Jv(Ki(),i,Gt(o),r)}function qh(){throw new Error("invalid")}function _o(o,r){return o<<17|r<<2}function Zs(o){return o>>17&32767}function Wf(o){return 2|o}function nl(o){return(131068&o)>>2}function dy(o,r){return-131069&o|r<<2}function il(o){return 1|o}function xy(o,r){const i=o.contentQueries;if(null!==i)for(let a=0;a<i.length;a+=2){const h=i[a],f=i[a+1];if(-1!==f){const m=o.data[f];rm(h),m.contentQueries(2,r[f],f)}}}function Jf(o,r,i,a,h,f,m,v,x,S,T){const N=r.blueprint.slice();return N[0]=h,N[2]=76|a,(null!==T||o&&1024&o[2])&&(N[2]|=1024),Vv(N),N[3]=N[15]=o,N[8]=i,N[10]=m||o&&o[10],N[11]=v||o&&o[11],N[12]=x||o&&o[12]||null,N[9]=S||o&&o[9]||null,N[6]=f,N[20]=function $1(){return G1++}(),N[21]=T,N[16]=2==r.type?o[16]:N,N}function Yl(o,r,i,a,h){let f=o.data[r];if(null===f)f=function Cy(o,r,i,a,h){const f=Uv(),m=Xe(),x=o.data[r]=function Dy(o,r,i,a,h,f){return{type:i,index:a,insertBeforeIndex:null,injectorIndex:r?r.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,m?f:f&&f.parent,i,r,a,h);return null===o.firstChild&&(o.firstChild=x),null!==f&&(m?null==f.child&&null!==x.parent&&(f.child=x):null===f.next&&(f.next=x)),x}(o,r,i,a,h),function Bs(){return we.lFrame.inI18n}()&&(f.flags|=64);else if(64&f.type){f.type=i,f.value=a,f.attrs=h;const m=function Yi(){const o=we.lFrame,r=o.currentTNode;return o.isParent?r:r.parent}();f.injectorIndex=null===m?-1:m.injectorIndex}return ha(f,!0),f}function nc(o,r,i,a){if(0===i)return-1;const h=r.length;for(let f=0;f<i;f++)r.push(a),o.blueprint.push(a),o.data.push(null);return h}function My(o,r,i){Eu(r);try{const a=o.viewQuery;null!==a&&ai(1,a,i);const h=o.template;null!==h&&pw(o,r,h,1,i),o.firstCreatePass&&(o.firstCreatePass=!1),o.staticContentQueries&&xy(o,r),o.staticViewQueries&&ai(2,o.viewQuery,i);const f=o.components;null!==f&&function dw(o,r){for(let i=0;i<r.length;i++)ed(o,r[i])}(r,f)}catch(a){throw o.firstCreatePass&&(o.incompleteFirstPass=!0,o.firstCreatePass=!1),a}finally{r[2]&=-5,zv()}}function nn(o,r,i,a){const h=r[2];if(128!=(128&h)){Eu(r);try{Vv(r),function Ah(o){return we.lFrame.bindingIndex=o}(o.bindingStartIndex),null!==i&&pw(o,r,i,2,a);const m=3==(3&h);if(m){const S=o.preOrderCheckHooks;null!==S&&Pu(r,S,null)}else{const S=o.preOrderHooks;null!==S&&rf(r,S,0,null),bl(r,0)}if(function Nr(o){for(let r=Gm(o);null!==r;r=$m(r)){if(!r[2])continue;const i=r[9];for(let a=0;a<i.length;a++){const h=i[a],f=h[3];0==(512&h[2])&&em(f,1),h[2]|=512}}}(r),function _C(o){for(let r=Gm(o);null!==r;r=$m(r))for(let i=10;i<r.length;i++){const a=r[i],h=a[1];Zd(a)&&nn(h,a,h.template,a[8])}}(r),null!==o.contentQueries&&xy(o,r),m){const S=o.contentCheckHooks;null!==S&&Pu(r,S)}else{const S=o.contentHooks;null!==S&&rf(r,S,1),bl(r,1)}!function CC(o,r){const i=o.hostBindingOpCodes;if(null!==i)try{for(let a=0;a<i.length;a++){const h=i[a];if(h<0)Ga(~h);else{const f=h,m=i[++a],v=i[++a];za(m,f),v(2,r[f])}}}finally{Ga(-1)}}(o,r);const v=o.components;null!==v&&function MC(o,r){for(let i=0;i<r.length;i++)qf(o,r[i])}(r,v);const x=o.viewQuery;if(null!==x&&ai(2,x,a),m){const S=o.viewCheckHooks;null!==S&&Pu(r,S)}else{const S=o.viewHooks;null!==S&&rf(r,S,2),bl(r,2)}!0===o.firstUpdatePass&&(o.firstUpdatePass=!1),r[2]&=-41,512&r[2]&&(r[2]&=-513,em(r[3],-1))}finally{zv()}}}function pw(o,r,i,a,h){const f=Dr(),m=2&a;try{Ga(-1),m&&r.length>22&&nw(o,r,22,!1),i(a,h)}finally{Ga(f)}}function gw(o,r,i){if(Qg(r)){const h=r.directiveEnd;for(let f=r.directiveStart;f<h;f++){const m=o.data[f];m.contentQueries&&m.contentQueries(1,i[f],f)}}}function Sy(o,r,i){!Qn()||(function Yo(o,r,i,a){const h=i.directiveStart,f=i.directiveEnd;o.firstCreatePass||af(i,r),Oi(a,r);const m=i.initialInputs;for(let v=h;v<f;v++){const x=o.data[v],S=Rs(x);S&&Eo(r,i,x);const T=lf(r,o,v,i);Oi(T,r),null!==m&&mD(0,v-h,T,x,0,m),S&&(Mo(i.index,r)[8]=T)}}(o,r,i,Bo(i,r)),128==(128&i.flags)&&function ig(o,r,i){const a=i.directiveStart,h=i.directiveEnd,f=i.index,m=function Uo(){return we.lFrame.currentDirectiveIndex}();try{Ga(f);for(let v=a;v<h;v++){const x=o.data[v],S=r[v];Xi(v),(null!==x.hostBindings||0!==x.hostVars||null!==x.hostAttrs)&&rg(x,S)}}finally{Ga(-1),Xi(m)}}(o,r,i))}function dr(o,r,i=Bo){const a=r.localNames;if(null!==a){let h=r.index+1;for(let f=0;f<a.length;f+=2){const m=a[f+1],v=-1===m?i(r,o):o[m];o[h++]=v}}}function ng(o){const r=o.tView;return null===r||r.incompleteFirstPass?o.tView=st(1,null,o.template,o.decls,o.vars,o.directiveDefs,o.pipeDefs,o.viewQuery,o.schemas,o.consts):r}function st(o,r,i,a,h,f,m,v,x,S){const T=22+a,N=T+h,F=function Zf(o,r){const i=[];for(let a=0;a<r;a++)i.push(a<o?null:z);return i}(T,N),j="function"==typeof S?S():S;return F[1]={type:o,blueprint:F,template:i,queries:null,viewQuery:v,declTNode:r,data:F.slice().fill(null,T),bindingStartIndex:T,expandoStartIndex:N,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof m?m():m,firstChild:null,schemas:x,consts:j,incompleteFirstPass:!1}}function mw(o,r,i,a){const h=nd(r);null===i?h.push(a):(h.push(i),o.firstCreatePass&&id(o).push(a,h.length-1))}function ol(o,r,i){for(let a in o)if(o.hasOwnProperty(a)){const h=o[a];(i=null===i?{}:i).hasOwnProperty(a)?i[a].push(r,h):i[a]=[r,h]}return i}function yw(o,r){const a=r.directiveEnd,h=o.data,f=r.attrs,m=[];let v=null,x=null;for(let S=r.directiveStart;S<a;S++){const T=h[S],N=T.inputs,F=null===f||ey(r)?null:DC(N,f);m.push(F),v=ol(N,S,v),x=ol(T.outputs,S,x)}null!==v&&(v.hasOwnProperty("class")&&(r.flags|=16),v.hasOwnProperty("style")&&(r.flags|=32)),r.initialInputs=m,r.inputs=v,r.outputs=x}function pi(o,r){const i=Mo(r,o);16&i[2]||(i[2]|=32)}function _y(o,r,i,a){let h=!1;if(Qn()){const f=function ww(o,r,i){const a=o.directiveRegistry;let h=null;if(a)for(let f=0;f<a.length;f++){const m=a[f];sC(i,m.selectors,!1)&&(h||(h=[]),Ol(af(i,r),o,m.type),Rs(m)?(Qf(o,i),h.unshift(m)):h.push(m))}return h}(o,r,i),m=null===a?null:{"":-1};if(null!==f){h=!0,se(i,o.data.length,f.length);for(let T=0;T<f.length;T++){const N=f[T];N.providersResolver&&N.providersResolver(N)}let v=!1,x=!1,S=nc(o,r,f.length,null);for(let T=0;T<f.length;T++){const N=f[T];i.mergedAttrs=kh(i.mergedAttrs,N.hostAttrs),Cw(o,i,r,S,N),Be(S,N,m),null!==N.contentQueries&&(i.flags|=8),(null!==N.hostBindings||null!==N.hostAttrs||0!==N.hostVars)&&(i.flags|=128);const F=N.type.prototype;!v&&(F.ngOnChanges||F.ngOnInit||F.ngDoCheck)&&((o.preOrderHooks||(o.preOrderHooks=[])).push(i.index),v=!0),!x&&(F.ngOnChanges||F.ngDoCheck)&&((o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(i.index),x=!0),S++}yw(o,i)}m&&function xw(o,r,i){if(r){const a=o.localNames=[];for(let h=0;h<r.length;h+=2){const f=i[r[h+1]];if(null==f)throw new dt(-301,!1);a.push(r[h],f)}}}(i,a,m)}return i.mergedAttrs=kh(i.mergedAttrs,i.attrs),h}function vw(o,r,i,a,h,f){const m=f.hostBindings;if(m){let v=o.hostBindingOpCodes;null===v&&(v=o.hostBindingOpCodes=[]);const x=~r.index;(function Ko(o){let r=o.length;for(;r>0;){const i=o[--r];if("number"==typeof i&&i<0)return i}return 0})(v)!=x&&v.push(x),v.push(a,h,m)}}function rg(o,r){null!==o.hostBindings&&o.hostBindings(1,r)}function Qf(o,r){r.flags|=2,(o.components||(o.components=[])).push(r.index)}function Be(o,r,i){if(i){if(r.exportAs)for(let a=0;a<r.exportAs.length;a++)i[r.exportAs[a]]=o;Rs(r)&&(i[""]=o)}}function se(o,r,i){o.flags|=1,o.directiveStart=r,o.directiveEnd=r+i,o.providerIndexes=r}function Cw(o,r,i,a,h){o.data[a]=h;const f=h.factory||(h.factory=re(h.type)),m=new Nu(f,Rs(h),ct);o.blueprint[a]=m,i[a]=m,vw(o,r,0,a,nc(o,i,h.hostVars,z),h)}function Eo(o,r,i){const a=Bo(r,o),h=ng(i),f=o[10],m=og(o,Jf(o,h,null,i.onPush?32:16,a,r,f,f.createRenderer(a,i),null,null,null));o[r.index]=m}function xe(o,r,i,a,h,f){const m=Bo(o,r);!function Ty(o,r,i,a,h,f,m){if(null==f)o.removeAttribute(r,h,i);else{const v=null==m?ye(f):m(f,a||"",h);o.setAttribute(r,h,v,i)}}(r[11],m,f,o.value,i,a,h)}function mD(o,r,i,a,h,f){const m=f[r];if(null!==m){const v=a.setInput;for(let x=0;x<m.length;){const S=m[x++],T=m[x++],N=m[x++];null!==v?a.setInput(i,N,S,T):i[T]=N}}}function DC(o,r){let i=null,a=0;for(;a<r.length;){const h=r[a];if(0!==h)if(5!==h){if("number"==typeof h)break;o.hasOwnProperty(h)&&(null===i&&(i=[]),i.push(h,o[h],r[a+1])),a+=2}else a+=2;else a+=4}return i}function Pt(o,r,i,a){return new Array(o,!0,!1,r,null,0,a,i,null,null)}function qf(o,r){const i=Mo(r,o);if(Zd(i)){const a=i[1];48&i[2]?nn(a,i,a.template,i[8]):i[5]>0&&td(i)}}function td(o){for(let a=Gm(o);null!==a;a=$m(a))for(let h=10;h<a.length;h++){const f=a[h];if(Zd(f))if(512&f[2]){const m=f[1];nn(m,f,m.template,f[8])}else f[5]>0&&td(f)}const i=o[1].components;if(null!==i)for(let a=0;a<i.length;a++){const h=Mo(i[a],o);Zd(h)&&h[5]>0&&td(h)}}function ed(o,r){const i=Mo(r,o),a=i[1];(function TC(o,r){for(let i=r.length;i<o.blueprint.length;i++)r.push(o.blueprint[i])})(a,i),My(a,i,i[8])}function og(o,r){return o[13]?o[14][4]=r:o[13]=r,o[14]=r,r}function sg(o){for(;o;){o[2]|=32;const r=jf(o);if(R(o)&&!r)return o;o=r}return null}function ag(o,r,i,a=!0){const h=r[10];h.begin&&h.begin();try{nn(o,r,o.template,i)}catch(m){throw a&&Sw(r,m),m}finally{h.end&&h.end()}}function ai(o,r,i){rm(0),r(o,i)}function nd(o){return o[7]||(o[7]=[])}function id(o){return o.cleanup||(o.cleanup=[])}function Sw(o,r){const i=o[9],a=i?i.get($u,null):null;a&&a.handleError(r)}function Py(o,r,i,a,h){for(let f=0;f<i.length;){const m=i[f++],v=i[f++],x=r[m],S=o.data[m];null!==S.setInput?S.setInput(x,h,a,v):x[v]=h}}function sl(o,r,i){const a=Jd(r,o);!function Ca(o,r,i){o.setValue(r,i)}(o[11],a,i)}function lg(o,r,i){let a=i?o.styles:null,h=i?o.classes:null,f=0;if(null!==r)for(let m=0;m<r.length;m++){const v=r[m];"number"==typeof v?f=v:1==f?h=la(h,v):2==f&&(a=la(a,v+": "+r[++m]+";"))}i?o.styles=a:o.stylesWithoutHost=a,i?o.classes=h:o.classesWithoutHost=h}function ug(o,r,i,a,h=!1){for(;null!==i;){const f=r[i.index];if(null!==f&&a.push(Un(f)),ds(f))for(let v=10;v<f.length;v++){const x=f[v],S=x[1].firstChild;null!==S&&ug(x[1],x,S,a)}const m=i.type;if(8&m)ug(o,r,i.child,a);else if(32&m){const v=$o(i,r);let x;for(;x=v();)a.push(x)}else if(16&m){const v=J0(r,i);if(Array.isArray(v))a.push(...v);else{const x=jf(r[16]);ug(x[1],x,v,a,!0)}}i=h?i.projectionNext:i.next}return a}class ic{constructor(r,i){this._lView=r,this._cdRefInjectingView=i,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const r=this._lView,i=r[1];return ug(i,r,i.firstChild,[])}get context(){return this._lView[8]}set context(r){this._lView[8]=r}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[3];if(ds(r)){const i=r[8],a=i?i.indexOf(this):-1;a>-1&&(z0(r,a),ys(i,a))}this._attachedToViewContainer=!1}Bp(this._lView[1],this._lView)}onDestroy(r){mw(this._lView[1],this._lView,null,r)}markForCheck(){sg(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){ag(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new dt(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function oi(o,r){Wo(o,r,r[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(r){if(this._attachedToViewContainer)throw new dt(902,!1);this._appRef=r}}class Ny extends ic{constructor(r){super(r),this._view=r}detectChanges(){const r=this._view;ag(r[1],r,r[8],!1)}checkNoChanges(){}get context(){return null}}class od extends If{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const i=ot(r);return new Xo(i,this.ngModule)}}function EC(o){const r=[];for(let i in o)o.hasOwnProperty(i)&&r.push({propName:o[i],templateName:i});return r}class Jl{constructor(r,i){this.injector=r,this.parentInjector=i}get(r,i,a){const h=this.injector.get(r,bp,a);return h!==bp||i===bp?h:this.parentInjector.get(r,i,a)}}class Xo extends N0{constructor(r,i){super(),this.componentDef=r,this.ngModule=i,this.componentType=r.type,this.selector=function lC(o){return o.map(aC).join(",")}(r.selectors),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!i}get inputs(){return EC(this.componentDef.inputs)}get outputs(){return EC(this.componentDef.outputs)}create(r,i,a,h){let f=(h=h||this.ngModule)instanceof va?h:h?.injector;f&&null!==this.componentDef.getStandaloneInjector&&(f=this.componentDef.getStandaloneInjector(f)||f);const m=f?new Jl(r,f):r,v=m.get(Af,null);if(null===v)throw new dt(407,!1);const x=m.get(A0,null),S=v.createRenderer(null,this.componentDef),T=this.componentDef.selectors[0][0]||"div",N=a?function SC(o,r,i){return o.selectRootElement(r,i===Ls.ShadowDom)}(S,a,this.componentDef.encapsulation):U0(v.createRenderer(null,this.componentDef),T,function Po(o){const r=o.toLowerCase();return"svg"===r?"svg":"math"===r?"math":null}(T)),F=this.componentDef.onPush?288:272,j=st(0,null,null,1,0,null,null,null,null,null),B=Jf(null,j,null,F,null,null,v,S,x,m,null);let W,it;Eu(B);try{const rt=function sd(o,r,i,a,h,f){const m=i[1];i[22]=o;const x=Yl(m,22,2,"#host",null),S=x.mergedAttrs=r.hostAttrs;null!==S&&(lg(x,S,!0),null!==o&&(ip(h,o,S),null!==x.classes&&Uf(h,o,x.classes),null!==x.styles&&Q0(h,o,x.styles)));const T=a.createRenderer(o,r),N=Jf(i,ng(r),null,r.onPush?32:16,i[22],x,a,T,f||null,null,null);return m.firstCreatePass&&(Ol(af(x,i),m,r.type),Qf(m,x),se(x,i.length,1)),og(i,N),i[22]=N}(N,this.componentDef,B,v,S);if(N)if(a)ip(S,N,["ng-version",k0.full]);else{const{attrs:ft,classes:at}=function Di(o){const r=[],i=[];let a=1,h=2;for(;a<o.length;){let f=o[a];if("string"==typeof f)2===h?""!==f&&r.push(f,o[++a]):8===h&&i.push(f);else{if(!Js(h))break;h=f}a++}return{attrs:r,classes:i}}(this.componentDef.selectors[0]);ft&&ip(S,N,ft),at&&at.length>0&&Uf(S,N,at.join(" "))}if(it=tm(j,22),void 0!==i){const ft=it.projection=[];for(let at=0;at<this.ngContentSelectors.length;at++){const Tt=i[at];ft.push(null!=Tt?Array.from(Tt):null)}}W=function Iy(o,r,i,a){const h=i[1],f=function Xl(o,r,i){const a=Ki();o.firstCreatePass&&(i.providersResolver&&i.providersResolver(i),Cw(o,a,r,nc(o,r,1,null),i),yw(o,a));const h=lf(r,o,a.directiveStart,a);Oi(h,r);const f=Bo(a,r);return f&&Oi(f,r),h}(h,i,r);if(o[8]=i[8]=f,null!==a)for(const v of a)v(f,r);if(r.contentQueries){const v=Ki();r.contentQueries(1,f,v.directiveStart)}const m=Ki();return!h.firstCreatePass||null===r.hostBindings&&null===r.hostAttrs||(Ga(m.index),vw(i[1],m,0,m.directiveStart,m.directiveEnd,r),rg(r,f)),f}(rt,this.componentDef,B,[Ay]),My(j,B,null)}finally{zv()}return new Zl(this.componentType,W,so(it,B),B,it)}}class Zl extends class Pm{}{constructor(r,i,a,h,f){super(),this.location=a,this._rootLView=h,this._tNode=f,this.instance=i,this.hostView=this.changeDetectorRef=new Ny(h),this.componentType=r}setInput(r,i){const a=this._tNode.inputs;let h;if(null!==a&&(h=a[r])){const f=this._rootLView;Py(f[1],f,h,r,i),pi(f,this._tNode.index)}}get injector(){return new bu(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}function Ay(){const o=Ki();nf(yt()[1],o)}function fn(o){let r=function hg(o){return Object.getPrototypeOf(o.prototype).constructor}(o.type),i=!0;const a=[o];for(;r;){let h;if(Rs(o))h=r.\u0275cmp||r.\u0275dir;else{if(r.\u0275cmp)throw new dt(903,!1);h=r.\u0275dir}if(h){if(i){a.push(h);const m=o;m.inputs=ld(o.inputs),m.declaredInputs=ld(o.declaredInputs),m.outputs=ld(o.outputs);const v=h.hostBindings;v&&ud(o,v);const x=h.viewQuery,S=h.contentQueries;if(x&&oc(o,x),S&&cg(o,S),ce(o.inputs,h.inputs),ce(o.declaredInputs,h.declaredInputs),ce(o.outputs,h.outputs),Rs(h)&&h.data.animation){const T=o.data;T.animation=(T.animation||[]).concat(h.data.animation)}}const f=h.features;if(f)for(let m=0;m<f.length;m++){const v=f[m];v&&v.ngInherit&&v(o),v===fn&&(i=!1)}}r=Object.getPrototypeOf(r)}!function ad(o){let r=0,i=null;for(let a=o.length-1;a>=0;a--){const h=o[a];h.hostVars=r+=h.hostVars,h.hostAttrs=kh(h.hostAttrs,i=kh(i,h.hostAttrs))}}(a)}function ld(o){return o===Th?{}:o===an?[]:o}function oc(o,r){const i=o.viewQuery;o.viewQuery=i?(a,h)=>{r(a,h),i(a,h)}:r}function cg(o,r){const i=o.contentQueries;o.contentQueries=i?(a,h,f)=>{r(a,h,f),i(a,h,f)}:r}function ud(o,r){const i=o.hostBindings;o.hostBindings=i?(a,h)=>{r(a,h),i(a,h)}:r}let dn=null;function Ju(){if(!dn){const o=bn.Symbol;if(o&&o.iterator)dn=o.iterator;else{const r=Object.getOwnPropertyNames(Map.prototype);for(let i=0;i<r.length;++i){const a=r[i];"entries"!==a&&"size"!==a&&Map.prototype[a]===Map.prototype.entries&&(dn=a)}}}return dn}function dg(o){return!!by(o)&&(Array.isArray(o)||!(o instanceof Map)&&Ju()in o)}function by(o){return null!==o&&("function"==typeof o||"object"==typeof o)}function _a(o,r,i){return o[r]=i}function Vr(o,r,i){return!Object.is(o[r],i)&&(o[r]=i,!0)}function Ms(o,r,i,a){const h=Vr(o,r,i);return Vr(o,r+1,a)||h}function Io(o,r,i,a){const h=yt();return Vr(h,So(),r)&&(Ye(),xe(qn(),h,o,r,i,a)),Io}function Yn(o,r,i,a,h,f){const v=Ms(o,function zn(){return we.lFrame.bindingIndex}(),i,h);return no(2),v?r+ye(i)+a+ye(h)+f:z}function li(o,r,i,a,h,f,m,v){const x=yt(),S=Ye(),T=o+22,N=S.firstCreatePass?function AC(o,r,i,a,h,f,m,v,x){const S=r.consts,T=Yl(r,o,4,m||null,kl(S,v));_y(r,i,T,kl(S,x)),nf(r,T);const N=T.tViews=st(2,T,a,h,f,r.directiveRegistry,r.pipeRegistry,null,r.schemas,S);return null!==r.queries&&(r.queries.template(r,T),N.queries=r.queries.embeddedTView(T)),T}(T,S,x,r,i,a,h,f,m):S.data[T];ha(N,!1);const F=x[11].createComment("");Hp(S,x,F,N),Oi(F,x),og(x,x[T]=Pt(F,x,F,N)),Dt(N)&&Sy(S,x,N),null!=m&&dr(x,N,v)}function ae(o,r,i){const a=yt();return Vr(a,So(),r)&&function To(o,r,i,a,h,f,m,v){const x=Bo(r,i);let T,S=r.inputs;!v&&null!=S&&(T=S[a])?(Py(o,i,T,a,h),Xd(r)&&pi(i,r.index)):3&r.type&&(a=function _i(o){return"class"===o?"className":"for"===o?"htmlFor":"formaction"===o?"formAction":"innerHtml"===o?"innerHTML":"readonly"===o?"readOnly":"tabindex"===o?"tabIndex":o}(a),h=null!=m?m(h,r.value||"",a):h,f.setProperty(x,a,h))}(Ye(),qn(),a,o,r,a[11],i,!1),ae}function Iw(o,r,i,a,h){const m=h?"class":"style";Py(o,i,r.inputs[m],m,a)}function le(o,r,i,a){const h=yt(),f=Ye(),m=22+o,v=h[11],x=h[m]=U0(v,r,function ep(){return we.lFrame.currentNamespace}()),S=f.firstCreatePass?function Aw(o,r,i,a,h,f,m){const v=r.consts,S=Yl(r,o,2,h,kl(v,f));return _y(r,i,S,kl(v,m)),null!==S.attrs&&lg(S,S.attrs,!1),null!==S.mergedAttrs&&lg(S,S.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,S),S}(m,f,h,0,r,i,a):f.data[m];ha(S,!0);const T=S.mergedAttrs;null!==T&&ip(v,x,T);const N=S.classes;null!==N&&Uf(v,x,N);const F=S.styles;return null!==F&&Q0(v,x,F),64!=(64&S.flags)&&Hp(f,h,x,S),0===function d1(){return we.lFrame.elementDepthCount}()&&Oi(x,h),function Hn(){we.lFrame.elementDepthCount++}(),Dt(S)&&(Sy(f,h,S),gw(f,S,h)),null!==a&&dr(h,S),le}function de(){let o=Ki();Xe()?Tu():(o=o.parent,ha(o,!1));const r=o;!function _u(){we.lFrame.elementDepthCount--}();const i=Ye();return i.firstCreatePass&&(nf(i,o),Qg(o)&&i.queries.elementEnd(o)),null!=r.classesWithoutHost&&function sf(o){return 0!=(16&o.flags)}(r)&&Iw(i,r,yt(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function C1(o){return 0!=(32&o.flags)}(r)&&Iw(i,r,yt(),r.stylesWithoutHost,!1),de}function Ta(o,r,i,a){return le(o,r,i,a),de(),Ta}function lc(o,r,i){const a=yt(),h=Ye(),f=o+22,m=h.firstCreatePass?function kC(o,r,i,a,h){const f=r.consts,m=kl(f,a),v=Yl(r,o,8,"ng-container",m);return null!==m&&lg(v,m,!0),_y(r,i,v,kl(f,h)),null!==r.queries&&r.queries.elementStart(r,v),v}(f,h,a,r,i):h.data[f];ha(m,!0);const v=a[f]=a[11].createComment("");return Hp(h,a,v,m),Oi(v,a),Dt(m)&&(Sy(h,a,m),gw(h,m,a)),null!=i&&dr(a,m),lc}function Qs(){let o=Ki();const r=Ye();return Xe()?Tu():(o=o.parent,ha(o,!1)),r.firstCreatePass&&(nf(r,o),Qg(o)&&r.queries.elementEnd(o)),Qs}function Ur(o,r,i){return lc(o,r,i),Qs(),Ur}function Jo(){return yt()}function uc(o){return!!o&&"function"==typeof o.then}const cd=function hd(o){return!!o&&"function"==typeof o.subscribe};function Fe(o,r,i,a){const h=yt(),f=Ye(),m=Ki();return function Vy(o,r,i,a,h,f,m,v){const x=Dt(a),T=o.firstCreatePass&&id(o),N=r[8],F=nd(r);let j=!0;if(3&a.type||v){const it=Bo(a,r),rt=v?v(it):it,ft=F.length,at=v?Pe=>v(Un(Pe[a.index])):a.index;let Tt=null;if(!v&&x&&(Tt=function jy(o,r,i,a){const h=o.cleanup;if(null!=h)for(let f=0;f<h.length-1;f+=2){const m=h[f];if(m===i&&h[f+1]===a){const v=r[7],x=h[f+2];return v.length>x?v[x]:null}"string"==typeof m&&(f+=2)}return null}(o,r,h,a.index)),null!==Tt)(Tt.__ngLastListenerFn__||Tt).__ngNextListenerFn__=f,Tt.__ngLastListenerFn__=f,j=!1;else{f=Uy(a,r,N,f,!1);const Pe=i.listen(rt,h,f);F.push(f,Pe),T&&T.push(h,at,ft,ft+1)}}else f=Uy(a,r,N,f,!1);const B=a.outputs;let W;if(j&&null!==B&&(W=B[h])){const it=W.length;if(it)for(let rt=0;rt<it;rt+=2){const sn=r[W[rt]][W[rt+1]].subscribe(f),zi=F.length;F.push(f,sn),T&&T.push(h,a.index,zi,-(zi+1))}}}(f,h,h[11],m,o,r,0,a),Fe}function By(o,r,i,a){try{return!1!==i(a)}catch(h){return Sw(o,h),!1}}function Uy(o,r,i,a,h){return function f(m){if(m===Function)return a;sg(2&o.flags?Mo(o.index,r):r);let x=By(r,0,a,m),S=f.__ngNextListenerFn__;for(;S;)x=By(r,0,S,m)&&x,S=S.__ngNextListenerFn__;return h&&!1===x&&(m.preventDefault(),m.returnValue=!1),x}}function Ee(o=1){return function y1(o){return(we.lFrame.contextLView=function v1(o,r){for(;o>0;)r=r[15],o--;return r}(o,we.lFrame.contextLView))[8]}(o)}function kw(o,r){let i=null;const a=function ny(o){const r=o.attrs;if(null!=r){const i=r.indexOf(5);if(0==(1&i))return r[i+1]}return null}(o);for(let h=0;h<r.length;h++){const f=r[h];if("*"!==f){if(null===a?sC(o,f,!0):ew(a,f))return h}else i=h}return i}function gg(o){const r=yt()[16][6];if(!r.projection){const a=r.projection=Rh(o?o.length:1,null),h=a.slice();let f=r.child;for(;null!==f;){const m=o?kw(f,o):0;null!==m&&(h[m]?h[m].projectionNext=f:a[m]=f,h[m]=f),f=f.next}}}function Ao(o,r=0,i){const a=yt(),h=Ye(),f=Yl(h,22+o,16,null,i||null);null===f.projection&&(f.projection=r),Tu(),64!=(64&f.flags)&&function tC(o,r,i){Z0(r[11],0,r,i,G0(o,i,r),qa(i.parent||r[6],i,r))}(h,a,f)}function fd(o,r,i,a,h){const f=o[i+1],m=null===r;let v=a?Zs(f):nl(f),x=!1;for(;0!==v&&(!1===x||m);){const T=o[v+1];Fw(o[v],r)&&(x=!0,o[v+1]=a?il(T):Wf(T)),v=a?Zs(T):nl(T)}x&&(o[i+1]=a?Wf(f):il(f))}function Fw(o,r){return null===o||null==r||(Array.isArray(o)?o[1]:o)===r||!(!Array.isArray(o)||"string"!=typeof r)&&jh(o,r)>=0}const qi={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Rw(o){return o.substring(qi.key,qi.keyEnd)}function FC(o){return o.substring(qi.value,qi.valueEnd)}function mg(o,r){const i=qi.textEnd;return i===r?-1:(r=qi.keyEnd=function cc(o,r,i){for(;r<i&&o.charCodeAt(r)>32;)r++;return r}(o,qi.key=r,i),Ss(o,r,i))}function zy(o,r){const i=qi.textEnd;let a=qi.key=Ss(o,r,i);return i===a?-1:(a=qi.keyEnd=function $y(o,r,i){let a;for(;r<i&&(45===(a=o.charCodeAt(r))||95===a||(-33&a)>=65&&(-33&a)<=90||a>=48&&a<=57);)r++;return r}(o,a,i),a=yg(o,a,i),a=qi.value=Ss(o,a,i),a=qi.valueEnd=function RC(o,r,i){let a=-1,h=-1,f=-1,m=r,v=m;for(;m<i;){const x=o.charCodeAt(m++);if(59===x)return v;34===x||39===x?v=m=ji(o,x,m,i):r===m-4&&85===f&&82===h&&76===a&&40===x?v=m=ji(o,41,m,i):x>32&&(v=m),f=h,h=a,a=-33&x}return v}(o,a,i),yg(o,a,i))}function Gy(o){qi.key=0,qi.keyEnd=0,qi.value=0,qi.valueEnd=0,qi.textEnd=o.length}function Ss(o,r,i){for(;r<i&&o.charCodeAt(r)<=32;)r++;return r}function yg(o,r,i,a){return(r=Ss(o,r,i))<i&&r++,r}function ji(o,r,i,a){let h=-1,f=i;for(;f<a;){const m=o.charCodeAt(f++);if(m==r&&92!==h)return f;h=92==m&&92===h?0:m}throw new Error}function fc(o,r){return function Ei(o,r,i,a){const h=yt(),f=Ye(),m=no(2);f.firstUpdatePass&&pd(f,o,m,a),r!==z&&Vr(h,m,r)&&qs(f,f.data[Dr()],h,h[11],o,h[m+1]=function Ky(o,r){return null==o||("string"==typeof r?o+=r:"object"==typeof o&&(o=It(jl(o)))),o}(r,i),a,m)}(o,r,null,!0),fc}function on(o){Hr(Ts,dd,o,!1)}function dd(o,r){for(let i=function jw(o){return Gy(o),zy(o,Ss(o,0,qi.textEnd))}(r);i>=0;i=zy(r,i))Ts(o,Rw(r),FC(r))}function Vi(o){Hr(zo,_s,o,!0)}function _s(o,r){for(let i=function nu(o){return Gy(o),mg(o,Ss(o,0,qi.textEnd))}(r);i>=0;i=mg(r,i))zo(o,Rw(r),!0)}function Hr(o,r,i,a){const h=Ye(),f=no(2);h.firstUpdatePass&&pd(h,null,f,a);const m=yt();if(i!==z&&Vr(m,f,i)){const v=h.data[Dr()];if(Yy(v,a)&&!dc(h,f)){let x=a?v.classesWithoutHost:v.stylesWithoutHost;null!==x&&(i=la(x,i||"")),Iw(h,v,m,i,a)}else!function hl(o,r,i,a,h,f,m,v){h===z&&(h=an);let x=0,S=0,T=0<h.length?h[0]:null,N=0<f.length?f[0]:null;for(;null!==T||null!==N;){const F=x<h.length?h[x+1]:void 0,j=S<f.length?f[S+1]:void 0;let W,B=null;T===N?(x+=2,S+=2,F!==j&&(B=N,W=j)):null===N||null!==T&&T<N?(x+=2,B=T):(S+=2,B=N,W=j),null!==B&&qs(o,r,i,a,B,W,m,v),T=x<h.length?h[x]:null,N=S<f.length?f[S]:null}}(h,v,m,m[11],m[f+1],m[f+1]=function ul(o,r,i){if(null==i||""===i)return an;const a=[],h=jl(i);if(Array.isArray(h))for(let f=0;f<h.length;f++)o(a,h[f],!0);else if("object"==typeof h)for(const f in h)h.hasOwnProperty(f)&&o(a,f,h[f]);else"string"==typeof h&&r(a,h);return a}(o,r,i),a,f)}}function dc(o,r){return r>=o.expandoStartIndex}function pd(o,r,i,a){const h=o.data;if(null===h[i+1]){const f=h[Dr()],m=dc(o,i);Yy(f,a)&&null===r&&!m&&(r=!1),r=function vg(o,r,i,a){const h=function Hv(o){const r=we.lFrame.currentDirectiveIndex;return-1===r?null:o[r]}(o);let f=a?r.residualClasses:r.residualStyles;if(null===h)0===(a?r.classBindings:r.styleBindings)&&(i=uo(i=Zo(null,o,r,i,a),r.attrs,a),f=null);else{const m=r.directiveStylingLast;if(-1===m||o[m]!==h)if(i=Zo(h,o,r,i,a),null===f){let x=function wg(o,r,i){const a=i?r.classBindings:r.styleBindings;if(0!==nl(a))return o[Zs(a)]}(o,r,a);void 0!==x&&Array.isArray(x)&&(x=Zo(null,o,r,x[1],a),x=uo(x,r.attrs,a),function gd(o,r,i,a){o[Zs(i?r.classBindings:r.styleBindings)]=a}(o,r,a,x))}else f=function pc(o,r,i){let a;const h=r.directiveEnd;for(let f=1+r.directiveStylingLast;f<h;f++)a=uo(a,o[f].hostAttrs,i);return uo(a,r.attrs,i)}(o,r,a)}return void 0!==f&&(a?r.residualClasses=f:r.residualStyles=f),i}(h,f,r,a),function LC(o,r,i,a,h,f){let m=f?r.classBindings:r.styleBindings,v=Zs(m),x=nl(m);o[a]=i;let T,S=!1;if(Array.isArray(i)){const N=i;T=N[1],(null===T||jh(N,T)>0)&&(S=!0)}else T=i;if(h)if(0!==x){const F=Zs(o[v+1]);o[a+1]=_o(F,v),0!==F&&(o[F+1]=dy(o[F+1],a)),o[v+1]=function fy(o,r){return 131071&o|r<<17}(o[v+1],a)}else o[a+1]=_o(v,0),0!==v&&(o[v+1]=dy(o[v+1],a)),v=a;else o[a+1]=_o(x,0),0===v?v=a:o[x+1]=dy(o[x+1],a),x=a;S&&(o[a+1]=Wf(o[a+1])),fd(o,T,a,!0),fd(o,T,a,!1),function eu(o,r,i,a,h){const f=h?o.residualClasses:o.residualStyles;null!=f&&"string"==typeof r&&jh(f,r)>=0&&(i[a+1]=il(i[a+1]))}(r,T,o,a,f),m=_o(v,x),f?r.classBindings=m:r.styleBindings=m}(h,f,r,i,m,a)}}function Zo(o,r,i,a,h){let f=null;const m=i.directiveEnd;let v=i.directiveStylingLast;for(-1===v?v=i.directiveStart:v++;v<m&&(f=r[v],a=uo(a,f.hostAttrs,h),f!==o);)v++;return null!==o&&(i.directiveStylingLast=v),a}function uo(o,r,i){const a=i?1:2;let h=-1;if(null!==r)for(let f=0;f<r.length;f++){const m=r[f];"number"==typeof m?h=m:h===a&&(Array.isArray(o)||(o=void 0===o?[]:["",o]),zo(o,m,!!i||r[++f]))}return void 0===o?null:o}function Ts(o,r,i){zo(o,r,jl(i))}function qs(o,r,i,a,h,f,m,v){if(!(3&r.type))return;const x=o.data,S=x[v+1];th(function Sa(o){return 1==(1&o)}(S)?xg(x,r,i,h,nl(S),m):void 0)||(th(f)||function Cs(o){return 2==(2&o)}(S)&&(f=xg(x,null,i,h,v,m)),function cr(o,r,i,a,h){if(r)h?o.addClass(i,a):o.removeClass(i,a);else{let f=-1===a.indexOf("-")?void 0:jr.DashCase;null==h?o.removeStyle(i,a,f):("string"==typeof h&&h.endsWith("!important")&&(h=h.slice(0,-10),f|=jr.Important),o.setStyle(i,a,h,f))}}(a,m,Jd(Dr(),i),h,f))}function xg(o,r,i,a,h,f){const m=null===r;let v;for(;h>0;){const x=o[h],S=Array.isArray(x),T=S?x[1]:x,N=null===T;let F=i[h+1];F===z&&(F=N?an:void 0);let j=N?Us(F,a):T===a?F:void 0;if(S&&!th(j)&&(j=Us(x,a)),th(j)&&(v=j,m))return v;const B=o[h+1];h=m?Zs(B):nl(B)}if(null!==r){let x=f?r.residualClasses:r.residualStyles;null!=x&&(v=Us(x,a))}return v}function th(o){return void 0!==o}function Yy(o,r){return 0!=(o.flags&(r?16:32))}function tr(o,r=""){const i=yt(),a=Ye(),h=o+22,f=a.firstCreatePass?Yl(a,h,1,r,null):a.data[h],m=i[h]=function B0(o,r){return o.createText(r)}(i[11],r);Hp(a,i,m,f),ha(f,!1)}function md(o){return cl("",o,""),md}function cl(o,r,i){const a=yt(),h=function Zu(o,r,i,a){return Vr(o,So(),i)?r+ye(i)+a:z}(a,o,r,i);return h!==z&&sl(a,Dr(),h),cl}function Cg(o,r,i,a,h){const f=yt(),m=Yn(f,o,r,i,a,h);return m!==z&&sl(f,Dr(),m),Cg}const mi="en-US";let mc=mi;function Eg(o,r,i,a,h){if(o=Gt(o),Array.isArray(o))for(let f=0;f<o.length;f++)Eg(o[f],r,i,a,h);else{const f=Ye(),m=yt();let v=oo(o)?o:Gt(o.provide),x=Ip(o);const S=Ki(),T=1048575&S.providerIndexes,N=S.directiveStart,F=S.providerIndexes>>20;if(oo(o)||!o.multi){const j=new Nu(x,h,ct),B=hu(v,r,h?T:T+F,N);-1===B?(Ol(af(S,m),f,v),Dd(f,o,r.length),r.push(v),S.directiveStart++,S.directiveEnd++,h&&(S.providerIndexes+=1048576),i.push(j),m.push(j)):(i[B]=j,m[B]=j)}else{const j=hu(v,r,T+F,N),B=hu(v,r,T,T+F),W=j>=0&&i[j],it=B>=0&&i[B];if(h&&!it||!h&&!W){Ol(af(S,m),f,v);const rt=function Pg(o,r,i,a,h){const f=new Nu(o,i,ct);return f.multi=[],f.index=r,f.componentProviders=0,fh(f,h,a&&!i),f}(h?jC:iv,i.length,h,a,x);!h&&it&&(i[B].providerFactory=rt),Dd(f,o,r.length,0),r.push(v),S.directiveStart++,S.directiveEnd++,h&&(S.providerIndexes+=1048576),i.push(rt),m.push(rt)}else Dd(f,o,j>-1?j:B,fh(i[h?B:j],x,!h&&a));!h&&a&&it&&i[B].componentProviders++}}}function Dd(o,r,i,a){const h=oo(r),f=function ya(o){return!!o.useClass}(r);if(h||f){const x=(f?Gt(r.useClass):r).prototype.ngOnDestroy;if(x){const S=o.destroyHooks||(o.destroyHooks=[]);if(!h&&r.multi){const T=S.indexOf(i);-1===T?S.push(i,[a,x]):S[T+1].push(a,x)}else S.push(i,x)}}}function fh(o,r,i){return i&&o.componentProviders++,o.multi.push(r)-1}function hu(o,r,i,a){for(let h=i;h<a;h++)if(r[h]===o)return h;return-1}function iv(o,r,i,a){return Dc(this.multi,[])}function jC(o,r,i,a){const h=this.multi;let f;if(this.providerFactory){const m=this.providerFactory.componentProviders,v=lf(i,i[1],this.providerFactory.index,a);f=v.slice(0,m),Dc(h,f);for(let x=m;x<v.length;x++)f.push(v[x])}else f=[],Dc(h,f);return f}function Dc(o,r){for(let i=0;i<o.length;i++)r.push((0,o[i])());return r}function Dn(o,r=[]){return i=>{i.providersResolver=(a,h)=>function Tg(o,r,i){const a=Ye();if(a.firstCreatePass){const h=Rs(o);Eg(i,a.data,a.blueprint,h,!0),Eg(r,a.data,a.blueprint,h,!1)}}(a,h?h(o):o,r)}}class _c{}class Ng{}class Ig extends _c{constructor(r,i){super(),this._parent=i,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new od(this);const a=wr(r);this._bootstrapComponents=wa(a.bootstrap),this._r3Injector=oy(r,i,[{provide:_c,useValue:this},{provide:If,useValue:this.componentFactoryResolver}],It(r),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(r)}get injector(){return this._r3Injector}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(i=>i()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class Ag extends Ng{constructor(r){super(),this.moduleType=r}create(r){return new Ig(this.moduleType,r)}}class kg extends _c{constructor(r,i,a){super(),this.componentFactoryResolver=new od(this),this.instance=null;const h=new Np([...r,{provide:_c,useValue:this},{provide:If,useValue:this.componentFactoryResolver}],i||$e(),a,new Set(["environment"]));this.injector=h,h.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(r){this.injector.onDestroy(r)}}function _d(o,r,i=null){return new kg(o,r,i).injector}let Uw=(()=>{class o{constructor(i){this._injector=i,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(i){if(!i.standalone)return null;if(!this.cachedInjectors.has(i.id)){const a=Ep(0,i.type),h=a.length>0?_d([a],this._injector,`Standalone[${i.type.name}]`):null;this.cachedInjectors.set(i.id,h)}return this.cachedInjectors.get(i.id)}ngOnDestroy(){try{for(const i of this.cachedInjectors.values())null!==i&&i.destroy()}finally{this.cachedInjectors.clear()}}}return o.\u0275prov=A({token:o,providedIn:"environment",factory:()=>new o(kt(va))}),o})();function WE(o){o.getStandaloneInjector=r=>r.get(Uw).getOrCreateStandaloneInjector(o)}function mo(o,r,i){const a=ze()+o,h=yt();return h[a]===z?_a(h,a,i?r.call(i):r()):function pg(o,r){return o[r]}(h,a)}function VC(o,r,i,a){return function tP(o,r,i,a,h,f){const m=r+i;return Vr(o,m,h)?_a(o,m+1,f?a.call(f,h):a(h)):Hw(o,m+1)}(yt(),ze(),o,r,i,a)}function qE(o,r,i,a,h,f){return function nP(o,r,i,a,h,f,m,v){const x=r+i;return function al(o,r,i,a,h){const f=Ms(o,r,i,a);return Vr(o,r+2,h)||f}(o,x,h,f,m)?_a(o,x+3,v?a.call(v,h,f,m):a(h,f,m)):Hw(o,x+3)}(yt(),ze(),o,r,i,a,h,f)}function CD(o,r,i,a,h,f,m){return function iP(o,r,i,a,h,f,m,v,x){const S=r+i;return function Ir(o,r,i,a,h,f){const m=Ms(o,r,i,a);return Ms(o,r+2,h,f)||m}(o,S,h,f,m,v)?_a(o,S+4,x?a.call(x,h,f,m,v):a(h,f,m,v)):Hw(o,S+4)}(yt(),ze(),o,r,i,a,h,f,m)}function Hw(o,r){const i=o[r];return i===z?void 0:i}function MD(o){return r=>{setTimeout(o,void 0,r)}}const gn=class kO extends bs{constructor(r=!1){super(),this.__isAsync=r}emit(r){super.next(r)}subscribe(r,i,a){let h=r,f=i||(()=>null),m=a;if(r&&"object"==typeof r){const x=r;h=x.next?.bind(x),f=x.error?.bind(x),m=x.complete?.bind(x)}this.__isAsync&&(f=MD(f),h&&(h=MD(h)),m&&(m=MD(m)));const v=super.subscribe({next:h,error:f,complete:m});return r instanceof sa&&r.add(v),v}};function bO(){return this._results[Ju()]()}class SD{constructor(r=!1){this._emitDistinctChangesOnly=r,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const i=Ju(),a=SD.prototype;a[i]||(a[i]=bO)}get changes(){return this._changes||(this._changes=new gn)}get(r){return this._results[r]}map(r){return this._results.map(r)}filter(r){return this._results.filter(r)}find(r){return this._results.find(r)}reduce(r,i){return this._results.reduce(r,i)}forEach(r){this._results.forEach(r)}some(r){return this._results.some(r)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(r,i){const a=this;a.dirty=!1;const h=Ho(r);(this._changesDetected=!function cp(o,r,i){if(o.length!==r.length)return!1;for(let a=0;a<o.length;a++){let h=o[a],f=r[a];if(i&&(h=i(h),f=i(f)),f!==h)return!1}return!0}(a._results,h,i))&&(a._results=h,a.length=h.length,a.last=h[this.length-1],a.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let dh=(()=>{class o{}return o.__NG_ELEMENT_ID__=FO,o})();const OO=dh,LO=class extends OO{constructor(r,i,a){super(),this._declarationLView=r,this._declarationTContainer=i,this.elementRef=a}createEmbeddedView(r,i){const a=this._declarationTContainer.tViews,h=Jf(this._declarationLView,a,r,16,null,a.declTNode,null,null,null,null,i||null);h[17]=this._declarationLView[this._declarationTContainer.index];const m=this._declarationLView[19];return null!==m&&(h[19]=m.createEmbeddedView(a)),My(a,h,r),new ic(h)}};function FO(){return BC(Ki(),yt())}function BC(o,r){return 4&o.type?new LO(r,o,so(o,r)):null}let cu=(()=>{class o{}return o.__NG_ELEMENT_ID__=RO,o})();function RO(){return aP(Ki(),yt())}const jO=cu,oP=class extends jO{constructor(r,i,a){super(),this._lContainer=r,this._hostTNode=i,this._hostLView=a}get element(){return so(this._hostTNode,this._hostLView)}get injector(){return new bu(this._hostTNode,this._hostLView)}get parentInjector(){const r=Gn(this._hostTNode,this._hostLView);if(Kv(r)){const i=Au(r,this._hostLView),a=Nn(r);return new bu(i[1].data[a+8],i)}return new bu(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const i=sP(this._lContainer);return null!==i&&i[r]||null}get length(){return this._lContainer.length-10}createEmbeddedView(r,i,a){let h,f;"number"==typeof a?h=a:null!=a&&(h=a.index,f=a.injector);const m=r.createEmbeddedView(i||{},f);return this.insert(m,h),m}createComponent(r,i,a,h,f){const m=r&&!function ms(o){return"function"==typeof o}(r);let v;if(m)v=i;else{const N=i||{};v=N.index,a=N.injector,h=N.projectableNodes,f=N.environmentInjector||N.ngModuleRef}const x=m?r:new Xo(ot(r)),S=a||this.parentInjector;if(!f&&null==x.ngModule){const F=(m?S:this.parentInjector).get(va,null);F&&(f=F)}const T=x.create(S,h,void 0,f);return this.insert(T.hostView,v),T}insert(r,i){const a=r._lView,h=a[1];if(function c1(o){return ds(o[3])}(a)){const T=this.indexOf(r);if(-1!==T)this.detach(T);else{const N=a[3],F=new oP(N,N[6],N[3]);F.detach(F.indexOf(r))}}const f=this._adjustIndex(i),m=this._lContainer;!function ut(o,r,i,a){const h=10+a,f=i.length;a>0&&(i[h-1][4]=r),a<f-10?(r[4]=i[h],cm(i,10+a,r)):(i.push(r),r[4]=null),r[3]=i;const m=r[17];null!==m&&i!==m&&function Li(o,r){const i=o[9];r[16]!==r[3][3][16]&&(o[2]=!0),null===i?o[9]=[r]:i.push(r)}(m,r);const v=r[19];null!==v&&v.insertView(o),r[2]|=64}(h,a,m,f);const v=At(f,m),x=a[11],S=Bf(x,m[7]);return null!==S&&function Km(o,r,i,a,h,f){a[0]=h,a[6]=r,Wo(o,a,i,1,h,f)}(h,m[6],x,a,S,v),r.attachToViewContainerRef(),cm(DD(m),f,r),r}move(r,i){return this.insert(r,i)}indexOf(r){const i=sP(this._lContainer);return null!==i?i.indexOf(r):-1}remove(r){const i=this._adjustIndex(r,-1),a=z0(this._lContainer,i);a&&(ys(DD(this._lContainer),i),Bp(a[1],a))}detach(r){const i=this._adjustIndex(r,-1),a=z0(this._lContainer,i);return a&&null!=ys(DD(this._lContainer),i)?new ic(a):null}_adjustIndex(r,i=0){return r??this.length+i}};function sP(o){return o[8]}function DD(o){return o[8]||(o[8]=[])}function aP(o,r){let i;const a=r[o.index];if(ds(a))i=a;else{let h;if(8&o.type)h=Un(a);else{const f=r[11];h=f.createComment("");const m=Bo(o,r);Wu(f,Bf(f,m),h,function X0(o,r){return o.nextSibling(r)}(f,m),!1)}r[o.index]=i=Pt(a,r,h,o),og(r,i)}return new oP(i,o,r)}class _D{constructor(r){this.queryList=r,this.matches=null}clone(){return new _D(this.queryList)}setDirty(){this.queryList.setDirty()}}class TD{constructor(r=[]){this.queries=r}createEmbeddedView(r){const i=r.queries;if(null!==i){const a=null!==r.contentQueries?r.contentQueries[0]:i.length,h=[];for(let f=0;f<a;f++){const m=i.getByIndex(f);h.push(this.queries[m.indexInDeclarationView].clone())}return new TD(h)}return null}insertView(r){this.dirtyQueriesWithMatches(r)}detachView(r){this.dirtyQueriesWithMatches(r)}dirtyQueriesWithMatches(r){for(let i=0;i<this.queries.length;i++)null!==fP(r,i).matches&&this.queries[i].setDirty()}}class lP{constructor(r,i,a=null){this.predicate=r,this.flags=i,this.read=a}}class ED{constructor(r=[]){this.queries=r}elementStart(r,i){for(let a=0;a<this.queries.length;a++)this.queries[a].elementStart(r,i)}elementEnd(r){for(let i=0;i<this.queries.length;i++)this.queries[i].elementEnd(r)}embeddedTView(r){let i=null;for(let a=0;a<this.length;a++){const h=null!==i?i.length:0,f=this.getByIndex(a).embeddedTView(r,h);f&&(f.indexInDeclarationView=a,null!==i?i.push(f):i=[f])}return null!==i?new ED(i):null}template(r,i){for(let a=0;a<this.queries.length;a++)this.queries[a].template(r,i)}getByIndex(r){return this.queries[r]}get length(){return this.queries.length}track(r){this.queries.push(r)}}class PD{constructor(r,i=-1){this.metadata=r,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=i}elementStart(r,i){this.isApplyingToNode(i)&&this.matchTNode(r,i)}elementEnd(r){this._declarationNodeIndex===r.index&&(this._appliesToNextNode=!1)}template(r,i){this.elementStart(r,i)}embeddedTView(r,i){return this.isApplyingToNode(r)?(this.crossesNgTemplate=!0,this.addMatch(-r.index,i),new PD(this.metadata)):null}isApplyingToNode(r){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const i=this._declarationNodeIndex;let a=r.parent;for(;null!==a&&8&a.type&&a.index!==i;)a=a.parent;return i===(null!==a?a.index:-1)}return this._appliesToNextNode}matchTNode(r,i){const a=this.metadata.predicate;if(Array.isArray(a))for(let h=0;h<a.length;h++){const f=a[h];this.matchTNodeWithReadOption(r,i,UO(i,f)),this.matchTNodeWithReadOption(r,i,lp(i,r,f,!1,!1))}else a===dh?4&i.type&&this.matchTNodeWithReadOption(r,i,-1):this.matchTNodeWithReadOption(r,i,lp(i,r,a,!1,!1))}matchTNodeWithReadOption(r,i,a){if(null!==a){const h=this.metadata.read;if(null!==h)if(h===Kn||h===cu||h===dh&&4&i.type)this.addMatch(i.index,-2);else{const f=lp(i,r,h,!1,!1);null!==f&&this.addMatch(i.index,f)}else this.addMatch(i.index,a)}}addMatch(r,i){null===this.matches?this.matches=[r,i]:this.matches.push(r,i)}}function UO(o,r){const i=o.localNames;if(null!==i)for(let a=0;a<i.length;a+=2)if(i[a]===r)return i[a+1];return null}function zO(o,r,i,a){return-1===i?function HO(o,r){return 11&o.type?so(o,r):4&o.type?BC(o,r):null}(r,o):-2===i?function GO(o,r,i){return i===Kn?so(r,o):i===dh?BC(r,o):i===cu?aP(r,o):void 0}(o,r,a):lf(o,o[1],i,r)}function uP(o,r,i,a){const h=r[19].queries[a];if(null===h.matches){const f=o.data,m=i.matches,v=[];for(let x=0;x<m.length;x+=2){const S=m[x];v.push(S<0?null:zO(r,f[S],m[x+1],i.metadata.read))}h.matches=v}return h.matches}function ND(o,r,i,a){const h=o.queries.getByIndex(i),f=h.matches;if(null!==f){const m=uP(o,r,h,i);for(let v=0;v<f.length;v+=2){const x=f[v];if(x>0)a.push(m[v/2]);else{const S=f[v+1],T=r[-x];for(let N=10;N<T.length;N++){const F=T[N];F[17]===F[3]&&ND(F[1],F,S,a)}if(null!==T[9]){const N=T[9];for(let F=0;F<N.length;F++){const j=N[F];ND(j[1],j,S,a)}}}}}return a}function Wr(o){const r=yt(),i=Ye(),a=im();rm(a+1);const h=fP(i,a);if(o.dirty&&function jv(o){return 4==(4&o[2])}(r)===(2==(2&h.metadata.flags))){if(null===h.matches)o.reset([]);else{const f=h.crossesNgTemplate?ND(i,r,a,[]):uP(i,r,h,a);o.reset(f,R1),o.notifyOnChanges()}return!0}return!1}function xl(o,r,i){const a=Ye();a.firstCreatePass&&(cP(a,new lP(o,r,i),-1),2==(2&r)&&(a.staticViewQueries=!0)),hP(a,yt(),r)}function Td(o,r,i,a){const h=Ye();if(h.firstCreatePass){const f=Ki();cP(h,new lP(r,i,a),f.index),function WO(o,r){const i=o.contentQueries||(o.contentQueries=[]);r!==(i.length?i[i.length-1]:-1)&&i.push(o.queries.length-1,r)}(h,o),2==(2&i)&&(h.staticContentQueries=!0)}hP(h,yt(),i)}function Kr(){return function $O(o,r){return o[19].queries[r].queryList}(yt(),im())}function hP(o,r,i){const a=new SD(4==(4&i));mw(o,r,a,a.destroy),null===r[19]&&(r[19]=new TD),r[19].queries.push(new _D(a))}function cP(o,r,i){null===o.queries&&(o.queries=new ED),o.queries.track(new PD(r,i))}function fP(o,r){return o.queries.getByIndex(r)}function HC(...o){}const zC=new Yt("Application Initializer");let GC=(()=>{class o{constructor(i){this.appInits=i,this.resolve=HC,this.reject=HC,this.initialized=!1,this.done=!1,this.donePromise=new Promise((a,h)=>{this.resolve=a,this.reject=h})}runInitializers(){if(this.initialized)return;const i=[],a=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const f=this.appInits[h]();if(uc(f))i.push(f);else if(cd(f)){const m=new Promise((v,x)=>{f.subscribe({complete:v,error:x})});i.push(m)}}Promise.all(i).then(()=>{a()}).catch(h=>{this.reject(h)}),0===i.length&&a(),this.initialized=!0}}return o.\u0275fac=function(i){return new(i||o)(kt(zC,8))},o.\u0275prov=A({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const $w=new Yt("AppId",{providedIn:"root",factory:function AP(){return`${OD()}${OD()}${OD()}`}});function OD(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const kP=new Yt("Platform Initializer"),LD=new Yt("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),bP=new Yt("appBootstrapListener"),OP=new Yt("AnimationModuleType");let dL=(()=>{class o{log(i){console.log(i)}warn(i){console.warn(i)}}return o.\u0275fac=function(i){return new(i||o)},o.\u0275prov=A({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})();const Tc=new Yt("LocaleId",{providedIn:"root",factory:()=>Je(Tc,Zt.Optional|Zt.SkipSelf)||function pL(){return typeof $localize<"u"&&$localize.locale||mi}()});class mL{constructor(r,i){this.ngModuleFactory=r,this.componentFactories=i}}let FD=(()=>{class o{compileModuleSync(i){return new Ag(i)}compileModuleAsync(i){return Promise.resolve(this.compileModuleSync(i))}compileModuleAndAllComponentsSync(i){const a=this.compileModuleSync(i),f=wa(wr(i).declarations).reduce((m,v)=>{const x=ot(v);return x&&m.push(new Xo(x)),m},[]);return new mL(a,f)}compileModuleAndAllComponentsAsync(i){return Promise.resolve(this.compileModuleAndAllComponentsSync(i))}clearCache(){}clearCacheFor(i){}getModuleId(i){}}return o.\u0275fac=function(i){return new(i||o)},o.\u0275prov=A({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const wL=(()=>Promise.resolve(0))();function RD(o){typeof Zone>"u"?wL.then(()=>{o&&o.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",o)}class Ni{constructor({enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:i=!1,shouldCoalesceRunChangeDetection:a=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new gn(!1),this.onMicrotaskEmpty=new gn(!1),this.onStable=new gn(!1),this.onError=new gn(!1),typeof Zone>"u")throw new dt(908,!1);Zone.assertZonePatched();const h=this;if(h._nesting=0,h._outer=h._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const f=Zone.AsyncStackTaggingZoneSpec;h._inner=h._inner.fork(new f("Angular"))}Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!a&&i,h.shouldCoalesceRunChangeDetection=a,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function xL(){let o=bn.requestAnimationFrame,r=bn.cancelAnimationFrame;if(typeof Zone<"u"&&o&&r){const i=o[Zone.__symbol__("OriginalDelegate")];i&&(o=i);const a=r[Zone.__symbol__("OriginalDelegate")];a&&(r=a)}return{nativeRequestAnimationFrame:o,nativeCancelAnimationFrame:r}}().nativeRequestAnimationFrame,function SL(o){const r=()=>{!function ML(o){o.isCheckStableRunning||-1!==o.lastRequestAnimationFrameId||(o.lastRequestAnimationFrameId=o.nativeRequestAnimationFrame.call(bn,()=>{o.fakeTopEventTask||(o.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{o.lastRequestAnimationFrameId=-1,VD(o),o.isCheckStableRunning=!0,jD(o),o.isCheckStableRunning=!1},void 0,()=>{},()=>{})),o.fakeTopEventTask.invoke()}),VD(o))}(o)};o._inner=o._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(i,a,h,f,m,v)=>{try{return RP(o),i.invokeTask(h,f,m,v)}finally{(o.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||o.shouldCoalesceRunChangeDetection)&&r(),jP(o)}},onInvoke:(i,a,h,f,m,v,x)=>{try{return RP(o),i.invoke(h,f,m,v,x)}finally{o.shouldCoalesceRunChangeDetection&&r(),jP(o)}},onHasTask:(i,a,h,f)=>{i.hasTask(h,f),a===h&&("microTask"==f.change?(o._hasPendingMicrotasks=f.microTask,VD(o),jD(o)):"macroTask"==f.change&&(o.hasPendingMacrotasks=f.macroTask))},onHandleError:(i,a,h,f)=>(i.handleError(h,f),o.runOutsideAngular(()=>o.onError.emit(f)),!1)})}(h)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ni.isInAngularZone())throw new dt(909,!1)}static assertNotInAngularZone(){if(Ni.isInAngularZone())throw new dt(909,!1)}run(r,i,a){return this._inner.run(r,i,a)}runTask(r,i,a,h){const f=this._inner,m=f.scheduleEventTask("NgZoneEvent: "+h,r,CL,HC,HC);try{return f.runTask(m,i,a)}finally{f.cancelTask(m)}}runGuarded(r,i,a){return this._inner.runGuarded(r,i,a)}runOutsideAngular(r){return this._outer.run(r)}}const CL={};function jD(o){if(0==o._nesting&&!o.hasPendingMicrotasks&&!o.isStable)try{o._nesting++,o.onMicrotaskEmpty.emit(null)}finally{if(o._nesting--,!o.hasPendingMicrotasks)try{o.runOutsideAngular(()=>o.onStable.emit(null))}finally{o.isStable=!0}}}function VD(o){o.hasPendingMicrotasks=!!(o._hasPendingMicrotasks||(o.shouldCoalesceEventChangeDetection||o.shouldCoalesceRunChangeDetection)&&-1!==o.lastRequestAnimationFrameId)}function RP(o){o._nesting++,o.isStable&&(o.isStable=!1,o.onUnstable.emit(null))}function jP(o){o._nesting--,jD(o)}class DL{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new gn,this.onMicrotaskEmpty=new gn,this.onStable=new gn,this.onError=new gn}run(r,i,a){return r.apply(i,a)}runGuarded(r,i,a){return r.apply(i,a)}runOutsideAngular(r){return r()}runTask(r,i,a,h){return r.apply(i,a)}}const VP=new Yt(""),$C=new Yt("");let HD,BD=(()=>{class o{constructor(i,a,h){this._ngZone=i,this.registry=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,HD||(function _L(o){HD=o}(h),h.addToWindow(a)),this._watchAngularEvents(),i.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ni.assertNotInAngularZone(),RD(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())RD(()=>{for(;0!==this._callbacks.length;){let i=this._callbacks.pop();clearTimeout(i.timeoutId),i.doneCb(this._didWork)}this._didWork=!1});else{let i=this.getPendingTasks();this._callbacks=this._callbacks.filter(a=>!a.updateCb||!a.updateCb(i)||(clearTimeout(a.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(i=>({source:i.source,creationLocation:i.creationLocation,data:i.data})):[]}addCallback(i,a,h){let f=-1;a&&a>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(m=>m.timeoutId!==f),i(this._didWork,this.getPendingTasks())},a)),this._callbacks.push({doneCb:i,timeoutId:f,updateCb:h})}whenStable(i,a,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(i,a,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(i){this.registry.registerApplication(i,this)}unregisterApplication(i){this.registry.unregisterApplication(i)}findProviders(i,a,h){return[]}}return o.\u0275fac=function(i){return new(i||o)(kt(Ni),kt(UD),kt($C))},o.\u0275prov=A({token:o,factory:o.\u0275fac}),o})(),UD=(()=>{class o{constructor(){this._applications=new Map}registerApplication(i,a){this._applications.set(i,a)}unregisterApplication(i){this._applications.delete(i)}unregisterAllApplications(){this._applications.clear()}getTestability(i){return this._applications.get(i)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(i,a=!0){return HD?.findTestabilityInTree(this,i,a)??null}}return o.\u0275fac=function(i){return new(i||o)},o.\u0275prov=A({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})(),Ed=null;const BP=new Yt("AllowMultipleToken"),zD=new Yt("PlatformDestroyListeners");class UP{constructor(r,i){this.name=r,this.token=i}}function zP(o,r,i=[]){const a=`Platform: ${r}`,h=new Yt(a);return(f=[])=>{let m=GD();if(!m||m.injector.get(BP,!1)){const v=[...i,...f,{provide:h,useValue:!0}];o?o(v):function PL(o){if(Ed&&!Ed.get(BP,!1))throw new dt(400,!1);Ed=o;const r=o.get($P);(function HP(o){const r=o.get(kP,null);r&&r.forEach(i=>i())})(o)}(function GP(o=[],r){return fr.create({name:r,providers:[{provide:Ji,useValue:"platform"},{provide:zD,useValue:new Set([()=>Ed=null])},...o]})}(v,a))}return function IL(o){const r=GD();if(!r)throw new dt(401,!1);return r}()}}function GD(){return Ed?.get($P)??null}let $P=(()=>{class o{constructor(i){this._injector=i,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(i,a){const h=function KP(o,r){let i;return i="noop"===o?new DL:("zone.js"===o?void 0:o)||new Ni(r),i}(a?.ngZone,function WP(o){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!o||!o.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!o||!o.ngZoneRunCoalescing)||!1}}(a)),f=[{provide:Ni,useValue:h}];return h.run(()=>{const m=fr.create({providers:f,parent:this.injector,name:i.moduleType.name}),v=i.create(m),x=v.injector.get($u,null);if(!x)throw new dt(402,!1);return h.runOutsideAngular(()=>{const S=h.onError.subscribe({next:T=>{x.handleError(T)}});v.onDestroy(()=>{WC(this._modules,v),S.unsubscribe()})}),function YP(o,r,i){try{const a=i();return uc(a)?a.catch(h=>{throw r.runOutsideAngular(()=>o.handleError(h)),h}):a}catch(a){throw r.runOutsideAngular(()=>o.handleError(a)),a}}(x,h,()=>{const S=v.injector.get(GC);return S.runInitializers(),S.donePromise.then(()=>(function er(o){qt(o,"Expected localeId to be defined"),"string"==typeof o&&(mc=o.toLowerCase().replace(/_/g,"-"))}(v.injector.get(Tc,mi)||mi),this._moduleDoBootstrap(v),v))})})}bootstrapModule(i,a=[]){const h=XP({},a);return function TL(o,r,i){const a=new Ag(i);return Promise.resolve(a)}(0,0,i).then(f=>this.bootstrapModuleFactory(f,h))}_moduleDoBootstrap(i){const a=i.injector.get(Ww);if(i._bootstrapComponents.length>0)i._bootstrapComponents.forEach(h=>a.bootstrap(h));else{if(!i.instance.ngDoBootstrap)throw new dt(403,!1);i.instance.ngDoBootstrap(a)}this._modules.push(i)}onDestroy(i){this._destroyListeners.push(i)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new dt(404,!1);this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a());const i=this._injector.get(zD,null);i&&(i.forEach(a=>a()),i.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return o.\u0275fac=function(i){return new(i||o)(kt(fr))},o.\u0275prov=A({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})();function XP(o,r){return Array.isArray(r)?r.reduce(XP,o):{...o,...r}}let Ww=(()=>{class o{constructor(i,a,h){this._zone=i,this._injector=a,this._exceptionHandler=h,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const f=new $i(v=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{v.next(this._stable),v.complete()})}),m=new $i(v=>{let x;this._zone.runOutsideAngular(()=>{x=this._zone.onStable.subscribe(()=>{Ni.assertNotInAngularZone(),RD(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,v.next(!0))})})});const S=this._zone.onUnstable.subscribe(()=>{Ni.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{v.next(!1)}))});return()=>{x.unsubscribe(),S.unsubscribe()}});this.isStable=function _n(...o){const r=$d(o),i=function Xx(o,r){return"number"==typeof St(o)?o.pop():r}(o,1/0),a=o;return a.length?1===a.length?aa(a[0]):vu(i)(Vt(a,r)):El}(f,m.pipe(function Gc(o={}){const{connector:r=(()=>new bs),resetOnError:i=!0,resetOnComplete:a=!0,resetOnRefCountZero:h=!0}=o;return f=>{let m,v,x,S=0,T=!1,N=!1;const F=()=>{v?.unsubscribe(),v=void 0},j=()=>{F(),m=x=void 0,T=N=!1},B=()=>{const W=m;j(),W?.unsubscribe()};return Or((W,it)=>{S++,!N&&!T&&F();const rt=x=x??r();it.add(()=>{S--,0===S&&!N&&!T&&(v=Cu(B,h))}),rt.subscribe(it),!m&&S>0&&(m=new Wg({next:ft=>rt.next(ft),error:ft=>{N=!0,F(),v=Cu(j,i,ft),rt.error(ft)},complete:()=>{T=!0,F(),v=Cu(j,a),rt.complete()}}),aa(W).subscribe(m))})(f)}}()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(i,a){const h=i instanceof N0;if(!this._injector.get(GC).done)throw!h&&function Qr(o){const r=ot(o)||Oe(o)||je(o);return null!==r&&r.standalone}(i),new dt(405,false);let m;m=h?i:this._injector.get(If).resolveComponentFactory(i),this.componentTypes.push(m.componentType);const v=function EL(o){return o.isBoundToModule}(m)?void 0:this._injector.get(_c),S=m.create(fr.NULL,[],a||m.selector,v),T=S.location.nativeElement,N=S.injector.get(VP,null);return N?.registerApplication(T),S.onDestroy(()=>{this.detachView(S.hostView),WC(this.components,S),N?.unregisterApplication(T)}),this._loadComponent(S),S}tick(){if(this._runningTick)throw new dt(101,!1);try{this._runningTick=!0;for(let i of this._views)i.detectChanges()}catch(i){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(i))}finally{this._runningTick=!1}}attachView(i){const a=i;this._views.push(a),a.attachToAppRef(this)}detachView(i){const a=i;WC(this._views,a),a.detachFromAppRef()}_loadComponent(i){this.attachView(i.hostView),this.tick(),this.components.push(i),this._injector.get(bP,[]).concat(this._bootstrapListeners).forEach(h=>h(i))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(i=>i()),this._views.slice().forEach(i=>i.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(i){return this._destroyListeners.push(i),()=>WC(this._destroyListeners,i)}destroy(){if(this._destroyed)throw new dt(406,!1);const i=this._injector;i.destroy&&!i.destroyed&&i.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return o.\u0275fac=function(i){return new(i||o)(kt(Ni),kt(va),kt($u))},o.\u0275prov=A({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function WC(o,r){const i=o.indexOf(r);i>-1&&o.splice(i,1)}let ZP=!0,Pd=(()=>{class o{}return o.__NG_ELEMENT_ID__=bL,o})();function bL(o){return function OL(o,r,i){if(Xd(o)&&!i){const a=Mo(o.index,r);return new ic(a,a)}return 47&o.type?new ic(r[16],r):null}(Ki(),yt(),16==(16&o))}class nN{constructor(){}supports(r){return dg(r)}create(r){return new BL(r)}}const VL=(o,r)=>r;class BL{constructor(r){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=r||VL}forEachItem(r){let i;for(i=this._itHead;null!==i;i=i._next)r(i)}forEachOperation(r){let i=this._itHead,a=this._removalsHead,h=0,f=null;for(;i||a;){const m=!a||i&&i.currentIndex<rN(a,h,f)?i:a,v=rN(m,h,f),x=m.currentIndex;if(m===a)h--,a=a._nextRemoved;else if(i=i._next,null==m.previousIndex)h++;else{f||(f=[]);const S=v-h,T=x-h;if(S!=T){for(let F=0;F<S;F++){const j=F<f.length?f[F]:f[F]=0,B=j+F;T<=B&&B<S&&(f[F]=j+1)}f[m.previousIndex]=T-S}}v!==x&&r(m,v,x)}}forEachPreviousItem(r){let i;for(i=this._previousItHead;null!==i;i=i._nextPrevious)r(i)}forEachAddedItem(r){let i;for(i=this._additionsHead;null!==i;i=i._nextAdded)r(i)}forEachMovedItem(r){let i;for(i=this._movesHead;null!==i;i=i._nextMoved)r(i)}forEachRemovedItem(r){let i;for(i=this._removalsHead;null!==i;i=i._nextRemoved)r(i)}forEachIdentityChange(r){let i;for(i=this._identityChangesHead;null!==i;i=i._nextIdentityChange)r(i)}diff(r){if(null==r&&(r=[]),!dg(r))throw new dt(900,!1);return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let h,f,m,i=this._itHead,a=!1;if(Array.isArray(r)){this.length=r.length;for(let v=0;v<this.length;v++)f=r[v],m=this._trackByFn(v,f),null!==i&&Object.is(i.trackById,m)?(a&&(i=this._verifyReinsertion(i,f,m,v)),Object.is(i.item,f)||this._addIdentityChange(i,f)):(i=this._mismatch(i,f,m,v),a=!0),i=i._next}else h=0,function vD(o,r){if(Array.isArray(o))for(let i=0;i<o.length;i++)r(o[i]);else{const i=o[Ju()]();let a;for(;!(a=i.next()).done;)r(a.value)}}(r,v=>{m=this._trackByFn(h,v),null!==i&&Object.is(i.trackById,m)?(a&&(i=this._verifyReinsertion(i,v,m,h)),Object.is(i.item,v)||this._addIdentityChange(i,v)):(i=this._mismatch(i,v,m,h),a=!0),i=i._next,h++}),this.length=h;return this._truncate(i),this.collection=r,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let r;for(r=this._previousItHead=this._itHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._additionsHead;null!==r;r=r._nextAdded)r.previousIndex=r.currentIndex;for(this._additionsHead=this._additionsTail=null,r=this._movesHead;null!==r;r=r._nextMoved)r.previousIndex=r.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(r,i,a,h){let f;return null===r?f=this._itTail:(f=r._prev,this._remove(r)),null!==(r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null))?(Object.is(r.item,i)||this._addIdentityChange(r,i),this._reinsertAfter(r,f,h)):null!==(r=null===this._linkedRecords?null:this._linkedRecords.get(a,h))?(Object.is(r.item,i)||this._addIdentityChange(r,i),this._moveAfter(r,f,h)):r=this._addAfter(new UL(i,a),f,h),r}_verifyReinsertion(r,i,a,h){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null);return null!==f?r=this._reinsertAfter(f,r._prev,h):r.currentIndex!=h&&(r.currentIndex=h,this._addToMoves(r,h)),r}_truncate(r){for(;null!==r;){const i=r._next;this._addToRemovals(this._unlink(r)),r=i}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(r,i,a){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(r);const h=r._prevRemoved,f=r._nextRemoved;return null===h?this._removalsHead=f:h._nextRemoved=f,null===f?this._removalsTail=h:f._prevRemoved=h,this._insertAfter(r,i,a),this._addToMoves(r,a),r}_moveAfter(r,i,a){return this._unlink(r),this._insertAfter(r,i,a),this._addToMoves(r,a),r}_addAfter(r,i,a){return this._insertAfter(r,i,a),this._additionsTail=null===this._additionsTail?this._additionsHead=r:this._additionsTail._nextAdded=r,r}_insertAfter(r,i,a){const h=null===i?this._itHead:i._next;return r._next=h,r._prev=i,null===h?this._itTail=r:h._prev=r,null===i?this._itHead=r:i._next=r,null===this._linkedRecords&&(this._linkedRecords=new iN),this._linkedRecords.put(r),r.currentIndex=a,r}_remove(r){return this._addToRemovals(this._unlink(r))}_unlink(r){null!==this._linkedRecords&&this._linkedRecords.remove(r);const i=r._prev,a=r._next;return null===i?this._itHead=a:i._next=a,null===a?this._itTail=i:a._prev=i,r}_addToMoves(r,i){return r.previousIndex===i||(this._movesTail=null===this._movesTail?this._movesHead=r:this._movesTail._nextMoved=r),r}_addToRemovals(r){return null===this._unlinkedRecords&&(this._unlinkedRecords=new iN),this._unlinkedRecords.put(r),r.currentIndex=null,r._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=r,r._prevRemoved=null):(r._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=r),r}_addIdentityChange(r,i){return r.item=i,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=r:this._identityChangesTail._nextIdentityChange=r,r}}class UL{constructor(r,i){this.item=r,this.trackById=i,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class HL{constructor(){this._head=null,this._tail=null}add(r){null===this._head?(this._head=this._tail=r,r._nextDup=null,r._prevDup=null):(this._tail._nextDup=r,r._prevDup=this._tail,r._nextDup=null,this._tail=r)}get(r,i){let a;for(a=this._head;null!==a;a=a._nextDup)if((null===i||i<=a.currentIndex)&&Object.is(a.trackById,r))return a;return null}remove(r){const i=r._prevDup,a=r._nextDup;return null===i?this._head=a:i._nextDup=a,null===a?this._tail=i:a._prevDup=i,null===this._head}}class iN{constructor(){this.map=new Map}put(r){const i=r.trackById;let a=this.map.get(i);a||(a=new HL,this.map.set(i,a)),a.add(r)}get(r,i){const h=this.map.get(r);return h?h.get(r,i):null}remove(r){const i=r.trackById;return this.map.get(i).remove(r)&&this.map.delete(i),r}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function rN(o,r,i){const a=o.previousIndex;if(null===a)return a;let h=0;return i&&a<i.length&&(h=i[a]),a+r+h}class oN{constructor(){}supports(r){return r instanceof Map||by(r)}create(){return new zL}}class zL{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let i;for(i=this._mapHead;null!==i;i=i._next)r(i)}forEachPreviousItem(r){let i;for(i=this._previousMapHead;null!==i;i=i._nextPrevious)r(i)}forEachChangedItem(r){let i;for(i=this._changesHead;null!==i;i=i._nextChanged)r(i)}forEachAddedItem(r){let i;for(i=this._additionsHead;null!==i;i=i._nextAdded)r(i)}forEachRemovedItem(r){let i;for(i=this._removalsHead;null!==i;i=i._nextRemoved)r(i)}diff(r){if(r){if(!(r instanceof Map||by(r)))throw new dt(900,!1)}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let i=this._mapHead;if(this._appendAfter=null,this._forEach(r,(a,h)=>{if(i&&i.key===h)this._maybeAddToChanges(i,a),this._appendAfter=i,i=i._next;else{const f=this._getOrCreateRecordForKey(h,a);i=this._insertBeforeOrAppend(i,f)}}),i){i._prev&&(i._prev._next=null),this._removalsHead=i;for(let a=i;null!==a;a=a._nextRemoved)a===this._mapHead&&(this._mapHead=null),this._records.delete(a.key),a._nextRemoved=a._next,a.previousValue=a.currentValue,a.currentValue=null,a._prev=null,a._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,i){if(r){const a=r._prev;return i._next=r,i._prev=a,r._prev=i,a&&(a._next=i),r===this._mapHead&&(this._mapHead=i),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=i,i._prev=this._appendAfter):this._mapHead=i,this._appendAfter=i,null}_getOrCreateRecordForKey(r,i){if(this._records.has(r)){const h=this._records.get(r);this._maybeAddToChanges(h,i);const f=h._prev,m=h._next;return f&&(f._next=m),m&&(m._prev=f),h._next=null,h._prev=null,h}const a=new GL(r);return this._records.set(r,a),a.currentValue=i,this._addToAdditions(a),a}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,i){Object.is(i,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=i,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,i){r instanceof Map?r.forEach(i):Object.keys(r).forEach(a=>i(r[a],a))}}class GL{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function sN(){return new XC([new nN])}let XC=(()=>{class o{constructor(i){this.factories=i}static create(i,a){if(null!=a){const h=a.factories.slice();i=i.concat(h)}return new o(i)}static extend(i){return{provide:o,useFactory:a=>o.create(i,a||sN()),deps:[[o,new mf,new gf]]}}find(i){const a=this.factories.find(h=>h.supports(i));if(null!=a)return a;throw new dt(901,!1)}}return o.\u0275prov=A({token:o,providedIn:"root",factory:sN}),o})();function aN(){return new Kw([new oN])}let Kw=(()=>{class o{constructor(i){this.factories=i}static create(i,a){if(a){const h=a.factories.slice();i=i.concat(h)}return new o(i)}static extend(i){return{provide:o,useFactory:a=>o.create(i,a||aN()),deps:[[o,new mf,new gf]]}}find(i){const a=this.factories.find(h=>h.supports(i));if(a)return a;throw new dt(901,!1)}}return o.\u0275prov=A({token:o,providedIn:"root",factory:aN}),o})();const KL=zP(null,"core",[]);let YL=(()=>{class o{constructor(i){}}return o.\u0275fac=function(i){return new(i||o)(kt(Ww))},o.\u0275mod=ci({type:o}),o.\u0275inj=Xn({}),o})();let JC=null;function ph(){return JC}const Oo=new Yt("DocumentToken");let XD=(()=>{class o{historyGo(i){throw new Error("Not implemented")}}return o.\u0275fac=function(i){return new(i||o)},o.\u0275prov=A({token:o,factory:function(){return function QL(){return kt(lN)}()},providedIn:"platform"}),o})();const qL=new Yt("Location Initialized");let lN=(()=>{class o extends XD{constructor(i){super(),this._doc=i,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ph().getBaseHref(this._doc)}onPopState(i){const a=ph().getGlobalEventTarget(this._doc,"window");return a.addEventListener("popstate",i,!1),()=>a.removeEventListener("popstate",i)}onHashChange(i){const a=ph().getGlobalEventTarget(this._doc,"window");return a.addEventListener("hashchange",i,!1),()=>a.removeEventListener("hashchange",i)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(i){this.location.pathname=i}pushState(i,a,h){uN()?this._history.pushState(i,a,h):this.location.hash=h}replaceState(i,a,h){uN()?this._history.replaceState(i,a,h):this.location.hash=h}forward(){this._history.forward()}back(){this._history.back()}historyGo(i=0){this._history.go(i)}getState(){return this._history.state}}return o.\u0275fac=function(i){return new(i||o)(kt(Oo))},o.\u0275prov=A({token:o,factory:function(){return function tF(){return new lN(kt(Oo))}()},providedIn:"platform"}),o})();function uN(){return!!window.history.pushState}function JD(o,r){if(0==o.length)return r;if(0==r.length)return o;let i=0;return o.endsWith("/")&&i++,r.startsWith("/")&&i++,2==i?o+r.substring(1):1==i?o+r:o+"/"+r}function hN(o){const r=o.match(/#|\?|$/),i=r&&r.index||o.length;return o.slice(0,i-("/"===o[i-1]?1:0))+o.slice(i)}function Nc(o){return o&&"?"!==o[0]?"?"+o:o}let Og=(()=>{class o{historyGo(i){throw new Error("Not implemented")}}return o.\u0275fac=function(i){return new(i||o)},o.\u0275prov=A({token:o,factory:function(){return Je(fN)},providedIn:"root"}),o})();const cN=new Yt("appBaseHref");let fN=(()=>{class o extends Og{constructor(i,a){super(),this._platformLocation=i,this._removeListenerFns=[],this._baseHref=a??this._platformLocation.getBaseHrefFromDOM()??Je(Oo).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(i){this._removeListenerFns.push(this._platformLocation.onPopState(i),this._platformLocation.onHashChange(i))}getBaseHref(){return this._baseHref}prepareExternalUrl(i){return JD(this._baseHref,i)}path(i=!1){const a=this._platformLocation.pathname+Nc(this._platformLocation.search),h=this._platformLocation.hash;return h&&i?`${a}${h}`:a}pushState(i,a,h,f){const m=this.prepareExternalUrl(h+Nc(f));this._platformLocation.pushState(i,a,m)}replaceState(i,a,h,f){const m=this.prepareExternalUrl(h+Nc(f));this._platformLocation.replaceState(i,a,m)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(i=0){this._platformLocation.historyGo?.(i)}}return o.\u0275fac=function(i){return new(i||o)(kt(XD),kt(cN,8))},o.\u0275prov=A({token:o,factory:o.\u0275fac,providedIn:"root"}),o})(),eF=(()=>{class o extends Og{constructor(i,a){super(),this._platformLocation=i,this._baseHref="",this._removeListenerFns=[],null!=a&&(this._baseHref=a)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(i){this._removeListenerFns.push(this._platformLocation.onPopState(i),this._platformLocation.onHashChange(i))}getBaseHref(){return this._baseHref}path(i=!1){let a=this._platformLocation.hash;return null==a&&(a="#"),a.length>0?a.substring(1):a}prepareExternalUrl(i){const a=JD(this._baseHref,i);return a.length>0?"#"+a:a}pushState(i,a,h,f){let m=this.prepareExternalUrl(h+Nc(f));0==m.length&&(m=this._platformLocation.pathname),this._platformLocation.pushState(i,a,m)}replaceState(i,a,h,f){let m=this.prepareExternalUrl(h+Nc(f));0==m.length&&(m=this._platformLocation.pathname),this._platformLocation.replaceState(i,a,m)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(i=0){this._platformLocation.historyGo?.(i)}}return o.\u0275fac=function(i){return new(i||o)(kt(XD),kt(cN,8))},o.\u0275prov=A({token:o,factory:o.\u0275fac}),o})(),ZD=(()=>{class o{constructor(i){this._subject=new gn,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=i;const a=this._locationStrategy.getBaseHref();this._baseHref=hN(dN(a)),this._locationStrategy.onPopState(h=>{this._subject.emit({url:this.path(!0),pop:!0,state:h.state,type:h.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(i=!1){return this.normalize(this._locationStrategy.path(i))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(i,a=""){return this.path()==this.normalize(i+Nc(a))}normalize(i){return o.stripTrailingSlash(function iF(o,r){return o&&r.startsWith(o)?r.substring(o.length):r}(this._baseHref,dN(i)))}prepareExternalUrl(i){return i&&"/"!==i[0]&&(i="/"+i),this._locationStrategy.prepareExternalUrl(i)}go(i,a="",h=null){this._locationStrategy.pushState(h,"",i,a),this._notifyUrlChangeListeners(this.prepareExternalUrl(i+Nc(a)),h)}replaceState(i,a="",h=null){this._locationStrategy.replaceState(h,"",i,a),this._notifyUrlChangeListeners(this.prepareExternalUrl(i+Nc(a)),h)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(i=0){this._locationStrategy.historyGo?.(i)}onUrlChange(i){return this._urlChangeListeners.push(i),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(a=>{this._notifyUrlChangeListeners(a.url,a.state)})),()=>{const a=this._urlChangeListeners.indexOf(i);this._urlChangeListeners.splice(a,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(i="",a){this._urlChangeListeners.forEach(h=>h(i,a))}subscribe(i,a,h){return this._subject.subscribe({next:i,error:a,complete:h})}}return o.normalizeQueryParams=Nc,o.joinWithSlash=JD,o.stripTrailingSlash=hN,o.\u0275fac=function(i){return new(i||o)(kt(Og))},o.\u0275prov=A({token:o,factory:function(){return function nF(){return new ZD(kt(Og))}()},providedIn:"root"}),o})();function dN(o){return o.replace(/\/index.html$/,"")}function MN(o,r){r=encodeURIComponent(r);for(const i of o.split(";")){const a=i.indexOf("="),[h,f]=-1==a?[i,""]:[i.slice(0,a),i.slice(a+1)];if(h.trim()===r)return decodeURIComponent(f)}return null}let av=(()=>{class o{constructor(i,a,h,f){this._iterableDiffers=i,this._keyValueDiffers=a,this._ngEl=h,this._renderer=f,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(i){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof i?i.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(i){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof i?i.split(/\s+/):i,this._rawClass&&(dg(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const i=this._iterableDiffer.diff(this._rawClass);i&&this._applyIterableChanges(i)}else if(this._keyValueDiffer){const i=this._keyValueDiffer.diff(this._rawClass);i&&this._applyKeyValueChanges(i)}}_applyKeyValueChanges(i){i.forEachAddedItem(a=>this._toggleClass(a.key,a.currentValue)),i.forEachChangedItem(a=>this._toggleClass(a.key,a.currentValue)),i.forEachRemovedItem(a=>{a.previousValue&&this._toggleClass(a.key,!1)})}_applyIterableChanges(i){i.forEachAddedItem(a=>{if("string"!=typeof a.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${It(a.item)}`);this._toggleClass(a.item,!0)}),i.forEachRemovedItem(a=>this._toggleClass(a.item,!1))}_applyClasses(i){i&&(Array.isArray(i)||i instanceof Set?i.forEach(a=>this._toggleClass(a,!0)):Object.keys(i).forEach(a=>this._toggleClass(a,!!i[a])))}_removeClasses(i){i&&(Array.isArray(i)||i instanceof Set?i.forEach(a=>this._toggleClass(a,!1)):Object.keys(i).forEach(a=>this._toggleClass(a,!1)))}_toggleClass(i,a){(i=i.trim())&&i.split(/\s+/g).forEach(h=>{a?this._renderer.addClass(this._ngEl.nativeElement,h):this._renderer.removeClass(this._ngEl.nativeElement,h)})}}return o.\u0275fac=function(i){return new(i||o)(ct(XC),ct(Kw),ct(Kn),ct(Ja))},o.\u0275dir=Xt({type:o,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),o})();class UF{constructor(r,i,a,h){this.$implicit=r,this.ngForOf=i,this.index=a,this.count=h}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let sM=(()=>{class o{constructor(i,a,h){this._viewContainer=i,this._template=a,this._differs=h,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(i){this._ngForOf=i,this._ngForOfDirty=!0}set ngForTrackBy(i){this._trackByFn=i}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(i){i&&(this._template=i)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const i=this._ngForOf;!this._differ&&i&&(this._differ=this._differs.find(i).create(this.ngForTrackBy))}if(this._differ){const i=this._differ.diff(this._ngForOf);i&&this._applyChanges(i)}}_applyChanges(i){const a=this._viewContainer;i.forEachOperation((h,f,m)=>{if(null==h.previousIndex)a.createEmbeddedView(this._template,new UF(h.item,this._ngForOf,-1,-1),null===m?void 0:m);else if(null==m)a.remove(null===f?void 0:f);else if(null!==f){const v=a.get(f);a.move(v,m),_N(v,h)}});for(let h=0,f=a.length;h<f;h++){const v=a.get(h).context;v.index=h,v.count=f,v.ngForOf=this._ngForOf}i.forEachIdentityChange(h=>{_N(a.get(h.currentIndex),h)})}static ngTemplateContextGuard(i,a){return!0}}return o.\u0275fac=function(i){return new(i||o)(ct(cu),ct(dh),ct(XC))},o.\u0275dir=Xt({type:o,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),o})();function _N(o,r){o.context.$implicit=r.item}let Jw=(()=>{class o{constructor(i,a){this._viewContainer=i,this._context=new zF,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=a}set ngIf(i){this._context.$implicit=this._context.ngIf=i,this._updateView()}set ngIfThen(i){TN("ngIfThen",i),this._thenTemplateRef=i,this._thenViewRef=null,this._updateView()}set ngIfElse(i){TN("ngIfElse",i),this._elseTemplateRef=i,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(i,a){return!0}}return o.\u0275fac=function(i){return new(i||o)(ct(cu),ct(dh))},o.\u0275dir=Xt({type:o,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),o})();class zF{constructor(){this.$implicit=null,this.ngIf=null}}function TN(o,r){if(r&&!r.createEmbeddedView)throw new Error(`${o} must be a TemplateRef, but received '${It(r)}'.`)}let Zw=(()=>{class o{constructor(i,a,h){this._ngEl=i,this._differs=a,this._renderer=h,this._ngStyle=null,this._differ=null}set ngStyle(i){this._ngStyle=i,!this._differ&&i&&(this._differ=this._differs.find(i).create())}ngDoCheck(){if(this._differ){const i=this._differ.diff(this._ngStyle);i&&this._applyChanges(i)}}_setStyle(i,a){const[h,f]=i.split("."),m=-1===h.indexOf("-")?void 0:jr.DashCase;null!=a?this._renderer.setStyle(this._ngEl.nativeElement,h,f?`${a}${f}`:a,m):this._renderer.removeStyle(this._ngEl.nativeElement,h,m)}_applyChanges(i){i.forEachRemovedItem(a=>this._setStyle(a.key,null)),i.forEachAddedItem(a=>this._setStyle(a.key,a.currentValue)),i.forEachChangedItem(a=>this._setStyle(a.key,a.currentValue))}}return o.\u0275fac=function(i){return new(i||o)(ct(Kn),ct(Kw),ct(Ja))},o.\u0275dir=Xt({type:o,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),o})(),aM=(()=>{class o{constructor(i){this._viewContainerRef=i,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(i){if(i.ngTemplateOutlet||i.ngTemplateOutletInjector){const a=this._viewContainerRef;if(this._viewRef&&a.remove(a.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:h,ngTemplateOutletContext:f,ngTemplateOutletInjector:m}=this;this._viewRef=a.createEmbeddedView(h,f,m?{injector:m}:void 0)}else this._viewRef=null}else this._viewRef&&i.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return o.\u0275fac=function(i){return new(i||o)(ct(cu))},o.\u0275dir=Xt({type:o,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[Me]}),o})(),Ac=(()=>{class o{}return o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=ci({type:o}),o.\u0275inj=Xn({}),o})();let v2=(()=>{class o{}return o.\u0275prov=A({token:o,providedIn:"root",factory:()=>new w2(kt(Oo),window)}),o})();class w2{constructor(r,i){this.document=r,this.window=i,this.offset=()=>[0,0]}setOffset(r){this.offset=Array.isArray(r)?()=>r:r}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(r){this.supportsScrolling()&&this.window.scrollTo(r[0],r[1])}scrollToAnchor(r){if(!this.supportsScrolling())return;const i=function x2(o,r){const i=o.getElementById(r)||o.getElementsByName(r)[0];if(i)return i;if("function"==typeof o.createTreeWalker&&o.body&&(o.body.createShadowRoot||o.body.attachShadow)){const a=o.createTreeWalker(o.body,NodeFilter.SHOW_ELEMENT);let h=a.currentNode;for(;h;){const f=h.shadowRoot;if(f){const m=f.getElementById(r)||f.querySelector(`[name="${r}"]`);if(m)return m}h=a.nextNode()}}return null}(this.document,r);i&&(this.scrollToElement(i),i.focus())}setHistoryScrollRestoration(r){if(this.supportScrollRestoration()){const i=this.window.history;i&&i.scrollRestoration&&(i.scrollRestoration=r)}}scrollToElement(r){const i=r.getBoundingClientRect(),a=i.left+this.window.pageXOffset,h=i.top+this.window.pageYOffset,f=this.offset();this.window.scrollTo(a-f[0],h-f[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const r=IN(this.window.history)||IN(Object.getPrototypeOf(this.window.history));return!(!r||!r.writable&&!r.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function IN(o){return Object.getOwnPropertyDescriptor(o,"scrollRestoration")}class AN{}class d_ extends class j2 extends class ZL{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function JL(o){JC||(JC=o)}(new d_)}onAndCancel(r,i,a){return r.addEventListener(i,a,!1),()=>{r.removeEventListener(i,a,!1)}}dispatchEvent(r,i){r.dispatchEvent(i)}remove(r){r.parentNode&&r.parentNode.removeChild(r)}createElement(r,i){return(i=i||this.getDefaultDocument()).createElement(r)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(r){return r.nodeType===Node.ELEMENT_NODE}isShadowRoot(r){return r instanceof DocumentFragment}getGlobalEventTarget(r,i){return"window"===i?window:"document"===i?r:"body"===i?r.body:null}getBaseHref(r){const i=function V2(){return qw=qw||document.querySelector("base"),qw?qw.getAttribute("href"):null}();return null==i?null:function B2(o){uM=uM||document.createElement("a"),uM.setAttribute("href",o);const r=uM.pathname;return"/"===r.charAt(0)?r:`/${r}`}(i)}resetBaseElement(){qw=null}getUserAgent(){return window.navigator.userAgent}getCookie(r){return MN(document.cookie,r)}}let uM,qw=null;const LN=new Yt("TRANSITION_ID"),H2=[{provide:zC,useFactory:function U2(o,r,i){return()=>{i.get(GC).donePromise.then(()=>{const a=ph(),h=r.querySelectorAll(`style[ng-transition="${o}"]`);for(let f=0;f<h.length;f++)a.remove(h[f])})}},deps:[LN,Oo,fr],multi:!0}];let G2=(()=>{class o{build(){return new XMLHttpRequest}}return o.\u0275fac=function(i){return new(i||o)},o.\u0275prov=A({token:o,factory:o.\u0275fac}),o})();const hM=new Yt("EventManagerPlugins");let cM=(()=>{class o{constructor(i,a){this._zone=a,this._eventNameToPlugin=new Map,i.forEach(h=>h.manager=this),this._plugins=i.slice().reverse()}addEventListener(i,a,h){return this._findPluginFor(a).addEventListener(i,a,h)}addGlobalEventListener(i,a,h){return this._findPluginFor(a).addGlobalEventListener(i,a,h)}getZone(){return this._zone}_findPluginFor(i){const a=this._eventNameToPlugin.get(i);if(a)return a;const h=this._plugins;for(let f=0;f<h.length;f++){const m=h[f];if(m.supports(i))return this._eventNameToPlugin.set(i,m),m}throw new Error(`No event manager plugin found for event ${i}`)}}return o.\u0275fac=function(i){return new(i||o)(kt(hM),kt(Ni))},o.\u0275prov=A({token:o,factory:o.\u0275fac}),o})();class FN{constructor(r){this._doc=r}addGlobalEventListener(r,i,a){const h=ph().getGlobalEventTarget(this._doc,r);if(!h)throw new Error(`Unsupported event target ${h} for event ${i}`);return this.addEventListener(h,i,a)}}let RN=(()=>{class o{constructor(){this._stylesSet=new Set}addStyles(i){const a=new Set;i.forEach(h=>{this._stylesSet.has(h)||(this._stylesSet.add(h),a.add(h))}),this.onStylesAdded(a)}onStylesAdded(i){}getAllStyles(){return Array.from(this._stylesSet)}}return o.\u0275fac=function(i){return new(i||o)},o.\u0275prov=A({token:o,factory:o.\u0275fac}),o})(),tx=(()=>{class o extends RN{constructor(i){super(),this._doc=i,this._hostNodes=new Map,this._hostNodes.set(i.head,[])}_addStylesToHost(i,a,h){i.forEach(f=>{const m=this._doc.createElement("style");m.textContent=f,h.push(a.appendChild(m))})}addHost(i){const a=[];this._addStylesToHost(this._stylesSet,i,a),this._hostNodes.set(i,a)}removeHost(i){const a=this._hostNodes.get(i);a&&a.forEach(jN),this._hostNodes.delete(i)}onStylesAdded(i){this._hostNodes.forEach((a,h)=>{this._addStylesToHost(i,h,a)})}ngOnDestroy(){this._hostNodes.forEach(i=>i.forEach(jN))}}return o.\u0275fac=function(i){return new(i||o)(kt(Oo))},o.\u0275prov=A({token:o,factory:o.\u0275fac}),o})();function jN(o){ph().remove(o)}const p_={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},g_=/%COMP%/g;function fM(o,r,i){for(let a=0;a<r.length;a++){let h=r[a];Array.isArray(h)?fM(o,h,i):(h=h.replace(g_,o),i.push(h))}return i}function UN(o){return r=>{if("__ngUnwrap__"===r)return o;!1===o(r)&&(r.preventDefault(),r.returnValue=!1)}}let dM=(()=>{class o{constructor(i,a,h){this.eventManager=i,this.sharedStylesHost=a,this.appId=h,this.rendererByCompId=new Map,this.defaultRenderer=new m_(i)}createRenderer(i,a){if(!i||!a)return this.defaultRenderer;switch(a.encapsulation){case Ls.Emulated:{let h=this.rendererByCompId.get(a.id);return h||(h=new J2(this.eventManager,this.sharedStylesHost,a,this.appId),this.rendererByCompId.set(a.id,h)),h.applyToHost(i),h}case 1:case Ls.ShadowDom:return new Z2(this.eventManager,this.sharedStylesHost,i,a);default:if(!this.rendererByCompId.has(a.id)){const h=fM(a.id,a.styles,[]);this.sharedStylesHost.addStyles(h),this.rendererByCompId.set(a.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return o.\u0275fac=function(i){return new(i||o)(kt(cM),kt(tx),kt($w))},o.\u0275prov=A({token:o,factory:o.\u0275fac}),o})();class m_{constructor(r){this.eventManager=r,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(r,i){return i?document.createElementNS(p_[i]||i,r):document.createElement(r)}createComment(r){return document.createComment(r)}createText(r){return document.createTextNode(r)}appendChild(r,i){(zN(r)?r.content:r).appendChild(i)}insertBefore(r,i,a){r&&(zN(r)?r.content:r).insertBefore(i,a)}removeChild(r,i){r&&r.removeChild(i)}selectRootElement(r,i){let a="string"==typeof r?document.querySelector(r):r;if(!a)throw new Error(`The selector "${r}" did not match any elements`);return i||(a.textContent=""),a}parentNode(r){return r.parentNode}nextSibling(r){return r.nextSibling}setAttribute(r,i,a,h){if(h){i=h+":"+i;const f=p_[h];f?r.setAttributeNS(f,i,a):r.setAttribute(i,a)}else r.setAttribute(i,a)}removeAttribute(r,i,a){if(a){const h=p_[a];h?r.removeAttributeNS(h,i):r.removeAttribute(`${a}:${i}`)}else r.removeAttribute(i)}addClass(r,i){r.classList.add(i)}removeClass(r,i){r.classList.remove(i)}setStyle(r,i,a,h){h&(jr.DashCase|jr.Important)?r.style.setProperty(i,a,h&jr.Important?"important":""):r.style[i]=a}removeStyle(r,i,a){a&jr.DashCase?r.style.removeProperty(i):r.style[i]=""}setProperty(r,i,a){r[i]=a}setValue(r,i){r.nodeValue=i}listen(r,i,a){return"string"==typeof r?this.eventManager.addGlobalEventListener(r,i,UN(a)):this.eventManager.addEventListener(r,i,UN(a))}}function zN(o){return"TEMPLATE"===o.tagName&&void 0!==o.content}class J2 extends m_{constructor(r,i,a,h){super(r),this.component=a;const f=fM(h+"-"+a.id,a.styles,[]);i.addStyles(f),this.contentAttr=function K2(o){return"_ngcontent-%COMP%".replace(g_,o)}(h+"-"+a.id),this.hostAttr=function Y2(o){return"_nghost-%COMP%".replace(g_,o)}(h+"-"+a.id)}applyToHost(r){super.setAttribute(r,this.hostAttr,"")}createElement(r,i){const a=super.createElement(r,i);return super.setAttribute(a,this.contentAttr,""),a}}class Z2 extends m_{constructor(r,i,a,h){super(r),this.sharedStylesHost=i,this.hostEl=a,this.shadowRoot=a.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const f=fM(h.id,h.styles,[]);for(let m=0;m<f.length;m++){const v=document.createElement("style");v.textContent=f[m],this.shadowRoot.appendChild(v)}}nodeOrShadowRoot(r){return r===this.hostEl?this.shadowRoot:r}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(r,i){return super.appendChild(this.nodeOrShadowRoot(r),i)}insertBefore(r,i,a){return super.insertBefore(this.nodeOrShadowRoot(r),i,a)}removeChild(r,i){return super.removeChild(this.nodeOrShadowRoot(r),i)}parentNode(r){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(r)))}}let Q2=(()=>{class o extends FN{constructor(i){super(i)}supports(i){return!0}addEventListener(i,a,h){return i.addEventListener(a,h,!1),()=>this.removeEventListener(i,a,h)}removeEventListener(i,a,h){return i.removeEventListener(a,h)}}return o.\u0275fac=function(i){return new(i||o)(kt(Oo))},o.\u0275prov=A({token:o,factory:o.\u0275fac}),o})();const GN=["alt","control","meta","shift"],q2={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},tR={alt:o=>o.altKey,control:o=>o.ctrlKey,meta:o=>o.metaKey,shift:o=>o.shiftKey};let eR=(()=>{class o extends FN{constructor(i){super(i)}supports(i){return null!=o.parseEventName(i)}addEventListener(i,a,h){const f=o.parseEventName(a),m=o.eventCallback(f.fullKey,h,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ph().onAndCancel(i,f.domEventName,m))}static parseEventName(i){const a=i.toLowerCase().split("."),h=a.shift();if(0===a.length||"keydown"!==h&&"keyup"!==h)return null;const f=o._normalizeKey(a.pop());let m="",v=a.indexOf("code");if(v>-1&&(a.splice(v,1),m="code."),GN.forEach(S=>{const T=a.indexOf(S);T>-1&&(a.splice(T,1),m+=S+".")}),m+=f,0!=a.length||0===f.length)return null;const x={};return x.domEventName=h,x.fullKey=m,x}static matchEventFullKeyCode(i,a){let h=q2[i.key]||i.key,f="";return a.indexOf("code.")>-1&&(h=i.code,f="code."),!(null==h||!h)&&(h=h.toLowerCase()," "===h?h="space":"."===h&&(h="dot"),GN.forEach(m=>{m!==h&&(0,tR[m])(i)&&(f+=m+".")}),f+=h,f===a)}static eventCallback(i,a,h){return f=>{o.matchEventFullKeyCode(f,i)&&h.runGuarded(()=>a(f))}}static _normalizeKey(i){return"esc"===i?"escape":i}}return o.\u0275fac=function(i){return new(i||o)(kt(Oo))},o.\u0275prov=A({token:o,factory:o.\u0275fac}),o})();const oR=zP(KL,"browser",[{provide:LD,useValue:"browser"},{provide:kP,useValue:function nR(){d_.makeCurrent()},multi:!0},{provide:Oo,useFactory:function rR(){return function Uh(o){Bh=o}(document),document},deps:[]}]),KN=new Yt(""),YN=[{provide:$C,useClass:class z2{addToWindow(r){bn.getAngularTestability=(a,h=!0)=>{const f=r.findTestabilityInTree(a,h);if(null==f)throw new Error("Could not find testability for element.");return f},bn.getAllAngularTestabilities=()=>r.getAllTestabilities(),bn.getAllAngularRootElements=()=>r.getAllRootElements(),bn.frameworkStabilizers||(bn.frameworkStabilizers=[]),bn.frameworkStabilizers.push(a=>{const h=bn.getAllAngularTestabilities();let f=h.length,m=!1;const v=function(x){m=m||x,f--,0==f&&a(m)};h.forEach(function(x){x.whenStable(v)})})}findTestabilityInTree(r,i,a){return null==i?null:r.getTestability(i)??(a?ph().isShadowRoot(i)?this.findTestabilityInTree(r,i.host,!0):this.findTestabilityInTree(r,i.parentElement,!0):null)}},deps:[]},{provide:VP,useClass:BD,deps:[Ni,UD,$C]},{provide:BD,useClass:BD,deps:[Ni,UD,$C]}],XN=[{provide:Ji,useValue:"root"},{provide:$u,useFactory:function iR(){return new $u},deps:[]},{provide:hM,useClass:Q2,multi:!0,deps:[Oo,Ni,LD]},{provide:hM,useClass:eR,multi:!0,deps:[Oo]},{provide:dM,useClass:dM,deps:[cM,tx,$w]},{provide:Af,useExisting:dM},{provide:RN,useExisting:tx},{provide:tx,useClass:tx,deps:[Oo]},{provide:cM,useClass:cM,deps:[hM,Ni]},{provide:AN,useClass:G2,deps:[]},[]];let JN=(()=>{class o{constructor(i){}static withServerTransition(i){return{ngModule:o,providers:[{provide:$w,useValue:i.appId},{provide:LN,useExisting:$w},H2]}}}return o.\u0275fac=function(i){return new(i||o)(kt(KN,12))},o.\u0275mod=ci({type:o}),o.\u0275inj=Xn({providers:[...XN,...YN],imports:[Ac,YL]}),o})(),ZN=(()=>{class o{constructor(i){this._doc=i}getTitle(){return this._doc.title}setTitle(i){this._doc.title=i||""}}return o.\u0275fac=function(i){return new(i||o)(kt(Oo))},o.\u0275prov=A({token:o,factory:function(i){let a=null;return a=i?new i:function aR(){return new ZN(kt(Oo))}(),a},providedIn:"root"}),o})();function ne(...o){return Vt(o,$d(o))}typeof window<"u"&&window;class gu extends bs{constructor(r){super(),this._value=r}get value(){return this.getValue()}_subscribe(r){const i=super._subscribe(r);return!i.closed&&r.next(this._value),i}getValue(){const{hasError:r,thrownError:i,_value:a}=this;if(r)throw i;return this._throwIfClosed(),a}next(r){super.next(this._value=r)}}const pM=_t(o=>function(){o(this),this.name="EmptyError",this.message="no elements in sequence"}),{isArray:gR}=Array,{getPrototypeOf:mR,prototype:yR,keys:vR}=Object;function tI(o){if(1===o.length){const r=o[0];if(gR(r))return{args:r,keys:null};if(function wR(o){return o&&"object"==typeof o&&mR(o)===yR}(r)){const i=vR(r);return{args:i.map(a=>r[a]),keys:i}}}return{args:o,keys:null}}const{isArray:xR}=Array;function eI(o){return Re(r=>function CR(o,r){return xR(r)?o(...r):o(r)}(o,r))}function nI(o,r){return o.reduce((i,a,h)=>(i[a]=r[h],i),{})}function iI(...o){const r=$d(o),i=Yx(o),{args:a,keys:h}=tI(o);if(0===a.length)return Vt([],r);const f=new $i(function MR(o,r,i=zc){return a=>{rI(r,()=>{const{length:h}=o,f=new Array(h);let m=h,v=h;for(let x=0;x<h;x++)rI(r,()=>{const S=Vt(o[x],r);let T=!1;S.subscribe(yr(a,N=>{f[x]=N,T||(T=!0,v--),v||a.next(i(f.slice()))},()=>{--m||a.complete()}))},a)},a)}}(a,r,h?m=>nI(h,m):zc));return i?f.pipe(eI(i)):f}function rI(o,r,i){o?ja(i,o,r):r()}function w_(...o){return function SR(){return vu(1)}()(Vt(o,$d(o)))}function oI(o){return new $i(r=>{aa(o()).subscribe(r)})}function ex(o,r){const i=ei(o)?o:()=>o,a=h=>h.error(i());return new $i(r?h=>r.schedule(a,0,h):a)}function x_(){return Or((o,r)=>{let i=null;o._refCount++;const a=yr(r,void 0,void 0,void 0,()=>{if(!o||o._refCount<=0||0<--o._refCount)return void(i=null);const h=o._connection,f=i;i=null,h&&(!f||h===f)&&h.unsubscribe(),r.unsubscribe()});o.subscribe(a),a.closed||(i=o.connect())})}class sI extends $i{constructor(r,i){super(),this.source=r,this.subjectFactory=i,this._subject=null,this._refCount=0,this._connection=null,_S(r)&&(this.lift=r.lift)}_subscribe(r){return this.getSubject().subscribe(r)}getSubject(){const r=this._subject;return(!r||r.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:r}=this;this._subject=this._connection=null,r?.unsubscribe()}connect(){let r=this._connection;if(!r){r=this._connection=new sa;const i=this.getSubject();r.add(this.source.subscribe(yr(i,void 0,()=>{this._teardown(),i.complete()},a=>{this._teardown(),i.error(a)},()=>this._teardown()))),r.closed&&(this._connection=null,r=sa.EMPTY)}return r}refCount(){return x_()(this)}}function gh(o,r){return Or((i,a)=>{let h=null,f=0,m=!1;const v=()=>m&&!h&&a.complete();i.subscribe(yr(a,x=>{h?.unsubscribe();let S=0;const T=f++;aa(o(x,T)).subscribe(h=yr(a,N=>a.next(r?r(x,N,T,S++):N),()=>{h=null,v()}))},()=>{m=!0,v()}))})}function nx(o){return o<=0?()=>El:Or((r,i)=>{let a=0;r.subscribe(yr(i,h=>{++a<=o&&(i.next(h),o<=a&&i.complete())}))})}function kc(o,r){return Or((i,a)=>{let h=0;i.subscribe(yr(a,f=>o.call(r,f,h++)&&a.next(f)))})}function gM(o){return Or((r,i)=>{let a=!1;r.subscribe(yr(i,h=>{a=!0,i.next(h)},()=>{a||i.next(o),i.complete()}))})}function aI(o=_R){return Or((r,i)=>{let a=!1;r.subscribe(yr(i,h=>{a=!0,i.next(h)},()=>a?i.complete():i.error(o())))})}function _R(){return new pM}function Id(o,r){const i=arguments.length>=2;return a=>a.pipe(o?kc((h,f)=>o(h,f,a)):zc,nx(1),i?gM(r):aI(()=>new pM))}function Ad(o,r){return ei(r)?or(o,r,1):or(o,1)}function ss(o,r,i){const a=ei(o)||r||i?{next:o,error:r,complete:i}:o;return a?Or((h,f)=>{var m;null===(m=a.subscribe)||void 0===m||m.call(a);let v=!0;h.subscribe(yr(f,x=>{var S;null===(S=a.next)||void 0===S||S.call(a,x),f.next(x)},()=>{var x;v=!1,null===(x=a.complete)||void 0===x||x.call(a),f.complete()},x=>{var S;v=!1,null===(S=a.error)||void 0===S||S.call(a,x),f.error(x)},()=>{var x,S;v&&(null===(x=a.unsubscribe)||void 0===x||x.call(a)),null===(S=a.finalize)||void 0===S||S.call(a)}))}):zc}function kd(o){return Or((r,i)=>{let f,a=null,h=!1;a=r.subscribe(yr(i,void 0,void 0,m=>{f=aa(o(m,kd(o)(r))),a?(a.unsubscribe(),a=null,f.subscribe(i)):h=!0})),h&&(a.unsubscribe(),a=null,f.subscribe(i))})}function TR(o,r,i,a,h){return(f,m)=>{let v=i,x=r,S=0;f.subscribe(yr(m,T=>{const N=S++;x=v?o(x,T,N):(v=!0,T),a&&m.next(x)},h&&(()=>{v&&m.next(x),m.complete()})))}}function lI(o,r){return Or(TR(o,r,arguments.length>=2,!0))}function C_(o){return o<=0?()=>El:Or((r,i)=>{let a=[];r.subscribe(yr(i,h=>{a.push(h),o<a.length&&a.shift()},()=>{for(const h of a)i.next(h);i.complete()},void 0,()=>{a=null}))})}function uI(o,r){const i=arguments.length>=2;return a=>a.pipe(o?kc((h,f)=>o(h,f,a)):zc,C_(1),i?gM(r):aI(()=>new pM))}function M_(o){return Or((r,i)=>{try{r.subscribe(i)}finally{i.add(o)}})}const He="primary",ix=Symbol("RouteTitle");class NR{constructor(r){this.params=r||{}}has(r){return Object.prototype.hasOwnProperty.call(this.params,r)}get(r){if(this.has(r)){const i=this.params[r];return Array.isArray(i)?i[0]:i}return null}getAll(r){if(this.has(r)){const i=this.params[r];return Array.isArray(i)?i:[i]}return[]}get keys(){return Object.keys(this.params)}}function lv(o){return new NR(o)}function IR(o,r,i){const a=i.path.split("/");if(a.length>o.length||"full"===i.pathMatch&&(r.hasChildren()||a.length<o.length))return null;const h={};for(let f=0;f<a.length;f++){const m=a[f],v=o[f];if(m.startsWith(":"))h[m.substring(1)]=v;else if(m!==v.path)return null}return{consumed:o.slice(0,a.length),posParams:h}}function mh(o,r){const i=o?Object.keys(o):void 0,a=r?Object.keys(r):void 0;if(!i||!a||i.length!=a.length)return!1;let h;for(let f=0;f<i.length;f++)if(h=i[f],!hI(o[h],r[h]))return!1;return!0}function hI(o,r){if(Array.isArray(o)&&Array.isArray(r)){if(o.length!==r.length)return!1;const i=[...o].sort(),a=[...r].sort();return i.every((h,f)=>a[f]===h)}return o===r}function cI(o){return Array.prototype.concat.apply([],o)}function fI(o){return o.length>0?o[o.length-1]:null}function Lo(o,r){for(const i in o)o.hasOwnProperty(i)&&r(o[i],i)}function bd(o){return cd(o)?o:uc(o)?Vt(Promise.resolve(o)):ne(o)}const bR={exact:function gI(o,r,i){if(!Fg(o.segments,r.segments)||!mM(o.segments,r.segments,i)||o.numberOfChildren!==r.numberOfChildren)return!1;for(const a in r.children)if(!o.children[a]||!gI(o.children[a],r.children[a],i))return!1;return!0},subset:mI},dI={exact:function OR(o,r){return mh(o,r)},subset:function LR(o,r){return Object.keys(r).length<=Object.keys(o).length&&Object.keys(r).every(i=>hI(o[i],r[i]))},ignored:()=>!0};function pI(o,r,i){return bR[i.paths](o.root,r.root,i.matrixParams)&&dI[i.queryParams](o.queryParams,r.queryParams)&&!("exact"===i.fragment&&o.fragment!==r.fragment)}function mI(o,r,i){return yI(o,r,r.segments,i)}function yI(o,r,i,a){if(o.segments.length>i.length){const h=o.segments.slice(0,i.length);return!(!Fg(h,i)||r.hasChildren()||!mM(h,i,a))}if(o.segments.length===i.length){if(!Fg(o.segments,i)||!mM(o.segments,i,a))return!1;for(const h in r.children)if(!o.children[h]||!mI(o.children[h],r.children[h],a))return!1;return!0}{const h=i.slice(0,o.segments.length),f=i.slice(o.segments.length);return!!(Fg(o.segments,h)&&mM(o.segments,h,a)&&o.children[He])&&yI(o.children[He],r,f,a)}}function mM(o,r,i){return r.every((a,h)=>dI[i](o[h].parameters,a.parameters))}class Lg{constructor(r,i,a){this.root=r,this.queryParams=i,this.fragment=a}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=lv(this.queryParams)),this._queryParamMap}toString(){return jR.serialize(this)}}class We{constructor(r,i){this.segments=r,this.children=i,this.parent=null,Lo(i,(a,h)=>a.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return yM(this)}}class rx{constructor(r,i){this.path=r,this.parameters=i}get parameterMap(){return this._parameterMap||(this._parameterMap=lv(this.parameters)),this._parameterMap}toString(){return CI(this)}}function Fg(o,r){return o.length===r.length&&o.every((i,a)=>i.path===r[a].path)}let vI=(()=>{class o{}return o.\u0275fac=function(i){return new(i||o)},o.\u0275prov=A({token:o,factory:function(){return new D_},providedIn:"root"}),o})();class D_{parse(r){const i=new KR(r);return new Lg(i.parseRootSegment(),i.parseQueryParams(),i.parseFragment())}serialize(r){const i=`/${ox(r.root,!0)}`,a=function UR(o){const r=Object.keys(o).map(i=>{const a=o[i];return Array.isArray(a)?a.map(h=>`${vM(i)}=${vM(h)}`).join("&"):`${vM(i)}=${vM(a)}`}).filter(i=>!!i);return r.length?`?${r.join("&")}`:""}(r.queryParams);return`${i}${a}${"string"==typeof r.fragment?`#${function VR(o){return encodeURI(o)}(r.fragment)}`:""}`}}const jR=new D_;function yM(o){return o.segments.map(r=>CI(r)).join("/")}function ox(o,r){if(!o.hasChildren())return yM(o);if(r){const i=o.children[He]?ox(o.children[He],!1):"",a=[];return Lo(o.children,(h,f)=>{f!==He&&a.push(`${f}:${ox(h,!1)}`)}),a.length>0?`${i}(${a.join("//")})`:i}{const i=function RR(o,r){let i=[];return Lo(o.children,(a,h)=>{h===He&&(i=i.concat(r(a,h)))}),Lo(o.children,(a,h)=>{h!==He&&(i=i.concat(r(a,h)))}),i}(o,(a,h)=>h===He?[ox(o.children[He],!1)]:[`${h}:${ox(a,!1)}`]);return 1===Object.keys(o.children).length&&null!=o.children[He]?`${yM(o)}/${i[0]}`:`${yM(o)}/(${i.join("//")})`}}function wI(o){return encodeURIComponent(o).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function vM(o){return wI(o).replace(/%3B/gi,";")}function __(o){return wI(o).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function wM(o){return decodeURIComponent(o)}function xI(o){return wM(o.replace(/\+/g,"%20"))}function CI(o){return`${__(o.path)}${function BR(o){return Object.keys(o).map(r=>`;${__(r)}=${__(o[r])}`).join("")}(o.parameters)}`}const HR=/^[^\/()?;=#]+/;function xM(o){const r=o.match(HR);return r?r[0]:""}const zR=/^[^=?&#]+/,$R=/^[^&#]+/;class KR{constructor(r){this.url=r,this.remaining=r}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new We([],{}):new We([],this.parseChildren())}parseQueryParams(){const r={};if(this.consumeOptional("?"))do{this.parseQueryParam(r)}while(this.consumeOptional("&"));return r}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const r=[];for(this.peekStartsWith("(")||r.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),r.push(this.parseSegment());let i={};this.peekStartsWith("/(")&&(this.capture("/"),i=this.parseParens(!0));let a={};return this.peekStartsWith("(")&&(a=this.parseParens(!1)),(r.length>0||Object.keys(i).length>0)&&(a[He]=new We(r,i)),a}parseSegment(){const r=xM(this.remaining);if(""===r&&this.peekStartsWith(";"))throw new dt(4009,!1);return this.capture(r),new rx(wM(r),this.parseMatrixParams())}parseMatrixParams(){const r={};for(;this.consumeOptional(";");)this.parseParam(r);return r}parseParam(r){const i=xM(this.remaining);if(!i)return;this.capture(i);let a="";if(this.consumeOptional("=")){const h=xM(this.remaining);h&&(a=h,this.capture(a))}r[wM(i)]=wM(a)}parseQueryParam(r){const i=function GR(o){const r=o.match(zR);return r?r[0]:""}(this.remaining);if(!i)return;this.capture(i);let a="";if(this.consumeOptional("=")){const m=function WR(o){const r=o.match($R);return r?r[0]:""}(this.remaining);m&&(a=m,this.capture(a))}const h=xI(i),f=xI(a);if(r.hasOwnProperty(h)){let m=r[h];Array.isArray(m)||(m=[m],r[h]=m),m.push(f)}else r[h]=f}parseParens(r){const i={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const a=xM(this.remaining),h=this.remaining[a.length];if("/"!==h&&")"!==h&&";"!==h)throw new dt(4010,!1);let f;a.indexOf(":")>-1?(f=a.slice(0,a.indexOf(":")),this.capture(f),this.capture(":")):r&&(f=He);const m=this.parseChildren();i[f]=1===Object.keys(m).length?m[He]:new We([],m),this.consumeOptional("//")}return i}peekStartsWith(r){return this.remaining.startsWith(r)}consumeOptional(r){return!!this.peekStartsWith(r)&&(this.remaining=this.remaining.substring(r.length),!0)}capture(r){if(!this.consumeOptional(r))throw new dt(4011,!1)}}function T_(o){return o.segments.length>0?new We([],{[He]:o}):o}function CM(o){const r={};for(const a of Object.keys(o.children)){const f=CM(o.children[a]);(f.segments.length>0||f.hasChildren())&&(r[a]=f)}return function YR(o){if(1===o.numberOfChildren&&o.children[He]){const r=o.children[He];return new We(o.segments.concat(r.segments),r.children)}return o}(new We(o.segments,r))}function Rg(o){return o instanceof Lg}function ZR(o,r,i,a,h){if(0===i.length)return uv(r.root,r.root,r.root,a,h);const f=function DI(o){if("string"==typeof o[0]&&1===o.length&&"/"===o[0])return new SI(!0,0,o);let r=0,i=!1;const a=o.reduce((h,f,m)=>{if("object"==typeof f&&null!=f){if(f.outlets){const v={};return Lo(f.outlets,(x,S)=>{v[S]="string"==typeof x?x.split("/"):x}),[...h,{outlets:v}]}if(f.segmentPath)return[...h,f.segmentPath]}return"string"!=typeof f?[...h,f]:0===m?(f.split("/").forEach((v,x)=>{0==x&&"."===v||(0==x&&""===v?i=!0:".."===v?r++:""!=v&&h.push(v))}),h):[...h,f]},[]);return new SI(i,r,a)}(i);return f.toRoot()?uv(r.root,r.root,new We([],{}),a,h):function m(x){const S=function qR(o,r,i,a){if(o.isAbsolute)return new hv(r.root,!0,0);if(-1===a)return new hv(i,i===r.root,0);return function _I(o,r,i){let a=o,h=r,f=i;for(;f>h;){if(f-=h,a=a.parent,!a)throw new dt(4005,!1);h=a.segments.length}return new hv(a,!1,h-f)}(i,a+(sx(o.commands[0])?0:1),o.numberOfDoubleDots)}(f,r,o.snapshot?._urlSegment,x),T=S.processChildren?lx(S.segmentGroup,S.index,f.commands):P_(S.segmentGroup,S.index,f.commands);return uv(r.root,S.segmentGroup,T,a,h)}(o.snapshot?._lastPathIndex)}function sx(o){return"object"==typeof o&&null!=o&&!o.outlets&&!o.segmentPath}function ax(o){return"object"==typeof o&&null!=o&&o.outlets}function uv(o,r,i,a,h){let m,f={};a&&Lo(a,(x,S)=>{f[S]=Array.isArray(x)?x.map(T=>`${T}`):`${x}`}),m=o===r?i:MI(o,r,i);const v=T_(CM(m));return new Lg(v,f,h)}function MI(o,r,i){const a={};return Lo(o.children,(h,f)=>{a[f]=h===r?i:MI(h,r,i)}),new We(o.segments,a)}class SI{constructor(r,i,a){if(this.isAbsolute=r,this.numberOfDoubleDots=i,this.commands=a,r&&a.length>0&&sx(a[0]))throw new dt(4003,!1);const h=a.find(ax);if(h&&h!==fI(a))throw new dt(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class hv{constructor(r,i,a){this.segmentGroup=r,this.processChildren=i,this.index=a}}function P_(o,r,i){if(o||(o=new We([],{})),0===o.segments.length&&o.hasChildren())return lx(o,r,i);const a=function ej(o,r,i){let a=0,h=r;const f={match:!1,pathIndex:0,commandIndex:0};for(;h<o.segments.length;){if(a>=i.length)return f;const m=o.segments[h],v=i[a];if(ax(v))break;const x=`${v}`,S=a<i.length-1?i[a+1]:null;if(h>0&&void 0===x)break;if(x&&S&&"object"==typeof S&&void 0===S.outlets){if(!EI(x,S,m))return f;a+=2}else{if(!EI(x,{},m))return f;a++}h++}return{match:!0,pathIndex:h,commandIndex:a}}(o,r,i),h=i.slice(a.commandIndex);if(a.match&&a.pathIndex<o.segments.length){const f=new We(o.segments.slice(0,a.pathIndex),{});return f.children[He]=new We(o.segments.slice(a.pathIndex),o.children),lx(f,0,h)}return a.match&&0===h.length?new We(o.segments,{}):a.match&&!o.hasChildren()?N_(o,r,i):a.match?lx(o,0,h):N_(o,r,i)}function lx(o,r,i){if(0===i.length)return new We(o.segments,{});{const a=function tj(o){return ax(o[0])?o[0].outlets:{[He]:o}}(i),h={};return Lo(a,(f,m)=>{"string"==typeof f&&(f=[f]),null!==f&&(h[m]=P_(o.children[m],r,f))}),Lo(o.children,(f,m)=>{void 0===a[m]&&(h[m]=f)}),new We(o.segments,h)}}function N_(o,r,i){const a=o.segments.slice(0,r);let h=0;for(;h<i.length;){const f=i[h];if(ax(f)){const x=nj(f.outlets);return new We(a,x)}if(0===h&&sx(i[0])){a.push(new rx(o.segments[r].path,TI(i[0]))),h++;continue}const m=ax(f)?f.outlets[He]:`${f}`,v=h<i.length-1?i[h+1]:null;m&&v&&sx(v)?(a.push(new rx(m,TI(v))),h+=2):(a.push(new rx(m,{})),h++)}return new We(a,{})}function nj(o){const r={};return Lo(o,(i,a)=>{"string"==typeof i&&(i=[i]),null!==i&&(r[a]=N_(new We([],{}),0,i))}),r}function TI(o){const r={};return Lo(o,(i,a)=>r[a]=`${i}`),r}function EI(o,r,i){return o==i.path&&mh(r,i.parameters)}class bc{constructor(r,i){this.id=r,this.url=i}}class I_ extends bc{constructor(r,i,a="imperative",h=null){super(r,i),this.type=0,this.navigationTrigger=a,this.restoredState=h}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class jg extends bc{constructor(r,i,a){super(r,i),this.urlAfterRedirects=a,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class MM extends bc{constructor(r,i,a,h){super(r,i),this.reason=a,this.code=h,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class PI extends bc{constructor(r,i,a,h){super(r,i),this.error=a,this.target=h,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class ij extends bc{constructor(r,i,a,h){super(r,i),this.urlAfterRedirects=a,this.state=h,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class rj extends bc{constructor(r,i,a,h){super(r,i),this.urlAfterRedirects=a,this.state=h,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class oj extends bc{constructor(r,i,a,h,f){super(r,i),this.urlAfterRedirects=a,this.state=h,this.shouldActivate=f,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class sj extends bc{constructor(r,i,a,h){super(r,i),this.urlAfterRedirects=a,this.state=h,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class aj extends bc{constructor(r,i,a,h){super(r,i),this.urlAfterRedirects=a,this.state=h,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class lj{constructor(r){this.route=r,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class uj{constructor(r){this.route=r,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class hj{constructor(r){this.snapshot=r,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class cj{constructor(r){this.snapshot=r,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class fj{constructor(r){this.snapshot=r,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class dj{constructor(r){this.snapshot=r,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class NI{constructor(r,i,a){this.routerEvent=r,this.position=i,this.anchor=a,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class II{constructor(r){this._root=r}get root(){return this._root.value}parent(r){const i=this.pathFromRoot(r);return i.length>1?i[i.length-2]:null}children(r){const i=A_(r,this._root);return i?i.children.map(a=>a.value):[]}firstChild(r){const i=A_(r,this._root);return i&&i.children.length>0?i.children[0].value:null}siblings(r){const i=k_(r,this._root);return i.length<2?[]:i[i.length-2].children.map(h=>h.value).filter(h=>h!==r)}pathFromRoot(r){return k_(r,this._root).map(i=>i.value)}}function A_(o,r){if(o===r.value)return r;for(const i of r.children){const a=A_(o,i);if(a)return a}return null}function k_(o,r){if(o===r.value)return[r];for(const i of r.children){const a=k_(o,i);if(a.length)return a.unshift(r),a}return[]}class Oc{constructor(r,i){this.value=r,this.children=i}toString(){return`TreeNode(${this.value})`}}function cv(o){const r={};return o&&o.children.forEach(i=>r[i.value.outlet]=i),r}class AI extends II{constructor(r,i){super(r),this.snapshot=i,b_(this,r)}toString(){return this.snapshot.toString()}}function kI(o,r){const i=function gj(o,r){const m=new SM([],{},{},"",{},He,r,null,o.root,-1,{});return new OI("",new Oc(m,[]))}(o,r),a=new gu([new rx("",{})]),h=new gu({}),f=new gu({}),m=new gu({}),v=new gu(""),x=new Vg(a,h,m,v,f,He,r,i.root);return x.snapshot=i.root,new AI(new Oc(x,[]),i)}class Vg{constructor(r,i,a,h,f,m,v,x){this.url=r,this.params=i,this.queryParams=a,this.fragment=h,this.data=f,this.outlet=m,this.component=v,this.title=this.data?.pipe(Re(S=>S[ix]))??ne(void 0),this._futureSnapshot=x}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Re(r=>lv(r)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Re(r=>lv(r)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function bI(o,r="emptyOnly"){const i=o.pathFromRoot;let a=0;if("always"!==r)for(a=i.length-1;a>=1;){const h=i[a],f=i[a-1];if(h.routeConfig&&""===h.routeConfig.path)a--;else{if(f.component)break;a--}}return function mj(o){return o.reduce((r,i)=>({params:{...r.params,...i.params},data:{...r.data,...i.data},resolve:{...i.data,...r.resolve,...i.routeConfig?.data,...i._resolvedData}}),{params:{},data:{},resolve:{}})}(i.slice(a))}class SM{constructor(r,i,a,h,f,m,v,x,S,T,N,F){this.url=r,this.params=i,this.queryParams=a,this.fragment=h,this.data=f,this.outlet=m,this.component=v,this.title=this.data?.[ix],this.routeConfig=x,this._urlSegment=S,this._lastPathIndex=T,this._correctedLastPathIndex=F??T,this._resolve=N}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=lv(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=lv(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(a=>a.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class OI extends II{constructor(r,i){super(i),this.url=r,b_(this,i)}toString(){return LI(this._root)}}function b_(o,r){r.value._routerState=o,r.children.forEach(i=>b_(o,i))}function LI(o){const r=o.children.length>0?` { ${o.children.map(LI).join(", ")} } `:"";return`${o.value}${r}`}function O_(o){if(o.snapshot){const r=o.snapshot,i=o._futureSnapshot;o.snapshot=i,mh(r.queryParams,i.queryParams)||o.queryParams.next(i.queryParams),r.fragment!==i.fragment&&o.fragment.next(i.fragment),mh(r.params,i.params)||o.params.next(i.params),function AR(o,r){if(o.length!==r.length)return!1;for(let i=0;i<o.length;++i)if(!mh(o[i],r[i]))return!1;return!0}(r.url,i.url)||o.url.next(i.url),mh(r.data,i.data)||o.data.next(i.data)}else o.snapshot=o._futureSnapshot,o.data.next(o._futureSnapshot.data)}function L_(o,r){const i=mh(o.params,r.params)&&function FR(o,r){return Fg(o,r)&&o.every((i,a)=>mh(i.parameters,r[a].parameters))}(o.url,r.url);return i&&!(!o.parent!=!r.parent)&&(!o.parent||L_(o.parent,r.parent))}function ux(o,r,i){if(i&&o.shouldReuseRoute(r.value,i.value.snapshot)){const a=i.value;a._futureSnapshot=r.value;const h=function vj(o,r,i){return r.children.map(a=>{for(const h of i.children)if(o.shouldReuseRoute(a.value,h.value.snapshot))return ux(o,a,h);return ux(o,a)})}(o,r,i);return new Oc(a,h)}{if(o.shouldAttach(r.value)){const f=o.retrieve(r.value);if(null!==f){const m=f.route;return m.value._futureSnapshot=r.value,m.children=r.children.map(v=>ux(o,v)),m}}const a=function wj(o){return new Vg(new gu(o.url),new gu(o.params),new gu(o.queryParams),new gu(o.fragment),new gu(o.data),o.outlet,o.component,o)}(r.value),h=r.children.map(f=>ux(o,f));return new Oc(a,h)}}const F_="ngNavigationCancelingError";function FI(o,r){const{redirectTo:i,navigationBehaviorOptions:a}=Rg(r)?{redirectTo:r,navigationBehaviorOptions:void 0}:r,h=RI(!1,0,r);return h.url=i,h.navigationBehaviorOptions=a,h}function RI(o,r,i){const a=new Error("NavigationCancelingError: "+(o||""));return a[F_]=!0,a.cancellationCode=r,i&&(a.url=i),a}function jI(o){return VI(o)&&Rg(o.url)}function VI(o){return o&&o[F_]}class xj{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new hx,this.attachRef=null}}let hx=(()=>{class o{constructor(){this.contexts=new Map}onChildOutletCreated(i,a){const h=this.getOrCreateContext(i);h.outlet=a,this.contexts.set(i,h)}onChildOutletDestroyed(i){const a=this.getContext(i);a&&(a.outlet=null,a.attachRef=null)}onOutletDeactivated(){const i=this.contexts;return this.contexts=new Map,i}onOutletReAttached(i){this.contexts=i}getOrCreateContext(i){let a=this.getContext(i);return a||(a=new xj,this.contexts.set(i,a)),a}getContext(i){return this.contexts.get(i)||null}}return o.\u0275fac=function(i){return new(i||o)},o.\u0275prov=A({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const DM=!1;let BI=(()=>{class o{constructor(i,a,h,f,m){this.parentContexts=i,this.location=a,this.changeDetector=f,this.environmentInjector=m,this.activated=null,this._activatedRoute=null,this.activateEvents=new gn,this.deactivateEvents=new gn,this.attachEvents=new gn,this.detachEvents=new gn,this.name=h||He,i.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const i=this.parentContexts.getContext(this.name);i&&i.route&&(i.attachRef?this.attach(i.attachRef,i.route):this.activateWith(i.route,i.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new dt(4012,DM);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new dt(4012,DM);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new dt(4012,DM);this.location.detach();const i=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(i.instance),i}attach(i,a){this.activated=i,this._activatedRoute=a,this.location.insert(i.hostView),this.attachEvents.emit(i.instance)}deactivate(){if(this.activated){const i=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(i)}}activateWith(i,a){if(this.isActivated)throw new dt(4013,DM);this._activatedRoute=i;const h=this.location,m=i._futureSnapshot.component,v=this.parentContexts.getOrCreateContext(this.name).children,x=new Cj(i,v,h.injector);if(a&&function Mj(o){return!!o.resolveComponentFactory}(a)){const S=a.resolveComponentFactory(m);this.activated=h.createComponent(S,h.length,x)}else this.activated=h.createComponent(m,{index:h.length,injector:x,environmentInjector:a??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return o.\u0275fac=function(i){return new(i||o)(ct(hx),ct(cu),function Tr(o){return function um(o,r){if("class"===r)return o.classes;if("style"===r)return o.styles;const i=o.attrs;if(i){const a=i.length;let h=0;for(;h<a;){const f=i[h];if(rp(f))break;if(0===f)h+=2;else if("number"==typeof f)for(h++;h<a&&"string"==typeof i[h];)h++;else{if(f===r)return i[h+1];h+=2}}}return null}(Ki(),o)}("name"),ct(Pd),ct(va))},o.\u0275dir=Xt({type:o,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),o})();class Cj{constructor(r,i,a){this.route=r,this.childContexts=i,this.parent=a}get(r,i){return r===Vg?this.route:r===hx?this.childContexts:this.parent.get(r,i)}}let R_=(()=>{class o{}return o.\u0275fac=function(i){return new(i||o)},o.\u0275cmp=Lr({type:o,selectors:[["ng-component"]],standalone:!0,features:[WE],decls:1,vars:0,template:function(i,a){1&i&&Ta(0,"router-outlet")},dependencies:[BI],encapsulation:2}),o})();function UI(o,r){return o.providers&&!o._injector&&(o._injector=_d(o.providers,r,`Route: ${o.path}`)),o._injector??r}function V_(o){const r=o.children&&o.children.map(V_),i=r?{...o,children:r}:{...o};return!i.component&&!i.loadComponent&&(r||i.loadChildren)&&i.outlet&&i.outlet!==He&&(i.component=R_),i}function Sl(o){return o.outlet||He}function HI(o,r){const i=o.filter(a=>Sl(a)===r);return i.push(...o.filter(a=>Sl(a)!==r)),i}function cx(o){if(!o)return null;if(o.routeConfig?._injector)return o.routeConfig._injector;for(let r=o.parent;r;r=r.parent){const i=r.routeConfig;if(i?._loadedInjector)return i._loadedInjector;if(i?._injector)return i._injector}return null}class Ej{constructor(r,i,a,h){this.routeReuseStrategy=r,this.futureState=i,this.currState=a,this.forwardEvent=h}activate(r){const i=this.futureState._root,a=this.currState?this.currState._root:null;this.deactivateChildRoutes(i,a,r),O_(this.futureState.root),this.activateChildRoutes(i,a,r)}deactivateChildRoutes(r,i,a){const h=cv(i);r.children.forEach(f=>{const m=f.value.outlet;this.deactivateRoutes(f,h[m],a),delete h[m]}),Lo(h,(f,m)=>{this.deactivateRouteAndItsChildren(f,a)})}deactivateRoutes(r,i,a){const h=r.value,f=i?i.value:null;if(h===f)if(h.component){const m=a.getContext(h.outlet);m&&this.deactivateChildRoutes(r,i,m.children)}else this.deactivateChildRoutes(r,i,a);else f&&this.deactivateRouteAndItsChildren(i,a)}deactivateRouteAndItsChildren(r,i){r.value.component&&this.routeReuseStrategy.shouldDetach(r.value.snapshot)?this.detachAndStoreRouteSubtree(r,i):this.deactivateRouteAndOutlet(r,i)}detachAndStoreRouteSubtree(r,i){const a=i.getContext(r.value.outlet),h=a&&r.value.component?a.children:i,f=cv(r);for(const m of Object.keys(f))this.deactivateRouteAndItsChildren(f[m],h);if(a&&a.outlet){const m=a.outlet.detach(),v=a.children.onOutletDeactivated();this.routeReuseStrategy.store(r.value.snapshot,{componentRef:m,route:r,contexts:v})}}deactivateRouteAndOutlet(r,i){const a=i.getContext(r.value.outlet),h=a&&r.value.component?a.children:i,f=cv(r);for(const m of Object.keys(f))this.deactivateRouteAndItsChildren(f[m],h);a&&a.outlet&&(a.outlet.deactivate(),a.children.onOutletDeactivated(),a.attachRef=null,a.resolver=null,a.route=null)}activateChildRoutes(r,i,a){const h=cv(i);r.children.forEach(f=>{this.activateRoutes(f,h[f.value.outlet],a),this.forwardEvent(new dj(f.value.snapshot))}),r.children.length&&this.forwardEvent(new cj(r.value.snapshot))}activateRoutes(r,i,a){const h=r.value,f=i?i.value:null;if(O_(h),h===f)if(h.component){const m=a.getOrCreateContext(h.outlet);this.activateChildRoutes(r,i,m.children)}else this.activateChildRoutes(r,i,a);else if(h.component){const m=a.getOrCreateContext(h.outlet);if(this.routeReuseStrategy.shouldAttach(h.snapshot)){const v=this.routeReuseStrategy.retrieve(h.snapshot);this.routeReuseStrategy.store(h.snapshot,null),m.children.onOutletReAttached(v.contexts),m.attachRef=v.componentRef,m.route=v.route.value,m.outlet&&m.outlet.attach(v.componentRef,v.route.value),O_(v.route.value),this.activateChildRoutes(r,null,m.children)}else{const v=cx(h.snapshot),x=v?.get(If)??null;m.attachRef=null,m.route=h,m.resolver=x,m.injector=v,m.outlet&&m.outlet.activateWith(h,m.injector),this.activateChildRoutes(r,null,m.children)}}else this.activateChildRoutes(r,null,a)}}class zI{constructor(r){this.path=r,this.route=this.path[this.path.length-1]}}class _M{constructor(r,i){this.component=r,this.route=i}}function Pj(o,r,i){const a=o._root;return fx(a,r?r._root:null,i,[a.value])}function fv(o,r){const i=Symbol(),a=r.get(o,i);return a===i?"function"!=typeof o||function Pv(o){return null!==$c(o)}(o)?r.get(o):o:a}function fx(o,r,i,a,h={canDeactivateChecks:[],canActivateChecks:[]}){const f=cv(r);return o.children.forEach(m=>{(function Ij(o,r,i,a,h={canDeactivateChecks:[],canActivateChecks:[]}){const f=o.value,m=r?r.value:null,v=i?i.getContext(o.value.outlet):null;if(m&&f.routeConfig===m.routeConfig){const x=function Aj(o,r,i){if("function"==typeof i)return i(o,r);switch(i){case"pathParamsChange":return!Fg(o.url,r.url);case"pathParamsOrQueryParamsChange":return!Fg(o.url,r.url)||!mh(o.queryParams,r.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!L_(o,r)||!mh(o.queryParams,r.queryParams);default:return!L_(o,r)}}(m,f,f.routeConfig.runGuardsAndResolvers);x?h.canActivateChecks.push(new zI(a)):(f.data=m.data,f._resolvedData=m._resolvedData),fx(o,r,f.component?v?v.children:null:i,a,h),x&&v&&v.outlet&&v.outlet.isActivated&&h.canDeactivateChecks.push(new _M(v.outlet.component,m))}else m&&dx(r,v,h),h.canActivateChecks.push(new zI(a)),fx(o,null,f.component?v?v.children:null:i,a,h)})(m,f[m.value.outlet],i,a.concat([m.value]),h),delete f[m.value.outlet]}),Lo(f,(m,v)=>dx(m,i.getContext(v),h)),h}function dx(o,r,i){const a=cv(o),h=o.value;Lo(a,(f,m)=>{dx(f,h.component?r?r.children.getContext(m):null:r,i)}),i.canDeactivateChecks.push(new _M(h.component&&r&&r.outlet&&r.outlet.isActivated?r.outlet.component:null,h))}function px(o){return"function"==typeof o}function B_(o){return o instanceof pM||"EmptyError"===o?.name}const TM=Symbol("INITIAL_VALUE");function dv(){return gh(o=>iI(o.map(r=>r.pipe(nx(1),function DR(...o){const r=$d(o);return Or((i,a)=>{(r?w_(o,i,r):w_(o,i)).subscribe(a)})}(TM)))).pipe(Re(r=>{for(const i of r)if(!0!==i){if(i===TM)return TM;if(!1===i||i instanceof Lg)return i}return!0}),kc(r=>r!==TM),nx(1)))}function GI(o){return function wE(...o){return MS(o)}(ss(r=>{if(Rg(r))throw FI(0,r)}),Re(r=>!0===r))}const U_={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function $I(o,r,i,a,h){const f=H_(o,r,i);return f.matched?function Yj(o,r,i,a){const h=r.canMatch;return h&&0!==h.length?ne(h.map(m=>{const v=fv(m,o);return bd(function Rj(o){return o&&px(o.canMatch)}(v)?v.canMatch(r,i):o.runInContext(()=>v(r,i)))})).pipe(dv(),GI()):ne(!0)}(a=UI(r,a),r,i).pipe(Re(m=>!0===m?f:{...U_})):ne(f)}function H_(o,r,i){if(""===r.path)return"full"===r.pathMatch&&(o.hasChildren()||i.length>0)?{...U_}:{matched:!0,consumedSegments:[],remainingSegments:i,parameters:{},positionalParamSegments:{}};const h=(r.matcher||IR)(i,o,r);if(!h)return{...U_};const f={};Lo(h.posParams,(v,x)=>{f[x]=v.path});const m=h.consumed.length>0?{...f,...h.consumed[h.consumed.length-1].parameters}:f;return{matched:!0,consumedSegments:h.consumed,remainingSegments:i.slice(h.consumed.length),parameters:m,positionalParamSegments:h.posParams??{}}}function EM(o,r,i,a,h="corrected"){if(i.length>0&&function Zj(o,r,i){return i.some(a=>PM(o,r,a)&&Sl(a)!==He)}(o,i,a)){const m=new We(r,function Jj(o,r,i,a){const h={};h[He]=a,a._sourceSegment=o,a._segmentIndexShift=r.length;for(const f of i)if(""===f.path&&Sl(f)!==He){const m=new We([],{});m._sourceSegment=o,m._segmentIndexShift=r.length,h[Sl(f)]=m}return h}(o,r,a,new We(i,o.children)));return m._sourceSegment=o,m._segmentIndexShift=r.length,{segmentGroup:m,slicedSegments:[]}}if(0===i.length&&function Qj(o,r,i){return i.some(a=>PM(o,r,a))}(o,i,a)){const m=new We(o.segments,function Xj(o,r,i,a,h,f){const m={};for(const v of a)if(PM(o,i,v)&&!h[Sl(v)]){const x=new We([],{});x._sourceSegment=o,x._segmentIndexShift="legacy"===f?o.segments.length:r.length,m[Sl(v)]=x}return{...h,...m}}(o,r,i,a,o.children,h));return m._sourceSegment=o,m._segmentIndexShift=r.length,{segmentGroup:m,slicedSegments:i}}const f=new We(o.segments,o.children);return f._sourceSegment=o,f._segmentIndexShift=r.length,{segmentGroup:f,slicedSegments:i}}function PM(o,r,i){return(!(o.hasChildren()||r.length>0)||"full"!==i.pathMatch)&&""===i.path}function WI(o,r,i,a){return!!(Sl(o)===a||a!==He&&PM(r,i,o))&&("**"===o.path||H_(r,o,i).matched)}function KI(o,r,i){return 0===r.length&&!o.children[i]}const NM=!1;class IM{constructor(r){this.segmentGroup=r||null}}class YI{constructor(r){this.urlTree=r}}function gx(o){return ex(new IM(o))}function XI(o){return ex(new YI(o))}class nV{constructor(r,i,a,h,f){this.injector=r,this.configLoader=i,this.urlSerializer=a,this.urlTree=h,this.config=f,this.allowRedirects=!0}apply(){const r=EM(this.urlTree.root,[],[],this.config).segmentGroup,i=new We(r.segments,r.children);return this.expandSegmentGroup(this.injector,this.config,i,He).pipe(Re(f=>this.createUrlTree(CM(f),this.urlTree.queryParams,this.urlTree.fragment))).pipe(kd(f=>{if(f instanceof YI)return this.allowRedirects=!1,this.match(f.urlTree);throw f instanceof IM?this.noMatchError(f):f}))}match(r){return this.expandSegmentGroup(this.injector,this.config,r.root,He).pipe(Re(h=>this.createUrlTree(CM(h),r.queryParams,r.fragment))).pipe(kd(h=>{throw h instanceof IM?this.noMatchError(h):h}))}noMatchError(r){return new dt(4002,NM)}createUrlTree(r,i,a){const h=T_(r);return new Lg(h,i,a)}expandSegmentGroup(r,i,a,h){return 0===a.segments.length&&a.hasChildren()?this.expandChildren(r,i,a).pipe(Re(f=>new We([],f))):this.expandSegment(r,a,i,a.segments,h,!0)}expandChildren(r,i,a){const h=[];for(const f of Object.keys(a.children))"primary"===f?h.unshift(f):h.push(f);return Vt(h).pipe(Ad(f=>{const m=a.children[f],v=HI(i,f);return this.expandSegmentGroup(r,v,m,f).pipe(Re(x=>({segment:x,outlet:f})))}),lI((f,m)=>(f[m.outlet]=m.segment,f),{}),uI())}expandSegment(r,i,a,h,f,m){return Vt(a).pipe(Ad(v=>this.expandSegmentAgainstRoute(r,i,a,v,h,f,m).pipe(kd(S=>{if(S instanceof IM)return ne(null);throw S}))),Id(v=>!!v),kd((v,x)=>{if(B_(v))return KI(i,h,f)?ne(new We([],{})):gx(i);throw v}))}expandSegmentAgainstRoute(r,i,a,h,f,m,v){return WI(h,i,f,m)?void 0===h.redirectTo?this.matchSegmentAgainstRoute(r,i,h,f,m):v&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(r,i,a,h,f,m):gx(i):gx(i)}expandSegmentAgainstRouteUsingRedirect(r,i,a,h,f,m){return"**"===h.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(r,a,h,m):this.expandRegularSegmentAgainstRouteUsingRedirect(r,i,a,h,f,m)}expandWildCardWithParamsAgainstRouteUsingRedirect(r,i,a,h){const f=this.applyRedirectCommands([],a.redirectTo,{});return a.redirectTo.startsWith("/")?XI(f):this.lineralizeSegments(a,f).pipe(or(m=>{const v=new We(m,{});return this.expandSegment(r,v,i,m,h,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(r,i,a,h,f,m){const{matched:v,consumedSegments:x,remainingSegments:S,positionalParamSegments:T}=H_(i,h,f);if(!v)return gx(i);const N=this.applyRedirectCommands(x,h.redirectTo,T);return h.redirectTo.startsWith("/")?XI(N):this.lineralizeSegments(h,N).pipe(or(F=>this.expandSegment(r,i,a,F.concat(S),m,!1)))}matchSegmentAgainstRoute(r,i,a,h,f){return"**"===a.path?(r=UI(a,r),a.loadChildren?(a._loadedRoutes?ne({routes:a._loadedRoutes,injector:a._loadedInjector}):this.configLoader.loadChildren(r,a)).pipe(Re(v=>(a._loadedRoutes=v.routes,a._loadedInjector=v.injector,new We(h,{})))):ne(new We(h,{}))):$I(i,a,h,r).pipe(gh(({matched:m,consumedSegments:v,remainingSegments:x})=>m?this.getChildConfig(r=a._injector??r,a,h).pipe(or(T=>{const N=T.injector??r,F=T.routes,{segmentGroup:j,slicedSegments:B}=EM(i,v,x,F),W=new We(j.segments,j.children);if(0===B.length&&W.hasChildren())return this.expandChildren(N,F,W).pipe(Re(at=>new We(v,at)));if(0===F.length&&0===B.length)return ne(new We(v,{}));const it=Sl(a)===f;return this.expandSegment(N,W,F,B,it?He:f,!0).pipe(Re(ft=>new We(v.concat(ft.segments),ft.children)))})):gx(i)))}getChildConfig(r,i,a){return i.children?ne({routes:i.children,injector:r}):i.loadChildren?void 0!==i._loadedRoutes?ne({routes:i._loadedRoutes,injector:i._loadedInjector}):function Kj(o,r,i,a){const h=r.canLoad;return void 0===h||0===h.length?ne(!0):ne(h.map(m=>{const v=fv(m,o);return bd(function bj(o){return o&&px(o.canLoad)}(v)?v.canLoad(r,i):o.runInContext(()=>v(r,i)))})).pipe(dv(),GI())}(r,i,a).pipe(or(h=>h?this.configLoader.loadChildren(r,i).pipe(ss(f=>{i._loadedRoutes=f.routes,i._loadedInjector=f.injector})):function tV(o){return ex(RI(NM,3))}())):ne({routes:[],injector:r})}lineralizeSegments(r,i){let a=[],h=i.root;for(;;){if(a=a.concat(h.segments),0===h.numberOfChildren)return ne(a);if(h.numberOfChildren>1||!h.children[He])return ex(new dt(4e3,NM));h=h.children[He]}}applyRedirectCommands(r,i,a){return this.applyRedirectCreateUrlTree(i,this.urlSerializer.parse(i),r,a)}applyRedirectCreateUrlTree(r,i,a,h){const f=this.createSegmentGroup(r,i.root,a,h);return new Lg(f,this.createQueryParams(i.queryParams,this.urlTree.queryParams),i.fragment)}createQueryParams(r,i){const a={};return Lo(r,(h,f)=>{if("string"==typeof h&&h.startsWith(":")){const v=h.substring(1);a[f]=i[v]}else a[f]=h}),a}createSegmentGroup(r,i,a,h){const f=this.createSegments(r,i.segments,a,h);let m={};return Lo(i.children,(v,x)=>{m[x]=this.createSegmentGroup(r,v,a,h)}),new We(f,m)}createSegments(r,i,a,h){return i.map(f=>f.path.startsWith(":")?this.findPosParam(r,f,h):this.findOrReturn(f,a))}findPosParam(r,i,a){const h=a[i.path.substring(1)];if(!h)throw new dt(4001,NM);return h}findOrReturn(r,i){let a=0;for(const h of i){if(h.path===r.path)return i.splice(a),h;a++}return r}}class rV{}class aV{constructor(r,i,a,h,f,m,v,x){this.injector=r,this.rootComponentType=i,this.config=a,this.urlTree=h,this.url=f,this.paramsInheritanceStrategy=m,this.relativeLinkResolution=v,this.urlSerializer=x}recognize(){const r=EM(this.urlTree.root,[],[],this.config.filter(i=>void 0===i.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,r,He).pipe(Re(i=>{if(null===i)return null;const a=new SM([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},He,this.rootComponentType,null,this.urlTree.root,-1,{}),h=new Oc(a,i),f=new OI(this.url,h);return this.inheritParamsAndData(f._root),f}))}inheritParamsAndData(r){const i=r.value,a=bI(i,this.paramsInheritanceStrategy);i.params=Object.freeze(a.params),i.data=Object.freeze(a.data),r.children.forEach(h=>this.inheritParamsAndData(h))}processSegmentGroup(r,i,a,h){return 0===a.segments.length&&a.hasChildren()?this.processChildren(r,i,a):this.processSegment(r,i,a,a.segments,h)}processChildren(r,i,a){return Vt(Object.keys(a.children)).pipe(Ad(h=>{const f=a.children[h],m=HI(i,h);return this.processSegmentGroup(r,m,f,h)}),lI((h,f)=>h&&f?(h.push(...f),h):null),function ER(o,r=!1){return Or((i,a)=>{let h=0;i.subscribe(yr(a,f=>{const m=o(f,h++);(m||r)&&a.next(f),!m&&a.complete()}))})}(h=>null!==h),gM(null),uI(),Re(h=>{if(null===h)return null;const f=JI(h);return function lV(o){o.sort((r,i)=>r.value.outlet===He?-1:i.value.outlet===He?1:r.value.outlet.localeCompare(i.value.outlet))}(f),f}))}processSegment(r,i,a,h,f){return Vt(i).pipe(Ad(m=>this.processSegmentAgainstRoute(m._injector??r,m,a,h,f)),Id(m=>!!m),kd(m=>{if(B_(m))return KI(a,h,f)?ne([]):ne(null);throw m}))}processSegmentAgainstRoute(r,i,a,h,f){if(i.redirectTo||!WI(i,a,h,f))return ne(null);let m;if("**"===i.path){const v=h.length>0?fI(h).parameters:{},x=QI(a)+h.length;m=ne({snapshot:new SM(h,v,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,tA(i),Sl(i),i.component??i._loadedComponent??null,i,ZI(a),x,eA(i),x),consumedSegments:[],remainingSegments:[]})}else m=$I(a,i,h,r).pipe(Re(({matched:v,consumedSegments:x,remainingSegments:S,parameters:T})=>{if(!v)return null;const N=QI(a)+x.length;return{snapshot:new SM(x,T,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,tA(i),Sl(i),i.component??i._loadedComponent??null,i,ZI(a),N,eA(i),N),consumedSegments:x,remainingSegments:S}}));return m.pipe(gh(v=>{if(null===v)return ne(null);const{snapshot:x,consumedSegments:S,remainingSegments:T}=v;r=i._injector??r;const N=i._loadedInjector??r,F=function uV(o){return o.children?o.children:o.loadChildren?o._loadedRoutes:[]}(i),{segmentGroup:j,slicedSegments:B}=EM(a,S,T,F.filter(it=>void 0===it.redirectTo),this.relativeLinkResolution);if(0===B.length&&j.hasChildren())return this.processChildren(N,F,j).pipe(Re(it=>null===it?null:[new Oc(x,it)]));if(0===F.length&&0===B.length)return ne([new Oc(x,[])]);const W=Sl(i)===f;return this.processSegment(N,F,j,B,W?He:f).pipe(Re(it=>null===it?null:[new Oc(x,it)]))}))}}function hV(o){const r=o.value.routeConfig;return r&&""===r.path&&void 0===r.redirectTo}function JI(o){const r=[],i=new Set;for(const a of o){if(!hV(a)){r.push(a);continue}const h=r.find(f=>a.value.routeConfig===f.value.routeConfig);void 0!==h?(h.children.push(...a.children),i.add(h)):r.push(a)}for(const a of i){const h=JI(a.children);r.push(new Oc(a.value,h))}return r.filter(a=>!i.has(a))}function ZI(o){let r=o;for(;r._sourceSegment;)r=r._sourceSegment;return r}function QI(o){let r=o,i=r._segmentIndexShift??0;for(;r._sourceSegment;)r=r._sourceSegment,i+=r._segmentIndexShift??0;return i-1}function tA(o){return o.data||{}}function eA(o){return o.resolve||{}}function nA(o){return"string"==typeof o.title||null===o.title}function z_(o){return gh(r=>{const i=o(r);return i?Vt(i).pipe(Re(()=>r)):ne(r)})}let iA=(()=>{class o{buildTitle(i){let a,h=i.root;for(;void 0!==h;)a=this.getResolvedTitleForRoute(h)??a,h=h.children.find(f=>f.outlet===He);return a}getResolvedTitleForRoute(i){return i.data[ix]}}return o.\u0275fac=function(i){return new(i||o)},o.\u0275prov=A({token:o,factory:function(){return Je(rA)},providedIn:"root"}),o})(),rA=(()=>{class o extends iA{constructor(i){super(),this.title=i}updateTitle(i){const a=this.buildTitle(i);void 0!==a&&this.title.setTitle(a)}}return o.\u0275fac=function(i){return new(i||o)(kt(ZN))},o.\u0275prov=A({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();class vV{}class xV extends class wV{shouldDetach(r){return!1}store(r,i){}shouldAttach(r){return!1}retrieve(r){return null}shouldReuseRoute(r,i){return r.routeConfig===i.routeConfig}}{}const kM=new Yt("",{providedIn:"root",factory:()=>({})}),G_=new Yt("ROUTES");let $_=(()=>{class o{constructor(i,a){this.injector=i,this.compiler=a,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(i){if(this.componentLoaders.get(i))return this.componentLoaders.get(i);if(i._loadedComponent)return ne(i._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(i);const a=bd(i.loadComponent()).pipe(ss(f=>{this.onLoadEndListener&&this.onLoadEndListener(i),i._loadedComponent=f}),M_(()=>{this.componentLoaders.delete(i)})),h=new sI(a,()=>new bs).pipe(x_());return this.componentLoaders.set(i,h),h}loadChildren(i,a){if(this.childrenLoaders.get(a))return this.childrenLoaders.get(a);if(a._loadedRoutes)return ne({routes:a._loadedRoutes,injector:a._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(a);const f=this.loadModuleFactoryOrRoutes(a.loadChildren).pipe(Re(v=>{this.onLoadEndListener&&this.onLoadEndListener(a);let x,S,T=!1;Array.isArray(v)?S=v:(x=v.create(i).injector,S=cI(x.get(G_,[],Zt.Self|Zt.Optional)));return{routes:S.map(V_),injector:x}}),M_(()=>{this.childrenLoaders.delete(a)})),m=new sI(f,()=>new bs).pipe(x_());return this.childrenLoaders.set(a,m),m}loadModuleFactoryOrRoutes(i){return bd(i()).pipe(or(a=>a instanceof Ng||Array.isArray(a)?ne(a):Vt(this.compiler.compileModuleAsync(a))))}}return o.\u0275fac=function(i){return new(i||o)(kt(fr),kt(FD))},o.\u0275prov=A({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();class MV{}class SV{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}}function DV(o){throw o}function _V(o,r,i){return r.parse("/")}const TV={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},EV={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function sA(){const o=Je(vI),r=Je(hx),i=Je(ZD),a=Je(fr),h=Je(FD),f=Je(G_,{optional:!0})??[],m=Je(kM,{optional:!0})??{},v=Je(rA),x=Je(iA,{optional:!0}),S=Je(MV,{optional:!0}),T=Je(vV,{optional:!0}),N=new Fo(null,o,r,i,a,h,cI(f));return S&&(N.urlHandlingStrategy=S),T&&(N.routeReuseStrategy=T),N.titleStrategy=x??v,function PV(o,r){o.errorHandler&&(r.errorHandler=o.errorHandler),o.malformedUriErrorHandler&&(r.malformedUriErrorHandler=o.malformedUriErrorHandler),o.onSameUrlNavigation&&(r.onSameUrlNavigation=o.onSameUrlNavigation),o.paramsInheritanceStrategy&&(r.paramsInheritanceStrategy=o.paramsInheritanceStrategy),o.relativeLinkResolution&&(r.relativeLinkResolution=o.relativeLinkResolution),o.urlUpdateStrategy&&(r.urlUpdateStrategy=o.urlUpdateStrategy),o.canceledNavigationResolution&&(r.canceledNavigationResolution=o.canceledNavigationResolution)}(m,N),N}let Fo=(()=>{class o{constructor(i,a,h,f,m,v,x){this.rootComponentType=i,this.urlSerializer=a,this.rootContexts=h,this.location=f,this.config=x,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new bs,this.errorHandler=DV,this.malformedUriErrorHandler=_V,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>ne(void 0),this.urlHandlingStrategy=new SV,this.routeReuseStrategy=new xV,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=m.get($_),this.configLoader.onLoadEndListener=F=>this.triggerEvent(new uj(F)),this.configLoader.onLoadStartListener=F=>this.triggerEvent(new lj(F)),this.ngModule=m.get(_c),this.console=m.get(dL);const N=m.get(Ni);this.isNgZoneEnabled=N instanceof Ni&&Ni.isInAngularZone(),this.resetConfig(x),this.currentUrlTree=function kR(){return new Lg(new We([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=kI(this.currentUrlTree,this.rootComponentType),this.transitions=new gu({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(i){const a=this.events;return i.pipe(kc(h=>0!==h.id),Re(h=>({...h,extractedUrl:this.urlHandlingStrategy.extract(h.rawUrl)})),gh(h=>{let f=!1,m=!1;return ne(h).pipe(ss(v=>{this.currentNavigation={id:v.id,initialUrl:v.rawUrl,extractedUrl:v.extractedUrl,trigger:v.source,extras:v.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),gh(v=>{const x=this.browserUrlTree.toString(),S=!this.navigated||v.extractedUrl.toString()!==x||x!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||S)&&this.urlHandlingStrategy.shouldProcessUrl(v.rawUrl))return aA(v.source)&&(this.browserUrlTree=v.extractedUrl),ne(v).pipe(gh(N=>{const F=this.transitions.getValue();return a.next(new I_(N.id,this.serializeUrl(N.extractedUrl),N.source,N.restoredState)),F!==this.transitions.getValue()?El:Promise.resolve(N)}),function iV(o,r,i,a){return gh(h=>function eV(o,r,i,a,h){return new nV(o,r,i,a,h).apply()}(o,r,i,h.extractedUrl,a).pipe(Re(f=>({...h,urlAfterRedirects:f}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),ss(N=>{this.currentNavigation={...this.currentNavigation,finalUrl:N.urlAfterRedirects},h.urlAfterRedirects=N.urlAfterRedirects}),function fV(o,r,i,a,h,f){return or(m=>function sV(o,r,i,a,h,f,m="emptyOnly",v="legacy"){return new aV(o,r,i,a,h,m,v,f).recognize().pipe(gh(x=>null===x?function oV(o){return new $i(r=>r.error(o))}(new rV):ne(x)))}(o,r,i,m.urlAfterRedirects,a.serialize(m.urlAfterRedirects),a,h,f).pipe(Re(v=>({...m,targetSnapshot:v}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),ss(N=>{if(h.targetSnapshot=N.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!N.extras.skipLocationChange){const j=this.urlHandlingStrategy.merge(N.urlAfterRedirects,N.rawUrl);this.setBrowserUrl(j,N)}this.browserUrlTree=N.urlAfterRedirects}const F=new ij(N.id,this.serializeUrl(N.extractedUrl),this.serializeUrl(N.urlAfterRedirects),N.targetSnapshot);a.next(F)}));if(S&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:F,extractedUrl:j,source:B,restoredState:W,extras:it}=v,rt=new I_(F,this.serializeUrl(j),B,W);a.next(rt);const ft=kI(j,this.rootComponentType).snapshot;return ne(h={...v,targetSnapshot:ft,urlAfterRedirects:j,extras:{...it,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=v.rawUrl,v.resolve(null),El}),ss(v=>{const x=new rj(v.id,this.serializeUrl(v.extractedUrl),this.serializeUrl(v.urlAfterRedirects),v.targetSnapshot);this.triggerEvent(x)}),Re(v=>h={...v,guards:Pj(v.targetSnapshot,v.currentSnapshot,this.rootContexts)}),function Vj(o,r){return or(i=>{const{targetSnapshot:a,currentSnapshot:h,guards:{canActivateChecks:f,canDeactivateChecks:m}}=i;return 0===m.length&&0===f.length?ne({...i,guardsResult:!0}):function Bj(o,r,i,a){return Vt(o).pipe(or(h=>function Wj(o,r,i,a,h){const f=r&&r.routeConfig?r.routeConfig.canDeactivate:null;return f&&0!==f.length?ne(f.map(v=>{const x=cx(r)??h,S=fv(v,x);return bd(function Fj(o){return o&&px(o.canDeactivate)}(S)?S.canDeactivate(o,r,i,a):x.runInContext(()=>S(o,r,i,a))).pipe(Id())})).pipe(dv()):ne(!0)}(h.component,h.route,i,r,a)),Id(h=>!0!==h,!0))}(m,a,h,o).pipe(or(v=>v&&function kj(o){return"boolean"==typeof o}(v)?function Uj(o,r,i,a){return Vt(r).pipe(Ad(h=>w_(function zj(o,r){return null!==o&&r&&r(new hj(o)),ne(!0)}(h.route.parent,a),function Hj(o,r){return null!==o&&r&&r(new fj(o)),ne(!0)}(h.route,a),function $j(o,r,i){const a=r[r.length-1],f=r.slice(0,r.length-1).reverse().map(m=>function Nj(o){const r=o.routeConfig?o.routeConfig.canActivateChild:null;return r&&0!==r.length?{node:o,guards:r}:null}(m)).filter(m=>null!==m).map(m=>oI(()=>ne(m.guards.map(x=>{const S=cx(m.node)??i,T=fv(x,S);return bd(function Lj(o){return o&&px(o.canActivateChild)}(T)?T.canActivateChild(a,o):S.runInContext(()=>T(a,o))).pipe(Id())})).pipe(dv())));return ne(f).pipe(dv())}(o,h.path,i),function Gj(o,r,i){const a=r.routeConfig?r.routeConfig.canActivate:null;if(!a||0===a.length)return ne(!0);const h=a.map(f=>oI(()=>{const m=cx(r)??i,v=fv(f,m);return bd(function Oj(o){return o&&px(o.canActivate)}(v)?v.canActivate(r,o):m.runInContext(()=>v(r,o))).pipe(Id())}));return ne(h).pipe(dv())}(o,h.route,i))),Id(h=>!0!==h,!0))}(a,f,o,r):ne(v)),Re(v=>({...i,guardsResult:v})))})}(this.ngModule.injector,v=>this.triggerEvent(v)),ss(v=>{if(h.guardsResult=v.guardsResult,Rg(v.guardsResult))throw FI(0,v.guardsResult);const x=new oj(v.id,this.serializeUrl(v.extractedUrl),this.serializeUrl(v.urlAfterRedirects),v.targetSnapshot,!!v.guardsResult);this.triggerEvent(x)}),kc(v=>!!v.guardsResult||(this.restoreHistory(v),this.cancelNavigationTransition(v,"",3),!1)),z_(v=>{if(v.guards.canActivateChecks.length)return ne(v).pipe(ss(x=>{const S=new sj(x.id,this.serializeUrl(x.extractedUrl),this.serializeUrl(x.urlAfterRedirects),x.targetSnapshot);this.triggerEvent(S)}),gh(x=>{let S=!1;return ne(x).pipe(function dV(o,r){return or(i=>{const{targetSnapshot:a,guards:{canActivateChecks:h}}=i;if(!h.length)return ne(i);let f=0;return Vt(h).pipe(Ad(m=>function pV(o,r,i,a){const h=o.routeConfig,f=o._resolve;return void 0!==h?.title&&!nA(h)&&(f[ix]=h.title),function gV(o,r,i,a){const h=function mV(o){return[...Object.keys(o),...Object.getOwnPropertySymbols(o)]}(o);if(0===h.length)return ne({});const f={};return Vt(h).pipe(or(m=>function yV(o,r,i,a){const h=cx(r)??a,f=fv(o,h);return bd(f.resolve?f.resolve(r,i):h.runInContext(()=>f(r,i)))}(o[m],r,i,a).pipe(Id(),ss(v=>{f[m]=v}))),C_(1),function PR(o){return Re(()=>o)}(f),kd(m=>B_(m)?El:ex(m)))}(f,o,r,a).pipe(Re(m=>(o._resolvedData=m,o.data=bI(o,i).resolve,h&&nA(h)&&(o.data[ix]=h.title),null)))}(m.route,a,o,r)),ss(()=>f++),C_(1),or(m=>f===h.length?ne(i):El))})}(this.paramsInheritanceStrategy,this.ngModule.injector),ss({next:()=>S=!0,complete:()=>{S||(this.restoreHistory(x),this.cancelNavigationTransition(x,"",2))}}))}),ss(x=>{const S=new aj(x.id,this.serializeUrl(x.extractedUrl),this.serializeUrl(x.urlAfterRedirects),x.targetSnapshot);this.triggerEvent(S)}))}),z_(v=>{const x=S=>{const T=[];S.routeConfig?.loadComponent&&!S.routeConfig._loadedComponent&&T.push(this.configLoader.loadComponent(S.routeConfig).pipe(ss(N=>{S.component=N}),Re(()=>{})));for(const N of S.children)T.push(...x(N));return T};return iI(x(v.targetSnapshot.root)).pipe(gM(),nx(1))}),z_(()=>this.afterPreactivation()),Re(v=>{const x=function yj(o,r,i){const a=ux(o,r._root,i?i._root:void 0);return new AI(a,r)}(this.routeReuseStrategy,v.targetSnapshot,v.currentRouterState);return h={...v,targetRouterState:x}}),ss(v=>{this.currentUrlTree=v.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(v.urlAfterRedirects,v.rawUrl),this.routerState=v.targetRouterState,"deferred"===this.urlUpdateStrategy&&(v.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,v),this.browserUrlTree=v.urlAfterRedirects)}),((o,r,i)=>Re(a=>(new Ej(r,a.targetRouterState,a.currentRouterState,i).activate(o),a)))(this.rootContexts,this.routeReuseStrategy,v=>this.triggerEvent(v)),ss({next(){f=!0},complete(){f=!0}}),M_(()=>{f||m||this.cancelNavigationTransition(h,"",1),this.currentNavigation?.id===h.id&&(this.currentNavigation=null)}),kd(v=>{if(m=!0,VI(v)){jI(v)||(this.navigated=!0,this.restoreHistory(h,!0));const x=new MM(h.id,this.serializeUrl(h.extractedUrl),v.message,v.cancellationCode);if(a.next(x),jI(v)){const S=this.urlHandlingStrategy.merge(v.url,this.rawUrlTree),T={skipLocationChange:h.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||aA(h.source)};this.scheduleNavigation(S,"imperative",null,T,{resolve:h.resolve,reject:h.reject,promise:h.promise})}else h.resolve(!1)}else{this.restoreHistory(h,!0);const x=new PI(h.id,this.serializeUrl(h.extractedUrl),v,h.targetSnapshot??void 0);a.next(x);try{h.resolve(this.errorHandler(v))}catch(S){h.reject(S)}}return El}))}))}resetRootComponentType(i){this.rootComponentType=i,this.routerState.root.component=this.rootComponentType}setTransition(i){this.transitions.next({...this.transitions.value,...i})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(i=>{const a="popstate"===i.type?"popstate":"hashchange";"popstate"===a&&setTimeout(()=>{const h={replaceUrl:!0},f=i.state?.navigationId?i.state:null;if(f){const v={...f};delete v.navigationId,delete v.\u0275routerPageId,0!==Object.keys(v).length&&(h.state=v)}const m=this.parseUrl(i.url);this.scheduleNavigation(m,a,f,h)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(i){this.events.next(i)}resetConfig(i){this.config=i.map(V_),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(i,a={}){const{relativeTo:h,queryParams:f,fragment:m,queryParamsHandling:v,preserveFragment:x}=a,S=h||this.routerState.root,T=x?this.currentUrlTree.fragment:m;let N=null;switch(v){case"merge":N={...this.currentUrlTree.queryParams,...f};break;case"preserve":N=this.currentUrlTree.queryParams;break;default:N=f||null}return null!==N&&(N=this.removeEmptyProps(N)),ZR(S,this.currentUrlTree,i,N,T??null)}navigateByUrl(i,a={skipLocationChange:!1}){const h=Rg(i)?i:this.parseUrl(i),f=this.urlHandlingStrategy.merge(h,this.rawUrlTree);return this.scheduleNavigation(f,"imperative",null,a)}navigate(i,a={skipLocationChange:!1}){return function NV(o){for(let r=0;r<o.length;r++){if(null==o[r])throw new dt(4008,false)}}(i),this.navigateByUrl(this.createUrlTree(i,a),a)}serializeUrl(i){return this.urlSerializer.serialize(i)}parseUrl(i){let a;try{a=this.urlSerializer.parse(i)}catch(h){a=this.malformedUriErrorHandler(h,this.urlSerializer,i)}return a}isActive(i,a){let h;if(h=!0===a?{...TV}:!1===a?{...EV}:a,Rg(i))return pI(this.currentUrlTree,i,h);const f=this.parseUrl(i);return pI(this.currentUrlTree,f,h)}removeEmptyProps(i){return Object.keys(i).reduce((a,h)=>{const f=i[h];return null!=f&&(a[h]=f),a},{})}processNavigations(){this.navigations.subscribe(i=>{this.navigated=!0,this.lastSuccessfulId=i.id,this.currentPageId=i.targetPageId,this.events.next(new jg(i.id,this.serializeUrl(i.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),i.resolve(!0)},i=>{this.console.warn(`Unhandled Navigation Error: ${i}`)})}scheduleNavigation(i,a,h,f,m){if(this.disposed)return Promise.resolve(!1);let v,x,S;m?(v=m.resolve,x=m.reject,S=m.promise):S=new Promise((F,j)=>{v=F,x=j});const T=++this.navigationId;let N;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(h=this.location.getState()),N=h&&h.\u0275routerPageId?h.\u0275routerPageId:f.replaceUrl||f.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):N=0,this.setTransition({id:T,targetPageId:N,source:a,restoredState:h,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:i,extras:f,resolve:v,reject:x,promise:S,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),S.catch(F=>Promise.reject(F))}setBrowserUrl(i,a){const h=this.urlSerializer.serialize(i),f={...a.extras.state,...this.generateNgRouterState(a.id,a.targetPageId)};this.location.isCurrentPathEqualTo(h)||a.extras.replaceUrl?this.location.replaceState(h,"",f):this.location.go(h,"",f)}restoreHistory(i,a=!1){if("computed"===this.canceledNavigationResolution){const h=this.currentPageId-i.targetPageId;"popstate"!==i.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===h?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===h&&(this.resetState(i),this.browserUrlTree=i.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(h)}else"replace"===this.canceledNavigationResolution&&(a&&this.resetState(i),this.resetUrlToCurrentUrlTree())}resetState(i){this.routerState=i.currentRouterState,this.currentUrlTree=i.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,i.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(i,a,h){const f=new MM(i.id,this.serializeUrl(i.extractedUrl),a,h);this.triggerEvent(f),i.resolve(!1)}generateNgRouterState(i,a){return"computed"===this.canceledNavigationResolution?{navigationId:i,\u0275routerPageId:a}:{navigationId:i}}}return o.\u0275fac=function(i){qh()},o.\u0275prov=A({token:o,factory:function(){return sA()},providedIn:"root"}),o})();function aA(o){return"imperative"!==o}class lA{}let kV=(()=>{class o{constructor(i,a,h,f,m){this.router=i,this.injector=h,this.preloadingStrategy=f,this.loader=m}setUpPreloading(){this.subscription=this.router.events.pipe(kc(i=>i instanceof jg),Ad(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(i,a){const h=[];for(const f of a){f.providers&&!f._injector&&(f._injector=_d(f.providers,i,`Route: ${f.path}`));const m=f._injector??i,v=f._loadedInjector??m;f.loadChildren&&!f._loadedRoutes&&void 0===f.canLoad||f.loadComponent&&!f._loadedComponent?h.push(this.preloadConfig(m,f)):(f.children||f._loadedRoutes)&&h.push(this.processRoutes(v,f.children??f._loadedRoutes))}return Vt(h).pipe(vu())}preloadConfig(i,a){return this.preloadingStrategy.preload(a,()=>{let h;h=a.loadChildren&&void 0===a.canLoad?this.loader.loadChildren(i,a):ne(null);const f=h.pipe(or(m=>null===m?ne(void 0):(a._loadedRoutes=m.routes,a._loadedInjector=m.injector,this.processRoutes(m.injector??i,m.routes))));return a.loadComponent&&!a._loadedComponent?Vt([f,this.loader.loadComponent(a)]).pipe(vu()):f})}}return o.\u0275fac=function(i){return new(i||o)(kt(Fo),kt(FD),kt(va),kt(lA),kt($_))},o.\u0275prov=A({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const Y_=new Yt("");let uA=(()=>{class o{constructor(i,a,h={}){this.router=i,this.viewportScroller=a,this.options=h,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},h.scrollPositionRestoration=h.scrollPositionRestoration||"disabled",h.anchorScrolling=h.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(i=>{i instanceof I_?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=i.navigationTrigger,this.restoredId=i.restoredState?i.restoredState.navigationId:0):i instanceof jg&&(this.lastId=i.id,this.scheduleScrollEvent(i,this.router.parseUrl(i.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(i=>{i instanceof NI&&(i.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(i.position):i.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(i.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(i,a){this.router.triggerEvent(new NI(i,"popstate"===this.lastSource?this.store[this.restoredId]:null,a))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return o.\u0275fac=function(i){qh()},o.\u0275prov=A({token:o,factory:o.\u0275fac}),o})();function pv(o,r){return{\u0275kind:o,\u0275providers:r}}function X_(o){return[{provide:G_,multi:!0,useValue:o}]}function cA(){const o=Je(fr);return r=>{const i=o.get(Ww);if(r!==i.components[0])return;const a=o.get(Fo),h=o.get(fA);1===o.get(J_)&&a.initialNavigation(),o.get(dA,null,Zt.Optional)?.setUpPreloading(),o.get(Y_,null,Zt.Optional)?.init(),a.resetRootComponentType(i.componentTypes[0]),h.next(),h.complete()}}const fA=new Yt("",{factory:()=>new bs}),J_=new Yt("",{providedIn:"root",factory:()=>1});const dA=new Yt("");function FV(o){return pv(0,[{provide:dA,useExisting:kV},{provide:lA,useExisting:o}])}const pA=new Yt("ROUTER_FORROOT_GUARD"),RV=[ZD,{provide:vI,useClass:D_},{provide:Fo,useFactory:sA},hx,{provide:Vg,useFactory:function hA(o){return o.routerState.root},deps:[Fo]},$_];function jV(){return new UP("Router",Fo)}let gA=(()=>{class o{constructor(i){}static forRoot(i,a){return{ngModule:o,providers:[RV,[],X_(i),{provide:pA,useFactory:HV,deps:[[Fo,new gf,new mf]]},{provide:kM,useValue:a||{}},a?.useHash?{provide:Og,useClass:eF}:{provide:Og,useClass:fN},{provide:Y_,useFactory:()=>{const o=Je(Fo),r=Je(v2),i=Je(kM);return i.scrollOffset&&r.setOffset(i.scrollOffset),new uA(o,r,i)}},a?.preloadingStrategy?FV(a.preloadingStrategy).\u0275providers:[],{provide:UP,multi:!0,useFactory:jV},a?.initialNavigation?zV(a):[],[{provide:mA,useFactory:cA},{provide:bP,multi:!0,useExisting:mA}]]}}static forChild(i){return{ngModule:o,providers:[X_(i)]}}}return o.\u0275fac=function(i){return new(i||o)(kt(pA,8))},o.\u0275mod=ci({type:o}),o.\u0275inj=Xn({imports:[R_]}),o})();function HV(o){return"guarded"}function zV(o){return["disabled"===o.initialNavigation?pv(3,[{provide:zC,multi:!0,useFactory:()=>{const r=Je(Fo);return()=>{r.setUpLocationChangeListener()}}},{provide:J_,useValue:2}]).\u0275providers:[],"enabledBlocking"===o.initialNavigation?pv(2,[{provide:J_,useValue:0},{provide:zC,multi:!0,deps:[fr],useFactory:r=>{const i=r.get(qL,Promise.resolve());let a=!1;return()=>i.then(()=>new Promise(f=>{const m=r.get(Fo),v=r.get(fA);(function h(f){r.get(Fo).events.pipe(kc(v=>v instanceof jg||v instanceof MM||v instanceof PI),Re(v=>v instanceof jg||v instanceof MM&&(0===v.code||1===v.code)&&null),kc(v=>null!==v),nx(1)).subscribe(()=>{f()})})(()=>{f(!0),a=!0}),m.afterPreactivation=()=>(f(!0),a||v.closed?ne(void 0):v),m.initialNavigation()}))}}]).\u0275providers:[]]}const mA=new Yt(""),$V=[];let WV=(()=>{class o{}return o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=ci({type:o}),o.\u0275inj=Xn({imports:[gA.forRoot($V),gA]}),o})();var rr=Cv(813);class yA{constructor(r,i){this.alive=!0,this.children=0,this.key=r,this.name=i,this.age=0,this.fertile=!1}}const vA=["*"];let as=(()=>{class o{}return o.STARTS_WITH="startsWith",o.CONTAINS="contains",o.NOT_CONTAINS="notContains",o.ENDS_WITH="endsWith",o.EQUALS="equals",o.NOT_EQUALS="notEquals",o.IN="in",o.LESS_THAN="lt",o.LESS_THAN_OR_EQUAL_TO="lte",o.GREATER_THAN="gt",o.GREATER_THAN_OR_EQUAL_TO="gte",o.BETWEEN="between",o.IS="is",o.IS_NOT="isNot",o.BEFORE="before",o.AFTER="after",o.DATE_IS="dateIs",o.DATE_IS_NOT="dateIsNot",o.DATE_BEFORE="dateBefore",o.DATE_AFTER="dateAfter",o})(),wA=(()=>{class o{constructor(){this.ripple=!1,this.filterMatchModeOptions={text:[as.STARTS_WITH,as.CONTAINS,as.NOT_CONTAINS,as.ENDS_WITH,as.EQUALS,as.NOT_EQUALS],numeric:[as.EQUALS,as.NOT_EQUALS,as.LESS_THAN,as.LESS_THAN_OR_EQUAL_TO,as.GREATER_THAN,as.GREATER_THAN_OR_EQUAL_TO],date:[as.DATE_IS,as.DATE_IS_NOT,as.DATE_BEFORE,as.DATE_AFTER]},this.translation={startsWith:"Starts with",contains:"Contains",notContains:"Not contains",endsWith:"Ends with",equals:"Equals",notEquals:"Not equals",noFilter:"No Filter",lt:"Less than",lte:"Less than or equal to",gt:"Greater than",gte:"Greater than or equal to",is:"Is",isNot:"Is not",before:"Before",after:"After",dateIs:"Date is",dateIsNot:"Date is not",dateBefore:"Date is before",dateAfter:"Date is after",clear:"Clear",apply:"Apply",matchAll:"Match All",matchAny:"Match Any",addRule:"Add Rule",removeRule:"Remove Rule",accept:"Yes",reject:"No",choose:"Choose",upload:"Upload",cancel:"Cancel",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dateFormat:"mm/dd/yy",firstDayOfWeek:0,today:"Today",weekHeader:"Wk",weak:"Weak",medium:"Medium",strong:"Strong",passwordPrompt:"Enter a password",emptyMessage:"No results found",emptyFilterMessage:"No results found"},this.zIndex={modal:1100,overlay:1e3,menu:1e3,tooltip:1100},this.translationSource=new bs,this.translationObserver=this.translationSource.asObservable()}getTranslation(i){return this.translation[i]}setTranslation(i){this.translation={...this.translation,...i},this.translationSource.next(this.translation)}}return o.\u0275fac=function(i){return new(i||o)},o.\u0275prov=A({token:o,factory:o.\u0275fac,providedIn:"root"}),o})(),Z_=(()=>{class o{constructor(){this.messageSource=new bs,this.clearSource=new bs,this.messageObserver=this.messageSource.asObservable(),this.clearObserver=this.clearSource.asObservable()}add(i){i&&this.messageSource.next(i)}addAll(i){i&&i.length&&this.messageSource.next(i)}clear(i){this.clearSource.next(i||null)}}return o.\u0275fac=function(i){return new(i||o)},o.\u0275prov=A({token:o,factory:o.\u0275fac}),o})(),KV=(()=>{class o{}return o.\u0275fac=function(i){return new(i||o)},o.\u0275cmp=Lr({type:o,selectors:[["p-header"]],ngContentSelectors:vA,decls:1,vars:0,template:function(i,a){1&i&&(gg(),Ao(0))},encapsulation:2}),o})(),YV=(()=>{class o{}return o.\u0275fac=function(i){return new(i||o)},o.\u0275cmp=Lr({type:o,selectors:[["p-footer"]],ngContentSelectors:vA,decls:1,vars:0,template:function(i,a){1&i&&(gg(),Ao(0))},encapsulation:2}),o})(),Q_=(()=>{class o{constructor(i){this.template=i}getType(){return this.name}}return o.\u0275fac=function(i){return new(i||o)(ct(dh))},o.\u0275dir=Xt({type:o,selectors:[["","pTemplate",""]],inputs:{type:"type",name:["pTemplate","name"]}}),o})(),xA=(()=>{class o{}return o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=ci({type:o}),o.\u0275inj=Xn({imports:[Ac]}),o})();class CA{}class MA{}class Lc{constructor(r){this.normalizedNames=new Map,this.lazyUpdate=null,r?this.lazyInit="string"==typeof r?()=>{this.headers=new Map,r.split("\n").forEach(i=>{const a=i.indexOf(":");if(a>0){const h=i.slice(0,a),f=h.toLowerCase(),m=i.slice(a+1).trim();this.maybeSetNormalizedName(h,f),this.headers.has(f)?this.headers.get(f).push(m):this.headers.set(f,[m])}})}:()=>{this.headers=new Map,Object.keys(r).forEach(i=>{let a=r[i];const h=i.toLowerCase();"string"==typeof a&&(a=[a]),a.length>0&&(this.headers.set(h,a),this.maybeSetNormalizedName(i,h))})}:this.headers=new Map}has(r){return this.init(),this.headers.has(r.toLowerCase())}get(r){this.init();const i=this.headers.get(r.toLowerCase());return i&&i.length>0?i[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(r){return this.init(),this.headers.get(r.toLowerCase())||null}append(r,i){return this.clone({name:r,value:i,op:"a"})}set(r,i){return this.clone({name:r,value:i,op:"s"})}delete(r,i){return this.clone({name:r,value:i,op:"d"})}maybeSetNormalizedName(r,i){this.normalizedNames.has(i)||this.normalizedNames.set(i,r)}init(){this.lazyInit&&(this.lazyInit instanceof Lc?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(r=>this.applyUpdate(r)),this.lazyUpdate=null))}copyFrom(r){r.init(),Array.from(r.headers.keys()).forEach(i=>{this.headers.set(i,r.headers.get(i)),this.normalizedNames.set(i,r.normalizedNames.get(i))})}clone(r){const i=new Lc;return i.lazyInit=this.lazyInit&&this.lazyInit instanceof Lc?this.lazyInit:this,i.lazyUpdate=(this.lazyUpdate||[]).concat([r]),i}applyUpdate(r){const i=r.name.toLowerCase();switch(r.op){case"a":case"s":let a=r.value;if("string"==typeof a&&(a=[a]),0===a.length)return;this.maybeSetNormalizedName(r.name,i);const h=("a"===r.op?this.headers.get(i):void 0)||[];h.push(...a),this.headers.set(i,h);break;case"d":const f=r.value;if(f){let m=this.headers.get(i);if(!m)return;m=m.filter(v=>-1===f.indexOf(v)),0===m.length?(this.headers.delete(i),this.normalizedNames.delete(i)):this.headers.set(i,m)}else this.headers.delete(i),this.normalizedNames.delete(i)}}forEach(r){this.init(),Array.from(this.normalizedNames.keys()).forEach(i=>r(this.normalizedNames.get(i),this.headers.get(i)))}}class XV{encodeKey(r){return SA(r)}encodeValue(r){return SA(r)}decodeKey(r){return decodeURIComponent(r)}decodeValue(r){return decodeURIComponent(r)}}const ZV=/%(\d[a-f0-9])/gi,QV={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function SA(o){return encodeURIComponent(o).replace(ZV,(r,i)=>QV[i]??r)}function FM(o){return`${o}`}class Od{constructor(r={}){if(this.updates=null,this.cloneFrom=null,this.encoder=r.encoder||new XV,r.fromString){if(r.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function JV(o,r){const i=new Map;return o.length>0&&o.replace(/^\?/,"").split("&").forEach(h=>{const f=h.indexOf("="),[m,v]=-1==f?[r.decodeKey(h),""]:[r.decodeKey(h.slice(0,f)),r.decodeValue(h.slice(f+1))],x=i.get(m)||[];x.push(v),i.set(m,x)}),i}(r.fromString,this.encoder)}else r.fromObject?(this.map=new Map,Object.keys(r.fromObject).forEach(i=>{const a=r.fromObject[i],h=Array.isArray(a)?a.map(FM):[FM(a)];this.map.set(i,h)})):this.map=null}has(r){return this.init(),this.map.has(r)}get(r){this.init();const i=this.map.get(r);return i?i[0]:null}getAll(r){return this.init(),this.map.get(r)||null}keys(){return this.init(),Array.from(this.map.keys())}append(r,i){return this.clone({param:r,value:i,op:"a"})}appendAll(r){const i=[];return Object.keys(r).forEach(a=>{const h=r[a];Array.isArray(h)?h.forEach(f=>{i.push({param:a,value:f,op:"a"})}):i.push({param:a,value:h,op:"a"})}),this.clone(i)}set(r,i){return this.clone({param:r,value:i,op:"s"})}delete(r,i){return this.clone({param:r,value:i,op:"d"})}toString(){return this.init(),this.keys().map(r=>{const i=this.encoder.encodeKey(r);return this.map.get(r).map(a=>i+"="+this.encoder.encodeValue(a)).join("&")}).filter(r=>""!==r).join("&")}clone(r){const i=new Od({encoder:this.encoder});return i.cloneFrom=this.cloneFrom||this,i.updates=(this.updates||[]).concat(r),i}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(r=>this.map.set(r,this.cloneFrom.map.get(r))),this.updates.forEach(r=>{switch(r.op){case"a":case"s":const i=("a"===r.op?this.map.get(r.param):void 0)||[];i.push(FM(r.value)),this.map.set(r.param,i);break;case"d":if(void 0===r.value){this.map.delete(r.param);break}{let a=this.map.get(r.param)||[];const h=a.indexOf(FM(r.value));-1!==h&&a.splice(h,1),a.length>0?this.map.set(r.param,a):this.map.delete(r.param)}}}),this.cloneFrom=this.updates=null)}}class qV{constructor(){this.map=new Map}set(r,i){return this.map.set(r,i),this}get(r){return this.map.has(r)||this.map.set(r,r.defaultValue()),this.map.get(r)}delete(r){return this.map.delete(r),this}has(r){return this.map.has(r)}keys(){return this.map.keys()}}function DA(o){return typeof ArrayBuffer<"u"&&o instanceof ArrayBuffer}function _A(o){return typeof Blob<"u"&&o instanceof Blob}function TA(o){return typeof FormData<"u"&&o instanceof FormData}class mx{constructor(r,i,a,h){let f;if(this.url=i,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=r.toUpperCase(),function tB(o){switch(o){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||h?(this.body=void 0!==a?a:null,f=h):f=a,f&&(this.reportProgress=!!f.reportProgress,this.withCredentials=!!f.withCredentials,f.responseType&&(this.responseType=f.responseType),f.headers&&(this.headers=f.headers),f.context&&(this.context=f.context),f.params&&(this.params=f.params)),this.headers||(this.headers=new Lc),this.context||(this.context=new qV),this.params){const m=this.params.toString();if(0===m.length)this.urlWithParams=i;else{const v=i.indexOf("?");this.urlWithParams=i+(-1===v?"?":v<i.length-1?"&":"")+m}}else this.params=new Od,this.urlWithParams=i}serializeBody(){return null===this.body?null:DA(this.body)||_A(this.body)||TA(this.body)||function eB(o){return typeof URLSearchParams<"u"&&o instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Od?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||TA(this.body)?null:_A(this.body)?this.body.type||null:DA(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Od?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(r={}){const i=r.method||this.method,a=r.url||this.url,h=r.responseType||this.responseType,f=void 0!==r.body?r.body:this.body,m=void 0!==r.withCredentials?r.withCredentials:this.withCredentials,v=void 0!==r.reportProgress?r.reportProgress:this.reportProgress;let x=r.headers||this.headers,S=r.params||this.params;const T=r.context??this.context;return void 0!==r.setHeaders&&(x=Object.keys(r.setHeaders).reduce((N,F)=>N.set(F,r.setHeaders[F]),x)),r.setParams&&(S=Object.keys(r.setParams).reduce((N,F)=>N.set(F,r.setParams[F]),S)),new mx(i,a,f,{params:S,headers:x,context:T,reportProgress:v,responseType:h,withCredentials:m})}}var br=(()=>((br=br||{})[br.Sent=0]="Sent",br[br.UploadProgress=1]="UploadProgress",br[br.ResponseHeader=2]="ResponseHeader",br[br.DownloadProgress=3]="DownloadProgress",br[br.Response=4]="Response",br[br.User=5]="User",br))();class q_{constructor(r,i=200,a="OK"){this.headers=r.headers||new Lc,this.status=void 0!==r.status?r.status:i,this.statusText=r.statusText||a,this.url=r.url||null,this.ok=this.status>=200&&this.status<300}}class tT extends q_{constructor(r={}){super(r),this.type=br.ResponseHeader}clone(r={}){return new tT({headers:r.headers||this.headers,status:void 0!==r.status?r.status:this.status,statusText:r.statusText||this.statusText,url:r.url||this.url||void 0})}}class RM extends q_{constructor(r={}){super(r),this.type=br.Response,this.body=void 0!==r.body?r.body:null}clone(r={}){return new RM({body:void 0!==r.body?r.body:this.body,headers:r.headers||this.headers,status:void 0!==r.status?r.status:this.status,statusText:r.statusText||this.statusText,url:r.url||this.url||void 0})}}class EA extends q_{constructor(r){super(r,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${r.url||"(unknown url)"}`:`Http failure response for ${r.url||"(unknown url)"}: ${r.status} ${r.statusText}`,this.error=r.error||null}}function eT(o,r){return{body:r,headers:o.headers,context:o.context,observe:o.observe,params:o.params,reportProgress:o.reportProgress,responseType:o.responseType,withCredentials:o.withCredentials}}let PA=(()=>{class o{constructor(i){this.handler=i}request(i,a,h={}){let f;if(i instanceof mx)f=i;else{let x,S;x=h.headers instanceof Lc?h.headers:new Lc(h.headers),h.params&&(S=h.params instanceof Od?h.params:new Od({fromObject:h.params})),f=new mx(i,a,void 0!==h.body?h.body:null,{headers:x,context:h.context,params:S,reportProgress:h.reportProgress,responseType:h.responseType||"json",withCredentials:h.withCredentials})}const m=ne(f).pipe(Ad(x=>this.handler.handle(x)));if(i instanceof mx||"events"===h.observe)return m;const v=m.pipe(kc(x=>x instanceof RM));switch(h.observe||"body"){case"body":switch(f.responseType){case"arraybuffer":return v.pipe(Re(x=>{if(null!==x.body&&!(x.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return x.body}));case"blob":return v.pipe(Re(x=>{if(null!==x.body&&!(x.body instanceof Blob))throw new Error("Response is not a Blob.");return x.body}));case"text":return v.pipe(Re(x=>{if(null!==x.body&&"string"!=typeof x.body)throw new Error("Response is not a string.");return x.body}));default:return v.pipe(Re(x=>x.body))}case"response":return v;default:throw new Error(`Unreachable: unhandled observe type ${h.observe}}`)}}delete(i,a={}){return this.request("DELETE",i,a)}get(i,a={}){return this.request("GET",i,a)}head(i,a={}){return this.request("HEAD",i,a)}jsonp(i,a){return this.request("JSONP",i,{params:(new Od).append(a,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(i,a={}){return this.request("OPTIONS",i,a)}patch(i,a,h={}){return this.request("PATCH",i,eT(h,a))}post(i,a,h={}){return this.request("POST",i,eT(h,a))}put(i,a,h={}){return this.request("PUT",i,eT(h,a))}}return o.\u0275fac=function(i){return new(i||o)(kt(CA))},o.\u0275prov=A({token:o,factory:o.\u0275fac}),o})();class NA{constructor(r,i){this.next=r,this.interceptor=i}handle(r){return this.interceptor.intercept(r,this.next)}}const IA=new Yt("HTTP_INTERCEPTORS");let nB=(()=>{class o{intercept(i,a){return a.handle(i)}}return o.\u0275fac=function(i){return new(i||o)},o.\u0275prov=A({token:o,factory:o.\u0275fac}),o})();const iB=/^\)\]\}',?\n/;let AA=(()=>{class o{constructor(i){this.xhrFactory=i}handle(i){if("JSONP"===i.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new $i(a=>{const h=this.xhrFactory.build();if(h.open(i.method,i.urlWithParams),i.withCredentials&&(h.withCredentials=!0),i.headers.forEach((j,B)=>h.setRequestHeader(j,B.join(","))),i.headers.has("Accept")||h.setRequestHeader("Accept","application/json, text/plain, */*"),!i.headers.has("Content-Type")){const j=i.detectContentTypeHeader();null!==j&&h.setRequestHeader("Content-Type",j)}if(i.responseType){const j=i.responseType.toLowerCase();h.responseType="json"!==j?j:"text"}const f=i.serializeBody();let m=null;const v=()=>{if(null!==m)return m;const j=h.statusText||"OK",B=new Lc(h.getAllResponseHeaders()),W=function rB(o){return"responseURL"in o&&o.responseURL?o.responseURL:/^X-Request-URL:/m.test(o.getAllResponseHeaders())?o.getResponseHeader("X-Request-URL"):null}(h)||i.url;return m=new tT({headers:B,status:h.status,statusText:j,url:W}),m},x=()=>{let{headers:j,status:B,statusText:W,url:it}=v(),rt=null;204!==B&&(rt=typeof h.response>"u"?h.responseText:h.response),0===B&&(B=rt?200:0);let ft=B>=200&&B<300;if("json"===i.responseType&&"string"==typeof rt){const at=rt;rt=rt.replace(iB,"");try{rt=""!==rt?JSON.parse(rt):null}catch(Tt){rt=at,ft&&(ft=!1,rt={error:Tt,text:rt})}}ft?(a.next(new RM({body:rt,headers:j,status:B,statusText:W,url:it||void 0})),a.complete()):a.error(new EA({error:rt,headers:j,status:B,statusText:W,url:it||void 0}))},S=j=>{const{url:B}=v(),W=new EA({error:j,status:h.status||0,statusText:h.statusText||"Unknown Error",url:B||void 0});a.error(W)};let T=!1;const N=j=>{T||(a.next(v()),T=!0);let B={type:br.DownloadProgress,loaded:j.loaded};j.lengthComputable&&(B.total=j.total),"text"===i.responseType&&!!h.responseText&&(B.partialText=h.responseText),a.next(B)},F=j=>{let B={type:br.UploadProgress,loaded:j.loaded};j.lengthComputable&&(B.total=j.total),a.next(B)};return h.addEventListener("load",x),h.addEventListener("error",S),h.addEventListener("timeout",S),h.addEventListener("abort",S),i.reportProgress&&(h.addEventListener("progress",N),null!==f&&h.upload&&h.upload.addEventListener("progress",F)),h.send(f),a.next({type:br.Sent}),()=>{h.removeEventListener("error",S),h.removeEventListener("abort",S),h.removeEventListener("load",x),h.removeEventListener("timeout",S),i.reportProgress&&(h.removeEventListener("progress",N),null!==f&&h.upload&&h.upload.removeEventListener("progress",F)),h.readyState!==h.DONE&&h.abort()}})}}return o.\u0275fac=function(i){return new(i||o)(kt(AN))},o.\u0275prov=A({token:o,factory:o.\u0275fac}),o})();const nT=new Yt("XSRF_COOKIE_NAME"),iT=new Yt("XSRF_HEADER_NAME");class kA{}let oB=(()=>{class o{constructor(i,a,h){this.doc=i,this.platform=a,this.cookieName=h,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const i=this.doc.cookie||"";return i!==this.lastCookieString&&(this.parseCount++,this.lastToken=MN(i,this.cookieName),this.lastCookieString=i),this.lastToken}}return o.\u0275fac=function(i){return new(i||o)(kt(Oo),kt(LD),kt(nT))},o.\u0275prov=A({token:o,factory:o.\u0275fac}),o})(),rT=(()=>{class o{constructor(i,a){this.tokenService=i,this.headerName=a}intercept(i,a){const h=i.url.toLowerCase();if("GET"===i.method||"HEAD"===i.method||h.startsWith("http://")||h.startsWith("https://"))return a.handle(i);const f=this.tokenService.getToken();return null!==f&&!i.headers.has(this.headerName)&&(i=i.clone({headers:i.headers.set(this.headerName,f)})),a.handle(i)}}return o.\u0275fac=function(i){return new(i||o)(kt(kA),kt(iT))},o.\u0275prov=A({token:o,factory:o.\u0275fac}),o})(),sB=(()=>{class o{constructor(i,a){this.backend=i,this.injector=a,this.chain=null}handle(i){if(null===this.chain){const a=this.injector.get(IA,[]);this.chain=a.reduceRight((h,f)=>new NA(h,f),this.backend)}return this.chain.handle(i)}}return o.\u0275fac=function(i){return new(i||o)(kt(MA),kt(fr))},o.\u0275prov=A({token:o,factory:o.\u0275fac}),o})(),aB=(()=>{class o{static disable(){return{ngModule:o,providers:[{provide:rT,useClass:nB}]}}static withOptions(i={}){return{ngModule:o,providers:[i.cookieName?{provide:nT,useValue:i.cookieName}:[],i.headerName?{provide:iT,useValue:i.headerName}:[]]}}}return o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=ci({type:o}),o.\u0275inj=Xn({providers:[rT,{provide:IA,useExisting:rT,multi:!0},{provide:kA,useClass:oB},{provide:nT,useValue:"XSRF-TOKEN"},{provide:iT,useValue:"X-XSRF-TOKEN"}]}),o})(),lB=(()=>{class o{}return o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=ci({type:o}),o.\u0275inj=Xn({providers:[PA,{provide:CA,useClass:sB},AA,{provide:MA,useExisting:AA}],imports:[aB.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]}),o})(),bA=(()=>{class o{constructor(){this.messages=[]}add(i){this.messages.push(i)}clear(){this.messages=[]}}return o.\u0275fac=function(i){return new(i||o)},o.\u0275prov=A({token:o,factory:o.\u0275fac,providedIn:"root"}),o})(),mn=(()=>{class o{static addClass(i,a){i.classList?i.classList.add(a):i.className+=" "+a}static addMultipleClasses(i,a){if(i.classList){let h=a.trim().split(" ");for(let f=0;f<h.length;f++)i.classList.add(h[f])}else{let h=a.split(" ");for(let f=0;f<h.length;f++)i.className+=" "+h[f]}}static removeClass(i,a){i.classList?i.classList.remove(a):i.className=i.className.replace(new RegExp("(^|\\b)"+a.split(" ").join("|")+"(\\b|$)","gi")," ")}static hasClass(i,a){return i.classList?i.classList.contains(a):new RegExp("(^| )"+a+"( |$)","gi").test(i.className)}static siblings(i){return Array.prototype.filter.call(i.parentNode.children,function(a){return a!==i})}static find(i,a){return Array.from(i.querySelectorAll(a))}static findSingle(i,a){return i?i.querySelector(a):null}static index(i){let a=i.parentNode.childNodes,h=0;for(var f=0;f<a.length;f++){if(a[f]==i)return h;1==a[f].nodeType&&h++}return-1}static indexWithinGroup(i,a){let h=i.parentNode?i.parentNode.childNodes:[],f=0;for(var m=0;m<h.length;m++){if(h[m]==i)return f;h[m].attributes&&h[m].attributes[a]&&1==h[m].nodeType&&f++}return-1}static relativePosition(i,a){let h=i.offsetParent?{width:i.offsetWidth,height:i.offsetHeight}:this.getHiddenElementDimensions(i);const f=a.offsetHeight,m=a.getBoundingClientRect(),v=this.getViewport();let x,S;m.top+f+h.height>v.height?(x=-1*h.height,i.style.transformOrigin="bottom",m.top+x<0&&(x=-1*m.top)):(x=f,i.style.transformOrigin="top"),S=h.width>v.width?-1*m.left:m.left+h.width>v.width?-1*(m.left+h.width-v.width):0,i.style.top=x+"px",i.style.left=S+"px"}static absolutePosition(i,a){let j,B,h=i.offsetParent?{width:i.offsetWidth,height:i.offsetHeight}:this.getHiddenElementDimensions(i),f=h.height,m=h.width,v=a.offsetHeight,x=a.offsetWidth,S=a.getBoundingClientRect(),T=this.getWindowScrollTop(),N=this.getWindowScrollLeft(),F=this.getViewport();S.top+v+f>F.height?(j=S.top+T-f,i.style.transformOrigin="bottom",j<0&&(j=T)):(j=v+S.top+T,i.style.transformOrigin="top"),B=S.left+m>F.width?Math.max(0,S.left+N+x-m):S.left+N,i.style.top=j+"px",i.style.left=B+"px"}static getParents(i,a=[]){return null===i.parentNode?a:this.getParents(i.parentNode,a.concat([i.parentNode]))}static getScrollableParents(i){let a=[];if(i){let h=this.getParents(i);const f=/(auto|scroll)/,m=v=>{let x=window.getComputedStyle(v,null);return f.test(x.getPropertyValue("overflow"))||f.test(x.getPropertyValue("overflowX"))||f.test(x.getPropertyValue("overflowY"))};for(let v of h){let x=1===v.nodeType&&v.dataset.scrollselectors;if(x){let S=x.split(",");for(let T of S){let N=this.findSingle(v,T);N&&m(N)&&a.push(N)}}9!==v.nodeType&&m(v)&&a.push(v)}}return a}static getHiddenElementOuterHeight(i){i.style.visibility="hidden",i.style.display="block";let a=i.offsetHeight;return i.style.display="none",i.style.visibility="visible",a}static getHiddenElementOuterWidth(i){i.style.visibility="hidden",i.style.display="block";let a=i.offsetWidth;return i.style.display="none",i.style.visibility="visible",a}static getHiddenElementDimensions(i){let a={};return i.style.visibility="hidden",i.style.display="block",a.width=i.offsetWidth,a.height=i.offsetHeight,i.style.display="none",i.style.visibility="visible",a}static scrollInView(i,a){let h=getComputedStyle(i).getPropertyValue("borderTopWidth"),f=h?parseFloat(h):0,m=getComputedStyle(i).getPropertyValue("paddingTop"),v=m?parseFloat(m):0,x=i.getBoundingClientRect(),T=a.getBoundingClientRect().top+document.body.scrollTop-(x.top+document.body.scrollTop)-f-v,N=i.scrollTop,F=i.clientHeight,j=this.getOuterHeight(a);T<0?i.scrollTop=N+T:T+j>F&&(i.scrollTop=N+T-F+j)}static fadeIn(i,a){i.style.opacity=0;let h=+new Date,f=0,m=function(){f=+i.style.opacity.replace(",",".")+((new Date).getTime()-h)/a,i.style.opacity=f,h=+new Date,+f<1&&(window.requestAnimationFrame&&requestAnimationFrame(m)||setTimeout(m,16))};m()}static fadeOut(i,a){var h=1,v=50/a;let x=setInterval(()=>{(h-=v)<=0&&(h=0,clearInterval(x)),i.style.opacity=h},50)}static getWindowScrollTop(){let i=document.documentElement;return(window.pageYOffset||i.scrollTop)-(i.clientTop||0)}static getWindowScrollLeft(){let i=document.documentElement;return(window.pageXOffset||i.scrollLeft)-(i.clientLeft||0)}static matches(i,a){var h=Element.prototype;return(h.matches||h.webkitMatchesSelector||h.mozMatchesSelector||h.msMatchesSelector||function(m){return-1!==[].indexOf.call(document.querySelectorAll(m),this)}).call(i,a)}static getOuterWidth(i,a){let h=i.offsetWidth;if(a){let f=getComputedStyle(i);h+=parseFloat(f.marginLeft)+parseFloat(f.marginRight)}return h}static getHorizontalPadding(i){let a=getComputedStyle(i);return parseFloat(a.paddingLeft)+parseFloat(a.paddingRight)}static getHorizontalMargin(i){let a=getComputedStyle(i);return parseFloat(a.marginLeft)+parseFloat(a.marginRight)}static innerWidth(i){let a=i.offsetWidth,h=getComputedStyle(i);return a+=parseFloat(h.paddingLeft)+parseFloat(h.paddingRight),a}static width(i){let a=i.offsetWidth,h=getComputedStyle(i);return a-=parseFloat(h.paddingLeft)+parseFloat(h.paddingRight),a}static getInnerHeight(i){let a=i.offsetHeight,h=getComputedStyle(i);return a+=parseFloat(h.paddingTop)+parseFloat(h.paddingBottom),a}static getOuterHeight(i,a){let h=i.offsetHeight;if(a){let f=getComputedStyle(i);h+=parseFloat(f.marginTop)+parseFloat(f.marginBottom)}return h}static getHeight(i){let a=i.offsetHeight,h=getComputedStyle(i);return a-=parseFloat(h.paddingTop)+parseFloat(h.paddingBottom)+parseFloat(h.borderTopWidth)+parseFloat(h.borderBottomWidth),a}static getWidth(i){let a=i.offsetWidth,h=getComputedStyle(i);return a-=parseFloat(h.paddingLeft)+parseFloat(h.paddingRight)+parseFloat(h.borderLeftWidth)+parseFloat(h.borderRightWidth),a}static getViewport(){let i=window,a=document,h=a.documentElement,f=a.getElementsByTagName("body")[0];return{width:i.innerWidth||h.clientWidth||f.clientWidth,height:i.innerHeight||h.clientHeight||f.clientHeight}}static getOffset(i){var a=i.getBoundingClientRect();return{top:a.top+(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0),left:a.left+(window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0)}}static replaceElementWith(i,a){let h=i.parentNode;if(!h)throw"Can't replace element";return h.replaceChild(a,i)}static getUserAgent(){return navigator.userAgent}static isIE(){var i=window.navigator.userAgent;return i.indexOf("MSIE ")>0||(i.indexOf("Trident/")>0?(i.indexOf("rv:"),!0):i.indexOf("Edge/")>0)}static isIOS(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}static isAndroid(){return/(android)/i.test(navigator.userAgent)}static isTouchDevice(){return"ontouchstart"in window||navigator.maxTouchPoints>0}static appendChild(i,a){if(this.isElement(a))a.appendChild(i);else{if(!a.el||!a.el.nativeElement)throw"Cannot append "+a+" to "+i;a.el.nativeElement.appendChild(i)}}static removeChild(i,a){if(this.isElement(a))a.removeChild(i);else{if(!a.el||!a.el.nativeElement)throw"Cannot remove "+i+" from "+a;a.el.nativeElement.removeChild(i)}}static removeElement(i){"remove"in Element.prototype?i.remove():i.parentNode.removeChild(i)}static isElement(i){return"object"==typeof HTMLElement?i instanceof HTMLElement:i&&"object"==typeof i&&null!==i&&1===i.nodeType&&"string"==typeof i.nodeName}static calculateScrollbarWidth(i){if(i){let a=getComputedStyle(i);return i.offsetWidth-i.clientWidth-parseFloat(a.borderLeftWidth)-parseFloat(a.borderRightWidth)}{if(null!==this.calculatedScrollbarWidth)return this.calculatedScrollbarWidth;let a=document.createElement("div");a.className="p-scrollbar-measure",document.body.appendChild(a);let h=a.offsetWidth-a.clientWidth;return document.body.removeChild(a),this.calculatedScrollbarWidth=h,h}}static calculateScrollbarHeight(){if(null!==this.calculatedScrollbarHeight)return this.calculatedScrollbarHeight;let i=document.createElement("div");i.className="p-scrollbar-measure",document.body.appendChild(i);let a=i.offsetHeight-i.clientHeight;return document.body.removeChild(i),this.calculatedScrollbarWidth=a,a}static invokeElementMethod(i,a,h){i[a].apply(i,h)}static clearSelection(){if(window.getSelection)window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().rangeCount>0&&window.getSelection().getRangeAt(0).getClientRects().length>0&&window.getSelection().removeAllRanges();else if(document.selection&&document.selection.empty)try{document.selection.empty()}catch{}}static getBrowser(){if(!this.browser){let i=this.resolveUserAgent();this.browser={},i.browser&&(this.browser[i.browser]=!0,this.browser.version=i.version),this.browser.chrome?this.browser.webkit=!0:this.browser.webkit&&(this.browser.safari=!0)}return this.browser}static resolveUserAgent(){let i=navigator.userAgent.toLowerCase(),a=/(chrome)[ \/]([\w.]+)/.exec(i)||/(webkit)[ \/]([\w.]+)/.exec(i)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(i)||/(msie) ([\w.]+)/.exec(i)||i.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(i)||[];return{browser:a[1]||"",version:a[2]||"0"}}static isInteger(i){return Number.isInteger?Number.isInteger(i):"number"==typeof i&&isFinite(i)&&Math.floor(i)===i}static isHidden(i){return null===i.offsetParent}static getFocusableElements(i){let a=o.find(i,'button:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                [href][clientHeight][clientWidth]:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                input:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]), select:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                textarea:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]), [tabIndex]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                [contenteditable]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]):not(.p-disabled)'),h=[];for(let f of a)"none"!=getComputedStyle(f).display&&"hidden"!=getComputedStyle(f).visibility&&h.push(f);return h}static generateZIndex(){return this.zindex=this.zindex||999,++this.zindex}}return o.zindex=1e3,o.calculatedScrollbarWidth=null,o.calculatedScrollbarHeight=null,o})(),uB=(()=>{class o{constructor(i,a,h){this.el=i,this.zone=a,this.config=h}ngAfterViewInit(){this.config&&this.config.ripple&&this.zone.runOutsideAngular(()=>{this.create(),this.mouseDownListener=this.onMouseDown.bind(this),this.el.nativeElement.addEventListener("mousedown",this.mouseDownListener)})}onMouseDown(i){let a=this.getInk();if(!a||"none"===getComputedStyle(a,null).display)return;if(mn.removeClass(a,"p-ink-active"),!mn.getHeight(a)&&!mn.getWidth(a)){let v=Math.max(mn.getOuterWidth(this.el.nativeElement),mn.getOuterHeight(this.el.nativeElement));a.style.height=v+"px",a.style.width=v+"px"}let h=mn.getOffset(this.el.nativeElement),f=i.pageX-h.left+document.body.scrollTop-mn.getWidth(a)/2,m=i.pageY-h.top+document.body.scrollLeft-mn.getHeight(a)/2;a.style.top=m+"px",a.style.left=f+"px",mn.addClass(a,"p-ink-active"),this.timeout=setTimeout(()=>{let v=this.getInk();v&&mn.removeClass(v,"p-ink-active")},401)}getInk(){for(let i=0;i<this.el.nativeElement.children.length;i++)if(-1!==this.el.nativeElement.children[i].className.indexOf("p-ink"))return this.el.nativeElement.children[i];return null}resetInk(){let i=this.getInk();i&&mn.removeClass(i,"p-ink-active")}onAnimationEnd(i){this.timeout&&clearTimeout(this.timeout),mn.removeClass(i.currentTarget,"p-ink-active")}create(){let i=document.createElement("span");i.className="p-ink",this.el.nativeElement.appendChild(i),this.animationListener=this.onAnimationEnd.bind(this),i.addEventListener("animationend",this.animationListener)}remove(){let i=this.getInk();i&&(this.el.nativeElement.removeEventListener("mousedown",this.mouseDownListener),i.removeEventListener("animationend",this.animationListener),mn.removeElement(i))}ngOnDestroy(){this.config&&this.config.ripple&&this.remove()}}return o.\u0275fac=function(i){return new(i||o)(ct(Kn),ct(Ni),ct(wA,8))},o.\u0275dir=Xt({type:o,selectors:[["","pRipple",""]],hostAttrs:[1,"p-ripple","p-element"]}),o})(),OA=(()=>{class o{}return o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=ci({type:o}),o.\u0275inj=Xn({imports:[Ac]}),o})(),oT=(()=>{class o{constructor(i){this.el=i,this.iconPos="left",this.loadingIcon="pi pi-spinner pi-spin",this._loading=!1}ngAfterViewInit(){this._initialStyleClass=this.el.nativeElement.className,mn.addMultipleClasses(this.el.nativeElement,this.getStyleClass()),(this.icon||this.loading)&&this.createIconEl();let i=document.createElement("span");this.icon&&!this.label&&i.setAttribute("aria-hidden","true"),i.className="p-button-label",this.label?i.appendChild(document.createTextNode(this.label)):i.innerHTML="&nbsp;",this.el.nativeElement.appendChild(i),this.initialized=!0}getStyleClass(){let i="p-button p-component";return this.icon&&!this.label&&(i+=" p-button-icon-only"),this.loading&&(i+=" p-disabled p-button-loading",!this.icon&&this.label&&(i+=" p-button-loading-label-only")),i}setStyleClass(){let i=this.getStyleClass();this.el.nativeElement.className=i+" "+this._initialStyleClass}createIconEl(){let i=document.createElement("span");i.className="p-button-icon",i.setAttribute("aria-hidden","true");let a=this.label?"p-button-icon-"+this.iconPos:null;a&&mn.addClass(i,a);let h=this.getIconClass();h&&mn.addMultipleClasses(i,h);let f=mn.findSingle(this.el.nativeElement,".p-button-label");f?this.el.nativeElement.insertBefore(i,f):this.el.nativeElement.appendChild(i)}getIconClass(){return this.loading?"p-button-loading-icon "+this.loadingIcon:this._icon}setIconClass(){let i=mn.findSingle(this.el.nativeElement,".p-button-icon");i?i.className=this.iconPos?"p-button-icon p-button-icon-"+this.iconPos+" "+this.getIconClass():"p-button-icon "+this.getIconClass():this.createIconEl()}removeIconElement(){let i=mn.findSingle(this.el.nativeElement,".p-button-icon");this.el.nativeElement.removeChild(i)}get label(){return this._label}set label(i){this._label=i,this.initialized&&(mn.findSingle(this.el.nativeElement,".p-button-label").textContent=this._label||"&nbsp;",(this.loading||this.icon)&&this.setIconClass(),this.setStyleClass())}get icon(){return this._icon}set icon(i){this._icon=i,this.initialized&&(this.setIconClass(),this.setStyleClass())}get loading(){return this._loading}set loading(i){this._loading=i,this.initialized&&(this.loading||this.icon?this.setIconClass():this.removeIconElement(),this.setStyleClass())}ngOnDestroy(){this.initialized=!1}}return o.\u0275fac=function(i){return new(i||o)(ct(Kn))},o.\u0275dir=Xt({type:o,selectors:[["","pButton",""]],hostAttrs:[1,"p-element"],inputs:{iconPos:"iconPos",loadingIcon:"loadingIcon",label:"label",icon:"icon",loading:"loading"}}),o})(),LA=(()=>{class o{}return o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=ci({type:o}),o.\u0275inj=Xn({imports:[Ac,OA]}),o})();function cB(o,r){1&o&&Ur(0)}function fB(o,r){if(1&o&&(le(0,"div",8),Ao(1,1),li(2,cB,1,0,"ng-container",6),de()),2&o){const i=Ee();ee(2),ae("ngTemplateOutlet",i.headerTemplate)}}function dB(o,r){1&o&&Ur(0)}function pB(o,r){if(1&o&&(le(0,"div",9),tr(1),li(2,dB,1,0,"ng-container",6),de()),2&o){const i=Ee();ee(1),cl(" ",i.header," "),ee(1),ae("ngTemplateOutlet",i.titleTemplate)}}function gB(o,r){1&o&&Ur(0)}function mB(o,r){if(1&o&&(le(0,"div",10),tr(1),li(2,gB,1,0,"ng-container",6),de()),2&o){const i=Ee();ee(1),cl(" ",i.subheader," "),ee(1),ae("ngTemplateOutlet",i.subtitleTemplate)}}function yB(o,r){1&o&&Ur(0)}function vB(o,r){1&o&&Ur(0)}function wB(o,r){if(1&o&&(le(0,"div",11),Ao(1,2),li(2,vB,1,0,"ng-container",6),de()),2&o){const i=Ee();ee(2),ae("ngTemplateOutlet",i.footerTemplate)}}const xB=["*",[["p-header"]],[["p-footer"]]],CB=["*","p-header","p-footer"];let FA=(()=>{class o{constructor(i){this.el=i}ngAfterContentInit(){this.templates.forEach(i=>{switch(i.getType()){case"header":this.headerTemplate=i.template;break;case"title":this.titleTemplate=i.template;break;case"subtitle":this.subtitleTemplate=i.template;break;case"content":default:this.contentTemplate=i.template;break;case"footer":this.footerTemplate=i.template}})}getBlockableElement(){return this.el.nativeElement.children[0]}}return o.\u0275fac=function(i){return new(i||o)(ct(Kn))},o.\u0275cmp=Lr({type:o,selectors:[["p-card"]],contentQueries:function(i,a,h){if(1&i&&(Td(h,KV,5),Td(h,YV,5),Td(h,Q_,4)),2&i){let f;Wr(f=Kr())&&(a.headerFacet=f.first),Wr(f=Kr())&&(a.footerFacet=f.first),Wr(f=Kr())&&(a.templates=f)}},hostAttrs:[1,"p-element"],inputs:{header:"header",subheader:"subheader",style:"style",styleClass:"styleClass"},ngContentSelectors:CB,decls:9,vars:9,consts:[[3,"ngClass","ngStyle"],["class","p-card-header",4,"ngIf"],[1,"p-card-body"],["class","p-card-title",4,"ngIf"],["class","p-card-subtitle",4,"ngIf"],[1,"p-card-content"],[4,"ngTemplateOutlet"],["class","p-card-footer",4,"ngIf"],[1,"p-card-header"],[1,"p-card-title"],[1,"p-card-subtitle"],[1,"p-card-footer"]],template:function(i,a){1&i&&(gg(xB),le(0,"div",0),li(1,fB,3,1,"div",1),le(2,"div",2),li(3,pB,3,2,"div",3),li(4,mB,3,2,"div",4),le(5,"div",5),Ao(6),li(7,yB,1,0,"ng-container",6),de(),li(8,wB,3,1,"div",7),de()()),2&i&&(Vi(a.styleClass),ae("ngClass","p-card p-component")("ngStyle",a.style),ee(1),ae("ngIf",a.headerFacet||a.headerTemplate),ee(2),ae("ngIf",a.header||a.titleTemplate),ee(1),ae("ngIf",a.subheader||a.subtitleTemplate),ee(3),ae("ngTemplateOutlet",a.contentTemplate),ee(1),ae("ngIf",a.footerFacet||a.footerTemplate))},dependencies:[av,Jw,aM,Zw],styles:[".p-card-header img{width:100%}\n"],encapsulation:2,changeDetection:0}),o})(),MB=(()=>{class o{}return o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=ci({type:o}),o.\u0275inj=Xn({imports:[Ac,xA]}),o})();var RA=0,sT=function _B(){let o=[];const h=f=>f&&parseInt(f.style.zIndex,10)||0;return{get:h,set:(f,m,v)=>{m&&(m.style.zIndex=String(((f,m)=>{let v=o.length>0?o[o.length-1]:{key:f,value:m},x=v.value+(v.key===f?0:m)+1;return o.push({key:f,value:x}),x})(f,v)))},clear:f=>{f&&((f=>{o=o.filter(m=>m.value!==f)})(h(f)),f.style.zIndex="")},getCurrent:()=>o.length>0?o[o.length-1].value:0}}();class jA{}const Fc="*";function VA(o,r){return{type:7,name:o,definitions:r,options:{}}}function BA(o,r=null){return{type:4,styles:r,timings:o}}function UA(o,r=null){return{type:2,steps:o,options:r}}function yx(o){return{type:6,styles:o,offset:null}}function EB(o,r,i){return{type:0,name:o,styles:r,options:i}}function aT(o,r,i=null){return{type:1,expr:o,animation:r,options:i}}function PB(o=null){return{type:9,options:o}}function NB(o,r,i=null){return{type:11,selector:o,animation:r,options:i}}function HA(o){Promise.resolve().then(o)}class vx{constructor(r=0,i=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=r+i}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(r=>r()),this._onDoneFns=[])}onStart(r){this._originalOnStartFns.push(r),this._onStartFns.push(r)}onDone(r){this._originalOnDoneFns.push(r),this._onDoneFns.push(r)}onDestroy(r){this._onDestroyFns.push(r)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){HA(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(r=>r()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(r=>r()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(r){this._position=this.totalTime?r*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(r){const i="start"==r?this._onStartFns:this._onDoneFns;i.forEach(a=>a()),i.length=0}}class zA{constructor(r){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=r;let i=0,a=0,h=0;const f=this.players.length;0==f?HA(()=>this._onFinish()):this.players.forEach(m=>{m.onDone(()=>{++i==f&&this._onFinish()}),m.onDestroy(()=>{++a==f&&this._onDestroy()}),m.onStart(()=>{++h==f&&this._onStart()})}),this.totalTime=this.players.reduce((m,v)=>Math.max(m,v.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(r=>r()),this._onDoneFns=[])}init(){this.players.forEach(r=>r.init())}onStart(r){this._onStartFns.push(r)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(r=>r()),this._onStartFns=[])}onDone(r){this._onDoneFns.push(r)}onDestroy(r){this._onDestroyFns.push(r)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(r=>r.play())}pause(){this.players.forEach(r=>r.pause())}restart(){this.players.forEach(r=>r.restart())}finish(){this._onFinish(),this.players.forEach(r=>r.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(r=>r.destroy()),this._onDestroyFns.forEach(r=>r()),this._onDestroyFns=[])}reset(){this.players.forEach(r=>r.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(r){const i=r*this.totalTime;this.players.forEach(a=>{const h=a.totalTime?Math.min(1,i/a.totalTime):1;a.setPosition(h)})}getPosition(){const r=this.players.reduce((i,a)=>null===i||a.totalTime>i.totalTime?a:i,null);return null!=r?r.getPosition():0}beforeDestroy(){this.players.forEach(r=>{r.beforeDestroy&&r.beforeDestroy()})}triggerCallback(r){const i="start"==r?this._onStartFns:this._onDoneFns;i.forEach(a=>a()),i.length=0}}const GA=["container"],IB=function(o,r,i,a){return{"pi-info-circle":o,"pi-exclamation-triangle":r,"pi-times-circle":i,"pi-check":a}};function AB(o,r){if(1&o&&(lc(0),Ta(1,"span",6),le(2,"div",7)(3,"div",8),tr(4),de(),le(5,"div",9),tr(6),de()(),Qs()),2&o){const i=Ee();ee(1),Vi("p-toast-message-icon pi"+(i.message.icon?" "+i.message.icon:"")),ae("ngClass",CD(5,IB,"info"==i.message.severity,"warn"==i.message.severity,"error"==i.message.severity,"success"==i.message.severity)),ee(3),md(i.message.summary),ee(2),md(i.message.detail)}}function kB(o,r){1&o&&Ur(0)}function bB(o,r){if(1&o){const i=Jo();le(0,"button",10),Fe("click",function(h){return oe(i),qe(Ee().onCloseIconClick(h))})("keydown.enter",function(h){return oe(i),qe(Ee().onCloseIconClick(h))}),Ta(1,"span",11),de()}}const OB=function(o){return[o,"p-toast-message"]},LB=function(o,r,i,a){return{showTransformParams:o,hideTransformParams:r,showTransitionParams:i,hideTransitionParams:a}},FB=function(o){return{value:"visible",params:o}},RB=function(o){return{$implicit:o}};function jB(o,r){if(1&o){const i=Jo();le(0,"p-toastItem",3),Fe("onClose",function(h){return oe(i),qe(Ee().onMessageClose(h))})("@toastAnimation.start",function(h){return oe(i),qe(Ee().onAnimationStart(h))})("@toastAnimation.done",function(h){return oe(i),qe(Ee().onAnimationEnd(h))}),de()}if(2&o){const i=r.$implicit,a=r.index,h=Ee();ae("message",i)("index",a)("template",h.template)("@toastAnimation",void 0)("showTransformOptions",h.showTransformOptions)("hideTransformOptions",h.hideTransformOptions)("showTransitionOptions",h.showTransitionOptions)("hideTransitionOptions",h.hideTransitionOptions)}}let VB=(()=>{class o{constructor(i){this.zone=i,this.onClose=new gn}ngAfterViewInit(){this.initTimeout()}initTimeout(){this.message.sticky||this.zone.runOutsideAngular(()=>{this.timeout=setTimeout(()=>{this.onClose.emit({index:this.index,message:this.message})},this.message.life||3e3)})}clearTimeout(){this.timeout&&(clearTimeout(this.timeout),this.timeout=null)}onMouseEnter(){this.clearTimeout()}onMouseLeave(){this.initTimeout()}onCloseIconClick(i){this.clearTimeout(),this.onClose.emit({index:this.index,message:this.message}),i.preventDefault()}ngOnDestroy(){this.clearTimeout()}}return o.\u0275fac=function(i){return new(i||o)(ct(Ni))},o.\u0275cmp=Lr({type:o,selectors:[["p-toastItem"]],viewQuery:function(i,a){if(1&i&&xl(GA,5),2&i){let h;Wr(h=Kr())&&(a.containerViewChild=h.first)}},hostAttrs:[1,"p-element"],inputs:{message:"message",index:"index",template:"template",showTransformOptions:"showTransformOptions",hideTransformOptions:"hideTransformOptions",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions"},outputs:{onClose:"onClose"},decls:6,vars:21,consts:[[3,"ngClass","mouseenter","mouseleave"],["container",""],["role","alert","aria-live","assertive","aria-atomic","true",1,"p-toast-message-content",3,"ngClass"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["type","button","class","p-toast-icon-close p-link","pRipple","",3,"click","keydown.enter",4,"ngIf"],[3,"ngClass"],[1,"p-toast-message-text"],[1,"p-toast-summary"],[1,"p-toast-detail"],["type","button","pRipple","",1,"p-toast-icon-close","p-link",3,"click","keydown.enter"],[1,"p-toast-icon-close-icon","pi","pi-times"]],template:function(i,a){1&i&&(le(0,"div",0,1),Fe("mouseenter",function(){return a.onMouseEnter()})("mouseleave",function(){return a.onMouseLeave()}),le(2,"div",2),li(3,AB,7,10,"ng-container",3),li(4,kB,1,0,"ng-container",4),li(5,bB,2,0,"button",5),de()()),2&i&&(Vi(a.message.styleClass),ae("ngClass",VC(10,OB,"p-toast-message-"+a.message.severity))("@messageState",VC(17,FB,CD(12,LB,a.showTransformOptions,a.hideTransformOptions,a.showTransitionOptions,a.hideTransitionOptions))),Io("id",a.message.id),ee(2),ae("ngClass",a.message.contentStyleClass),ee(1),ae("ngIf",!a.template),ee(1),ae("ngTemplateOutlet",a.template)("ngTemplateOutletContext",VC(19,RB,a.message)),ee(1),ae("ngIf",!1!==a.message.closable))},dependencies:[av,Jw,aM,uB],encapsulation:2,data:{animation:[VA("messageState",[EB("visible",yx({transform:"translateY(0)",opacity:1})),aT("void => *",[yx({transform:"{{showTransformParams}}",opacity:0}),BA("{{showTransitionParams}}")]),aT("* => void",[BA("{{hideTransitionParams}}",yx({height:0,opacity:0,transform:"{{hideTransformParams}}"}))])])]},changeDetection:0}),o})(),BB=(()=>{class o{constructor(i,a,h){this.messageService=i,this.cd=a,this.config=h,this.autoZIndex=!0,this.baseZIndex=0,this.position="top-right",this.preventOpenDuplicates=!1,this.preventDuplicates=!1,this.showTransformOptions="translateY(100%)",this.hideTransformOptions="translateY(-100%)",this.showTransitionOptions="300ms ease-out",this.hideTransitionOptions="250ms ease-in",this.onClose=new gn,this.id=function DB(){return"pr_id_"+ ++RA}()}ngOnInit(){this.messageSubscription=this.messageService.messageObserver.subscribe(i=>{if(i)if(i instanceof Array){const a=i.filter(h=>this.canAdd(h));this.add(a)}else this.canAdd(i)&&this.add([i])}),this.clearSubscription=this.messageService.clearObserver.subscribe(i=>{i?this.key===i&&(this.messages=null):this.messages=null,this.cd.markForCheck()})}ngAfterViewInit(){this.breakpoints&&this.createStyle()}add(i){this.messages=this.messages?[...this.messages,...i]:[...i],this.preventDuplicates&&(this.messagesArchieve=this.messagesArchieve?[...this.messagesArchieve,...i]:[...i]),this.cd.markForCheck()}canAdd(i){let a=this.key===i.key;return a&&this.preventOpenDuplicates&&(a=!this.containsMessage(this.messages,i)),a&&this.preventDuplicates&&(a=!this.containsMessage(this.messagesArchieve,i)),a}containsMessage(i,a){return!!i&&null!=i.find(h=>h.summary===a.summary&&h.detail==a.detail&&h.severity===a.severity)}ngAfterContentInit(){this.templates.forEach(i=>{i.getType(),this.template=i.template})}onMessageClose(i){this.messages.splice(i.index,1),this.onClose.emit({message:i.message}),this.cd.detectChanges()}onAnimationStart(i){"void"===i.fromState&&(this.containerViewChild.nativeElement.setAttribute(this.id,""),this.autoZIndex&&""===this.containerViewChild.nativeElement.style.zIndex&&sT.set("modal",this.containerViewChild.nativeElement,this.baseZIndex||this.config.zIndex.modal))}onAnimationEnd(i){"void"===i.toState&&this.autoZIndex&&class SB{static equals(r,i,a){return a?this.resolveFieldData(r,a)===this.resolveFieldData(i,a):this.equalsByValue(r,i)}static equalsByValue(r,i){if(r===i)return!0;if(r&&i&&"object"==typeof r&&"object"==typeof i){var f,m,v,a=Array.isArray(r),h=Array.isArray(i);if(a&&h){if((m=r.length)!=i.length)return!1;for(f=m;0!=f--;)if(!this.equalsByValue(r[f],i[f]))return!1;return!0}if(a!=h)return!1;var x=r instanceof Date,S=i instanceof Date;if(x!=S)return!1;if(x&&S)return r.getTime()==i.getTime();var T=r instanceof RegExp,N=i instanceof RegExp;if(T!=N)return!1;if(T&&N)return r.toString()==i.toString();var F=Object.keys(r);if((m=F.length)!==Object.keys(i).length)return!1;for(f=m;0!=f--;)if(!Object.prototype.hasOwnProperty.call(i,F[f]))return!1;for(f=m;0!=f--;)if(!this.equalsByValue(r[v=F[f]],i[v]))return!1;return!0}return r!=r&&i!=i}static resolveFieldData(r,i){if(r&&i){if(this.isFunction(i))return i(r);if(-1==i.indexOf("."))return r[i];{let a=i.split("."),h=r;for(let f=0,m=a.length;f<m;++f){if(null==h)return null;h=h[a[f]]}return h}}return null}static isFunction(r){return!!(r&&r.constructor&&r.call&&r.apply)}static reorderArray(r,i,a){r&&i!==a&&(a>=r.length&&(a%=r.length,i%=r.length),r.splice(a,0,r.splice(i,1)[0]))}static insertIntoOrderedArray(r,i,a,h){if(a.length>0){let f=!1;for(let m=0;m<a.length;m++)if(this.findIndexInList(a[m],h)>i){a.splice(m,0,r),f=!0;break}f||a.push(r)}else a.push(r)}static findIndexInList(r,i){let a=-1;if(i)for(let h=0;h<i.length;h++)if(i[h]==r){a=h;break}return a}static contains(r,i){if(null!=r&&i&&i.length)for(let a of i)if(this.equals(r,a))return!0;return!1}static removeAccents(r){return r&&r.search(/[\xC0-\xFF]/g)>-1&&(r=r.replace(/[\xC0-\xC5]/g,"A").replace(/[\xC6]/g,"AE").replace(/[\xC7]/g,"C").replace(/[\xC8-\xCB]/g,"E").replace(/[\xCC-\xCF]/g,"I").replace(/[\xD0]/g,"D").replace(/[\xD1]/g,"N").replace(/[\xD2-\xD6\xD8]/g,"O").replace(/[\xD9-\xDC]/g,"U").replace(/[\xDD]/g,"Y").replace(/[\xDE]/g,"P").replace(/[\xE0-\xE5]/g,"a").replace(/[\xE6]/g,"ae").replace(/[\xE7]/g,"c").replace(/[\xE8-\xEB]/g,"e").replace(/[\xEC-\xEF]/g,"i").replace(/[\xF1]/g,"n").replace(/[\xF2-\xF6\xF8]/g,"o").replace(/[\xF9-\xFC]/g,"u").replace(/[\xFE]/g,"p").replace(/[\xFD\xFF]/g,"y")),r}static isEmpty(r){return null==r||""===r||Array.isArray(r)&&0===r.length||!(r instanceof Date)&&"object"==typeof r&&0===Object.keys(r).length}static isNotEmpty(r){return!this.isEmpty(r)}}.isEmpty(this.messages)&&sT.clear(this.containerViewChild.nativeElement)}createStyle(){if(!this.styleElement){this.styleElement=document.createElement("style"),this.styleElement.type="text/css",document.head.appendChild(this.styleElement);let i="";for(let a in this.breakpoints){let h="";for(let f in this.breakpoints[a])h+=f+":"+this.breakpoints[a][f]+" !important;";i+=`\n                    @media screen and (max-width: ${a}) {\n                        .p-toast[${this.id}] {\n                           ${h}\n                        }\n                    }\n                `}this.styleElement.innerHTML=i}}destroyStyle(){this.styleElement&&(document.head.removeChild(this.styleElement),this.styleElement=null)}ngOnDestroy(){this.messageSubscription&&this.messageSubscription.unsubscribe(),this.containerViewChild&&this.autoZIndex&&sT.clear(this.containerViewChild.nativeElement),this.clearSubscription&&this.clearSubscription.unsubscribe(),this.destroyStyle()}}return o.\u0275fac=function(i){return new(i||o)(ct(Z_),ct(Pd),ct(wA))},o.\u0275cmp=Lr({type:o,selectors:[["p-toast"]],contentQueries:function(i,a,h){if(1&i&&Td(h,Q_,4),2&i){let f;Wr(f=Kr())&&(a.templates=f)}},viewQuery:function(i,a){if(1&i&&xl(GA,5),2&i){let h;Wr(h=Kr())&&(a.containerViewChild=h.first)}},hostAttrs:[1,"p-element"],inputs:{key:"key",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",style:"style",styleClass:"styleClass",position:"position",preventOpenDuplicates:"preventOpenDuplicates",preventDuplicates:"preventDuplicates",showTransformOptions:"showTransformOptions",hideTransformOptions:"hideTransformOptions",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",breakpoints:"breakpoints"},outputs:{onClose:"onClose"},decls:3,vars:5,consts:[[3,"ngClass","ngStyle"],["container",""],[3,"message","index","template","showTransformOptions","hideTransformOptions","showTransitionOptions","hideTransitionOptions","onClose",4,"ngFor","ngForOf"],[3,"message","index","template","showTransformOptions","hideTransformOptions","showTransitionOptions","hideTransitionOptions","onClose"]],template:function(i,a){1&i&&(le(0,"div",0,1),li(2,jB,1,8,"p-toastItem",2),de()),2&i&&(Vi(a.styleClass),ae("ngClass","p-toast p-component p-toast-"+a.position)("ngStyle",a.style),ee(2),ae("ngForOf",a.messages))},dependencies:[av,sM,Zw,VB],styles:[".p-toast{position:fixed;width:25rem}.p-toast-message{overflow:hidden}.p-toast-message-content{display:flex;align-items:flex-start}.p-toast-message-text{flex:1 1 auto}.p-toast-top-right{top:20px;right:20px}.p-toast-top-left{top:20px;left:20px}.p-toast-bottom-left{bottom:20px;left:20px}.p-toast-bottom-right{bottom:20px;right:20px}.p-toast-top-center{top:20px;left:50%;transform:translate(-50%)}.p-toast-bottom-center{bottom:20px;left:50%;transform:translate(-50%)}.p-toast-center{left:50%;top:50%;min-width:20vw;transform:translate(-50%,-50%)}.p-toast-icon-close{display:flex;align-items:center;justify-content:center;overflow:hidden;position:relative}.p-toast-icon-close.p-link{cursor:pointer}\n"],encapsulation:2,data:{animation:[VA("toastAnimation",[aT(":enter, :leave",[NB("@*",PB())])])]},changeDetection:0}),o})(),UB=(()=>{class o{}return o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=ci({type:o}),o.\u0275inj=Xn({imports:[Ac,OA,xA]}),o})();const HB=["container"],zB=["content"],GB=["xBar"],$B=["yBar"];function WB(o,r){1&o&&Ur(0)}const KB=["*"];let YB=(()=>{class o{constructor(i,a,h){this.el=i,this.zone=a,this.cd=h,this.timeoutFrame=f=>setTimeout(f,0)}ngAfterViewInit(){this.zone.runOutsideAngular(()=>{this.moveBar(),this.moveBar=this.moveBar.bind(this),this.onXBarMouseDown=this.onXBarMouseDown.bind(this),this.onYBarMouseDown=this.onYBarMouseDown.bind(this),this.onDocumentMouseMove=this.onDocumentMouseMove.bind(this),this.onDocumentMouseUp=this.onDocumentMouseUp.bind(this),window.addEventListener("resize",this.moveBar),this.contentViewChild.nativeElement.addEventListener("scroll",this.moveBar),this.contentViewChild.nativeElement.addEventListener("mouseenter",this.moveBar),this.xBarViewChild.nativeElement.addEventListener("mousedown",this.onXBarMouseDown),this.yBarViewChild.nativeElement.addEventListener("mousedown",this.onYBarMouseDown),this.calculateContainerHeight(),this.initialized=!0})}ngAfterContentInit(){this.templates.forEach(i=>{i.getType(),this.contentTemplate=i.template})}calculateContainerHeight(){let i=this.containerViewChild.nativeElement,a=this.contentViewChild.nativeElement,h=this.xBarViewChild.nativeElement,f=getComputedStyle(i),m=getComputedStyle(h),v=mn.getHeight(i)-parseInt(m.height,10);"none"!=f["max-height"]&&0==v&&(i.style.height=a.offsetHeight+parseInt(m.height,10)>parseInt(f["max-height"],10)?f["max-height"]:a.offsetHeight+parseFloat(f.paddingTop)+parseFloat(f.paddingBottom)+parseFloat(f.borderTopWidth)+parseFloat(f.borderBottomWidth)+"px")}moveBar(){let i=this.containerViewChild.nativeElement,a=this.contentViewChild.nativeElement,h=this.xBarViewChild.nativeElement,f=a.scrollWidth,m=a.clientWidth,v=-1*(i.clientHeight-h.clientHeight);this.scrollXRatio=m/f;let x=this.yBarViewChild.nativeElement,S=a.scrollHeight,T=a.clientHeight,N=-1*(i.clientWidth-x.clientWidth);this.scrollYRatio=T/S,this.requestAnimationFrame(()=>{if(this.scrollXRatio>=1)mn.addClass(h,"p-scrollpanel-hidden");else{mn.removeClass(h,"p-scrollpanel-hidden");const F=Math.max(100*this.scrollXRatio,10);h.style.cssText="width:"+F+"%; left:"+a.scrollLeft*(100-F)/(f-m)+"%;bottom:"+v+"px;"}if(this.scrollYRatio>=1)mn.addClass(x,"p-scrollpanel-hidden");else{mn.removeClass(x,"p-scrollpanel-hidden");const F=Math.max(100*this.scrollYRatio,10);x.style.cssText="height:"+F+"%; top: calc("+a.scrollTop*(100-F)/(S-T)+"% - "+h.clientHeight+"px);right:"+N+"px;"}}),this.cd.markForCheck()}onYBarMouseDown(i){this.isYBarClicked=!0,this.lastPageY=i.pageY,mn.addClass(this.yBarViewChild.nativeElement,"p-scrollpanel-grabbed"),mn.addClass(document.body,"p-scrollpanel-grabbed"),document.addEventListener("mousemove",this.onDocumentMouseMove),document.addEventListener("mouseup",this.onDocumentMouseUp),i.preventDefault()}onXBarMouseDown(i){this.isXBarClicked=!0,this.lastPageX=i.pageX,mn.addClass(this.xBarViewChild.nativeElement,"p-scrollpanel-grabbed"),mn.addClass(document.body,"p-scrollpanel-grabbed"),document.addEventListener("mousemove",this.onDocumentMouseMove),document.addEventListener("mouseup",this.onDocumentMouseUp),i.preventDefault()}onDocumentMouseMove(i){this.isXBarClicked?this.onMouseMoveForXBar(i):(this.isYBarClicked||this.onMouseMoveForXBar(i),this.onMouseMoveForYBar(i))}onMouseMoveForXBar(i){let a=i.pageX-this.lastPageX;this.lastPageX=i.pageX,this.requestAnimationFrame(()=>{this.contentViewChild.nativeElement.scrollLeft+=a/this.scrollXRatio})}onMouseMoveForYBar(i){let a=i.pageY-this.lastPageY;this.lastPageY=i.pageY,this.requestAnimationFrame(()=>{this.contentViewChild.nativeElement.scrollTop+=a/this.scrollYRatio})}scrollTop(i){let a=this.contentViewChild.nativeElement.scrollHeight-this.contentViewChild.nativeElement.clientHeight;this.contentViewChild.nativeElement.scrollTop=i=i>a?a:i>0?i:0}onDocumentMouseUp(i){mn.removeClass(this.yBarViewChild.nativeElement,"p-scrollpanel-grabbed"),mn.removeClass(this.xBarViewChild.nativeElement,"p-scrollpanel-grabbed"),mn.removeClass(document.body,"p-scrollpanel-grabbed"),document.removeEventListener("mousemove",this.onDocumentMouseMove),document.removeEventListener("mouseup",this.onDocumentMouseUp),this.isXBarClicked=!1,this.isYBarClicked=!1}requestAnimationFrame(i){(window.requestAnimationFrame||this.timeoutFrame)(i)}ngOnDestroy(){this.initialized&&(window.removeEventListener("resize",this.moveBar),this.contentViewChild.nativeElement.removeEventListener("scroll",this.moveBar),this.contentViewChild.nativeElement.removeEventListener("mouseenter",this.moveBar),this.xBarViewChild.nativeElement.removeEventListener("mousedown",this.onXBarMouseDown),this.yBarViewChild.nativeElement.removeEventListener("mousedown",this.onYBarMouseDown))}refresh(){this.moveBar()}}return o.\u0275fac=function(i){return new(i||o)(ct(Kn),ct(Ni),ct(Pd))},o.\u0275cmp=Lr({type:o,selectors:[["p-scrollPanel"]],contentQueries:function(i,a,h){if(1&i&&Td(h,Q_,4),2&i){let f;Wr(f=Kr())&&(a.templates=f)}},viewQuery:function(i,a){if(1&i&&(xl(HB,5),xl(zB,5),xl(GB,5),xl($B,5)),2&i){let h;Wr(h=Kr())&&(a.containerViewChild=h.first),Wr(h=Kr())&&(a.contentViewChild=h.first),Wr(h=Kr())&&(a.xBarViewChild=h.first),Wr(h=Kr())&&(a.yBarViewChild=h.first)}},hostAttrs:[1,"p-element"],inputs:{style:"style",styleClass:"styleClass"},ngContentSelectors:KB,decls:11,vars:5,consts:[[3,"ngClass","ngStyle"],["container",""],[1,"p-scrollpanel-wrapper"],[1,"p-scrollpanel-content"],["content",""],[4,"ngTemplateOutlet"],[1,"p-scrollpanel-bar","p-scrollpanel-bar-x"],["xBar",""],[1,"p-scrollpanel-bar","p-scrollpanel-bar-y"],["yBar",""]],template:function(i,a){1&i&&(gg(),le(0,"div",0,1)(2,"div",2)(3,"div",3,4),Ao(5),li(6,WB,1,0,"ng-container",5),de()(),Ta(7,"div",6,7)(9,"div",8,9),de()),2&i&&(Vi(a.styleClass),ae("ngClass","p-scrollpanel p-component")("ngStyle",a.style),ee(6),ae("ngTemplateOutlet",a.contentTemplate))},dependencies:[av,aM,Zw],styles:[".p-scrollpanel-wrapper{overflow:hidden;width:100%;height:100%;position:relative;z-index:1;float:left}.p-scrollpanel-content{height:calc(100% + 18px);width:calc(100% + 18px);padding:0 18px 18px 0;position:relative;overflow:auto;box-sizing:border-box}.p-scrollpanel-bar{position:relative;background:#c1c1c1;border-radius:3px;z-index:2;cursor:pointer;opacity:0;transition:opacity .25s linear}.p-scrollpanel-bar-y{width:9px;top:0}.p-scrollpanel-bar-x{height:9px;bottom:0}.p-scrollpanel-hidden{visibility:hidden}.p-scrollpanel:hover .p-scrollpanel-bar,.p-scrollpanel:active .p-scrollpanel-bar{opacity:1}.p-scrollpanel-grabbed{-webkit-user-select:none;user-select:none}\n"],encapsulation:2,changeDetection:0}),o})(),XB=(()=>{class o{}return o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=ci({type:o}),o.\u0275inj=Xn({imports:[Ac]}),o})();const JB=["myDiagram"],ZB=["myPalette"],QB=["myDiagramDiv"],Ld=rr.bx.make;let qB=(()=>{class o{constructor(){this.myDiagramComponent=null,this.myPaletteComponent=null,this.myDiagramDiv=null}ngAfterViewInit(){this.diagram=Ld(rr.S0,"myDiagramDiv",{layout:Ld(rr.FF,{isOngoing:!0,treeStyle:rr.FF.StyleLastParents,arrangement:rr.FF.ArrangementHorizontal,layerSpacing:35}),"undoManager.isEnabled":!0}),this.diagram.nodeTemplate=Ld(rr.NB,"Auto",new rr.KX("text","name"),new rr.KX("layerName","isSelected",function(i){return i?"Foreground":""}).ofObject(),Ld(rr.bn,"RoundedRectangle",{name:"SHAPE",fill:"green",stroke:"white"},new rr.KX("fill","color")),Ld(rr.s_,"Horizontal",Ld(rr.s_,"Table",{maxSize:new rr.$u(150,999),margin:new rr.Zt(6,10,0,3),defaultAlignment:rr.z6.Left},Ld(rr.jE,{column:2,width:4}),Ld(rr.al,{font:"bold 17pt arial",stroke:"white"},{row:0,column:0,columnSpan:5,font:"bold 17pt arial",editable:!1,isMultiline:!1,minSize:new rr.$u(10,16)},new rr.KX("text","name").makeTwoWay())))),this.diagram.model=this.model,this.resizeDiagram()}resizeDiagram(){this.diagram.div.style.width="2",this.diagram.div.style.width=(this.diagram.div.parentElement.clientWidth+2).toString()}}return o.\u0275fac=function(i){return new(i||o)},o.\u0275cmp=Lr({type:o,selectors:[["app-tree"]],viewQuery:function(i,a){if(1&i&&(xl(JB,7),xl(ZB,7),xl(QB,5)),2&i){let h;Wr(h=Kr())&&(a.myDiagramComponent=h.first),Wr(h=Kr())&&(a.myPaletteComponent=h.first),Wr(h=Kr())&&(a.myDiagramDiv=h.first)}},inputs:{model:"model"},decls:3,vars:0,consts:[[1,"diagram-container",3,"resize"],["id","myDiagramDiv"],["myDiagramDiv",""]],template:function(i,a){1&i&&(le(0,"div",0),Fe("resize",function(){return a.resizeDiagram()},0,Rp),Ta(1,"div",1,2),de())},styles:["#myDiagramDiv{width:900px;height:400px;border:1px solid black;background-color:#696969}.diagram-container{display:flex;justify-content:center}\n"],encapsulation:2}),o})();function tU(o,r){if(1&o&&(le(0,"div",1),tr(1),de()),2&o){const i=r.$implicit;ee(1),cl(" ",i," ")}}let eU=(()=>{class o{constructor(i){this.messageService=i}ngOnInit(){}}return o.\u0275fac=function(i){return new(i||o)(ct(bA))},o.\u0275cmp=Lr({type:o,selectors:[["app-messages"]],decls:2,vars:1,consts:[["class","messages",4,"ngFor","ngForOf"],[1,"messages"]],template:function(i,a){1&i&&(le(0,"div"),li(1,tU,2,1,"div",0),de()),2&i&&(ee(1),ae("ngForOf",a.messageService.messages))},dependencies:[sM],styles:["h2[_ngcontent-%COMP%]{color:#a80000;font-family:Arial,Helvetica,sans-serif;font-weight:lighter}.clear[_ngcontent-%COMP%]{color:#333;background-color:#eee;margin-bottom:12px;padding:1rem;border-radius:4px;font-size:1rem}.clear[_ngcontent-%COMP%]:hover{color:#fff;background-color:#42545c}.messages[_ngcontent-%COMP%]{font-family:Arial,Helvetica,sans-serif}"]}),o})(),$A=(()=>{class o{constructor(i,a){this._renderer=i,this._elementRef=a,this.onChange=h=>{},this.onTouched=()=>{}}setProperty(i,a){this._renderer.setProperty(this._elementRef.nativeElement,i,a)}registerOnTouched(i){this.onTouched=i}registerOnChange(i){this.onChange=i}setDisabledState(i){this.setProperty("disabled",i)}}return o.\u0275fac=function(i){return new(i||o)(ct(Ja),ct(Kn))},o.\u0275dir=Xt({type:o}),o})(),Bg=(()=>{class o extends $A{}return o.\u0275fac=function(){let r;return function(a){return(r||(r=function Fr(o){return Nl(()=>{const r=o.prototype.constructor,i=r[Ke]||Zv(r),a=Object.prototype;let h=Object.getPrototypeOf(o.prototype).constructor;for(;h&&h!==a;){const f=h[Ke]||Zv(h);if(f&&f!==i)return f;h=Object.getPrototypeOf(h)}return f=>new f})}(o)))(a||o)}}(),o.\u0275dir=Xt({type:o,features:[fn]}),o})();const mu=new Yt("NgValueAccessor"),rU={provide:mu,useExisting:Tn(()=>jM),multi:!0},sU=new Yt("CompositionEventMode");let jM=(()=>{class o extends $A{constructor(i,a,h){super(i,a),this._compositionMode=h,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function oU(){const o=ph()?ph().getUserAgent():"";return/android (\d+)/.test(o.toLowerCase())}())}writeValue(i){this.setProperty("value",i??"")}_handleInput(i){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(i)}_compositionStart(){this._composing=!0}_compositionEnd(i){this._composing=!1,this._compositionMode&&this.onChange(i)}}return o.\u0275fac=function(i){return new(i||o)(ct(Ja),ct(Kn),ct(sU,8))},o.\u0275dir=Xt({type:o,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,a){1&i&&Fe("input",function(f){return a._handleInput(f.target.value)})("blur",function(){return a.onTouched()})("compositionstart",function(){return a._compositionStart()})("compositionend",function(f){return a._compositionEnd(f.target.value)})},features:[Dn([rU]),fn]}),o})();const ls=new Yt("NgValidators"),Rd=new Yt("NgAsyncValidators");function nk(o){return null!=o}function ik(o){return uc(o)?Vt(o):o}function rk(o){let r={};return o.forEach(i=>{r=null!=i?{...r,...i}:r}),0===Object.keys(r).length?null:r}function ok(o,r){return r.map(i=>i(o))}function sk(o){return o.map(r=>function uU(o){return!o.validate}(r)?r:i=>r.validate(i))}function uT(o){return null!=o?function ak(o){if(!o)return null;const r=o.filter(nk);return 0==r.length?null:function(i){return rk(ok(i,r))}}(sk(o)):null}function hT(o){return null!=o?function lk(o){if(!o)return null;const r=o.filter(nk);return 0==r.length?null:function(i){return function nU(...o){const r=Yx(o),{args:i,keys:a}=tI(o),h=new $i(f=>{const{length:m}=i;if(!m)return void f.complete();const v=new Array(m);let x=m,S=m;for(let T=0;T<m;T++){let N=!1;aa(i[T]).subscribe(yr(f,F=>{N||(N=!0,S--),v[T]=F},()=>x--,void 0,()=>{(!x||!N)&&(S||f.next(a?nI(a,v):v),f.complete())}))}});return r?h.pipe(eI(r)):h}(ok(i,r).map(ik)).pipe(Re(rk))}}(sk(o)):null}function uk(o,r){return null===o?[r]:Array.isArray(o)?[...o,r]:[o,r]}function cT(o){return o?Array.isArray(o)?o:[o]:[]}function BM(o,r){return Array.isArray(o)?o.includes(r):o===r}function fk(o,r){const i=cT(r);return cT(o).forEach(h=>{BM(i,h)||i.push(h)}),i}function dk(o,r){return cT(r).filter(i=>!BM(o,i))}class pk{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(r){this._rawValidators=r||[],this._composedValidatorFn=uT(this._rawValidators)}_setAsyncValidators(r){this._rawAsyncValidators=r||[],this._composedAsyncValidatorFn=hT(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(r){this._onDestroyCallbacks.push(r)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(r=>r()),this._onDestroyCallbacks=[]}reset(r){this.control&&this.control.reset(r)}hasError(r,i){return!!this.control&&this.control.hasError(r,i)}getError(r,i){return this.control?this.control.getError(r,i):null}}class ks extends pk{get formDirective(){return null}get path(){return null}}class jd extends pk{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}let mk=(()=>{class o extends class gk{constructor(r){this._cd=r}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}{constructor(i){super(i)}}return o.\u0275fac=function(i){return new(i||o)(ct(jd,2))},o.\u0275dir=Xt({type:o,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,a){2&i&&fc("ng-untouched",a.isUntouched)("ng-touched",a.isTouched)("ng-pristine",a.isPristine)("ng-dirty",a.isDirty)("ng-valid",a.isValid)("ng-invalid",a.isInvalid)("ng-pending",a.isPending)},features:[fn]}),o})();const wx="VALID",HM="INVALID",gv="PENDING",xx="DISABLED";function vk(o){return Array.isArray(o)?uT(o):o||null}function wk(o){return Array.isArray(o)?hT(o):o||null}function zM(o){return null!=o&&!Array.isArray(o)&&"object"==typeof o}function Cx(o,r){(function vT(o,r){const i=function hk(o){return o._rawValidators}(o);null!==r.validator?o.setValidators(uk(i,r.validator)):"function"==typeof i&&o.setValidators([i]);const a=function ck(o){return o._rawAsyncValidators}(o);null!==r.asyncValidator?o.setAsyncValidators(uk(a,r.asyncValidator)):"function"==typeof a&&o.setAsyncValidators([a]);const h=()=>o.updateValueAndValidity();WM(r._rawValidators,h),WM(r._rawAsyncValidators,h)})(o,r),r.valueAccessor.writeValue(o.value),o.disabled&&r.valueAccessor.setDisabledState?.(!0),function wU(o,r){r.valueAccessor.registerOnChange(i=>{o._pendingValue=i,o._pendingChange=!0,o._pendingDirty=!0,"change"===o.updateOn&&Sk(o,r)})}(o,r),function CU(o,r){const i=(a,h)=>{r.valueAccessor.writeValue(a),h&&r.viewToModelUpdate(a)};o.registerOnChange(i),r._registerOnDestroy(()=>{o._unregisterOnChange(i)})}(o,r),function xU(o,r){r.valueAccessor.registerOnTouched(()=>{o._pendingTouched=!0,"blur"===o.updateOn&&o._pendingChange&&Sk(o,r),"submit"!==o.updateOn&&o.markAsTouched()})}(o,r),function vU(o,r){if(r.valueAccessor.setDisabledState){const i=a=>{r.valueAccessor.setDisabledState(a)};o.registerOnDisabledChange(i),r._registerOnDestroy(()=>{o._unregisterOnDisabledChange(i)})}}(o,r)}function WM(o,r){o.forEach(i=>{i.registerOnValidatorChange&&i.registerOnValidatorChange(r)})}function Sk(o,r){o._pendingDirty&&o.markAsDirty(),o.setValue(o._pendingValue,{emitModelToViewChange:!1}),r.viewToModelUpdate(o._pendingValue),o._pendingChange=!1}function Ek(o,r){const i=o.indexOf(r);i>-1&&o.splice(i,1)}function Pk(o){return"object"==typeof o&&null!==o&&2===Object.keys(o).length&&"value"in o&&"disabled"in o}const NU={provide:jd,useExisting:Tn(()=>YM)},kk=(()=>Promise.resolve())();let YM=(()=>{class o extends jd{constructor(i,a,h,f,m){super(),this._changeDetectorRef=m,this.control=new class extends class Mk{constructor(r,i){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=r,this._rawAsyncValidators=i,this._composedValidatorFn=vk(this._rawValidators),this._composedAsyncValidatorFn=wk(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(r){this._rawValidators=this._composedValidatorFn=r}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(r){this._rawAsyncValidators=this._composedAsyncValidatorFn=r}get parent(){return this._parent}get valid(){return this.status===wx}get invalid(){return this.status===HM}get pending(){return this.status==gv}get disabled(){return this.status===xx}get enabled(){return this.status!==xx}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(r){this._rawValidators=r,this._composedValidatorFn=vk(r)}setAsyncValidators(r){this._rawAsyncValidators=r,this._composedAsyncValidatorFn=wk(r)}addValidators(r){this.setValidators(fk(r,this._rawValidators))}addAsyncValidators(r){this.setAsyncValidators(fk(r,this._rawAsyncValidators))}removeValidators(r){this.setValidators(dk(r,this._rawValidators))}removeAsyncValidators(r){this.setAsyncValidators(dk(r,this._rawAsyncValidators))}hasValidator(r){return BM(this._rawValidators,r)}hasAsyncValidator(r){return BM(this._rawAsyncValidators,r)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(r={}){this.touched=!0,this._parent&&!r.onlySelf&&this._parent.markAsTouched(r)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(r=>r.markAllAsTouched())}markAsUntouched(r={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0})}),this._parent&&!r.onlySelf&&this._parent._updateTouched(r)}markAsDirty(r={}){this.pristine=!1,this._parent&&!r.onlySelf&&this._parent.markAsDirty(r)}markAsPristine(r={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(i=>{i.markAsPristine({onlySelf:!0})}),this._parent&&!r.onlySelf&&this._parent._updatePristine(r)}markAsPending(r={}){this.status=gv,!1!==r.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!r.onlySelf&&this._parent.markAsPending(r)}disable(r={}){const i=this._parentMarkedDirty(r.onlySelf);this.status=xx,this.errors=null,this._forEachChild(a=>{a.disable({...r,onlySelf:!0})}),this._updateValue(),!1!==r.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...r,skipPristineCheck:i}),this._onDisabledChange.forEach(a=>a(!0))}enable(r={}){const i=this._parentMarkedDirty(r.onlySelf);this.status=wx,this._forEachChild(a=>{a.enable({...r,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:r.emitEvent}),this._updateAncestors({...r,skipPristineCheck:i}),this._onDisabledChange.forEach(a=>a(!1))}_updateAncestors(r){this._parent&&!r.onlySelf&&(this._parent.updateValueAndValidity(r),r.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(r){this._parent=r}getRawValue(){return this.value}updateValueAndValidity(r={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===wx||this.status===gv)&&this._runAsyncValidator(r.emitEvent)),!1!==r.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!r.onlySelf&&this._parent.updateValueAndValidity(r)}_updateTreeValidity(r={emitEvent:!0}){this._forEachChild(i=>i._updateTreeValidity(r)),this.updateValueAndValidity({onlySelf:!0,emitEvent:r.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?xx:wx}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(r){if(this.asyncValidator){this.status=gv,this._hasOwnPendingAsyncValidator=!0;const i=ik(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(a=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(a,{emitEvent:r})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(r,i={}){this.errors=r,this._updateControlsErrors(!1!==i.emitEvent)}get(r){let i=r;return null==i||(Array.isArray(i)||(i=i.split(".")),0===i.length)?null:i.reduce((a,h)=>a&&a._find(h),this)}getError(r,i){const a=i?this.get(i):this;return a&&a.errors?a.errors[r]:null}hasError(r,i){return!!this.getError(r,i)}get root(){let r=this;for(;r._parent;)r=r._parent;return r}_updateControlsErrors(r){this.status=this._calculateStatus(),r&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(r)}_initObservables(){this.valueChanges=new gn,this.statusChanges=new gn}_calculateStatus(){return this._allControlsDisabled()?xx:this.errors?HM:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(gv)?gv:this._anyControlsHaveStatus(HM)?HM:wx}_anyControlsHaveStatus(r){return this._anyControls(i=>i.status===r)}_anyControlsDirty(){return this._anyControls(r=>r.dirty)}_anyControlsTouched(){return this._anyControls(r=>r.touched)}_updatePristine(r={}){this.pristine=!this._anyControlsDirty(),this._parent&&!r.onlySelf&&this._parent._updatePristine(r)}_updateTouched(r={}){this.touched=this._anyControlsTouched(),this._parent&&!r.onlySelf&&this._parent._updateTouched(r)}_registerOnCollectionChange(r){this._onCollectionChange=r}_setUpdateStrategy(r){zM(r)&&null!=r.updateOn&&(this._updateOn=r.updateOn)}_parentMarkedDirty(r){return!r&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(r){return null}}{constructor(r=null,i,a){super(function gT(o){return(zM(o)?o.validators:o)||null}(i),function mT(o,r){return(zM(r)?r.asyncValidators:o)||null}(a,i)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(r),this._setUpdateStrategy(i),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),zM(i)&&(i.nonNullable||i.initialValueIsDefault)&&(this.defaultValue=Pk(r)?r.value:r)}setValue(r,i={}){this.value=this._pendingValue=r,this._onChange.length&&!1!==i.emitModelToViewChange&&this._onChange.forEach(a=>a(this.value,!1!==i.emitViewToModelChange)),this.updateValueAndValidity(i)}patchValue(r,i={}){this.setValue(r,i)}reset(r=this.defaultValue,i={}){this._applyFormState(r),this.markAsPristine(i),this.markAsUntouched(i),this.setValue(this.value,i),this._pendingChange=!1}_updateValue(){}_anyControls(r){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(r){this._onChange.push(r)}_unregisterOnChange(r){Ek(this._onChange,r)}registerOnDisabledChange(r){this._onDisabledChange.push(r)}_unregisterOnDisabledChange(r){Ek(this._onDisabledChange,r)}_forEachChild(r){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(r){Pk(r)?(this.value=this._pendingValue=r.value,r.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=r}},this._registered=!1,this.update=new gn,this._parent=i,this._setValidators(a),this._setAsyncValidators(h),this.valueAccessor=function xT(o,r){if(!r)return null;let i,a,h;return Array.isArray(r),r.forEach(f=>{f.constructor===jM?i=f:function DU(o){return Object.getPrototypeOf(o.constructor)===Bg}(f)?a=f:h=f}),h||a||i||null}(0,f)}ngOnChanges(i){if(this._checkForErrors(),!this._registered||"name"in i){if(this._registered&&(this._checkName(),this.formDirective)){const a=i.name.previousValue;this.formDirective.removeControl({name:a,path:this._getPath(a)})}this._setUpControl()}"isDisabled"in i&&this._updateDisabled(i),function wT(o,r){if(!o.hasOwnProperty("model"))return!1;const i=o.model;return!!i.isFirstChange()||!Object.is(r,i.currentValue)}(i,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(i){this.viewModel=i,this.update.emit(i)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Cx(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(i){kk.then(()=>{this.control.setValue(i,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(i){const a=i.isDisabled.currentValue,h=0!==a&&function Pc(o){return"boolean"==typeof o?o:null!=o&&"false"!==o}(a);kk.then(()=>{h&&!this.control.disabled?this.control.disable():!h&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(i){return this._parent?function GM(o,r){return[...r.path,o]}(i,this._parent):[i]}}return o.\u0275fac=function(i){return new(i||o)(ct(ks,9),ct(ls,10),ct(Rd,10),ct(mu,10),ct(Pd,8))},o.\u0275dir=Xt({type:o,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Dn([NU]),fn,Me]}),o})(),Ok=(()=>{class o{}return o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=ci({type:o}),o.\u0275inj=Xn({}),o})(),tH=(()=>{class o{}return o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=ci({type:o}),o.\u0275inj=Xn({imports:[Ok]}),o})(),eH=(()=>{class o{}return o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=ci({type:o}),o.\u0275inj=Xn({imports:[tH]}),o})(),Qk=(()=>{class o{constructor(i,a,h){this.el=i,this.ngModel=a,this.cd=h}ngAfterViewInit(){this.updateFilledState(),this.cd.detectChanges()}ngDoCheck(){this.updateFilledState()}onInput(i){this.updateFilledState()}updateFilledState(){this.filled=this.el.nativeElement.value&&this.el.nativeElement.value.length||this.ngModel&&this.ngModel.model}}return o.\u0275fac=function(i){return new(i||o)(ct(Kn),ct(YM,8),ct(Pd))},o.\u0275dir=Xt({type:o,selectors:[["","pInputText",""]],hostAttrs:[1,"p-inputtext","p-component","p-element"],hostVars:2,hostBindings:function(i,a){1&i&&Fe("input",function(f){return a.onInput(f)}),2&i&&fc("p-filled",a.filled)}}),o})(),qk=(()=>{class o{}return o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=ci({type:o}),o.\u0275inj=Xn({imports:[Ac]}),o})();const iH=["input"];function rH(o,r){if(1&o){const i=Jo();le(0,"i",6),Fe("click",function(){return oe(i),qe(Ee().clear())}),de()}}const tb=function(){return{"p-inputnumber-button p-inputnumber-button-up":!0}},eb=function(){return{"p-inputnumber-button p-inputnumber-button-down":!0}};function oH(o,r){if(1&o){const i=Jo();le(0,"span",7)(1,"button",8),Fe("mousedown",function(h){return oe(i),qe(Ee().onUpButtonMouseDown(h))})("mouseup",function(){return oe(i),qe(Ee().onUpButtonMouseUp())})("mouseleave",function(){return oe(i),qe(Ee().onUpButtonMouseLeave())})("keydown",function(h){return oe(i),qe(Ee().onUpButtonKeyDown(h))})("keyup",function(){return oe(i),qe(Ee().onUpButtonKeyUp())}),de(),le(2,"button",8),Fe("mousedown",function(h){return oe(i),qe(Ee().onDownButtonMouseDown(h))})("mouseup",function(){return oe(i),qe(Ee().onDownButtonMouseUp())})("mouseleave",function(){return oe(i),qe(Ee().onDownButtonMouseLeave())})("keydown",function(h){return oe(i),qe(Ee().onDownButtonKeyDown(h))})("keyup",function(){return oe(i),qe(Ee().onDownButtonKeyUp())}),de()()}if(2&o){const i=Ee();ee(1),Vi(i.incrementButtonClass),ae("ngClass",mo(10,tb))("icon",i.incrementButtonIcon)("disabled",i.disabled),ee(1),Vi(i.decrementButtonClass),ae("ngClass",mo(11,eb))("icon",i.decrementButtonIcon)("disabled",i.disabled)}}function sH(o,r){if(1&o){const i=Jo();le(0,"button",8),Fe("mousedown",function(h){return oe(i),qe(Ee().onUpButtonMouseDown(h))})("mouseup",function(){return oe(i),qe(Ee().onUpButtonMouseUp())})("mouseleave",function(){return oe(i),qe(Ee().onUpButtonMouseLeave())})("keydown",function(h){return oe(i),qe(Ee().onUpButtonKeyDown(h))})("keyup",function(){return oe(i),qe(Ee().onUpButtonKeyUp())}),de()}if(2&o){const i=Ee();Vi(i.incrementButtonClass),ae("ngClass",mo(5,tb))("icon",i.incrementButtonIcon)("disabled",i.disabled)}}function aH(o,r){if(1&o){const i=Jo();le(0,"button",8),Fe("mousedown",function(h){return oe(i),qe(Ee().onDownButtonMouseDown(h))})("mouseup",function(){return oe(i),qe(Ee().onDownButtonMouseUp())})("mouseleave",function(){return oe(i),qe(Ee().onDownButtonMouseLeave())})("keydown",function(h){return oe(i),qe(Ee().onDownButtonKeyDown(h))})("keyup",function(){return oe(i),qe(Ee().onDownButtonKeyUp())}),de()}if(2&o){const i=Ee();Vi(i.decrementButtonClass),ae("ngClass",mo(5,eb))("icon",i.decrementButtonIcon)("disabled",i.disabled)}}const lH=function(o,r,i){return{"p-inputnumber p-component":!0,"p-inputnumber-buttons-stacked":o,"p-inputnumber-buttons-horizontal":r,"p-inputnumber-buttons-vertical":i}},uH={provide:mu,useExisting:Tn(()=>nb),multi:!0};let nb=(()=>{class o{constructor(i,a){this.el=i,this.cd=a,this.showButtons=!1,this.format=!0,this.buttonLayout="stacked",this.incrementButtonIcon="pi pi-angle-up",this.decrementButtonIcon="pi pi-angle-down",this.readonly=!1,this.step=1,this.allowEmpty=!0,this.mode="decimal",this.useGrouping=!0,this.showClear=!1,this.onInput=new gn,this.onFocus=new gn,this.onBlur=new gn,this.onKeyDown=new gn,this.onClear=new gn,this.onModelChange=()=>{},this.onModelTouched=()=>{},this.groupChar="",this.prefixChar="",this.suffixChar=""}get disabled(){return this._disabled}set disabled(i){i&&(this.focused=!1),this._disabled=i,this.timer&&this.clearTimer()}ngOnChanges(i){["locale","localeMatcher","mode","currency","currencyDisplay","useGrouping","minFractionDigits","maxFractionDigits","prefix","suffix"].some(h=>!!i[h])&&this.updateConstructParser()}ngOnInit(){this.constructParser(),this.initialized=!0}getOptions(){return{localeMatcher:this.localeMatcher,style:this.mode,currency:this.currency,currencyDisplay:this.currencyDisplay,useGrouping:this.useGrouping,minimumFractionDigits:this.minFractionDigits,maximumFractionDigits:this.maxFractionDigits}}constructParser(){this.numberFormat=new Intl.NumberFormat(this.locale,this.getOptions());const i=[...new Intl.NumberFormat(this.locale,{useGrouping:!1}).format(9876543210)].reverse(),a=new Map(i.map((h,f)=>[h,f]));this._numeral=new RegExp(`[${i.join("")}]`,"g"),this._group=this.getGroupingExpression(),this._minusSign=this.getMinusSignExpression(),this._currency=this.getCurrencyExpression(),this._decimal=this.getDecimalExpression(),this._suffix=this.getSuffixExpression(),this._prefix=this.getPrefixExpression(),this._index=h=>a.get(h)}updateConstructParser(){this.initialized&&this.constructParser()}escapeRegExp(i){return i.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}getDecimalExpression(){const i=new Intl.NumberFormat(this.locale,{...this.getOptions(),useGrouping:!1});return new RegExp(`[${i.format(1.1).replace(this._currency,"").trim().replace(this._numeral,"")}]`,"g")}getGroupingExpression(){const i=new Intl.NumberFormat(this.locale,{useGrouping:!0});return this.groupChar=i.format(1e6).trim().replace(this._numeral,"").charAt(0),new RegExp(`[${this.groupChar}]`,"g")}getMinusSignExpression(){const i=new Intl.NumberFormat(this.locale,{useGrouping:!1});return new RegExp(`[${i.format(-1).trim().replace(this._numeral,"")}]`,"g")}getCurrencyExpression(){if(this.currency){const i=new Intl.NumberFormat(this.locale,{style:"currency",currency:this.currency,currencyDisplay:this.currencyDisplay,minimumFractionDigits:0,maximumFractionDigits:0});return new RegExp(`[${i.format(1).replace(/\s/g,"").replace(this._numeral,"").replace(this._group,"")}]`,"g")}return new RegExp("[]","g")}getPrefixExpression(){if(this.prefix)this.prefixChar=this.prefix;else{const i=new Intl.NumberFormat(this.locale,{style:this.mode,currency:this.currency,currencyDisplay:this.currencyDisplay});this.prefixChar=i.format(1).split("1")[0]}return new RegExp(`${this.escapeRegExp(this.prefixChar||"")}`,"g")}getSuffixExpression(){if(this.suffix)this.suffixChar=this.suffix;else{const i=new Intl.NumberFormat(this.locale,{style:this.mode,currency:this.currency,currencyDisplay:this.currencyDisplay,minimumFractionDigits:0,maximumFractionDigits:0});this.suffixChar=i.format(1).split("1")[1]}return new RegExp(`${this.escapeRegExp(this.suffixChar||"")}`,"g")}formatValue(i){if(null!=i){if("-"===i)return i;if(this.format){let h=new Intl.NumberFormat(this.locale,this.getOptions()).format(i);return this.prefix&&(h=this.prefix+h),this.suffix&&(h+=this.suffix),h}return i.toString()}return""}parseValue(i){let a=i.replace(this._suffix,"").replace(this._prefix,"").trim().replace(/\s/g,"").replace(this._currency,"").replace(this._group,"").replace(this._minusSign,"-").replace(this._decimal,".").replace(this._numeral,this._index);if(a){if("-"===a)return a;let h=+a;return isNaN(h)?null:h}return null}repeat(i,a,h){if(this.readonly)return;let f=a||500;this.clearTimer(),this.timer=setTimeout(()=>{this.repeat(i,40,h)},f),this.spin(i,h)}spin(i,a){let h=this.step*a,f=this.parseValue(this.input.nativeElement.value)||0,m=this.validateValue(f+h);this.maxlength&&this.maxlength<this.formatValue(m).length||(this.updateInput(m,null,"spin",null),this.updateModel(i,m),this.handleOnInput(i,f,m))}clear(){this.value=null,this.onModelChange(this.value),this.onClear.emit()}onUpButtonMouseDown(i){this.input.nativeElement.focus(),this.repeat(i,null,1),i.preventDefault()}onUpButtonMouseUp(){this.clearTimer()}onUpButtonMouseLeave(){this.clearTimer()}onUpButtonKeyDown(i){(32===i.keyCode||13===i.keyCode)&&this.repeat(i,null,1)}onUpButtonKeyUp(){this.clearTimer()}onDownButtonMouseDown(i){this.input.nativeElement.focus(),this.repeat(i,null,-1),i.preventDefault()}onDownButtonMouseUp(){this.clearTimer()}onDownButtonMouseLeave(){this.clearTimer()}onDownButtonKeyUp(){this.clearTimer()}onDownButtonKeyDown(i){(32===i.keyCode||13===i.keyCode)&&this.repeat(i,null,-1)}onUserInput(i){this.readonly||(this.isSpecialChar&&(i.target.value=this.lastValue),this.isSpecialChar=!1)}onInputKeyDown(i){if(this.readonly)return;if(this.lastValue=i.target.value,i.shiftKey||i.altKey)return void(this.isSpecialChar=!0);let a=i.target.selectionStart,h=i.target.selectionEnd,f=i.target.value,m=null;switch(i.altKey&&i.preventDefault(),i.which){case 38:this.spin(i,1),i.preventDefault();break;case 40:this.spin(i,-1),i.preventDefault();break;case 37:this.isNumeralChar(f.charAt(a-1))||i.preventDefault();break;case 39:this.isNumeralChar(f.charAt(a))||i.preventDefault();break;case 13:m=this.validateValue(this.parseValue(this.input.nativeElement.value)),this.input.nativeElement.value=this.formatValue(m),this.input.nativeElement.setAttribute("aria-valuenow",m),this.updateModel(i,m);break;case 8:if(i.preventDefault(),a===h){const v=f.charAt(a-1),{decimalCharIndex:x,decimalCharIndexWithoutPrefix:S}=this.getDecimalCharIndexes(f);if(this.isNumeralChar(v)){const T=this.getDecimalLength(f);if(this._group.test(v))this._group.lastIndex=0,m=f.slice(0,a-2)+f.slice(a-1);else if(this._decimal.test(v))this._decimal.lastIndex=0,T?this.input.nativeElement.setSelectionRange(a-1,a-1):m=f.slice(0,a-1)+f.slice(a);else if(x>0&&a>x){const N=this.isDecimalMode()&&(this.minFractionDigits||0)<T?"":"0";m=f.slice(0,a-1)+N+f.slice(a)}else 1===S?(m=f.slice(0,a-1)+"0"+f.slice(a),m=this.parseValue(m)>0?m:""):m=f.slice(0,a-1)+f.slice(a)}this.updateValue(i,m,null,"delete-single")}else m=this.deleteRange(f,a,h),this.updateValue(i,m,null,"delete-range");break;case 46:if(i.preventDefault(),a===h){const v=f.charAt(a),{decimalCharIndex:x,decimalCharIndexWithoutPrefix:S}=this.getDecimalCharIndexes(f);if(this.isNumeralChar(v)){const T=this.getDecimalLength(f);if(this._group.test(v))this._group.lastIndex=0,m=f.slice(0,a)+f.slice(a+2);else if(this._decimal.test(v))this._decimal.lastIndex=0,T?this.input.nativeElement.setSelectionRange(a+1,a+1):m=f.slice(0,a)+f.slice(a+1);else if(x>0&&a>x){const N=this.isDecimalMode()&&(this.minFractionDigits||0)<T?"":"0";m=f.slice(0,a)+N+f.slice(a+1)}else 1===S?(m=f.slice(0,a)+"0"+f.slice(a+1),m=this.parseValue(m)>0?m:""):m=f.slice(0,a)+f.slice(a+1)}this.updateValue(i,m,null,"delete-back-single")}else m=this.deleteRange(f,a,h),this.updateValue(i,m,null,"delete-range")}this.onKeyDown.emit(i)}onInputKeyPress(i){if(this.readonly)return;let a=i.which||i.keyCode,h=String.fromCharCode(a);const f=this.isDecimalSign(h),m=this.isMinusSign(h);13!=a&&i.preventDefault(),(48<=a&&a<=57||m||f)&&this.insert(i,h,{isDecimalSign:f,isMinusSign:m})}onPaste(i){if(!this.disabled&&!this.readonly){i.preventDefault();let a=(i.clipboardData||window.clipboardData).getData("Text");if(a){let h=this.parseValue(a);null!=h&&this.insert(i,h.toString())}}}allowMinusSign(){return null==this.min||this.min<0}isMinusSign(i){return!(!this._minusSign.test(i)&&"-"!==i||(this._minusSign.lastIndex=0,0))}isDecimalSign(i){return!!this._decimal.test(i)&&(this._decimal.lastIndex=0,!0)}isDecimalMode(){return"decimal"===this.mode}getDecimalCharIndexes(i){let a=i.search(this._decimal);this._decimal.lastIndex=0;const f=i.replace(this._prefix,"").trim().replace(/\s/g,"").replace(this._currency,"").search(this._decimal);return this._decimal.lastIndex=0,{decimalCharIndex:a,decimalCharIndexWithoutPrefix:f}}getCharIndexes(i){const a=i.search(this._decimal);this._decimal.lastIndex=0;const h=i.search(this._minusSign);this._minusSign.lastIndex=0;const f=i.search(this._suffix);this._suffix.lastIndex=0;const m=i.search(this._currency);return this._currency.lastIndex=0,{decimalCharIndex:a,minusCharIndex:h,suffixCharIndex:f,currencyCharIndex:m}}insert(i,a,h={isDecimalSign:!1,isMinusSign:!1}){const f=a.search(this._minusSign);if(this._minusSign.lastIndex=0,!this.allowMinusSign()&&-1!==f)return;let m=this.input.nativeElement.selectionStart,v=this.input.nativeElement.selectionEnd,x=this.input.nativeElement.value.trim();const{decimalCharIndex:S,minusCharIndex:T,suffixCharIndex:N,currencyCharIndex:F}=this.getCharIndexes(x);let j;if(h.isMinusSign)0===m&&(j=x,(-1===T||0!==v)&&(j=this.insertText(x,a,0,v)),this.updateValue(i,j,a,"insert"));else if(h.isDecimalSign)S>0&&m===S?this.updateValue(i,x,a,"insert"):(S>m&&S<v||-1===S&&this.maxFractionDigits)&&(j=this.insertText(x,a,m,v),this.updateValue(i,j,a,"insert"));else{const B=this.numberFormat.resolvedOptions().maximumFractionDigits,W=m!==v?"range-insert":"insert";if(S>0&&m>S){if(m+a.length-(S+1)<=B){const it=F>=m?F-1:N>=m?N:x.length;j=x.slice(0,m)+a+x.slice(m+a.length,it)+x.slice(it),this.updateValue(i,j,a,W)}}else j=this.insertText(x,a,m,v),this.updateValue(i,j,a,W)}}insertText(i,a,h,f){if(2===("."===a?a:a.split(".")).length){const v=i.slice(h,f).search(this._decimal);return this._decimal.lastIndex=0,v>0?i.slice(0,h)+this.formatValue(a)+i.slice(f):i||this.formatValue(a)}return f-h===i.length?this.formatValue(a):0===h?a+i.slice(f):f===i.length?i.slice(0,h)+a:i.slice(0,h)+a+i.slice(f)}deleteRange(i,a,h){let f;return f=h-a===i.length?"":0===a?i.slice(h):h===i.length?i.slice(0,a):i.slice(0,a)+i.slice(h),f}initCursor(){let i=this.input.nativeElement.selectionStart,a=this.input.nativeElement.value,h=a.length,f=null,m=(this.prefixChar||"").length;a=a.replace(this._prefix,""),i-=m;let v=a.charAt(i);if(this.isNumeralChar(v))return i+m;let x=i-1;for(;x>=0;){if(v=a.charAt(x),this.isNumeralChar(v)){f=x+m;break}x--}if(null!==f)this.input.nativeElement.setSelectionRange(f+1,f+1);else{for(x=i;x<h;){if(v=a.charAt(x),this.isNumeralChar(v)){f=x+m;break}x++}null!==f&&this.input.nativeElement.setSelectionRange(f,f)}return f||0}onInputClick(){this.readonly||this.initCursor()}isNumeralChar(i){return!(1!==i.length||!(this._numeral.test(i)||this._decimal.test(i)||this._group.test(i)||this._minusSign.test(i))||(this.resetRegex(),0))}resetRegex(){this._numeral.lastIndex=0,this._decimal.lastIndex=0,this._group.lastIndex=0,this._minusSign.lastIndex=0}updateValue(i,a,h,f){let m=this.input.nativeElement.value,v=null;null!=a&&(v=this.parseValue(a),v=v||this.allowEmpty?v:0,this.updateInput(v,h,f,a),this.handleOnInput(i,m,v))}handleOnInput(i,a,h){this.isValueChanged(a,h)&&this.onInput.emit({originalEvent:i,value:h})}isValueChanged(i,a){return null===a&&null!==i||null!=a&&a!==("string"==typeof i?this.parseValue(i):i)}validateValue(i){return"-"===i||null==i?null:null!=this.min&&i<this.min?this.min:null!=this.max&&i>this.max?this.max:i}updateInput(i,a,h,f){a=a||"";let m=this.input.nativeElement.value,v=this.formatValue(i),x=m.length;if(v!==f&&(v=this.concatValues(v,f)),0===x){this.input.nativeElement.value=v,this.input.nativeElement.setSelectionRange(0,0);const T=this.initCursor()+a.length;this.input.nativeElement.setSelectionRange(T,T)}else{let S=this.input.nativeElement.selectionStart,T=this.input.nativeElement.selectionEnd;if(this.maxlength&&this.maxlength<v.length)return;this.input.nativeElement.value=v;let N=v.length;if("range-insert"===h){const F=this.parseValue((m||"").slice(0,S)),B=(null!==F?F.toString():"").split("").join(`(${this.groupChar})?`),W=new RegExp(B,"g");W.test(v);const it=a.split("").join(`(${this.groupChar})?`),rt=new RegExp(it,"g");rt.test(v.slice(W.lastIndex)),T=W.lastIndex+rt.lastIndex,this.input.nativeElement.setSelectionRange(T,T)}else if(N===x)"insert"===h||"delete-back-single"===h?this.input.nativeElement.setSelectionRange(T+1,T+1):"delete-single"===h?this.input.nativeElement.setSelectionRange(T-1,T-1):("delete-range"===h||"spin"===h)&&this.input.nativeElement.setSelectionRange(T,T);else if("delete-back-single"===h){let F=m.charAt(T-1),j=m.charAt(T),B=x-N,W=this._group.test(j);W&&1===B?T+=1:!W&&this.isNumeralChar(F)&&(T+=-1*B+1),this._group.lastIndex=0,this.input.nativeElement.setSelectionRange(T,T)}else if("-"===m&&"insert"===h){this.input.nativeElement.setSelectionRange(0,0);const j=this.initCursor()+a.length+1;this.input.nativeElement.setSelectionRange(j,j)}else T+=N-x,this.input.nativeElement.setSelectionRange(T,T)}this.input.nativeElement.setAttribute("aria-valuenow",i)}concatValues(i,a){if(i&&a){let h=a.search(this._decimal);return this._decimal.lastIndex=0,-1!==h?i.split(this._decimal)[0]+a.slice(h):i}return i}getDecimalLength(i){if(i){const a=i.split(this._decimal);if(2===a.length)return a[1].replace(this._suffix,"").trim().replace(/\s/g,"").replace(this._currency,"").length}return 0}onInputFocus(i){this.focused=!0,this.onFocus.emit(i)}onInputBlur(i){this.focused=!1;let a=this.validateValue(this.parseValue(this.input.nativeElement.value));this.input.nativeElement.value=this.formatValue(a),this.input.nativeElement.setAttribute("aria-valuenow",a),this.updateModel(i,a),this.onBlur.emit(i)}formattedValue(){return this.formatValue(this.value||this.allowEmpty?this.value:0)}updateModel(i,a){this.value!==a&&(this.value=a,this.onModelChange(a)),this.onModelTouched()}writeValue(i){this.value=i,this.cd.markForCheck()}registerOnChange(i){this.onModelChange=i}registerOnTouched(i){this.onModelTouched=i}setDisabledState(i){this.disabled=i,this.cd.markForCheck()}get filled(){return null!=this.value&&this.value.toString().length>0}clearTimer(){this.timer&&clearInterval(this.timer)}getFormatter(){return this.numberFormat}}return o.\u0275fac=function(i){return new(i||o)(ct(Kn),ct(Pd))},o.\u0275cmp=Lr({type:o,selectors:[["p-inputNumber"]],viewQuery:function(i,a){if(1&i&&xl(iH,5),2&i){let h;Wr(h=Kr())&&(a.input=h.first)}},hostAttrs:[1,"p-element","p-inputwrapper"],hostVars:6,hostBindings:function(i,a){2&i&&fc("p-inputwrapper-filled",a.filled)("p-inputwrapper-focus",a.focused)("p-inputnumber-clearable",a.showClear&&"vertical"!=a.buttonLayout)},inputs:{showButtons:"showButtons",format:"format",buttonLayout:"buttonLayout",inputId:"inputId",styleClass:"styleClass",style:"style",placeholder:"placeholder",size:"size",maxlength:"maxlength",tabindex:"tabindex",title:"title",ariaLabel:"ariaLabel",ariaRequired:"ariaRequired",name:"name",required:"required",autocomplete:"autocomplete",min:"min",max:"max",incrementButtonClass:"incrementButtonClass",decrementButtonClass:"decrementButtonClass",incrementButtonIcon:"incrementButtonIcon",decrementButtonIcon:"decrementButtonIcon",readonly:"readonly",step:"step",allowEmpty:"allowEmpty",locale:"locale",localeMatcher:"localeMatcher",mode:"mode",currency:"currency",currencyDisplay:"currencyDisplay",useGrouping:"useGrouping",minFractionDigits:"minFractionDigits",maxFractionDigits:"maxFractionDigits",prefix:"prefix",suffix:"suffix",inputStyle:"inputStyle",inputStyleClass:"inputStyleClass",showClear:"showClear",disabled:"disabled"},outputs:{onInput:"onInput",onFocus:"onFocus",onBlur:"onBlur",onKeyDown:"onKeyDown",onClear:"onClear"},features:[Dn([uH]),Me],decls:7,vars:32,consts:[[3,"ngClass","ngStyle"],["pInputText","","inputmode","decimal",3,"ngClass","ngStyle","value","disabled","readonly","input","keydown","keypress","paste","click","focus","blur"],["input",""],["class","p-inputnumber-clear-icon pi pi-times",3,"click",4,"ngIf"],["class","p-inputnumber-button-group",4,"ngIf"],["type","button","pButton","",3,"ngClass","class","icon","disabled","mousedown","mouseup","mouseleave","keydown","keyup",4,"ngIf"],[1,"p-inputnumber-clear-icon","pi","pi-times",3,"click"],[1,"p-inputnumber-button-group"],["type","button","pButton","",3,"ngClass","icon","disabled","mousedown","mouseup","mouseleave","keydown","keyup"]],template:function(i,a){1&i&&(le(0,"span",0)(1,"input",1,2),Fe("input",function(f){return a.onUserInput(f)})("keydown",function(f){return a.onInputKeyDown(f)})("keypress",function(f){return a.onInputKeyPress(f)})("paste",function(f){return a.onPaste(f)})("click",function(){return a.onInputClick()})("focus",function(f){return a.onInputFocus(f)})("blur",function(f){return a.onInputBlur(f)}),de(),li(3,rH,1,0,"i",3),li(4,oH,3,12,"span",4),li(5,sH,1,6,"button",5),li(6,aH,1,6,"button",5),de()),2&i&&(Vi(a.styleClass),ae("ngClass",qE(28,lH,a.showButtons&&"stacked"===a.buttonLayout,a.showButtons&&"horizontal"===a.buttonLayout,a.showButtons&&"vertical"===a.buttonLayout))("ngStyle",a.style),ee(1),Vi(a.inputStyleClass),ae("ngClass","p-inputnumber-input")("ngStyle",a.inputStyle)("value",a.formattedValue())("disabled",a.disabled)("readonly",a.readonly),Io("placeholder",a.placeholder)("title",a.title)("id",a.inputId)("size",a.size)("name",a.name)("autocomplete",a.autocomplete)("maxlength",a.maxlength)("tabindex",a.tabindex)("aria-label",a.ariaLabel)("aria-required",a.ariaRequired)("required",a.required)("min",a.min)("max",a.max),ee(2),ae("ngIf","vertical"!=a.buttonLayout&&a.showClear&&a.value),ee(1),ae("ngIf",a.showButtons&&"stacked"===a.buttonLayout),ee(1),ae("ngIf",a.showButtons&&"stacked"!==a.buttonLayout),ee(1),ae("ngIf",a.showButtons&&"stacked"!==a.buttonLayout))},dependencies:[av,Jw,Zw,Qk,oT],styles:["p-inputnumber,.p-inputnumber{display:inline-flex}.p-inputnumber-button{display:flex;align-items:center;justify-content:center;flex:0 0 auto}.p-inputnumber-buttons-stacked .p-button.p-inputnumber-button .p-button-label,.p-inputnumber-buttons-horizontal .p-button.p-inputnumber-button .p-button-label{display:none}.p-inputnumber-buttons-stacked .p-button.p-inputnumber-button-up{border-top-left-radius:0;border-bottom-left-radius:0;border-bottom-right-radius:0;padding:0}.p-inputnumber-buttons-stacked .p-inputnumber-input{border-top-right-radius:0;border-bottom-right-radius:0}.p-inputnumber-buttons-stacked .p-button.p-inputnumber-button-down{border-top-left-radius:0;border-top-right-radius:0;border-bottom-left-radius:0;padding:0}.p-inputnumber-buttons-stacked .p-inputnumber-button-group{display:flex;flex-direction:column}.p-inputnumber-buttons-stacked .p-inputnumber-button-group .p-button.p-inputnumber-button{flex:1 1 auto}.p-inputnumber-buttons-horizontal .p-button.p-inputnumber-button-up{order:3;border-top-left-radius:0;border-bottom-left-radius:0}.p-inputnumber-buttons-horizontal .p-inputnumber-input{order:2;border-radius:0}.p-inputnumber-buttons-horizontal .p-button.p-inputnumber-button-down{order:1;border-top-right-radius:0;border-bottom-right-radius:0}.p-inputnumber-buttons-vertical{flex-direction:column}.p-inputnumber-buttons-vertical .p-button.p-inputnumber-button-up{order:1;border-bottom-left-radius:0;border-bottom-right-radius:0;width:100%}.p-inputnumber-buttons-vertical .p-inputnumber-input{order:2;border-radius:0;text-align:center}.p-inputnumber-buttons-vertical .p-button.p-inputnumber-button-down{order:3;border-top-left-radius:0;border-top-right-radius:0;width:100%}.p-inputnumber-input{flex:1 1 auto}.p-fluid p-inputnumber,.p-fluid .p-inputnumber{width:100%}.p-fluid .p-inputnumber .p-inputnumber-input{width:1%}.p-fluid .p-inputnumber-buttons-vertical .p-inputnumber-input{width:100%}.p-inputnumber-clear-icon{position:absolute;top:50%;margin-top:-.5rem;cursor:pointer}.p-inputnumber-clearable{position:relative}\n"],encapsulation:2,changeDetection:0}),o})(),hH=(()=>{class o{}return o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=ci({type:o}),o.\u0275inj=Xn({imports:[Ac,qk,LA]}),o})();const cH=function(){return{height:"18rem"}},Vd=function(){return{width:"8rem"}};let fH=(()=>{class o{constructor(){this.maxAgeEvent=new gn,this.maxAge=10,this.maxNumChildrenEvent=new gn,this.maxNumChildren=2,this.adultAgeEvent=new gn,this.adultAge=3,this.elderlyAgeEvent=new gn,this.elderlyAge=7,this.playersToAddInput="",this.deadPlayers=[],this.livingPlayers=[]}ngOnInit(){}addPlayers(){if(!this.playersToAddInput)return;const i=this.playersToAddInput.split(",");for(let a=0;a<i.length;a++)i[a]=i[a].trim(),!this.deadPlayers.includes(i[a])&&!this.livingPlayers.includes(i[a])&&i[a].length<19&&this.deadPlayers.push(i[a]);this.playersToAddInput=""}emitMaxAge(){this.maxAgeEvent.emit(this.maxAge)}emitMaxNumChildren(){this.maxNumChildrenEvent.emit(this.maxNumChildren)}emitAdultAge(){this.adultAgeEvent.emit(this.adultAge)}emitElderlyAge(){this.elderlyAgeEvent.emit(this.elderlyAge)}}return o.\u0275fac=function(i){return new(i||o)},o.\u0275cmp=Lr({type:o,selectors:[["app-config"]],inputs:{maxAge:"maxAge",maxNumChildren:"maxNumChildren",adultAge:"adultAge",elderlyAge:"elderlyAge",playersToAddInput:"playersToAddInput",deadPlayers:"deadPlayers",livingPlayers:"livingPlayers"},outputs:{maxAgeEvent:"maxAgeEvent",maxNumChildrenEvent:"maxNumChildrenEvent",adultAgeEvent:"adultAgeEvent",elderlyAgeEvent:"elderlyAgeEvent"},decls:25,vars:32,consts:[["header","Config"],[1,"inputs-flex"],[1,"field","col-12","md:col-3"],["for","vertical",2,"display","block"],["buttonLayout","horizontal","spinnerMode","vertical","decrementButtonClass","p-button-secondary","incrementButtonClass","p-button-secondary","incrementButtonIcon","pi pi-plus","decrementButtonIcon","pi pi-minus",3,"inputStyle","ngModel","showButtons","ngModelChange"],["buttonLayout","horizontal","spinnerMode","horizonatl","decrementButtonClass","p-button-secondary","incrementButtonClass","p-button-secondary","incrementButtonIcon","pi pi-plus","decrementButtonIcon","pi pi-minus",3,"inputStyle","ngModel","showButtons","ngModelChange"],[1,"p-float-label","p-input-filled",2,"display","flex","margin-top","40px"],["id","float-input","type","text","pInputText","",3,"ngModel","ngModelChange"],["for","float-input"],["pButton","",3,"click"]],template:function(i,a){1&i&&(le(0,"p-card",0)(1,"div",1)(2,"span",2)(3,"label",3),tr(4,"Max Kids"),de(),le(5,"p-inputNumber",4),Fe("ngModelChange",function(f){return a.maxNumChildren=f})("ngModelChange",function(){return a.emitMaxNumChildren()}),de()(),le(6,"span",2)(7,"label",3),tr(8,"Adult Age"),de(),le(9,"p-inputNumber",5),Fe("ngModelChange",function(f){return a.adultAge=f})("ngModelChange",function(){return a.emitAdultAge()}),de()()(),le(10,"div",1)(11,"span",2)(12,"label",3),tr(13,"Old Age"),de(),le(14,"p-inputNumber",4),Fe("ngModelChange",function(f){return a.elderlyAge=f})("ngModelChange",function(){return a.emitElderlyAge()}),de()(),le(15,"span",2)(16,"label",3),tr(17,"Max Age"),de(),le(18,"p-inputNumber",5),Fe("ngModelChange",function(f){return a.maxAge=f})("ngModelChange",function(){return a.emitMaxAge()}),de()()(),le(19,"span",6)(20,"input",7),Fe("ngModelChange",function(f){return a.playersToAddInput=f}),de(),le(21,"label",8),tr(22,"Player Name(s)"),de(),le(23,"button",9),Fe("click",function(){return a.addPlayers()}),tr(24,"Add Player(s)"),de()()()),2&i&&(on(mo(23,cH)),ee(5),on(mo(24,Vd)),ae("inputStyle",mo(25,Vd))("ngModel",a.maxNumChildren)("showButtons",!1),ee(4),on(mo(26,Vd)),ae("inputStyle",mo(27,Vd))("ngModel",a.adultAge)("showButtons",!1),ee(5),on(mo(28,Vd)),ae("inputStyle",mo(29,Vd))("ngModel",a.elderlyAge)("showButtons",!1),ee(4),on(mo(30,Vd)),ae("inputStyle",mo(31,Vd))("ngModel",a.maxAge)("showButtons",!1),ee(2),ae("ngModel",a.playersToAddInput))},dependencies:[jM,mk,YM,oT,Qk,nb,FA],styles:[".configs[_ngcontent-%COMP%]{font-family:Arial,Helvetica,sans-serif}.inputs-flex[_ngcontent-%COMP%]{display:flex;justify-content:space-between}"]}),o})();const dH=["scrollButton"];function pH(o,r){if(1&o){const i=Jo();le(0,"div")(1,"button",19),Fe("click",function(){const f=oe(i).$implicit;return qe(Ee().alivifyPlayer(f))}),tr(2),de()()}if(2&o){const i=r.$implicit;ee(2),cl(" ",i," ")}}function gH(o,r){if(1&o){const i=Jo();le(0,"div",20)(1,"button",21),Fe("click",function(){const f=oe(i).$implicit;return qe(Ee().killPlayer(f.name))}),tr(2),de()()}if(2&o){const i=r.$implicit;ee(2),Cg(" ",i.name,", age: ",i.age," ")}}function mH(o,r){if(1&o){const i=Jo();le(0,"button",22),Fe("click",function(){return oe(i),qe(Ee().addPlayersByCSV())}),tr(1," add players by CSV\n"),de()}}const yH=function(){return{width:"15rem","margin-right":"10px"}},vH=function(){return{position:"relative",height:"18rem"}},wH=function(){return{width:"100%",height:"150px"}},xH=function(){return{"margin-left":"10px",width:"15rem"}};let CH=(()=>{class o{constructor(i,a,h){this.http=i,this.chronicle=a,this.messageService=h,this.title="medieval-angular",this.model=new rr.rv([]),this.turn=1,this.deadPlayers=[],this.livingPlayers=[],this.playerIncarnations=new Map,this.people=[],this.playersAddedByCSV=!1,this.paused=!1,this.protosAnthropos=null,this.eligableProgenitors=[],this.livingPeople=[],this.personKey=1,this.playersToAddInput="",this.maxAge=10,this.maxNumChildren=2,this.adultAge=3,this.elderlyAge=7,this.scrollButton=null}addPlayersByCSV(){this.http.get("assets/player_list.csv",{responseType:"text"}).subscribe(i=>this.deadPlayers=i.split(",")),this.playersAddedByCSV=!0}alivifyPlayer(i){if(!this.protosAnthropos){let a=this.intToRoman(this.getIncarnation(i));return this.chronicle.add(i+" "+a+" was created ex nihilo."),this.people=[],this.protosAnthropos=new yA(this.personKey++,i),this.addNode(this.protosAnthropos.key,this.protosAnthropos.name+" "+a,0),this.people.push(this.protosAnthropos),this.deadPlayers=this.deadPlayers.filter(h=>h!==i),this.livingPlayers.push(i),void this.livingPeople.push(this.protosAnthropos)}if(this.eligableProgenitors.length){let a=this.eligableProgenitors.pop(),h=new yA(this.personKey++,i);a.children++;let f=this.intToRoman(this.getIncarnation(h.name)),m=this.intToRoman(this.getIncarnation(a.name));this.chronicle.add(h.name+" "+f+" was born to "+a.name+" "+m),this.people.push(h),this.livingPeople.push(h),this.deadPlayers=this.deadPlayers.filter(v=>v!==i),this.livingPlayers.push(i),this.addNode(h.key,h.name+" "+f,a.key)}else this.messageService.add({key:"br",severity:"info",summary:"Info",detail:"No More Eligible Progenitors This Turn"})}killPlayer(i){this.livingPlayers=this.livingPlayers.filter(h=>h!==i),this.deadPlayers.push(i);let a=this.getPersonByName(i);if(a){a.alive=!1;const h=this.model.findNodeDataForKey(a.key);this.model.startTransaction(),this.model.set(h,"color","red"),this.model.commitTransaction(),this.chronicle.add(a.name+" "+this.intToRoman(this.getIncarnation(i))+" died at the age of "+a.age),this.incrementIncarnation(i),this.eligableProgenitors.includes(a)&&this.eligableProgenitors.splice(this.eligableProgenitors.indexOf(a))}this.livingPeople=this.livingPeople.filter(h=>h.name!==i)}updateFerility(){this.people.forEach(i=>{i.fertile=!!(this.adultAge<=i.age&&i.age<this.elderlyAge&&i.alive&&i.children<this.maxNumChildren)})}nextTurn(){if(this.protosAnthropos){for(let i=0;i<this.livingPeople.length;i++){const a=this.livingPeople[i];if(a.age>=this.maxAge)return void this.messageService.add({key:"br",severity:"error",detail:a.name+"'s time has come. Kill them to proceed."})}this.chronicle.add("TURN "+this.turn),this.turn++,this.people.forEach(i=>{i.age++}),this.updateFerility(),this.updateEligableProgenitors()}else this.messageService.add({key:"br",severity:"info",detail:"The Game has not yet begun. Create a Person."})}getPersonByName(i){for(let a=0;a<this.livingPeople.length;a++)if(this.livingPeople[a].name===i)return this.livingPeople[a];return null}addNode(i,a,h){this.model.startTransaction(),this.model.addNodeData({key:i,name:a,parent:h,color:"green"}),this.model.commitTransaction()}updateMaxAge(i){this.maxAge=i}updateMaxNumChildren(i){this.maxNumChildren=i}updateAdultAge(i){this.adultAge=i}updateElderlyAge(i){this.elderlyAge=i}getIncarnation(i){return this.playerIncarnations.get(i)?this.playerIncarnations.get(i):(this.playerIncarnations.set(i,1),1)}incrementIncarnation(i){this.playerIncarnations.set(i,this.playerIncarnations.get(i)+1)}updateEligableProgenitors(){this.eligableProgenitors=[],this.people.forEach(i=>{i.fertile&&this.eligableProgenitors.push(i)}),this.eligableProgenitors.sort(()=>Math.random()-.5)}intToRoman(i){const a=new Map([["M",1e3],["CM",900],["D",500],["CD",400],["C",100],["XC",90],["L",50],["XL",40],["XXX",30],["XX",20],["X",10],["IX",9],["V",5],["IV",4],["I",1]]);let h="";const f=Array.from(a.keys());for(let m=0;m<f.length;++m){const v=a.get(f[m]);for(;i>=v;)i-=v,h+=f[m]}return h}ngOnChanges(i){this.scrollDown()}scrollDown(){setTimeout(()=>{this.scrollButton?.nativeElement.click()},500)}}return o.\u0275fac=function(i){return new(i||o)(ct(PA),ct(bA),ct(Z_))},o.\u0275cmp=Lr({type:o,selectors:[["app-root"]],viewQuery:function(i,a){if(1&i&&xl(dH,5),2&i){let h;Wr(h=Kr())&&(a.scrollButton=h.first)}},features:[Dn([Z_]),Me],decls:25,vars:19,consts:[["id","players",1,"players-container"],["header","Dead Players"],[4,"ngFor","ngForOf"],[1,"middle-container"],[3,"model"],[1,"chronicle-and-config"],[2,"width","50%","height","18rem","margin-top","10px","margin-right","10px"],[3,"playersToAddInput","deadPlayers","livingPlayers","maxAge","maxAgeEvent","maxNumChildren","maxNumChildrenEvent","adultAge","adultAgeEvent","elderlyAge","elderlyAgeEvent"],[2,"width","50%","height","18rem","margin-top","10px"],["header","Chronicle"],["chroniclePanel",""],[2,"display","flex","justify-content","center"],["pButton","",1,"iterate-button",3,"click"],["header","Living Players"],["class","living-players-buttons",4,"ngFor","ngForOf"],["position","bottom-right","key","br"],["pButton","",3,"click",4,"ngIf"],[3,"click"],["scrollButton",""],["pButton","",1,"p-button-danger",3,"click"],[1,"living-players-buttons"],["pButton","",1,"p-button-success",3,"click"],["pButton","",3,"click"]],template:function(i,a){if(1&i){const h=Jo();le(0,"title"),tr(1,"Medieval"),de(),le(2,"div",0)(3,"p-card",1),li(4,pH,3,1,"div",2),de(),le(5,"div",3),Ta(6,"app-tree",4),le(7,"div",5)(8,"div",6)(9,"app-config",7),Fe("maxAge",function(){return a.maxAge})("maxAgeEvent",function(m){return a.updateMaxAge(m)})("maxNumChildren",function(){return a.maxNumChildren})("maxNumChildrenEvent",function(m){return a.updateMaxNumChildren(m)})("adultAge",function(){return a.adultAge})("adultAgeEvent",function(m){return a.updateAdultAge(m)})("elderlyAge",function(){return a.elderlyAge})("elderlyAgeEvent",function(m){return a.updateElderlyAge(m)}),de()(),le(10,"div",8)(11,"p-card",9)(12,"p-scrollPanel",null,10),Ta(14,"app-messages"),de(),le(15,"div",11)(16,"button",12),Fe("click",function(){return a.nextTurn()}),tr(17," Next Turn "),de()()()()()(),le(18,"p-card",13),li(19,gH,3,2,"div",14),de()(),Ta(20,"p-toast",15),li(21,mH,2,0,"button",16),le(22,"button",17,18),Fe("click",function(){return oe(h),qe(function Br(o){return function Vs(o,r){return o[r]}(function qc(){return we.lFrame.contextLView}(),22+o)}(13).scrollTop(9999999))}),tr(24,"Scroll bottom"),de()}2&i&&(ee(3),on(mo(15,yH)),ee(1),ae("ngForOf",a.deadPlayers),ee(2),ae("model",a.model),ee(3),ae("playersToAddInput",a.playersToAddInput)("deadPlayers",a.deadPlayers)("livingPlayers",a.livingPlayers),ee(2),on(mo(16,vH)),ee(1),on(mo(17,wH)),ee(6),on(mo(18,xH)),ee(1),ae("ngForOf",a.livingPeople),ee(2),ae("ngIf",!a.playersAddedByCSV&&!a.protosAnthropos))},dependencies:[sM,Jw,oT,FA,BB,YB,qB,eU,fH],styles:['@import"//db.onlinewebfonts.com/c/f3258385782c4c96aa24fe8b5d5f9782?family=Old+English+Text+MT";.players-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.item-header[_ngcontent-%COMP%]{text-align:center;font-size:25px;font-weight:700;font-family:Arial,Helvetica,sans-serif}.phase-text[_ngcontent-%COMP%]{font-size:40px;font-weight:700}.button-7-alive[_ngcontent-%COMP%]{background-color:green;border:1px solid transparent;border-radius:3px;box-shadow:#fff6 0 1px inset;box-sizing:border-box;color:#fff;cursor:pointer;display:inline-block;font-family:Arial,Helvetica,sans-serif;font-size:17px;font-weight:400;line-height:1.15385;margin:2;outline:none;padding:8px;position:relative;text-align:center;text-decoration:none;user-select:none;-webkit-user-select:none;touch-action:manipulation;vertical-align:baseline;white-space:nowrap}.button-7-alive[_ngcontent-%COMP%]:hover, .button-7[_ngcontent-%COMP%]:focus{background-color:red}.button-7-alive[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 4px #0095ff26}.button-7-alive[_ngcontent-%COMP%]:active{background-color:red;box-shadow:none}.button-7-dead[_ngcontent-%COMP%]{background-color:red;border:1px solid transparent;border-radius:3px;box-shadow:#fff6 0 1px inset;box-sizing:border-box;color:#fff;cursor:pointer;display:inline-block;font-family:Arial,Helvetica,sans-serif;font-size:17px;font-weight:400;line-height:1.15385;margin:2;outline:none;padding:8px;position:relative;text-align:center;text-decoration:none;user-select:none;-webkit-user-select:none;touch-action:manipulation;vertical-align:baseline;white-space:nowrap}.button-7-dead[_ngcontent-%COMP%]:hover, .button-7[_ngcontent-%COMP%]:focus{background-color:green}.button-7-dead[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 4px #0095ff26}.button-7-dead[_ngcontent-%COMP%]:active{background-color:green;box-shadow:none}.button-7[_ngcontent-%COMP%]{background-color:#00f;border:1px solid transparent;border-radius:3px;box-shadow:#fff6 0 1px inset;box-sizing:border-box;color:#fff;cursor:pointer;display:inline-block;font-family:Arial,Helvetica,sans-serif;font-weight:400;line-height:1.15385;margin:2;outline:none;padding:8px;position:relative;text-align:center;text-decoration:none;user-select:none;-webkit-user-select:none;touch-action:manipulation;vertical-align:baseline;white-space:nowrap}.button-7[_ngcontent-%COMP%]:hover, .button-7[_ngcontent-%COMP%]:focus{background-color:#00008b}.button-7[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 4px #0095ff26}.button-7[_ngcontent-%COMP%]:active{background-color:#00f;box-shadow:none}.living-players-buttons[_ngcontent-%COMP%]{display:flex;justify-content:right}.middle-container[_ngcontent-%COMP%]{text-align:center;width:-webkit-fill-available}.chronicle-and-config[_ngcontent-%COMP%]{display:flex}h2[_ngcontent-%COMP%]{color:#a80000;font-family:Arial,Helvetica,sans-serif;font-weight:lighter}.configs[_ngcontent-%COMP%]{font-family:Arial,Helvetica,sans-serif}.alive[_ngcontent-%COMP%]{color:green}.dead[_ngcontent-%COMP%]{color:red}.iterate-button[_ngcontent-%COMP%]{position:absolute;bottom:0;margin-bottom:15px}']}),o})();function Xr(o){for(var r=arguments.length,i=Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];throw Error("[Immer] minified error nr: "+o+(i.length?" "+i.map(function(m){return"'"+m+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Rc(o){return!!o&&!!o[Ae]}function yh(o){var r;return!!o&&(function(i){if(!i||"object"!=typeof i)return!1;var a=Object.getPrototypeOf(i);if(null===a)return!0;var h=Object.hasOwnProperty.call(a,"constructor")&&a.constructor;return h===Object||"function"==typeof h&&Function.toString.call(h)===IH}(o)||Array.isArray(o)||!!o[Tx]||!(null===(r=o.constructor)||void 0===r||!r[Tx])||JM(o)||ZM(o))}function jc(o,r,i){void 0===i&&(i=!1),0===Bd(o)?(i?Object.keys:mv)(o).forEach(function(a){i&&"symbol"==typeof a||r(a,o[a],o)}):o.forEach(function(a,h){return r(h,a,o)})}function Bd(o){var r=o[Ae];return r?r.i>3?r.i-4:r.i:Array.isArray(o)?1:JM(o)?2:ZM(o)?3:0}function Ud(o,r){return 2===Bd(o)?o.has(r):Object.prototype.hasOwnProperty.call(o,r)}function ib(o,r,i){var a=Bd(o);2===a?o.set(r,i):3===a?(o.delete(r),o.add(i)):o[r]=i}function JM(o){return PH&&o instanceof Map}function ZM(o){return NH&&o instanceof Set}function Jr(o){return o.o||o.t}function PT(o){if(Array.isArray(o))return Array.prototype.slice.call(o);var r=cb(o);delete r[Ae];for(var i=mv(r),a=0;a<i.length;a++){var h=i[a],f=r[h];!1===f.writable&&(f.writable=!0,f.configurable=!0),(f.get||f.set)&&(r[h]={configurable:!0,writable:!0,enumerable:f.enumerable,value:o[h]})}return Object.create(Object.getPrototypeOf(o),r)}function NT(o,r){return void 0===r&&(r=!1),IT(o)||Rc(o)||!yh(o)||(Bd(o)>1&&(o.set=o.add=o.clear=o.delete=MH),Object.freeze(o),r&&jc(o,function(i,a){return NT(a,!0)},!0)),o}function MH(){Xr(2)}function IT(o){return null==o||"object"!=typeof o||Object.isFrozen(o)}function vh(o){var r=VT[o];return r||Xr(18,o),r}function Sx(){return _x}function kT(o,r){r&&(vh("Patches"),o.u=[],o.s=[],o.v=r)}function QM(o){bT(o),o.p.forEach(SH),o.p=null}function bT(o){o===_x&&(_x=o.l)}function ob(o){return _x={p:[],l:_x,h:o,m:!0,_:0}}function SH(o){var r=o[Ae];0===r.i||1===r.i?r.j():r.O=!0}function OT(o,r){r._=r.p.length;var i=r.p[0],a=void 0!==o&&o!==i;return r.h.g||vh("ES5").S(r,o,a),a?(i[Ae].P&&(QM(r),Xr(4)),yh(o)&&(o=qM(r,o),r.l||tS(r,o)),r.u&&vh("Patches").M(i[Ae].t,o,r.u,r.s)):o=qM(r,i,[]),QM(r),r.u&&r.v(r.u,r.s),o!==jT?o:void 0}function qM(o,r,i){if(IT(r))return r;var a=r[Ae];if(!a)return jc(r,function(f,m){return sb(o,a,r,f,m,i)},!0),r;if(a.A!==o)return r;if(!a.P)return tS(o,a.t,!0),a.t;if(!a.I){a.I=!0,a.A._--;var h=4===a.i||5===a.i?a.o=PT(a.k):a.o;jc(3===a.i?new Set(h):h,function(f,m){return sb(o,a,h,f,m,i)}),tS(o,h,!1),i&&o.u&&vh("Patches").R(a,i,o.u,o.s)}return a.o}function sb(o,r,i,a,h,f){if(Rc(h)){var m=qM(o,h,f&&r&&3!==r.i&&!Ud(r.D,a)?f.concat(a):void 0);if(ib(i,a,m),!Rc(m))return;o.m=!1}if(yh(h)&&!IT(h)){if(!o.h.F&&o._<1)return;qM(o,h),r&&r.A.l||tS(o,h)}}function tS(o,r,i){void 0===i&&(i=!1),o.h.F&&o.m&&NT(r,i)}function LT(o,r){var i=o[Ae];return(i?Jr(i):o)[r]}function ab(o,r){if(r in o)for(var i=Object.getPrototypeOf(o);i;){var a=Object.getOwnPropertyDescriptor(i,r);if(a)return a;i=Object.getPrototypeOf(i)}}function oa(o){o.P||(o.P=!0,o.l&&oa(o.l))}function FT(o){o.o||(o.o=PT(o.t))}function Dx(o,r,i){var a=JM(r)?vh("MapSet").N(r,i):ZM(r)?vh("MapSet").T(r,i):o.g?function(h,f){var m=Array.isArray(h),v={i:m?1:0,A:f?f.A:Sx(),P:!1,I:!1,D:{},l:f,t:h,k:null,o:null,j:null,C:!1},x=v,S=Ex;m&&(x=[v],S=Px);var T=Proxy.revocable(x,S),N=T.revoke,F=T.proxy;return v.k=F,v.j=N,F}(r,i):vh("ES5").J(r,i);return(i?i.A:Sx()).p.push(a),a}function lb(o,r){switch(r){case 2:return new Map(o);case 3:return Array.from(o)}return PT(o)}var ub,_x,RT=typeof Symbol<"u"&&"symbol"==typeof Symbol("x"),PH=typeof Map<"u",NH=typeof Set<"u",hb=typeof Proxy<"u"&&void 0!==Proxy.revocable&&typeof Reflect<"u",jT=RT?Symbol.for("immer-nothing"):((ub={})["immer-nothing"]=!0,ub),Tx=RT?Symbol.for("immer-draftable"):"__$immer_draftable",Ae=RT?Symbol.for("immer-state"):"__$immer_state",IH=(typeof Symbol<"u"&&Symbol,""+Object.prototype.constructor),mv=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(o){return Object.getOwnPropertyNames(o).concat(Object.getOwnPropertySymbols(o))}:Object.getOwnPropertyNames,cb=Object.getOwnPropertyDescriptors||function(o){var r={};return mv(o).forEach(function(i){r[i]=Object.getOwnPropertyDescriptor(o,i)}),r},VT={},Ex={get:function(o,r){if(r===Ae)return o;var h,v,x,i=Jr(o);if(!Ud(i,r))return h=o,(x=ab(i,r))?"value"in x?x.value:null===(v=x.get)||void 0===v?void 0:v.call(h.k):void 0;var a=i[r];return o.I||!yh(a)?a:a===LT(o.t,r)?(FT(o),o.o[r]=Dx(o.A.h,a,o)):a},has:function(o,r){return r in Jr(o)},ownKeys:function(o){return Reflect.ownKeys(Jr(o))},set:function(o,r,i){var a=ab(Jr(o),r);if(a?.set)return a.set.call(o.k,i),!0;if(!o.P){var h=LT(Jr(o),r),f=h?.[Ae];if(f&&f.t===i)return o.o[r]=i,o.D[r]=!1,!0;if(function rb(o,r){return o===r?0!==o||1/o==1/r:o!=o&&r!=r}(i,h)&&(void 0!==i||Ud(o.t,r)))return!0;FT(o),oa(o)}return o.o[r]===i&&"number"!=typeof i&&(void 0!==i||r in o.o)||(o.o[r]=i,o.D[r]=!0,!0)},deleteProperty:function(o,r){return void 0!==LT(o.t,r)||r in o.t?(o.D[r]=!1,FT(o),oa(o)):delete o.D[r],o.o&&delete o.o[r],!0},getOwnPropertyDescriptor:function(o,r){var i=Jr(o),a=Reflect.getOwnPropertyDescriptor(i,r);return a&&{writable:!0,configurable:1!==o.i||"length"!==r,enumerable:a.enumerable,value:i[r]}},defineProperty:function(){Xr(11)},getPrototypeOf:function(o){return Object.getPrototypeOf(o.t)},setPrototypeOf:function(){Xr(12)}},Px={};jc(Ex,function(o,r){Px[o]=function(){return arguments[0]=arguments[0][0],r.apply(this,arguments)}}),Px.deleteProperty=function(o,r){return Px.set.call(this,o,r,void 0)},Px.set=function(o,r,i){return Ex.set.call(this,o[0],r,i,o[0])};var Aa=new(function(){function o(i){var a=this;this.g=hb,this.F=!0,this.produce=function(h,f,m){if("function"==typeof h&&"function"!=typeof f){var v=f;f=h;var x=a;return function(W){var it=this;void 0===W&&(W=v);for(var rt=arguments.length,ft=Array(rt>1?rt-1:0),at=1;at<rt;at++)ft[at-1]=arguments[at];return x.produce(W,function(Tt){var Pe;return(Pe=f).call.apply(Pe,[it,Tt].concat(ft))})}}var S;if("function"!=typeof f&&Xr(6),void 0!==m&&"function"!=typeof m&&Xr(7),yh(h)){var T=ob(a),N=Dx(a,h,void 0),F=!0;try{S=f(N),F=!1}finally{F?QM(T):bT(T)}return typeof Promise<"u"&&S instanceof Promise?S.then(function(W){return kT(T,m),OT(W,T)},function(W){throw QM(T),W}):(kT(T,m),OT(S,T))}if(!h||"object"!=typeof h){if(void 0===(S=f(h))&&(S=h),S===jT&&(S=void 0),a.F&&NT(S,!0),m){var j=[],B=[];vh("Patches").M(h,S,j,B),m(j,B)}return S}Xr(21,h)},this.produceWithPatches=function(h,f){if("function"==typeof h)return function(S){for(var T=arguments.length,N=Array(T>1?T-1:0),F=1;F<T;F++)N[F-1]=arguments[F];return a.produceWithPatches(S,function(j){return h.apply(void 0,[j].concat(N))})};var m,v,x=a.produce(h,f,function(S,T){m=S,v=T});return typeof Promise<"u"&&x instanceof Promise?x.then(function(S){return[S,m,v]}):[x,m,v]},"boolean"==typeof i?.useProxies&&this.setUseProxies(i.useProxies),"boolean"==typeof i?.autoFreeze&&this.setAutoFreeze(i.autoFreeze)}var r=o.prototype;return r.createDraft=function(i){yh(i)||Xr(8),Rc(i)&&(i=function DH(o){return Rc(o)||Xr(22,o),function r(i){if(!yh(i))return i;var a,h=i[Ae],f=Bd(i);if(h){if(!h.P&&(h.i<4||!vh("ES5").K(h)))return h.t;h.I=!0,a=lb(i,f),h.I=!1}else a=lb(i,f);return jc(a,function(m,v){h&&function XM(o,r){return 2===Bd(o)?o.get(r):o[r]}(h.t,m)===v||ib(a,m,r(v))}),3===f?new Set(a):a}(o)}(i));var a=ob(this),h=Dx(this,i,void 0);return h[Ae].C=!0,bT(a),h},r.finishDraft=function(i,a){var f=(i&&i[Ae]).A;return kT(f,a),OT(void 0,f)},r.setAutoFreeze=function(i){this.F=i},r.setUseProxies=function(i){i&&!hb&&Xr(20),this.g=i},r.applyPatches=function(i,a){var h;for(h=a.length-1;h>=0;h--){var f=a[h];if(0===f.path.length&&"replace"===f.op){i=f.value;break}}h>-1&&(a=a.slice(h+1));var m=vh("Patches").$;return Rc(i)?m(i,a):this.produce(i,function(v){return m(v,a)})},o}()),kH=Aa.produce;Aa.produceWithPatches.bind(Aa),Aa.setAutoFreeze.bind(Aa),Aa.setUseProxies.bind(Aa),Aa.applyPatches.bind(Aa),Aa.createDraft.bind(Aa),Aa.finishDraft.bind(Aa);const fb=kH;let bH=(()=>{class o{static syncNodeData(i,a,h){if(!i||!i.modifiedNodeData&&!i.insertedNodeKeys&&!i.removedNodeKeys)return a;const f=new rr.D5,m=new Map;return a.forEach((x,S)=>{const T=h?h.getKeyForNodeData(x):x.key;m.set(T,S)}),fb(a,x=>{if(i.modifiedNodeData&&i.modifiedNodeData.forEach(S=>{const T=h?h.getKeyForNodeData(S):S.key;f.set(T,S);const N=m.get(T);void 0!==N&&N>=0&&(x[N]=S)}),i.insertedNodeKeys&&i.insertedNodeKeys.forEach(S=>{const T=f.get(S);T&&!m.has(S)&&x.push(T)}),i.removedNodeKeys){const S=i.removedNodeKeys.map(T=>m.get(T)).sort();for(let T=S.length-1;T>=0;T--)x.splice(S[T],1)}})}static syncLinkData(i,a,h){if(!i||!i.modifiedLinkData&&!i.insertedLinkKeys&&!i.removedLinkKeys)return a;const f=new rr.D5,m=new Map;return a.forEach((v,x)=>{const S=h?h.getKeyForLinkData(v):v.key;m.set(S,x)}),fb(a,v=>{if(i.modifiedLinkData&&i.modifiedLinkData.forEach(x=>{const S=h?h.getKeyForLinkData(x):x.key;f.set(S,x);const T=m.get(S);void 0!==T&&T>=0&&(v[T]=x)}),i.insertedLinkKeys&&i.insertedLinkKeys.forEach(x=>{const S=f.get(x);S&&!m.has(x)&&v.push(S)}),i.removedLinkKeys){const x=i.removedLinkKeys.map(S=>m.get(S)).sort();for(let S=x.length-1;S>=0;S--)v.splice(x[S],1)}})}static syncModelData(i,a){return i&&i.modelData?i.modelData?i.modelData:void 0:a}}return o.\u0275fac=function(i){return new(i||o)},o.\u0275prov=A({token:o,factory:o.\u0275fac}),o})(),OH=(()=>{class o{}return o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=ci({type:o}),o.\u0275inj=Xn({providers:[bH]}),o})();function db(o){return new dt(3e3,!1)}function g3(){return typeof window<"u"&&typeof window.document<"u"}function BT(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function Hd(o){switch(o.length){case 0:return new vx;case 1:return o[0];default:return new zA(o)}}function pb(o,r,i,a,h=new Map,f=new Map){const m=[],v=[];let x=-1,S=null;if(a.forEach(T=>{const N=T.get("offset"),F=N==x,j=F&&S||new Map;T.forEach((B,W)=>{let it=W,rt=B;if("offset"!==W)switch(it=r.normalizePropertyName(it,m),rt){case"!":rt=h.get(W);break;case Fc:rt=f.get(W);break;default:rt=r.normalizeStyleValue(W,it,rt,m)}j.set(it,rt)}),F||v.push(j),S=j,x=N}),m.length)throw function i3(o){return new dt(3502,!1)}();return v}function UT(o,r,i,a){switch(r){case"start":o.onStart(()=>a(i&&HT(i,"start",o)));break;case"done":o.onDone(()=>a(i&&HT(i,"done",o)));break;case"destroy":o.onDestroy(()=>a(i&&HT(i,"destroy",o)))}}function HT(o,r,i){const f=zT(o.element,o.triggerName,o.fromState,o.toState,r||o.phaseName,i.totalTime??o.totalTime,!!i.disabled),m=o._data;return null!=m&&(f._data=m),f}function zT(o,r,i,a,h="",f=0,m){return{element:o,triggerName:r,fromState:i,toState:a,phaseName:h,totalTime:f,disabled:!!m}}function ka(o,r,i){let a=o.get(r);return a||o.set(r,a=i),a}function gb(o){const r=o.indexOf(":");return[o.substring(1,r),o.slice(r+1)]}let GT=(o,r)=>!1,mb=(o,r,i)=>[],yb=null;function $T(o){const r=o.parentNode||o.host;return r===yb?null:r}(BT()||typeof Element<"u")&&(g3()?(yb=(()=>document.documentElement)(),GT=(o,r)=>{for(;r;){if(r===o)return!0;r=$T(r)}return!1}):GT=(o,r)=>o.contains(r),mb=(o,r,i)=>{if(i)return Array.from(o.querySelectorAll(r));const a=o.querySelector(r);return a?[a]:[]});let Hg=null,vb=!1;const wb=GT,xb=mb;let Cb=(()=>{class o{validateStyleProperty(i){return function y3(o){Hg||(Hg=function v3(){return typeof document<"u"?document.body:null}()||{},vb=!!Hg.style&&"WebkitAppearance"in Hg.style);let r=!0;return Hg.style&&!function m3(o){return"ebkit"==o.substring(1,6)}(o)&&(r=o in Hg.style,!r&&vb&&(r="Webkit"+o.charAt(0).toUpperCase()+o.slice(1)in Hg.style)),r}(i)}matchesElement(i,a){return!1}containsElement(i,a){return wb(i,a)}getParentElement(i){return $T(i)}query(i,a,h){return xb(i,a,h)}computeStyle(i,a,h){return h||""}animate(i,a,h,f,m,v=[],x){return new vx(h,f)}}return o.\u0275fac=function(i){return new(i||o)},o.\u0275prov=A({token:o,factory:o.\u0275fac}),o})(),WT=(()=>{class o{}return o.NOOP=new Cb,o})();const KT="ng-enter",nS="ng-leave",iS="ng-trigger",rS=".ng-trigger",Sb="ng-animating",YT=".ng-animating";function Vc(o){if("number"==typeof o)return o;const r=o.match(/^(-?[\.\d]+)(m?s)/);return!r||r.length<2?0:XT(parseFloat(r[1]),r[2])}function XT(o,r){return"s"===r?1e3*o:o}function oS(o,r,i){return o.hasOwnProperty("duration")?o:function C3(o,r,i){let h,f=0,m="";if("string"==typeof o){const v=o.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===v)return r.push(db()),{duration:0,delay:0,easing:""};h=XT(parseFloat(v[1]),v[2]);const x=v[3];null!=x&&(f=XT(parseFloat(x),v[4]));const S=v[5];S&&(m=S)}else h=o;if(!i){let v=!1,x=r.length;h<0&&(r.push(function LH(){return new dt(3100,!1)}()),v=!0),f<0&&(r.push(function FH(){return new dt(3101,!1)}()),v=!0),v&&r.splice(x,0,db())}return{duration:h,delay:f,easing:m}}(o,r,i)}function Nx(o,r={}){return Object.keys(o).forEach(i=>{r[i]=o[i]}),r}function Db(o){const r=new Map;return Object.keys(o).forEach(i=>{r.set(i,o[i])}),r}function zd(o,r=new Map,i){if(i)for(let[a,h]of i)r.set(a,h);for(let[a,h]of o)r.set(a,h);return r}function Tb(o,r,i){return i?r+":"+i+";":""}function Eb(o){let r="";for(let i=0;i<o.style.length;i++){const a=o.style.item(i);r+=Tb(0,a,o.style.getPropertyValue(a))}for(const i in o.style)o.style.hasOwnProperty(i)&&!i.startsWith("_")&&(r+=Tb(0,_3(i),o.style[i]));o.setAttribute("style",r)}function wh(o,r,i){o.style&&(r.forEach((a,h)=>{const f=ZT(h);i&&!i.has(h)&&i.set(h,o.style[f]),o.style[f]=a}),BT()&&Eb(o))}function zg(o,r){o.style&&(r.forEach((i,a)=>{const h=ZT(a);o.style[h]=""}),BT()&&Eb(o))}function Ix(o){return Array.isArray(o)?1==o.length?o[0]:UA(o):o}const JT=new RegExp("{{\\s*(.+?)\\s*}}","g");function Pb(o){let r=[];if("string"==typeof o){let i;for(;i=JT.exec(o);)r.push(i[1]);JT.lastIndex=0}return r}function Ax(o,r,i){const a=o.toString(),h=a.replace(JT,(f,m)=>{let v=r[m];return null==v&&(i.push(function jH(o){return new dt(3003,!1)}()),v=""),v.toString()});return h==a?o:h}function sS(o){const r=[];let i=o.next();for(;!i.done;)r.push(i.value),i=o.next();return r}const D3=/-+([a-z0-9])/g;function ZT(o){return o.replace(D3,(...r)=>r[1].toUpperCase())}function _3(o){return o.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function ba(o,r,i){switch(r.type){case 7:return o.visitTrigger(r,i);case 0:return o.visitState(r,i);case 1:return o.visitTransition(r,i);case 2:return o.visitSequence(r,i);case 3:return o.visitGroup(r,i);case 4:return o.visitAnimate(r,i);case 5:return o.visitKeyframes(r,i);case 6:return o.visitStyle(r,i);case 8:return o.visitReference(r,i);case 9:return o.visitAnimateChild(r,i);case 10:return o.visitAnimateRef(r,i);case 11:return o.visitQuery(r,i);case 12:return o.visitStagger(r,i);default:throw function VH(o){return new dt(3004,!1)}()}}function Nb(o,r){return window.getComputedStyle(o)[r]}function A3(o,r){const i=[];return"string"==typeof o?o.split(/\s*,\s*/).forEach(a=>function k3(o,r,i){if(":"==o[0]){const x=function b3(o,r){switch(o){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(i,a)=>parseFloat(a)>parseFloat(i);case":decrement":return(i,a)=>parseFloat(a)<parseFloat(i);default:return r.push(function qH(o){return new dt(3016,!1)}()),"* => *"}}(o,i);if("function"==typeof x)return void r.push(x);o=x}const a=o.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==a||a.length<4)return i.push(function QH(o){return new dt(3015,!1)}()),r;const h=a[1],f=a[2],m=a[3];r.push(Ib(h,m));"<"==f[0]&&!("*"==h&&"*"==m)&&r.push(Ib(m,h))}(a,i,r)):i.push(o),i}const hS=new Set(["true","1"]),cS=new Set(["false","0"]);function Ib(o,r){const i=hS.has(o)||cS.has(o),a=hS.has(r)||cS.has(r);return(h,f)=>{let m="*"==o||o==h,v="*"==r||r==f;return!m&&i&&"boolean"==typeof h&&(m=h?hS.has(o):cS.has(o)),!v&&a&&"boolean"==typeof f&&(v=f?hS.has(r):cS.has(r)),m&&v}}const O3=new RegExp("s*:selfs*,?","g");function QT(o,r,i,a){return new L3(o).build(r,i,a)}class L3{constructor(r){this._driver=r}build(r,i,a){const h=new j3(i);return this._resetContextStyleTimingState(h),ba(this,Ix(r),h)}_resetContextStyleTimingState(r){r.currentQuerySelector="",r.collectedStyles=new Map,r.collectedStyles.set("",new Map),r.currentTime=0}visitTrigger(r,i){let a=i.queryCount=0,h=i.depCount=0;const f=[],m=[];return"@"==r.name.charAt(0)&&i.errors.push(function UH(){return new dt(3006,!1)}()),r.definitions.forEach(v=>{if(this._resetContextStyleTimingState(i),0==v.type){const x=v,S=x.name;S.toString().split(/\s*,\s*/).forEach(T=>{x.name=T,f.push(this.visitState(x,i))}),x.name=S}else if(1==v.type){const x=this.visitTransition(v,i);a+=x.queryCount,h+=x.depCount,m.push(x)}else i.errors.push(function HH(){return new dt(3007,!1)}())}),{type:7,name:r.name,states:f,transitions:m,queryCount:a,depCount:h,options:null}}visitState(r,i){const a=this.visitStyle(r.styles,i),h=r.options&&r.options.params||null;if(a.containsDynamicStyles){const f=new Set,m=h||{};a.styles.forEach(v=>{v instanceof Map&&v.forEach(x=>{Pb(x).forEach(S=>{m.hasOwnProperty(S)||f.add(S)})})}),f.size&&(sS(f.values()),i.errors.push(function zH(o,r){return new dt(3008,!1)}()))}return{type:0,name:r.name,style:a,options:h?{params:h}:null}}visitTransition(r,i){i.queryCount=0,i.depCount=0;const a=ba(this,Ix(r.animation),i);return{type:1,matchers:A3(r.expr,i.errors),animation:a,queryCount:i.queryCount,depCount:i.depCount,options:Gg(r.options)}}visitSequence(r,i){return{type:2,steps:r.steps.map(a=>ba(this,a,i)),options:Gg(r.options)}}visitGroup(r,i){const a=i.currentTime;let h=0;const f=r.steps.map(m=>{i.currentTime=a;const v=ba(this,m,i);return h=Math.max(h,i.currentTime),v});return i.currentTime=h,{type:3,steps:f,options:Gg(r.options)}}visitAnimate(r,i){const a=function B3(o,r){if(o.hasOwnProperty("duration"))return o;if("number"==typeof o)return qT(oS(o,r).duration,0,"");const i=o;if(i.split(/\s+/).some(f=>"{"==f.charAt(0)&&"{"==f.charAt(1))){const f=qT(0,0,"");return f.dynamic=!0,f.strValue=i,f}const h=oS(i,r);return qT(h.duration,h.delay,h.easing)}(r.timings,i.errors);i.currentAnimateTimings=a;let h,f=r.styles?r.styles:yx({});if(5==f.type)h=this.visitKeyframes(f,i);else{let m=r.styles,v=!1;if(!m){v=!0;const S={};a.easing&&(S.easing=a.easing),m=yx(S)}i.currentTime+=a.duration+a.delay;const x=this.visitStyle(m,i);x.isEmptyStep=v,h=x}return i.currentAnimateTimings=null,{type:4,timings:a,style:h,options:null}}visitStyle(r,i){const a=this._makeStyleAst(r,i);return this._validateStyleAst(a,i),a}_makeStyleAst(r,i){const a=[],h=Array.isArray(r.styles)?r.styles:[r.styles];for(let v of h)"string"==typeof v?v===Fc?a.push(v):i.errors.push(new dt(3002,!1)):a.push(Db(v));let f=!1,m=null;return a.forEach(v=>{if(v instanceof Map&&(v.has("easing")&&(m=v.get("easing"),v.delete("easing")),!f))for(let x of v.values())if(x.toString().indexOf("{{")>=0){f=!0;break}}),{type:6,styles:a,easing:m,offset:r.offset,containsDynamicStyles:f,options:null}}_validateStyleAst(r,i){const a=i.currentAnimateTimings;let h=i.currentTime,f=i.currentTime;a&&f>0&&(f-=a.duration+a.delay),r.styles.forEach(m=>{"string"!=typeof m&&m.forEach((v,x)=>{const S=i.collectedStyles.get(i.currentQuerySelector),T=S.get(x);let N=!0;T&&(f!=h&&f>=T.startTime&&h<=T.endTime&&(i.errors.push(function $H(o,r,i,a,h){return new dt(3010,!1)}()),N=!1),f=T.startTime),N&&S.set(x,{startTime:f,endTime:h}),i.options&&function S3(o,r,i){const a=r.params||{},h=Pb(o);h.length&&h.forEach(f=>{a.hasOwnProperty(f)||i.push(function RH(o){return new dt(3001,!1)}())})}(v,i.options,i.errors)})})}visitKeyframes(r,i){const a={type:5,styles:[],options:null};if(!i.currentAnimateTimings)return i.errors.push(function WH(){return new dt(3011,!1)}()),a;let f=0;const m=[];let v=!1,x=!1,S=0;const T=r.steps.map(rt=>{const ft=this._makeStyleAst(rt,i);let at=null!=ft.offset?ft.offset:function V3(o){if("string"==typeof o)return null;let r=null;if(Array.isArray(o))o.forEach(i=>{if(i instanceof Map&&i.has("offset")){const a=i;r=parseFloat(a.get("offset")),a.delete("offset")}});else if(o instanceof Map&&o.has("offset")){const i=o;r=parseFloat(i.get("offset")),i.delete("offset")}return r}(ft.styles),Tt=0;return null!=at&&(f++,Tt=ft.offset=at),x=x||Tt<0||Tt>1,v=v||Tt<S,S=Tt,m.push(Tt),ft});x&&i.errors.push(function KH(){return new dt(3012,!1)}()),v&&i.errors.push(function YH(){return new dt(3200,!1)}());const N=r.steps.length;let F=0;f>0&&f<N?i.errors.push(function XH(){return new dt(3202,!1)}()):0==f&&(F=1/(N-1));const j=N-1,B=i.currentTime,W=i.currentAnimateTimings,it=W.duration;return T.forEach((rt,ft)=>{const at=F>0?ft==j?1:F*ft:m[ft],Tt=at*it;i.currentTime=B+W.delay+Tt,W.duration=Tt,this._validateStyleAst(rt,i),rt.offset=at,a.styles.push(rt)}),a}visitReference(r,i){return{type:8,animation:ba(this,Ix(r.animation),i),options:Gg(r.options)}}visitAnimateChild(r,i){return i.depCount++,{type:9,options:Gg(r.options)}}visitAnimateRef(r,i){return{type:10,animation:this.visitReference(r.animation,i),options:Gg(r.options)}}visitQuery(r,i){const a=i.currentQuerySelector,h=r.options||{};i.queryCount++,i.currentQuery=r;const[f,m]=function F3(o){const r=!!o.split(/\s*,\s*/).find(i=>":self"==i);return r&&(o=o.replace(O3,"")),o=o.replace(/@\*/g,rS).replace(/@\w+/g,i=>rS+"-"+i.slice(1)).replace(/:animating/g,YT),[o,r]}(r.selector);i.currentQuerySelector=a.length?a+" "+f:f,ka(i.collectedStyles,i.currentQuerySelector,new Map);const v=ba(this,Ix(r.animation),i);return i.currentQuery=null,i.currentQuerySelector=a,{type:11,selector:f,limit:h.limit||0,optional:!!h.optional,includeSelf:m,animation:v,originalSelector:r.selector,options:Gg(r.options)}}visitStagger(r,i){i.currentQuery||i.errors.push(function JH(){return new dt(3013,!1)}());const a="full"===r.timings?{duration:0,delay:0,easing:"full"}:oS(r.timings,i.errors,!0);return{type:12,animation:ba(this,Ix(r.animation),i),timings:a,options:null}}}class j3{constructor(r){this.errors=r,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Gg(o){return o?(o=Nx(o)).params&&(o.params=function R3(o){return o?Nx(o):null}(o.params)):o={},o}function qT(o,r,i){return{duration:o,delay:r,easing:i}}function tE(o,r,i,a,h,f,m=null,v=!1){return{type:1,element:o,keyframes:r,preStyleProps:i,postStyleProps:a,duration:h,delay:f,totalTime:h+f,easing:m,subTimeline:v}}class fS{constructor(){this._map=new Map}get(r){return this._map.get(r)||[]}append(r,i){let a=this._map.get(r);a||this._map.set(r,a=[]),a.push(...i)}has(r){return this._map.has(r)}clear(){this._map.clear()}}const z3=new RegExp(":enter","g"),$3=new RegExp(":leave","g");function eE(o,r,i,a,h,f=new Map,m=new Map,v,x,S=[]){return(new W3).buildKeyframes(o,r,i,a,h,f,m,v,x,S)}class W3{buildKeyframes(r,i,a,h,f,m,v,x,S,T=[]){S=S||new fS;const N=new nE(r,i,S,h,f,T,[]);N.options=x;const F=x.delay?Vc(x.delay):0;N.currentTimeline.delayNextStep(F),N.currentTimeline.setStyles([m],null,N.errors,x),ba(this,a,N);const j=N.timelines.filter(B=>B.containsAnimation());if(j.length&&v.size){let B;for(let W=j.length-1;W>=0;W--){const it=j[W];if(it.element===i){B=it;break}}B&&!B.allowOnlyTimelineStyles()&&B.setStyles([v],null,N.errors,x)}return j.length?j.map(B=>B.buildKeyframes()):[tE(i,[],[],[],0,F,"",!1)]}visitTrigger(r,i){}visitState(r,i){}visitTransition(r,i){}visitAnimateChild(r,i){const a=i.subInstructions.get(i.element);if(a){const h=i.createSubContext(r.options),f=i.currentTimeline.currentTime,m=this._visitSubInstructions(a,h,h.options);f!=m&&i.transformIntoNewTimeline(m)}i.previousNode=r}visitAnimateRef(r,i){const a=i.createSubContext(r.options);a.transformIntoNewTimeline(),this._applyAnimationRefDelays([r.options,r.animation.options],i,a),this.visitReference(r.animation,a),i.transformIntoNewTimeline(a.currentTimeline.currentTime),i.previousNode=r}_applyAnimationRefDelays(r,i,a){for(const h of r){const f=h?.delay;if(f){const m="number"==typeof f?f:Vc(Ax(f,h?.params??{},i.errors));a.delayNextStep(m)}}}_visitSubInstructions(r,i,a){let f=i.currentTimeline.currentTime;const m=null!=a.duration?Vc(a.duration):null,v=null!=a.delay?Vc(a.delay):null;return 0!==m&&r.forEach(x=>{const S=i.appendInstructionToTimeline(x,m,v);f=Math.max(f,S.duration+S.delay)}),f}visitReference(r,i){i.updateOptions(r.options,!0),ba(this,r.animation,i),i.previousNode=r}visitSequence(r,i){const a=i.subContextCount;let h=i;const f=r.options;if(f&&(f.params||f.delay)&&(h=i.createSubContext(f),h.transformIntoNewTimeline(),null!=f.delay)){6==h.previousNode.type&&(h.currentTimeline.snapshotCurrentStyles(),h.previousNode=dS);const m=Vc(f.delay);h.delayNextStep(m)}r.steps.length&&(r.steps.forEach(m=>ba(this,m,h)),h.currentTimeline.applyStylesToKeyframe(),h.subContextCount>a&&h.transformIntoNewTimeline()),i.previousNode=r}visitGroup(r,i){const a=[];let h=i.currentTimeline.currentTime;const f=r.options&&r.options.delay?Vc(r.options.delay):0;r.steps.forEach(m=>{const v=i.createSubContext(r.options);f&&v.delayNextStep(f),ba(this,m,v),h=Math.max(h,v.currentTimeline.currentTime),a.push(v.currentTimeline)}),a.forEach(m=>i.currentTimeline.mergeTimelineCollectedStyles(m)),i.transformIntoNewTimeline(h),i.previousNode=r}_visitTiming(r,i){if(r.dynamic){const a=r.strValue;return oS(i.params?Ax(a,i.params,i.errors):a,i.errors)}return{duration:r.duration,delay:r.delay,easing:r.easing}}visitAnimate(r,i){const a=i.currentAnimateTimings=this._visitTiming(r.timings,i),h=i.currentTimeline;a.delay&&(i.incrementTime(a.delay),h.snapshotCurrentStyles());const f=r.style;5==f.type?this.visitKeyframes(f,i):(i.incrementTime(a.duration),this.visitStyle(f,i),h.applyStylesToKeyframe()),i.currentAnimateTimings=null,i.previousNode=r}visitStyle(r,i){const a=i.currentTimeline,h=i.currentAnimateTimings;!h&&a.hasCurrentStyleProperties()&&a.forwardFrame();const f=h&&h.easing||r.easing;r.isEmptyStep?a.applyEmptyStep(f):a.setStyles(r.styles,f,i.errors,i.options),i.previousNode=r}visitKeyframes(r,i){const a=i.currentAnimateTimings,h=i.currentTimeline.duration,f=a.duration,v=i.createSubContext().currentTimeline;v.easing=a.easing,r.styles.forEach(x=>{v.forwardTime((x.offset||0)*f),v.setStyles(x.styles,x.easing,i.errors,i.options),v.applyStylesToKeyframe()}),i.currentTimeline.mergeTimelineCollectedStyles(v),i.transformIntoNewTimeline(h+f),i.previousNode=r}visitQuery(r,i){const a=i.currentTimeline.currentTime,h=r.options||{},f=h.delay?Vc(h.delay):0;f&&(6===i.previousNode.type||0==a&&i.currentTimeline.hasCurrentStyleProperties())&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=dS);let m=a;const v=i.invokeQuery(r.selector,r.originalSelector,r.limit,r.includeSelf,!!h.optional,i.errors);i.currentQueryTotal=v.length;let x=null;v.forEach((S,T)=>{i.currentQueryIndex=T;const N=i.createSubContext(r.options,S);f&&N.delayNextStep(f),S===i.element&&(x=N.currentTimeline),ba(this,r.animation,N),N.currentTimeline.applyStylesToKeyframe(),m=Math.max(m,N.currentTimeline.currentTime)}),i.currentQueryIndex=0,i.currentQueryTotal=0,i.transformIntoNewTimeline(m),x&&(i.currentTimeline.mergeTimelineCollectedStyles(x),i.currentTimeline.snapshotCurrentStyles()),i.previousNode=r}visitStagger(r,i){const a=i.parentContext,h=i.currentTimeline,f=r.timings,m=Math.abs(f.duration),v=m*(i.currentQueryTotal-1);let x=m*i.currentQueryIndex;switch(f.duration<0?"reverse":f.easing){case"reverse":x=v-x;break;case"full":x=a.currentStaggerTime}const T=i.currentTimeline;x&&T.delayNextStep(x);const N=T.currentTime;ba(this,r.animation,i),i.previousNode=r,a.currentStaggerTime=h.currentTime-N+(h.startTime-a.currentTimeline.startTime)}}const dS={};class nE{constructor(r,i,a,h,f,m,v,x){this._driver=r,this.element=i,this.subInstructions=a,this._enterClassName=h,this._leaveClassName=f,this.errors=m,this.timelines=v,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=dS,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=x||new pS(this._driver,i,0),v.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(r,i){if(!r)return;const a=r;let h=this.options;null!=a.duration&&(h.duration=Vc(a.duration)),null!=a.delay&&(h.delay=Vc(a.delay));const f=a.params;if(f){let m=h.params;m||(m=this.options.params={}),Object.keys(f).forEach(v=>{(!i||!m.hasOwnProperty(v))&&(m[v]=Ax(f[v],m,this.errors))})}}_copyOptions(){const r={};if(this.options){const i=this.options.params;if(i){const a=r.params={};Object.keys(i).forEach(h=>{a[h]=i[h]})}}return r}createSubContext(r=null,i,a){const h=i||this.element,f=new nE(this._driver,h,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(h,a||0));return f.previousNode=this.previousNode,f.currentAnimateTimings=this.currentAnimateTimings,f.options=this._copyOptions(),f.updateOptions(r),f.currentQueryIndex=this.currentQueryIndex,f.currentQueryTotal=this.currentQueryTotal,f.parentContext=this,this.subContextCount++,f}transformIntoNewTimeline(r){return this.previousNode=dS,this.currentTimeline=this.currentTimeline.fork(this.element,r),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(r,i,a){const h={duration:i??r.duration,delay:this.currentTimeline.currentTime+(a??0)+r.delay,easing:""},f=new K3(this._driver,r.element,r.keyframes,r.preStyleProps,r.postStyleProps,h,r.stretchStartingKeyframe);return this.timelines.push(f),h}incrementTime(r){this.currentTimeline.forwardTime(this.currentTimeline.duration+r)}delayNextStep(r){r>0&&this.currentTimeline.delayNextStep(r)}invokeQuery(r,i,a,h,f,m){let v=[];if(h&&v.push(this.element),r.length>0){r=(r=r.replace(z3,"."+this._enterClassName)).replace($3,"."+this._leaveClassName);let S=this._driver.query(this.element,r,1!=a);0!==a&&(S=a<0?S.slice(S.length+a,S.length):S.slice(0,a)),v.push(...S)}return!f&&0==v.length&&m.push(function ZH(o){return new dt(3014,!1)}()),v}}class pS{constructor(r,i,a,h){this._driver=r,this.element=i,this.startTime=a,this._elementTimelineStylesLookup=h,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(i),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(i,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(r){const i=1===this._keyframes.size&&this._pendingStyles.size;this.duration||i?(this.forwardTime(this.currentTime+r),i&&this.snapshotCurrentStyles()):this.startTime+=r}fork(r,i){return this.applyStylesToKeyframe(),new pS(this._driver,r,i||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(r){this.applyStylesToKeyframe(),this.duration=r,this._loadKeyframe()}_updateStyle(r,i){this._localTimelineStyles.set(r,i),this._globalTimelineStyles.set(r,i),this._styleSummary.set(r,{time:this.currentTime,value:i})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(r){r&&this._previousKeyframe.set("easing",r);for(let[i,a]of this._globalTimelineStyles)this._backFill.set(i,a||Fc),this._currentKeyframe.set(i,Fc);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(r,i,a,h){i&&this._previousKeyframe.set("easing",i);const f=h&&h.params||{},m=function Y3(o,r){const i=new Map;let a;return o.forEach(h=>{if("*"===h){a=a||r.keys();for(let f of a)i.set(f,Fc)}else zd(h,i)}),i}(r,this._globalTimelineStyles);for(let[v,x]of m){const S=Ax(x,f,a);this._pendingStyles.set(v,S),this._localTimelineStyles.has(v)||this._backFill.set(v,this._globalTimelineStyles.get(v)??Fc),this._updateStyle(v,S)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((r,i)=>{this._currentKeyframe.set(i,r)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((r,i)=>{this._currentKeyframe.has(i)||this._currentKeyframe.set(i,r)}))}snapshotCurrentStyles(){for(let[r,i]of this._localTimelineStyles)this._pendingStyles.set(r,i),this._updateStyle(r,i)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const r=[];for(let i in this._currentKeyframe)r.push(i);return r}mergeTimelineCollectedStyles(r){r._styleSummary.forEach((i,a)=>{const h=this._styleSummary.get(a);(!h||i.time>h.time)&&this._updateStyle(a,i.value)})}buildKeyframes(){this.applyStylesToKeyframe();const r=new Set,i=new Set,a=1===this._keyframes.size&&0===this.duration;let h=[];this._keyframes.forEach((v,x)=>{const S=zd(v,new Map,this._backFill);S.forEach((T,N)=>{"!"===T?r.add(N):T===Fc&&i.add(N)}),a||S.set("offset",x/this.duration),h.push(S)});const f=r.size?sS(r.values()):[],m=i.size?sS(i.values()):[];if(a){const v=h[0],x=new Map(v);v.set("offset",0),x.set("offset",1),h=[v,x]}return tE(this.element,h,f,m,this.duration,this.startTime,this.easing,!1)}}class K3 extends pS{constructor(r,i,a,h,f,m,v=!1){super(r,i,m.delay),this.keyframes=a,this.preStyleProps=h,this.postStyleProps=f,this._stretchStartingKeyframe=v,this.timings={duration:m.duration,delay:m.delay,easing:m.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let r=this.keyframes,{delay:i,duration:a,easing:h}=this.timings;if(this._stretchStartingKeyframe&&i){const f=[],m=a+i,v=i/m,x=zd(r[0]);x.set("offset",0),f.push(x);const S=zd(r[0]);S.set("offset",bb(v)),f.push(S);const T=r.length-1;for(let N=1;N<=T;N++){let F=zd(r[N]);const j=F.get("offset");F.set("offset",bb((i+j*a)/m)),f.push(F)}a=m,i=0,h="",r=f}return tE(this.element,r,this.preStyleProps,this.postStyleProps,a,i,h,!0)}}function bb(o,r=3){const i=Math.pow(10,r-1);return Math.round(o*i)/i}class iE{}const X3=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class J3 extends iE{normalizePropertyName(r,i){return ZT(r)}normalizeStyleValue(r,i,a,h){let f="";const m=a.toString().trim();if(X3.has(i)&&0!==a&&"0"!==a)if("number"==typeof a)f="px";else{const v=a.match(/^[+-]?[\d\.]+([a-z]*)$/);v&&0==v[1].length&&h.push(function BH(o,r){return new dt(3005,!1)}())}return m+f}}function Ob(o,r,i,a,h,f,m,v,x,S,T,N,F){return{type:0,element:o,triggerName:r,isRemovalTransition:h,fromState:i,fromStyles:f,toState:a,toStyles:m,timelines:v,queriedElements:x,preStyleProps:S,postStyleProps:T,totalTime:N,errors:F}}const rE={};class Lb{constructor(r,i,a){this._triggerName=r,this.ast=i,this._stateStyles=a}match(r,i,a,h){return function Z3(o,r,i,a,h){return o.some(f=>f(r,i,a,h))}(this.ast.matchers,r,i,a,h)}buildStyles(r,i,a){let h=this._stateStyles.get("*");return void 0!==r&&(h=this._stateStyles.get(r?.toString())||h),h?h.buildStyles(i,a):new Map}build(r,i,a,h,f,m,v,x,S,T){const N=[],F=this.ast.options&&this.ast.options.params||rE,B=this.buildStyles(a,v&&v.params||rE,N),W=x&&x.params||rE,it=this.buildStyles(h,W,N),rt=new Set,ft=new Map,at=new Map,Tt="void"===h,Pe={params:Q3(W,F),delay:this.ast.options?.delay},sn=T?[]:eE(r,i,this.ast.animation,f,m,B,it,Pe,S,N);let zi=0;if(sn.forEach(La=>{zi=Math.max(La.duration+La.delay,zi)}),N.length)return Ob(i,this._triggerName,a,h,Tt,B,it,[],[],ft,at,zi,N);sn.forEach(La=>{const Fa=La.element,vv=ka(ft,Fa,new Set);La.preStyleProps.forEach(yu=>vv.add(yu));const Bc=ka(at,Fa,new Set);La.postStyleProps.forEach(yu=>Bc.add(yu)),Fa!==i&&rt.add(Fa)});const Oa=sS(rt.values());return Ob(i,this._triggerName,a,h,Tt,B,it,sn,Oa,ft,at,zi)}}function Q3(o,r){const i=Nx(r);for(const a in o)o.hasOwnProperty(a)&&null!=o[a]&&(i[a]=o[a]);return i}class q3{constructor(r,i,a){this.styles=r,this.defaultParams=i,this.normalizer=a}buildStyles(r,i){const a=new Map,h=Nx(this.defaultParams);return Object.keys(r).forEach(f=>{const m=r[f];null!==m&&(h[f]=m)}),this.styles.styles.forEach(f=>{"string"!=typeof f&&f.forEach((m,v)=>{m&&(m=Ax(m,h,i));const x=this.normalizer.normalizePropertyName(v,i);m=this.normalizer.normalizeStyleValue(v,x,m,i),a.set(x,m)})}),a}}class ez{constructor(r,i,a){this.name=r,this.ast=i,this._normalizer=a,this.transitionFactories=[],this.states=new Map,i.states.forEach(h=>{this.states.set(h.name,new q3(h.style,h.options&&h.options.params||{},a))}),Fb(this.states,"true","1"),Fb(this.states,"false","0"),i.transitions.forEach(h=>{this.transitionFactories.push(new Lb(r,h,this.states))}),this.fallbackTransition=function nz(o,r,i){return new Lb(o,{type:1,animation:{type:2,steps:[],options:null},matchers:[(m,v)=>!0],options:null,queryCount:0,depCount:0},r)}(r,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(r,i,a,h){return this.transitionFactories.find(m=>m.match(r,i,a,h))||null}matchStyles(r,i,a){return this.fallbackTransition.buildStyles(r,i,a)}}function Fb(o,r,i){o.has(r)?o.has(i)||o.set(i,o.get(r)):o.has(i)&&o.set(r,o.get(i))}const iz=new fS;class rz{constructor(r,i,a){this.bodyNode=r,this._driver=i,this._normalizer=a,this._animations=new Map,this._playersById=new Map,this.players=[]}register(r,i){const a=[],f=QT(this._driver,i,a,[]);if(a.length)throw function r3(o){return new dt(3503,!1)}();this._animations.set(r,f)}_buildPlayer(r,i,a){const h=r.element,f=pb(0,this._normalizer,0,r.keyframes,i,a);return this._driver.animate(h,f,r.duration,r.delay,r.easing,[],!0)}create(r,i,a={}){const h=[],f=this._animations.get(r);let m;const v=new Map;if(f?(m=eE(this._driver,i,f,KT,nS,new Map,new Map,a,iz,h),m.forEach(T=>{const N=ka(v,T.element,new Map);T.postStyleProps.forEach(F=>N.set(F,null))})):(h.push(function o3(){return new dt(3300,!1)}()),m=[]),h.length)throw function s3(o){return new dt(3504,!1)}();v.forEach((T,N)=>{T.forEach((F,j)=>{T.set(j,this._driver.computeStyle(N,j,Fc))})});const S=Hd(m.map(T=>{const N=v.get(T.element);return this._buildPlayer(T,new Map,N)}));return this._playersById.set(r,S),S.onDestroy(()=>this.destroy(r)),this.players.push(S),S}destroy(r){const i=this._getPlayer(r);i.destroy(),this._playersById.delete(r);const a=this.players.indexOf(i);a>=0&&this.players.splice(a,1)}_getPlayer(r){const i=this._playersById.get(r);if(!i)throw function a3(o){return new dt(3301,!1)}();return i}listen(r,i,a,h){const f=zT(i,"","","");return UT(this._getPlayer(r),a,f,h),()=>{}}command(r,i,a,h){if("register"==a)return void this.register(r,h[0]);if("create"==a)return void this.create(r,i,h[0]||{});const f=this._getPlayer(r);switch(a){case"play":f.play();break;case"pause":f.pause();break;case"reset":f.reset();break;case"restart":f.restart();break;case"finish":f.finish();break;case"init":f.init();break;case"setPosition":f.setPosition(parseFloat(h[0]));break;case"destroy":this.destroy(r)}}}const Rb="ng-animate-queued",oE="ng-animate-disabled",uz=[],jb={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},hz={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Dl="__ng_removed";class sE{constructor(r,i=""){this.namespaceId=i;const a=r&&r.hasOwnProperty("value");if(this.value=function pz(o){return o??null}(a?r.value:r),a){const f=Nx(r);delete f.value,this.options=f}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(r){const i=r.params;if(i){const a=this.options.params;Object.keys(i).forEach(h=>{null==a[h]&&(a[h]=i[h])})}}}const kx="void",aE=new sE(kx);class cz{constructor(r,i,a){this.id=r,this.hostElement=i,this._engine=a,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+r,_l(i,this._hostClassName)}listen(r,i,a,h){if(!this._triggers.has(i))throw function l3(o,r){return new dt(3302,!1)}();if(null==a||0==a.length)throw function u3(o){return new dt(3303,!1)}();if(!function gz(o){return"start"==o||"done"==o}(a))throw function h3(o,r){return new dt(3400,!1)}();const f=ka(this._elementListeners,r,[]),m={name:i,phase:a,callback:h};f.push(m);const v=ka(this._engine.statesByElement,r,new Map);return v.has(i)||(_l(r,iS),_l(r,iS+"-"+i),v.set(i,aE)),()=>{this._engine.afterFlush(()=>{const x=f.indexOf(m);x>=0&&f.splice(x,1),this._triggers.has(i)||v.delete(i)})}}register(r,i){return!this._triggers.has(r)&&(this._triggers.set(r,i),!0)}_getTrigger(r){const i=this._triggers.get(r);if(!i)throw function c3(o){return new dt(3401,!1)}();return i}trigger(r,i,a,h=!0){const f=this._getTrigger(i),m=new lE(this.id,i,r);let v=this._engine.statesByElement.get(r);v||(_l(r,iS),_l(r,iS+"-"+i),this._engine.statesByElement.set(r,v=new Map));let x=v.get(i);const S=new sE(a,this.id);if(!(a&&a.hasOwnProperty("value"))&&x&&S.absorbOptions(x.options),v.set(i,S),x||(x=aE),S.value!==kx&&x.value===S.value){if(!function vz(o,r){const i=Object.keys(o),a=Object.keys(r);if(i.length!=a.length)return!1;for(let h=0;h<i.length;h++){const f=i[h];if(!r.hasOwnProperty(f)||o[f]!==r[f])return!1}return!0}(x.params,S.params)){const W=[],it=f.matchStyles(x.value,x.params,W),rt=f.matchStyles(S.value,S.params,W);W.length?this._engine.reportError(W):this._engine.afterFlush(()=>{zg(r,it),wh(r,rt)})}return}const F=ka(this._engine.playersByElement,r,[]);F.forEach(W=>{W.namespaceId==this.id&&W.triggerName==i&&W.queued&&W.destroy()});let j=f.matchTransition(x.value,S.value,r,S.params),B=!1;if(!j){if(!h)return;j=f.fallbackTransition,B=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:r,triggerName:i,transition:j,fromState:x,toState:S,player:m,isFallbackTransition:B}),B||(_l(r,Rb),m.onStart(()=>{yv(r,Rb)})),m.onDone(()=>{let W=this.players.indexOf(m);W>=0&&this.players.splice(W,1);const it=this._engine.playersByElement.get(r);if(it){let rt=it.indexOf(m);rt>=0&&it.splice(rt,1)}}),this.players.push(m),F.push(m),m}deregister(r){this._triggers.delete(r),this._engine.statesByElement.forEach(i=>i.delete(r)),this._elementListeners.forEach((i,a)=>{this._elementListeners.set(a,i.filter(h=>h.name!=r))})}clearElementCache(r){this._engine.statesByElement.delete(r),this._elementListeners.delete(r);const i=this._engine.playersByElement.get(r);i&&(i.forEach(a=>a.destroy()),this._engine.playersByElement.delete(r))}_signalRemovalForInnerTriggers(r,i){const a=this._engine.driver.query(r,rS,!0);a.forEach(h=>{if(h[Dl])return;const f=this._engine.fetchNamespacesByElement(h);f.size?f.forEach(m=>m.triggerLeaveAnimation(h,i,!1,!0)):this.clearElementCache(h)}),this._engine.afterFlushAnimationsDone(()=>a.forEach(h=>this.clearElementCache(h)))}triggerLeaveAnimation(r,i,a,h){const f=this._engine.statesByElement.get(r),m=new Map;if(f){const v=[];if(f.forEach((x,S)=>{if(m.set(S,x.value),this._triggers.has(S)){const T=this.trigger(r,S,kx,h);T&&v.push(T)}}),v.length)return this._engine.markElementAsRemoved(this.id,r,!0,i,m),a&&Hd(v).onDone(()=>this._engine.processLeaveNode(r)),!0}return!1}prepareLeaveAnimationListeners(r){const i=this._elementListeners.get(r),a=this._engine.statesByElement.get(r);if(i&&a){const h=new Set;i.forEach(f=>{const m=f.name;if(h.has(m))return;h.add(m);const x=this._triggers.get(m).fallbackTransition,S=a.get(m)||aE,T=new sE(kx),N=new lE(this.id,m,r);this._engine.totalQueuedPlayers++,this._queue.push({element:r,triggerName:m,transition:x,fromState:S,toState:T,player:N,isFallbackTransition:!0})})}}removeNode(r,i){const a=this._engine;if(r.childElementCount&&this._signalRemovalForInnerTriggers(r,i),this.triggerLeaveAnimation(r,i,!0))return;let h=!1;if(a.totalAnimations){const f=a.players.length?a.playersByQueriedElement.get(r):[];if(f&&f.length)h=!0;else{let m=r;for(;m=m.parentNode;)if(a.statesByElement.get(m)){h=!0;break}}}if(this.prepareLeaveAnimationListeners(r),h)a.markElementAsRemoved(this.id,r,!1,i);else{const f=r[Dl];(!f||f===jb)&&(a.afterFlush(()=>this.clearElementCache(r)),a.destroyInnerAnimations(r),a._onRemovalComplete(r,i))}}insertNode(r,i){_l(r,this._hostClassName)}drainQueuedTransitions(r){const i=[];return this._queue.forEach(a=>{const h=a.player;if(h.destroyed)return;const f=a.element,m=this._elementListeners.get(f);m&&m.forEach(v=>{if(v.name==a.triggerName){const x=zT(f,a.triggerName,a.fromState.value,a.toState.value);x._data=r,UT(a.player,v.phase,x,v.callback)}}),h.markedForDestroy?this._engine.afterFlush(()=>{h.destroy()}):i.push(a)}),this._queue=[],i.sort((a,h)=>{const f=a.transition.ast.depCount,m=h.transition.ast.depCount;return 0==f||0==m?f-m:this._engine.driver.containsElement(a.element,h.element)?1:-1})}destroy(r){this.players.forEach(i=>i.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,r)}elementContainsData(r){let i=!1;return this._elementListeners.has(r)&&(i=!0),i=!!this._queue.find(a=>a.element===r)||i,i}}class fz{constructor(r,i,a){this.bodyNode=r,this.driver=i,this._normalizer=a,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(h,f)=>{}}_onRemovalComplete(r,i){this.onRemovalComplete(r,i)}get queuedPlayers(){const r=[];return this._namespaceList.forEach(i=>{i.players.forEach(a=>{a.queued&&r.push(a)})}),r}createNamespace(r,i){const a=new cz(r,i,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,i)?this._balanceNamespaceList(a,i):(this.newHostElements.set(i,a),this.collectEnterElement(i)),this._namespaceLookup[r]=a}_balanceNamespaceList(r,i){const a=this._namespaceList,h=this.namespacesByHostElement;if(a.length-1>=0){let m=!1,v=this.driver.getParentElement(i);for(;v;){const x=h.get(v);if(x){const S=a.indexOf(x);a.splice(S+1,0,r),m=!0;break}v=this.driver.getParentElement(v)}m||a.unshift(r)}else a.push(r);return h.set(i,r),r}register(r,i){let a=this._namespaceLookup[r];return a||(a=this.createNamespace(r,i)),a}registerTrigger(r,i,a){let h=this._namespaceLookup[r];h&&h.register(i,a)&&this.totalAnimations++}destroy(r,i){if(!r)return;const a=this._fetchNamespace(r);this.afterFlush(()=>{this.namespacesByHostElement.delete(a.hostElement),delete this._namespaceLookup[r];const h=this._namespaceList.indexOf(a);h>=0&&this._namespaceList.splice(h,1)}),this.afterFlushAnimationsDone(()=>a.destroy(i))}_fetchNamespace(r){return this._namespaceLookup[r]}fetchNamespacesByElement(r){const i=new Set,a=this.statesByElement.get(r);if(a)for(let h of a.values())if(h.namespaceId){const f=this._fetchNamespace(h.namespaceId);f&&i.add(f)}return i}trigger(r,i,a,h){if(gS(i)){const f=this._fetchNamespace(r);if(f)return f.trigger(i,a,h),!0}return!1}insertNode(r,i,a,h){if(!gS(i))return;const f=i[Dl];if(f&&f.setForRemoval){f.setForRemoval=!1,f.setForMove=!0;const m=this.collectedLeaveElements.indexOf(i);m>=0&&this.collectedLeaveElements.splice(m,1)}if(r){const m=this._fetchNamespace(r);m&&m.insertNode(i,a)}h&&this.collectEnterElement(i)}collectEnterElement(r){this.collectedEnterElements.push(r)}markElementAsDisabled(r,i){i?this.disabledNodes.has(r)||(this.disabledNodes.add(r),_l(r,oE)):this.disabledNodes.has(r)&&(this.disabledNodes.delete(r),yv(r,oE))}removeNode(r,i,a,h){if(gS(i)){const f=r?this._fetchNamespace(r):null;if(f?f.removeNode(i,h):this.markElementAsRemoved(r,i,!1,h),a){const m=this.namespacesByHostElement.get(i);m&&m.id!==r&&m.removeNode(i,h)}}else this._onRemovalComplete(i,h)}markElementAsRemoved(r,i,a,h,f){this.collectedLeaveElements.push(i),i[Dl]={namespaceId:r,setForRemoval:h,hasAnimation:a,removedBeforeQueried:!1,previousTriggersValues:f}}listen(r,i,a,h,f){return gS(i)?this._fetchNamespace(r).listen(i,a,h,f):()=>{}}_buildInstruction(r,i,a,h,f){return r.transition.build(this.driver,r.element,r.fromState.value,r.toState.value,a,h,r.fromState.options,r.toState.options,i,f)}destroyInnerAnimations(r){let i=this.driver.query(r,rS,!0);i.forEach(a=>this.destroyActiveAnimationsForElement(a)),0!=this.playersByQueriedElement.size&&(i=this.driver.query(r,YT,!0),i.forEach(a=>this.finishActiveQueriedAnimationOnElement(a)))}destroyActiveAnimationsForElement(r){const i=this.playersByElement.get(r);i&&i.forEach(a=>{a.queued?a.markedForDestroy=!0:a.destroy()})}finishActiveQueriedAnimationOnElement(r){const i=this.playersByQueriedElement.get(r);i&&i.forEach(a=>a.finish())}whenRenderingDone(){return new Promise(r=>{if(this.players.length)return Hd(this.players).onDone(()=>r());r()})}processLeaveNode(r){const i=r[Dl];if(i&&i.setForRemoval){if(r[Dl]=jb,i.namespaceId){this.destroyInnerAnimations(r);const a=this._fetchNamespace(i.namespaceId);a&&a.clearElementCache(r)}this._onRemovalComplete(r,i.setForRemoval)}r.classList?.contains(oE)&&this.markElementAsDisabled(r,!1),this.driver.query(r,".ng-animate-disabled",!0).forEach(a=>{this.markElementAsDisabled(a,!1)})}flush(r=-1){let i=[];if(this.newHostElements.size&&(this.newHostElements.forEach((a,h)=>this._balanceNamespaceList(a,h)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let a=0;a<this.collectedEnterElements.length;a++)_l(this.collectedEnterElements[a],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const a=[];try{i=this._flushAnimations(a,r)}finally{for(let h=0;h<a.length;h++)a[h]()}}else for(let a=0;a<this.collectedLeaveElements.length;a++)this.processLeaveNode(this.collectedLeaveElements[a]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(a=>a()),this._flushFns=[],this._whenQuietFns.length){const a=this._whenQuietFns;this._whenQuietFns=[],i.length?Hd(i).onDone(()=>{a.forEach(h=>h())}):a.forEach(h=>h())}}reportError(r){throw function f3(o){return new dt(3402,!1)}()}_flushAnimations(r,i){const a=new fS,h=[],f=new Map,m=[],v=new Map,x=new Map,S=new Map,T=new Set;this.disabledNodes.forEach(Ut=>{T.add(Ut);const ie=this.driver.query(Ut,".ng-animate-queued",!0);for(let me=0;me<ie.length;me++)T.add(ie[me])});const N=this.bodyNode,F=Array.from(this.statesByElement.keys()),j=Ub(F,this.collectedEnterElements),B=new Map;let W=0;j.forEach((Ut,ie)=>{const me=KT+W++;B.set(ie,me),Ut.forEach(yn=>_l(yn,me))});const it=[],rt=new Set,ft=new Set;for(let Ut=0;Ut<this.collectedLeaveElements.length;Ut++){const ie=this.collectedLeaveElements[Ut],me=ie[Dl];me&&me.setForRemoval&&(it.push(ie),rt.add(ie),me.hasAnimation?this.driver.query(ie,".ng-star-inserted",!0).forEach(yn=>rt.add(yn)):ft.add(ie))}const at=new Map,Tt=Ub(F,Array.from(rt));Tt.forEach((Ut,ie)=>{const me=nS+W++;at.set(ie,me),Ut.forEach(yn=>_l(yn,me))}),r.push(()=>{j.forEach((Ut,ie)=>{const me=B.get(ie);Ut.forEach(yn=>yv(yn,me))}),Tt.forEach((Ut,ie)=>{const me=at.get(ie);Ut.forEach(yn=>yv(yn,me))}),it.forEach(Ut=>{this.processLeaveNode(Ut)})});const Pe=[],sn=[];for(let Ut=this._namespaceList.length-1;Ut>=0;Ut--)this._namespaceList[Ut].drainQueuedTransitions(i).forEach(me=>{const yn=me.player,yo=me.element;if(Pe.push(yn),this.collectedEnterElements.length){const us=yo[Dl];if(us&&us.setForMove){if(us.previousTriggersValues&&us.previousTriggersValues.has(me.triggerName)){const $g=us.previousTriggersValues.get(me.triggerName),Tl=this.statesByElement.get(me.element);if(Tl&&Tl.has(me.triggerName)){const vS=Tl.get(me.triggerName);vS.value=$g,Tl.set(me.triggerName,vS)}}return void yn.destroy()}}const xh=!N||!this.driver.containsElement(N,yo),Ra=at.get(yo),Gd=B.get(yo),Gi=this._buildInstruction(me,a,Gd,Ra,xh);if(Gi.errors&&Gi.errors.length)return void sn.push(Gi);if(xh)return yn.onStart(()=>zg(yo,Gi.fromStyles)),yn.onDestroy(()=>wh(yo,Gi.toStyles)),void h.push(yn);if(me.isFallbackTransition)return yn.onStart(()=>zg(yo,Gi.fromStyles)),yn.onDestroy(()=>wh(yo,Gi.toStyles)),void h.push(yn);const Jb=[];Gi.timelines.forEach(us=>{us.stretchStartingKeyframe=!0,this.disabledNodes.has(us.element)||Jb.push(us)}),Gi.timelines=Jb,a.append(yo,Gi.timelines),m.push({instruction:Gi,player:yn,element:yo}),Gi.queriedElements.forEach(us=>ka(v,us,[]).push(yn)),Gi.preStyleProps.forEach((us,$g)=>{if(us.size){let Tl=x.get($g);Tl||x.set($g,Tl=new Set),us.forEach((vS,cE)=>Tl.add(cE))}}),Gi.postStyleProps.forEach((us,$g)=>{let Tl=S.get($g);Tl||S.set($g,Tl=new Set),us.forEach((vS,cE)=>Tl.add(cE))})});if(sn.length){const Ut=[];sn.forEach(ie=>{Ut.push(function d3(o,r){return new dt(3505,!1)}())}),Pe.forEach(ie=>ie.destroy()),this.reportError(Ut)}const zi=new Map,Oa=new Map;m.forEach(Ut=>{const ie=Ut.element;a.has(ie)&&(Oa.set(ie,ie),this._beforeAnimationBuild(Ut.player.namespaceId,Ut.instruction,zi))}),h.forEach(Ut=>{const ie=Ut.element;this._getPreviousPlayers(ie,!1,Ut.namespaceId,Ut.triggerName,null).forEach(yn=>{ka(zi,ie,[]).push(yn),yn.destroy()})});const La=it.filter(Ut=>zb(Ut,x,S)),Fa=new Map;Bb(Fa,this.driver,ft,S,Fc).forEach(Ut=>{zb(Ut,x,S)&&La.push(Ut)});const Bc=new Map;j.forEach((Ut,ie)=>{Bb(Bc,this.driver,new Set(Ut),x,"!")}),La.forEach(Ut=>{const ie=Fa.get(Ut),me=Bc.get(Ut);Fa.set(Ut,new Map([...Array.from(ie?.entries()??[]),...Array.from(me?.entries()??[])]))});const yu=[],wv=[],xv={};m.forEach(Ut=>{const{element:ie,player:me,instruction:yn}=Ut;if(a.has(ie)){if(T.has(ie))return me.onDestroy(()=>wh(ie,yn.toStyles)),me.disabled=!0,me.overrideTotalTime(yn.totalTime),void h.push(me);let yo=xv;if(Oa.size>1){let Ra=ie;const Gd=[];for(;Ra=Ra.parentNode;){const Gi=Oa.get(Ra);if(Gi){yo=Gi;break}Gd.push(Ra)}Gd.forEach(Gi=>Oa.set(Gi,yo))}const xh=this._buildAnimation(me.namespaceId,yn,zi,f,Bc,Fa);if(me.setRealPlayer(xh),yo===xv)yu.push(me);else{const Ra=this.playersByElement.get(yo);Ra&&Ra.length&&(me.parentPlayer=Hd(Ra)),h.push(me)}}else zg(ie,yn.fromStyles),me.onDestroy(()=>wh(ie,yn.toStyles)),wv.push(me),T.has(ie)&&h.push(me)}),wv.forEach(Ut=>{const ie=f.get(Ut.element);if(ie&&ie.length){const me=Hd(ie);Ut.setRealPlayer(me)}}),h.forEach(Ut=>{Ut.parentPlayer?Ut.syncPlayerEvents(Ut.parentPlayer):Ut.destroy()});for(let Ut=0;Ut<it.length;Ut++){const ie=it[Ut],me=ie[Dl];if(yv(ie,nS),me&&me.hasAnimation)continue;let yn=[];if(v.size){let xh=v.get(ie);xh&&xh.length&&yn.push(...xh);let Ra=this.driver.query(ie,YT,!0);for(let Gd=0;Gd<Ra.length;Gd++){let Gi=v.get(Ra[Gd]);Gi&&Gi.length&&yn.push(...Gi)}}const yo=yn.filter(xh=>!xh.destroyed);yo.length?mz(this,ie,yo):this.processLeaveNode(ie)}return it.length=0,yu.forEach(Ut=>{this.players.push(Ut),Ut.onDone(()=>{Ut.destroy();const ie=this.players.indexOf(Ut);this.players.splice(ie,1)}),Ut.play()}),yu}elementContainsData(r,i){let a=!1;const h=i[Dl];return h&&h.setForRemoval&&(a=!0),this.playersByElement.has(i)&&(a=!0),this.playersByQueriedElement.has(i)&&(a=!0),this.statesByElement.has(i)&&(a=!0),this._fetchNamespace(r).elementContainsData(i)||a}afterFlush(r){this._flushFns.push(r)}afterFlushAnimationsDone(r){this._whenQuietFns.push(r)}_getPreviousPlayers(r,i,a,h,f){let m=[];if(i){const v=this.playersByQueriedElement.get(r);v&&(m=v)}else{const v=this.playersByElement.get(r);if(v){const x=!f||f==kx;v.forEach(S=>{S.queued||!x&&S.triggerName!=h||m.push(S)})}}return(a||h)&&(m=m.filter(v=>!(a&&a!=v.namespaceId||h&&h!=v.triggerName))),m}_beforeAnimationBuild(r,i,a){const f=i.element,m=i.isRemovalTransition?void 0:r,v=i.isRemovalTransition?void 0:i.triggerName;for(const x of i.timelines){const S=x.element,T=S!==f,N=ka(a,S,[]);this._getPreviousPlayers(S,T,m,v,i.toState).forEach(j=>{const B=j.getRealPlayer();B.beforeDestroy&&B.beforeDestroy(),j.destroy(),N.push(j)})}zg(f,i.fromStyles)}_buildAnimation(r,i,a,h,f,m){const v=i.triggerName,x=i.element,S=[],T=new Set,N=new Set,F=i.timelines.map(B=>{const W=B.element;T.add(W);const it=W[Dl];if(it&&it.removedBeforeQueried)return new vx(B.duration,B.delay);const rt=W!==x,ft=function yz(o){const r=[];return Hb(o,r),r}((a.get(W)||uz).map(zi=>zi.getRealPlayer())).filter(zi=>!!zi.element&&zi.element===W),at=f.get(W),Tt=m.get(W),Pe=pb(0,this._normalizer,0,B.keyframes,at,Tt),sn=this._buildPlayer(B,Pe,ft);if(B.subTimeline&&h&&N.add(W),rt){const zi=new lE(r,v,W);zi.setRealPlayer(sn),S.push(zi)}return sn});S.forEach(B=>{ka(this.playersByQueriedElement,B.element,[]).push(B),B.onDone(()=>function dz(o,r,i){let a=o.get(r);if(a){if(a.length){const h=a.indexOf(i);a.splice(h,1)}0==a.length&&o.delete(r)}return a}(this.playersByQueriedElement,B.element,B))}),T.forEach(B=>_l(B,Sb));const j=Hd(F);return j.onDestroy(()=>{T.forEach(B=>yv(B,Sb)),wh(x,i.toStyles)}),N.forEach(B=>{ka(h,B,[]).push(j)}),j}_buildPlayer(r,i,a){return i.length>0?this.driver.animate(r.element,i,r.duration,r.delay,r.easing,a):new vx(r.duration,r.delay)}}class lE{constructor(r,i,a){this.namespaceId=r,this.triggerName=i,this.element=a,this._player=new vx,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(r){this._containsRealPlayer||(this._player=r,this._queuedCallbacks.forEach((i,a)=>{i.forEach(h=>UT(r,a,void 0,h))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(r.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(r){this.totalTime=r}syncPlayerEvents(r){const i=this._player;i.triggerCallback&&r.onStart(()=>i.triggerCallback("start")),r.onDone(()=>this.finish()),r.onDestroy(()=>this.destroy())}_queueEvent(r,i){ka(this._queuedCallbacks,r,[]).push(i)}onDone(r){this.queued&&this._queueEvent("done",r),this._player.onDone(r)}onStart(r){this.queued&&this._queueEvent("start",r),this._player.onStart(r)}onDestroy(r){this.queued&&this._queueEvent("destroy",r),this._player.onDestroy(r)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(r){this.queued||this._player.setPosition(r)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(r){const i=this._player;i.triggerCallback&&i.triggerCallback(r)}}function gS(o){return o&&1===o.nodeType}function Vb(o,r){const i=o.style.display;return o.style.display=r??"none",i}function Bb(o,r,i,a,h){const f=[];i.forEach(x=>f.push(Vb(x)));const m=[];a.forEach((x,S)=>{const T=new Map;x.forEach(N=>{const F=r.computeStyle(S,N,h);T.set(N,F),(!F||0==F.length)&&(S[Dl]=hz,m.push(S))}),o.set(S,T)});let v=0;return i.forEach(x=>Vb(x,f[v++])),m}function Ub(o,r){const i=new Map;if(o.forEach(v=>i.set(v,[])),0==r.length)return i;const h=new Set(r),f=new Map;function m(v){if(!v)return 1;let x=f.get(v);if(x)return x;const S=v.parentNode;return x=i.has(S)?S:h.has(S)?1:m(S),f.set(v,x),x}return r.forEach(v=>{const x=m(v);1!==x&&i.get(x).push(v)}),i}function _l(o,r){o.classList?.add(r)}function yv(o,r){o.classList?.remove(r)}function mz(o,r,i){Hd(i).onDone(()=>o.processLeaveNode(r))}function Hb(o,r){for(let i=0;i<o.length;i++){const a=o[i];a instanceof zA?Hb(a.players,r):r.push(a)}}function zb(o,r,i){const a=i.get(o);if(!a)return!1;let h=r.get(o);return h?a.forEach(f=>h.add(f)):r.set(o,a),i.delete(o),!0}class mS{constructor(r,i,a){this.bodyNode=r,this._driver=i,this._normalizer=a,this._triggerCache={},this.onRemovalComplete=(h,f)=>{},this._transitionEngine=new fz(r,i,a),this._timelineEngine=new rz(r,i,a),this._transitionEngine.onRemovalComplete=(h,f)=>this.onRemovalComplete(h,f)}registerTrigger(r,i,a,h,f){const m=r+"-"+h;let v=this._triggerCache[m];if(!v){const x=[],T=QT(this._driver,f,x,[]);if(x.length)throw function n3(o,r){return new dt(3404,!1)}();v=function tz(o,r,i){return new ez(o,r,i)}(h,T,this._normalizer),this._triggerCache[m]=v}this._transitionEngine.registerTrigger(i,h,v)}register(r,i){this._transitionEngine.register(r,i)}destroy(r,i){this._transitionEngine.destroy(r,i)}onInsert(r,i,a,h){this._transitionEngine.insertNode(r,i,a,h)}onRemove(r,i,a,h){this._transitionEngine.removeNode(r,i,h||!1,a)}disableAnimations(r,i){this._transitionEngine.markElementAsDisabled(r,i)}process(r,i,a,h){if("@"==a.charAt(0)){const[f,m]=gb(a);this._timelineEngine.command(f,i,m,h)}else this._transitionEngine.trigger(r,i,a,h)}listen(r,i,a,h,f){if("@"==a.charAt(0)){const[m,v]=gb(a);return this._timelineEngine.listen(m,i,v,f)}return this._transitionEngine.listen(r,i,a,h,f)}flush(r=-1){this._transitionEngine.flush(r)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let xz=(()=>{class o{constructor(i,a,h){this._element=i,this._startStyles=a,this._endStyles=h,this._state=0;let f=o.initialStylesByElement.get(i);f||o.initialStylesByElement.set(i,f=new Map),this._initialStyles=f}start(){this._state<1&&(this._startStyles&&wh(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(wh(this._element,this._initialStyles),this._endStyles&&(wh(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(o.initialStylesByElement.delete(this._element),this._startStyles&&(zg(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(zg(this._element,this._endStyles),this._endStyles=null),wh(this._element,this._initialStyles),this._state=3)}}return o.initialStylesByElement=new WeakMap,o})();function uE(o){let r=null;return o.forEach((i,a)=>{(function Cz(o){return"display"===o||"position"===o})(a)&&(r=r||new Map,r.set(a,i))}),r}class Gb{constructor(r,i,a,h){this.element=r,this.keyframes=i,this.options=a,this._specialStyles=h,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=a.duration,this._delay=a.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(r=>r()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const r=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,r,this.options),this._finalKeyframe=r.length?r[r.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(r){const i=[];return r.forEach(a=>{i.push(Object.fromEntries(a))}),i}_triggerWebAnimation(r,i,a){return r.animate(this._convertKeyframesToObject(i),a)}onStart(r){this._originalOnStartFns.push(r),this._onStartFns.push(r)}onDone(r){this._originalOnDoneFns.push(r),this._onDoneFns.push(r)}onDestroy(r){this._onDestroyFns.push(r)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(r=>r()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(r=>r()),this._onDestroyFns=[])}setPosition(r){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=r*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const r=new Map;this.hasStarted()&&this._finalKeyframe.forEach((a,h)=>{"offset"!==h&&r.set(h,this._finished?a:Nb(this.element,h))}),this.currentSnapshot=r}triggerCallback(r){const i="start"===r?this._onStartFns:this._onDoneFns;i.forEach(a=>a()),i.length=0}}class Mz{validateStyleProperty(r){return!0}validateAnimatableStyleProperty(r){return!0}matchesElement(r,i){return!1}containsElement(r,i){return wb(r,i)}getParentElement(r){return $T(r)}query(r,i,a){return xb(r,i,a)}computeStyle(r,i,a){return window.getComputedStyle(r)[i]}animate(r,i,a,h,f,m=[]){const x={duration:a,delay:h,fill:0==h?"both":"forwards"};f&&(x.easing=f);const S=new Map,T=m.filter(j=>j instanceof Gb);(function T3(o,r){return 0===o||0===r})(a,h)&&T.forEach(j=>{j.currentSnapshot.forEach((B,W)=>S.set(W,B))});let N=function M3(o){return o.length?o[0]instanceof Map?o:o.map(r=>Db(r)):[]}(i).map(j=>zd(j));N=function E3(o,r,i){if(i.size&&r.length){let a=r[0],h=[];if(i.forEach((f,m)=>{a.has(m)||h.push(m),a.set(m,f)}),h.length)for(let f=1;f<r.length;f++){let m=r[f];h.forEach(v=>m.set(v,Nb(o,v)))}}return r}(r,N,S);const F=function wz(o,r){let i=null,a=null;return Array.isArray(r)&&r.length?(i=uE(r[0]),r.length>1&&(a=uE(r[r.length-1]))):r instanceof Map&&(i=uE(r)),i||a?new xz(o,i,a):null}(r,N);return new Gb(r,N,x,F)}}let Sz=(()=>{class o extends jA{constructor(i,a){super(),this._nextAnimationId=0,this._renderer=i.createRenderer(a.body,{id:"0",encapsulation:Ls.None,styles:[],data:{animation:[]}})}build(i){const a=this._nextAnimationId.toString();this._nextAnimationId++;const h=Array.isArray(i)?UA(i):i;return $b(this._renderer,null,a,"register",[h]),new Dz(a,this._renderer)}}return o.\u0275fac=function(i){return new(i||o)(kt(Af),kt(Oo))},o.\u0275prov=A({token:o,factory:o.\u0275fac}),o})();class Dz extends class TB{}{constructor(r,i){super(),this._id=r,this._renderer=i}create(r,i){return new _z(this._id,r,i||{},this._renderer)}}class _z{constructor(r,i,a,h){this.id=r,this.element=i,this._renderer=h,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",a)}_listen(r,i){return this._renderer.listen(this.element,`@@${this.id}:${r}`,i)}_command(r,...i){return $b(this._renderer,this.element,this.id,r,i)}onDone(r){this._listen("done",r)}onStart(r){this._listen("start",r)}onDestroy(r){this._listen("destroy",r)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(r){this._command("setPosition",r)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function $b(o,r,i,a,h){return o.setProperty(r,`@@${i}:${a}`,h)}const Wb="@.disabled";let Tz=(()=>{class o{constructor(i,a,h){this.delegate=i,this.engine=a,this._zone=h,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),a.onRemovalComplete=(f,m)=>{const v=m?.parentNode(f);v&&m.removeChild(v,f)}}createRenderer(i,a){const f=this.delegate.createRenderer(i,a);if(!(i&&a&&a.data&&a.data.animation)){let T=this._rendererCache.get(f);return T||(T=new Kb("",f,this.engine),this._rendererCache.set(f,T)),T}const m=a.id,v=a.id+"-"+this._currentId;this._currentId++,this.engine.register(v,i);const x=T=>{Array.isArray(T)?T.forEach(x):this.engine.registerTrigger(m,v,i,T.name,T)};return a.data.animation.forEach(x),new Ez(this,v,f,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(i,a,h){i>=0&&i<this._microtaskId?this._zone.run(()=>a(h)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(f=>{const[m,v]=f;m(v)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([a,h]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return o.\u0275fac=function(i){return new(i||o)(kt(Af),kt(mS),kt(Ni))},o.\u0275prov=A({token:o,factory:o.\u0275fac}),o})();class Kb{constructor(r,i,a){this.namespaceId=r,this.delegate=i,this.engine=a,this.destroyNode=this.delegate.destroyNode?h=>i.destroyNode(h):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(r,i){return this.delegate.createElement(r,i)}createComment(r){return this.delegate.createComment(r)}createText(r){return this.delegate.createText(r)}appendChild(r,i){this.delegate.appendChild(r,i),this.engine.onInsert(this.namespaceId,i,r,!1)}insertBefore(r,i,a,h=!0){this.delegate.insertBefore(r,i,a),this.engine.onInsert(this.namespaceId,i,r,h)}removeChild(r,i,a){this.engine.onRemove(this.namespaceId,i,this.delegate,a)}selectRootElement(r,i){return this.delegate.selectRootElement(r,i)}parentNode(r){return this.delegate.parentNode(r)}nextSibling(r){return this.delegate.nextSibling(r)}setAttribute(r,i,a,h){this.delegate.setAttribute(r,i,a,h)}removeAttribute(r,i,a){this.delegate.removeAttribute(r,i,a)}addClass(r,i){this.delegate.addClass(r,i)}removeClass(r,i){this.delegate.removeClass(r,i)}setStyle(r,i,a,h){this.delegate.setStyle(r,i,a,h)}removeStyle(r,i,a){this.delegate.removeStyle(r,i,a)}setProperty(r,i,a){"@"==i.charAt(0)&&i==Wb?this.disableAnimations(r,!!a):this.delegate.setProperty(r,i,a)}setValue(r,i){this.delegate.setValue(r,i)}listen(r,i,a){return this.delegate.listen(r,i,a)}disableAnimations(r,i){this.engine.disableAnimations(r,i)}}class Ez extends Kb{constructor(r,i,a,h){super(i,a,h),this.factory=r,this.namespaceId=i}setProperty(r,i,a){"@"==i.charAt(0)?"."==i.charAt(1)&&i==Wb?this.disableAnimations(r,a=void 0===a||!!a):this.engine.process(this.namespaceId,r,i.slice(1),a):this.delegate.setProperty(r,i,a)}listen(r,i,a){if("@"==i.charAt(0)){const h=function Pz(o){switch(o){case"body":return document.body;case"document":return document;case"window":return window;default:return o}}(r);let f=i.slice(1),m="";return"@"!=f.charAt(0)&&([f,m]=function Nz(o){const r=o.indexOf(".");return[o.substring(0,r),o.slice(r+1)]}(f)),this.engine.listen(this.namespaceId,h,f,m,v=>{this.factory.scheduleListenerCallback(v._data||-1,a,v)})}return this.delegate.listen(r,i,a)}}const Yb=[{provide:jA,useClass:Sz},{provide:iE,useFactory:function Az(){return new J3}},{provide:mS,useClass:(()=>{class o extends mS{constructor(i,a,h,f){super(i.body,a,h)}ngOnDestroy(){this.flush()}}return o.\u0275fac=function(i){return new(i||o)(kt(Oo),kt(WT),kt(iE),kt(Ww))},o.\u0275prov=A({token:o,factory:o.\u0275fac}),o})()},{provide:Af,useFactory:function kz(o,r,i){return new Tz(o,r,i)},deps:[dM,mS,Ni]}],hE=[{provide:WT,useFactory:()=>new Mz},{provide:OP,useValue:"BrowserAnimations"},...Yb],Xb=[{provide:WT,useClass:Cb},{provide:OP,useValue:"NoopAnimations"},...Yb];let bz=(()=>{class o{static withConfig(i){return{ngModule:o,providers:i.disableAnimations?Xb:hE}}}return o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=ci({type:o}),o.\u0275inj=Xn({providers:hE,imports:[JN]}),o})(),Oz=(()=>{class o{}return o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=ci({type:o,bootstrap:[CH]}),o.\u0275inj=Xn({imports:[JN,WV,lB,OH,eH,LA,qk,hH,MB,UB,bz,XB]}),o})();(function kL(){ZP=!1})(),oR().bootstrapModule(Oz).catch(o=>console.error(o))},813:(Uc,bx,Cv)=>{Cv.d(bx,{$u:()=>Ch,D5:()=>Fx,FF:()=>aa,KX:()=>Dv,NB:()=>Mh,S0:()=>DE,Zt:()=>Rx,al:()=>$x,bn:()=>TE,bx:()=>ES,jE:()=>Gx,rv:()=>CS,s_:()=>_E,z6:()=>jx}),Uc=Cv.hmd(Uc),function(){var _;function RS(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function Wx(t){var e=typeof Symbol<"u"&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:RS(t)}}function ja(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}var or,jS="function"==typeof Object.create?Object.create:function(t){function e(){}return e.prototype=t,new e};if("function"==typeof Object.setPrototypeOf)or=Object.setPrototypeOf;else{var vu;t:{var VS={};try{VS.__proto__={a:!0},vu=VS.a;break t}catch{}vu=!1}or=vu?function(t,e){if(t.__proto__=e,t.__proto__!==e)throw new TypeError(t+" is not extensible");return t}:null}var Kx=or;function zt(t,e){if(t.prototype=jS(e.prototype),t.prototype.constructor=t,Kx)Kx(t,e);else for(var n in e)if("prototype"!=n)if(Object.defineProperties){var s=Object.getOwnPropertyDescriptor(e,n);s&&Object.defineProperty(t,n,s)}else t[n]=e[n];t.zA=e.prototype}var St=typeof global<"u"&&null!=global?global:self,Yx="function"==typeof Object.assign?Object.assign:function(t,e){for(var n=1;n<arguments.length;n++){var s=arguments[n];if(s)for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(t[l]=s[l])}return t},$d="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)};function Xx(t,e){if(e){var n=St;t=t.split(".");for(var s=0;s<t.length-1;s++){var l=t[s];l in n||(n[l]={}),n=n[l]}(e=e(s=n[t=t[t.length-1]]))!=s&&null!=e&&$d(n,t,{writable:!0,value:e})}}Xx("Object.assign",function(t){return t||Yx}),Xx("Array.prototype.fill",function(t){return t||function(e,n,s){var l=this.length||0;for(0>n&&(n=Math.max(0,l+n)),(null==s||s>l)&&(s=l),0>(s=Number(s))&&(s=Math.max(0,l+s)),n=Number(n||0);n<s;n++)this[n]=e;return this}});var mt="object"==typeof globalThis&&globalThis||"object"==typeof global&&global.global===global&&global||"object"==typeof self&&self.self===self&&self||{};function wu(){}function Tv(t,e){var n=-1;return function(){var s=this,l=arguments;-1!==n&&mt.clearTimeout(n),n=xu(function(){n=-1,t.apply(s,l)},e)}}function xu(t,e){return mt.setTimeout(t,e)}function hs(t){return mt.document.createElement(t)}function Y(t){throw Error(t)}function Nt(t,e){t="The object is frozen, so its properties cannot be set: "+t.toString(),void 0!==e&&(t+="  to value: "+e),Y(t)}function pe(t,e,n,s){n=null===n?"*":"string"==typeof n?n:"function"==typeof n&&"string"==typeof n.className?n.className:"",void 0!==s&&(n+="."+s),Y(n+" is not in the range "+e+": "+t)}function wi(t){mt.console&&mt.console.log(t)}function Vt(t){return"object"==typeof t&&null!==t}function _n(t){return Array.isArray(t)||mt.NodeList&&t instanceof mt.NodeList||mt.HTMLCollection&&t instanceof mt.HTMLCollection}function Gc(t){return Array.prototype.slice.call(t)}function Cu(t,e,n){Array.isArray(t)?e>=t.length?t.push(n):t.splice(e,0,n):Y("Cannot insert an object into an HTMLCollection or NodeList: "+n+" at "+e)}function en(t,e){Array.isArray(t)?e>=t.length?t.pop():t.splice(e,1):Y("Cannot remove an object from an HTMLCollection or NodeList at "+e)}function ce(){var t=ye.pop();return void 0===t?[]:t}function It(t){t.length=0,ye.push(t)}function la(t){if("function"==typeof t){if(t.className)return t.className;if(t.name)return t.name;var e=t.toString();if(""!==(e=e.substring(9,e.indexOf("(")).trim()))return t._className=e}else if(Vt(t)&&t.constructor)return la(t.constructor);return typeof t}function vo(t){var e=t;return Vt(t)&&(t.text?e=t.text:t.name?e=t.name:void 0!==t.key?e=t.key:void 0!==t.id?e=t.id:t.constructor===Object&&(t.Text?e=t.Text:t.Name?e=t.Name:void 0!==t.Key?e=t.Key:void 0!==t.Id?e=t.Id:void 0!==t.ID&&(e=t.ID))),void 0===e?"undefined":null===e?"null":e.toString()}function Tn(t,e){if(t.hasOwnProperty(e))return!0;for(t=Object.getPrototypeOf(t);t&&t!==Function;){if(t.hasOwnProperty(e))return!0;var n=t.lA;if(n&&n[e])return!0;t=Object.getPrototypeOf(t)}return!1}function Gt(t,e,n){Object.defineProperty(Te.prototype,t,{get:e,set:n})}function $t(t){for(var e=[],n=0;256>n;n++)e["0123456789abcdef".charAt(n>>4)+"0123456789abcdef".charAt(15&n)]=String.fromCharCode(n);t.length%2&&(t="0"+t),n=[];for(var s=0,l=0;l<t.length;l+=2)n[s++]=e[t.substr(l,2)];for(t=""===(t=n.join(""))?"0":t,e=[],n=0;256>n;n++)e[n]=n;for(n=s=0;256>n;n++)l=e[n],e[n]=e[s=(s+e[n]+119)%256],e[s]=l;s=n=0;for(var u="",c=0;c<t.length;c++)l=e[n=(n+1)%256],e[n]=e[s=(s+e[n])%256],e[s]=l,u+=String.fromCharCode(t.charCodeAt(c)^e[(e[n]+e[s])%256]);return u}void 0===mt.requestAnimationFrame&&(mt.requestAnimationFrame=void 0===mt.setImmediate?function(t){mt.setTimeout(t,0)}:mt.setImmediate);var BS=void 0!==mt.navigator&&0<mt.navigator.userAgent.indexOf("Trident/7"),dt=void 0!==mt.navigator&&0<mt.navigator.userAgent.indexOf("Edge/"),Ro=void 0!==mt.navigator&&void 0!==mt.navigator.platform&&null!==mt.navigator.platform.match(/(iPhone|iPod|iPad|Mac)/i),ye=[];function K(t,e,n){En(this),this.j=t,this.va=e,this.m=n}function ua(t,e){return null==e||""===e?null:t[e]}function Ev(){this.Jv=[]}function Zr(){}Object.freeze([]),wu.className="Util",wu.Dx="32ab5ff3b26f42dc0ed90f21462913b5",wu.adym="gojs.net",wu.vfo="28e644fdb261",wu.className="Util",K.prototype.toString=function(){return"EnumValue."+this.va},St.Object.defineProperties(K.prototype,{classType:{get:function(){return this.j}},name:{get:function(){return this.va}},value:{get:function(){return this.m}}}),K.className="EnumValue",Ev.prototype.toString=function(){return this.Jv.join("")},Ev.prototype.add=function(t){""!==t&&this.Jv.push(t)},Ev.className="StringBuilder",Zr.className="PropertyCollection";var jo,Sh={nA:!1,sA:!1,pA:!1,rA:!1,xA:!1,vA:!1,Rw:!1,oA:null,trace:function(t){mt.console&&mt.console.log(t)},qA:function(t,e,n,s){t.strokeStyle="red",t.fillStyle="red",t.font="8px sans-serif",t.beginPath(),t.moveTo(-10,0),t.lineTo(10,0),t.moveTo(0,-10),t.lineTo(0,10),t.stroke(),t.setTransform(1,0,0,1,0,0),t.scale(n,n),t.transform(e.m11,e.m12,e.m21,e.m22,e.dx,e.dy),t.lineWidth=2,t.beginPath(),t.moveTo(s.left,s.top+20),t.lineTo(s.left,s.top),t.lineTo(s.left+20,s.top),t.moveTo(s.right,s.bottom-20),t.lineTo(s.right,s.bottom),t.lineTo(s.right-20,s.bottom),t.stroke(),t.fillText("DB: "+Math.round(s.x)+", "+Math.round(s.y)+", "+Math.round(s.width)+", "+Math.round(s.height),s.left,s.top-5)},mA:function(t){var n,e={};for(n in t){if(e.x=n,"licenseKey"!==e.x){var s=t[e.x];if(void 0!==s.prototype){e.Gl=Object.getOwnPropertyNames(s.prototype);for(var l={Lj:0};l.Lj<e.Gl.length;(l={Lj:l.Lj}).Lj++){var u=Object.getOwnPropertyDescriptor(s.prototype,e.Gl[l.Lj]);void 0!==u.get&&void 0===u.set&&Object.defineProperty(s.prototype,e.Gl[l.Lj],{set:function(c,d){return function(){throw Error("Property "+c.Gl[d.Lj]+" of "+c.x+" is read-only.")}}(e,l)})}}}e={Gl:e.Gl,x:e.x}}}};function Qe(){}function An(t){this.key=-1,this.value=t}function kn(t){this.xb=t,this.cf=null,t.Pa=null,this.na=t.Ia,this.Wa=-1}function vn(t){this.xb=t,t.yg=null,this.na=t.Ia,this.Wa=t.s.length}function tt(t){En(this),this._isFrozen=!1,this.s=[],this.Ia=0,this.yg=this.Pa=null,"string"==typeof t&&Y("Error: Since 2.0 List/Map/Set constructors no longer take an argument that enforces type."),void 0!==t&&this.addAll(t)}function Ii(t){this.Xf=t,t.Pa=null,this.na=t.Ia,this.ra=null}function Q(t){En(this),this._isFrozen=!1,this.Pb={},this.Ob=0,this.Pa=null,this.Ia=0,this.Ye=this.ea=null,"string"==typeof t&&Y("Error: Since 2.0 List/Map/Set constructors no longer take an argument that enforces type."),void 0!==t&&this.addAll(t)}function En(t){t.__gohashid=Pl++}function Dh(t){var e=t.__gohashid;return void 0===e&&(e=Pl++,t.__gohashid=e),e}function Cn(t){return t.__gohashid}Qe.prototype.reset=function(){},Qe.prototype.next=function(){return!1},Qe.prototype.ud=function(){return!1},Qe.prototype.first=function(){return null},Qe.prototype.any=function(){return!1},Qe.prototype.all=function(){return!0},Qe.prototype.each=function(){return this},Qe.prototype.map=function(){return this},Qe.prototype.filter=function(){return this},Qe.prototype.Xd=function(){},Qe.prototype.toString=function(){return"EmptyIterator"},St.Object.defineProperties(Qe.prototype,{iterator:{get:function(){return this}},count:{get:function(){return 0}}}),Qe.prototype.first=Qe.prototype.first,Qe.prototype.hasNext=Qe.prototype.ud,Qe.prototype.next=Qe.prototype.next,Qe.prototype.reset=Qe.prototype.reset,Qe.className="EmptyIterator",jo=new Qe,An.prototype.reset=function(){this.key=-1},An.prototype.next=function(){return-1===this.key&&(this.key=0,!0)},An.prototype.ud=function(){return this.next()},An.prototype.first=function(){return this.key=0,this.value},An.prototype.any=function(t){return this.key=-1,t(this.value)},An.prototype.all=function(t){return this.key=-1,t(this.value)},An.prototype.each=function(t){return this.key=-1,t(this.value),this},An.prototype.map=function(t){return new An(t(this.value))},An.prototype.filter=function(t){return t(this.value)?new An(this.value):jo},An.prototype.Xd=function(){this.value=null},An.prototype.toString=function(){return"SingletonIterator("+this.value+")"},St.Object.defineProperties(An.prototype,{iterator:{get:function(){return this}},count:{get:function(){return 1}}}),An.prototype.first=An.prototype.first,An.prototype.hasNext=An.prototype.ud,An.prototype.next=An.prototype.next,An.prototype.reset=An.prototype.reset,An.className="SingletonIterator",kn.prototype.reset=function(){var t=this.xb;t.Pa=null,this.na=t.Ia,this.Wa=-1},kn.prototype.next=function(){var t=this.xb;if(t.Ia!==this.na&&0>this.key)return!1;var e=(t=t.s).length,n=++this.Wa,s=this.cf;if(null!==s)for(;n<e;){var l=t[n];if(s(l))return this.key=this.Wa=n,this.value=l,!0;n++}else{if(n<e)return this.key=n,this.value=t[n],!0;this.Xd()}return!1},kn.prototype.ud=function(){return this.next()},kn.prototype.first=function(){var t=this.xb;this.na=t.Ia,this.Wa=0;var e=(t=t.s).length,n=this.cf;if(null!==n){for(var s=0;s<e;){var l=t[s];if(n(l))return this.key=this.Wa=s,this.value=l;s++}return null}return 0<e?(t=t[0],this.key=0,this.value=t):null},kn.prototype.any=function(t){var e=this.xb;e.Pa=null,this.Wa=-1;for(var n=(e=e.s).length,s=this.cf,l=0;l<n;l++){var u=e[l];if((null===s||s(u))&&t(u))return!0}return!1},kn.prototype.all=function(t){var e=this.xb;e.Pa=null,this.Wa=-1;for(var n=(e=e.s).length,s=this.cf,l=0;l<n;l++){var u=e[l];if((null===s||s(u))&&!t(u))return!1}return!0},kn.prototype.each=function(t){var e=this.xb;e.Pa=null,this.Wa=-1;for(var n=(e=e.s).length,s=this.cf,l=0;l<n;l++){var u=e[l];(null===s||s(u))&&t(u)}return this},kn.prototype.map=function(t){var e=this.xb;e.Pa=null,this.Wa=-1;for(var n=[],s=(e=e.s).length,l=this.cf,u=0;u<s;u++){var c=e[u];(null===l||l(c))&&n.push(t(c))}return(t=new tt).s=n,t.sb(),t.iterator},kn.prototype.filter=function(t){var e=this.xb;e.Pa=null,this.Wa=-1;for(var n=[],s=(e=e.s).length,l=this.cf,u=0;u<s;u++){var c=e[u];(null===l||l(c))&&t(c)&&n.push(c)}return(t=new tt).s=n,t.sb(),t.iterator},kn.prototype.Xd=function(){this.key=-1,this.value=null,this.na=-1,this.cf=null,this.xb.Pa=this},kn.prototype.toString=function(){return"ListIterator@"+this.Wa+"/"+this.xb.count},St.Object.defineProperties(kn.prototype,{iterator:{get:function(){return this}},predicate:{get:function(){return this.cf},set:function(t){this.cf=t}},count:{get:function(){var t=this.cf;if(null!==t){for(var e=0,n=this.xb.s,s=n.length,l=0;l<s;l++)t(n[l])&&e++;return e}return this.xb.s.length}}}),kn.prototype.first=kn.prototype.first,kn.prototype.hasNext=kn.prototype.ud,kn.prototype.next=kn.prototype.next,kn.prototype.reset=kn.prototype.reset,kn.className="ListIterator",vn.prototype.reset=function(){var t=this.xb;t.yg=null,this.na=t.Ia,this.Wa=t.s.length},vn.prototype.next=function(){var t=this.xb;if(t.Ia!==this.na&&0>this.key)return!1;var e=--this.Wa;return 0<=e?(this.key=e,this.value=t.s[e],!0):(this.Xd(),!1)},vn.prototype.ud=function(){return this.next()},vn.prototype.first=function(){var t=this.xb;this.na=t.Ia;var e=t.s;return this.Wa=t=e.length-1,0<=t?(e=e[t],this.key=t,this.value=e):null},vn.prototype.any=function(t){var e=this.xb;e.yg=null;var n=(e=e.s).length;for(this.Wa=n,--n;0<=n;n--)if(t(e[n]))return!0;return!1},vn.prototype.all=function(t){var e=this.xb;e.yg=null;var n=(e=e.s).length;for(this.Wa=n,--n;0<=n;n--)if(!t(e[n]))return!1;return!0},vn.prototype.each=function(t){var e=this.xb;e.yg=null;var n=(e=e.s).length;for(this.Wa=n,--n;0<=n;n--)t(e[n]);return this},vn.prototype.map=function(t){var e=this.xb;e.yg=null;var n=[],s=(e=e.s).length;for(this.Wa=s,--s;0<=s;s--)n.push(t(e[s]));return(t=new tt).s=n,t.sb(),t.iterator},vn.prototype.filter=function(t){var e=this.xb;e.yg=null;var n=[],s=(e=e.s).length;for(this.Wa=s,--s;0<=s;s--){var l=e[s];t(l)&&n.push(l)}return(t=new tt).s=n,t.sb(),t.iterator},vn.prototype.Xd=function(){this.key=-1,this.value=null,this.na=-1,this.xb.yg=this},vn.prototype.toString=function(){return"ListIteratorBackwards("+this.Wa+"/"+this.xb.count+")"},St.Object.defineProperties(vn.prototype,{iterator:{get:function(){return this}},count:{get:function(){return this.xb.s.length}}}),vn.prototype.first=vn.prototype.first,vn.prototype.hasNext=vn.prototype.ud,vn.prototype.next=vn.prototype.next,vn.prototype.reset=vn.prototype.reset,vn.className="ListIteratorBackwards",(_=tt.prototype).sb=function(){var t=this.Ia;999999999<++t&&(t=0),this.Ia=t},_.freeze=function(){return this._isFrozen=!0,this},_.ja=function(){return this._isFrozen=!1,this},_.toString=function(){return"List()#"+Cn(this)},_.add=function(t){return null===t||(this._isFrozen&&Nt(this,t),this.s.push(t),this.sb()),this},_.push=function(t){this.add(t)},_.addAll=function(t){if(null===t)return this;this._isFrozen&&Nt(this);var e=this.s;if(_n(t))for(var n=t.length,s=0;s<n;s++)e.push(t[s]);else for(t=t.iterator;t.next();)e.push(t.value);return this.sb(),this},_.clear=function(){this._isFrozen&&Nt(this),this.s.length=0,this.sb()},_.contains=function(t){return null!==t&&-1!==this.s.indexOf(t)},_.has=function(t){return this.contains(t)},_.indexOf=function(t){return null===t?-1:this.s.indexOf(t)},_.K=function(t){var e=this.s;return(0>t||t>=e.length)&&pe(t,"0 <= i < length",tt,"elt:i"),e[t]},_.get=function(t){return this.K(t)},_.Vc=function(t,e){var n=this.s;(0>t||t>=n.length)&&pe(t,"0 <= i < length",tt,"setElt:i"),this._isFrozen&&Nt(this,t),n[t]=e},_.set=function(t,e){this.Vc(t,e)},_.first=function(){var t=this.s;return 0===t.length?null:t[0]},_.fc=function(){var t=this.s,e=t.length;return 0<e?t[e-1]:null},_.pop=function(){this._isFrozen&&Nt(this);var t=this.s;return 0<t.length?t.pop():null},tt.prototype.any=function(t){for(var e=this.s,n=e.length,s=0;s<n;s++)if(t(e[s]))return!0;return!1},tt.prototype.all=function(t){for(var e=this.s,n=e.length,s=0;s<n;s++)if(!t(e[s]))return!1;return!0},tt.prototype.each=function(t){for(var e=this.s,n=e.length,s=0;s<n;s++)t(e[s]);return this},tt.prototype.map=function(t){for(var e=new tt,n=[],s=this.s,l=s.length,u=0;u<l;u++)n.push(t(s[u]));return e.s=n,e.sb(),e},tt.prototype.filter=function(t){for(var e=new tt,n=[],s=this.s,l=s.length,u=0;u<l;u++){var c=s[u];t(c)&&n.push(c)}return e.s=n,e.sb(),e},(_=tt.prototype).Cb=function(t,e){0>t&&pe(t,">= 0",tt,"insertAt:i"),this._isFrozen&&Nt(this,t);var n=this.s;t>=n.length?n.push(e):n.splice(t,0,e),this.sb()},_.remove=function(t){if(null===t)return!1;this._isFrozen&&Nt(this,t);var e=this.s;return-1!==(t=e.indexOf(t))&&(t===e.length-1?e.pop():e.splice(t,1),this.sb(),!0)},_.delete=function(t){return this.remove(t)},_.mb=function(t){var e=this.s;(0>t||t>=e.length)&&pe(t,"0 <= i < length",tt,"removeAt:i"),this._isFrozen&&Nt(this,t),t===e.length-1?e.pop():e.splice(t,1),this.sb()},_.removeRange=function(t,e){var n=this.s,s=n.length;if(0>t)t=0;else if(t>=s)return this;if(0>e)return this;if(e>=s&&(e=s-1),t>e)return this;this._isFrozen&&Nt(this);for(var l=t,u=e+1;u<s;)n[l++]=n[u++];return n.length=s-(e-t+1),this.sb(),this},tt.prototype.copy=function(){var t=new tt,e=this.s;return 0<e.length&&(t.s=Array.prototype.slice.call(e)),t},(_=tt.prototype).Ea=function(){for(var t=this.s,e=this.count,n=Array(e),s=0;s<e;s++)n[s]=t[s];return n},_.lv=function(){for(var t=new Q,e=this.s,n=this.count,s=0;s<n;s++)t.add(e[s]);return t},_.sort=function(t){return this._isFrozen&&Nt(this),this.s.sort(t),this.sb(),this},_.ri=function(t,e,n){var s=this.s,l=s.length;void 0===e&&(e=0),void 0===n&&(n=l),this._isFrozen&&Nt(this);var u=n-e;if(1>=u)return this;if((0>e||e>=l-1)&&pe(e,"0 <= from < length",tt,"sortRange:from"),2===u)return 0<t(n=s[e],l=s[e+1])&&(s[e]=l,s[e+1]=n,this.sb()),this;if(0===e)if(n>=l)s.sort(t);else for((e=s.slice(0,n)).sort(t),t=0;t<n;t++)s[t]=e[t];else if(n>=l)for((n=s.slice(e)).sort(t),t=e;t<l;t++)s[t]=n[t-e];else for((l=s.slice(e,n)).sort(t),t=e;t<n;t++)s[t]=l[t-e];return this.sb(),this},_.reverse=function(){return this._isFrozen&&Nt(this),this.s.reverse(),this.sb(),this},St.Object.defineProperties(tt.prototype,{_dataArray:{get:function(){return this.s}},count:{get:function(){return this.s.length}},size:{get:function(){return this.s.length}},length:{get:function(){return this.s.length}},iterator:{get:function(){if(0>=this.s.length)return jo;var t=this.Pa;return null!==t?(t.reset(),t):new kn(this)}},iteratorBackwards:{get:function(){if(0>=this.s.length)return jo;var t=this.yg;return null!==t?(t.reset(),t):new vn(this)}}}),tt.prototype.reverse=tt.prototype.reverse,tt.prototype.sortRange=tt.prototype.ri,tt.prototype.sort=tt.prototype.sort,tt.prototype.toSet=tt.prototype.lv,tt.prototype.toArray=tt.prototype.Ea,tt.prototype.removeRange=tt.prototype.removeRange,tt.prototype.removeAt=tt.prototype.mb,tt.prototype.delete=tt.prototype.delete,tt.prototype.remove=tt.prototype.remove,tt.prototype.insertAt=tt.prototype.Cb,tt.prototype.pop=tt.prototype.pop,tt.prototype.last=tt.prototype.fc,tt.prototype.first=tt.prototype.first,tt.prototype.set=tt.prototype.set,tt.prototype.setElt=tt.prototype.Vc,tt.prototype.get=tt.prototype.get,tt.prototype.elt=tt.prototype.K,tt.prototype.indexOf=tt.prototype.indexOf,tt.prototype.has=tt.prototype.has,tt.prototype.contains=tt.prototype.contains,tt.prototype.clear=tt.prototype.clear,tt.prototype.addAll=tt.prototype.addAll,tt.prototype.push=tt.prototype.push,tt.prototype.add=tt.prototype.add,tt.prototype.thaw=tt.prototype.ja,tt.prototype.freeze=tt.prototype.freeze,tt.className="List",Ii.prototype.reset=function(){var t=this.Xf;t.Pa=null,this.na=t.Ia,this.ra=null},Ii.prototype.next=function(){var t=this.Xf;if(t.Ia!==this.na&&null===this.key)return!1;var e=this.ra;return null!==(e=null===e?t.ea:e.ta)?(this.ra=e,this.value=e.value,this.key=e.key,!0):(this.Xd(),!1)},Ii.prototype.ud=function(){return this.next()},Ii.prototype.first=function(){var t=this.Xf;if(this.na=t.Ia,null!==(t=t.ea)){this.ra=t;var e=t.value;return this.key=t.key,this.value=e}return null},Ii.prototype.any=function(t){var e=this.Xf;for(this.ra=e.Pa=null,e=e.ea;null!==e;){if(t(e.value))return!0;e=e.ta}return!1},Ii.prototype.all=function(t){var e=this.Xf;for(this.ra=e.Pa=null,e=e.ea;null!==e;){if(!t(e.value))return!1;e=e.ta}return!0},Ii.prototype.each=function(t){var e=this.Xf;for(this.ra=e.Pa=null,e=e.ea;null!==e;)t(e.value),e=e.ta;return this},Ii.prototype.map=function(t){var e=this.Xf;e.Pa=null;var n=new tt;for(e=e.ea;null!==e;)n.add(t(e.value)),e=e.ta;return n.iterator},Ii.prototype.filter=function(t){var e=this.Xf;e.Pa=null;var n=new tt;for(e=e.ea;null!==e;){var s=e.value;t(s)&&n.add(s),e=e.ta}return n.iterator},Ii.prototype.Xd=function(){this.value=this.key=null,this.na=-1,this.Xf.Pa=this},Ii.prototype.toString=function(){return null!==this.ra?"SetIterator@"+this.ra.value:"SetIterator"},St.Object.defineProperties(Ii.prototype,{iterator:{get:function(){return this}},count:{get:function(){return this.Xf.Ob}}}),Ii.prototype.first=Ii.prototype.first,Ii.prototype.hasNext=Ii.prototype.ud,Ii.prototype.next=Ii.prototype.next,Ii.prototype.reset=Ii.prototype.reset,Ii.className="SetIterator",(_=Q.prototype).sb=function(){var t=this.Ia;999999999<++t&&(t=0),this.Ia=t},_.freeze=function(){return this._isFrozen=!0,this},_.ja=function(){return this._isFrozen=!1,this},_.toString=function(){return"Set()#"+Cn(this)},_.add=function(t){if(null===t)return this;this._isFrozen&&Nt(this,t);var e=t;return Vt(t)&&(e=Dh(t)),void 0===this.Pb[e]&&(this.Ob++,t=new Kg(t,t),this.Pb[e]=t,null===(e=this.Ye)?this.ea=t:(t.al=e,e.ta=t),this.Ye=t,this.sb()),this},_.addAll=function(t){if(null===t)return this;if(this._isFrozen&&Nt(this),_n(t))for(var e=t.length,n=0;n<e;n++)this.add(t[n]);else for(t=t.iterator;t.next();)this.add(t.value);return this},_.contains=function(t){if(null===t)return!1;var e=t;return(!Vt(t)||void 0!==(e=Cn(t)))&&void 0!==this.Pb[e]},_.has=function(t){return this.contains(t)},_.zy=function(t){if(null===t)return!0;for(t=t.iterator;t.next();)if(!this.contains(t.value))return!1;return!0},_.Ay=function(t){if(null===t)return!0;for(t=t.iterator;t.next();)if(this.contains(t.value))return!0;return!1},_.first=function(){var t=this.ea;return null===t?null:t.value},Q.prototype.any=function(t){for(var e=this.ea;null!==e;){if(t(e.value))return!0;e=e.ta}return!1},Q.prototype.all=function(t){for(var e=this.ea;null!==e;){if(!t(e.value))return!1;e=e.ta}return!0},Q.prototype.each=function(t){for(var e=this.ea;null!==e;)t(e.value),e=e.ta;return this},Q.prototype.map=function(t){for(var e=new Q,n=this.ea;null!==n;)e.add(t(n.value)),n=n.ta;return e},Q.prototype.filter=function(t){for(var e=new Q,n=this.ea;null!==n;){var s=n.value;t(s)&&e.add(s),n=n.ta}return e},(_=Q.prototype).remove=function(t){if(null===t)return!1;this._isFrozen&&Nt(this,t);var e=t;if(Vt(t)&&void 0===(e=Cn(t))||void 0===(t=this.Pb[e]))return!1;var n=t.ta,s=t.al;return null!==n&&(n.al=s),null!==s&&(s.ta=n),this.ea===t&&(this.ea=n),this.Ye===t&&(this.Ye=s),delete this.Pb[e],this.Ob--,this.sb(),!0},_.delete=function(t){return this.remove(t)},_.Ko=function(t){if(null===t)return this;if(this._isFrozen&&Nt(this),_n(t))for(var e=t.length,n=0;n<e;n++)this.remove(t[n]);else for(t=t.iterator;t.next();)this.remove(t.value);return this},_.Wz=function(t){if(null===t||0===this.count)return this;this._isFrozen&&Nt(this);var e=new Q;e.addAll(t),t=[];for(var n=this.iterator;n.next();){var s=n.value;e.contains(s)||t.push(s)}return this.Ko(t),this},_.clear=function(){this._isFrozen&&Nt(this),this.Pb={},this.Ob=0,null!==this.Pa&&this.Pa.reset(),this.Ye=this.ea=null,this.sb()},Q.prototype.copy=function(){var n,t=new Q,e=this.Pb;for(n in e)t.add(e[n].value);return t},Q.prototype.Ea=function(){var s,t=Array(this.Ob),e=this.Pb,n=0;for(s in e)t[n]=e[s].value,n++;return t},Q.prototype.kv=function(){var n,t=new tt,e=this.Pb;for(n in e)t.add(e[n].value);return t},St.Object.defineProperties(Q.prototype,{count:{get:function(){return this.Ob}},size:{get:function(){return this.Ob}},iterator:{get:function(){if(0>=this.Ob)return jo;var t=this.Pa;return null!==t?(t.reset(),t):new Ii(this)}}}),Q.prototype.toList=Q.prototype.kv,Q.prototype.toArray=Q.prototype.Ea,Q.prototype.clear=Q.prototype.clear,Q.prototype.retainAll=Q.prototype.Wz,Q.prototype.removeAll=Q.prototype.Ko,Q.prototype.delete=Q.prototype.delete,Q.prototype.remove=Q.prototype.remove,Q.prototype.first=Q.prototype.first,Q.prototype.containsAny=Q.prototype.Ay,Q.prototype.containsAll=Q.prototype.zy,Q.prototype.has=Q.prototype.has,Q.prototype.contains=Q.prototype.contains,Q.prototype.addAll=Q.prototype.addAll,Q.prototype.add=Q.prototype.add,Q.prototype.thaw=Q.prototype.ja,Q.prototype.freeze=Q.prototype.freeze;var Va,Xn,$c,Pv,Wd,Pl=1;function xi(t){this.la=t,this.na=t.Ia,this.ra=null}function qt(t){Q.call(this),En(this),this._isFrozen=!0,this.la=t}function te(t){this.la=t,t.Xe=null,this.na=t.Ia,this.ra=null}function Kg(t,e){this.key=t,this.value=e,this.al=this.ta=null}function Ai(t){this.la=t,t.Pa=null,this.na=t.Ia,this.ra=null}function xt(t){En(this),this._isFrozen=!1,this.Pb={},this.Ob=0,this.Xe=this.Pa=null,this.Ia=0,this.Ye=this.ea=null,"string"==typeof t&&Y("Error: Since 2.0 List/Map/Set constructors no longer take an argument that enforces type."),void 0!==t&&this.addAll(t)}function A(t,e){void 0===t?this.y=this.x=0:"number"==typeof t&&"number"==typeof e?(this.x=t,this.y=e):Y("Invalid arguments to Point constructor: "+t+", "+e),this._isFrozen=!1}function Jx(t){if("string"==typeof t){t=t.split(" ");for(var e=0,n=0;""===t[e];)e++;var s=t[e++];s&&(n=parseFloat(s));for(var l=0;""===t[e];)e++;return(s=t[e++])&&(l=parseFloat(s)),new A(n,l)}return new A}function Zx(t){return t.x.toString()+" "+t.y.toString()}function Nv(t,e){if(0===t)return 0<e?90:0>e?270:0;if(0===e)return 0<t?0:180;if(isNaN(t)||isNaN(e))return 0;var n=180*Math.atan(Math.abs(e/t))/Math.PI;return 0>t?n=0>e?n+180:180-n:0>e&&(n=360-n),n}function Jn(t,e){return e.Ld(t),t}function ni(t,e,n,s,l,u){var c=l-n,d=u-s,p=c*c+d*d,g=-(n-=t)*c-(s-=e)*d;return 0>=g||g>=p?(c=l-t,d=u-e,Math.min(n*n+s*s,c*c+d*d)):(t=c*s-d*n)*t/p}function Os(t,e,n,s){return(t=n-t)*t+(e=s-e)*e}function Iv(t,e,n,s){return e=s-e,0==(t=n-t)?0<e?90:0>e?270:0:0===e?0<t?0:180:isNaN(t)||isNaN(e)?0:(s=180*Math.atan(Math.abs(e/t))/Math.PI,0>t?s=0>e?s+180:180-s:0>e&&(s=360-s),s)}Q.className="Set",Q.uniqueHash=En,Q.hashIdUnique=Dh,Q.hashId=Cn,xi.prototype.reset=function(){this.na=this.la.Ia,this.ra=null},xi.prototype.next=function(){var t=this.la;if(t.Ia!==this.na&&null===this.key)return!1;var e=this.ra;return null!==(e=null===e?t.ea:e.ta)?(this.ra=e,this.value=this.key=t=e.key,!0):(this.Xd(),!1)},xi.prototype.ud=function(){return this.next()},xi.prototype.first=function(){var t=this.la;return this.na=t.Ia,null!==(t=t.ea)?(this.ra=t,this.value=this.key=t=t.key):null},xi.prototype.any=function(t){var e=this.la;for(this.ra=null,e=e.ea;null!==e;){if(t(e.key))return!0;e=e.ta}return!1},xi.prototype.all=function(t){var e=this.la;for(this.ra=null,e=e.ea;null!==e;){if(!t(e.key))return!1;e=e.ta}return!0},xi.prototype.each=function(t){var e=this.la;for(this.ra=null,e=e.ea;null!==e;)t(e.key),e=e.ta;return this},xi.prototype.map=function(t){var e=this.la;this.ra=null;var n=new tt;for(e=e.ea;null!==e;)n.add(t(e.key)),e=e.ta;return n.iterator},xi.prototype.filter=function(t){var e=this.la;this.ra=null;var n=new tt;for(e=e.ea;null!==e;){var s=e.key;t(s)&&n.add(s),e=e.ta}return n.iterator},xi.prototype.Xd=function(){this.value=this.key=null,this.na=-1},xi.prototype.toString=function(){return null!==this.ra?"MapKeySetIterator@"+this.ra.value:"MapKeySetIterator"},St.Object.defineProperties(xi.prototype,{iterator:{get:function(){return this}},count:{get:function(){return this.la.Ob}}}),xi.prototype.first=xi.prototype.first,xi.prototype.hasNext=xi.prototype.ud,xi.prototype.next=xi.prototype.next,xi.prototype.reset=xi.prototype.reset,xi.className="MapKeySetIterator",zt(qt,Q),(_=qt.prototype).freeze=function(){return this},_.ja=function(){return this},_.toString=function(){return"MapKeySet("+this.la.toString()+")"},_.add=function(){Y("This Set is read-only: "+this.toString())},_.contains=function(t){return this.la.contains(t)},_.has=function(t){return this.contains(t)},_.remove=function(){Y("This Set is read-only: "+this.toString())},_.delete=function(t){return this.remove(t)},_.clear=function(){Y("This Set is read-only: "+this.toString())},_.first=function(){var t=this.la.ea;return null!==t?t.key:null},qt.prototype.any=function(t){for(var e=this.la.ea;null!==e;){if(t(e.key))return!0;e=e.ta}return!1},qt.prototype.all=function(t){for(var e=this.la.ea;null!==e;){if(!t(e.key))return!1;e=e.ta}return!0},qt.prototype.each=function(t){for(var e=this.la.ea;null!==e;)t(e.key),e=e.ta;return this},qt.prototype.map=function(t){for(var e=new Q,n=this.la.ea;null!==n;)e.add(t(n.key)),n=n.ta;return e},qt.prototype.filter=function(t){for(var e=new Q,n=this.la.ea;null!==n;){var s=n.key;t(s)&&e.add(s),n=n.ta}return e},qt.prototype.copy=function(){return new qt(this.la)},qt.prototype.lv=function(){var n,t=new Q,e=this.la.Pb;for(n in e)t.add(e[n].key);return t},qt.prototype.Ea=function(){var s,t=this.la.Pb,e=Array(this.la.Ob),n=0;for(s in t)e[n]=t[s].key,n++;return e},qt.prototype.kv=function(){var n,t=new tt,e=this.la.Pb;for(n in e)t.add(e[n].key);return t},St.Object.defineProperties(qt.prototype,{count:{get:function(){return this.la.Ob}},size:{get:function(){return this.la.Ob}},iterator:{get:function(){return 0>=this.la.Ob?jo:new xi(this.la)}}}),qt.prototype.toList=qt.prototype.kv,qt.prototype.toArray=qt.prototype.Ea,qt.prototype.toSet=qt.prototype.lv,qt.prototype.first=qt.prototype.first,qt.prototype.clear=qt.prototype.clear,qt.prototype.delete=qt.prototype.delete,qt.prototype.remove=qt.prototype.remove,qt.prototype.has=qt.prototype.has,qt.prototype.contains=qt.prototype.contains,qt.prototype.add=qt.prototype.add,qt.prototype.thaw=qt.prototype.ja,qt.prototype.freeze=qt.prototype.freeze,qt.className="MapKeySet",te.prototype.reset=function(){var t=this.la;t.Xe=null,this.na=t.Ia,this.ra=null},te.prototype.next=function(){var t=this.la;if(t.Ia!==this.na&&null===this.key)return!1;var e=this.ra;return null!==(e=null===e?t.ea:e.ta)?(this.ra=e,this.value=e.value,this.key=e.key,!0):(this.Xd(),!1)},te.prototype.ud=function(){return this.next()},te.prototype.first=function(){var t=this.la;if(this.na=t.Ia,null!==(t=t.ea)){this.ra=t;var e=t.value;return this.key=t.key,this.value=e}return null},te.prototype.any=function(t){var e=this.la;for(this.ra=e.Xe=null,e=e.ea;null!==e;){if(t(e.value))return!0;e=e.ta}return!1},te.prototype.all=function(t){var e=this.la;for(this.ra=e.Xe=null,e=e.ea;null!==e;){if(!t(e.value))return!1;e=e.ta}return!0},te.prototype.each=function(t){var e=this.la;for(this.ra=e.Xe=null,e=e.ea;null!==e;)t(e.value),e=e.ta;return this},te.prototype.map=function(t){var e=this.la;this.ra=e.Xe=null;var n=new tt;for(e=e.ea;null!==e;)n.add(t(e.value)),e=e.ta;return n.iterator},te.prototype.filter=function(t){var e=this.la;this.ra=e.Xe=null;var n=new tt;for(e=e.ea;null!==e;){var s=e.value;t(s)&&n.add(s),e=e.ta}return n.iterator},te.prototype.Xd=function(){this.value=this.key=null,this.na=-1,this.la.Xe=this},te.prototype.toString=function(){return null!==this.ra?"MapValueSetIterator@"+this.ra.value:"MapValueSetIterator"},St.Object.defineProperties(te.prototype,{iterator:{get:function(){return this}},count:{get:function(){return this.la.Ob}}}),te.prototype.first=te.prototype.first,te.prototype.hasNext=te.prototype.ud,te.prototype.next=te.prototype.next,te.prototype.reset=te.prototype.reset,te.className="MapValueSetIterator",Kg.prototype.toString=function(){return"{"+this.key+":"+this.value+"}"},Kg.className="KeyValuePair",Ai.prototype.reset=function(){var t=this.la;t.Pa=null,this.na=t.Ia,this.ra=null},Ai.prototype.next=function(){var t=this.la;if(t.Ia!==this.na&&null===this.key)return!1;var e=this.ra;return null!==(e=null===e?t.ea:e.ta)?(this.ra=e,this.key=e.key,this.value=e.value,!0):(this.Xd(),!1)},Ai.prototype.ud=function(){return this.next()},Ai.prototype.first=function(){var t=this.la;return this.na=t.Ia,null!==(t=t.ea)?(this.ra=t,this.key=t.key,this.value=t.value,t):null},Ai.prototype.any=function(t){var e=this.la;for(this.ra=e.Pa=null,e=e.ea;null!==e;){if(t(e))return!0;e=e.ta}return!1},Ai.prototype.all=function(t){var e=this.la;for(this.ra=e.Pa=null,e=e.ea;null!==e;){if(!t(e))return!1;e=e.ta}return!0},Ai.prototype.each=function(t){var e=this.la;for(this.ra=e.Pa=null,e=e.ea;null!==e;)t(e),e=e.ta;return this},Ai.prototype.map=function(t){var e=this.la;this.ra=e.Pa=null;var n=new tt;for(e=e.ea;null!==e;)n.add(t(e)),e=e.ta;return n.iterator},Ai.prototype.filter=function(t){var e=this.la;this.ra=e.Pa=null;var n=new tt;for(e=e.ea;null!==e;)t(e)&&n.add(e),e=e.ta;return n.iterator},Ai.prototype.Xd=function(){this.value=this.key=null,this.na=-1,this.la.Pa=this},Ai.prototype.toString=function(){return null!==this.ra?"MapIterator@"+this.ra:"MapIterator"},St.Object.defineProperties(Ai.prototype,{iterator:{get:function(){return this}},count:{get:function(){return this.la.Ob}}}),Ai.prototype.first=Ai.prototype.first,Ai.prototype.hasNext=Ai.prototype.ud,Ai.prototype.next=Ai.prototype.next,Ai.prototype.reset=Ai.prototype.reset,Ai.className="MapIterator",(_=xt.prototype).sb=function(){var t=this.Ia;999999999<++t&&(t=0),this.Ia=t},_.freeze=function(){return this._isFrozen=!0,this},_.ja=function(){return this._isFrozen=!1,this},_.toString=function(){return"Map()#"+Cn(this)},_.add=function(t,e){this._isFrozen&&Nt(this,t);var n=t;Vt(t)&&(n=Dh(t));var s=this.Pb[n];return void 0===s?(this.Ob++,t=new Kg(t,e),this.Pb[n]=t,null===(n=this.Ye)?this.ea=t:(t.al=n,n.ta=t),this.Ye=t,this.sb()):s.value=e,this},_.set=function(t,e){return this.add(t,e)},_.addAll=function(t){if(null===t)return this;if(_n(t))for(var e=t.length,n=0;n<e;n++){var s=t[n];this.add(s.key,s.value)}else if(t instanceof xt)for(t=t.iterator;t.next();)this.add(t.key,t.value);else for(t=t.iterator;t.next();)this.add((e=t.value).key,e.value);return this},_.first=function(){return this.ea},xt.prototype.any=function(t){for(var e=this.ea;null!==e;){if(t(e))return!0;e=e.ta}return!1},xt.prototype.all=function(t){for(var e=this.ea;null!==e;){if(!t(e))return!1;e=e.ta}return!0},xt.prototype.each=function(t){for(var e=this.ea;null!==e;)t(e),e=e.ta;return this},xt.prototype.map=function(t){for(var e=new xt,n=this.ea;null!==n;)e.add(n.key,t(n)),n=n.ta;return e},xt.prototype.filter=function(t){for(var e=new xt,n=this.ea;null!==n;)t(n)&&e.add(n.key,n.value),n=n.ta;return e},(_=xt.prototype).contains=function(t){var e=t;return(!Vt(t)||void 0!==(e=Cn(t)))&&void 0!==this.Pb[e]},_.has=function(t){return this.contains(t)},_.I=function(t){var e=t;return Vt(t)&&void 0===(e=Cn(t))||void 0===(t=this.Pb[e])?null:t.value},_.get=function(t){return this.I(t)},_.remove=function(t){if(null===t)return!1;this._isFrozen&&Nt(this,t);var e=t;if(Vt(t)&&void 0===(e=Cn(t))||void 0===(t=this.Pb[e]))return!1;var n=t.ta,s=t.al;return null!==n&&(n.al=s),null!==s&&(s.ta=n),this.ea===t&&(this.ea=n),this.Ye===t&&(this.Ye=s),delete this.Pb[e],this.Ob--,this.sb(),!0},_.delete=function(t){return this.remove(t)},_.clear=function(){this._isFrozen&&Nt(this),this.Pb={},this.Ob=0,null!==this.Pa&&this.Pa.reset(),null!==this.Xe&&this.Xe.reset(),this.Ye=this.ea=null,this.sb()},xt.prototype.copy=function(){var n,t=new xt,e=this.Pb;for(n in e){var s=e[n];t.add(s.key,s.value)}return t},xt.prototype.Ea=function(){var s,t=this.Pb,e=Array(this.Ob),n=0;for(s in t){var l=t[s];e[n]=new Kg(l.key,l.value),n++}return e},xt.prototype.Cf=function(){return new qt(this)},St.Object.defineProperties(xt.prototype,{count:{get:function(){return this.Ob}},size:{get:function(){return this.Ob}},iterator:{get:function(){if(0>=this.count)return jo;var t=this.Pa;return null!==t?(t.reset(),t):new Ai(this)}},iteratorKeys:{get:function(){return 0>=this.count?jo:new xi(this)}},iteratorValues:{get:function(){if(0>=this.count)return jo;var t=this.Xe;return null!==t?(t.reset(),t):new te(this)}}}),xt.prototype.toKeySet=xt.prototype.Cf,xt.prototype.toArray=xt.prototype.Ea,xt.prototype.clear=xt.prototype.clear,xt.prototype.delete=xt.prototype.delete,xt.prototype.remove=xt.prototype.remove,xt.prototype.get=xt.prototype.get,xt.prototype.getValue=xt.prototype.I,xt.prototype.has=xt.prototype.has,xt.prototype.contains=xt.prototype.contains,xt.prototype.first=xt.prototype.first,xt.prototype.addAll=xt.prototype.addAll,xt.prototype.set=xt.prototype.set,xt.prototype.add=xt.prototype.add,xt.prototype.thaw=xt.prototype.ja,xt.prototype.freeze=xt.prototype.freeze,xt.className="Map",A.prototype.assign=function(t){return this.x=t.x,this.y=t.y,this},A.prototype.h=function(t,e){return this.x=t,this.y=e,this},A.prototype.kg=function(t,e){return this.x=t,this.y=e,this},A.prototype.set=function(t){return this.x=t.x,this.y=t.y,this},A.prototype.copy=function(){var t=new A;return t.x=this.x,t.y=this.y,t},(_=A.prototype).ha=function(){return this._isFrozen=!0,Object.freeze(this),this},_.J=function(){return this._isFrozen||Object.isFrozen(this)?this:this.copy().freeze()},_.freeze=function(){return this._isFrozen=!0,this},_.ja=function(){return Object.isFrozen(this)&&Y("cannot thaw constant: "+this),this._isFrozen=!1,this},_.toString=function(){return"Point("+this.x+","+this.y+")"},_.C=function(t){return t instanceof A&&this.x===t.x&&this.y===t.y},_.bi=function(t,e){return this.x===t&&this.y===e},_.$a=function(t){return R.B(this.x,t.x)&&R.B(this.y,t.y)},_.add=function(t){return this.x+=t.x,this.y+=t.y,this},_.je=function(t){return this.x-=t.x,this.y-=t.y,this},_.offset=function(t,e){return this.x+=t,this.y+=e,this},A.prototype.rotate=function(t){if(0===t)return this;var e=this.x,n=this.y;if(0===e&&0===n)return this;if(360<=t?t-=360:0>t&&(t+=360),90===t){t=0;var s=1}else 180===t?(t=-1,s=0):270===t?(t=0,s=-1):(s=t*Math.PI/180,t=Math.cos(s),s=Math.sin(s));return this.x=t*e-s*n,this.y=s*e+t*n,this},(_=A.prototype).scale=function(t,e){return this.x*=t,this.y*=e,this},_.rf=function(t){var e=t.x-this.x;return e*e+(t=t.y-this.y)*t},_.td=function(t,e){return(t-=this.x)*t+(e-=this.y)*e},_.normalize=function(){var t=this.x,e=this.y,n=Math.sqrt(t*t+e*e);return 0<n&&(this.x=t/n,this.y=e/n),this},_.Ya=function(t){return Nv(t.x-this.x,t.y-this.y)},_.direction=function(t,e){return Nv(t-this.x,e-this.y)},_.yy=function(t,e){return R.sl(t.x,t.y,e.x,e.y,this.x,this.y)},_.Mz=function(t,e,n,s){return R.fh(t,e,n,s,this.x,this.y,this),this},_.Nz=function(t,e){return R.fh(t.x,t.y,e.x,e.y,this.x,this.y,this),this},_.aA=function(t,e,n,s){return R.so(this.x,this.y,t,e,n,s,this),this},_.bA=function(t,e){return R.so(this.x,this.y,t.x,t.y,e.width,e.height,this),this},_.oi=function(t,e){return this.x=t.x+e.x*t.width+e.offsetX,this.y=t.y+e.y*t.height+e.offsetY,this},_.pi=function(t,e,n,s,l){return this.x=t+l.x*n+l.offsetX,this.y=e+l.y*s+l.offsetY,this},_.transform=function(t){return t.Fa(this),this},_.v=function(){return isFinite(this.x)&&isFinite(this.y)},A.alloc=function(){var t=Zt.pop();return void 0===t?new A:t},A.allocAt=function(t,e){var n=Zt.pop();return void 0===n?new A(t,e):(n.x=t,n.y=e,n)},A.free=function(t){Zt.push(t)},A.prototype.isReal=A.prototype.v,A.prototype.setSpot=A.prototype.pi,A.prototype.setRectSpot=A.prototype.oi,A.prototype.snapToGridPoint=A.prototype.bA,A.prototype.snapToGrid=A.prototype.aA,A.prototype.projectOntoLineSegmentPoint=A.prototype.Nz,A.prototype.projectOntoLineSegment=A.prototype.Mz,A.intersectingLineSegments=function(t,e,n,s,l,u,c,d){return R.zl(t,e,n,s,l,u,c,d)},A.prototype.compareWithLineSegmentPoint=A.prototype.yy,A.compareWithLineSegment=function(t,e,n,s,l,u){return R.sl(t,e,n,s,l,u)},A.prototype.direction=A.prototype.direction,A.prototype.directionPoint=A.prototype.Ya,A.prototype.normalize=A.prototype.normalize,A.prototype.distanceSquared=A.prototype.td,A.prototype.distanceSquaredPoint=A.prototype.rf,A.prototype.scale=A.prototype.scale,A.prototype.rotate=A.prototype.rotate,A.prototype.offset=A.prototype.offset,A.prototype.subtract=A.prototype.je,A.prototype.add=A.prototype.add,A.prototype.equalsApprox=A.prototype.$a,A.prototype.equalTo=A.prototype.bi,A.prototype.equals=A.prototype.C,A.prototype.set=A.prototype.set,A.prototype.setTo=A.prototype.kg;var _h,wo,Yg,Wc,Nl,cs,Av,Zt=[];function gt(t,e){void 0===t?this.height=this.width=0:"number"==typeof t&&(0<=t||isNaN(t))&&"number"==typeof e&&(0<=e||isNaN(e))?(this.width=t,this.height=e):Y("Invalid arguments to Size constructor: "+t+", "+e),this._isFrozen=!1}function US(t){if("string"==typeof t){t=t.split(" ");for(var e=0,n=0;""===t[e];)e++;var s=t[e++];s&&(n=parseFloat(s));for(var l=0;""===t[e];)e++;return(s=t[e++])&&(l=parseFloat(s)),new gt(n,l)}return new gt}function Ls(t){return t.width.toString()+" "+t.height.toString()}A.className="Point",A.parse=Jx,A.stringify=Zx,A.distanceLineSegmentSquared=ni,A.distanceSquared=Os,A.direction=Iv,A.Origin=Va=new A(0,0).ha(),A.InfiniteTopLeft=Xn=new A(-1/0,-1/0).ha(),A.InfiniteBottomRight=$c=new A(1/0,1/0).ha(),A.SixPoint=Pv=new A(6,6).ha(),A.NoPoint=Wd=new A(NaN,NaN).ha(),A.parse=Jx,A.stringify=Zx,A.distanceLineSegmentSquared=ni,A.distanceSquared=Os,A.direction=Iv,gt.prototype.assign=function(t){return this.width=t.width,this.height=t.height,this},gt.prototype.h=function(t,e){return this.width=t,this.height=e,this},gt.prototype.kg=function(t,e){return this.width=t,this.height=e,this},gt.prototype.set=function(t){return this.width=t.width,this.height=t.height,this},gt.prototype.copy=function(){var t=new gt;return t.width=this.width,t.height=this.height,t},(_=gt.prototype).ha=function(){return this._isFrozen=!0,Object.freeze(this),this},_.J=function(){return this._isFrozen||Object.isFrozen(this)?this:this.copy().freeze()},_.freeze=function(){return this._isFrozen=!0,this},_.ja=function(){return Object.isFrozen(this)&&Y("cannot thaw constant: "+this),this._isFrozen=!1,this},_.toString=function(){return"Size("+this.width+","+this.height+")"},_.C=function(t){return t instanceof gt&&this.width===t.width&&this.height===t.height},_.bi=function(t,e){return this.width===t&&this.height===e},_.$a=function(t){return R.B(this.width,t.width)&&R.B(this.height,t.height)},_.vc=function(t,e){return this.width=0<=(t=this.width+t)?t:0,this.height=0<=(e=this.height+e)?e:0,this},_.v=function(){return isFinite(this.width)&&isFinite(this.height)},gt.alloc=function(){var t=bn.pop();return void 0===t?new gt:t},gt.free=function(t){bn.push(t)},gt.prototype.isReal=gt.prototype.v,gt.prototype.inflate=gt.prototype.vc,gt.prototype.equalsApprox=gt.prototype.$a,gt.prototype.equalTo=gt.prototype.bi,gt.prototype.equals=gt.prototype.C,gt.prototype.set=gt.prototype.set,gt.prototype.setTo=gt.prototype.kg;var bn=[];function U(t,e,n,s){void 0===t?this.height=this.width=this.y=this.x=0:"number"==typeof t&&"number"==typeof e&&"number"==typeof n&&(0<=n||isNaN(n))&&"number"==typeof s&&(0<=s||isNaN(s))?(this.x=t,this.y=e,this.width=n,this.height=s):t instanceof A?(n=t.x,t=t.y,e instanceof A?(s=e.x,e=e.y,this.x=Math.min(n,s),this.y=Math.min(t,e),this.width=Math.abs(n-s),this.height=Math.abs(t-e)):e instanceof gt?(this.x=n,this.y=t,this.width=e.width,this.height=e.height):Y("Incorrect second argument supplied to Rect constructor "+e)):Y("Invalid arguments to Rect constructor: "+t+", "+e+", "+n+", "+s),this._isFrozen=!1}function Ba(t,e,n){t.width=e,t.height=n}function Th(t){if("string"==typeof t){t=t.split(" ");for(var e=0,n=0;""===t[e];)e++;var s=t[e++];s&&(n=parseFloat(s));for(var l=0;""===t[e];)e++;(s=t[e++])&&(l=parseFloat(s));for(var u=0;""===t[e];)e++;(s=t[e++])&&(u=parseFloat(s));for(var c=0;""===t[e];)e++;return(s=t[e++])&&(c=parseFloat(s)),new U(n,l,u,c)}return new U}function an(t){return t.x.toString()+" "+t.y.toString()+" "+t.width.toString()+" "+t.height.toString()}function Kc(t,e){return R.ca(t.x,e.x)&&R.ca(t.y,e.y)&&R.ca(t.width,e.width)&&R.ca(t.height,e.height)}function Yc(t,e,n,s,l){var u=t.width;return n+l<=-u?(t.x+=u/2,t.width=0):(t.x-=l,t.width+=n+l),e+s<=-(n=t.height)?(t.y+=n/2,t.height=0):(t.y-=e,t.height+=e+s),t}function Xg(t,e,n,s,l){var u=Math.max(t.x,e),c=Math.max(t.y,n);return e=Math.min(t.x+t.width,e+s),n=Math.min(t.y+t.height,n+l),t.x=u,t.y=c,t.width=Math.max(0,e-u),t.height=Math.max(0,n-c),t}function kv(t,e){var n=t.width,s=t.x,l=e.x-10;return!(s>e.width+10+10+l||l>n+s||(n=t.height,(t=t.y)>e.height+10+10+(s=e.y-10)||s>n+t))}function Ke(t,e,n,s,l){var u=Math.min(t.x,e),c=Math.min(t.y,n);return e=Math.max(t.x+t.width,e+s),n=Math.max(t.y+t.height,n+l),t.x=u,t.y=c,t.width=e-u,t.height=n-c,t}function vr(t,e,n,s,l,u,c,d){return void 0===c&&(c=0),void 0===d&&(d=0),t<=l&&l+c<=t+n&&e<=u&&u+d<=e+s}function Qx(t,e,n,s,l,u,c,d){return!(t>c+l||l>n+t||e>d+u||u>s+e)}gt.className="Size",gt.parse=US,gt.stringify=Ls,gt.ZeroSize=_h=new gt(0,0).ha(),gt.OneSize=wo=new gt(1,1).ha(),gt.SixSize=Yg=new gt(6,6).ha(),gt.EightSize=Wc=new gt(8,8).ha(),gt.TenSize=Nl=new gt(10,10).ha(),gt.InfiniteSize=cs=new gt(1/0,1/0).ha(),gt.NoSize=Av=new gt(NaN,NaN).ha(),gt.parse=US,gt.stringify=Ls,(_=U.prototype).assign=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},_.h=function(t,e,n,s){return this.x=t,this.y=e,this.width=n,this.height=s,this},_.kg=function(t,e,n,s){return this.x=t,this.y=e,this.width=n,this.height=s,this},_.set=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},_.Wc=function(t){return this.x=t.x,this.y=t.y,this},_.$z=function(t){return this.width=t.width,this.height=t.height,this},U.prototype.copy=function(){var t=new U;return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},(_=U.prototype).ha=function(){return this._isFrozen=!0,Object.freeze(this),this},_.J=function(){return this._isFrozen||Object.isFrozen(this)?this:this.copy().freeze()},_.freeze=function(){return this._isFrozen=!0,this},_.ja=function(){return Object.isFrozen(this)&&Y("cannot thaw constant: "+this),this._isFrozen=!1,this},_.toString=function(){return"Rect("+this.x+","+this.y+","+this.width+","+this.height+")"},_.C=function(t){return t instanceof U&&this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height},_.bi=function(t,e,n,s){return this.x===t&&this.y===e&&this.width===n&&this.height===s},_.$a=function(t){return R.B(this.x,t.x)&&R.B(this.y,t.y)&&R.B(this.width,t.width)&&R.B(this.height,t.height)},_.ba=function(t){return this.x<=t.x&&this.x+this.width>=t.x&&this.y<=t.y&&this.y+this.height>=t.y},_.Ee=function(t){return this.x<=t.x&&t.x+t.width<=this.x+this.width&&this.y<=t.y&&t.y+t.height<=this.y+this.height},_.contains=function(t,e,n,s){return void 0===n&&(n=0),void 0===s&&(s=0),this.x<=t&&t+n<=this.x+this.width&&this.y<=e&&e+s<=this.y+this.height},_.offset=function(t,e){return this.x+=t,this.y+=e,this},_.vc=function(t,e){return Yc(this,e,t,e,t)},_.fo=function(t){return Yc(this,t.top,t.right,t.bottom,t.left)},_.jv=function(t){return Yc(this,-t.top,-t.right,-t.bottom,-t.left)},_.oz=function(t,e,n,s){return Yc(this,t,e,n,s)},_.ix=function(t){return Xg(this,t.x,t.y,t.width,t.height)},_.Gu=function(t,e,n,s){return Xg(this,t,e,n,s)},_.Sc=function(t){return this.Hu(t.x,t.y,t.width,t.height)},_.Hu=function(t,e,n,s){var l=this.width,u=this.x;return!(l!==1/0&&n!==1/0&&(l+=u,n+=t,isNaN(n)||isNaN(l)||u>n||t>l)||(n=this.y,(t=this.height)!==1/0&&s!==1/0&&(t+=n,s+=e,isNaN(s)||isNaN(t)||n>s||e>t)))},_.Me=function(t){return Ke(this,t.x,t.y,0,0)},_.Xc=function(t){return Ke(this,t.x,t.y,t.width,t.height)},_.nv=function(t,e,n,s){return void 0===n&&(n=0),void 0===s&&(s=0),Ke(this,t,e,n,s)},_.pi=function(t,e,n){return this.x=t-n.offsetX-n.x*this.width,this.y=e-n.offsetY-n.y*this.height,this},_.v=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},_.vz=function(){return 0===this.width&&0===this.height},U.alloc=function(){var t=Jg.pop();return void 0===t?new U:t},U.allocAt=function(t,e,n,s){var l=Jg.pop();return void 0===l?new U(t,e,n,s):l.h(t,e,n,s)},U.free=function(t){Jg.push(t)},St.Object.defineProperties(U.prototype,{left:{get:function(){return this.x},set:function(t){this.x=t}},top:{get:function(){return this.y},set:function(t){this.y=t}},right:{get:function(){return this.x+this.width},set:function(t){this.x+=t-(this.x+this.width)}},bottom:{get:function(){return this.y+this.height},set:function(t){this.y+=t-(this.y+this.height)}},position:{get:function(){return new A(this.x,this.y)},set:function(t){this.x=t.x,this.y=t.y}},size:{get:function(){return new gt(this.width,this.height)},set:function(t){this.width=t.width,this.height=t.height}},center:{get:function(){return new A(this.x+this.width/2,this.y+this.height/2)},set:function(t){this.x=t.x-this.width/2,this.y=t.y-this.height/2}},centerX:{get:function(){return this.x+this.width/2},set:function(t){this.x=t-this.width/2}},centerY:{get:function(){return this.y+this.height/2},set:function(t){this.y=t-this.height/2}}}),U.prototype.isEmpty=U.prototype.vz,U.prototype.isReal=U.prototype.v,U.intersectsLineSegment=function(t,e,n,s,l,u,c,d){return R.jx(t,e,n,s,l,u,c,d)},U.prototype.setSpot=U.prototype.pi,U.prototype.union=U.prototype.nv,U.prototype.unionRect=U.prototype.Xc,U.prototype.unionPoint=U.prototype.Me,U.prototype.intersects=U.prototype.Hu,U.prototype.intersectsRect=U.prototype.Sc,U.prototype.intersect=U.prototype.Gu,U.prototype.intersectRect=U.prototype.ix,U.prototype.grow=U.prototype.oz,U.prototype.subtractMargin=U.prototype.jv,U.prototype.addMargin=U.prototype.fo,U.prototype.inflate=U.prototype.vc,U.prototype.offset=U.prototype.offset,U.prototype.contains=U.prototype.contains,U.prototype.containsRect=U.prototype.Ee,U.prototype.containsPoint=U.prototype.ba,U.prototype.equalsApprox=U.prototype.$a,U.prototype.equalTo=U.prototype.bi,U.prototype.equals=U.prototype.C,U.prototype.setSize=U.prototype.$z,U.prototype.setPoint=U.prototype.Wc,U.prototype.set=U.prototype.set,U.prototype.setTo=U.prototype.kg;var Lr,qx,Jg=[];function Ht(t,e,n,s){void 0===t?this.left=this.bottom=this.right=this.top=0:void 0===e?this.left=this.bottom=this.right=this.top=t:void 0===n?(this.top=t,this.right=e,this.bottom=t,this.left=e):void 0!==s?(this.top=t,this.right=e,this.bottom=n,this.left=s):Y("Invalid arguments to Margin constructor: "+t+", "+e+", "+n+", "+s),this._isFrozen=!1}function ci(t){if("string"==typeof t){t=t.split(" ");for(var e=0,n=NaN;""===t[e];)e++;var s=t[e++];if(s&&(n=parseFloat(s)),isNaN(n))return new Ht;for(var l=NaN;""===t[e];)e++;if((s=t[e++])&&(l=parseFloat(s)),isNaN(l))return new Ht(n);for(var u=NaN;""===t[e];)e++;if((s=t[e++])&&(u=parseFloat(s)),isNaN(u))return new Ht(n,l);for(var c=NaN;""===t[e];)e++;return(s=t[e++])&&(c=parseFloat(s)),isNaN(c)?new Ht(n,l):new Ht(n,l,u,c)}return new Ht}function t1(t){return t.top.toString()+" "+t.right.toString()+" "+t.bottom.toString()+" "+t.left.toString()}U.className="Rect",U.parse=Th,U.stringify=an,U.contains=vr,U.intersects=Qx,U.ZeroRect=Lr=new U(0,0,0,0).ha(),U.NoRect=qx=new U(NaN,NaN,NaN,NaN).ha(),U.parse=Th,U.stringify=an,U.contains=vr,U.intersects=Qx,Ht.prototype.assign=function(t){return this.top=t.top,this.right=t.right,this.bottom=t.bottom,this.left=t.left,this},Ht.prototype.kg=function(t,e,n,s){return this.top=t,this.right=e,this.bottom=n,this.left=s,this},Ht.prototype.set=function(t){return this.top=t.top,this.right=t.right,this.bottom=t.bottom,this.left=t.left,this},Ht.prototype.copy=function(){var t=new Ht;return t.top=this.top,t.right=this.right,t.bottom=this.bottom,t.left=this.left,t},(_=Ht.prototype).ha=function(){return this._isFrozen=!0,Object.freeze(this),this},_.J=function(){return this._isFrozen||Object.isFrozen(this)?this:this.copy().freeze()},_.freeze=function(){return this._isFrozen=!0,this},_.ja=function(){return Object.isFrozen(this)&&Y("cannot thaw constant: "+this),this._isFrozen=!1,this},_.toString=function(){return"Margin("+this.top+","+this.right+","+this.bottom+","+this.left+")"},_.C=function(t){return t instanceof Ht&&this.top===t.top&&this.right===t.right&&this.bottom===t.bottom&&this.left===t.left},_.bi=function(t,e,n,s){return this.top===t&&this.right===e&&this.bottom===n&&this.left===s},_.$a=function(t){return R.B(this.top,t.top)&&R.B(this.right,t.right)&&R.B(this.bottom,t.bottom)&&R.B(this.left,t.left)},_.v=function(){return isFinite(this.top)&&isFinite(this.right)&&isFinite(this.bottom)&&isFinite(this.left)},Ht.alloc=function(){var t=xo.pop();return void 0===t?new Ht:t},Ht.free=function(t){xo.push(t)},Ht.prototype.isReal=Ht.prototype.v,Ht.prototype.equalsApprox=Ht.prototype.$a,Ht.prototype.equalTo=Ht.prototype.bi,Ht.prototype.equals=Ht.prototype.C,Ht.prototype.set=Ht.prototype.set,Ht.prototype.setTo=Ht.prototype.kg;var Eh,Xt,Oe,je,Qr,wr,qr,ht,ve,Mn,sr,xr,fi,Fs,On,Ua,Ph,De,Xc,Mu,Kd,Il,Cr,Nh,Su,fs,Du,Zn,Ln,e1,Zg,Yd,Mr,Wi,Ci,Mi,Sr,bv,xo=[];function ot(t,e,n,s){void 0===t?this.offsetY=this.offsetX=this.y=this.x=0:(void 0===e&&(e=0),void 0===n&&(n=0),void 0===s&&(s=0),this.x=t,this.y=e,this.offsetX=n,this.offsetY=s),this._isFrozen=!1}function wn(t,e){return t.x=NaN,t.y=NaN,t.offsetX=e,t}function ds(t){if("string"==typeof t){if("None"===(t=t.trim()))return Oe;if("TopLeft"===t)return je;if("Top"===t||"TopCenter"===t||"MiddleTop"===t)return Qr;if("TopRight"===t)return wr;if("Left"===t||"LeftCenter"===t||"MiddleLeft"===t)return qr;if("Center"===t)return ht;if("Right"===t||"RightCenter"===t||"MiddleRight"===t)return ve;if("BottomLeft"===t)return Mn;if("Bottom"===t||"BottomCenter"===t||"MiddleBottom"===t)return sr;if("BottomRight"===t)return xr;if("TopSide"===t)return fi;if("LeftSide"===t)return Fs;if("RightSide"===t)return On;if("BottomSide"===t)return Ua;if("TopBottomSides"===t)return Ph;if("LeftRightSides"===t)return De;if("TopLeftSides"===t)return Xc;if("TopRightSides"===t)return Mu;if("BottomLeftSides"===t)return Kd;if("BottomRightSides"===t)return Il;if("NotTopSide"===t)return Cr;if("NotLeftSide"===t)return Nh;if("NotRightSide"===t)return Su;if("NotBottomSide"===t)return fs;if("AllSides"===t)return Du;if("Default"===t)return Zn;t=t.split(" ");for(var e=0,n=0;""===t[e];)e++;var s=t[e++];void 0!==s&&0<s.length&&(n=parseFloat(s));for(var l=0;""===t[e];)e++;void 0!==(s=t[e++])&&0<s.length&&(l=parseFloat(s));for(var u=0;""===t[e];)e++;void 0!==(s=t[e++])&&0<s.length&&(u=parseFloat(s));for(var c=0;""===t[e];)e++;return void 0!==(s=t[e++])&&0<s.length&&(c=parseFloat(s)),new ot(n,l,u,c)}return new ot}function Qg(t){return t.pb()?t.x.toString()+" "+t.y.toString()+" "+t.offsetX.toString()+" "+t.offsetY.toString():t.toString()}Ht.className="Margin",Ht.parse=ci,Ht.stringify=t1,Ht.ZeroMargin=Eh=new Ht(0,0,0,0).ha(),Ht.TwoMargin=Xt=new Ht(2,2,2,2).ha(),Ht.parse=ci,Ht.stringify=t1,ot.prototype.assign=function(t){return this.x=t.x,this.y=t.y,this.offsetX=t.offsetX,this.offsetY=t.offsetY,this},ot.prototype.kg=function(t,e,n,s){return this.x=t,this.y=e,this.offsetX=n,this.offsetY=s,this},ot.prototype.set=function(t){return this.x=t.x,this.y=t.y,this.offsetX=t.offsetX,this.offsetY=t.offsetY,this},ot.prototype.copy=function(){var t=new ot;return t.x=this.x,t.y=this.y,t.offsetX=this.offsetX,t.offsetY=this.offsetY,t},(_=ot.prototype).ha=function(){return this._isFrozen=!0,Object.freeze(this),this},_.J=function(){return this._isFrozen||Object.isFrozen(this)?this:this.copy().freeze()},_.freeze=function(){return this._isFrozen=!0,this},_.ja=function(){return Object.isFrozen(this)&&Y("cannot thaw constant: "+this),this._isFrozen=!1,this},_.toString=function(){return this.pb()?0===this.offsetX&&0===this.offsetY?"Spot("+this.x+","+this.y+")":"Spot("+this.x+","+this.y+","+this.offsetX+","+this.offsetY+")":this.C(Oe)?"None":this.C(je)?"TopLeft":this.C(Qr)?"Top":this.C(wr)?"TopRight":this.C(qr)?"Left":this.C(ht)?"Center":this.C(ve)?"Right":this.C(Mn)?"BottomLeft":this.C(sr)?"Bottom":this.C(xr)?"BottomRight":this.C(fi)?"TopSide":this.C(Fs)?"LeftSide":this.C(On)?"RightSide":this.C(Ua)?"BottomSide":this.C(Ph)?"TopBottomSides":this.C(De)?"LeftRightSides":this.C(Xc)?"TopLeftSides":this.C(Mu)?"TopRightSides":this.C(Kd)?"BottomLeftSides":this.C(Il)?"BottomRightSides":this.C(Cr)?"NotTopSide":this.C(Nh)?"NotLeftSide":this.C(Su)?"NotRightSide":this.C(fs)?"NotBottomSide":this.C(Du)?"AllSides":this.C(Zn)?"Default":"None"},_.C=function(t){return t instanceof ot&&(this.x===t.x||isNaN(this.x)&&isNaN(t.x))&&(this.y===t.y||isNaN(this.y)&&isNaN(t.y))&&this.offsetX===t.offsetX&&this.offsetY===t.offsetY},_.Qu=function(){return new ot(.5-(this.x-.5),.5-(this.y-.5),-this.offsetX,-this.offsetY)},_.xf=function(t){if(!this.Uc())return!1;if(!t.Uc())if(t.C(Ln))t=Fs;else if(t.C(e1))t=On;else if(t.C(Zg))t=fi;else{if(!t.C(Yd))return!1;t=Ua}return(this.offsetY&(t=t.offsetY))===t},_.pb=function(){return!isNaN(this.x)&&!isNaN(this.y)},_.Fc=function(){return isNaN(this.x)||isNaN(this.y)},_.Uc=function(){return isNaN(this.x)&&isNaN(this.y)&&1===this.offsetX&&0!==this.offsetY},_.Wr=function(){return isNaN(this.x)&&isNaN(this.y)&&0===this.offsetX&&0===this.offsetY},_.Sb=function(){return isNaN(this.x)&&isNaN(this.y)&&-1===this.offsetX&&0===this.offsetY},ot.alloc=function(){var t=Xd.pop();return void 0===t?new ot:t},ot.free=function(t){Xd.push(t)},ot.prototype.isDefault=ot.prototype.Sb,ot.prototype.isNone=ot.prototype.Wr,ot.prototype.isSide=ot.prototype.Uc,ot.prototype.isNoSpot=ot.prototype.Fc,ot.prototype.isSpot=ot.prototype.pb,ot.prototype.includesSide=ot.prototype.xf,ot.prototype.opposite=ot.prototype.Qu,ot.prototype.equals=ot.prototype.C,ot.prototype.set=ot.prototype.set,ot.prototype.setTo=ot.prototype.kg;var Xd=[];function Dt(){this.m11=1,this.m21=this.m12=0,this.m22=1,this.dy=this.dx=0}ot.className="Spot",ot.parse=ds,ot.stringify=Qg,ot.None=Oe=wn(new ot(0,0,0,0),0).ha(),ot.Default=Zn=wn(new ot(0,0,-1,0),-1).ha(),ot.TopLeft=je=new ot(0,0,0,0).ha(),ot.TopCenter=Qr=new ot(.5,0,0,0).ha(),ot.TopRight=wr=new ot(1,0,0,0).ha(),ot.LeftCenter=qr=new ot(0,.5,0,0).ha(),ot.Center=ht=new ot(.5,.5,0,0).ha(),ot.RightCenter=ve=new ot(1,.5,0,0).ha(),ot.BottomLeft=Mn=new ot(0,1,0,0).ha(),ot.BottomCenter=sr=new ot(.5,1,0,0).ha(),ot.BottomRight=xr=new ot(1,1,0,0).ha(),ot.MiddleTop=Mr=Qr,ot.MiddleLeft=Wi=qr,ot.MiddleRight=Ci=ve,ot.MiddleBottom=Mi=sr,ot.Top=Zg=Qr,ot.Left=Ln=qr,ot.Right=e1=ve,ot.Bottom=Yd=sr,ot.TopSide=fi=wn(new ot(0,0,1,1),1).ha(),ot.LeftSide=Fs=wn(new ot(0,0,1,2),1).ha(),ot.RightSide=On=wn(new ot(0,0,1,4),1).ha(),ot.BottomSide=Ua=wn(new ot(0,0,1,8),1).ha(),ot.TopBottomSides=Ph=wn(new ot(0,0,1,9),1).ha(),ot.LeftRightSides=De=wn(new ot(0,0,1,6),1).ha(),ot.TopLeftSides=Xc=wn(new ot(0,0,1,3),1).ha(),ot.TopRightSides=Mu=wn(new ot(0,0,1,5),1).ha(),ot.BottomLeftSides=Kd=wn(new ot(0,0,1,10),1).ha(),ot.BottomRightSides=Il=wn(new ot(0,0,1,12),1).ha(),ot.NotTopSide=Cr=wn(new ot(0,0,1,14),1).ha(),ot.NotLeftSide=Nh=wn(new ot(0,0,1,13),1).ha(),ot.NotRightSide=Su=wn(new ot(0,0,1,11),1).ha(),ot.NotBottomSide=fs=wn(new ot(0,0,1,7),1).ha(),ot.AllSides=Du=wn(new ot(0,0,1,15),1).ha(),Sr=new ot(.156,.156).ha(),bv=new ot(.844,.844).ha(),ot.parse=ds,ot.stringify=Qg,Dt.prototype.set=function(t){return this.m11=t.m11,this.m12=t.m12,this.m21=t.m21,this.m22=t.m22,this.dx=t.dx,this.dy=t.dy,this},Dt.prototype.setTransform=function(t,e,n,s,l,u){return this.m11=t,this.m12=e,this.m21=n,this.m22=s,this.dx=l,this.dy=u,this},Dt.prototype.copy=function(){var t=new Dt;return t.m11=this.m11,t.m12=this.m12,t.m21=this.m21,t.m22=this.m22,t.dx=this.dx,t.dy=this.dy,t},Dt.prototype.toString=function(){return"Transform("+this.m11+","+this.m12+","+this.m21+","+this.m22+","+this.dx+","+this.dy+")"},Dt.prototype.C=function(t){return this.m11===t.m11&&this.m12===t.m12&&this.m21===t.m21&&this.m22===t.m22&&this.dx===t.dx&&this.dy===t.dy},Dt.prototype.Ur=function(){return 0===this.dx&&0===this.dy&&1===this.m11&&0===this.m12&&0===this.m21&&1===this.m22},Dt.prototype.reset=function(){return this.m11=1,this.m21=this.m12=0,this.m22=1,this.dy=this.dx=0,this},Dt.prototype.multiply=function(t){var e=this.m11*t.m11+this.m21*t.m12,n=this.m12*t.m11+this.m22*t.m12,s=this.m11*t.m21+this.m21*t.m22,l=this.m12*t.m21+this.m22*t.m22;return this.dx=this.m11*t.dx+this.m21*t.dy+this.dx,this.dy=this.m12*t.dx+this.m22*t.dy+this.dy,this.m11=e,this.m12=n,this.m21=s,this.m22=l,this},Dt.prototype.Ou=function(t){var e=1/(t.m11*t.m22-t.m12*t.m21),n=t.m22*e,s=-t.m12*e,l=-t.m21*e,u=t.m11*e,c=e*(t.m21*t.dy-t.m22*t.dx);return t=e*(t.m12*t.dx-t.m11*t.dy),e=this.m11*n+this.m21*s,n=this.m12*n+this.m22*s,s=this.m11*l+this.m21*u,l=this.m12*l+this.m22*u,this.dx=this.m11*c+this.m21*t+this.dx,this.dy=this.m12*c+this.m22*t+this.dy,this.m11=e,this.m12=n,this.m21=s,this.m22=l,this},Dt.prototype.Tr=function(){var t=1/(this.m11*this.m22-this.m12*this.m21),e=-this.m12*t,n=-this.m21*t,s=this.m11*t,l=t*(this.m21*this.dy-this.m22*this.dx),u=t*(this.m12*this.dx-this.m11*this.dy);return this.m11=this.m22*t,this.m12=e,this.m21=n,this.m22=s,this.dx=l,this.dy=u,this},Dt.prototype.rotate=function(t,e,n){if(360<=t?t-=360:0>t&&(t+=360),0===t)return this;if(this.translate(e,n),90===t){t=0;var s=1}else 180===t?(t=-1,s=0):270===t?(t=0,s=-1):(s=t*Math.PI/180,t=Math.cos(s),s=Math.sin(s));var l=this.m12*t+this.m22*s,u=this.m11*-s+this.m21*t,c=this.m12*-s+this.m22*t;return this.m11=this.m11*t+this.m21*s,this.m12=l,this.m21=u,this.m22=c,this.translate(-e,-n),this},(_=Dt.prototype).translate=function(t,e){return this.dx+=this.m11*t+this.m21*e,this.dy+=this.m12*t+this.m22*e,this},_.scale=function(t,e){return void 0===e&&(e=t),this.m11*=t,this.m12*=t,this.m21*=e,this.m22*=e,this},_.Fa=function(t){var e=t.x,n=t.y;return t.h(e*this.m11+n*this.m21+this.dx,e*this.m12+n*this.m22+this.dy)},_.Ld=function(t){var e=1/(this.m11*this.m22-this.m12*this.m21),n=t.x,s=t.y;return t.h(n*this.m22*e+s*-this.m21*e+e*(this.m21*this.dy-this.m22*this.dx),n*-this.m12*e+s*this.m11*e+e*(this.m12*this.dx-this.m11*this.dy))},_.Fw=function(t){var e=1/(this.m11*this.m22-this.m12*this.m21),n=1.25*t.x,s=1.2*t.y;return t.h(n*this.m22*e+s*-this.m21*e+e*(this.m21*this.dy-this.m22*this.dx),n*-this.m12*e+s*this.m11*e+e*(this.m12*this.dx-this.m11*this.dy))},_.So=function(t){var e=t.x,n=t.y,s=e+t.width,l=n+t.height,u=this.m11,c=this.m12,d=this.m21,p=this.m22,g=this.dx,y=this.dy,w=e*u+n*d+g,C=e*c+n*p+y,D=s*u+n*d+g,M=s*c+n*p+y;return n=e*u+l*d+g,e=e*c+l*p+y,u=s*u+l*d+g,s=s*c+l*p+y,l=Math.min(w,D),w=Math.max(w,D),D=Math.min(C,M),C=Math.max(C,M),l=Math.min(l,n),w=Math.max(w,n),D=Math.min(D,e),C=Math.max(C,e),l=Math.min(l,u),w=Math.max(w,u),D=Math.min(D,s),C=Math.max(C,s),t.h(l,D,w-l,C-D),t},Dt.alloc=function(){var t=Rs.pop();return void 0===t?new Dt:t},Dt.free=function(t){Rs.push(t)},Dt.prototype.transformRect=Dt.prototype.So,Dt.prototype.transformPoint=Dt.prototype.Fa,Dt.prototype.scale=Dt.prototype.scale,Dt.prototype.translate=Dt.prototype.translate,Dt.prototype.rotate=Dt.prototype.rotate,Dt.prototype.invert=Dt.prototype.Tr,Dt.prototype.multiplyInverted=Dt.prototype.Ou,Dt.prototype.multiply=Dt.prototype.multiply,Dt.prototype.reset=Dt.prototype.reset,Dt.prototype.isIdentity=Dt.prototype.Ur,Dt.prototype.equals=Dt.prototype.C,Dt.prototype.setTransform=Dt.prototype.setTransform,Dt.prototype.set=Dt.prototype.set;var Rs=[];Dt.className="Transform",Dt.xF="54a702f3e53909c447824c6706603faf4c";var R={jA:"7da71ca0ad381e90",ng:(Math.sqrt(2)-1)/3*4,yv:null,sqrt:function(t){if(0>=t)return 0;var e=R.yv;if(null===e){e=[];for(var n=0;2e3>=n;n++)e[n]=Math.sqrt(n);R.yv=e}return 1>t?2e3>=(n=1/t)?1/e[0|n]:Math.sqrt(t):2e3>=t?e[0|t]:Math.sqrt(t)},B:function(t,e){return.5>(t-=e)&&-.5<t},ca:function(t,e){return 5e-8>(t-=e)&&-5e-8<t},Tb:function(t,e,n,s,l,u,c){if(0>=l&&(l=1e-6),t<n)var d=t,p=n;else d=n,p=t;if(e<s)var g=e,y=s;else g=s,y=e;if(t===n)return g<=c&&c<=y&&t-l<=u&&u<=t+l;if(e===s)return d<=u&&u<=p&&e-l<=c&&c<=e+l;if(p+=l,(d-=l)<=u&&u<=p&&(y+=l,(g-=l)<=c&&c<=y))if(p-d>y-g){if(!(t-n>l||n-t>l))return!0;if((u=(s-e)/(n-t)*(u-t)+e)-l<=c&&c<=u+l)return!0}else{if(!(e-s>l||s-e>l))return!0;if((c=(n-t)/(s-e)*(c-e)+t)-l<=u&&u<=c+l)return!0}return!1},Br:function(t,e,n,s,l,u,c,d,p,g,y,w){if(R.Tb(t,e,c,d,w,n,s)&&R.Tb(t,e,c,d,w,l,u))return R.Tb(t,e,c,d,w,g,y);var C=(t+n)/2,D=(e+s)/2,M=(n+l)/2,E=(s+u)/2,I=((s=(C+M)/2)+(M=(M+(l=(l+c)/2))/2))/2,P=((n=(D+E)/2)+(E=(E+(u=(u+d)/2))/2))/2;return R.Br(t,e,C,D,s,n,I,P,p,g,y,w)||R.Br(I,P,M,E,l,u,c,d,p,g,y,w)},Gw:function(t,e,n,s,l,u,c,d,p){var g=(n+l)/2,y=(s+u)/2;return p.h((((t+n)/2+g)/2+(g+(l+c)/2)/2)/2,(((e+s)/2+y)/2+(y+(u+d)/2)/2)/2),p},ty:function(t,e,n,s,l,u,c,d){var p=(n+l)/2,g=(s+u)/2;return Iv(((t+n)/2+p)/2,((e+s)/2+g)/2,(p+(l+c)/2)/2,(g+(u+d)/2)/2)},ql:function(t,e,n,s,l,u,c,d,p,g){if(R.Tb(t,e,c,d,p,n,s)&&R.Tb(t,e,c,d,p,l,u))Ke(g,t,e,0,0),Ke(g,c,d,0,0);else{var y=(t+n)/2,w=(e+s)/2,C=(n+l)/2,D=(s+u)/2,M=((s=(y+C)/2)+(C=(C+(l=(l+c)/2))/2))/2,E=((n=(w+D)/2)+(D=(D+(u=(u+d)/2))/2))/2;R.ql(t,e,y,w,s,n,M,E,p,g),R.ql(M,E,C,D,l,u,c,d,p,g)}return g},De:function(t,e,n,s,l,u,c,d,p,g){if(R.Tb(t,e,c,d,p,n,s)&&R.Tb(t,e,c,d,p,l,u))0===g.length&&(g.push(t),g.push(e)),g.push(c),g.push(d);else{var y=(t+n)/2,w=(e+s)/2,C=(n+l)/2,D=(s+u)/2,M=((s=(y+C)/2)+(C=(C+(l=(l+c)/2))/2))/2,E=((n=(w+D)/2)+(D=(D+(u=(u+d)/2))/2))/2;R.De(t,e,y,w,s,n,M,E,p,g),R.De(M,E,C,D,l,u,c,d,p,g)}return g},Tu:function(t,e,n,s,l,u,c,d,p,g){if(R.Tb(t,e,l,u,g,n,s))return R.Tb(t,e,l,u,g,d,p);var y=(t+n)/2,w=(e+s)/2,C=(y+(n=(n+l)/2))/2,D=(w+(s=(s+u)/2))/2;return R.Tu(t,e,y,w,C,D,c,d,p,g)||R.Tu(C,D,n,s,l,u,c,d,p,g)},yA:function(t,e,n,s,l,u,c){return c.h(((t+n)/2+(n+l)/2)/2,((e+s)/2+(s+u)/2)/2),c},Su:function(t,e,n,s,l,u,c,d){if(R.Tb(t,e,l,u,c,n,s))Ke(d,t,e,0,0),Ke(d,l,u,0,0);else{var p=(t+n)/2,g=(e+s)/2,y=(p+(n=(n+l)/2))/2,w=(g+(s=(s+u)/2))/2;R.Su(t,e,p,g,y,w,c,d),R.Su(y,w,n,s,l,u,c,d)}return d},Go:function(t,e,n,s,l,u,c,d){if(R.Tb(t,e,l,u,c,n,s))0===d.length&&(d.push(t),d.push(e)),d.push(l),d.push(u);else{var p=(t+n)/2,g=(e+s)/2,y=(p+(n=(n+l)/2))/2,w=(g+(s=(s+u)/2))/2;R.Go(t,e,p,g,y,w,c,d),R.Go(y,w,n,s,l,u,c,d)}return d},io:function(t,e,n,s,l,u,c,d,p,g,y,w,C,D){if(R.Tb(t,e,c,d,C,n,s)&&R.Tb(t,e,c,d,C,l,u))return!(!R.zl(t,e,c,d,p,g,y,w)||(C=(t-c)*(g-w)-(e-d)*(p-y),0===C)||(D.h(((t*d-e*c)*(p-y)-(t-c)*(p*w-g*y))/C,((t*d-e*c)*(g-w)-(e-d)*(p*w-g*y))/C),0));var M=(t+n)/2,E=(e+s)/2,I=(n+l)/2,P=(s+u)/2,k=((s=(M+I)/2)+(I=(I+(l=(l+c)/2))/2))/2,b=((n=(E+P)/2)+(P=(P+(u=(u+d)/2))/2))/2,O=1/0,L=!1,H=0,J=0;return R.io(t,e,M,E,s,n,k,b,p,g,y,w,C,D)&&(t=(D.x-p)*(D.x-p)+(D.y-g)*(D.y-g))<O&&(O=t,L=!0,H=D.x,J=D.y),R.io(k,b,I,P,l,u,c,d,p,g,y,w,C,D)&&(D.x-p)*(D.x-p)+(D.y-g)*(D.y-g)<O&&(L=!0,H=D.x,J=D.y),L&&(D.x=H,D.y=J),L},jo:function(t,e,n,s,l,u,c,d,p,g,y,w,C){var D=0;if(R.Tb(t,e,c,d,C,n,s)&&R.Tb(t,e,c,d,C,l,u)){if(0==(C=(t-c)*(g-w)-(e-d)*(p-y)))return D;var M=((t*d-e*c)*(p-y)-(t-c)*(p*w-g*y))/C,E=((t*d-e*c)*(g-w)-(e-d)*(p*w-g*y))/C;if(M>=y)return D;if((p>y?p-y:y-p)<(g>w?g-w:w-g)){if(e<d?(p=e,t=d):(p=d,t=e),E<p||E>t)return D}else if(t<c?(p=t,t=c):p=c,M<p||M>t)return D;0<C?D++:0>C&&D--}else{E=(e+s)/2;var I=(n+l)/2,P=(s+u)/2,k=((s=((M=(t+n)/2)+I)/2)+(I=(I+(l=(l+c)/2))/2))/2,b=((n=(E+P)/2)+(P=(P+(u=(u+d)/2))/2))/2;D+=R.jo(t,e,M,E,s,n,k,b,p,g,y,w,C),D+=R.jo(k,b,I,P,l,u,c,d,p,g,y,w,C)}return D},fh:function(t,e,n,s,l,u,c){return R.ca(t,n)?(e<s?(n=e,e=s):n=s,u<n?(c.h(t,n),!1):u>e?(c.h(t,e),!1):(c.h(t,u),!0)):R.ca(e,s)?(t<n?(s=t,t=n):s=n,l<s?(c.h(s,e),!1):l>t?(c.h(t,e),!1):(c.h(l,e),!0)):-5e-6>(l=((t-l)*(t-n)+(e-u)*(e-s))/((n-t)*(n-t)+(s-e)*(s-e)))?(c.h(t,e),!1):1.000005<l?(c.h(n,s),!1):(c.h(t+l*(n-t),e+l*(s-e)),!0)},Je:function(t,e,n,s,l,u,c,d,p){return R.B(t,n)&&R.B(e,s)?(p.h(t,e),!1):R.ca(l,c)?R.ca(t,n)?(R.fh(t,e,n,s,l,u,p),!1):R.fh(t,e,n,s,l,(s-e)/(n-t)*(l-t)+e,p):(d=(d-u)/(c-l),R.ca(t,n)?(n=d*(t-l)+u,e<s?(l=e,e=s):l=s,n<l?(p.h(t,l),!1):n>e?(p.h(t,e),!1):(p.h(t,n),!0)):R.ca(d,c=(s-e)/(n-t))?(R.fh(t,e,n,s,l,u,p),!1):(l=(c*t-d*l+u-e)/(c-d),R.ca(c,0)?(t<n?(s=t,t=n):s=n,l<s?(p.h(s,e),!1):l>t?(p.h(t,e),!1):(p.h(l,e),!0)):R.fh(t,e,n,s,l,c*(l-t)+e,p)))},wA:function(t,e,n,s,l){return R.Je(n.x,n.y,s.x,s.y,t.x,t.y,e.x,e.y,l)},uA:function(t,e,n,s,l,u,c,d,p,g){function y(I,P){var k=(I-t)*(I-t)+(P-e)*(P-e);k<w&&(w=k,p.h(I,P))}var w=1/0;y(p.x,p.y);var C=0,D=0,M=0,E=0;if(l<c?(C=l,D=c):(C=c,D=l),u<d?(M=l,E=c):(M=c,E=l),C=(D-C)/2+g,g=(E-M)/2+g,l=(l+c)/2,u=(u+d)/2,0===C||0===g)return p;if(.5>(n>t?n-t:t-n)){if(0>(C=1-(n-l)*(n-l)/(C*C)))return p;s=-g*(C=Math.sqrt(C))+u,y(n,g*C+u),y(n,s)}else{if(0>(C=(d=2*(n=(s-e)/(n-t))*(e-n*t)/(g*g)-2*n*u/(g*g)-2*l/(C*C))*d-4*(s=1/(C*C)+n*n/(g*g))*(2*n*t*u/(g*g)-2*e*u/(g*g)+u*u/(g*g)+l*l/(C*C)-1+(e-n*t)*(e-n*t)/(g*g))))return p;y(g=(-d+(C=Math.sqrt(C)))/(2*s),n*g-n*t+e),y(C=(-d-C)/(2*s),n*C-n*t+e)}return p},wf:function(t,e,n,s,l,u,c,d,p){var g=1e21,y=t,w=e;if(R.Je(t,e,t,s,l,u,c,d,p)){var C=(p.x-l)*(p.x-l)+(p.y-u)*(p.y-u);C<g&&(g=C,y=p.x,w=p.y)}return R.Je(n,e,n,s,l,u,c,d,p)&&(C=(p.x-l)*(p.x-l)+(p.y-u)*(p.y-u))<g&&(g=C,y=p.x,w=p.y),R.Je(t,e,n,e,l,u,c,d,p)&&(e=(p.x-l)*(p.x-l)+(p.y-u)*(p.y-u))<g&&(g=e,y=p.x,w=p.y),R.Je(t,s,n,s,l,u,c,d,p)&&(t=(p.x-l)*(p.x-l)+(p.y-u)*(p.y-u))<g&&(g=t,y=p.x,w=p.y),p.h(y,w),1e21>g},tA:function(t,e,n,s,l,u,c,d,p){return c=l-c,l=0==(n=t-n)||0===c?0===n?(e=(u-d)/c)*(d=t)+(u-e*l):(u=(e-s)/n)*(d=l)+(e-u*t):(s=(e-s)/n)*(d=(u-(d=(u-d)/c)*l-(t=e-s*t))/(s-d))+t,p.h(d,l),p},Rr:function(t,e,n){return R.jx(t.x,t.y,t.width,t.height,e.x,e.y,n.x,n.y)},jx:function(t,e,n,s,l,u,c,d){var p=t+n,g=e+s;return l===c?(u<d?(c=u,u=d):c=d,t<=l&&l<=p&&c<=g&&u>=e):u===d?(l<c?(d=l,l=c):d=c,e<=u&&u<=g&&d<=p&&l>=t):!!(vr(t,e,n,s,l,u)||vr(t,e,n,s,c,d)||R.zl(t,e,p,e,l,u,c,d)||R.zl(p,e,p,g,l,u,c,d)||R.zl(p,g,t,g,l,u,c,d)||R.zl(t,g,t,e,l,u,c,d))},zl:function(t,e,n,s,l,u,c,d){return 0>=R.sl(t,e,n,s,l,u)*R.sl(t,e,n,s,c,d)&&0>=R.sl(l,u,c,d,t,e)*R.sl(l,u,c,d,n,s)},sl:function(t,e,n,s,l,u){return n-=t,0==(u=(t=l-t)*(s-=e)-(e=u-e)*n)&&0<(u=t*n+e*s)&&0>(u=(t-n)*n+(e-s)*s)&&(u=0),u},Eo:function(t){return 0>t&&(t+=360),360<=t&&(t-=360),t},Mw:function(t,e,n,s,l,u){var c=Math.PI;u||(s*=c/180,l*=c/180);var d=s>l?-1:1;u=[];var p=c/2,g=s;if(1e-5>(s=Math.min(2*c,Math.abs(l-s))))return p=g+d*Math.min(s,p),d=t+n*Math.cos(g),g=e+n*Math.sin(g),t+=n*Math.cos(p),e+=n*Math.sin(p),u.push([d,g,n=(d+t)/2,p=(g+e)/2,n,p,t,e]),u;for(;1e-5<s;)l=g+d*Math.min(s,p),u.push(R.Cy(n,g,l,t,e)),s-=Math.abs(l-g),g=l;return u},Cy:function(t,e,n,s,l){var u=(n-e)/2,c=t*Math.cos(u),d=t*Math.sin(u),p=-d,g=c*c+p*p,y=g+c*c+p*d;return d=c-(g=4/3*(Math.sqrt(2*g*y)-y)/(c*d-p*c))*p,p=-(c=p+g*c),g=u+e,u=Math.cos(g),g=Math.sin(g),[s+t*Math.cos(e),l+t*Math.sin(e),s+d*u-c*g,l+d*g+c*u,s+d*u-p*g,l+d*g+p*u,s+t*Math.cos(n),l+t*Math.sin(n)]},so:function(t,e,n,s,l,u,c){var d=n=Math.floor((t-n)/l)*l+n;return n+l-t<l/2&&(d=n+l),t=s=Math.floor((e-s)/u)*u+s,s+u-e<u/2&&(t=s+u),c.h(d,t),c},Xw:function(t,e){var s,n=Math.max(t,e);t=Math.min(t,e);do{e=n%t,n=s=t,t=e}while(0<e);return s},Hy:function(t,e,n,s){var l=0>n,u=0>s;if(t<e)var c=1,d=0;else c=0,d=1;var p=0===c?t:e,g=0===c?n:s;return(0===c?l:u)&&(g=-g),n=0===(c=d)?n:s,(0===c?l:u)&&(n=-n),R.Iy(p,0===c?t:e,g,n,0,0)},Iy:function(t,e,n,s,l,u){if(0<s)if(0<n){l=t*t,t*=n;var c=e*s,d=-(u=e*e)+c,p=-u+Math.sqrt(t*t+c*c);e=d;for(var g=0;9999999999>g&&(e=.5*(d+p))!==d&&e!==p;++g){var y=t/(e+l),w=c/(e+u);if(0<(y=y*y+w*w-1))d=e;else{if(!(0>y))break;p=e}}n=l*n/(e+l)-n,s=u*s/(e+u)-s,n=Math.sqrt(n*n+s*s)}else n=Math.abs(s-e);else(u=t*n)<(s=t*t-e*e)?(s=u/s,u=e*Math.sqrt(Math.abs(1-s*s)),n=t*s-n,n=Math.sqrt(n*n+u*u)):n=Math.abs(n-t);return n},Oe:new Zr,dm:new Zr,Df:new Zr,Ef:0,em:100};function X(t){En(this),this.o=2,void 0===t&&(t=X.m),this.qa=t,this.yc=this.xc=this.hd=this.gd=0,t===X.m?this.Yd=new tt:(null===X.W&&(X.W=(new tt).freeze()),this.Yd=X.W),this.Ep=this.Yd.Ia,this.lp=(new U).freeze(),this.gm=this.gk=null,this.hm=NaN,this.Yf=je,this.Zf=xr,this.Gk=this.Hk=NaN,this.Kf=Ge}function n1(t,e){return t.type===X.j&&e.type===X.m&&!!(1===e.figures.count&&(e=e.figures.K(0),1===e.segments.count&&R.B(t.startX,e.startX)&&R.B(t.startY,e.startY)&&(e=e.segments.K(0),e.type===_e&&R.B(t.endX,e.endX)&&R.B(t.endY,e.endY))))}function r1(t,e,n){switch(t.type){case X.j:case X.u:case X.F:n?e.h(t.gd,t.hd,0,0):Ke(e,t.gd,t.hd,0,0),Ke(e,t.xc,t.yc,0,0);break;case X.m:var s=t.figures;t=s.s,s=s.length;for(var l=0;l<s;l++){var u=t[l];n&&0===l?e.h(u.startX,u.startY,0,0):Ke(e,u.startX,u.startY,0,0);for(var c=u.segments.s,d=c.length,p=u.startX,g=u.startY,y=0;y<d;y++){var w=c[y];switch(w.type){case _e:case Vo:Ke(e,p=w.endX,g=w.endY,0,0);break;case to:R.ql(p,g,w.point1X,w.point1Y,w.point2X,w.point2Y,w.endX,w.endY,.5,e),p=w.endX,g=w.endY;break;case js:R.Su(p,g,w.point1X,w.point1Y,w.endX,w.endY,.5,e),p=w.endX,g=w.endY;break;case ln:case Co:var C=w.type===ln?Ha(w,u):Ih(w,u,p,g),D=C.length;if(0===D){Ke(e,p=w.type===ln?w.centerX:w.endX,g=w.type===ln?w.centerY:w.endY,0,0);break}w=null;for(var M=0;M<D;M++)R.ql((w=C[M])[0],w[1],w[2],w[3],w[4],w[5],w[6],w[7],.5,e);null!==w&&(p=w[6],g=w[7]);break;default:Y("Unknown Segment type: "+w.type)}}}break;default:Y("Unknown Geometry type: "+t.type)}}function o1(t,e,n,s,l){var u=e.x;e=e.y;for(var p,g,y,w,c=t.bounds.x-20,d=0,C=t.figures.s,D=C.length,M=0;M<D;M++){var E=C[M];if(E.isFilled){if(s&&E.ba(u,e,n))return!0;for(var I=E.segments,P=p=E.startX,k=g=E.startY,b=I.s,O=0;O<=I.length;O++){var L=void 0;if(O!==I.length){var H=(L=b[O]).type;t=L.endX,w=L.endY}else H=_e,t=P,w=k;switch(H){case Vo:if(P=Ov(u,e,c,e,p,g,P,k),isNaN(P))return!0;d+=P,P=t,k=w;break;case _e:if(p=Ov(u,e,c,e,p,g,t,w),isNaN(p))return!0;d+=p;break;case to:d+=y=R.jo(p,g,L.point1X,L.point1Y,L.point2X,L.point2Y,t,w,c,e,u,e,.5);break;case js:d+=y=R.jo(p,g,(p+2*L.point1X)/3,(g+2*L.point1Y)/3,(2*L.point1X+t)/3,(2*L.point1Y+w)/3,t,w,c,e,u,e,.5);break;case ln:case Co:var J=(H=L.type===ln?Ha(L,E):Ih(L,E,p,g)).length;if(0===J){if(p=Ov(u,e,c,e,p,g,L.type===ln?L.centerX:L.endX,L.type===ln?L.centerY:L.endY),isNaN(p))return!0;d+=p;break}L=null;for(var nt=0;nt<J;nt++){if(L=H[nt],0===nt){if(y=Ov(u,e,c,e,p,g,L[0],L[1]),isNaN(y))return!0;d+=y}d+=y=R.jo(L[0],L[1],L[2],L[3],L[4],L[5],L[6],L[7],c,e,u,e,.5)}null!==L&&(t=L[6],w=L[7]);break;default:Y("Unknown Segment type: "+L.type)}p=t,g=w}if(0!==d)return!0;d=0}else if(E.ba(u,e,l?n:n+2))return!0}return 0!==d}function Ov(t,e,n,s,l,u,c,d){if(R.Tb(l,u,c,d,.05,t,e))return NaN;var p=(t-n)*(u-d);if(0===p)return 0;var g=((t*s-e*n)*(l-c)-(t-n)*(l*d-u*c))/p;if(e=(t*s-e*n)*(u-d)/p,g>=t)return 0;if((l>c?l-c:c-l)<(u>d?u-d:d-u)){if(u<d){if(e<u||e>d)return 0}else if(e<d||e>u)return 0}else if(l<c){if(g<l||g>c)return 0}else if(g<c||g>l)return 0;return 0<p?1:-1}function HS(t,e,n,s){for(var l=(t=t.figures.s).length,u=0;u<l;u++)if(t[u].ba(e,n,s))return!0;return!1}function zS(t){if(null===t.gk){var e=t.gk=[],n=t.gm=[],s=[],l=[];if(t.type===X.j)s.push(t.startX),s.push(t.startY),s.push(t.endX),s.push(t.endY),e.push(s),l.push(Math.sqrt((t.startX-t.endX)*(t.startX-t.endX)+(t.startY-t.endY)*(t.startY-t.endY))),n.push(l);else if(t.type===X.u)s.push(t.startX),s.push(t.startY),s.push(t.endX),s.push(t.startY),s.push(t.endX),s.push(t.endY),s.push(t.startX),s.push(t.endY),s.push(t.startX),s.push(t.startY),e.push(s),l.push(Math.abs(t.startX-t.endX)),l.push(Math.abs(t.startY-t.endY)),l.push(Math.abs(t.startX-t.endX)),l.push(Math.abs(t.startY-t.endY)),n.push(l);else if(t.type===X.F){var u=new Fn;u.startX=t.endX,u.startY=(t.startY+t.endY)/2;var c=new Ft(ln);if(c.startAngle=0,c.sweepAngle=360,c.centerX=(t.startX+t.endX)/2,c.centerY=(t.startY+t.endY)/2,c.radiusX=Math.abs(t.startX-t.endX)/2,c.radiusY=Math.abs(t.startY-t.endY)/2,u.add(c),0===(l=(t=Ha(c,u)).length))s.push(c.centerX),s.push(c.centerY);else{c=u.startX,u=u.startY;for(var d=0;d<l;d++){var p=t[d];R.De(c,u,p[2],p[3],p[4],p[5],p[6],p[7],.5,s),c=p[6],u=p[7]}}e.push(s),n.push(s1(s))}else for(t=t.figures.iterator;t.next();){(s=[]).push((l=t.value).startX),s.push(l.startY),d=c=l.startX,p=u=l.startY;for(var g=l.segments.s,y=g.length,w=0;w<y;w++){var C=g[w];switch(C.type){case Vo:4<=s.length&&(e.push(s),n.push(s1(s))),(s=[]).push(C.endX),s.push(C.endY),d=c=C.endX,p=u=C.endY;break;case _e:s.push(C.endX),s.push(C.endY),c=C.endX,u=C.endY;break;case to:R.De(c,u,C.point1X,C.point1Y,C.point2X,C.point2Y,C.endX,C.endY,.5,s),c=C.endX,u=C.endY;break;case js:R.Go(c,u,C.point1X,C.point1Y,C.endX,C.endY,.5,s),c=C.endX,u=C.endY;break;case ln:var D=Ha(C,l),M=D.length;if(0===M){s.push(C.centerX),s.push(C.centerY),c=C.centerX,u=C.centerY;break}for(var E=0;E<M;E++){var I=D[E];R.De(c,u,I[2],I[3],I[4],I[5],I[6],I[7],.5,s),c=I[6],u=I[7]}break;case Co:if(D=Ih(C,l,c,u),E=C.endX,I=C.endY,0===(M=D.length)){s.push(E),s.push(I),c=E,u=I;break}for(E=0;E<M;E++)R.De(c,u,(I=D[E])[2],I[3],I[4],I[5],I[6],I[7],.5,s),c=I[6],u=I[7];break;default:Y("Segment not of valid type: "+C.type)}C.isClosed&&(s.push(d),s.push(p))}4<=s.length&&(e.push(s),n.push(s1(s)))}}}function s1(t){for(var e=[],n=0,s=0,l=t.length,u=0;u<l;u+=2){var c=t[u],d=t[u+1];0!==u&&e.push(Math.sqrt(Os(n,s,c,d))),n=c,s=d}return e}function Fn(t,e,n,s){En(this),void 0===n&&(n=!0),void 0===s&&(s=!0),this.o=2|(n?4:0)|(s?8:0),this.gd=void 0!==t?t:0,this.hd=void 0!==e?e:0,this.el=new tt,this.Pq=this.el.Ia,this.Kv=null}function Ft(t,e,n,s,l,u,c,d){En(this),void 0===t&&(t=_e),this.qa=t,this.o=2,this.xc=void 0!==e?e:0,this.yc=void 0!==n?n:0,void 0===s&&(s=0),void 0===l&&(l=0),void 0===u&&(u=0),void 0===c&&(c=0),t===Co?(0>(t=u%360)&&(t+=360),this.Be=t,this.Oh=0,this.Ph=Math.max(s,0),this.Gg=Math.max(l,0),"boolean"==typeof c?c&&(this.isLargeArc=!0):"number"==typeof c&&c&&(this.isLargeArc=!0),d&&(this.isClockwiseArc=!0)):(this.Be=s,this.Oh=l,t===ln&&(u=Math.max(u,0)),this.Ph=u,"number"==typeof c?(t===ln&&(c=Math.max(c,0)),this.Gg=c):this.Gg=0),this.Ud=null}function Ha(t,e){if(null!==t.Ud&&!1===e._isInvalidBounds)return t.Ud;var n=t.radiusX,s=t.radiusY;if(void 0===s&&(s=n),0===n||0===s)return t.Ud=[],t.Ud;e=t.Be;var l=t.Oh,u=R.Mw(0,0,n<s?n:s,t.startAngle,t.startAngle+t.sweepAngle,!1);if(n!==s){var c=Dt.alloc();c.reset(),n<s?c.scale(1,s/n):c.scale(n/s,1),X.Ga(u,c),Dt.free(c)}for(n=u.length,s=0;s<n;s++)(c=u[s])[0]+=e,c[1]+=l,c[2]+=e,c[3]+=l,c[4]+=e,c[5]+=l,c[6]+=e,c[7]+=l;return t.Ud=u,t.Ud}function Ih(t,e,n,s){function l(E,I,P,k){return(E*k<I*P?-1:1)*Math.acos((E*P+I*k)/(Math.sqrt(E*E+I*I)*Math.sqrt(P*P+k*k)))}if(null!==t.Ud&&!1===e._isInvalidBounds)return t.Ud;if(0===t.radiusX||0===t.radiusY)return t.Ud=[],t.Ud;var u=t.Gg;0===(e=t.Ph)&&(e=1e-4),0===u&&(u=1e-4);var c=Math.PI/180*t.Be,d=t.isLargeArc,p=t.isClockwiseArc,g=t.xc,y=t.yc,w=Math.cos(c),C=Math.sin(c),D=w*(n-g)/2+C*(s-y)/2,M=D*D/(e*e)+(c=-C*(n-g)/2+w*(s-y)/2)*c/(u*u);return 1<M&&(e*=Math.sqrt(M),u*=Math.sqrt(M)),M=(d===p?-1:1)*Math.sqrt((e*e*u*u-e*e*c*c-u*u*D*D)/(e*e*c*c+u*u*D*D)),isNaN(M)&&(M=0),d=M*e*c/u,M=M*-u*D/e,isNaN(d)&&(d=0),isNaN(M)&&(M=0),n=(n+g)/2+w*d-C*M,s=(s+y)/2+C*d+w*M,y=l(1,0,(D-d)/e,(c-M)/u),c=l(w=(D-d)/e,g=(c-M)/u,D=(-D-d)/e,d=(-c-M)/u),-1>=(D=(w*D+g*d)/(Math.sqrt(w*w+g*g)*Math.sqrt(D*D+d*d)))?c=Math.PI:1<=D&&(c=0),!p&&0<c&&(c-=2*Math.PI),p&&0>c&&(c+=2*Math.PI),p=e>u?1:e/u,D=e>u?u/e:1,e=R.Mw(0,0,e>u?e:u,y,y+c,!0),(u=Dt.alloc()).reset(),u.translate(n,s),u.rotate(t.Be,0,0),u.scale(p,D),X.Ga(e,u),Dt.free(u),t.Ud=e,t.Ud}R.za=R.jA,X.prototype.copy=function(){var t=new X;if(t.o=-2&this.o,t.qa=this.qa,t.gd=this.gd,t.hd=this.hd,t.xc=this.xc,t.yc=this.yc,this.qa===X.m){for(var e=this.Yd.s,n=t.Yd,s=0;s<e.length;s++)n.add(e[s].copy());t.Yd=n}else t.Yd=this.Yd;return t.Ep=this.Ep,t.lp.assign(this.lp),t.gk=this.gk,t.gm=this.gm,t.hm=this.hm,t.Yf=this.Yf.J(),t.Zf=this.Zf.J(),t.Hk=this.Hk,t.Gk=this.Gk,t.Kf=this.Kf,t},X.prototype.ha=function(){return this.freeze(),Object.freeze(this),this},X.prototype.freeze=function(){if(this._isFrozen=!0,this.type!==X.m)return this;var t=this.figures;t.freeze();for(var e=(t=t.s).length,n=0;n<e;n++)t[n].freeze();return this},X.prototype.ja=function(){if(Object.isFrozen(this)&&Y("cannot thaw constant: "+this),this._isFrozen=!1,this.type!==X.m)return this;var t=this.figures;t.ja();for(var e=(t=t.s).length,n=0;n<e;n++)t[n].ja();return this},X.prototype.$a=function(t){if(!(t instanceof X))return!1;if(this.type!==t.type)return this.type===X.j&&t.type===X.m?n1(this,t):t.type===X.j&&this.type===X.m&&n1(t,this);if(this.type===X.m){var e=this.figures.s,n=e.length;if(n!==(t=t.figures.s).length)return!1;for(var s=0;s<n;s++)if(!e[s].$a(t[s]))return!1;return!0}return R.B(this.startX,t.startX)&&R.B(this.startY,t.startY)&&R.B(this.endX,t.endX)&&R.B(this.endY,t.endY)},X.ga=function(t){return t.toString()},X.prototype.ob=function(t){t.classType===X&&(this.type=t)},X.prototype.toString=function(t){switch(void 0===t&&(t=-1),this.type){case X.j:return 0>t?"M"+this.startX.toString()+" "+this.startY.toString()+"L"+this.endX.toString()+" "+this.endY.toString():"M"+this.startX.toFixed(t)+" "+this.startY.toFixed(t)+"L"+this.endX.toFixed(t)+" "+this.endY.toFixed(t);case X.u:var e=new U(this.startX,this.startY,0,0);return e.nv(this.endX,this.endY,0,0),0>t?"M"+e.x.toString()+" "+e.y.toString()+"H"+e.right.toString()+"V"+e.bottom.toString()+"H"+e.left.toString()+"z":"M"+e.x.toFixed(t)+" "+e.y.toFixed(t)+"H"+e.right.toFixed(t)+"V"+e.bottom.toFixed(t)+"H"+e.left.toFixed(t)+"z";case X.F:if((e=new U(this.startX,this.startY,0,0)).nv(this.endX,this.endY,0,0),0>t)return"M"+(t=e.left.toString()+" "+(e.y+e.height/2).toString())+"A"+(e.width/2).toString()+" "+(e.height/2).toString()+" 0 0 1 "+e.right.toString()+" "+(e.y+e.height/2).toString()+"A"+(e.width/2).toString()+" "+(e.height/2).toString()+" 0 0 1 "+t;var n=e.left.toFixed(t)+" "+(e.y+e.height/2).toFixed(t);return"M"+n+"A"+(e.width/2).toFixed(t)+" "+(e.height/2).toFixed(t)+" 0 0 1 "+e.right.toFixed(t)+" "+(e.y+e.height/2).toFixed(t)+"A"+(e.width/2).toFixed(t)+" "+(e.height/2).toFixed(t)+" 0 0 1 "+n;case X.m:e="";for(var s=(n=this.figures.s).length,l=0;l<s;l++){var u=n[l];0<l&&(e+=" x "),u.isFilled&&(e+="F "),e+=u.toString(t)}return e;default:return this.type.toString()}},X.hb=function(t){for(var e=(t=t.split(/[Xx]/)).length,n="",s=0;s<e;s++){var l=t[s];n=null!==l.match(/[Ff]/)?0===s?n+l:n+"X"+(" "===l[0]?"":" ")+l:n+(0===s?"":"X ")+"F"+(" "===l[0]?"":" ")+l}return n},X.parse=function(t,e){function n(){return E>=O-1||null!==g[E+1].match(L)}function s(){return E++,g[E]}function l(G){var Mt=parseFloat(s()),pt=parseFloat(s());I===I.toLowerCase()&&(Mt=b.x+Mt,pt=b.y+pt),G.h(Mt,pt)}function u(){return l(b),b}function c(){return l(k),k}function d(){var G=P.toLowerCase();return"c"!==G&&"s"!==G&&"q"!==G&&"t"!==G?b:new A(2*b.x-k.x,2*b.y-k.y)}void 0===e&&(e=!1);var p=/([UuBbMmZzLlHhVvCcSsQqTtAaFfXx])([UuBbMmZzLlHhVvCcSsQqTtAaFfXx])/gm,g=(t=(t=(t=(t=(t=(t=(t=(t=t.replace(/,/gm," ")).replace(p,"$1 $2")).replace(p,"$1 $2")).replace(/([UuBbMmZzLlHhVvCcSsQqTtAaFfXx])([^s])/gm,"$1 $2")).replace(/([^s])([UuBbMmZzLlHhVvCcSsQqTtAaFfXx])/gm,"$1 $2")).replace(/([0-9])([+\-])/gm,"$1 $2")).replace(/[\s\r\t\n]+/gm," ")).replace(/^\s+|\s+$/g,"")).split(" ");for(t=0;t<g.length;t++){var y=g[t];if(null!==y.match(/(\.[0-9]*)(\.)/gm)){p=ce();for(var w="",C=!1,D=0;D<y.length;D++){var M=y[D];"."!==M||C?"."===M?(p.push(w),w="."):w+=M:(C=!0,w+=M)}for(p.push(w),g.splice(t,1),y=0;y<p.length;y++)g.splice(t+y,0,p[y]);t+=p.length-1,It(p)}}var E=-1,I="",P="";p=new A(0,0);var k=new A(0,0),b=new A(0,0),O=g.length;t=q1(null),w=y=!1,C=!0,D=null;for(var L=/[UuBbMmZzLlHhVvCcSsQqTtAaFfXx]/;!(E>=O-1);)if(P=I,""!==(I=s()))switch(I.toUpperCase()){case"X":C=!0,w=y=!1;break;case"M":for(D=u(),null===t.pc||!0===C?(xa(t,D.x,D.y,y,!w),C=!1):t.moveTo(D.x,D.y),p.assign(b);!n();)D=u(),t.lineTo(D.x,D.y);break;case"L":for(;!n();)D=u(),t.lineTo(D.x,D.y);break;case"H":for(;!n();)b=new A((I===I.toLowerCase()?b.x:0)+parseFloat(s()),b.y),t.lineTo(b.x,b.y);break;case"V":for(;!n();)b=new A(b.x,(I===I.toLowerCase()?b.y:0)+parseFloat(s())),t.lineTo(b.x,b.y);break;case"C":for(;!n();){l(D=new A),M=c();var H=u();Ca(t,D.x,D.y,M.x,M.y,H.x,H.y)}break;case"S":for(;!n();)D=d(),M=c(),H=u(),Ca(t,D.x,D.y,M.x,M.y,H.x,H.y);break;case"Q":for(;!n();)D=c(),M=u(),Wm(t,D.x,D.y,M.x,M.y);break;case"T":for(;!n();)k=D=d(),M=u(),Wm(t,D.x,D.y,M.x,M.y);break;case"B":for(;!n();){D=parseFloat(s()),M=parseFloat(s()),H=parseFloat(s());var J=parseFloat(s()),nt=parseFloat(s()),et=nt,q=!1;n()||(et=parseFloat(s()),n()||(q=0!==parseFloat(s()))),I===I.toLowerCase()&&(H+=b.x,J+=b.y),t.arcTo(D,M,H,J,nt,et,q)}break;case"A":for(;!n();)D=Math.abs(parseFloat(s())),M=Math.abs(parseFloat(s())),H=parseFloat(s()),nt=J=!1,q=et=0,1===(et=s()).length?(J=!!parseFloat(et),nt=!!parseFloat(s()),et=parseFloat(s())):2===et.length?(J=!!parseFloat(et[0]),nt=!!parseFloat(et[1]),et=parseFloat(s())):(J=!!parseFloat(et[0]),nt=!!parseFloat(et[1]),et=parseFloat(et.slice(2))),q=parseFloat(s()),I===I.toLowerCase()&&(et=b.x+et,q=b.y+q),b.h(et,q),U0(t,D,M,H,J,nt,et,q);break;case"Z":B0(t),b.assign(p);break;case"F":for(D="",M=1;g[E+M];)if(null!==g[E+M].match(/[Uu]/))M++;else{if(null!==g[E+M].match(L)){D=g[E+M];break}M++}D.match(/[Mm]/)?y=!0:0<t.pc.segments.length&&(t.pc.isFilled=!0);break;case"U":for(D="",M=1;g[E+M];)if(null!==g[E+M].match(/[Ff]/))M++;else{if(null!==g[E+M].match(L)){D=g[E+M];break}M++}D.match(/[Mm]/)?w=!0:t.Xl(!1)}if(p=t.Lr,Km=t,e)for(e=p.figures.iterator;e.next();)e.value.isFilled=!0;return p},X.Ga=function(t,e){for(var n=t.length,s=A.alloc(),l=0;l<n;l++){var u=t[l];s.x=u[0],s.y=u[1],e.Fa(s),u[0]=s.x,u[1]=s.y,s.x=u[2],s.y=u[3],e.Fa(s),u[2]=s.x,u[3]=s.y,s.x=u[4],s.y=u[5],e.Fa(s),u[4]=s.x,u[5]=s.y,s.x=u[6],s.y=u[7],e.Fa(s),u[6]=s.x,u[7]=s.y}A.free(s)},X.prototype.Lu=function(){if(this._isInvalidBounds)return!0;if(this.type===X.m){if(this.Ep!==this.figures.Ia)return!0;for(var t=this.figures.s,e=t.length,n=0;n<e;n++)if(t[n].Lu())return!0}return!1},X.prototype.computeBounds=function(){if(this._isInvalidBounds=!1,this.gm=this.gk=null,this.hm=NaN,this.type===X.m){this.Ep=this.figures.Ia;for(var t=this.figures.s,e=t.length,n=0;n<e;n++){var s=t[n];s._isInvalidBounds=!1;var l=s.segments;s.Pq=l.Ia,l=(s=l.s).length;for(var u=0;u<l;u++){var c=s[u];c._isInvalidBounds=!1,c.Ud=null}}}(t=this.lp).ja(),isNaN(this.Hk)||isNaN(this.Gk)?t.h(0,0,0,0):t.h(0,0,this.Hk,this.Gk),r1(this,t,!1),Ke(t,0,0,0,0),t.freeze()},X.prototype.Lw=function(){var t=new U;return r1(this,t,!0),t},X.prototype.normalize=function(){this._isFrozen&&Nt(this);var t=this.Lw();return this.offset(-t.x,-t.y),new A(-t.x,-t.y)},X.prototype.offset=function(t,e){return this._isFrozen&&Nt(this),this.transform(1,0,0,1,t,e),this},X.prototype.scale=function(t,e){return this._isFrozen&&Nt(this),this.transform(t,0,0,e,0,0),this},X.prototype.rotate=function(t,e,n){this._isFrozen&&Nt(this),void 0===e&&(e=0),void 0===n&&(n=0);var s=Dt.alloc();return s.reset(),s.rotate(t,e,n),this.transform(s.m11,s.m12,s.m21,s.m22,s.dx,s.dy),Dt.free(s),this},(_=X.prototype).transform=function(t,e,n,s,l,u){switch(this.type){case X.j:case X.u:case X.F:var c=this.gd,d=this.hd;this.gd=c*t+d*n+l,this.hd=c*e+d*s+u,this.xc=(c=this.xc)*t+(d=this.yc)*n+l,this.yc=c*e+d*s+u;break;case X.m:for(var p=this.figures.s,g=p.length,y=0;y<g;y++){var w=p[y];w.startX=(c=w.startX)*t+(d=w.startY)*n+l,w.startY=c*e+d*s+u;for(var C=(w=w.segments.s).length,D=0;D<C;D++){var M=w[D];switch(M.type){case _e:case Vo:M.endX=(c=M.endX)*t+(d=M.endY)*n+l,M.endY=c*e+d*s+u;break;case to:M.point1X=(c=M.point1X)*t+(d=M.point1Y)*n+l,M.point1Y=c*e+d*s+u,M.point2X=(c=M.point2X)*t+(d=M.point2Y)*n+l,M.point2Y=c*e+d*s+u,M.endX=(c=M.endX)*t+(d=M.endY)*n+l,M.endY=c*e+d*s+u;break;case js:M.point1X=(c=M.point1X)*t+(d=M.point1Y)*n+l,M.point1Y=c*e+d*s+u,M.endX=(c=M.endX)*t+(d=M.endY)*n+l,M.endY=c*e+d*s+u;break;case ln:M.centerX=(c=M.centerX)*t+(d=M.centerY)*n+l,M.centerY=c*e+d*s+u,0!==e&&(0>(c=180*Math.atan2(e,t)/Math.PI)&&(c+=360),M.startAngle+=c),0>t&&(M.startAngle=180-M.startAngle,M.sweepAngle=-M.sweepAngle),0>s&&(M.startAngle=-M.startAngle,M.sweepAngle=-M.sweepAngle),M.radiusX*=Math.sqrt(t*t+n*n),void 0!==M.radiusY&&(M.radiusY*=Math.sqrt(e*e+s*s));break;case Co:if(M.endX=(c=M.endX)*t+(d=M.endY)*n+l,M.endY=c*e+d*s+u,0===M.radiusX||0===M.radiusY)break;0!==e&&(0>(c=180*Math.atan2(e,t)/Math.PI)&&(c+=360),M.xAxisRotation+=c),0>t&&(M.xAxisRotation=180-M.xAxisRotation,M.isClockwiseArc=!M.isClockwiseArc),0>s&&(M.xAxisRotation=-M.xAxisRotation,M.isClockwiseArc=!M.isClockwiseArc),M.radiusX*=Math.sqrt(t*t+n*n),M.radiusY*=Math.sqrt(e*e+s*s);break;default:Y("Unknown Segment type: "+M.type)}}}}return this._isInvalidBounds=!0,this},_.ba=function(t,e){void 0===e&&(e=0);var n=this.gd,s=this.hd,l=this.xc,u=this.yc;switch(this.type){case X.j:return R.Tb(n,s,l,u,e,t.x,t.y);case X.u:var c=U.allocAt(Math.min(n,l)-e,Math.min(s,u)-e,Math.abs(l-n)+2*e,Math.abs(u-s)+2*e);return t=c.ba(t),U.free(c),t;case X.F:c=Math.min(n,l)-e;var d=Math.min(s,u)-e;return n=(Math.abs(l-n)+2*e)/2,e=(Math.abs(u-s)+2*e)/2,!(0>=n||0>=e)&&1>=(c=t.x-(c+n))*c/(n*n)+(d=t.y-(d+e))*d/(e*e);case X.m:return o1(this,t,e,!0,!1);default:return!1}},_.Bu=function(t,e){if(0>t?t=0:1<t&&(t=1),void 0===e&&(e=new A),this.type===X.j)return e.h(this.startX+t*(this.endX-this.startX),this.startY+t*(this.endY-this.startY)),e;for(var n=this.flattenedSegments,s=this.flattenedLengths,l=n.length,u=this.flattenedTotalLength*t,c=0,d=0;d<l;d++){var p=s[d],g=p.length;for(t=0;t<g;t++){var y=p[t];if(c+y>=u)return s=u-c,e.h((d=(n=n[d])[2*t])+(n[2*t+2]-d)*(s=0===y?0:s/y),(l=n[2*t+1])+(n[2*t+3]-l)*s),e;c+=y}}return e},_.Yw=function(t){if(0>t?t=0:1<t&&(t=1),this.type===X.j)return 180*Math.atan2(this.endY-this.startY,this.endX-this.startX)/Math.PI;for(var e=this.flattenedSegments,n=this.flattenedLengths,s=e.length,l=this.flattenedTotalLength*t,u=0,c=0;c<s;c++){var d=n[c],p=d.length;for(t=0;t<p;t++){var g=d[t];if(u+g>=l)return e=(l=e[c])[2*t],n=l[2*t+1],s=l[2*t+2],t=l[2*t+3],1>Math.abs(s-e)&&1>Math.abs(t-n)?0:1>Math.abs(s-e)?0<=t-n?90:270:1>Math.abs(t-n)?0<=s-e?0:180:180*Math.atan2(t-n,s-e)/Math.PI;u+=g}}return NaN},_.Cu=function(t,e){if(0>t?t=0:1<t&&(t=1),void 0===e&&(e=[]),e.length=3,this.type===X.j)return e[0]=this.startX+t*(this.endX-this.startX),e[1]=this.startY+t*(this.endY-this.startY),e[2]=180*Math.atan2(this.endY-this.startY,this.endX-this.startX)/Math.PI,e;for(var n=this.flattenedSegments,s=this.flattenedLengths,l=n.length,u=this.flattenedTotalLength*t,c=0,d=0;d<l;d++){var p=s[d],g=p.length;for(t=0;t<g;t++){var y=p[t];if(c+y>=u)return s=u-c,s=0===y?0:s/y,n=(y=n[d])[2*t],d=y[2*t+1],l=y[2*t+2],t=y[2*t+3],e[0]=n+(l-n)*s,e[1]=d+(t-d)*s,e[2]=1>Math.abs(l-n)&&1>Math.abs(t-d)?0:1>Math.abs(l-n)?0<=t-d?90:270:1>Math.abs(t-d)?0<=l-n?0:180:180*Math.atan2(t-d,l-n)/Math.PI,e;c+=y}}return e},_.Zw=function(t){if(this.type===X.j){var e=this.startX,n=this.startY,s=this.endX,l=this.endY;if(e!==s||n!==l){var u=t.x;if(t=t.y,e===s){if(n<l){var c=n;s=l}else c=l,s=n;return t<=c?c===n?0:1:t>=s?s===n?0:1:Math.abs(t-n)/(s-c)}if(n===l)return e<s?c=e:(c=s,s=e),u<=c?c===e?0:1:u>=s?s===e?0:1:Math.abs(u-e)/(s-c);c=(s-e)*(s-e)+(l-n)*(l-n);var d=A.alloc();return R.fh(e,n,s,l,u,t,d),t=d.x,u=d.y,A.free(d),Math.sqrt(((t-e)*(t-e)+(u-n)*(u-n))/c)}}else{if(this.type!==X.u){e=this.flattenedSegments,n=this.flattenedLengths,u=this.flattenedTotalLength,s=A.alloc(),l=1/0,d=c=0,p=e.length;for(var y=g=0,w=0;w<p;w++)for(var C=e[w],D=n[w],M=C.length,E=0;E<M;E+=2){var I=C[E],P=C[E+1];if(0!==E){R.fh(g,y,I,P,t.x,t.y,s);var k=(s.x-t.x)*(s.x-t.x)+(s.y-t.y)*(s.y-t.y);k<l&&(l=k,c=d,c+=Math.sqrt((s.x-g)*(s.x-g)+(s.y-y)*(s.y-y))),d+=D[(E-2)/2]}g=I,y=P}return A.free(s),0>(t=c/u)?0:1<t?1:t}d=this.startY;var p=this.endX;if(l=this.endY,(c=this.startX)!==p||d!==l){u=2*(e=p-c)+2*(n=l-d),s=t.x,t=t.y,s=Math.min(Math.max(s,c),p),t=Math.min(Math.max(t,d),l),c=Math.abs(s-c),p=Math.abs(s-p),d=Math.abs(t-d),l=Math.abs(t-l);var g=Math.min(c,p,d,l);if(g===d)return s/u;if(g===p)return(e+t)/u;if(g===l)return(2*e+n-s)/u;if(g===c)return(2*e+2*n-t)/u}}return 0},_.add=function(t){return this.Yd.add(t),this},_.Yl=function(t,e,n,s,l,u,c,d){return this._isFrozen&&Nt(this),this.Yf=new ot(t,e,l,u).freeze(),this.Zf=new ot(n,s,c,d).freeze(),this},St.Object.defineProperties(X.prototype,{_isFrozen:{get:function(){return 0!=(1&this.o)},set:function(t){this.o=t?1|this.o:-2&this.o}},_isInvalidBounds:{get:function(){return 0!=(2&this.o)},set:function(t){this.o=t?2|this.o:-3&this.o}},flattenedSegments:{get:function(){return zS(this),this.gk}},flattenedLengths:{get:function(){return zS(this),this.gm}},flattenedTotalLength:{get:function(){var t=this.hm;if(isNaN(t)){if(this.type===X.j){t=Math.abs(this.endX-this.startX);var e=Math.abs(this.endY-this.startY);t=Math.sqrt(t*t+e*e)}else if(this.type===X.u)t=2*Math.abs(this.endX-this.startX)+2*Math.abs(this.endY-this.startY);else for(var n=(e=this.flattenedLengths).length,s=t=0;s<n;s++)for(var l=e[s],u=l.length,c=0;c<u;c++)t+=l[c];this.hm=t}return t}},type:{get:function(){return this.qa},set:function(t){this.qa!==t&&(this._isFrozen&&Nt(this,t),this.qa=t,t===X.m?this.Yd=new tt:(null===X.W&&(X.W=(new tt).freeze()),this.Yd=X.W),this._isInvalidBounds=!0)}},startX:{get:function(){return this.gd},set:function(t){this.gd!==t&&(this._isFrozen&&Nt(this,t),this.gd=t,this._isInvalidBounds=!0)}},startY:{get:function(){return this.hd},set:function(t){this.hd!==t&&(this._isFrozen&&Nt(this,t),this.hd=t,this._isInvalidBounds=!0)}},endX:{get:function(){return this.xc},set:function(t){this.xc!==t&&(this._isFrozen&&Nt(this,t),this.xc=t,this._isInvalidBounds=!0)}},endY:{get:function(){return this.yc},set:function(t){this.yc!==t&&(this._isFrozen&&Nt(this,t),this.yc=t,this._isInvalidBounds=!0)}},figures:{get:function(){return this.Yd},set:function(t){this.Yd!==t&&(this._isFrozen&&Nt(this,t),this.Yd=t,this._isInvalidBounds=!0)}},spot1:{get:function(){return this.Yf},set:function(t){this._isFrozen&&Nt(this,t),this.Yf=t.J()}},spot2:{get:function(){return this.Zf},set:function(t){this._isFrozen&&Nt(this,t),this.Zf=t.J()}},defaultStretch:{get:function(){return this.Kf},set:function(t){this._isFrozen&&Nt(this,t),this.Kf=t}},bounds:{get:function(){return this.Lu()&&this.computeBounds(),this.lp}}}),X.prototype.setSpots=X.prototype.Yl,X.prototype.add=X.prototype.add,X.prototype.getFractionForPoint=X.prototype.Zw,X.prototype.getPointAndAngleAlongPath=X.prototype.Cu,X.prototype.getAngleAlongPath=X.prototype.Yw,X.prototype.getPointAlongPath=X.prototype.Bu,X.prototype.containsPoint=X.prototype.ba,X.prototype.transform=X.prototype.transform,X.prototype.rotate=X.prototype.rotate,X.prototype.scale=X.prototype.scale,X.prototype.offset=X.prototype.offset,X.prototype.normalize=X.prototype.normalize,X.prototype.computeBoundsWithoutOrigin=X.prototype.Lw,X.prototype.equalsApprox=X.prototype.$a,X.className="Geometry",X.j=new K(X,"Line",0),X.u=new K(X,"Rectangle",1),X.F=new K(X,"Ellipse",2),X.m=new K(X,"Path",3),X.W=null,X.cb="UuBbMmZzLlHhVvCcSsQqTtAaFfXx",X.className="Geometry",X.stringify=X.ga,X.fillPath=X.hb,X.parse=X.parse,X.Line=X.j,X.Rectangle=X.u,X.Ellipse=X.F,X.Path=X.m,Fn.prototype.copy=function(){var t=new Fn;t.o=-2&this.o,t.gd=this.gd,t.hd=this.hd;for(var e=this.el.s,n=e.length,s=t.el,l=0;l<n;l++){var u=e[l].copy();s.add(u)}return t.Pq=this.Pq,t.Kv=this.Kv,t},(_=Fn.prototype).$a=function(t){if(!(t instanceof Fn&&R.B(this.startX,t.startX)&&R.B(this.startY,t.startY)))return!1;var e=this.segments.s,n=e.length;if(n!==(t=t.segments.s).length)return!1;for(var s=0;s<n;s++)if(!e[s].$a(t[s]))return!1;return!0},_.toString=function(t){void 0===t&&(t=-1);for(var e=0>t?"M"+this.startX.toString()+" "+this.startY.toString():"M"+this.startX.toFixed(t)+" "+this.startY.toFixed(t),n=this.segments.s,s=n.length,l=0;l<s;l++)e+=" "+n[l].toString(t);return e},_.freeze=function(){this._isFrozen=!0;var t=this.segments;t.freeze();var e=t.s;t=t.length;for(var n=0;n<t;n++)e[n].freeze();return this},_.ja=function(){this._isFrozen=!1;var t=this.segments;t.ja();for(var e=(t=t.s).length,n=0;n<e;n++)t[n].ja();return this},_.Lu=function(){if(this._isInvalidBounds)return!0;var t=this.segments;if(this.Pq!==t.Ia)return!0;for(var e=(t=t.s).length,n=0;n<e;n++)if(t[n]._isInvalidBounds)return!0;return!1},_.add=function(t){return this.el.add(t),this},_.ba=function(t,e,n){for(var s=this.startX,l=this.startY,u=s,c=l,d=this.segments.s,p=d.length,g=0;g<p;g++){var y=d[g];switch(y.type){case Vo:u=y.endX,c=y.endY,s=y.endX,l=y.endY;break;case _e:if(R.Tb(s,l,y.endX,y.endY,n,t,e))return!0;s=y.endX,l=y.endY;break;case to:if(R.Br(s,l,y.point1X,y.point1Y,y.point2X,y.point2Y,y.endX,y.endY,.5,t,e,n))return!0;s=y.endX,l=y.endY;break;case js:if(R.Tu(s,l,y.point1X,y.point1Y,y.endX,y.endY,.5,t,e,n))return!0;s=y.endX,l=y.endY;break;case ln:case Co:var w=y.type===ln?Ha(y,this):Ih(y,this,s,l),C=w.length,D=y.type===ln?y.centerX:y.endX,M=y.type===ln?y.centerY:y.endY;if(0===C){if(R.Tb(s,l,D,M,n,t,e))return!0;s=D,l=M;break}for(D=null,M=0;M<C;M++)if(D=w[M],0===M&&R.Tb(s,l,D[0],D[1],n,t,e)||R.Br(D[0],D[1],D[2],D[3],D[4],D[5],D[6],D[7],.5,t,e,n))return!0;null!==D&&(s=D[6],l=D[7]);break;default:Y("Unknown Segment type: "+y.type)}if(y.isClosed&&(s!==u||l!==c)&&R.Tb(s,l,u,c,n,t,e))return!0}return!1},St.Object.defineProperties(Fn.prototype,{_isFrozen:{get:function(){return 0!=(1&this.o)},set:function(t){this.o=t?1|this.o:-2&this.o}},_isInvalidBounds:{get:function(){return 0!=(2&this.o)},set:function(t){this.o=t?2|this.o:-3&this.o}},isFilled:{get:function(){return 0!=(4&this.o)},set:function(t){this._isFrozen&&Nt(this,t),this.o=t?4|this.o:-5&this.o}},isShadowed:{get:function(){return 0!=(8&this.o)},set:function(t){this._isFrozen&&Nt(this,t),this.o=t?8|this.o:-9&this.o}},startX:{get:function(){return this.gd},set:function(t){this._isFrozen&&Nt(this,t),this.gd=t,this._isInvalidBounds=!0}},startY:{get:function(){return this.hd},set:function(t){this._isFrozen&&Nt(this,t),this.hd=t,this._isInvalidBounds=!0}},segments:{get:function(){return this.el},set:function(t){this._isFrozen&&Nt(this,t),this.el=t,this._isInvalidBounds=!0}}}),Fn.prototype.add=Fn.prototype.add,Fn.prototype.equalsApprox=Fn.prototype.$a,Fn.className="PathFigure",Ft.prototype.copy=function(){var t=new Ft;return t.qa=this.qa,t.o=-2&this.o,t.xc=this.xc,t.yc=this.yc,t.Be=this.Be,t.Oh=this.Oh,t.Ph=this.Ph,t.Gg=this.Gg,t},(_=Ft.prototype).$a=function(t){if(!(t instanceof Ft)||this.type!==t.type||this.isClosed!==t.isClosed)return!1;switch(this.type){case Vo:case _e:return R.B(this.endX,t.endX)&&R.B(this.endY,t.endY);case to:return R.B(this.endX,t.endX)&&R.B(this.endY,t.endY)&&R.B(this.point1X,t.point1X)&&R.B(this.point1Y,t.point1Y)&&R.B(this.point2X,t.point2X)&&R.B(this.point2Y,t.point2Y);case js:return R.B(this.endX,t.endX)&&R.B(this.endY,t.endY)&&R.B(this.point1X,t.point1X)&&R.B(this.point1Y,t.point1Y);case ln:return R.B(this.startAngle,t.startAngle)&&R.B(this.sweepAngle,t.sweepAngle)&&R.B(this.centerX,t.centerX)&&R.B(this.centerY,t.centerY)&&R.B(this.radiusX,t.radiusX)&&R.B(this.radiusY,t.radiusY);case Co:return this.isClockwiseArc===t.isClockwiseArc&&this.isLargeArc===t.isLargeArc&&R.B(this.xAxisRotation,t.xAxisRotation)&&R.B(this.endX,t.endX)&&R.B(this.endY,t.endY)&&R.B(this.radiusX,t.radiusX)&&R.B(this.radiusY,t.radiusY);default:return!1}},_.ob=function(t){t.classType===Ft&&(this.type=t)},_.toString=function(t){switch(void 0===t&&(t=-1),this.type){case Vo:t=0>t?"M"+this.endX.toString()+" "+this.endY.toString():"M"+this.endX.toFixed(t)+" "+this.endY.toFixed(t);break;case _e:t=0>t?"L"+this.endX.toString()+" "+this.endY.toString():"L"+this.endX.toFixed(t)+" "+this.endY.toFixed(t);break;case to:t=0>t?"C"+this.point1X.toString()+" "+this.point1Y.toString()+" "+this.point2X.toString()+" "+this.point2Y.toString()+" "+this.endX.toString()+" "+this.endY.toString():"C"+this.point1X.toFixed(t)+" "+this.point1Y.toFixed(t)+" "+this.point2X.toFixed(t)+" "+this.point2Y.toFixed(t)+" "+this.endX.toFixed(t)+" "+this.endY.toFixed(t);break;case js:t=0>t?"Q"+this.point1X.toString()+" "+this.point1Y.toString()+" "+this.endX.toString()+" "+this.endY.toString():"Q"+this.point1X.toFixed(t)+" "+this.point1Y.toFixed(t)+" "+this.endX.toFixed(t)+" "+this.endY.toFixed(t);break;case ln:t=0>t?"B"+this.startAngle.toString()+" "+this.sweepAngle.toString()+" "+this.centerX.toString()+" "+this.centerY.toString()+" "+this.radiusX.toString()+" "+this.radiusY.toString():"B"+this.startAngle.toFixed(t)+" "+this.sweepAngle.toFixed(t)+" "+this.centerX.toFixed(t)+" "+this.centerY.toFixed(t)+" "+this.radiusX.toFixed(t)+" "+this.radiusY.toFixed(t);break;case Co:t=0>t?"A"+this.radiusX.toString()+" "+this.radiusY.toString()+" "+this.xAxisRotation.toString()+" "+(this.isLargeArc?1:0)+" "+(this.isClockwiseArc?1:0)+" "+this.endX.toString()+" "+this.endY.toString():"A"+this.radiusX.toFixed(t)+" "+this.radiusY.toFixed(t)+" "+this.xAxisRotation.toFixed(t)+" "+(this.isLargeArc?1:0)+" "+(this.isClockwiseArc?1:0)+" "+this.endX.toFixed(t)+" "+this.endY.toFixed(t);break;default:t=this.type.toString()}return t+(this.isClosed?"z":"")},_.freeze=function(){return this._isFrozen=!0,this},_.ja=function(){return this._isFrozen=!1,this},_.close=function(){return this.isClosed=!0,this},St.Object.defineProperties(Ft.prototype,{_isFrozen:{get:function(){return 0!=(1&this.o)},set:function(t){this.o=t?1|this.o:-2&this.o}},_isInvalidBounds:{get:function(){return 0!=(2&this.o)},set:function(t){this.o=t?2|this.o:-3&this.o}},isClosed:{get:function(){return 0!=(8&this.o)},set:function(t){this.isClosed!==t&&(this.o=t?8|this.o:-9&this.o,this._isInvalidBounds=!0)}},type:{get:function(){return this.qa},set:function(t){this._isFrozen&&Nt(this,t),this.qa=t,this._isInvalidBounds=!0}},endX:{get:function(){return this.xc},set:function(t){this._isFrozen&&Nt(this,t),this.xc=t,this._isInvalidBounds=!0}},endY:{get:function(){return this.yc},set:function(t){this._isFrozen&&Nt(this,t),this.yc=t,this._isInvalidBounds=!0}},point1X:{get:function(){return this.Be},set:function(t){this._isFrozen&&Nt(this,t),this.Be=t,this._isInvalidBounds=!0}},point1Y:{get:function(){return this.Oh},set:function(t){this._isFrozen&&Nt(this,t),this.Oh=t,this._isInvalidBounds=!0}},point2X:{get:function(){return this.Ph},set:function(t){this._isFrozen&&Nt(this,t),this.Ph=t,this._isInvalidBounds=!0}},point2Y:{get:function(){return this.Gg},set:function(t){this._isFrozen&&Nt(this,t),this.Gg=t,this._isInvalidBounds=!0}},centerX:{get:function(){return this.Be},set:function(t){this._isFrozen&&Nt(this,t),this.Be=t,this._isInvalidBounds=!0}},centerY:{get:function(){return this.Oh},set:function(t){this._isFrozen&&Nt(this,t),this.Oh=t,this._isInvalidBounds=!0}},radiusX:{get:function(){return this.Ph},set:function(t){0>t&&pe(t,">= zero",Ft,"radiusX"),this._isFrozen&&Nt(this,t),this.Ph=t,this._isInvalidBounds=!0}},radiusY:{get:function(){return this.Gg},set:function(t){0>t&&pe(t,">= zero",Ft,"radiusY"),this._isFrozen&&Nt(this,t),this.Gg=t,this._isInvalidBounds=!0}},startAngle:{get:function(){return this.xc},set:function(t){this._isFrozen&&Nt(this,t),0>(t%=360)&&(t+=360),this.xc=t,this._isInvalidBounds=!0}},sweepAngle:{get:function(){return this.yc},set:function(t){this._isFrozen&&Nt(this,t),360<t&&(t=360),-360>t&&(t=-360),this.yc=t,this._isInvalidBounds=!0}},isClockwiseArc:{get:function(){return 0!=(4&this.o)},set:function(t){this._isFrozen&&Nt(this,t),this.o=t?4|this.o:-5&this.o,this._isInvalidBounds=!0}},isLargeArc:{get:function(){return 0!=(16&this.o)},set:function(t){this._isFrozen&&Nt(this,t),this.o=t?16|this.o:-17&this.o,this._isInvalidBounds=!0}},xAxisRotation:{get:function(){return this.Be},set:function(t){this._isFrozen&&Nt(this,t),0>(t%=360)&&(t+=360),this.Be=t,this._isInvalidBounds=!0}}}),Ft.prototype.equalsApprox=Ft.prototype.$a;var Vo=new K(Ft,"Move",0),_e=new K(Ft,"Line",1),to=new K(Ft,"Bezier",2),js=new K(Ft,"QuadraticBezier",3),ln=new K(Ft,"Arc",4),Co=new K(Ft,"SvgArc",4);function ar(){this.H=null,this.cu=new A(0,0).freeze(),this.Os=new A(0,0).freeze(),this.ep=this.qq=0,this.fp=1,this.yh="",this.vr=this.xp=!1,this.vp=this.hp=0,this.og=this.Pp=this.Vp=!1,this.Cp=null,this.qr=0,this.sd=this.lr=null}function Jc(){this.H=null,this.va="",this.zq=this.hr=null}function Ne(){this.nm=re,this.df=this.pq="",this.sn=this.tn=this.yn=this.zn=this.xn=this.H=this.ac=null}Ft.className="PathSegment",Ft.Move=Vo,Ft.Line=_e,Ft.Bezier=to,Ft.QuadraticBezier=js,Ft.Arc=ln,Ft.SvgArc=Co,ar.prototype.copy=function(){var t=new ar;return this.clone(t)},ar.prototype.clone=function(t){return t.H=this.H,t.cu.assign(this.viewPoint),t.Os.assign(this.documentPoint),t.qq=this.qq,t.ep=this.ep,t.fp=this.fp,t.yh=this.yh,t.xp=this.xp,t.vr=this.vr,t.hp=this.hp,t.vp=this.vp,t.Vp=this.Vp,t.Pp=this.Pp,t.og=this.og,t.Cp=this.Cp,t.qr=this.qr,t.lr=this.lr,t.sd=this.sd,t},ar.prototype.toString=function(){var t="^";return 0!==this.modifiers&&(t+="M:"+this.modifiers),0!==this.button&&(t+="B:"+this.button),""!==this.key&&(t+="K:"+this.key),0!==this.clickCount&&(t+="C:"+this.clickCount),0!==this.delta&&(t+="D:"+this.delta),this.handled&&(t+="h"),this.bubbles&&(t+="b"),null!==this.documentPoint&&(t+="@"+this.documentPoint.toString()),t},ar.prototype.vo=function(t,e){var n=this.diagram;return null===n||ZS(n,this.event,t,e),e},ar.prototype.iz=function(t,e){var n=this.diagram;return null===n||(ZS(n,this.event,t,e),e.assign(n.rs(e))),e},St.Object.defineProperties(ar.prototype,{diagram:{get:function(){return this.H},set:function(t){this.H=t}},viewPoint:{get:function(){return this.cu},set:function(t){this.cu.assign(t)}},documentPoint:{get:function(){return this.Os},set:function(t){this.Os.assign(t)}},modifiers:{get:function(){return this.qq},set:function(t){this.qq=t}},button:{get:function(){return this.ep},set:function(t){if(this.ep=t,null===this.event)switch(t){case 0:this.buttons=1;break;case 1:this.buttons=4;break;case 2:this.buttons=2}}},buttons:{get:function(){return this.fp},set:function(t){this.fp=t}},key:{get:function(){return this.yh},set:function(t){this.yh=t}},down:{get:function(){return this.xp},set:function(t){this.xp=t}},up:{get:function(){return this.vr},set:function(t){this.vr=t}},clickCount:{get:function(){return this.hp},set:function(t){this.hp=t}},delta:{get:function(){return this.vp},set:function(t){this.vp=t}},isMultiTouch:{get:function(){return this.Vp},set:function(t){this.Vp=t}},handled:{get:function(){return this.Pp},set:function(t){this.Pp=t}},bubbles:{get:function(){return this.og},set:function(t){this.og=t}},event:{get:function(){return this.Cp},set:function(t){this.Cp=t}},isTouchEvent:{get:function(){var t=mt.TouchEvent,e=this.event;return!!(t&&e instanceof t)||(t=mt.PointerEvent)&&e instanceof t&&("touch"===e.pointerType||"pen"===e.pointerType)}},timestamp:{get:function(){return this.qr},set:function(t){this.qr=t}},targetDiagram:{get:function(){return this.lr},set:function(t){this.lr=t}},targetObject:{get:function(){return this.sd},set:function(t){this.sd=t}},control:{get:function(){return 0!=(1&this.modifiers)},set:function(t){this.modifiers=t?1|this.modifiers:-2&this.modifiers}},shift:{get:function(){return 0!=(4&this.modifiers)},set:function(t){this.modifiers=t?4|this.modifiers:-5&this.modifiers}},alt:{get:function(){return 0!=(2&this.modifiers)},set:function(t){this.modifiers=t?2|this.modifiers:-3&this.modifiers}},meta:{get:function(){return 0!=(8&this.modifiers)},set:function(t){this.modifiers=t?8|this.modifiers:-9&this.modifiers}},left:{get:function(){var t=this.event;return null===t||"mousedown"!==t.type&&"mouseup"!==t.type&&"pointerdown"!==t.type&&"pointerup"!==t.type?0!=(1&this.buttons):0===this.button},set:function(t){this.buttons=t?1|this.buttons:-2&this.buttons}},right:{get:function(){var t=this.event;return null===t||"mousedown"!==t.type&&"mouseup"!==t.type&&"pointerdown"!==t.type&&"pointerup"!==t.type?0!=(2&this.buttons):2===this.button},set:function(t){this.buttons=t?2|this.buttons:-3&this.buttons}},middle:{get:function(){var t=this.event;return null===t||"mousedown"!==t.type&&"mouseup"!==t.type&&"pointerdown"!==t.type&&"pointerup"!==t.type?0!=(4&this.buttons):1===this.button},set:function(t){this.buttons=t?4|this.buttons:-5&this.buttons}}}),ar.prototype.getMultiTouchDocumentPoint=ar.prototype.iz,ar.prototype.getMultiTouchViewPoint=ar.prototype.vo,ar.className="InputEvent",Jc.prototype.copy=function(){var t=new Jc;return t.H=this.H,t.va=this.va,t.hr=this.hr,t.zq=this.zq,t},Jc.prototype.toString=function(){var t="*"+this.name;return null!==this.subject&&(t+=":"+this.subject.toString()),null!==this.parameter&&(t+="("+this.parameter.toString()+")"),t},St.Object.defineProperties(Jc.prototype,{diagram:{get:function(){return this.H},set:function(t){this.H=t}},name:{get:function(){return this.va},set:function(t){this.va=t}},subject:{get:function(){return this.hr},set:function(t){this.hr=t}},parameter:{get:function(){return this.zq},set:function(t){this.zq=t}}}),Jc.className="DiagramEvent",Ne.prototype.clear=function(){this.sn=this.tn=this.yn=this.zn=this.xn=this.H=this.ac=null},Ne.prototype.copy=function(){var t=new Ne;t.nm=this.nm,t.pq=this.pq,t.df=this.df,t.ac=this.ac,t.H=this.H,t.xn=this.xn;var e=this.zn;return t.zn=Vt(e)&&"function"==typeof e.J?e.J():e,t.yn=Vt(e=this.yn)&&"function"==typeof e.J?e.J():e,t.tn=Vt(e=this.tn)&&"function"==typeof e.J?e.J():e,t.sn=Vt(e=this.sn)&&"function"==typeof e.J?e.J():e,t},Ne.prototype.ob=function(t){t.classType===Ne&&(this.change=t)},Ne.prototype.toString=function(){var t="";return t=this.change===ps?t+"* ":this.change===re?t+(null!==this.model?"!m":"!d"):t+(null!==this.model?"!m":"!d")+this.change,this.propertyName&&"string"==typeof this.propertyName&&(t+=" "+this.propertyName),this.modelChange&&this.modelChange!==this.propertyName&&(t+=" "+this.modelChange),t+=": ",this.change===ps?null!==this.oldValue&&(t+=" "+this.oldValue):(null!==this.object&&(t+=vo(this.object)),null!==this.oldValue&&(t+="  old: "+vo(this.oldValue)),null!==this.oldParam&&(t+=" "+this.oldParam),null!==this.newValue&&(t+="  new: "+vo(this.newValue)),null!==this.newParam&&(t+=" "+this.newParam)),t},Ne.prototype.I=function(t){return t?this.oldValue:this.newValue},Ne.prototype.kz=function(t){return t?this.oldParam:this.newParam},Ne.prototype.canUndo=function(){return null!==this.model||null!==this.diagram},Ne.prototype.undo=function(){this.canUndo()&&(null!==this.model?this.model.changeState(this,!0):null!==this.diagram&&this.diagram.changeState(this,!0))},Ne.prototype.canRedo=function(){return null!==this.model||null!==this.diagram},Ne.prototype.redo=function(){this.canRedo()&&(null!==this.model?this.model.changeState(this,!1):null!==this.diagram&&this.diagram.changeState(this,!1))},St.Object.defineProperties(Ne.prototype,{model:{get:function(){return this.ac},set:function(t){this.ac=t}},diagram:{get:function(){return this.H},set:function(t){this.H=t}},change:{get:function(){return this.nm},set:function(t){this.nm=t}},modelChange:{get:function(){return this.pq},set:function(t){this.pq=t}},propertyName:{get:function(){return this.df},set:function(t){this.df=t}},isTransactionFinished:{get:function(){return this.nm===ps&&("CommittedTransaction"===this.df||"FinishedUndo"===this.df||"FinishedRedo"===this.df)}},object:{get:function(){return this.xn},set:function(t){this.xn=t}},oldValue:{get:function(){return this.zn},set:function(t){this.zn=t}},oldParam:{get:function(){return this.yn},set:function(t){this.yn=t}},newValue:{get:function(){return this.tn},set:function(t){this.tn=t}},newParam:{get:function(){return this.sn},set:function(t){this.sn=t}}}),Ne.prototype.redo=Ne.prototype.redo,Ne.prototype.canRedo=Ne.prototype.canRedo,Ne.prototype.undo=Ne.prototype.undo,Ne.prototype.canUndo=Ne.prototype.canUndo,Ne.prototype.getParam=Ne.prototype.kz,Ne.prototype.getValue=Ne.prototype.I,Ne.prototype.clear=Ne.prototype.clear;var ps=new K(Ne,"Transaction",-1),re=new K(Ne,"Property",0),un=new K(Ne,"Insert",1),Me=new K(Ne,"Remove",2);function Pn(){this.m=(new tt).freeze(),this.va="",this.j=!1}function Le(){this.ut=new Q,this.Ad=!1,this.u=(new tt).freeze(),this.se=-1,this.m=999,this.ue=!1,this.qp=null,this.Vh=0,this.j=!1,this.xe=(new tt).freeze(),this.Wk=new tt,this.Ws=!0,this.ft=this.Tp=this.it=this.ht=!1}function a1(t,e,n){if(t.isUndoingRedoing)return!1;t.checksTransactionLevel&&1>t.transactionLevel&&wi("Ending transaction without having started a transaction: "+n);var s=1===t.transactionLevel,l=t.currentTransaction;s&&e&&(t.isInternalTransaction||t.Kb("CommittingTransaction",n,l));var u=0;if(0<t.transactionLevel&&(t.Vh--,t.isEnabled)){var c=t.xe.count;0<c&&(""===n&&(n=t.xe.K(0)),t.xe.ja(),t.xe.mb(c-1),t.xe.freeze()),0<(c=t.Wk.count)&&(u=t.Wk.K(c-1),t.Wk.mb(c-1))}if(s){if(e){if(t.Tp=!1,null===l&&""!==n&&(l=t.currentTransaction),t.isEnabled&&null!==l){for(l.isComplete||(l.isComplete=!0,l.name=n),(e=t.history).ja(),s=e.count-1;s>t.historyIndex;s--)null!==(u=e.K(s))&&u.clear(),e.mb(s),t.Tp=!0;0<=(s=t.maxHistoryLength)&&(0===s?e.clear():e.count>=s&&(null!==(u=e.K(0))&&u.clear(),e.mb(0),t.se--)),0===s||0!==e.count&&e.get(e.count-1)===l||(e.add(l),t.se++),e.freeze()}t.isInternalTransaction||t.Kb("CommittedTransaction",n,l)}else{t.ue=!0;try{t.isEnabled&&null!==l&&(l.isComplete=!0,l.undo())}finally{t.isInternalTransaction||t.Kb("RolledBackTransaction",n,l),t.ue=!1}null!==l&&l.clear()}return t.qp=null,t.isPendingClear&&t.clear(),t.isPendingClear=!1,t.isPendingUnmodified=!1,!0}if(t.isEnabled&&!e&&null!==l){for(t=u,l=(n=l.changes).count-1;l>=t;l--)null!==(e=n.K(l))&&e.undo(),n.ja(),n.mb(l);n.freeze()}return!1}function Ot(){En(this),this.H=bh,this.va="",this.Ad=!0,this.hb=!1,this.xi=null,this.gy=new ar,this.yr=-1}function Te(){Ot.call(this),this.name="ToolManager",this.cb=new tt,this.nb=new tt,this.Db=new tt,this.F=this.W=850,this.m=new gt(2,2).ha(),this.Ga=5e3,this.ga=Zc,this.u=u1,this.pp=this.j=null,this.uj=-1}function qg(t,e){t.standardMouseOver(),t.isBeyondDragSize()&&t.standardWaitAfter(t.isActive?t.holdDelay:t.hoverDelay,e.lastInput)}Ne.className="ChangedEvent",Ne.Transaction=ps,Ne.Property=re,Ne.Insert=un,Ne.Remove=Me,Pn.prototype.toString=function(t){var e="Transaction: "+this.name+" "+this.changes.count.toString()+(this.isComplete?"":", incomplete");if(void 0!==t&&0<t){t=this.changes.count;for(var n=0;n<t;n++){var s=this.changes.K(n);null!==s&&(e+="\n  "+s.toString())}}return e},Pn.prototype.clear=function(){var t=this.changes;t.ja();for(var e=t.count-1;0<=e;e--){var n=t.K(e);null!==n&&n.clear()}t.clear(),t.freeze()},Pn.prototype.canUndo=function(){return this.isComplete},Pn.prototype.undo=function(){if(this.canUndo())for(var t=this.changes.count-1;0<=t;t--){var e=this.changes.K(t);null!==e&&e.undo()}},Pn.prototype.canRedo=function(){return this.isComplete},Pn.prototype.redo=function(){if(this.canRedo())for(var t=this.changes.count,e=0;e<t;e++){var n=this.changes.K(e);null!==n&&n.redo()}},Pn.prototype.Vj=function(){if(this.isComplete){var t=this.changes;t.ja();for(var e=new xt,n=0;n<t.count;n++){var s=t.K(n);if(null!==s&&s.change===re&&s.object){var l=e.get(s.object);l||(l=new xt,e.set(s.object,l));var u=l.get(s.propertyName);null===u?l.set(s.propertyName,-1):(0<u&&t.Vc(u,null),l.set(s.propertyName,n))}}for(n=e=0;n<t.count;n++)null!==(s=t.K(n))&&(n>e&&t.Vc(e,s),e++);for(;t.length>e;)t.pop();t.freeze()}},St.Object.defineProperties(Pn.prototype,{changes:{get:function(){return this.m}},name:{get:function(){return this.va},set:function(t){this.va=t}},isComplete:{get:function(){return this.j},set:function(t){this.j=t}}}),Pn.prototype.optimize=Pn.prototype.Vj,Pn.prototype.redo=Pn.prototype.redo,Pn.prototype.canRedo=Pn.prototype.canRedo,Pn.prototype.undo=Pn.prototype.undo,Pn.prototype.canUndo=Pn.prototype.canUndo,Pn.prototype.clear=Pn.prototype.clear,Pn.className="Transaction",Le.prototype.toString=function(t){var e="UndoManager "+this.historyIndex+"<"+this.history.count+"<="+this.maxHistoryLength;e+="[";for(var n=this.nestedTransactionNames.count,s=0;s<n;s++)0<s&&(e+=" "),e+=this.nestedTransactionNames.K(s);if(e+="]",void 0!==t&&0<t)for(n=this.history.count,s=0;s<n;s++)e+="\n "+this.history.K(s).toString(t-1);return e},Le.prototype.clear=function(){var t=this.history;t.ja();for(var e=t.count-1;0<=e;e--){var n=t.K(e);null!==n&&n.clear()}t.clear(),this.se=-1,t.freeze(),this.ue=!1,this.qp=null,this.Vh=0,this.xe.ja(),this.xe.clear(),this.xe.freeze(),this.Wk.clear(),this.ft=this.Tp=this.it=this.ht=!1},Le.prototype.copyProperties=function(t){this.isEnabled=t.isEnabled,this.maxHistoryLength=t.maxHistoryLength,this.checksTransactionLevel=t.checksTransactionLevel},(_=Le.prototype).Bw=function(t){this.ut.add(t)},_.yx=function(t){this.ut.remove(t)},_.Da=function(t){if(void 0===t&&(t=""),null===t&&(t=""),this.isUndoingRedoing)return!1;!0===this.Ws&&(this.Ws=!1,this.Vh++,this.isInternalTransaction||this.Kb("StartingFirstTransaction",t,this.currentTransaction),0<this.Vh&&this.Vh--),this.isEnabled&&(this.xe.ja(),this.xe.add(t),this.xe.freeze(),this.Wk.add(null===this.currentTransaction?0:this.currentTransaction.changes.count)),this.Vh++;var e=1===this.transactionLevel;return e&&(this.isInternalTransaction||this.Kb("StartedTransaction",t,this.currentTransaction)),e},_.eb=function(t){return void 0===t&&(t=""),a1(this,!0,t)},_.Bf=function(){return a1(this,!1,"")},Le.prototype.canUndo=function(){if(!this.isEnabled||0<this.transactionLevel)return!1;var t=this.transactionToUndo;return!(null===t||!t.canUndo())},Le.prototype.undo=function(){if(this.canUndo()){var t=this.transactionToUndo;try{this.ue=!0,this.Kb("StartingUndo","Undo",t),this.se--,t.undo()}catch(e){wi("undo error: "+e.toString())}finally{this.Kb("FinishedUndo","Undo",t),this.ue=!1}}},Le.prototype.canRedo=function(){if(!this.isEnabled||0<this.transactionLevel)return!1;var t=this.transactionToRedo;return!(null===t||!t.canRedo())},Le.prototype.redo=function(){if(this.canRedo()){var t=this.transactionToRedo;try{this.ue=!0,this.Kb("StartingRedo","Redo",t),this.se++,t.redo()}catch(e){wi("redo error: "+e.toString())}finally{this.Kb("FinishedRedo","Redo",t),this.ue=!1}}},Le.prototype.Kb=function(t,e,n){void 0===n&&(n=null);var s=new Ne;for(s.change=ps,s.propertyName=t,s.object=n,s.oldValue=e,t=this.models;t.next();)s.model=e=t.value,e.Cr(s)},Le.prototype.Fu=function(t){if(this.isEnabled&&!this.isUndoingRedoing&&!this.skipsEvent(t)){var e=this.currentTransaction;null===e&&(this.qp=e=new Pn);var n=t.copy();(e=e.changes).ja(),e.add(n),e.freeze(),this.checksTransactionLevel&&0>=this.transactionLevel&&!this.Ws&&(null!==(t=t.diagram)&&!1===t.ji||wi("Change not within a transaction: "+n.toString()))}},Le.prototype.skipsEvent=function(t){if(null===t||0>t.change.value)return!0;if(null===(t=t.object))return!1;if(void 0!==t.layer){if(null!==(t=t.layer)&&t.isTemporary)return!0}else if(t.isTemporary)return!0;return!1},St.Object.defineProperties(Le.prototype,{models:{get:function(){return this.ut.iterator}},isEnabled:{get:function(){return this.Ad},set:function(t){this.Ad=t}},transactionToUndo:{get:function(){return 0<=this.historyIndex&&this.historyIndex<=this.history.count-1?this.history.K(this.historyIndex):null}},transactionToRedo:{get:function(){return this.historyIndex<this.history.count-1?this.history.K(this.historyIndex+1):null}},isUndoingRedoing:{get:function(){return this.ue}},history:{get:function(){return this.u}},maxHistoryLength:{get:function(){return this.m},set:function(t){this.m=t}},historyIndex:{get:function(){return this.se}},currentTransaction:{get:function(){return this.qp}},transactionLevel:{get:function(){return this.Vh}},isInTransaction:{get:function(){return 0<this.Vh}},checksTransactionLevel:{get:function(){return this.j},set:function(t){this.j=t}},nestedTransactionNames:{get:function(){return this.xe}},isPendingClear:{get:function(){return this.ht},set:function(t){this.ht=t}},isPendingUnmodified:{get:function(){return this.it},set:function(t){this.it=t}},isInternalTransaction:{get:function(){return this.ft},set:function(t){this.ft=t}},isJustDiscarded:{get:function(){return this.Tp}}}),Le.prototype.handleChanged=Le.prototype.Fu,Le.prototype.redo=Le.prototype.redo,Le.prototype.undo=Le.prototype.undo,Le.prototype.canUndo=Le.prototype.canUndo,Le.prototype.rollbackTransaction=Le.prototype.Bf,Le.prototype.commitTransaction=Le.prototype.eb,Le.prototype.startTransaction=Le.prototype.Da,Le.prototype.removeModel=Le.prototype.yx,Le.prototype.addModel=Le.prototype.Bw,Le.prototype.clear=Le.prototype.clear,Le.className="UndoManager",Ot.prototype.toString=function(){return""!==this.name?this.name+" Tool":la(this.constructor)},Ot.prototype.updateAdornments=function(){},Ot.prototype.canStart=function(){return this.isEnabled},Ot.prototype.doStart=function(){},Ot.prototype.doActivate=function(){this.isActive=!0},Ot.prototype.doDeactivate=function(){this.isActive=!1},Ot.prototype.doStop=function(){},Ot.prototype.doCancel=function(){this.transactionResult=null,this.stopTool()},Ot.prototype.stopTool=function(){var t=this.diagram;t.currentTool===this&&(t.currentTool=null,t.currentCursor="")},Ot.prototype.doMouseDown=function(){!this.isActive&&this.canStart()&&this.doActivate()},Ot.prototype.doMouseMove=function(){},Ot.prototype.doMouseUp=function(){this.stopTool()},Ot.prototype.doMouseWheel=function(){},Ot.prototype.canStartMultiTouch=function(){return!0},Ot.prototype.standardPinchZoomStart=function(){var t=this.diagram,e=t.lastInput,n=e.vo(0,A.allocAt(NaN,NaN)),s=e.vo(1,A.allocAt(NaN,NaN));if(n.v()&&s.v()&&(this.doCancel(),t.yl("hasGestureZoom"))){t.fw=t.scale;var l=s.x-n.x,u=s.y-n.y;t.nw=Math.sqrt(l*l+u*u),e.bubbles=!1}A.free(n),A.free(s)},Ot.prototype.standardPinchZoomMove=function(){var t=this.diagram,e=t.lastInput,n=e.vo(0,A.allocAt(NaN,NaN)),s=e.vo(1,A.allocAt(NaN,NaN));if(n.v()&&s.v()&&(this.doCancel(),t.yl("hasGestureZoom"))){var l=s.x-n.x,u=s.y-n.y;u=Math.sqrt(l*l+u*u)/t.nw,l=new A((Math.min(s.x,n.x)+Math.max(s.x,n.x))/2,(Math.min(s.y,n.y)+Math.max(s.y,n.y))/2);var c=t.commandHandler;if((u*=t.fw)!==t.scale&&c.canResetZoom(u)){var d=t.zoomPoint;t.zoomPoint=l,c.resetZoom(u),t.zoomPoint=d}e.bubbles=!1}A.free(n),A.free(s)},Ot.prototype.doKeyDown=function(){"Esc"===this.diagram.lastInput.key&&this.doCancel()},Ot.prototype.doKeyUp=function(){},Ot.prototype.Da=function(t){return void 0===t&&(t=this.name),this.transactionResult=null,this.diagram.Da(t)},Ot.prototype.stopTransaction=function(){var t=this.diagram;return null===this.transactionResult?t.Bf():t.eb(this.transactionResult)},Ot.prototype.standardMouseSelect=function(){var t=this.diagram;if(t.allowSelect){var e=t.lastInput,n=t.wl(e.documentPoint,!1);if(null!==n){if(Ro?e.meta:e.control){for(t.P("ChangingSelection",t.selection),e=n;null!==e&&!e.canSelect();)e=e.containingGroup;null!==e&&(e.isSelected=!e.isSelected),t.P("ChangedSelection",t.selection)}else if(e.shift){if(!n.isSelected){for(t.P("ChangingSelection",t.selection),e=n;null!==e&&!e.canSelect();)e=e.containingGroup;null!==e&&(e.isSelected=!0),t.P("ChangedSelection",t.selection)}}else if(!n.isSelected){for(e=n;null!==e&&!e.canSelect();)e=e.containingGroup;null!==e&&t.select(e)}}else!e.left||(Ro?e.meta:e.control)||e.shift||t.clearSelection()}},Ot.prototype.standardMouseClick=function(t,e){void 0===t&&(t=null),void 0===e&&(e=function(l){return!l.layer.isTemporary});var n=this.diagram,s=n.lastInput;return t=n.ec(s.documentPoint,t,e),s.targetObject=t,function l1(t,e,n){if(e.handled=!1,null===t||t.yf()){var s=0;e.left?s=1===e.clickCount?1:2===e.clickCount?2:1:e.right&&1===e.clickCount&&(s=3);var l="ObjectSingleClicked";if(null!==t){switch(s){case 1:l="ObjectSingleClicked";break;case 2:l="ObjectDoubleClicked";break;case 3:l="ObjectContextClicked"}0!==s&&n.P(l,t)}else{switch(s){case 1:l="BackgroundSingleClicked";break;case 2:l="BackgroundDoubleClicked";break;case 3:l="BackgroundContextClicked"}0!==s&&n.P(l)}if(null!==t)for(;null!==t;){switch(n=null,s){case 1:n=t.click;break;case 2:n=t.doubleClick?t.doubleClick:t.click;break;case 3:n=t.contextClick}if(null!==n&&(n(e,t),e.handled))break;t=t.panel}else{switch(t=null,s){case 1:t=n.click;break;case 2:t=n.doubleClick?n.doubleClick:n.click;break;case 3:t=n.contextClick}null!==t&&t(e)}}}(t,s,n),s.handled},Ot.prototype.standardMouseOver=function(){var t=this.diagram,e=t.lastInput;if(!0!==t.animationManager.zb){var n=t.skipsUndoManager;t.skipsUndoManager=!0;var s=t.viewportBounds.ba(e.documentPoint)?t.ec(e.documentPoint,null,null):null;e.targetObject=s;var l=!1;if(s!==t.qk){var u=t.qk,c=u;for(t.qk=s,this.doCurrentObjectChanged(u,s),e.handled=!1;null!==u;){var d=u.mouseLeave;if(null!==d&&(s===u||null!==s&&s.jg(u)||(d(e,u,s),l=!0,e.handled)))break;u=u.panel}for(u=c,e.handled=!1;null!==s&&(null===(c=s.mouseEnter)||!(u===s||null!==u&&u.jg(s)||(c(e,s,u),l=!0,e.handled)));)s=s.panel;s=t.qk}if(null!==s){for(u=s,c="";null!==u&&""===(c=u.cursor);)u=u.panel;for(t.currentCursor=c,e.handled=!1,u=s;null!==u&&(null===(s=u.mouseOver)||(s(e,u),l=!0,!e.handled));)u=u.panel}else t.currentCursor="",null!==(s=t.mouseOver)&&(s(e),l=!0);l&&t.Mb(),t.skipsUndoManager=n}},Ot.prototype.doCurrentObjectChanged=function(){},Ot.prototype.standardMouseWheel=function(){var t=this.diagram,e=t.lastInput,n=e.delta;if(0!==n&&t.documentBounds.v()){var s=t.commandHandler,l=t.toolManager.mouseWheelBehavior;if(null!==s&&(l===eo&&!e.shift||l===Zc&&e.control))(0<n?s.canIncreaseZoom():s.canDecreaseZoom())&&(l=t.zoomPoint,t.zoomPoint=e.viewPoint,0<n?s.increaseZoom():s.decreaseZoom(),t.zoomPoint=l),e.bubbles=!1;else if(l===eo&&e.shift||l===Zc&&!e.control){s=t.position.copy();var u=0<n?n:-n,c=e.event,d=c.deltaMode;if(l=c.deltaX,c=c.deltaY,(BS||dt)&&(d=1,0<l&&(l=3),0>l&&(l=-3),0<c&&(c=3),0>c&&(c=-3)),void 0===d||void 0===l||void 0===c||0===l&&0===c||e.shift)!e.shift&&t.allowVerticalScroll?t.scroll("pixel",0<n?"up":"down",u=3*u*t.scrollVerticalLineChange):e.shift&&t.allowHorizontalScroll&&t.scroll("pixel",0<n?"left":"right",u=3*u*t.scrollHorizontalLineChange);else{switch(d){case 0:default:n="pixel";break;case 1:n="line";break;case 2:n="page"}0!==l&&t.allowHorizontalScroll&&(0<(l*=t.scrollHorizontalLineChange/16)?t.scroll(n,"left",-l):t.scroll(n,"right",l)),0!==c&&t.allowVerticalScroll&&(0<(c*=t.scrollVerticalLineChange/16)?t.scroll(n,"up",-c):t.scroll(n,"down",c))}t.position.C(s)||(e.bubbles=!1)}}},Ot.prototype.standardWaitAfter=function(t,e){void 0===e&&(e=this.diagram.lastInput),this.cancelWaitAfter();var n=this,s=e.clone(this.gy);this.yr=xu(function(){n.doWaitAfter(s)},t)},Ot.prototype.cancelWaitAfter=function(){-1!==this.yr&&mt.clearTimeout(this.yr),this.yr=-1},Ot.prototype.doWaitAfter=function(){},Ot.prototype.findToolHandleAt=function(t,e){return null===(t=this.diagram.ec(t,function(n){for(;null!==n&&!(n.panel instanceof At);)n=n.panel;return n}))?null:t.part.category===e?t:null},Ot.prototype.isBeyondDragSize=function(t,e){var n=this.diagram;void 0===t&&(t=n.firstInput.viewPoint),void 0===e&&(e=n.lastInput.viewPoint);var s=n.toolManager.dragSize,l=s.width;return s=s.height,n.firstInput.isTouchEvent&&(l+=6,s+=6),Math.abs(e.x-t.x)>l||Math.abs(e.y-t.y)>s},St.Object.defineProperties(Ot.prototype,{diagram:{get:function(){return this.H},set:function(t){t instanceof V&&(this.H=t)}},name:{get:function(){return this.va},set:function(t){this.va=t}},isEnabled:{get:function(){return this.Ad},set:function(t){this.Ad=t}},isActive:{get:function(){return this.hb},set:function(t){this.hb=t}},transactionResult:{get:function(){return this.xi},set:function(t){this.xi=t}}}),Ot.prototype.startTransaction=Ot.prototype.Da,Ot.className="Tool",zt(Te,Ot),Te.prototype.initializeStandardTools=function(){},Te.prototype.updateAdornments=function(t){var e=this.currentToolTip;if(e instanceof At&&this.pp===t){var n=e.adornedObject;(null!==t?n.part===t:null===n)?this.showToolTip(e,n):this.hideToolTip()}},Te.prototype.doMouseDown=function(){var t=this.diagram,e=t.lastInput;if(e.isTouchEvent&&this.gestureBehavior===Qc&&(e.bubbles=!1),e.isMultiTouch){if(this.cancelWaitAfter(),this.gestureBehavior===Fv)return void(e.bubbles=!0);if(this.gestureBehavior===Qc)return;if(t.currentTool.canStartMultiTouch())return void t.currentTool.standardPinchZoomStart()}for(var n=this.mouseDownTools.length,s=0;s<n;s++){var l=this.mouseDownTools.K(s);if(l.diagram=this.diagram,l.canStart())return t.doFocus(),t.currentTool=l,void(t.currentTool===l&&(l.isActive||l.doActivate(),l.doMouseDown()))}1===t.lastInput.button&&(this.mouseWheelBehavior===Zc?this.mouseWheelBehavior=eo:this.mouseWheelBehavior===eo&&(this.mouseWheelBehavior=Zc)),this.doActivate(),this.standardWaitAfter(this.holdDelay,e)},Te.prototype.doMouseMove=function(){var t=this.diagram,e=t.lastInput;if(e.isMultiTouch){if(this.gestureBehavior===Fv)return void(e.bubbles=!0);if(this.gestureBehavior===Qc)return;if(t.currentTool.canStartMultiTouch())return void t.currentTool.standardPinchZoomMove()}if(this.isActive)for(var n=this.mouseMoveTools.length,s=0;s<n;s++){var l=this.mouseMoveTools.K(s);if(l.diagram=this.diagram,l.canStart())return t.doFocus(),t.currentTool=l,void(t.currentTool===l&&(l.isActive||l.doActivate(),l.doMouseMove()))}qg(this,t),null===(t=e.event)||"pointermove"!==t.type&&t.cancelable||(e.bubbles=!0)},Te.prototype.doCurrentObjectChanged=function(t,e){null===(t=this.currentToolTip)||null!==e&&t instanceof At&&(e===t||e.jg(t))||this.hideToolTip()},Te.prototype.doWaitAfter=function(t){var e=this.diagram;e.Ha&&(this.doMouseHover(),this.isActive||this.doToolTip(),t.isTouchEvent&&!e.lastInput.handled&&((t=t.copy()).button=2,t.buttons=2,e.lastInput=t,e.Wt=!0,e.doMouseUp()))},Te.prototype.doMouseHover=function(){var t=this.diagram,e=t.lastInput;null===e.targetObject&&(e.targetObject=t.ec(e.documentPoint,null,null));var n=e.targetObject;if(null!==n)for(e.handled=!1;null!==n&&(null===(t=this.isActive?n.mouseHold:n.mouseHover)||(t(e,n),!e.handled));)n=n.panel;else null!==(n=this.isActive?t.mouseHold:t.mouseHover)&&n(e)},Te.prototype.doToolTip=function(){var t=this.diagram,e=t.lastInput;if(null===e.targetObject&&(e.targetObject=t.ec(e.documentPoint,null,null)),null!==(e=e.targetObject)){if(!((t=this.currentToolTip)instanceof At)||e!==t&&!e.jg(t)){for(;null!==e;){if(null!==(t=e.toolTip))return void this.showToolTip(t,e);e=e.panel}this.hideToolTip()}}else null!==(e=t.toolTip)?this.showToolTip(e,null):this.hideToolTip()},Te.prototype.showToolTip=function(t,e){var n=this.diagram;if(t!==this.currentToolTip&&this.hideToolTip(),t instanceof At){t.layerName="Tool",t.selectable=!1,t.scale=1/n.scale,t.category="ToolTip",null!==t.placeholder&&(t.placeholder.scale=n.scale);var s=t.diagram;null!==s&&s!==n&&s.remove(t),n.add(t),null!==e?t.adornedObject=e:t.data=n.model,t.Za(),this.positionToolTip(t,e)}else t instanceof za&&t!==this.currentToolTip&&t.show(e,n,this);if(this.currentToolTip=t,-1!==this.uj&&(mt.clearTimeout(this.uj),this.uj=-1),0<(t=this.toolTipDuration)&&t!==1/0){var l=this;this.uj=xu(function(){l.hideToolTip()},t)}},Te.prototype.positionToolTip=function(t){if(null===t.placeholder){var e=this.diagram,n=e.lastInput.documentPoint.copy(),s=t.measuredBounds,l=e.viewportBounds;e.lastInput.isTouchEvent&&(n.x-=s.width),n.x+s.width>l.right&&(n.x-=s.width+5/e.scale),n.x<l.x&&(n.x=l.x),n.y=n.y+20/e.scale+s.height>l.bottom?n.y-(s.height+5/e.scale):n.y+20/e.scale,n.y<l.y&&(n.y=l.y),t.position=n}},Te.prototype.hideToolTip=function(){-1!==this.uj&&(mt.clearTimeout(this.uj),this.uj=-1);var t=this.diagram,e=this.currentToolTip;null!==e&&(e instanceof At?(t.remove(e),null!==this.pp&&this.pp.Af(e.category),e.data=null,e.adornedObject=null):e instanceof za&&null!==e.hide&&e.hide(t,this),this.currentToolTip=null)},Te.prototype.doMouseUp=function(){this.cancelWaitAfter();var t=this.diagram;if(this.isActive)for(var e=this.mouseUpTools.length,n=0;n<e;n++){var s=this.mouseUpTools.K(n);if(s.diagram=this.diagram,s.canStart())return t.doFocus(),t.currentTool=s,void(t.currentTool===s&&(s.isActive||s.doActivate(),s.doMouseUp()))}t.doFocus(),this.doDeactivate()},Te.prototype.doMouseWheel=function(){this.standardMouseWheel()},Te.prototype.doKeyDown=function(){var t=this.diagram;null!==t.commandHandler&&t.commandHandler.doKeyDown()},Te.prototype.doKeyUp=function(){var t=this.diagram;null!==t.commandHandler&&t.commandHandler.doKeyUp()},Te.prototype.findTool=function(t){for(var e=this.mouseDownTools.length,n=0;n<e;n++){var s=this.mouseDownTools.K(n);if(s.name===t)return s}for(e=this.mouseMoveTools.length,n=0;n<e;n++)if((s=this.mouseMoveTools.K(n)).name===t)return s;for(e=this.mouseUpTools.length,n=0;n<e;n++)if((s=this.mouseUpTools.K(n)).name===t)return s;return null},Te.prototype.replaceTool=function(t,e){null!==e&&(e.diagram=this.diagram);for(var n=this.mouseDownTools.length,s=0;s<n;s++){var l=this.mouseDownTools.K(s);if(l.name===t)return null!==e?this.mouseDownTools.Vc(s,e):this.mouseDownTools.mb(s),l}for(n=this.mouseMoveTools.length,s=0;s<n;s++)if((l=this.mouseMoveTools.K(s)).name===t)return null!==e?this.mouseMoveTools.Vc(s,e):this.mouseMoveTools.mb(s),l;for(n=this.mouseUpTools.length,s=0;s<n;s++)if((l=this.mouseUpTools.K(s)).name===t)return null!==e?this.mouseUpTools.Vc(s,e):this.mouseUpTools.mb(s),l;return null},Te.prototype.gb=function(t,e,n){null!==e&&(e.name=t,e.diagram=this.diagram),this.findTool(t)?this.replaceTool(t,e):null!==e&&n.add(e)},St.Object.defineProperties(Te.prototype,{mouseWheelBehavior:{get:function(){return this.ga},set:function(t){this.ga=t}},gestureBehavior:{get:function(){return this.u},set:function(t){this.u=t}},currentToolTip:{get:function(){return this.j},set:function(t){this.j=t,this.pp=null!==t&&t instanceof At?t.adornedPart:null}},mouseDownTools:{get:function(){return this.cb}},mouseMoveTools:{get:function(){return this.nb}},mouseUpTools:{get:function(){return this.Db}},hoverDelay:{get:function(){return this.W},set:function(t){this.W=t}},holdDelay:{get:function(){return this.F},set:function(t){this.F=t}},dragSize:{get:function(){return this.m},set:function(t){this.m=t.J()}},toolTipDuration:{get:function(){return this.Ga},set:function(t){this.Ga=t}}}),Te.prototype.replaceStandardTool=Te.prototype.gb;var Un,Zc=new K(Te,"WheelScroll",0),eo=new K(Te,"WheelZoom",1),Lv=new K(Te,"WheelNone",2),u1=new K(Te,"GestureZoom",3),Qc=new K(Te,"GestureCancel",4),Fv=new K(Te,"GestureNone",5);function Ie(){Ot.call(this),this.name="Dragging",this.u=this.ww=this.nb=!0,this.m=this.Ga=this.W=this.Ce=null,this.Gm=this.Db=!1,this.il=new A(NaN,NaN),this.br=new A,this.cb=!0,this.wk=100,this.tg=[],this.le=(new Q).freeze(),this.ga=new wf,this.hn=null,this.F="copy",this.Hc="",this.Ic="no-drop"}function Rv(t,e){if(t.dragsLink){var n=t.diagram;n.allowRelink&&(n.model.Nj()&&1===e.count&&e.first()instanceof z?(t.draggedLink=e.first(),t.draggedLink.canRelinkFrom()&&t.draggedLink.canRelinkTo()&&t.draggedLink.zj(),t.Ce=n.toolManager.findTool("Relinking"),null===t.Ce&&(t.Ce=new Yi,t.Ce.diagram=n),t.Ce.originalLink=t.draggedLink):(t.draggedLink=null,t.Ce=null))}}function h1(t){var e=t.diagram,n=e.skipsUndoManager;e.skipsUndoManager=!0,Zd(t,e.lastInput,null),e.skipsUndoManager=n,t.tg.length=0}function Jd(){var t=Hn;Al(t),Mo(t);var e=t.diagram;t.il.v()&&(e.position=t.il),e.lg()}function Bo(t,e){if(null===t.copiedParts){var n=t.diagram;if((!e||!n.isReadOnly&&!n.isModelReadOnly)&&null!==t.draggedParts){var s=n.undoManager;for(s.isEnabled&&s.isInTransaction?null!==s.currentTransaction&&0<s.currentTransaction.changes.count&&(n.undoManager.Bf(),n.Da("Drag")):Mo(t),n.skipsUndoManager=!e,n.partManager.addsToTemporaryLayer=!e,t.startPoint=n.firstInput.documentPoint,e=t.copiesEffectiveCollection?t.draggedParts.Cf():n.selection,e=n.Ej(e,n,!0),n=new xt,s=t.draggedParts.iterator;s.next();){var l=s.key;if(l.Tc()&&l.canCopy()){var u=e.I(l);null!==u&&(u.location=l.location,u.Za(),n.add(u,t.Fd(u.location)))}}for(e=e.iterator;e.next();)(s=e.value)instanceof z&&s.canCopy()&&n.add(s,t.Fd());t.copiedParts=n,Rv(t,n.Cf()),null!==t.draggedLink&&Ma(n=t.draggedLink,t.startPoint.x-((e=n.routeBounds).x+e.width/2),t.startPoint.y-(e.y+e.height/2)),t.doUpdateCursor(null,!0)}}}function Al(t){var e=t.diagram;if(null!==t.copiedParts){if(e.hs(t.copiedParts.Cf(),!1),t.copiedParts=null,null!==t.draggedParts)for(var n=t.draggedParts.iterator;n.next();)n.key instanceof z&&(n.value.point=new A(0,0));t.doUpdateCursor(null,!0)}e.skipsUndoManager=!1,e.partManager.addsToTemporaryLayer=!1,t.startPoint=e.firstInput.documentPoint}function tm(t){if(null!==t.draggedLink){if(t.dragsLink&&null!==t.Ce){var e=t.Ce;e.diagram.remove(e.temporaryFromNode),e.diagram.remove(e.temporaryToNode),t.Ce.originalLink=null}t.draggedLink=null,t.Ce=null}}function Vs(t,e,n){var s=t.diagram,l=t.startPoint,u=A.alloc();u.assign(s.lastInput.documentPoint),t.moveParts(e,u.je(l),n),A.free(u),!0===s.Ge("temporaryPixelRatio")&&null===s.Rh&&30<s.Ew&&(uf(s),s.Jo())}function Mo(t){if(null!==t.draggedParts){for(var e=t.diagram,n=t.draggedParts.iterator;n.next();){var s=n.key;s.Tc()&&(s.location=n.value.point)}for(n=t.draggedParts.iterator;n.next();)if((s=n.key)instanceof z&&s.suspendsRouting){var l=n.value.point;t.draggedParts.add(s,t.Fd()),Ma(s,-l.x,-l.y)}e.nd()}}function jv(t,e){var n=t.diagram;t.dragsLink&&(null!==t.draggedLink&&(t.draggedLink.fromNode=null,t.draggedLink.toNode=null),Vv(t,!1));var s=t.findDragOverObject(e),l=n.lastInput;l.targetObject=s,t.doUpdateCursor(s,!1);var u=n.skipsUndoManager,c=!1;try{if(n.skipsUndoManager=!0,c=Zd(t,l,s),!t.isActive&&null===Hn)return;var d=null!==s?s.part:null;if(null===d||n.handlesDragDropForTopLevelParts&&d.isTopLevel&&!(d instanceof wt)){var p=n.mouseDragOver;null!==p&&(p(l),c=!0)}if(!t.isActive&&null===Hn||(t.doDragOver(e,s),!t.isActive&&null===Hn))return}finally{n.skipsUndoManager=u,c&&n.nd()}t.hn=s,n.isReadOnly||!n.allowMove&&!n.allowCopy||!n.allowHorizontalScroll&&!n.allowVerticalScroll||n.Fr(l.viewPoint)}function Zd(t,e,n){var s=!1,l=t.tg.length,u=0<l?t.tg[0]:null;if(n===u)return!1;e.handled=!1;for(var c=0;c<l;c++){var d=t.tg[c],p=d.mouseDragLeave;if(null!==p&&(p(e,d,n),s=!0,e.handled))break}if(t.tg.length=0,!t.isActive&&null===Hn||null===n)return s;for(e.handled=!1,l=n;null!==l;)t.tg.push(l),l=c1(l);for(l=t.tg.length,n=0;n<l&&(null===(d=(c=t.tg[n]).mouseDragEnter)||(d(e,c,u),s=!0,!e.handled));n++);return s}function c1(t){var e=t.panel;return null!==e?e:t instanceof ut&&!(t instanceof wt)&&null!==(t=t.containingGroup)&&t.handlesDragDropForMembers?t:null}function kl(t,e,n){var s=t.Ce;if(null===s)return null;var l=t.diagram.hg(e,s.portGravity,function(g){return s.findValidLinkablePort(g,n)});t=A.alloc();var u=1/0,c=null;for(l=l.iterator;l.next();){var d=l.value;if(null!==d.part){var p=d.ia(ht,t);(p=e.rf(p))<u&&(c=d,u=p)}}return A.free(t),c}function Vv(t,e){var n=t.draggedLink;if(null!==n&&!(2>n.pointsCount)){var s=t.diagram;if(!s.isReadOnly){var l=t.Ce;if(null!==l){var u=null,c=null;null===n.fromNode&&null!==(u=kl(t,n.i(0),!1))&&(c=u.part);var d=null,p=null;null===n.toNode&&null!==(d=kl(t,n.i(n.pointsCount-1),!0))&&(p=d.part),l.isValidLink(c,u,p,d)?e?(n.defaultFromPoint=n.i(0),n.defaultToPoint=n.i(n.pointsCount-1),n.suspendsRouting=!1,n.fromNode=c,null!==u&&(n.fromPortId=u.portId),n.toNode=p,null!==d&&(n.toPortId=d.portId),n.fromPort!==s.tx&&s.P("LinkRelinked",n,s.tx),n.toPort!==s.ux&&s.P("LinkRelinked",n,s.ux)):ha(l,c,u,p,d):ha(l,null,null,null,null)}}}}function em(t,e){var n=t.diagram;t.dragsLink&&Vv(t,!0),h1(t);var s=t.findDragOverObject(e),l=n.lastInput;if(l.targetObject=s,null!==s){l.handled=!1;for(var u=s;null!==u;){var c=u.mouseDrop;if(null!==c&&(c(l,u),l.handled))break;we(t,l,u),u=c1(u)}}else null!==(u=n.mouseDrop)&&u(l);if(t.isActive||null!==Hn){for(l=(t.copiedParts||t.draggedParts).iterator;l.next();)(u=l.key)instanceof Z&&u.linksConnected.each(function(d){d.suspendsRouting=!1});if(t.doDropOnto(e,s),t.isActive||null!==Hn){for(t=U.alloc(),e=n.selection.iterator;e.next();)(s=e.value)instanceof Z&&f1(n,s,t);U.free(t)}}}function we(t,e,n){n=n.part,!(t=t.diagram).handlesDragDropForTopLevelParts||!n.isTopLevel||n instanceof wt||null!==(n=t.mouseDrop)&&n(e)}function f1(t,e,n){var s=!1;if(e.getAvoidableRect(n),t.viewportBounds.Ee(n)&&(s=!0),0!==(t=t.zu(n,function(l){return l.part},function(l){return l instanceof z},!0,function(l){return l instanceof z},s)).count)for(t=t.iterator;t.next();)!(n=t.value).Md(e)&&n.isAvoiding&&n.ab()}function d1(t,e,n,s){if(null===t.copiedParts){var l=t.diagram;if(!l.isReadOnly&&!l.isModelReadOnly){l.skipsUndoManager=!n,l.partManager.addsToTemporaryLayer=!n,t.startPoint=s.documentPoint,n=l.Ej(e,l,!0);var u=U.alloc();l=s=1/0;for(var c=-1/0,d=-1/0,p=e.iterator;p.next();){var g=p.value;if(g.isVisible()){var y=g.location;g=y.x,y=y.y,isNaN(g)||isNaN(y)||(g<s&&(s=g),y<l&&(l=y),g>c&&(c=g),y>d&&(d=y))}}for(s===1/0?u.h(0,0,0,0):u.h(s,l,c-s,d-l),s=u.x+u.width/2,l=u.y+u.height/2,U.free(u),u=t.br,c=new xt,d=A.alloc(),p=e.iterator;p.next();)(g=p.value)instanceof z&&g.canCopy()&&null!==(y=n.I(g))&&(y.points=g.points,Ma(y,u.x-s,u.y-l),y.suspendsRouting=!0,c.add(y,t.Fd()));for(e=e.iterator;e.next();)(g=e.value).Tc()&&g.canCopy()&&null!==(p=n.I(g))&&(d.h(u.x-(s-(g=g.location).x),u.y-(l-g.y)),p.location=d,p.Za(),c.add(p,t.Fd(d)));A.free(d),t.copiedParts=c,Rv(t,c.Cf()),null!==t.draggedLink&&Ma(n=t.draggedLink,t.startPoint.x-((e=n.routeBounds).x+e.width/2),t.startPoint.y-(e.y+e.height/2)),t.doUpdateCursor(null,!0)}}}Te.className="ToolManager",Te.WheelScroll=Zc,Te.WheelZoom=eo,Te.WheelNone=Lv,Te.GestureZoom=u1,Te.GestureCancel=Qc,Te.GestureNone=Fv,zt(Ie,Ot),Ie.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;if(t.isReadOnly&&!t.allowDragOut||!t.allowMove&&!t.allowCopy&&!t.allowDragOut||!t.allowSelect)return!1;var e=t.lastInput;return!(!e.left||t.currentTool!==this&&(!this.isBeyondDragSize()||e.isTouchEvent&&e.timestamp-t.firstInput.timestamp<this.wk))&&null!==this.findDraggablePart()},Ie.prototype.findDraggablePart=function(){var t=this.diagram;if(null===(t=t.wl(t.firstInput.documentPoint,!1)))return null;for(;null!==t&&!t.canSelect();)t=t.containingGroup;return null!==t&&(t.canMove()||t.canCopy())?t:null},Ie.prototype.standardMouseSelect=function(){var t=this.diagram;if(t.allowSelect){var e=t.wl(t.firstInput.documentPoint,!1);if(null!==e){for(;null!==e&&!e.canSelect();)e=e.containingGroup;this.currentPart=e,null===this.currentPart||this.currentPart.isSelected||(t.P("ChangingSelection",t.selection),e=t.lastInput,(Ro?e.meta:e.control)||e.shift||t.clearSelection(!0),this.currentPart.isSelected=!0,t.P("ChangedSelection",t.selection))}}},Ie.prototype.doActivate=function(){var t=this.diagram;this.hn=null,null===this.currentPart&&this.standardMouseSelect();var e=this.currentPart;null!==e&&(e.canMove()||e.canCopy())&&(t.lu(!0),Hn=null,this.isActive=!0,this.il.set(t.position),Rv(this,t.selection),this.tg.length=0,t.animationManager.wc(),this.draggedParts=this.computeEffectiveCollection(t.selection,this.dragOptions),this.ww=this.diagram.layout.isRealtime,this.diagram.layout.isRealtime=!1,t.os=!0,!0===t.Ge("temporaryPixelRatio")&&30<t.Ew&&uf(t),dm(t,this.draggedParts),this.Da("Drag"),this.startPoint=t.firstInput.documentPoint,t.isMouseCaptured=!0,t.allowDragOut&&(this.isDragOutStarted=!0,this.Gm=!1,Hn=this,_u=this.diagram,this.doSimulatedDragOut()))},Ie.prototype.computeEffectiveCollection=function(t,e){return this.diagram.commandHandler.computeEffectiveCollection(t,e)},Ie.prototype.Fd=function(t){return new Rl(void 0===t?Va:this.isGridSnapEnabled?new A(Math.round(1e3*t.x)/1e3,Math.round(1e3*t.y)/1e3):t.copy())},Ie.prototype.doDeactivate=function(){this.isActive=!1;var t=this.diagram;if(this.diagram.layout.isRealtime=this.ww,t.lu(!1),t.lg(),h1(this),pm(t,this.draggedParts),this.draggedParts=this.currentPart=this.hn=null,this.Gm=this.isDragOutStarted=!1,0<Un.count){for(var e=Un,n=e.length,s=0;s<n;s++){var l=e.K(s);tm(l),Al(l),h1(l),l.diagram.lg()}e.clear()}tm(this),this.il.h(NaN,NaN),null!==_u&&(_u.currentCursor=""),Hn=_u=null,Al(this),t.isMouseCaptured=!1,t.currentCursor="",t.os=!1,this.stopTransaction(),up(t,!0)},Ie.prototype.stopTransaction=function(){var t=this.diagram,e=Ot.prototype.stopTransaction.call(this);return e&&null!==t.undoManager.transactionToUndo&&t.undoManager.transactionToUndo.Vj(),e},Ie.prototype.doCancel=function(){Al(this),Mo(this);var t=this.diagram;this.il.v()&&(t.position=this.il),this.stopTool()},Ie.prototype.doKeyDown=function(){var t=this.diagram,e=t.lastInput;this.isActive&&("Esc"===e.key?this.doCancel():e.key!==t.previousInput.key&&this.doMouseMove())},Ie.prototype.doKeyUp=function(){this.isActive&&this.doMouseMove()},Ie.prototype.moveParts=function(t,e,n){void 0===n&&(n=!1);var s=this.diagram;null!==s&&Rh(s,t,e,this.dragOptions,n)},Ie.prototype.findDragOverObject=function(t){var e=this;return Lu(this.diagram,t,null,function(n){return!(n=null===n||!!(null===(n=n.part)||n instanceof At||n.layer.isTemporary||e.draggedParts&&e.draggedParts.contains(n)||e.copiedParts&&e.copiedParts.contains(n)))})},Ie.prototype.doUpdateCursor=function(t,e){var n=this.diagram;(e||this.hn!==t)&&(!this.diagram.currentTool.isActive||this.mayCopy()?n.currentCursor=this.copyCursor:this.mayMove()?n.currentCursor=this.moveCursor:this.mayDragOut()&&(n.currentCursor=this.nodropCursor))},Ie.prototype.doDragOver=function(){},Ie.prototype.doDropOnto=function(){},Ie.prototype.doMouseMove=function(){if(this.isActive){var t=this.diagram,e=t.lastInput;this.simulatedMouseMove(e.event,e.documentPoint,e.targetDiagram)||null===this.currentPart||null===this.draggedParts||(this.mayCopy()?(Bo(this,!1),dm(t,this.copiedParts),Vs(this,this.copiedParts,!1),pm(t,this.copiedParts)):this.mayMove()?(Al(this),Vs(this,this.draggedParts,!0)):this.mayDragOut()?(Bo(this,!1),Vs(this,this.copiedParts,!1)):Al(this),jv(this,t.lastInput.documentPoint))}},Ie.prototype.doMouseUp=function(){if(this.isActive){var t=this.diagram,e=t.lastInput;if(!this.simulatedMouseUp(e.event,e.documentPoint,e.targetDiagram)){e=!1;var n=this.mayCopy();if(n&&null!==this.copiedParts?(Al(this),Bo(this,!0),dm(t,this.copiedParts),Vs(this,this.copiedParts,!1),pm(t,this.copiedParts),null!==this.copiedParts&&(t.P("ChangingSelection",t.selection),t.clearSelection(!0),this.copiedParts.iteratorKeys.each(function(l){l.isSelected=!0}))):(e=!0,Al(this),this.mayMove()&&(Vs(this,this.draggedParts,!0),jv(this,t.lastInput.documentPoint))),this.Gm=!0,em(this,t.lastInput.documentPoint),this.isActive){var s=n?this.copiedParts.Cf():this.draggedParts.Cf();this.copiedParts=null,e&&function FE(t){if(null!==t.draggedParts)for(var e=t.draggedParts.iterator;e.next();){var n=e.key;n instanceof Z&&(null===(n=n.containingGroup)||null===n.placeholder||t.draggedParts.contains(n)||n.placeholder.w())}}(this),t.Va(),pm(t,this.draggedParts),this.transactionResult=n?"Copy":"Move",t.P(n?"SelectionCopied":"SelectionMoved",s)}this.stopTool(),n&&t.P("ChangedSelection",t.selection)}}},Ie.prototype.simulatedMouseMove=function(t,e,n){if(null===Hn)return!1;var s=Hn.diagram;n instanceof V||(n=null);var l=_u;return n!==l&&(null!==l&&l!==s&&(l.lg(),Hn.isDragOutStarted=!1,null!==(l=l.toolManager.findTool("Dragging"))&&l.doSimulatedDragLeave()),_u=n,null!==n&&n!==s&&(Jd(),null!==(l=n.toolManager.findTool("Dragging"))&&(Un.contains(l)||Un.add(l),l.doSimulatedDragEnter())),this.doUpdateCursor(null,!0)),!(null===n||n===s||!n.allowDrop||n.isReadOnly||!n.allowInsert||(null!==(s=n.toolManager.findTool("Dragging"))&&(null!==t&&(void 0!==t.targetTouches&&(0<t.targetTouches.length?t=t.targetTouches[0]:0<t.changedTouches.length&&(t=t.changedTouches[0])),e=n.getMouse(t)),n.lastInput.documentPoint=e,n.lastInput.viewPoint=n.Ro(e),n.lastInput.down=!1,n.lastInput.up=!1,s.doSimulatedDragOver()),0))},Ie.prototype.simulatedMouseUp=function(t,e,n){if(null===Hn)return!1;var s=_u,l=Hn.diagram;if(null===n)return Hn.doCancel(),!0;if(n!==s){var u=s.toolManager.findTool("Dragging");if(null!==s&&s!==l&&null!==u)return s.lg(),Hn.isDragOutStarted=!1,u.doSimulatedDragLeave(),!1;_u=n,null!==(s=n.toolManager.findTool("Dragging"))&&(Jd(),Un.contains(s)||Un.add(s),s.doSimulatedDragEnter())}return n!==this.diagram&&(null!==t?(void 0!==t.targetTouches&&(0<t.targetTouches.length?t=t.targetTouches[0]:0<t.changedTouches.length&&(t=t.changedTouches[0])),e=n.getMouse(t)):null===e&&(e=new A),n.lastInput.documentPoint=e,n.lastInput.viewPoint=n.Ro(e),n.lastInput.down=!1,n.lastInput.up=!0,null!==(t=n.toolManager.findTool("Dragging"))&&t.doSimulatedDrop(),null!==(t=Hn)&&(n=t.mayCopy(),t.transactionResult=n?"Copy":"Move",t.stopTool()),!0)},Ie.prototype.mayCopy=function(){if(!this.isCopyEnabled)return!1;var t=this.diagram;if(t.isReadOnly||t.isModelReadOnly||!t.allowInsert||!t.allowCopy||(Ro?!t.lastInput.alt:!t.lastInput.control))return!1;for(t=t.selection.iterator;t.next();)if(t.value.canCopy())return!0;return!(null===this.draggedLink||!this.dragsLink||!this.draggedLink.canCopy())},Ie.prototype.mayDragOut=function(){if(!this.isCopyEnabled)return!1;var t=this.diagram;if(!t.allowDragOut||!t.allowCopy||t.allowMove)return!1;for(t=t.selection.iterator;t.next();)if(t.value.canCopy())return!0;return!(null===this.draggedLink||!this.dragsLink||!this.draggedLink.canCopy())},Ie.prototype.mayMove=function(){var t=this.diagram;if(t.isReadOnly||!t.allowMove)return!1;for(t=t.selection.iterator;t.next();)if(t.value.canMove())return!0;return!(null===this.draggedLink||!this.dragsLink||!this.draggedLink.canMove())},Ie.prototype.computeBorder=function(t,e,n){return this.Gm||null===this.draggedParts||this.draggedParts.contains(t)?null:n.assign(e)},Ie.prototype.hz=function(){return Hn},Ie.prototype.mayDragIn=function(){var t=this.diagram;return!(!t.allowDrop||t.isReadOnly||t.isModelReadOnly||!t.allowInsert)&&!(null===Hn||Hn.diagram.model.dataFormat!==t.model.dataFormat)},Ie.prototype.doSimulatedDragEnter=function(){if(this.mayDragIn()){var t=this.diagram;t.animationManager.wc(),Ll(t),t.animationManager.wc(),null!==(t=Hn)&&(t.diagram.os=!1),this.doUpdateCursor(null,!0)}},Ie.prototype.doSimulatedDragLeave=function(){null!==Hn&&Hn.doSimulatedDragOut(),this.doCancel()},Ie.prototype.doSimulatedDragOver=function(){var t=this.diagram;t.animationManager.lm=!0;var e=Hn;if(null!==e&&null!==e.draggedParts){if(!this.mayDragIn())return;d1(this,e.draggedParts.Cf(),!1,t.firstInput),Vs(this,this.copiedParts,!1),jv(this,t.lastInput.documentPoint)}t.animationManager.lm=!1},Ie.prototype.doSimulatedDrop=function(){var t=this.diagram,e=Hn;if(null!==e){var n=e.diagram;if(e.Gm=!0,Al(this),!this.mayDragIn())return;t.animationManager.lm=!0,t.P("ChangingSelection",t.selection),this.Da("Drop"),d1(this,e.draggedParts.Cf(),!0,t.lastInput),Vs(this,this.copiedParts,!1),null!==this.copiedParts&&(t.clearSelection(!0),this.copiedParts.iteratorKeys.each(function(s){s.isSelected=!0})),em(this,t.lastInput.documentPoint),t.Va(),e=t.selection,null!==this.copiedParts?this.transactionResult="ExternalCopy":e=new Q,this.copiedParts=null,t.doFocus(),t.P("ExternalObjectsDropped",e,n),this.stopTransaction(),t.P("ChangedSelection",t.selection)}t.animationManager.lm=!1},Ie.prototype.doSimulatedDragOut=function(){var t=this.diagram;t.os=!1,t.currentCursor=this.mayCopy()||this.mayMove()?"":this.nodropCursor,this.hn=null},Ie.prototype.computeMove=function(t,e,n,s){return null!==(n=this.diagram)?n.computeMove(t,e,this.dragOptions,s):new A},St.Object.defineProperties(Ie.prototype,{isCopyEnabled:{get:function(){return this.nb},set:function(t){this.nb=t}},copiesEffectiveCollection:{get:function(){return this.u},set:function(t){this.u=t}},dragOptions:{get:function(){return this.ga},set:function(t){this.ga=t}},isGridSnapEnabled:{get:function(){return this.dragOptions.isGridSnapEnabled},set:function(t){this.dragOptions.isGridSnapEnabled=t}},isComplexRoutingRealtime:{get:function(){return this.cb},set:function(t){this.cb=t}},isGridSnapRealtime:{get:function(){return this.dragOptions.isGridSnapRealtime},set:function(t){this.dragOptions.isGridSnapRealtime=t}},gridSnapCellSize:{get:function(){return this.dragOptions.gridSnapCellSize},set:function(t){this.dragOptions.gridSnapCellSize.C(t)||(t=t.J(),this.dragOptions.gridSnapCellSize=t)}},gridSnapCellSpot:{get:function(){return this.dragOptions.gridSnapCellSpot},set:function(t){this.dragOptions.gridSnapCellSpot.C(t)||(t=t.J(),this.dragOptions.gridSnapCellSpot=t)}},gridSnapOrigin:{get:function(){return this.dragOptions.gridSnapOrigin},set:function(t){this.dragOptions.gridSnapOrigin.C(t)||(t=t.J(),this.dragOptions.gridSnapOrigin=t)}},dragsLink:{get:function(){return this.dragOptions.dragsLink},set:function(t){this.dragOptions.dragsLink=t}},dragsTree:{get:function(){return this.dragOptions.dragsTree},set:function(t){this.dragOptions.dragsTree=t}},copyCursor:{get:function(){return this.F},set:function(t){this.F=t}},moveCursor:{get:function(){return this.Hc},set:function(t){this.Hc=t}},nodropCursor:{get:function(){return this.Ic},set:function(t){this.Ic=t}},currentPart:{get:function(){return this.W},set:function(t){this.W=t}},copiedParts:{get:function(){return this.m},set:function(t){this.m=t}},draggedParts:{get:function(){return this.Ga},set:function(t){this.Ga=t}},draggingParts:{get:function(){return null!==this.copiedParts?this.copiedParts.Cf():null!==this.draggedParts?this.draggedParts.Cf():this.le}},draggedLink:{get:function(){return this.diagram.draggedLink},set:function(t){this.diagram.draggedLink=t}},isDragOutStarted:{get:function(){return this.Db},set:function(t){this.Db=t}},startPoint:{get:function(){return this.br},set:function(t){this.br.C(t)||this.br.assign(t)}},delay:{get:function(){return this.wk},set:function(t){this.wk=t}}}),Ie.prototype.getDraggingSource=Ie.prototype.hz;var Hn=null,_u=null;function Qn(){Ot.call(this),this.le=100,this.Ga=!1,this.u="pointer";var t=new z,e=new Ct;e.isPanelMain=!0,e.stroke="blue",t.add(e),(e=new Ct).toArrow="Standard",e.fill="blue",e.stroke="blue",t.add(e),t.layerName="Tool",this.vi=t,t=new Z,(e=new Ct).portId="",e.figure="Rectangle",e.fill=null,e.stroke="magenta",e.strokeWidth=2,e.desiredSize=wo,t.add(e),t.selectable=!1,t.layerName="Tool",this.ui=t,this.j=e,t=new Z,(e=new Ct).portId="",e.figure="Rectangle",e.fill=null,e.stroke="magenta",e.strokeWidth=2,e.desiredSize=wo,t.add(e),t.selectable=!1,t.layerName="Tool",this.wi=t,this.m=e,this.Ic=this.Hc=this.nb=this.cb=this.Db=null,this.ga=!0,this.Wo=new xt,this.Ff=this.bj=this.Gf=null}function Bv(t,e,n,s){if(e===n)return!0;var l=e.fromNode;return!(null===l||!l.isLinkLabel||(s.add(l),!Bv(t,l.labeledLink,n,s)))||!(null===(e=e.toNode)||!e.isLinkLabel||(s.add(e),!Bv(t,e.labeledLink,n,s)))}function Qd(t,e,n,s,l){if(e===n)return!0;if(null===e||null===n)return!1;for(var u=e.linksConnected;u.next();){var c=u.value;if(c!==s&&(!l||c.isTreeLink)&&c.toNode===e&&(c=c.fromNode)!==e&&Qd(t,c,n,s,l))return!0}return!1}function yt(t,e,n,s,l){if(n===s)return!0;if(null===n||null===s||e.contains(n))return!1;e.add(n);for(var u=n.linksConnected;u.next();){var c=u.value;if(c!==l&&c.toNode===n&&(c=c.fromNode)!==n&&yt(t,e,c,s,l))return!0}return!1}function Ye(t,e,n,s,l){if(n===s)return!0;if(null===n||null===s||e.contains(n))return!1;e.add(n);for(var u=n.linksConnected;u.next();){var c=u.value;if(c!==l){var d=c.fromNode;if(c=c.toNode,(d=d===n?c:d)!==n&&Ye(t,e,d,s,l))return!0}}return!1}function oe(){Qn.call(this),this.name="Linking",this.W={},this.F=null,this.L=qe,this.Qd=null}Ie.className="DraggingTool",Un=new tt,Gt("draggingTool",function(){return this.findTool("Dragging")},function(t){this.gb("Dragging",t,this.mouseMoveTools)}),Te.prototype.doCancel=function(){null!==Hn&&Hn.doCancel(),Ot.prototype.doCancel.call(this)},zt(Qn,Ot),Qn.prototype.doStop=function(){this.diagram.lg(),this.originalToPort=this.originalToNode=this.originalFromPort=this.originalFromNode=this.originalLink=null,this.validPortsCache.clear(),this.targetPort=null},Qn.prototype.copyPortProperties=function(t,e,n,s,l){if(null!==t&&null!==e&&null!==n&&null!==s){var u=e.uf(),c=gt.alloc();c.width=e.naturalBounds.width*u,c.height=e.naturalBounds.height*u,s.desiredSize=c,gt.free(c),l?(s.toSpot=e.toSpot,s.toEndSegmentLength=e.toEndSegmentLength):(s.fromSpot=e.fromSpot,s.fromEndSegmentLength=e.fromEndSegmentLength),n.locationSpot=ht,u=A.alloc(),n.location=e.ia(ht,u),A.free(u),s.angle=e.fi(),null!==this.portTargeted&&this.portTargeted(t,e,n,s,l)}},Qn.prototype.setNoTargetPortProperties=function(t,e,n){null!==e&&(e.desiredSize=wo,e.fromSpot=Oe,e.toSpot=Oe),null!==t&&(t.location=this.diagram.lastInput.documentPoint),null!==this.portTargeted&&this.portTargeted(null,null,t,e,n)},Qn.prototype.doMouseDown=function(){this.isActive&&this.doMouseMove()},Qn.prototype.doMouseMove=function(){if(this.isActive){var t=this.diagram;if(this.targetPort=this.findTargetPort(this.isForwards),null!==this.targetPort&&this.targetPort.part instanceof Z){var e=this.targetPort.part;this.isForwards?this.copyPortProperties(e,this.targetPort,this.temporaryToNode,this.temporaryToPort,!0):this.copyPortProperties(e,this.targetPort,this.temporaryFromNode,this.temporaryFromPort,!1)}else this.isForwards?this.setNoTargetPortProperties(this.temporaryToNode,this.temporaryToPort,!0):this.setNoTargetPortProperties(this.temporaryFromNode,this.temporaryFromPort,!1);(t.allowHorizontalScroll||t.allowVerticalScroll)&&t.Fr(t.lastInput.viewPoint)}},Qn.prototype.findValidLinkablePort=function(t,e){if(null===t)return null;var n=t.part;if(!(n instanceof Z))return null;for(;null!==t;){var s=e?t.toLinkable:t.fromLinkable;if(!0===s&&(null!==t.portId||t instanceof Z)&&(e?this.isValidTo(n,t):this.isValidFrom(n,t)))return t;if(!1===s)break;t=t.panel}return null},Qn.prototype.findTargetPort=function(t){var e=this.diagram,n=e.lastInput.documentPoint,s=this.portGravity;0>=s&&(s=.1);var l=this,u=e.hg(n,s,function(w){return l.findValidLinkablePort(w,t)},null,!0);for(s=1/0,e=null,u=u.iterator;u.next();){var c=u.value,d=c.part;if(d instanceof Z){var p=c.ia(ht,A.alloc()),g=n.x-p.x,y=n.y-p.y;A.free(p),(p=g*g+y*y)<s&&(null!==(g=this.validPortsCache.I(c))?g&&(e=c,s=p):t&&this.isValidLink(this.originalFromNode,this.originalFromPort,d,c)||!t&&this.isValidLink(d,c,this.originalToNode,this.originalToPort)?(this.validPortsCache.add(c,!0),e=c,s=p):this.validPortsCache.add(c,!1))}}return null!==e&&(n=e.part)instanceof Z&&(null===n.layer||n.layer.allowLink)?e:null},Qn.prototype.isValidFrom=function(t,e){if(null===t||null===e)return this.isUnconnectedLinkValid;if(this.diagram.currentTool===this&&(null!==t.layer&&!t.layer.allowLink||!0!==e.fromLinkable))return!1;var n=e.fromMaxLinks;if(1/0>n){if(null!==this.originalLink&&t===this.originalFromNode&&e===this.originalFromPort)return!0;if(null===(e=e.portId)&&(e=""),t.ro(e).count>=n)return!1}return!0},Qn.prototype.isValidTo=function(t,e){if(null===t||null===e)return this.isUnconnectedLinkValid;if(this.diagram.currentTool===this&&(null!==t.layer&&!t.layer.allowLink||!0!==e.toLinkable))return!1;var n=e.toMaxLinks;if(1/0>n){if(null!==this.originalLink&&t===this.originalToNode&&e===this.originalToPort)return!0;if(null===(e=e.portId)&&(e=""),t.Kd(e).count>=n)return!1}return!0},Qn.prototype.isInSameNode=function(t,e){return null!==t&&null!==e&&(t===e||(e=e.part,null!==(t=t.part)&&t===e))},Qn.prototype.isLinked=function(t,e){if(null===t||null===e)return!1;var n=t.part;if(!(n instanceof Z))return!1;null===(t=t.portId)&&(t="");var s=e.part;if(!(s instanceof Z))return!1;for(null===(e=e.portId)&&(e=""),e=s.Kd(e);e.next();)if((s=e.value).fromNode===n&&s.fromPortId===t)return!0;return!1},Qn.prototype.isValidLink=function(t,e,n,s){if(!this.isValidFrom(t,e)||!this.isValidTo(n,s)||!(null===e||null===s||(e.fromLinkableSelfNode&&s.toLinkableSelfNode||!this.isInSameNode(e,s))&&(e.fromLinkableDuplicates&&s.toLinkableDuplicates||!this.isLinked(e,s)))||null!==this.originalLink&&(null!==t&&this.isLabelDependentOnLink(t,this.originalLink)||null!==n&&this.isLabelDependentOnLink(n,this.originalLink))||null!==t&&null!==n&&(null===t.data&&null!==n.data||null!==t.data&&null===n.data)||!this.isValidCycle(t,n,this.originalLink))return!1;if(null!==t){var l=t.linkValidation;if(null!==l&&!l(t,e,n,s,this.originalLink))return!1}return!(null!==n&&(l=n.linkValidation,null!==l&&!l(t,e,n,s,this.originalLink)))&&(null===(l=this.linkValidation)||l(t,e,n,s,this.originalLink))},Qn.prototype.isLabelDependentOnLink=function(t,e){if(null===t)return!1;var n=t.labeledLink;if(null===n)return!1;if(n===e)return!0;var s=new Q;return s.add(t),Bv(this,n,e,s)},Qn.prototype.isValidCycle=function(t,e,n){if(void 0===n&&(n=null),null===t||null===e)return this.isUnconnectedLinkValid;var s=this.diagram.validCycle;if(s!==mp){if(s===A1){if(null!==(s=n||this.temporaryLink)&&!s.isTreeLink)return!0;for(s=e.linksConnected;s.next();){var l=s.value;if(l!==n&&l.isTreeLink&&l.toNode===e)return!1}return!Qd(this,t,e,n,!0)}if(s===f0){if(null!==(s=n||this.temporaryLink)&&!s.isTreeLink)return!0;for(s=t.linksConnected;s.next();)if((l=s.value)!==n&&l.isTreeLink&&l.fromNode===t)return!1;return!Qd(this,t,e,n,!0)}if(s===gf)return t===e?t=!0:((s=new Q).add(e),t=yt(this,s,t,e,n)),!t;if(s===c0)return!Qd(this,t,e,n,!1);if(s===mf)return t===e?t=!0:((s=new Q).add(e),t=Ye(this,s,t,e,n)),!t}return!0},St.Object.defineProperties(Qn.prototype,{portGravity:{get:function(){return this.le},set:function(t){0<=t&&(this.le=t)}},isUnconnectedLinkValid:{get:function(){return this.Ga},set:function(t){this.Ga=t}},linkingCursor:{get:function(){return this.u},set:function(t){this.u=t}},temporaryLink:{get:function(){return this.vi},set:function(t){this.vi=t}},temporaryFromNode:{get:function(){return this.ui},set:function(t){(this.ui=t)&&(this.j=t.port)}},temporaryFromPort:{get:function(){return this.j},set:function(t){if(null!==this.j){var e=this.j.panel;if(null!==e){var n=e.R.indexOf(this.j);e.mb(n),e.Cb(n,t)}}this.j=t}},temporaryToNode:{get:function(){return this.wi},set:function(t){(this.wi=t)&&(this.m=t.port)}},temporaryToPort:{get:function(){return this.m},set:function(t){if(null!==this.m){var e=this.m.panel;if(null!==e){var n=e.R.indexOf(this.m);e.mb(n),e.Cb(n,t)}}this.m=t}},originalLink:{get:function(){return this.Db},set:function(t){this.Db=t}},originalFromNode:{get:function(){return this.cb},set:function(t){this.cb=t}},originalFromPort:{get:function(){return this.nb},set:function(t){this.nb=t}},originalToNode:{get:function(){return this.Hc},set:function(t){this.Hc=t}},originalToPort:{get:function(){return this.Ic},set:function(t){this.Ic=t}},isForwards:{get:function(){return this.ga},set:function(t){this.ga=t}},validPortsCache:{get:function(){return this.Wo}},targetPort:{get:function(){return this.Gf},set:function(t){this.Gf=t}},linkValidation:{get:function(){return this.bj},set:function(t){this.bj=t}},portTargeted:{get:function(){return this.Ff},set:function(t){this.Ff=t}}}),Qn.className="LinkingBaseTool",zt(oe,Qn),oe.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return!(t.isReadOnly||t.isModelReadOnly||!t.allowLink||!t.model.Vr()||!t.lastInput.left||t.currentTool!==this&&!this.isBeyondDragSize())&&null!==this.findLinkablePort()},oe.prototype.findLinkablePort=function(){var t=this.diagram,e=this.startObject;if(null===e&&(e=t.ec(t.firstInput.documentPoint,null,null)),null===e||!((t=e.part)instanceof Z))return null;var n=this.direction;if(n===qe||n===Ki){var s=this.findValidLinkablePort(e,!1);if(null!==s||this.startObject===t&&this.findValidLinkablePort(s=t.port,!1))return this.isForwards=!0,s}return n!==qe&&n!==Uv||!(null!==(e=this.findValidLinkablePort(e,!0))||this.startObject===t&&this.findValidLinkablePort(e=t.port,!0))?null:(this.isForwards=!1,e)},oe.prototype.doActivate=function(){var t=this.diagram,e=this.findLinkablePort();null===e?this.stopTool():(this.Da(this.name),t.isMouseCaptured=!0,t.currentCursor=this.linkingCursor,this.isForwards?(null===this.temporaryToNode||this.temporaryToNode.location.v()||(this.temporaryToNode.location=t.lastInput.documentPoint),this.originalFromPort=e,(e=this.originalFromPort.part)instanceof Z&&(this.originalFromNode=e),this.copyPortProperties(this.originalFromNode,this.originalFromPort,this.temporaryFromNode,this.temporaryFromPort,!1)):(null===this.temporaryFromNode||this.temporaryFromNode.location.v()||(this.temporaryFromNode.location=t.lastInput.documentPoint),this.originalToPort=e,(e=this.originalToPort.part)instanceof Z&&(this.originalToNode=e),this.copyPortProperties(this.originalToNode,this.originalToPort,this.temporaryToNode,this.temporaryToPort,!0)),t.add(this.temporaryFromNode),t.add(this.temporaryToNode),null!==this.temporaryLink&&(null!==this.temporaryFromNode&&(this.temporaryLink.fromNode=this.temporaryFromNode),null!==this.temporaryToNode&&(this.temporaryLink.toNode=this.temporaryToNode),this.temporaryLink.isTreeLink=this.isNewTreeLink(),this.temporaryLink.ab(),t.add(this.temporaryLink)),this.isActive=!0)},oe.prototype.doDeactivate=function(){this.isActive=!1;var t=this.diagram;t.remove(this.temporaryLink),t.remove(this.temporaryFromNode),t.remove(this.temporaryToNode),t.isMouseCaptured=!1,t.currentCursor="",this.stopTransaction()},oe.prototype.doStop=function(){Qn.prototype.doStop.call(this),this.startObject=null},oe.prototype.doMouseUp=function(){if(this.isActive){var t=this.diagram,e=this.transactionResult=null,n=null,s=null,l=null,u=null;try{var c=this.targetPort=this.findTargetPort(this.isForwards);if(null!==c){var d=c.part;d instanceof Z&&(this.isForwards?(null!==this.originalFromNode&&(e=this.originalFromNode,n=this.originalFromPort),s=d,l=c):(e=d,n=c,null!==this.originalToNode&&(s=this.originalToNode,l=this.originalToPort)))}else this.isForwards?null!==this.originalFromNode&&this.isUnconnectedLinkValid&&(e=this.originalFromNode,n=this.originalFromPort):null!==this.originalToNode&&this.isUnconnectedLinkValid&&(s=this.originalToNode,l=this.originalToPort);null!==e||null!==s?null!==(u=this.insertLink(e,n,s,l))?(null===c&&(this.isForwards?u.defaultToPoint=t.lastInput.documentPoint:u.defaultFromPoint=t.lastInput.documentPoint),t.allowSelect&&(t.P("ChangingSelection",t.selection),t.clearSelection(!0),u.isSelected=!0),this.transactionResult=this.name,t.P("LinkDrawn",u)):this.doNoLink(e,n,s,l):this.isForwards?this.doNoLink(this.originalFromNode,this.originalFromPort,null,null):this.doNoLink(null,null,this.originalToNode,this.originalToPort)}finally{this.stopTool(),u&&t.allowSelect&&t.P("ChangedSelection",t.selection)}}},oe.prototype.isNewTreeLink=function(){var t=this.archetypeLinkData;if(null===t)return!0;if(t instanceof z)return t.isTreeLink;var e=this.diagram;return null===e||(t=e.partManager.getLinkCategoryForData(t),null===(e=e.partManager.findLinkTemplateForCategory(t))||e.isTreeLink)},oe.prototype.insertLink=function(t,e,n,s){return this.diagram.partManager.insertLink(t,e,n,s)},oe.prototype.doNoLink=function(){},St.Object.defineProperties(oe.prototype,{archetypeLinkData:{get:function(){return this.W},set:function(t){this.W=t}},archetypeLabelNodeData:{get:function(){return this.F},set:function(t){this.F=t}},direction:{get:function(){return this.L},set:function(t){this.L=t}},startObject:{get:function(){return this.Qd},set:function(t){this.Qd=t}}});var qe=new K(oe,"Either",0),Ki=new K(oe,"ForwardsOnly",0),Uv=new K(oe,"BackwardsOnly",0);function Yi(){Qn.call(this),this.name="Relinking";var t=new Ct;t.figure="Diamond",t.desiredSize=Wc,t.fill="lightblue",t.stroke="dodgerblue",t.cursor=this.linkingCursor,t.segmentIndex=0,this.W=t,(t=new Ct).figure="Diamond",t.desiredSize=Wc,t.fill="lightblue",t.stroke="dodgerblue",t.cursor=this.linkingCursor,t.segmentIndex=-1,this.Qd=t,this.F=null,this.iw=new U}function ha(t,e,n,s,l){null!==e?(t.copyPortProperties(e,n,t.temporaryFromNode,t.temporaryFromPort,!1),t.diagram.add(t.temporaryFromNode)):t.diagram.remove(t.temporaryFromNode),null!==s?(t.copyPortProperties(s,l,t.temporaryToNode,t.temporaryToPort,!0),t.diagram.add(t.temporaryToNode)):t.diagram.remove(t.temporaryToNode)}function Xe(){Ot.call(this),this.name="LinkReshaping";var t=new Ct;t.figure="Rectangle",t.desiredSize=Yg,t.fill="lightblue",t.stroke="dodgerblue",this.m=t,(t=new Ct).figure="Diamond",t.desiredSize=Wc,t.fill="lightblue",t.stroke="dodgerblue",t.cursor="move",this.u=t,this.F=3,this.vs=this.j=null,this.jw=new A,this.xq=new tt}function Tu(t,e,n,s,l,u){return u?Math.abs(e.y-n.y)<t.resegmentingDistance&&Math.abs(n.y-s.y)<t.resegmentingDistance&&Math.abs(s.y-l.y)<t.resegmentingDistance:Math.abs(e.x-n.x)<t.resegmentingDistance&&Math.abs(n.x-s.x)<t.resegmentingDistance&&Math.abs(s.x-l.x)<t.resegmentingDistance}oe.className="LinkingTool",oe.Either=qe,oe.ForwardsOnly=Ki,oe.BackwardsOnly=Uv,zt(Yi,Qn),Yi.prototype.updateAdornments=function(t){if(null!==t&&t instanceof z){var e="RelinkFrom",n=null;if(t.isSelected&&!this.diagram.isReadOnly){var s=t.selectionObject;null!==s&&t.canRelinkFrom()&&t.actualBounds.v()&&t.isVisible()&&s.actualBounds.v()&&s.zf()&&null===(n=t.Hj(e))&&(n=this.makeAdornment(s,!1),t.Tg(e,n))}null===n&&t.Af(e),e="RelinkTo",n=null,t.isSelected&&!this.diagram.isReadOnly&&null!==(s=t.selectionObject)&&t.canRelinkTo()&&t.actualBounds.v()&&t.isVisible()&&s.actualBounds.v()&&s.zf()&&(null===(n=t.Hj(e))?(n=this.makeAdornment(s,!0),t.Tg(e,n)):n.w()),null===n&&t.Af(e)}},Yi.prototype.makeAdornment=function(t,e){var n=new At;return n.type=$.Link,null!==(e=e?this.toHandleArchetype:this.fromHandleArchetype)&&n.add(e.copy()),n.adornedObject=t,n},Yi.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;if(t.isReadOnly||t.isModelReadOnly||!t.allowRelink||!t.model.Vr()||!t.lastInput.left)return!1;var e=this.findToolHandleAt(t.firstInput.documentPoint,"RelinkFrom");return null===e&&(e=this.findToolHandleAt(t.firstInput.documentPoint,"RelinkTo")),null!==e},Yi.prototype.doActivate=function(){var t=this.diagram;if(null===this.originalLink){var e=this.handle;if(null===e&&null===(e=this.findToolHandleAt(t.firstInput.documentPoint,"RelinkFrom"))&&(e=this.findToolHandleAt(t.firstInput.documentPoint,"RelinkTo")),null===e)return;var n=e.part;if(!(n instanceof At&&n.adornedPart instanceof z))return;this.handle=e,this.isForwards=null===n||"RelinkTo"===n.category,this.originalLink=n.adornedPart}this.Da(this.name),t.isMouseCaptured=!0,t.currentCursor=this.linkingCursor,this.originalFromPort=this.originalLink.fromPort,this.originalFromNode=this.originalLink.fromNode,this.originalToPort=this.originalLink.toPort,this.originalToNode=this.originalLink.toNode,this.iw.set(this.originalLink.actualBounds),null!==this.originalLink&&0<this.originalLink.pointsCount&&(null===this.originalLink.fromNode&&(null!==this.temporaryFromPort&&(this.temporaryFromPort.desiredSize=_h),null!==this.temporaryFromNode&&(this.temporaryFromNode.location=this.originalLink.i(0))),null===this.originalLink.toNode&&(null!==this.temporaryToPort&&(this.temporaryToPort.desiredSize=_h),null!==this.temporaryToNode&&(this.temporaryToNode.location=this.originalLink.i(this.originalLink.pointsCount-1)))),this.copyPortProperties(this.originalFromNode,this.originalFromPort,this.temporaryFromNode,this.temporaryFromPort,!1),this.copyPortProperties(this.originalToNode,this.originalToPort,this.temporaryToNode,this.temporaryToPort,!0),t.add(this.temporaryFromNode),t.add(this.temporaryToNode),null!==this.temporaryLink&&(null!==this.temporaryFromNode&&(this.temporaryLink.fromNode=this.temporaryFromNode),null!==this.temporaryToNode&&(this.temporaryLink.toNode=this.temporaryToNode),this.copyLinkProperties(this.originalLink,this.temporaryLink),this.temporaryLink.ab(),t.add(this.temporaryLink)),this.isActive=!0},Yi.prototype.copyLinkProperties=function(t,e){if(null!==t&&null!==e){e.adjusting=t.adjusting,e.corner=t.corner;var n=t.curve;(n===Zh||n===el)&&(n=di),e.curve=n,e.curviness=t.curviness,e.isTreeLink=t.isTreeLink,e.points=t.points,e.routing=t.routing,e.smoothness=t.smoothness,e.fromSpot=t.fromSpot,e.fromEndSegmentLength=t.fromEndSegmentLength,e.fromShortLength=t.fromShortLength,e.toSpot=t.toSpot,e.toEndSegmentLength=t.toEndSegmentLength,e.toShortLength=t.toShortLength}},Yi.prototype.doDeactivate=function(){this.isActive=!1;var t=this.diagram;t.remove(this.temporaryLink),t.remove(this.temporaryFromNode),t.remove(this.temporaryToNode),t.isMouseCaptured=!1,t.currentCursor="",this.stopTransaction()},Yi.prototype.doStop=function(){Qn.prototype.doStop.call(this),this.handle=null},Yi.prototype.doMouseUp=function(){if(this.isActive){var t=this.diagram;this.transactionResult=null;var e=this.originalFromNode,n=this.originalFromPort,s=this.originalToNode,l=this.originalToPort,u=this.originalLink;try{if(this.targetPort=this.findTargetPort(this.isForwards),null!==this.targetPort){var c=this.targetPort.part;c instanceof Z&&(this.isForwards?(s=c,l=this.targetPort):(e=c,n=this.targetPort))}else this.isUnconnectedLinkValid?this.isForwards?l=s=null:n=e=null:u=null;null!==u?(this.reconnectLink(u,this.isForwards?s:e,this.isForwards?l:n,this.isForwards),null===this.targetPort&&(this.isForwards?u.defaultToPoint=t.lastInput.documentPoint:u.defaultFromPoint=t.lastInput.documentPoint,u.ab()),this.transactionResult=this.name,t.P("LinkRelinked",u,this.isForwards?this.originalToPort:this.originalFromPort)):this.doNoRelink(this.originalLink,this.isForwards),this.originalLink.Ao(this.iw)}finally{this.stopTool()}}},Yi.prototype.reconnectLink=function(t,e,n,s){return n=null!==n&&null!==n.portId?n.portId:"",s?(t.toNode=e,t.toPortId=n):(t.fromNode=e,t.fromPortId=n),!0},Yi.prototype.doNoRelink=function(){},St.Object.defineProperties(Yi.prototype,{fromHandleArchetype:{get:function(){return this.W},set:function(t){this.W=t}},toHandleArchetype:{get:function(){return this.Qd},set:function(t){this.Qd=t}},handle:{get:function(){return this.F},set:function(t){if(null!==t&&!(t.part instanceof At))throw Error("new handle is not in an Adornment: "+t);this.F=t}}}),Yi.className="RelinkingTool",Gt("linkingTool",function(){return this.findTool("Linking")},function(t){this.gb("Linking",t,this.mouseMoveTools)}),Gt("relinkingTool",function(){return this.findTool("Relinking")},function(t){this.gb("Relinking",t,this.mouseDownTools)}),zt(Xe,Ot),Xe.prototype.Du=function(t){return t&&0!==t.reshapingBehavior.value?t.reshapingBehavior:p1},Xe.prototype.Wl=function(t,e){t.reshapingBehavior=e},Xe.prototype.updateAdornments=function(t){if(null!==t&&t instanceof z){var e=null;if(t.isSelected&&!this.diagram.isReadOnly){var n=t.path;null!==n&&t.canReshape()&&t.actualBounds.v()&&t.isVisible()&&n.actualBounds.v()&&n.zf()&&(null===(e=t.Hj(this.name))||e.ew!==t.pointsCount||e.yw!==t.resegmentable)&&null!==(e=this.makeAdornment(n))&&(e.ew=t.pointsCount,e.yw=t.resegmentable,t.Tg(this.name,e))}null===e&&t.Af(this.name)}},Xe.prototype.makeAdornment=function(t){var e=t.part,n=e.pointsCount,s=e.isOrthogonal,l=null;if(null!==e.points&&1<n){(l=new At).type=$.Link,n=e.firstPickIndex;var u=e.lastPickIndex,c=s?1:0;if(e.resegmentable&&e.computeCurve()!==Fi)for(var d=n+c;d<u-c;d++){var p=this.makeResegmentHandle(t,d);null!==p&&(p.segmentIndex=d,p.segmentFraction=.5,p.fromMaxLinks=999,l.add(p))}for(c=n+1;c<u;c++)if(null!==(d=this.makeHandle(t,c))){if(d.segmentIndex=c,c!==n)if(c===n+1&&s){p=e.i(n);var g=e.i(n+1);R.B(p.x,g.x)&&R.B(p.y,g.y)&&(g=e.i(n-1)),R.B(p.x,g.x)?(this.Wl(d,qd),d.cursor="n-resize"):R.B(p.y,g.y)&&(this.Wl(d,qc),d.cursor="w-resize")}else c===u-1&&s?(p=e.i(u-1),g=e.i(u),R.B(p.x,g.x)&&R.B(p.y,g.y)&&(p=e.i(u+1)),R.B(p.x,g.x)?(this.Wl(d,qd),d.cursor="n-resize"):R.B(p.y,g.y)&&(this.Wl(d,qc),d.cursor="w-resize")):c!==u&&(this.Wl(d,nm),d.cursor="move");l.add(d)}l.adornedObject=t}return l},Xe.prototype.makeHandle=function(){var t=this.handleArchetype;return null===t?null:t.copy()},Xe.prototype.makeResegmentHandle=function(){var t=this.midHandleArchetype;return null===t?null:t.copy()},Xe.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return!(t.isReadOnly||!t.allowReshape||!t.lastInput.left)&&null!==this.findToolHandleAt(t.firstInput.documentPoint,this.name)},Xe.prototype.doActivate=function(){var t=this.diagram;if(null===this.handle&&(this.handle=this.findToolHandleAt(t.firstInput.documentPoint,this.name)),null!==this.handle){var e=this.handle.part.adornedPart;if(e instanceof z){if(this.vs=e,t.isMouseCaptured=!0,this.Da(this.name),e.resegmentable&&999===this.handle.fromMaxLinks){var n=e.points.copy(),s=this.getResegmentingPoint();if(n.Cb(this.handle.segmentIndex+1,s),e.isOrthogonal&&n.Cb(this.handle.segmentIndex+1,s),e.points=n,e.Rb(),e.updateAdornments(),this.handle=this.findToolHandleAt(t.firstInput.documentPoint,this.name),null===this.handle)return void this.doDeactivate()}this.jw=e.i(this.handle.segmentIndex),this.xq=e.points.copy(),this.isActive=!0}}},Xe.prototype.doDeactivate=function(){this.stopTransaction(),this.vs=this.handle=null,this.isActive=this.diagram.isMouseCaptured=!1},Xe.prototype.stopTransaction=function(){var t=this.diagram,e=Ot.prototype.stopTransaction.call(this);return e&&null!==t.undoManager.transactionToUndo&&t.undoManager.transactionToUndo.Vj(),e},Xe.prototype.doCancel=function(){var t=this.adornedLink;null!==t&&(t.points=this.xq),this.stopTool()},Xe.prototype.getResegmentingPoint=function(){return this.handle.ia(ht)},Xe.prototype.doMouseMove=function(){var t=this.diagram;this.isActive&&(t=this.computeReshape(t.lastInput.documentPoint),this.reshape(t))},Xe.prototype.doMouseUp=function(){var t=this.diagram;if(this.isActive){var e=this.computeReshape(t.lastInput.documentPoint);if(this.reshape(e),null!==(e=this.adornedLink)&&e.resegmentable){var n=this.handle.segmentIndex,s=e.i(n-1),l=e.i(n),u=e.i(n+1);if(e.isOrthogonal){if(n>e.firstPickIndex+1&&n<e.lastPickIndex-1){var c=e.i(n-2);if(Math.abs(s.x-l.x)<this.resegmentingDistance&&Math.abs(s.y-l.y)<this.resegmentingDistance&&(Tu(this,c,s,l,u,!0)||Tu(this,c,s,l,u,!1))){var d=e.points.copy();Tu(this,c,s,l,u,!0)?(d.Vc(n-2,new A(c.x,(u.y+c.y)/2)),d.Vc(n+1,new A(u.x,(u.y+c.y)/2))):(d.Vc(n-2,new A((u.x+c.x)/2,c.y)),d.Vc(n+1,new A((u.x+c.x)/2,u.y))),d.mb(n),d.mb(n-1),e.points=d,e.Rb()}else c=e.i(n+2),Math.abs(l.x-u.x)<this.resegmentingDistance&&Math.abs(l.y-u.y)<this.resegmentingDistance&&(Tu(this,s,l,u,c,!0)||Tu(this,s,l,u,c,!1))&&(d=e.points.copy(),Tu(this,s,l,u,c,!0)?(d.Vc(n-1,new A(s.x,(s.y+c.y)/2)),d.Vc(n+2,new A(c.x,(s.y+c.y)/2))):(d.Vc(n-1,new A((s.x+c.x)/2,s.y)),d.Vc(n+2,new A((s.x+c.x)/2,c.y))),d.mb(n+1),d.mb(n),e.points=d,e.Rb())}}else c=A.alloc(),R.fh(s.x,s.y,u.x,u.y,l.x,l.y,c)&&c.rf(l)<this.resegmentingDistance*this.resegmentingDistance&&((s=e.points.copy()).mb(n),e.points=s,e.Rb()),A.free(c)}t.Va(),this.transactionResult=this.name,t.P("LinkReshaped",this.adornedLink,this.xq)}this.stopTool()},Xe.prototype.reshape=function(t){var e=this.adornedLink;e.jh();var n=this.handle.segmentIndex,s=this.Du(this.handle);if(e.isOrthogonal)if(n===e.firstPickIndex+1)n=e.firstPickIndex+1,s===qd?(e.M(n,e.i(n-1).x,t.y),e.M(n+1,e.i(n+2).x,t.y)):s===qc&&(e.M(n,t.x,e.i(n-1).y),e.M(n+1,t.x,e.i(n+2).y));else if(n===e.lastPickIndex-1)n=e.lastPickIndex-1,s===qd?(e.M(n-1,e.i(n-2).x,t.y),e.M(n,e.i(n+1).x,t.y)):s===qc&&(e.M(n-1,t.x,e.i(n-2).y),e.M(n,t.x,e.i(n+1).y));else{var l=e.i(s=n),u=e.i(s-1),c=e.i(s+1);R.B(u.x,l.x)&&R.B(l.y,c.y)?(R.B(u.x,e.i(s-2).x)&&!R.B(u.y,e.i(s-2).y)?(e.l(s,t.x,u.y),n++,s++):e.M(s-1,t.x,u.y),R.B(c.y,e.i(s+2).y)&&!R.B(c.x,e.i(s+2).x)?e.l(s+1,c.x,t.y):e.M(s+1,c.x,t.y)):R.B(u.y,l.y)&&R.B(l.x,c.x)?(R.B(u.y,e.i(s-2).y)&&!R.B(u.x,e.i(s-2).x)?(e.l(s,u.x,t.y),n++,s++):e.M(s-1,u.x,t.y),R.B(c.x,e.i(s+2).x)&&!R.B(c.y,e.i(s+2).y)?e.l(s+1,t.x,c.y):e.M(s+1,t.x,c.y)):R.B(u.x,l.x)&&R.B(l.x,c.x)?(R.B(u.x,e.i(s-2).x)&&!R.B(u.y,e.i(s-2).y)?(e.l(s,t.x,u.y),n++,s++):e.M(s-1,t.x,u.y),R.B(c.x,e.i(s+2).x)&&!R.B(c.y,e.i(s+2).y)?e.l(s+1,t.x,c.y):e.M(s+1,t.x,c.y)):R.B(u.y,l.y)&&R.B(l.y,c.y)&&(R.B(u.y,e.i(s-2).y)&&!R.B(u.x,e.i(s-2).x)?(e.l(s,u.x,t.y),n++,s++):e.M(s-1,u.x,t.y),R.B(c.y,e.i(s+2).y)&&!R.B(c.x,e.i(s+2).x)?e.l(s+1,c.x,t.y):e.M(s+1,c.x,t.y)),e.M(n,t.x,t.y)}else e.M(n,t.x,t.y),l=e.fromPort,null!==(s=e.fromNode)&&null!==(u=s.findVisibleNode())&&u!==s&&(l=(s=u).port),1===n&&e.computeSpot(!0,l).Fc()&&(u=l.ia(ht,A.alloc()),s=e.getLinkPointFromPoint(s,l,u,t,!0,A.alloc()),e.M(0,s.x,s.y),A.free(u),A.free(s)),l=e.toPort,null!==(s=e.toNode)&&null!==(u=s.findVisibleNode())&&u!==s&&(l=(s=u).port),n===e.pointsCount-2&&e.computeSpot(!1,l).Fc()&&(n=l.ia(ht,A.alloc()),t=e.getLinkPointFromPoint(s,l,n,t,!1,A.alloc()),e.M(e.pointsCount-1,t.x,t.y),A.free(n),A.free(t));e.pf()},Xe.prototype.computeReshape=function(t){var e=this.adornedLink,n=this.handle.segmentIndex;switch(this.Du(this.handle)){case nm:return t;case qd:return new A(e.i(n).x,t.y);case qc:return new A(t.x,e.i(n).y);default:return e.i(n)}},St.Object.defineProperties(Xe.prototype,{handleArchetype:{get:function(){return this.m},set:function(t){this.m=t}},midHandleArchetype:{get:function(){return this.u},set:function(t){this.u=t}},handle:{get:function(){return this.j},set:function(t){if(null!==t&&!(t.part instanceof At))throw Error("new handle is not in an Adornment: "+t);this.j=t}},adornedLink:{get:function(){return this.vs}},resegmentingDistance:{get:function(){return this.F},set:function(t){this.F=t}},originalPoint:{get:function(){return this.jw}},originalPoints:{get:function(){return this.xq}}}),Xe.prototype.setReshapingBehavior=Xe.prototype.Wl,Xe.prototype.getReshapingBehavior=Xe.prototype.Du;var p1=new K(Xe,"None",0),qc=new K(Xe,"Horizontal",1),qd=new K(Xe,"Vertical",2),nm=new K(Xe,"All",3);function ze(){Ot.call(this),this.name="Resizing",this.m=new gt(1,1).freeze(),this.j=new gt(9999,9999).freeze(),this.pg=new gt(NaN,NaN).freeze(),this.W=!1,this.ga=!0,this.me=null;var t=new Ct;t.alignmentFocus=ht,t.figure="Rectangle",t.desiredSize=Yg,t.fill="lightblue",t.stroke="dodgerblue",t.strokeWidth=1,t.cursor="pointer",this.F=t,this.u=null,this.wq=new A,this.hw=new gt,this.An=new A,this.Us=new gt(0,0),this.Ts=new gt(1/0,1/0),this.Ss=new gt(1,1)}function zn(){Ot.call(this),this.name="Rotating",this.ga=45,this.W=2,this.An=new A,this.me=null;var t=new Ct;t.figure="Ellipse",t.desiredSize=Wc,t.fill="lightblue",t.stroke="dodgerblue",t.strokeWidth=1,t.cursor="pointer",this.m=t,this.j=null,this.gw=0,this.Jq=new A(NaN,NaN),this.u=0,this.F=50}function Ah(){Ot.call(this),this.name="ClickSelecting"}function So(){Ot.call(this),this.name="Action",this.ck=null}function no(){Ot.call(this),this.name="ClickCreating",this.Li=null,this.m=!0,this.j=!1,this.Rv=new A(0,0)}function Bs(){Ot.call(this),this.name="DragSelecting",this.wk=175,this.m=!1;var t=new ut;t.layerName="Tool",t.selectable=!1;var e=new Ct;e.name="SHAPE",e.figure="Rectangle",e.fill=null,e.stroke="magenta",t.add(e),this.j=t}function gs(){Ot.call(this),this.name="Panning",this.Ct=new A,this.ey=new A,this.og=!1;var t=this;this.ow=function(){var e=t.diagram;null!==e&&e.removeEventListener(mt.document,"scroll",t.ow,!1),t.stopTool()}}function za(){this.F=this.u=this.j=this.m=null}function Uo(t,e,n){this.text=t,this.Kw=e,this.visible=n}function Xi(){Ot.call(this),this.name="ContextMenu",this.m=this.Js=this.j=null,this.cw=new A,this.Ls=null,this.gt=!1;var t=this;this.Zt=function(){t.stopTool()}}function im(t){return t.preventDefault(),!1}function rm(t){var e=t.diagram;if(t.isActive){var n=t.currentContextMenu;if(null!==n){if(!(n instanceof za)){var s=e.ec(e.lastInput.documentPoint,null,null);null!==s&&s.jg(n)&&t.standardMouseClick(null,null)}t.stopTool(),t.canStart()&&(e.currentTool=t,t.doMouseUp())}}else t.canStart()&&(g1(t,!0),t.isActive||t.stopTool())}function g1(t,e,n){if(void 0===n&&(n=null),!t.gt&&(t.gt=!0,e&&t.standardMouseSelect(),e=t.standardMouseClick(),t.gt=!1,!e)){if(t.isActive=!0,e=Eu,null===n&&(n=t.findObjectWithContextMenu()),null!==n){var s=n.contextMenu;null!==s?(t.currentObject=n instanceof lt?n:null,t.showContextMenu(s,t.currentObject)):null!==e&&t.showContextMenu(e,t.currentObject)}else null!==e&&t.showContextMenu(e,null);t.currentContextMenu instanceof At&&!t.currentContextMenu.visible&&t.stopTool()}}Xe.className="LinkReshapingTool",Xe.None=p1,Xe.Horizontal=qc,Xe.Vertical=qd,Xe.All=nm,Gt("linkReshapingTool",function(){return this.findTool("LinkReshaping")},function(t){this.gb("LinkReshaping",t,this.mouseDownTools)}),zt(ze,Ot),ze.prototype.updateAdornments=function(t){if(!(null===t||t instanceof z)){if(t.isSelected&&!this.diagram.isReadOnly){var e=t.resizeObject,n=t.Hj(this.name);if(null!==e&&t.canResize()&&t.actualBounds.v()&&t.isVisible()&&e.actualBounds.v()&&e.zf()&&((null===n||n.adornedObject!==e)&&(n=this.makeAdornment(e)),null!==n))return e=e.fi(),qa(t)&&this.updateResizeHandles(n,e),void t.Tg(this.name,n)}t.Af(this.name)}},ze.prototype.makeAdornment=function(t){var e=t.part.resizeAdornmentTemplate;if(null===e){(e=new At).type=$.Spot,e.locationSpot=ht;var n=new Di;n.isPanelMain=!0,e.add(n),e.add(this.makeHandle(t,je)),e.add(this.makeHandle(t,wr)),e.add(this.makeHandle(t,xr)),e.add(this.makeHandle(t,Mn)),e.add(this.makeHandle(t,Mr)),e.add(this.makeHandle(t,Ci)),e.add(this.makeHandle(t,Mi)),e.add(this.makeHandle(t,Wi))}else if(Do(e),null===(e=e.copy()))return null;return e.adornedObject=t,e},ze.prototype.makeHandle=function(t,e){return null===(t=this.handleArchetype)?null:((t=t.copy()).alignment=e,t)},ze.prototype.updateResizeHandles=function(t,e){if(null!==t)if(!t.alignment.Sb()&&("pointer"===t.cursor||0<t.cursor.indexOf("resize")))t:{var n=t.alignment;if(n.Fc()&&(n=ht),0>=n.x)e=0>=n.y?e+225:1<=n.y?e+135:e+180;else if(1<=n.x)0>=n.y?e+=315:1<=n.y&&(e+=45);else if(0>=n.y)e+=270;else{if(!(1<=n.y))break t;e+=90}0>e?e+=360:360<=e&&(e-=360),t.cursor=22.5>e?"e-resize":67.5>e?"se-resize":112.5>e?"s-resize":157.5>e?"sw-resize":202.5>e?"w-resize":247.5>e?"nw-resize":292.5>e?"n-resize":337.5>e?"ne-resize":"e-resize"}else if(t instanceof $)for(t=t.elements;t.next();)this.updateResizeHandles(t.value,e)},ze.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return!(t.isReadOnly||!t.allowResize||!t.lastInput.left)&&null!==this.findToolHandleAt(t.firstInput.documentPoint,this.name)},ze.prototype.doActivate=function(){var t=this.diagram;null===this.handle&&(this.handle=this.findToolHandleAt(t.firstInput.documentPoint,this.name)),null!==this.handle&&(this.adornedObject=this.handle.part.adornedObject,null!==this.adornedObject&&(t.isMouseCaptured=!0,t.animationManager.wc(),this.Da(this.name),this.wq.set(this.adornedObject.ia(this.handle.alignment.Qu())),this.An.set(this.adornedObject.part.location),this.hw.set(this.adornedObject.desiredSize),this.Ss=this.computeCellSize(),this.Us=this.computeMinSize(),this.Ts=this.computeMaxSize(),this.isActive=!0))},ze.prototype.doDeactivate=function(){var t=this.diagram;this.stopTransaction(),this.me=this.handle=null,this.isActive=t.isMouseCaptured=!1},ze.prototype.stopTransaction=function(){var t=this.diagram,e=Ot.prototype.stopTransaction.call(this);return e&&null!==t.undoManager.transactionToUndo&&t.undoManager.transactionToUndo.Vj(),e},ze.prototype.doCancel=function(){null!==this.adornedObject&&(this.adornedObject.desiredSize=this.originalDesiredSize,this.adornedObject.part.location=this.originalLocation),this.stopTool()},ze.prototype.doMouseMove=function(){var t=this.diagram;if(this.isActive){var e=this.Us,n=this.Ts,s=this.Ss,l=this.adornedObject.Nr(t.lastInput.documentPoint,A.alloc()),u=this.computeReshape();e=this.computeResize(l,this.handle.alignment,e,n,s,u),this.resize(e),t.nd(),A.free(l)}},ze.prototype.doMouseUp=function(){var t=this.diagram;if(this.isActive){var e=this.Us,n=this.Ts,s=this.Ss,l=this.adornedObject.Nr(t.lastInput.documentPoint,A.alloc()),u=this.computeReshape();e=this.computeResize(l,this.handle.alignment,e,n,s,u),this.resize(e),A.free(l),t.Va(),this.transactionResult=this.name,t.P("PartResized",this.adornedObject,this.originalDesiredSize)}this.stopTool()},ze.prototype.resize=function(t){var e=this.diagram,n=this.adornedObject;if(null!==n){if(n.desiredSize=t.size,(t=n.part).Za(),n=n.ia(this.handle.alignment.Qu()),t instanceof wt){var s=new tt;if(s.add(t),!this.dragsMembers&&null===t.placeholder){var l=new wf;l.dragsMembers=!1}e.moveParts(s,this.oppositePoint.copy().je(n),!0,l)}else t.location=t.location.copy().je(n).add(this.oppositePoint);e.nd()}},ze.prototype.computeResize=function(t,e,n,s,l,u){e.Fc()&&(e=ht);var c=this.adornedObject.naturalBounds,d=c.x,p=c.y,g=c.x+c.width,y=c.y+c.height,w=1;if(!u){var C=c.height;0>=(w=c.width)&&(w=1),0>=C&&(C=1),w=C/w}return C=A.alloc(),R.so(t.x,t.y,d,p,l.width,l.height,C),t=c.copy(),0>=e.x?0>=e.y?(t.x=Math.max(C.x,g-s.width),t.x=Math.min(t.x,g-n.width),t.width=Math.max(g-t.x,n.width),t.y=Math.max(C.y,y-s.height),t.y=Math.min(t.y,y-n.height),t.height=Math.max(y-t.y,n.height),u||(1<=t.height/t.width?(t.height=Math.max(Math.min(w*t.width,s.height),n.height),t.width=t.height/w):(t.width=Math.max(Math.min(t.height/w,s.width),n.width),t.height=w*t.width),t.x=g-t.width,t.y=y-t.height)):1<=e.y?(t.x=Math.max(C.x,g-s.width),t.x=Math.min(t.x,g-n.width),t.width=Math.max(g-t.x,n.width),t.height=Math.max(Math.min(C.y-p,s.height),n.height),u||(1<=t.height/t.width?(t.height=Math.max(Math.min(w*t.width,s.height),n.height),t.width=t.height/w):(t.width=Math.max(Math.min(t.height/w,s.width),n.width),t.height=w*t.width),t.x=g-t.width)):(t.x=Math.max(C.x,g-s.width),t.x=Math.min(t.x,g-n.width),t.width=g-t.x,u||(t.height=Math.max(Math.min(w*t.width,s.height),n.height),t.width=t.height/w,t.y=p+.5*(y-p-t.height))):1<=e.x?0>=e.y?(t.width=Math.max(Math.min(C.x-d,s.width),n.width),t.y=Math.max(C.y,y-s.height),t.y=Math.min(t.y,y-n.height),t.height=Math.max(y-t.y,n.height),u||(1<=t.height/t.width?(t.height=Math.max(Math.min(w*t.width,s.height),n.height),t.width=t.height/w):(t.width=Math.max(Math.min(t.height/w,s.width),n.width),t.height=w*t.width),t.y=y-t.height)):1<=e.y?(t.width=Math.max(Math.min(C.x-d,s.width),n.width),t.height=Math.max(Math.min(C.y-p,s.height),n.height),u||(1<=t.height/t.width?(t.height=Math.max(Math.min(w*t.width,s.height),n.height),t.width=t.height/w):(t.width=Math.max(Math.min(t.height/w,s.width),n.width),t.height=w*t.width))):(t.width=Math.max(Math.min(C.x-d,s.width),n.width),u||(t.height=Math.max(Math.min(w*t.width,s.height),n.height),t.width=t.height/w,t.y=p+.5*(y-p-t.height))):0>=e.y?(t.y=Math.max(C.y,y-s.height),t.y=Math.min(t.y,y-n.height),t.height=y-t.y,u||(t.width=Math.max(Math.min(t.height/w,s.width),n.width),t.height=w*t.width,t.x=d+.5*(g-d-t.width))):1<=e.y&&(t.height=Math.max(Math.min(C.y-p,s.height),n.height),u||(t.width=Math.max(Math.min(t.height/w,s.width),n.width),t.height=w*t.width,t.x=d+.5*(g-d-t.width))),A.free(C),t},ze.prototype.computeReshape=function(){var t=Ve;return this.adornedObject instanceof Ct&&(t=L0(this.adornedObject)),!(t===Gs||this.diagram.lastInput.shift)},ze.prototype.computeMinSize=function(){var t=this.adornedObject.minSize.copy(),e=this.minSize;return!isNaN(e.width)&&e.width>t.width&&(t.width=e.width),!isNaN(e.height)&&e.height>t.height&&(t.height=e.height),t},ze.prototype.computeMaxSize=function(){var t=this.adornedObject.maxSize.copy(),e=this.maxSize;return!isNaN(e.width)&&e.width<t.width&&(t.width=e.width),!isNaN(e.height)&&e.height<t.height&&(t.height=e.height),t},ze.prototype.computeCellSize=function(){var t=new gt(NaN,NaN),e=this.adornedObject.part;return null!==e&&(e=e.resizeCellSize,!isNaN(e.width)&&0<e.width&&(t.width=e.width),!isNaN(e.height)&&0<e.height&&(t.height=e.height)),e=this.cellSize,isNaN(t.width)&&!isNaN(e.width)&&0<e.width&&(t.width=e.width),isNaN(t.height)&&!isNaN(e.height)&&0<e.height&&(t.height=e.height),e=this.diagram,(isNaN(t.width)||isNaN(t.height))&&e&&null!==(e=e.grid)&&e.visible&&this.isGridSnapEnabled&&(e=e.gridCellSize,isNaN(t.width)&&!isNaN(e.width)&&0<e.width&&(t.width=e.width),isNaN(t.height)&&!isNaN(e.height)&&0<e.height&&(t.height=e.height)),(isNaN(t.width)||0===t.width||t.width===1/0)&&(t.width=1),(isNaN(t.height)||0===t.height||t.height===1/0)&&(t.height=1),t},St.Object.defineProperties(ze.prototype,{handleArchetype:{get:function(){return this.F},set:function(t){this.F=t}},handle:{get:function(){return this.u},set:function(t){if(null!==t&&!(t.part instanceof At))throw Error("new handle is not in an Adornment: "+t);this.u=t}},adornedObject:{get:function(){return this.me},set:function(t){if(null!==t&&t.part instanceof At)throw Error("new handle must not be in an Adornment: "+t);this.me=t}},minSize:{get:function(){return this.m},set:function(t){if(!this.m.C(t)){var e=t.width;isNaN(e)&&(e=0),t=t.height,isNaN(t)&&(t=0),this.m.h(e,t)}}},maxSize:{get:function(){return this.j},set:function(t){if(!this.j.C(t)){var e=t.width;isNaN(e)&&(e=1/0),t=t.height,isNaN(t)&&(t=1/0),this.j.h(e,t)}}},cellSize:{get:function(){return this.pg},set:function(t){this.pg.C(t)||this.pg.assign(t)}},isGridSnapEnabled:{get:function(){return this.W},set:function(t){this.W=t}},dragsMembers:{get:function(){return this.ga},set:function(t){this.ga=t}},oppositePoint:{get:function(){return this.wq},set:function(t){this.wq.C(t)||this.wq.assign(t)}},originalDesiredSize:{get:function(){return this.hw}},originalLocation:{get:function(){return this.An}}}),ze.className="ResizingTool",Gt("resizingTool",function(){return this.findTool("Resizing")},function(t){this.gb("Resizing",t,this.mouseDownTools)}),zt(zn,Ot),zn.prototype.updateAdornments=function(t){if(null!==t){if(t.eh()){var e=t.rotateObject;if(e===t||e===t.path||e.isPanelMain)return}if(t.isSelected&&!this.diagram.isReadOnly&&null!==(e=t.rotateObject)&&t.canRotate()&&t.actualBounds.v()&&t.isVisible()&&e.actualBounds.v()&&e.zf()){var n=t.Hj(this.name);if((null===n||n.adornedObject!==e)&&(n=this.makeAdornment(e)),null!==n)return n.angle=e.fi(),null===n.placeholder&&(n.location=this.computeAdornmentLocation(e)),void t.Tg(this.name,n)}t.Af(this.name)}},zn.prototype.makeAdornment=function(t){var e=t.part.rotateAdornmentTemplate;if(null===e){(e=new At).type=$.Position,e.locationSpot=ht;var n=this.handleArchetype;null!==n&&e.add(n.copy())}else if(Do(e),null===(e=e.copy()))return null;return e.adornedObject=t,e},zn.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return!(t.isReadOnly||!t.allowRotate||!t.lastInput.left)&&null!==this.findToolHandleAt(t.firstInput.documentPoint,this.name)},zn.prototype.doActivate=function(){var t=this.diagram;if(null===this.adornedObject){if(null===this.handle&&(this.handle=this.findToolHandleAt(t.firstInput.documentPoint,this.name)),null===this.handle)return;this.adornedObject=this.handle.part.adornedObject}null!==this.adornedObject&&(t.isMouseCaptured=!0,t.delaysLayout=!0,this.Da(this.name),this.gw=this.adornedObject.angle,this.Jq=this.computeRotationPoint(this.adornedObject),this.An=this.adornedObject.part.location.copy(),this.isActive=!0)},zn.prototype.computeRotationPoint=function(t){var e=t.part,n=e.locationObject;return e.rotationSpot.pb()?t.ia(e.rotationSpot):t===e||t===n?n.ia(e.locationSpot):t.ia(ht)},zn.prototype.computeAdornmentLocation=function(t){var e=this.rotationPoint;e.v()||(e=this.computeRotationPoint(t)),e=t.Nr(e);var n=this.handleAngle;0>n?n+=360:360<=n&&(n-=360),n=Math.round(45*Math.round(n/45));var s=this.handleDistance;return 0===n?e.x=t.naturalBounds.width+s:45===n?(e.x=t.naturalBounds.width+s,e.y=t.naturalBounds.height+s):90===n?e.y=t.naturalBounds.height+s:135===n?(e.x=-s,e.y=t.naturalBounds.height+s):180===n?e.x=-s:225===n?(e.x=-s,e.y=-s):270===n?e.y=-s:315===n&&(e.x=t.naturalBounds.width+s,e.y=-s),t.ia(e)},zn.prototype.doDeactivate=function(){var t=this.diagram;this.stopTransaction(),this.me=this.handle=null,this.Jq=new A(NaN,NaN),this.isActive=t.isMouseCaptured=!1},zn.prototype.stopTransaction=function(){var t=this.diagram,e=Ot.prototype.stopTransaction.call(this);return e&&null!==t.undoManager.transactionToUndo&&t.undoManager.transactionToUndo.Vj(),e},zn.prototype.doCancel=function(){this.diagram.delaysLayout=!1,this.rotate(this.originalAngle),this.stopTool()},zn.prototype.doMouseMove=function(){var t=this.diagram;this.isActive&&(t=this.computeRotate(t.lastInput.documentPoint),this.rotate(t))},zn.prototype.doMouseUp=function(){var t=this.diagram;if(this.isActive){t.delaysLayout=!1;var e=this.computeRotate(t.lastInput.documentPoint);this.rotate(e),t.Va(),this.transactionResult=this.name,t.P("PartRotated",this.adornedObject,this.originalAngle)}this.stopTool()},zn.prototype.rotate=function(t){var e=this.adornedObject;if(null!==e){e.angle=t,(e=e.part).Za();var n=e.locationObject,s=e.rotateObject;(n===s||n.jg(s))&&(n=this.An.copy(),e.location=n.je(this.rotationPoint).rotate(t-this.originalAngle).add(this.rotationPoint)),this.diagram.nd()}},zn.prototype.computeRotate=function(t){t=this.rotationPoint.Ya(t)-this.handleAngle;var e=this.adornedObject.panel;null!==e&&(t-=e.fi()),360<=t?t-=360:0>t&&(t+=360),e=Math.min(Math.abs(this.snapAngleMultiple),180);var n=Math.min(Math.abs(this.snapAngleEpsilon),e/2);return!this.diagram.lastInput.shift&&0<e&&0<n&&(t%e<n?t=Math.floor(t/e)*e:t%e>e-n&&(t=(Math.floor(t/e)+1)*e)),360<=t?t-=360:0>t&&(t+=360),t},St.Object.defineProperties(zn.prototype,{handleArchetype:{get:function(){return this.m},set:function(t){this.m=t}},handle:{get:function(){return this.j},set:function(t){if(null!==t&&!(t.part instanceof At))throw Error("new handle is not in an Adornment: "+t);this.j=t}},adornedObject:{get:function(){return this.me},set:function(t){if(null!==t&&t.part instanceof At)throw Error("new handle must not be in an Adornment: "+t);this.me=t}},snapAngleMultiple:{get:function(){return this.ga},set:function(t){this.ga=t}},snapAngleEpsilon:{get:function(){return this.W},set:function(t){this.W=t}},originalAngle:{get:function(){return this.gw}},rotationPoint:{get:function(){return this.Jq},set:function(t){this.Jq=t.copy()}},handleAngle:{get:function(){return this.u},set:function(t){this.u=t}},handleDistance:{get:function(){return this.F},set:function(t){this.F=t}}}),zn.className="RotatingTool",Gt("rotatingTool",function(){return this.findTool("Rotating")},function(t){this.gb("Rotating",t,this.mouseDownTools)}),zt(Ah,Ot),Ah.prototype.canStart=function(){return!(!this.isEnabled||this.isBeyondDragSize())},Ah.prototype.doMouseUp=function(){this.isActive&&(this.standardMouseSelect(),!this.standardMouseClick()&&this.diagram.lastInput.isTouchEvent&&this.diagram.toolManager.doToolTip()),this.stopTool()},Ah.className="ClickSelectingTool",zt(So,Ot),So.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram,e=t.lastInput,n=t.ec(e.documentPoint,function(s){for(;null!==s.panel&&!s.isActionable;)s=s.panel;return s});return!(null===n||!n.isActionable||(this.ck=n,t.qk=t.ec(e.documentPoint,null,null),0))},So.prototype.doMouseDown=function(){if(this.isActive){var t=this.diagram.lastInput,e=this.ck;null!==e&&(t.targetObject=e,null!==e.actionDown&&e.actionDown(t,e))}else this.canStart()&&this.doActivate()},So.prototype.doMouseMove=function(){if(this.isActive){var t=this.diagram.lastInput,e=this.ck;null!==e&&(t.targetObject=e,null!==e.actionMove&&e.actionMove(t,e))}},So.prototype.doMouseUp=function(){if(this.isActive){var t=this.diagram.lastInput,e=this.ck;if(null===e)return;t.targetObject=e,null!==e.actionUp&&e.actionUp(t,e),this.standardMouseClick(function(n){for(;null!==n.panel&&(!n.isActionable||n!==e);)n=n.panel;return n},function(n){return n===e})}this.stopTool()},So.prototype.doCancel=function(){var t=this.diagram.lastInput,e=this.ck;null!==e&&(t.targetObject=e,null!==e.actionCancel&&e.actionCancel(t,e),this.stopTool())},So.prototype.doStop=function(){this.ck=null},So.className="ActionTool",zt(no,Ot),no.prototype.canStart=function(){if(!this.isEnabled||null===this.archetypeNodeData)return!1;var t=this.diagram;if(t.isReadOnly||t.isModelReadOnly||!t.allowInsert||!t.lastInput.left||this.isBeyondDragSize())return!1;if(this.isDoubleClick){if(1===t.lastInput.clickCount&&(this.Rv=t.lastInput.viewPoint.copy()),2!==t.lastInput.clickCount||this.isBeyondDragSize(this.Rv))return!1}else if(1!==t.lastInput.clickCount)return!1;return!(t.currentTool!==this&&null!==t.wl(t.lastInput.documentPoint,!0))},no.prototype.doMouseUp=function(){this.isActive&&this.insertPart(this.diagram.lastInput.documentPoint),this.stopTool()},no.prototype.insertPart=function(t){var e=this.diagram,n=this.archetypeNodeData;if(null===n)return null;var s=null;try{if(e.P("ChangingSelection",e.selection),this.Da(this.name),n instanceof ut)n.Tc()&&(Do(n),null!==(s=n.copy())&&e.add(s));else if(null!==n){var l=e.model.copyNodeData(n);Vt(l)&&(e.model.lf(l),s=e.Ec(l))}if(null!==s){var u=A.allocAt(t.x,t.y);this.isGridSnapEnabled&&n0(this.diagram,s,t,u),s.location=u,e.allowSelect&&(e.clearSelection(!0),s.isSelected=!0),A.free(u)}e.Va(),this.transactionResult=this.name,e.P("PartCreated",s)}finally{this.stopTransaction(),e.P("ChangedSelection",e.selection)}return s},St.Object.defineProperties(no.prototype,{archetypeNodeData:{get:function(){return this.Li},set:function(t){this.Li=t}},isDoubleClick:{get:function(){return this.m},set:function(t){this.m=t}},isGridSnapEnabled:{get:function(){return this.j},set:function(t){this.j=t}}}),no.className="ClickCreatingTool",zt(Bs,Ot),Bs.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;if(!t.allowSelect)return!1;var e=t.lastInput;return!(!e.left||t.currentTool!==this&&(!this.isBeyondDragSize()||e.timestamp-t.firstInput.timestamp<this.delay||null!==t.wl(e.documentPoint,!0)))},Bs.prototype.doActivate=function(){var t=this.diagram;this.isActive=!0,t.isMouseCaptured=!0,t.skipsUndoManager=!0,t.add(this.box),this.doMouseMove()},Bs.prototype.doDeactivate=function(){var t=this.diagram;t.lg(),t.remove(this.box),t.skipsUndoManager=!1,this.isActive=t.isMouseCaptured=!1},Bs.prototype.doMouseMove=function(){var t=this.diagram;if(this.isActive&&null!==this.box){var e=this.computeBoxBounds(),n=this.box.fb("SHAPE");null===n&&(n=this.box.vb());var s=gt.alloc().h(e.width,e.height);n.desiredSize=s,this.box.Ul(e.x,e.y,!1),gt.free(s),(t.allowHorizontalScroll||t.allowVerticalScroll)&&t.Fr(t.lastInput.viewPoint)}},Bs.prototype.doMouseUp=function(){if(this.isActive){var t=this.diagram;t.remove(this.box);try{t.currentCursor="wait",t.P("ChangingSelection",t.selection),this.selectInRect(this.computeBoxBounds()),t.P("ChangedSelection",t.selection)}finally{t.currentCursor=""}}this.stopTool()},Bs.prototype.computeBoxBounds=function(){var t=this.diagram;return new U(t.firstInput.documentPoint,t.lastInput.documentPoint)},Bs.prototype.selectInRect=function(t){var e=this.diagram,n=e.lastInput;if(t=e.Ww(t,this.isPartialInclusion),Ro?n.meta:n.control)if(n.shift)for(t=t.iterator;t.next();)(e=t.value).isSelected&&(e.isSelected=!1);else for(t=t.iterator;t.next();)(e=t.value).isSelected=!e.isSelected;else if(n.shift)for(t=t.iterator;t.next();)(e=t.value).isSelected||(e.isSelected=!0);else{for(n=new tt,e=e.selection.iterator;e.next();){var s=e.value;t.contains(s)||n.add(s)}for(e=n.iterator;e.next();)e.value.isSelected=!1;for(t=t.iterator;t.next();)(e=t.value).isSelected||(e.isSelected=!0)}},St.Object.defineProperties(Bs.prototype,{delay:{get:function(){return this.wk},set:function(t){this.wk=t}},isPartialInclusion:{get:function(){return this.m},set:function(t){this.m=t}},box:{get:function(){return this.j},set:function(t){this.j=t}}}),Bs.className="DragSelectingTool",zt(gs,Ot),gs.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return!(!t.allowHorizontalScroll&&!t.allowVerticalScroll||!t.lastInput.left||t.currentTool!==this&&!this.isBeyondDragSize())},gs.prototype.doActivate=function(){var t=this.diagram;this.og?(t.lastInput.bubbles=!0,t.addEventListener(mt.document,"scroll",this.ow,!1)):(t.currentCursor="move",t.isMouseCaptured=!0,this.Ct.assign(t.position)),this.isActive=!0},gs.prototype.doDeactivate=function(){var t=this.diagram;t.currentCursor="",this.isActive=t.isMouseCaptured=!1},gs.prototype.doCancel=function(){var t=this.diagram;t.position=this.Ct,t.isMouseCaptured=!1,this.stopTool()},gs.prototype.doMouseMove=function(){this.move()},gs.prototype.doMouseUp=function(){this.move(),this.stopTool()},gs.prototype.move=function(){var t=this.diagram;if(this.isActive&&t)if(this.og)t.lastInput.bubbles=!0;else{var e=t.position,n=t.firstInput.documentPoint,s=t.lastInput.documentPoint,l=e.x+n.x-s.x;n=e.y+n.y-s.y,t.allowHorizontalScroll||(l=e.x),t.allowVerticalScroll||(n=e.y),t.position=this.ey.h(l,n)}},St.Object.defineProperties(gs.prototype,{bubbles:{get:function(){return this.og},set:function(t){this.og=t}},originalPosition:{get:function(){return this.Ct}}}),gs.className="PanningTool",Gt("clickCreatingTool",function(){return this.findTool("ClickCreating")},function(t){this.gb("ClickCreating",t,this.mouseUpTools)}),Gt("clickSelectingTool",function(){return this.findTool("ClickSelecting")},function(t){this.gb("ClickSelecting",t,this.mouseUpTools)}),Gt("panningTool",function(){return this.findTool("Panning")},function(t){this.gb("Panning",t,this.mouseMoveTools)}),Gt("dragSelectingTool",function(){return this.findTool("DragSelecting")},function(t){this.gb("DragSelecting",t,this.mouseMoveTools)}),Gt("actionTool",function(){return this.findTool("Action")},function(t){this.gb("Action",t,this.mouseDownTools)}),St.Object.defineProperties(za.prototype,{mainElement:{get:function(){return this.u},set:function(t){this.u=t}},show:{get:function(){return this.m},set:function(t){this.m!==t&&(this.m=t)}},hide:{get:function(){return this.j},set:function(t){this.j!==t&&(this.j=t)}},valueFunction:{get:function(){return this.F},set:function(t){this.F=t}}}),za.className="HTMLInfo",Uo.className="ContextMenuButtonInfo",zt(Xi,Ot),Xi.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return!(this.isBeyondDragSize()||!t.lastInput.right||1<t.lastInput.clickCount||!(t.lastInput.isTouchEvent&&null!==this.defaultTouchContextMenu||null!==this.findObjectWithContextMenu()))},Xi.prototype.doStart=function(){this.cw.set(this.diagram.firstInput.documentPoint)},Xi.prototype.doStop=function(){this.hideContextMenu(),this.currentObject=null},Xi.prototype.findObjectWithContextMenu=function(t){void 0===t&&(t=null);var e=this.diagram,s=null;if(t instanceof V||(s=t instanceof lt?t:e.ec(e.lastInput.documentPoint,null,function(l){return!l.layer.isTemporary})),null!==s){for(t=s;null!==t;){if(null!==t.contextMenu)return t;t=t.panel}if(e.lastInput.isTouchEvent&&this.defaultTouchContextMenu)return s.part}else if(null!==e.contextMenu)return e;return null},Xi.prototype.doActivate=function(){},Xi.prototype.doMouseDown=function(){if(Ot.prototype.doMouseDown.call(this),this.isActive&&this.currentContextMenu instanceof At){var t=this.diagram.toolManager.findTool("Action");null!==t&&t.canStart()&&(t.doActivate(),t.doMouseDown(),t.doDeactivate())}this.diagram.toolManager.mouseDownTools.contains(this)&&rm(this)},Xi.prototype.doMouseUp=function(){if(this.isActive&&this.currentContextMenu instanceof At){var t=this.diagram.toolManager.findTool("Action");null!==t&&t.canStart()&&(t.doActivate(),t.doCancel(),t.doDeactivate())}rm(this)},Xi.prototype.doMouseMove=function(){var t=this.diagram.toolManager.findTool("Action");null!==t&&t.doMouseMove(),this.isActive&&this.diagram.toolManager.doMouseMove()},Xi.prototype.showContextMenu=function(t,e){var n=this.diagram;if(t!==this.currentContextMenu&&this.hideContextMenu(),t instanceof At){t.layerName="Tool",t.selectable=!1,t.scale=1/n.scale,t.category=this.name,null!==t.placeholder&&(t.placeholder.scale=n.scale);var s=t.diagram;null!==s&&s!==n&&s.remove(t),n.add(t),null!==e?t.adornedObject=e:t.data=n.model,t.Za(),this.positionContextMenu(t,e)}else t instanceof za&&t.show(e,n,this);this.currentContextMenu=t},Xi.prototype.positionContextMenu=function(t){if(null===t.placeholder){var e=this.diagram,n=e.lastInput.documentPoint.copy(),s=t.measuredBounds,l=e.viewportBounds;e.lastInput.isTouchEvent&&(n.x-=s.width),n.x+s.width>l.right&&(n.x-=s.width+5/e.scale),n.x<l.x&&(n.x=l.x),n.y+s.height>l.bottom&&(n.y-=s.height+5/e.scale),n.y<l.y&&(n.y=l.y),t.position=n}},Xi.prototype.hideContextMenu=function(){var t=this.diagram,e=this.currentContextMenu;null!==e&&(e instanceof At?(t.remove(e),null!==this.Js&&this.Js.Af(e.category),e.data=null,e.adornedObject=null):e instanceof za&&(null!==e.hide?e.hide(t,this):null!==e.mainElement&&(e.mainElement.style.display="none")),this.currentContextMenu=null,this.standardMouseOver())},Xi.prototype.showDefaultContextMenu=function(){var t=this.diagram;null===this.Ls&&(this.Ls=function m1(t){var e=new tt;return e.add(new Uo("Copy",function(n){n.commandHandler.copySelection()},function(n){return n.commandHandler.canCopySelection()})),e.add(new Uo("Cut",function(n){n.commandHandler.cutSelection()},function(n){return n.commandHandler.canCutSelection()})),e.add(new Uo("Delete",function(n){n.commandHandler.deleteSelection()},function(n){return n.commandHandler.canDeleteSelection()})),e.add(new Uo("Paste",function(n){n.commandHandler.pasteSelection(t.mouseDownPoint)},function(n){return n.commandHandler.canPasteSelection(t.mouseDownPoint)})),e.add(new Uo("Select All",function(n){n.commandHandler.selectAll()},function(n){return n.commandHandler.canSelectAll()})),e.add(new Uo("Undo",function(n){n.commandHandler.undo()},function(n){return n.commandHandler.canUndo()})),e.add(new Uo("Redo",function(n){n.commandHandler.redo()},function(n){return n.commandHandler.canRedo()})),e.add(new Uo("Scroll To Part",function(n){n.commandHandler.scrollToPart()},function(n){return n.commandHandler.canScrollToPart()})),e.add(new Uo("Zoom To Fit",function(n){n.commandHandler.zoomToFit()},function(n){return n.commandHandler.canZoomToFit()})),e.add(new Uo("Reset Zoom",function(n){n.commandHandler.resetZoom()},function(n){return n.commandHandler.canResetZoom()})),e.add(new Uo("Group Selection",function(n){n.commandHandler.groupSelection()},function(n){return n.commandHandler.canGroupSelection()})),e.add(new Uo("Ungroup Selection",function(n){n.commandHandler.ungroupSelection()},function(n){return n.commandHandler.canUngroupSelection()})),e.add(new Uo("Edit Text",function(n){n.commandHandler.editTextBlock()},function(n){return n.commandHandler.canEditTextBlock()})),e}(this)),ef.innerHTML="",tf.addEventListener("pointerdown",this.Zt,!1);var e=this,n=hs("ul");n.className="goCXul",ef.appendChild(n),n.innerHTML="";for(var s=this.Ls.iterator;s.next();){var l=s.value,u=l.visible;if("function"==typeof l.Kw&&("function"!=typeof u||u(t))){(u=hs("li")).className="goCXli";var c=hs("a");c.className="goCXa",c.href="#",c.Qx=l.Kw,c.addEventListener("pointerdown",function(d){return this.Qx(t),e.stopTool(),d.preventDefault(),!1},!1),c.textContent=l.text,u.appendChild(c),n.appendChild(u)}}ef.style.display="block",tf.style.display="block"},Xi.prototype.hideDefaultContextMenu=function(){if(null!==this.currentContextMenu&&this.currentContextMenu===Eu){ef.style.display="none",tf.style.display="none";var t=this.diagram;null!==t&&t.removeEventListener(tf,"pointerdown",this.Zt,!1),this.currentContextMenu=null}},St.Object.defineProperties(Xi.prototype,{currentContextMenu:{get:function(){return this.j},set:function(t){this.j=t,this.Js=t instanceof At?t.adornedPart:null}},defaultTouchContextMenu:{get:function(){return!1===om&&null===Eu&&Je&&function Hv(t){var e=new za;e.show=function(l,u,c){c.showDefaultContextMenu()},e.hide=function(l,u){u.hideDefaultContextMenu()},Eu=e,t.Zt=function(){t.stopTool()},e=hs("div");var n=hs("div");e.style.cssText="top: 0px;z-index:10002;position: fixed;display: none;text-align: center;left: 25%;width: 50%;background-color: #F5F5F5;padding: 16px;border: 16px solid #444;border-radius: 10px;margin-top: 10px",n.style.cssText="z-index:10001;position: fixed;display: none;top: 0;left: 0;width: 100%;height: 100%;background-color: black;opacity: 0.8;";var s=hs("style");mt.document.getElementsByTagName("head")[0].appendChild(s),s.sheet.insertRule(".goCXul { list-style: none; }",0),s.sheet.insertRule(".goCXli {font:700 1.5em Helvetica, Arial, sans-serif;position: relative;min-width: 60px; }",0),s.sheet.insertRule(".goCXa {color: #444;display: inline-block;padding: 4px;text-decoration: none;margin: 2px;border: 1px solid gray;border-radius: 10px; }",0),null!==(s=t.diagram)&&(s.addEventListener(e,"contextmenu",im,!1),s.addEventListener(e,"selectstart",im,!1),s.addEventListener(n,"contextmenu",im,!1)),e.className="goCXforeground",n.className="goCXbackground",mt.document.body&&(mt.document.body.appendChild(e),mt.document.body.appendChild(n)),ef=e,tf=n,om=!0}(this),Eu},set:function(t){null===t&&(om=!0),Eu=t}},currentObject:{get:function(){return this.m},set:function(t){this.m=t}},mouseDownPoint:{get:function(){return this.cw}}});var Eu=null,om=!1,tf=null,ef=null;function fe(){Ot.call(this),this.name="TextEditing",this.Sh=new Kt,this.ga=null,this.W=Gv,this.qj=null,this.na=tp,this.u=1,this.F=!0,this.m=null,this.j=new za,this.Ms=null,function zv(t,e){if(Je){var n=hs("textarea");t.Ms=n,n.addEventListener("input",function(){if(null!==t.textBlock){var s=t.qx(this.value);this.style.width=20+s.measuredBounds.width*this.cA+"px",this.rows=s.lineCount}},!1),n.addEventListener("keydown",function(s){if(null!==t.textBlock){var l=s.key;"Enter"===l?(!1===t.textBlock.isMultiline&&s.preventDefault(),t.acceptText(qn)):"Tab"===l?(t.acceptText(Ga),s.preventDefault()):"Escape"===l&&(t.doCancel(),null!==t.diagram&&t.diagram.doFocus())}},!1),n.addEventListener("focus",function(){if(null!==t.currentTextEditor&&t.state!==tp){var s=t.Ms;t.na===ep&&(t.na=sm),"function"==typeof s.select&&t.selectsTextOnActivate&&(s.select(),s.setSelectionRange(0,9999))}},!1),n.addEventListener("blur",function(){if(null!==t.currentTextEditor&&t.state!==tp){var s=t.Ms;"function"==typeof s.focus&&s.focus(),"function"==typeof s.select&&t.selectsTextOnActivate&&(s.select(),s.setSelectionRange(0,9999))}},!1),e.valueFunction=function(){return n.value},e.mainElement=n,e.show=function(s,l,u){if(s instanceof Kt&&u instanceof fe)if(u.state===Pu)n.style.border="3px solid red",n.focus();else{var c=s.ia(ht),d=l.position,p=l.scale,g=s.uf()*p;g<u.minimumEditorScale&&(g=u.minimumEditorScale);var y=s.naturalBounds.width*g+6,w=s.naturalBounds.height*g+2,C=(c.x-d.x)*p;c=(c.y-d.y)*p,w=(d=s.verticalAlignment).y*w-d.y*(p=(s.lineHeight+s.spacingAbove+s.spacingBelow)*s.lineCount*g)+d.offsetY-(.5*w-.5*p)-p/2,n.value=s.text,l.div.style.font=s.font,n.style.position="absolute",n.style.zIndex="100",n.style.font="inherit",n.style.fontSize=100*g+"%",n.style.lineHeight="normal",n.style.width=y+"px",n.style.left=(C-y/2|0)-1+"px",n.style.top=(c+w|0)-1+"px",n.style.textAlign=s.textAlign,n.style.margin="0",n.style.padding="1px",n.style.border="0",n.style.outline="none",n.style.whiteSpace="pre-wrap",n.style.overflow="hidden",n.rows=s.lineCount,n.cA=g,n.className="goTXarea",l.div.appendChild(n),n.focus(),u.selectsTextOnActivate&&(n.select(),n.setSelectionRange(0,9999))}},e.hide=function(s){s.div.removeChild(n)}}}(this,this.j)}function y1(t){var e=t.textBlock,n=t.diagram,s=t.currentTextEditor;if(null!==e&&null!==s){var l=e.text,u="";null!==s.valueFunction&&(u=s.valueFunction()),t.isValidText(e,l,u)?(t.Da(t.name),t.na=rf,t.transactionResult=t.name,e.text=u,t.doSuccess(l,u),null!==n&&n.P("TextEdited",e,l),t.stopTransaction(),t.stopTool(),null!==n&&n.doFocus()):(t.na=Pu,t.doError(l,u))}}Xi.className="ContextMenuTool",Gt("contextMenuTool",function(){return this.findTool("ContextMenu")},function(t){this.gb("ContextMenu",t,this.mouseUpTools)}),zt(fe,Ot),fe.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;if(null===t||t.isReadOnly||bl&&bl!==this&&(bl.acceptText(Dr),bl&&bl!==this)||!t.lastInput.left||this.isBeyondDragSize())return!1;var e=t.ec(t.lastInput.documentPoint);return!!(null!==e&&e instanceof Kt&&e.editable&&e.part.canEdit())&&!(null===(e=e.part)||this.starting===Gv&&!e.isSelected||this.starting===w1&&2>t.lastInput.clickCount)},fe.prototype.doStart=function(){bl=this,null!==this.textBlock&&this.doActivate()},fe.prototype.doActivate=function(){if(!this.isActive){var t=this.diagram;if(null!==t){var e=this.textBlock;if(null===e&&(e=t.ec(t.lastInput.documentPoint)),null!==e&&e instanceof Kt&&(this.textBlock=e,null!==e.part)){t.animationManager.wc(),this.isActive=!0,this.na=ep;var n=this.defaultTextEditor;null!==e.textEditor&&(n=e.textEditor),this.Sh=this.textBlock.copy();var s=new U(this.textBlock.ia(je),this.textBlock.ia(xr));t.bv(s),n.show(e,t,this),this.currentTextEditor=n}}}},fe.prototype.doCancel=function(){this.stopTool()},fe.prototype.doMouseUp=function(){this.canStart()&&this.doActivate()},fe.prototype.doMouseDown=function(){this.isActive&&this.acceptText(Dr)},fe.prototype.acceptText=function(t){switch(t){case Dr:this.na===rf?this.currentTextEditor instanceof HTMLElement&&this.currentTextEditor.focus():(this.na===ep||this.na===Pu||this.na===sm)&&(this.na=nf,y1(this));break;case v1:case qn:case Ga:(qn!==t||!0!==this.textBlock.isMultiline)&&(this.na===ep||this.na===Pu||this.na===sm)&&(this.na=nf,y1(this))}},fe.prototype.doError=function(t,e){var n=this.textBlock;null!==n.errorFunction&&n.errorFunction(this,t,e),(t=this.currentTextEditor)&&t.show(n,this.diagram,this)},fe.prototype.doSuccess=function(t,e){var n=this.textBlock;null!==n.textEdited&&n.textEdited(n,t,e)},fe.prototype.doDeactivate=function(){var t=this.diagram;null!==t&&(this.na=tp,null!==this.currentTextEditor&&this.currentTextEditor.hide(t,this),this.textBlock=null,this.isActive=!1)},fe.prototype.doStop=function(){bl=null},fe.prototype.isValidText=function(t,e,n){var s=this.textValidation;return!(null!==s&&!s(t,e,n)||null!==(s=t.textValidation)&&!s(t,e,n))},fe.prototype.qx=function(t){var e=this.Sh;return e.text=t,e.measure(this.textBlock.zh,1/0),e},St.Object.defineProperties(fe.prototype,{textBlock:{get:function(){return this.ga},set:function(t){this.ga=t}},currentTextEditor:{get:function(){return this.m},set:function(t){this.m=t}},defaultTextEditor:{get:function(){return this.j},set:function(t){this.j=t}},starting:{get:function(){return this.W},set:function(t){this.W=t}},textValidation:{get:function(){return this.qj},set:function(t){this.qj=t}},minimumEditorScale:{get:function(){return this.u},set:function(t){this.u=t}},selectsTextOnActivate:{get:function(){return this.F},set:function(t){this.F=t}},state:{get:function(){return this.na},set:function(t){this.na!==t&&(this.na=t)}}}),fe.prototype.measureTemporaryTextBlock=fe.prototype.qx;var v1=new K(fe,"LostFocus",0),Dr=new K(fe,"MouseDown",1),Ga=new K(fe,"Tab",2),qn=new K(fe,"Enter",3),GS=new K(fe,"SingleClick",0),Gv=new K(fe,"SingleClickSelected",1),w1=new K(fe,"DoubleClick",2),tp=new K(fe,"StateNone",0),ep=new K(fe,"StateActive",1),sm=new K(fe,"StateEditing",2),nf=new K(fe,"StateValidating",3),Pu=new K(fe,"StateInvalid",4),rf=new K(fe,"StateValidated",5),bl=null;function _r(t){op||(ip(),op=!0),this.H=bh,this.Dk=this.zb=this.Xp=this.$b=!1,this.uw=!0,this.Ek=kh,this.lm=!1,this.wh=this.Ad=!0,this.ug=600,this.Hv=this.sw=!1,this.Sd=new Q,this.Wd=new Nn,this.Wd.Rd=this,this.yi=new Q,this.Vt=new Q,this.rr=new Q,this.dl=new Q,t&&Object.assign(this,t)}function $a(t,e){t.Ad&&t.canStart(e)&&(t.Sd.add(e),t.defaultAnimation.isAnimating&&t.wc(),$n(t.H),t.zb=!0)}function Wa(t){if(t.Ad&&t.zb){var e=t.Wd,n=t.H,s=t.Sd.contains("Model");s&&(t.Dk=!0,t.Ek===kh?(e.isViewportUnconstrained=!0,e.rc.clear(),e.add(n,"position",n.position.copy().offset(0,-200),n.position),e.add(n,"opacity",0,1)):t.Ek===Kv&&e.rc.clear(),t.uw=!(t.Ek!==Wv||!n.Jt.C(n.pa)),n.P("InitialAnimationStarting",t)),s&&!t.wh||0===e.rc.count?(t.Sd.clear(),t.zb=!1,e.rc.clear(),am(e,n),t.Dk=!1,n.N()):(t.Sd.clear(),n.cg=!1,s=e.rc.get(n),n.autoScale!==Rr&&null!==s&&(delete s.start.scale,delete s.end.scale),mt.requestAnimationFrame(function(){!1===t.zb||e.$b||(n.Ge("temporaryPixelRatio")&&uf(n),bu(n),t.zb=!1,e.start(),e.$b&&(Iu(t),n.Va(),KS(e,0),Ll(n,!0),sf(t),n.P("AnimationStarting",t)))}))}}function Nu(t){return t.Sd.contains("Trigger")&&1===t.Sd.count}function x1(t,e,n,s){t.isTicking||Nu(t)||e instanceof z&&(null!==e.fromNode||null!==e.toNode)||t.Wd.add(e,"position",n,s,!1)}function Iu(t){if(!t.Xp){var e=t.H;t.sw=e.skipsUndoManager,t.Hv=e.skipsModelSourceBindings,e.skipsUndoManager=!0,e.skipsModelSourceBindings=!0,t.Xp=!0}}function sf(t){var e=t.H;e.skipsUndoManager=t.sw,e.skipsModelSourceBindings=t.Hv,t.Xp=!1}function C1(t,e,n){!t.zb||e.C(n)||Nu(t)||(t.H.ji||(e=n.copy()),Au(t.Wd,t.H,"position",e,n))}function WS(t,e){for(e=e.findLinksConnected();e.next();){var n=e.value;n.ef=n.points.copy(),t.dl.add(n)}}function $v(t,e,n,s,l){null===t&&(t=[0,0,0,0]),null===e&&(e=[0,0,0,0]);var u=t[0],c=t[1],d=t[2];t=t[3];var p=e[0],g=e[1],y=e[2];return e=e[3],0===d||100===d?(u=p,c=g):(0===y||100===y)&&(p=u,g=c),180<Math.abs(p-u)&&(p>u?u+=360:p+=360),"hsla("+(u=l(n,u,p-u,s)%360)+", "+(c=l(n,c,g-c,s))+"%, "+(d=l(n,d,y-d,s))+"%, "+(n=l(n,t,e-t,s))+")"}function ip(){function t(n,s,l,u,c,d){n.position=new A(u(c,s.x,l.x-s.x,d),u(c,s.y,l.y-s.y,d))}var e=new xt;e.add("position:diagram",t),e.add("position",t),e.add("position:part",function(n,s,l,u,c,d){c<d?n.Ul(u(c,s.x,l.x-s.x,d),u(c,s.y,l.y-s.y,d),!1):n.position=new A(u(c,s.x,l.x-s.x,d),u(c,s.y,l.y-s.y,d))}),e.add("location",function(n,s,l,u,c,d){c<d?n.Ul(u(c,s.x,l.x-s.x,d),u(c,s.y,l.y-s.y,d),!0):n.location=new A(u(c,s.x,l.x-s.x,d),u(c,s.y,l.y-s.y,d))}),e.add("position:placeholder",function(n,s,l,u,c,d){c<d?n.Ul(u(c,s.x,l.x-s.x,d),u(c,s.y,l.y-s.y,d),!1):n.position=new A(u(c,s.x,l.x-s.x,d),u(c,s.y,l.y-s.y,d))}),e.add("position:nodeCollapse",function(n,s,l,u,c,d){var p=n.actualBounds,g=l.actualBounds;l=g.x+g.width/2-p.width/2,p=g.y+g.height/2-p.height/2,c<d?n.Ul(u(c,s.x,l-s.x,d),u(c,s.y,p-s.y,d),!1):n.position=new A(u(c,s.x,l-s.x,d),u(c,s.y,p-s.y,d))}),e.add("desiredSize",function(n,s,l,u,c,d){n.desiredSize=new U(u(c,s.width,l.width-s.width,d),u(c,s.height,l.height-s.height,d))}),e.add("width",function(n,s,l,u,c,d){n.width=u(c,s,l-s,d)}),e.add("height",function(n,s,l,u,c,d){n.height=u(c,s,l-s,d)}),e.add("fill",function(n,s,l,u,c,d){n.fill=$v(s,l,c,d,u)}),e.add("stroke",function(n,s,l,u,c,d){n.stroke=$v(s,l,c,d,u)}),e.add("strokeWidth",function(n,s,l,u,c,d){n.strokeWidth=u(c,s,l-s,d)}),e.add("strokeDashOffset",function(n,s,l,u,c,d){n.strokeDashOffset=u(c,s,l-s,d)}),e.add("background",function(n,s,l,u,c,d){n.background=$v(s,l,c,d,u)}),e.add("areaBackground",function(n,s,l,u,c,d){n.areaBackground=$v(s,l,c,d,u)}),e.add("opacity",function(n,s,l,u,c,d){n.opacity=u(c,s,l-s,d)}),e.add("scale",function(n,s,l,u,c,d){n.scale=u(c,s,l-s,d)}),e.add("angle",function(n,s,l,u,c,d){n.angle=u(c,s,l-s,d)}),rp=e}fe.className="TextEditingTool",fe.LostFocus=v1,fe.MouseDown=Dr,fe.Tab=Ga,fe.Enter=qn,fe.SingleClick=GS,fe.SingleClickSelected=Gv,fe.DoubleClick=w1,fe.StateNone=tp,fe.StateActive=ep,fe.StateEditing=sm,fe.StateValidating=nf,fe.StateInvalid=Pu,fe.StateValidated=rf,Gt("textEditingTool",function(){return this.findTool("TextEditing")},function(t){this.gb("TextEditing",t,this.mouseUpTools)}),_r.prototype.Le=function(t){this.H=t},_r.prototype.canStart=function(){return!0},(_=_r.prototype).es=function(t){return this.Wd.es(t)},_.Ju=function(t){return this.Wd.Ju(t)},_.wc=function(t){var e=this.Wd;if(!0===this.zb&&(this.Dk=this.zb=!1,this.Sd.clear(),0<e.rc.count&&this.H.Mb()),this.$b){if(e.ul(!0),e.rc.clear(),am(e,null),!0===t)for(t=this.yi.Ea(),e=0;e<t.length;e++)t[e].ul(!0)}else e.rc.clear(),am(e,this.H)},_.ul=function(t){t===this.defaultAnimation&&this.defaultAnimation.rc.clear(),this.yi.remove(t),0===this.yi.count&&(this.$b=!1,this.H.Mb()),t===this.defaultAnimation&&(this.defaultAnimation.rc.clear(),this.H.P("AnimationFinished",this))},_.xj=function(t,e){this.zb&&(this.Sd.contains("Expand Tree")||this.Sd.contains("Expand SubGraph"))&&(this.Wd.xj(t,e),WS(this,t))},_.vj=function(t,e){this.zb&&(this.Sd.contains("Collapse Tree")||this.Sd.contains("Collapse SubGraph"))&&(this.Wd.vj(t,e),Au(this.Wd,e,"position",e.position,e.position),WS(this,t))},St.Object.defineProperties(_r.prototype,{animationReasons:{get:function(){return this.Sd}},isEnabled:{get:function(){return this.Ad},set:function(t){(this.Ad=t)&&this.yi.each(function(e){e.isAnimating||e.runCount!==1/0||e.start()})}},duration:{get:function(){return this.ug},set:function(t){1>t&&pe(t,">= 1",_r,"duration"),this.ug=t}},isAnimating:{get:function(){return this.$b}},isTicking:{get:function(){return this.Xp}},isInitial:{get:function(){return this.wh},set:function(t){this.wh=t}},defaultAnimation:{get:function(){return this.Wd}},activeAnimations:{get:function(){return this.yi}},initialAnimationStyle:{get:function(){return this.Ek},set:function(t){this.Ek=t}}}),_r.prototype.stopAnimation=_r.prototype.wc;var rp=null,op=!1,kh=new K(_r,"Default",1),Wv=new K(_r,"AnimateLocations",2),Kv=new K(_r,"None",3);function Nn(t){this.au=this.rw=this.Rd=this.H=null,this.Mk=this.$b=this.j=!1,this.Km=this.Gd=0,this.op=this.Rs=Yv,this.Lk=this.Kn=!1,this.It=1,this.Gt=0,this.yd=this.ug=NaN,this.Lv=0,this.Lm=null,this.m=Va,this.rc=new xt,this.yt=new xt,this.nl=new Q,this.zt=new Q,this.Iv=Hs,t&&Object.assign(this,t)}function am(t,e){if(t.yt.clear(),t.Lk=!1,t.Gt=0,t.yd=NaN,0<t.nl.count&&t.nl.clear(),0<t.zt.count&&t.zt.clear(),null!==e)for(t=e.links;t.next();)t.value.ef=null}function Au(t,e,n,s,l,u){var c=t.rc;if(e instanceof V&&"position"===n&&(n="position:diagram"),("fill"===n||"stroke"===n||"background"===n||"areaBackground"===n)&&(ma(s),L1(),s=[Pr.j,Pr.u,Pr.m,Pr.F],ma(l),L1(),l=[Pr.j,Pr.u,Pr.m,Pr.F]),c.contains(e)){var d=c.I(e),p=d.start,g=d.end;void 0===p[n]&&(p[n]=ku(s)),g[n]=ku(l)}else g={},(p={})[n]=ku(s),g[n]=ku(l),d=p.position,e instanceof lt&&d instanceof A&&!d.v()&&e.diagram.animationManager.Sd.contains("Expand SubGraph")&&d.assign(g.position),d=new M1(p,g,u),c.add(e,d);(c=p[n])instanceof A&&!c.v()&&c.assign(t.m),u&&0===n.indexOf("position:")&&e instanceof ut?d.uu.location=ku(e.location):u&&(d.uu[n]=ku(s))}function ku(t){return t instanceof A||t instanceof gt?t.copy():t}function sp(t,e){if(!t.Mk||e){var n=t.Rd;if(!1!==t.$b){var s=+new Date,l=s>t.Km?t.yd:s-t.Gd;e&&((l=t.Lv)<t.yd?(t.Gd=+new Date-l,t.Km=t.Gd+t.yd):l=t.yd),Iu(n),KS(t,l),Ll(t.H,!0),sf(n),s>t.Km&&(t.Kn&&!t.Lk?(t.Gd=+new Date,t.Km=t.Gd+t.yd,t.Lk=!0):t.ul(!1))}}}function KS(t,e){for(var n=t.yd,s=t.rc.iterator,l=t.Lk;s.next();){var u=s.key;if(!(u instanceof lt&&null===u.diagram)){var c=s.value,d=l?c.end:c.start;c=l?c.start:c.end;var g,p=rp;for(g in c)"position"===g&&(c["position:placeholder"]||c["position:nodeCollapse"])||null===p.get(g)||p.get(g)(u,d[g],c[g],t.op,e,n,t)}}}function Yv(t,e,n,s){return 1>(t/=s/2)?n/2*t*t+e:-n/2*(--t*(t-2)-1)+e}function Xv(t,e,n,s){return t===s?e+n:n*(1-Math.pow(2,-10*t/s))+e}function M1(t,e,n){this.start=t,this.end=e,this.uu={},this.ou=n,this.Wu=!1}function ki(t,e,n){this.sd=null,this.df=t,this.Vn=n||af,this.hk=null,void 0!==e&&(this.hk=e,void 0===n&&(this.Vn=ap))}_r.className="AnimationManager",_r.defineAnimationEffect=function(t,e){op||(ip(),op=!0),rp.add(t,e)},_r.Default=kh,_r.AnimateLocations=Wv,_r.None=Kv,Nn.prototype.suspend=function(){this.Mk=!0},Nn.prototype.advanceTo=function(t,e){e&&(this.Mk=!1),this.Kn&&t>=this.yd&&(this.Lk=!0,t-=this.yd),this.Lv=t,sp(this,!0),Iu(this.Rd),Ll(this.H),sf(this.Rd),this.H.redraw()},(_=Nn.prototype).start=function(){if(0===this.rc.count||this.$b)return this;for(var t=this.H,e=this.rc.iterator;e.next();){var n=e.value.end,s=e.key;if(n["position:placeholder"]){var l=s.findVisibleNode();if(l instanceof wt&&null!==l.placeholder){var u=l.placeholder;(l=u.ia(je)).x+=(u=u.padding).left,l.y+=u.top,n["position:placeholder"]=l}}null===t&&(s instanceof V?t=s:s instanceof lt&&(t=s.diagram))}return null===t||(this.H=t,this.Rd=t.animationManager,!1===(e=this.Rd).isEnabled||(this.yd=isNaN(this.ug)?e.duration:this.ug,this.op=this.Rs,e.Dk&&e.Ek===kh&&this===e.defaultAnimation&&(this.op=Xv,this.yd=isNaN(this.ug)?600===e.duration?900:e.duration:this.ug),this.Iv=t.scrollMode,this.isViewportUnconstrained&&(t.nj=yf),Iu(e),this.nl.each(function(c){c.data=null,t.add(c)}),sf(e),this.$b=!0,this.Gd=+new Date,this.Km=this.Gd+this.yd,function $S(t,e){function n(){if(0<l.rr.count&&(s.addAll(l.rr),l.rr.clear(),l.$b=!0),!1!==l.$b&&0!==s.count){l.Vt.addAll(s);for(var u=l.Vt.iterator;u.next();){var c=u.value;if(!1!==c.$b){t:if(0<c.nl.count)var d=!0;else{for(d=c.rc.iterator;d.next();){var p=d.key;if(p instanceof lt&&null!==p.diagram||p instanceof V){d=!0;break t}}d=!1}d?sp(c,!1):c.Mk=!0}}l.Vt.clear(),!1!==l.$b&&(Iu(l),Ll(l.H),sf(l)),mt.requestAnimationFrame(n)}}var s=t.yi,l=t;t.$b?t.rr.add(e):(t.$b=!0,s.add(e),mt.requestAnimationFrame(function(){n()}))}(e,this))),this},_.oy=function(t,e){return t.Tc()?(this.nl.add(t),this.H=e,this):this},_.add=function(t,e,n,s,l){if("position"===e&&n.C(s))return this;if(null===this.H&&(t instanceof V?this.H=t:t instanceof lt&&null!==t.diagram&&(this.H=t.diagram)),t instanceof ut){if(!t.isAnimated)return this;"position"===e&&(e="position:part")}return Au(this,t,e,n,s,l),this},_.es=function(t){return!!this.$b&&null!==(t=this.rc.I(t))&&t.Wu},_.Ju=function(t){return!!this.$b&&null!==(t=this.rc.I(t))&&(t.start.position||t.start.location)},_.stop=function(){return this.$b?(this.ul(!0),this):this},_.ul=function(t){if(null!==this.au&&this.au.Mn.remove(this.rw),this.$b){var e=this.H,n=this.Rd;this.Mk=this.$b=n.Dk=!1,Iu(n);for(var s=this.rc,l=this.nl.iterator;l.next();)e.remove(l.value);for(l=this.zt.iterator;l.next();)l.value.w();l=this.Kn,s=s.iterator;for(var u=rp;s.next();){var w,c=s.key,d=s.value,p=l?d.end:d.start,g=l?d.start:d.end,y=d.uu;for(w in g)if(null!==u.get(w)){var C=w;!d.ou||"position:nodeCollapse"!==C&&"position:placeholder"!==C||(C="position"),u.get(C)(c,p[w],void 0!==y[w]?y[w]:d.ou?p[w]:g[w],this.op,this.yd,this.yd,this)}d.ou&&void 0!==y.location&&c instanceof ut&&(c.location=y.location),d.Wu&&c instanceof ut&&c.Ub(!1)}if(e.Zr.clear(),up(e,!1),e.Va(),e.N(),Ll(e,!0),n.defaultAnimation===this){for(w=n.dl.iterator;w.next();)null!==(l=w.value).ef&&(l.points=l.ef,l.ef=null);n.dl.clear()}Ll(e,!0),this.isViewportUnconstrained&&(e.scrollMode=this.Iv),sf(n),this.Gt++,!t&&this.It>this.Gt?(this.Lk=!1,this.start()):(this.Lm&&this.Lm(this),am(this,null),n.ul(this),e.Mb())}},_.xj=function(t,e){var n=e.actualBounds,s=null;if(e instanceof wt&&(s=e.placeholder),null!==s?((n=s.ia(je)).x+=(s=s.padding).left,n.y+=s.top,this.add(t,"position",n,t.position,!1)):this.add(t,"position",new A(n.x+n.width/2,n.y+n.height/2),t.position,!1),this.add(t,"scale",.01,t.scale,!1),t instanceof wt)for(t=t.memberParts;t.next();)(s=t.value)instanceof Z&&this.xj(s,e)},_.vj=function(t,e){if(t.isVisible()){var n=null;if(e instanceof wt&&(n=e.placeholder),null!==n?this.add(t,"position:placeholder",t.position,n,!0):this.add(t,"position:nodeCollapse",t.position,e,!0),this.add(t,"scale",t.scale,.01,!0),(n=this.rc).contains(t)&&(n.I(t).Wu=!0),t instanceof wt)for(t=t.memberParts;t.next();)(n=t.value)instanceof Z&&this.vj(n,e)}},_.lz=function(t){var e=this.yt.get(t);return null===e&&this.yt.add(t,e={}),e},St.Object.defineProperties(Nn.prototype,{duration:{get:function(){return this.ug},set:function(t){1>t&&pe(t,">= 1",Nn,"duration"),this.ug=t}},reversible:{get:function(){return this.Kn},set:function(t){this.Kn=t}},runCount:{get:function(){return this.It},set:function(t){0<t?this.It=t:Y("Animation.runCount value must be a positive integer.")}},finished:{get:function(){return this.Lm},set:function(t){this.Lm!==t&&(this.Lm=t)}},easing:{get:function(){return this.Rs},set:function(t){this.Rs=t}},isViewportUnconstrained:{get:function(){return this.j},set:function(t){this.j=t}},isAnimating:{get:function(){return this.$b}}}),Nn.prototype.getTemporaryState=Nn.prototype.lz,Nn.prototype.stop=Nn.prototype.stop,Nn.prototype.add=Nn.prototype.add,Nn.prototype.addTemporaryPart=Nn.prototype.oy,Nn.className="Animation",Nn.EaseLinear=function(t,e,n,s){return n*t/s+e},Nn.EaseInOutQuad=Yv,Nn.EaseInQuad=function(t,e,n,s){return n*(t/=s)*t+e},Nn.EaseOutQuad=function(t,e,n,s){return-n*(t/=s)*(t-2)+e},Nn.EaseInExpo=function(t,e,n,s){return 0===t?e:n*Math.pow(2,10*(t/s-1))+e},Nn.EaseOutExpo=Xv,M1.className="AnimationState",ki.prototype.copy=function(){var t=new ki(this.df);t.Vn=this.Vn;var e=this.hk;if(null!==e){var n={};void 0!==e.duration&&(n.duration=e.duration),void 0!==e.finished&&(n.finished=e.finished),void 0!==e.easing&&(n.easing=e.easing),t.hk=n}return t},St.Object.defineProperties(ki.prototype,{propertyName:{get:function(){return this.df},set:function(t){this.df=t}},animationSettings:{get:function(){return this.hk},set:function(t){this.hk=t}},startCondition:{get:function(){return this.Vn},set:function(t){this.Vn=t}}});var Jv,bh,af=new K(ki,"Default",1),ap=new K(ki,"Immediate",2),lm=new K(ki,"Bundled",3);function Gn(t){En(this),this.H=null,this.Ma=new tt,this.va="",this.tb=1,this.m=!1,this.j=this.Nh=this.u=this.Ii=this.Hi=this.Gi=this.Fi=this.Di=this.Ei=this.Ci=this.Ki=this.Bi=this.Ji=this.Ai=this.zi=!0,this.Bn=[],t&&Object.assign(this,t)}function Ol(t,e){var n=1;return 1!==t.tb&&(e.globalAlpha=(n=e.globalAlpha)*t.tb),n}function um(t,e,n){if(e=function S1(t,e,n){var s=n.zOrder;if(isNaN(s))return e;var l=(t=t.Ma).count;if(1>=l)return e;if(0>e&&(e=t.indexOf(n)),0>e)return-1;for(var u=e-1,c=NaN;0<=u&&(c=t.K(u).zOrder,isNaN(c));)u--;for(var d=e+1,p=NaN;d<l&&(p=t.K(d).zOrder,isNaN(p));)d++;if(!isNaN(c)&&c>s)for(;;){if(-1===u||c<=s){if(++u===e)break;return t.mb(e),t.Cb(u,n),u}for(c=NaN;0<=--u&&(c=t.K(u).zOrder,isNaN(c)););}else if(!isNaN(p)&&p<s)for(;;){if(d===l||p>=s){if(--d===e)break;return t.mb(e),t.Cb(d,n),d}for(p=NaN;++d<l&&(p=t.K(d).zOrder,isNaN(p)););}return e}(t,e,n),n instanceof wt&&null!==n&&isNaN(n.zOrder)){if(0!==n.memberParts.count){for(var s=-1,l=t.Ma.s,u=l.length,c=0;c<u;c++){var d=l[c];if(d===n&&(e=c,0<=s)||0>s&&d.containingGroup===n&&(s=c,0<=e))break}!(0>s)&&s<e&&((l=t.Ma).mb(e),l.Cb(s,n))}null!==(n=n.containingGroup)&&um(t,-1,n)}}function V(t,e){if(g0||(function tD(){if(Je){var t=mt.document.createElement("canvas"),e=t.getContext("2d"),n=$t("7ca11abfd022028846");e[n]=$t("398c3597c01238");for(var s=["5da73c80a36455d6038e4972187c3cae51fd22",wu.Dx+"4ae6247590da4bb21c324ba3a84e385776",Dt.xF+"fb236cdfda5de14c134ba1a95a2d4c7cc6f93c1387",R.za],l=1;5>l;l++)e[$t("7ca11abfd7330390")]($t(s[l-1]),10,15*l);for(e[n]=$t("39f046ebb36e4b"),n=1;5>n;n++)e[$t("7ca11abfd7330390")]($t(s[n-1]),10,15*n);(4!==s.length||"5"!==s[0][0]||"7"!==s[3][0])&&(Dt.prototype.Ld=Dt.prototype.Fw),qS=t}}(),g0=!0),En(this),bh=this,this.wb=!0,this.La=null,this.Aa=this.Ba=0,this.Ha=null,Je){var n=this,s=function(){n.removeEventListener(mt.document,"DOMContentLoaded",s,!1),n.setRTL()};null!==mt.document.body?this.setRTL():n.addEventListener(mt.document,"DOMContentLoaded",s,!1)}this.cl=null,kt.add("Model",Bt);var l=this;return this.Db=function(u){var c=l.partManager;if(u.model===c.diagram.model&&c.diagram.$){c.diagram.$=!1;try{""===u.modelChange&&u.change===re&&c.updateDataBindings(u.object,u.propertyName)}finally{c.diagram.$=!0}}},this.Hc=function(u){l.partManager.doModelChanged(u)},this.Nt=this.Qt=null,D1(this),this.model=ww(),this.Mg=!0,_1(this),this.layout=new Lt,this.Mg=!1,this.Yj=this.Zj=this.Xj=this.Wj=this.Iz=this.Sj=this.sv=null,this.Jo=function(){},this.preventDefault=null,this.Ym=!1,this.vh=new eD,void 0!==t&&("string"==typeof t||mt.Element&&t instanceof Element?m0(this,t):e=t),this.wb=!1,e&&this.Vl(e),this}function D1(t){t.Rd=new _r,t.Rd.Le(t),t.Ab=17,t.kw=!1,t.$m=!1,t.Ht="default",t.Ua=new tt,t.Yx=new xt,t.Ax(),t.zx(),t.tb=1,t.pa=new A(NaN,NaN).freeze(),t.Jt=new A(NaN,NaN),t.xa=1,t.sp=1,t.bt=new A(NaN,NaN).freeze(),t.ct=NaN,t.tt=1e-4,t.pt=100,t.Bb=new Dt,t.eu=new A(NaN,NaN).freeze(),t.Xs=new U(NaN,NaN,NaN,NaN).freeze(),t.mj=new Ht(0,0,0,0).freeze(),t.nj=Hs,t.Tt=!1,t.Et=null,t.Lt=null,t.nh=Rr,t.mk=Zn,t.wg=Rr,t.Rp=Zn,t.at=je,t.dt=je,t.bd=!0,t.Wm=!1,t.te=new Q,t.th=new xt,t.Fm=!0,t.Yo=250,t.ik=-1,t.$o=new Ht(16,16,16,16).freeze(),t.cg=!1,t.xk=!1,t.Nm=!0,t.Fp=new ar,t.Fp.diagram=t,t.Hg=new ar,t.Hg.diagram=t,t.Yi=new ar,t.Yi.diagram=t,t.qg=null,t.bf=null,t.Wt=!1,function BE(t){function e(l){var u=l.toLowerCase(),c=new tt;n.add(l,c),n.add(u,c),s.add(l,l),s.add(u,l)}var n=new xt,s=new xt;e("InitialAnimationStarting"),e("AnimationStarting"),e("AnimationFinished"),e("BackgroundSingleClicked"),e("BackgroundDoubleClicked"),e("BackgroundContextClicked"),e("ClipboardChanged"),e("ClipboardPasted"),e("DocumentBoundsChanged"),e("ExternalObjectsDropped"),e("GainedFocus"),e("InitialLayoutCompleted"),e("LayoutCompleted"),e("LinkDrawn"),e("LinkRelinked"),e("LinkReshaped"),e("LostFocus"),e("Modified"),e("ObjectSingleClicked"),e("ObjectDoubleClicked"),e("ObjectContextClicked"),e("PartCreated"),e("PartResized"),e("PartRotated"),e("SelectionMoved"),e("SelectionCopied"),e("SelectionDeleting"),e("SelectionDeleted"),e("SelectionGrouped"),e("SelectionUngrouped"),e("ChangingSelection"),e("ChangedSelection"),e("SubGraphCollapsed"),e("SubGraphExpanded"),e("TextEdited"),e("TreeCollapsed"),e("TreeExpanded"),e("ViewportBoundsChanged"),e("InvalidateDraw"),t.Nv=n,t.Mv=s}(t),t.Uh=new Q,t.kt=!0,t.$t=Ru,t.Vv=!1,t.bu=mp,t.Ks="auto",t.rp="auto",t.oh=null,t.uh=null,t.qh=null,t.Jh=null,t.Hh=null,t.Gh=null,t.vt=null,t.Eh=null,t.$s=!1,t.Fh=null,t.Ih=null,t.Th=null,t.rh=null,t.wt=!1,t.Dt={},t.$k=[null,null],t.Mg=!1,t.mw=!1,t.Ut=!1,t.Ns=!1,t.Xv=!0,t.cd=!1,t.Vi=!1,t.xw=!0,t.se=-2,t.Fg=new xt,t.Fn=new tt,t.xg=!1,t.Ad=!0,t.ws=!0,t.zi=!0,t.Ai=!0,t.xs=!1,t.ys=!0,t.Ji=!0,t.Bi=!0,t.Ki=!0,t.As=!0,t.Ci=!0,t.Ei=!0,t.Di=!0,t.Fi=!0,t.Gi=!0,t.Hi=!0,t.Ii=!0,t.Bs=!0,t.Ds=!0,t.Wv=!1,t.Kk=!1,t.Tm=!0,t.Um=!0,t.zs=!0,t.Cs=!0,t.Ot=16,t.St=16,t.Nq=!1,t.Mt=!1,t.Rt=0,t.Pt=0,t.ub=new Ht(5).freeze(),t.lw=(new Q).freeze(),t.qt=999999999,t.Tv=(new Q).freeze(),t.Si=!0,t.Ti=!0,t.Ui=!0,t.We=!1,t.Of=!1,t.mh=!0,t.Qf=!1,t.Xx=new Q,t.Uv=new Q,t.Qh=null,t.Fv=new gt(8,8),t.Gv=999,t.fw=1,t.nw=0,t.kd={scale:1,position:new A,bounds:new U,Hw:new gt,sx:new gt,lx:!1},t.vw=new U(NaN,NaN,NaN,NaN).freeze(),t.Zn=new gt(NaN,NaN).freeze(),t.wp=new U(NaN,NaN,NaN,NaN).freeze(),t.lt=!1,t.Dg=new xt;var e=new Z,n=new Kt;n.bind(new xe("text","",vo)),e.add(n),t.Tx=e,t.Dg.add("",e),e=new Z,(n=new Kt).stroke="brown",n.bind(new xe("text","",vo)),e.add(n),t.Dg.add("Comment",e),(e=new Z).selectable=!1,e.avoidable=!1,(n=new Ct).figure="Ellipse",n.fill="black",n.stroke=null,n.desiredSize=new gt(3,3).ha(),e.add(n),t.Dg.add("LinkLabel",e),t.Ri=new xt,(e=new wt).selectionObjectName="GROUPPANEL",e.type=$.Vertical,(n=new Kt).font="bold 12pt sans-serif",n.bind(new xe("text","",vo)),e.add(n),(n=new $($.Auto)).name="GROUPPANEL";var s=new Ct;s.figure="Rectangle",s.fill="rgba(128,128,128,0.2)",s.stroke="black",n.add(s),(s=new Di).padding=new Ht(5,5,5,5).ha(),n.add(s),e.add(n),t.Rx=e,t.Ri.add("",e),t.Ch=new xt,e=new z,(n=new Ct).isPanelMain=!0,e.add(n),(n=new Ct).toArrow="Standard",n.fill="black",n.stroke=null,n.strokeWidth=0,e.add(n),t.Sx=e,t.Ch.add("",e),e=new z,(n=new Ct).isPanelMain=!0,n.stroke="brown",e.add(n),t.Ch.add("Comment",e),(e=new At).type=$.Auto,(n=new Ct).fill=null,n.stroke="dodgerblue",n.strokeWidth=3,e.add(n),(n=new Di).margin=new Ht(1.5,1.5,1.5,1.5).ha(),e.add(n),t.xt=e,t.Zs=e,(e=new At).type=$.Link,(n=new Ct).isPanelMain=!0,n.fill=null,n.stroke="dodgerblue",n.strokeWidth=3,e.add(n),t.nt=e,t.Zd=null,t.Op=!1,t.qk=null,t.partManager=new Bt,t.toolManager=new Te,t.toolManager.initializeStandardTools(),t.defaultTool=t.toolManager,t.currentTool=t.defaultTool,t.Ps=null,t.Em=new wf,t.At=null,t.Bt=null,t.jr=!1,t.commandHandler=lf(),t.kr=!1,t.Hp=null,t.Ip=Wd,t.tw=!1,t.kc=1,t.Rh=null,t.nq=1,t.rq=0,t.dw=[0,0,0,0,0],t.sq=0,t.Yp=1,t.Zv=0,t.$v=new A,t.hy=500,t.Zo=new A,t.jt=!1}function lp(t,e){t.animationManager.wc(!0),t.lw=(new Q).freeze(),t.Tv=(new Q).freeze();var n=t.skipsUndoManager,s=null!=t.ac;s&&(t.skipsUndoManager=!0);var l=null;null!==t.Zd&&null!==(l=t.Zd.part)&&t.remove(l);var u=[],c=t.Ua.length;if(e){for(e=0;e<c;e++)for(var d=t.Ua.s[e].parts;d.next();){var p=d.value;p!==l&&null===p.data&&u.push(p)}for(e=0;e<u.length;e++)t.remove(u[e])}for(e=0;e<c;e++)t.Ua.s[e].clear();return t.partManager.clear(),t.te.clear(),t.th.clear(),t.Uh.clear(),t.qk=null,t.Fn.clear(),Rf(),t.Fg.clear(),ye=[],null!==l&&(t.add(l),t.partManager.parts.remove(l)),s&&(t.skipsUndoManager=n),u}function lf(){return null}function uf(t){30<t.rq&&(t.Rh=1)}function up(t,e){null!==t.Rh&&(t.Rh=null,e&&t.Jo(),Sh&&Sh.Rw||(t.rq=0,t.dw=[0,0,0,0,0],t.sq=0))}function bu(t){if(null!==t.Ha){var e=t.La;if(null!==e&&0!==e.clientWidth&&0!==e.clientHeight){t.kw||t.setScrollWidth();var n=t.Of?t.Ab:0,s=t.We?t.Ab:0,l=t.kc;t.kc=t.computePixelRatio(),t.kc!==l&&(t.Wm=!0,t.Mb()),(e.clientWidth!==t.Ba+n||e.clientHeight!==t.Aa+s)&&(t.Ti=!0,t.bd=!0,null!==(e=t.layout)&&e.isViewportSized&&t.autoScale===Rr&&(t.xk=!0,e.D()),t.cd||t.Mb())}}}function _1(t){var e=new Gn;e.name="Background",t.pl(e),(e=new Gn).name="",t.pl(e),(e=new Gn).name="Foreground",t.pl(e),(e=new Gn).name="Adornment",e.isTemporary=!0,e.isInDocumentBounds=!1,t.pl(e),(e=new Gn).name="Tool",e.isTemporary=!0,e.isInDocumentBounds=!0,t.pl(e),(e=new Gn).name="Grid",e.allowSelect=!1,e.pickable=!1,e.isTemporary=!0,e.isInDocumentBounds=!1,t.Aw(e,t.Ij("Background"))}function Fr(t){var e=new $($.Grid);e.name="GRID";var n=new Ct;return n.figure="LineH",n.stroke="lightgray",n.strokeWidth=.5,n.interval=1,e.add(n),(n=new Ct).figure="LineH",n.stroke="gray",n.strokeWidth=.5,n.interval=5,e.add(n),(n=new Ct).figure="LineH",n.stroke="gray",n.strokeWidth=1,n.interval=10,e.add(n),(n=new Ct).figure="LineV",n.stroke="lightgray",n.strokeWidth=.5,n.interval=1,e.add(n),(n=new Ct).figure="LineV",n.stroke="gray",n.strokeWidth=.5,n.interval=5,e.add(n),(n=new Ct).figure="LineV",n.stroke="gray",n.strokeWidth=1,n.interval=10,e.add(n),(n=new ut).add(e),n.layerName="Grid",n.zOrder=0,n.isInDocumentBounds=!1,n.isAnimated=!1,n.pickable=!1,n.locationObjectName="GRID",t.add(n),t.partManager.parts.remove(n),e.visible=!1,e}function Zv(){this.H.Mt?this.H.Mt=!1:this.H.isEnabled?this.H.Nw(this):fa(this.H)}function JS(t){this.H.isEnabled?(this.H.Rt=t.target.scrollTop,this.H.Pt=t.target.scrollLeft):fa(this.H)}function Qv(t,e){if(t.fixedBounds.v())return e.assign(t.fixedBounds),e.fo(t.ub),e;for(var n=!0,s=t.Ua.s,l=s.length,u=0;u<l;u++){var c=s[u];if(c.visible&&c.isInDocumentBounds)for(var d=(c=c.Ma.s).length,p=0;p<d;p++){var g=c[p];g.isInDocumentBounds&&g.isVisible()&&(g=g.actualBounds).v()&&(n?(n=!1,e.assign(g)):e.Xc(g))}}return n&&e.h(0,0,0,0),e.fo(t.ub),e}function Tr(t,e){if((e||t.Qf)&&!t.wb&&null!==t.Ha&&t.documentBounds.v()){if(e){var n=t.initialPosition;if(n.v())return void(t.position=n);(n=A.alloc()).oi(t.documentBounds,t.initialDocumentSpot);var s=t.viewportBounds;s=U.allocAt(0,0,s.width,s.height);var l=A.alloc();l.oi(s,t.initialViewportSpot),l.h(n.x-l.x,n.y-l.y),t.position=l,U.free(s),A.free(l),A.free(n)}t.wb=!0,n=t.nh,e&&t.wg!==Rr&&(n=t.wg);var u=n!==Rr?ca(t,n):t.scale;n=t.pa.x,s=t.pa.y,l=t.Ba/u;var c=t.Aa/u,d=t.mk,p=t.Rp;e&&!d.pb()&&(p.pb()||p.Sb())&&(d=p.Sb()?ht:p),Ou(t,t.documentBounds,l,c,d,e),e=t.scale,t.scale=u,t.wb=!1,ms(t),hp(t,!0,!1),R.B((u=t.viewportBounds).x,n)&&R.B(u.y,s)&&R.B(u.width,l)&&R.B(u.height,c)||t.onViewportBoundsChanged(new U(n,s,l,c),u,e,!1)}}function ca(t,e){var n=t.sp;if(null===t.Ha)return n;t.Za();var s=t.documentBounds;if(!s.v())return n;var l=s.width,u=t.Ba+(t.Of?t.Ab:0),c=t.Aa+(t.We?t.Ab:0),d=u/l,p=c/(s=s.height);return e===pf?((e=Math.min(p,d))>n&&(e=n),e<t.minScale&&(e=t.minScale),e>t.maxScale&&(e=t.maxScale),e):e===vm?((e=p>d?(c-t.Ab)/s:(u-t.Ab)/l)>n&&(e=n),e<t.minScale&&(e=t.minScale),e>t.maxScale&&(e=t.maxScale),e):t.scale}function Ou(t,e,n,s,l,u){var c=A.allocAt(t.pa.x,t.pa.y),d=c.x,p=c.y;if(null!==t.Hp){var g=A.alloc();d=(g=t.Hp.ia(je,g)).x-t.Ip.x/t.scale,p=g.y-t.Ip.y/t.scale,l=Oe,A.free(g)}(u||t.scrollMode===Hs)&&(l.pb()&&(n>e.width&&(d=e.x+(l.x*e.width+l.offsetX)-(l.x*n-l.offsetX)),s>e.height&&(p=e.y+(l.y*e.height+l.offsetY)-(l.y*s-l.offsetY))),u=n-e.width,n<e.width+(l=t.mj).left+l.right?(d=Math.min(d+n/2,e.right+Math.max(u,l.right)-n/2),d=Math.max(d,e.left-Math.max(u,l.left)+n/2),d-=n/2):d>e.left?d=e.left:d<e.right-n&&(d=e.right-n),n=s-e.height,s<e.height+l.top+l.bottom?(p=Math.min(p+s/2,e.bottom+Math.max(n,l.bottom)-s/2),p=Math.max(p,e.top-Math.max(n,l.top)+s/2),p-=s/2):p>e.top?p=e.top:p<e.bottom-s&&(p=e.bottom-s)),c.x=isFinite(d)?d:-t.ub.left,c.y=isFinite(p)?p:-t.ub.top,null!==t.positionComputation&&(e=t.positionComputation(t,c),c.x=e.x,c.y=e.y),C1(t.Rd,t.pa,c),t.pa.h(c.x,c.y),Ka(t),A.free(c)}function Lu(t,e,n,s){for(void 0===n&&(n=null),void 0===s&&(s=null),$n(t),t=t.Ua.iteratorBackwards;t.next();){var l=t.value;if(l.visible&&!l.isTemporary&&null!==(l=l.ec(e,n,s)))return l}return null}function cf(t,e,n){var s=t.Hg;return t.Hg=t.Yi,t.Yi=s,s.diagram=t,s.event=e,n?hm(t,e,s):(s.viewPoint=t.Hg.viewPoint,s.documentPoint=t.Hg.documentPoint),t=0,e.ctrlKey&&(t+=1),e.altKey&&(t+=2),e.shiftKey&&(t+=4),e.metaKey&&(t+=8),s.modifiers=t,s.button=e.button,void 0!==e.buttons&&(s.buttons=e.buttons),Ro&&0===e.button&&e.ctrlKey&&(s.button=2),s.down=!1,s.up=!1,s.clickCount=1,s.delta=0,s.handled=!1,s.bubbles=!1,s.timestamp=e.timeStamp,s.isMultiTouch=!1,s.targetDiagram=t0(e,e.target),s.targetObject=null,s}function t0(t,e){return null===e?null:(e=e.H)?e:((e=t.path)||"function"!=typeof t.composedPath||(e=t.composedPath()),e&&e[0]&&e[0].H?e[0].H:null)}function Yt(t,e,n,s,l,u){var c=t.Hg;return t.Hg=t.Yi,t.Yi=c,c.diagram=t,c.clickCount=1,t=c.delta=0,e.ctrlKey&&(t+=1),e.altKey&&(t+=2),e.shiftKey&&(t+=4),e.metaKey&&(t+=8),c.modifiers=t,c.event=e,c.timestamp=e.timeStamp,c.button=e.button,c.buttons=e.buttons,Ro&&0===e.button&&e.ctrlKey&&(c.button=2),c.down=n,c.up=s,c.handled=!1,c.bubbles=l,c.isMultiTouch=u,c}function Oh(t,e){return!!t.bubbles||(void 0!==e.stopPropagation&&e.stopPropagation(),!1!==e.cancelable&&e.preventDefault(),e.cancelBubble=!0,!1)}function hm(t,e,n){var s=t.Ha,l=t.Ba,u=t.Aa,c=0,d=0;null!==s&&(s=s.getBoundingClientRect(),c=e.clientX-l/s.width*s.left,d=e.clientY-u/s.height*s.top),n.viewPoint.h(c,d),null!==t.Bb?(e=A.allocAt(c,d),t.Bb.Ld(e),n.documentPoint.assign(e),A.free(e)):n.documentPoint.h(c,d)}function ZS(t,e,n,s){if(void 0!==e.targetTouches){if(2>e.targetTouches.length)return;e=e.targetTouches[n]}else{if(null===t.$k[0])return;e=t.$k[n]}null!==(n=t.Ha)&&(n=n.getBoundingClientRect(),s.h(e.clientX-t.Ba/n.width*n.left,e.clientY-t.Aa/n.height*n.top))}function hp(t,e,n){t.animationManager.defaultAnimation.isAnimating||t.wb||!t.Ti||fa(t)||(e&&$n(t),n&&Tr(t,!1))}function Ll(t,e){if(!t.cd&&(t.cg=!1,null!==t.La||t.Zn.v())){t.cd=!0;var n=t.animationManager,s=t.Fn;if(!n.isAnimating&&0!==s.length){for(var l=s.s,u=l.length,c=0;c<u;c++){var d=l[c];lr(d,!1),d.w()}s.clear()}0<(s=t.Uv).count&&(s.each(function(p){p.rv()}),s.clear()),l=s=!1,n.defaultAnimation.isAnimating&&(l=!0,s=t.skipsUndoManager,t.skipsUndoManager=!0),n.zb||bu(t),hp(t,!1,!0),null!==t.Zd&&(t.Zd.visible&&!t.Op&&(Us(t),t.Op=!0),!t.Zd.visible&&t.Op&&(t.Op=!1)),$n(t),u=!1,(!t.Qf||t.mh)&&(t.Qf?fp(t,!t.xk):(t.Da("Initial Layout"),!1===n.isEnabled&&n.wc(),fp(t,!1)),u=!0),t.xk=!1,$n(t),t.Ut||function RE(t){t.cd||$n(t),t.Za()}(t),hp(t,!0,!1),c=!1,u?((n=U.alloc()).assign(t.viewportBounds),t.Qf||(c=t.Qf=!0,t.skipsUndoManager||(t.undoManager.isPendingClear=!0),t.undoManager.isPendingUnmodified=!0,function jE(t){var e=t.xa;if(t.wg!==Rr)t.scale=ca(t,t.wg);else if(t.nh!==Rr)t.scale=ca(t,t.nh);else{var n=t.initialScale;isFinite(n)&&0<n&&(t.scale=n)}t.xa!==e&&(ms(t),hp(t,!0,!1)),Tr(t,!0),t.Pd(e=t.Ua.s,e.length,t,t.viewportBounds),t.P("InitialLayoutCompleted"),t.Jt.assign(t.pa),Us(t)}(t)),t.P("LayoutCompleted"),n.C(t.viewportBounds)||hp(t,!0,!1),U.free(n)):n.Dk&&n.uw&&(t.wg!==Rr?t.scale=ca(t,t.wg):t.nh!==Rr?t.scale=ca(t,t.nh):(n=t.initialScale,isFinite(n)&&0<n&&(t.scale=n)),Tr(t,!0)),$n(t),u&&c&&t.eb("Initial Layout"),t.mu(),e||t.tc(t.Zb),l&&(t.skipsUndoManager=s),t.cd=!1}}function $n(t){if(0!==t.te.count&&(t.cd||!t.animationManager.isTicking)){for(var e=0;23>e;e++){var n=t.te.iterator;if(null===n||0===t.te.count)break;t.te=new Q,t.rv(n,t.te)}t.nodes.each(function(s){s instanceof wt&&0!=(65536&s.U)&&(s.U=65536^s.U)})}}function E1(t,e){for(var n=ce(),s=ce(),l=e.memberParts;l.next();){var u=l.value;u.isVisible()&&(u instanceof wt?(da(u)||ii(u)||Wl(u))&&E1(t,u):u instanceof z?u.fromNode===e||u.toNode===e?s.push(u):n.push(u):(u.measure(1/0,1/0),u.arrange()))}for(t=n.length,l=0;l<t;l++)(u=n[l]).measure(1/0,1/0),u.arrange();for(It(n),e.measure(1/0,1/0),e.arrange(),t=s.length,e=0;e<t;e++)(n=s[e]).measure(1/0,1/0),n.arrange();It(s)}function e0(t,e,n,s,l,u,c,d,p,g){if(null!==t.La){null===t.Ha&&Y("No canvas specified"),void 0===c&&(c=null),void 0===d&&(d=null),void 0===p&&(p=!1),void 0===g&&(g=!1),cp(t),t.Zb.Oc(!0),Fh(t),t.Vi=!0;var y=t.xa;t.xa=l;var w=t.Ua.s,C=w.length;try{var D=new U(u.x,u.y,s.width/l,s.height/l),M=D.copy();M.fo(n),Us(t,M),$n(t),t.Pd(w,C,t,D),e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,s.width,s.height),null!==d&&""!==d&&(e.fillStyle=d,e.fillRect(0,0,s.width,s.height));var E=t.kc;e.scale(E,E);var I=Dt.alloc();I.reset(),I.translate(n.left,n.top),I.scale(l),0===u.x&&0===u.y||I.translate(-u.x,-u.y),e.setTransform(I.m11,I.m12,I.m21,I.m22,I.dx,I.dy),e.Pc(),Dt.free(I),bi(t,e),e.globalAlpha=t.tb;var P=t.Ij("Grid");if(c){var k=new Q,b=c.iterator;for(b.reset();b.next();){var O=b.value;O instanceof ut&&(g||O.layer!==P)&&k.add(O)}for(g=0;g<C;g++){var L=w[g];P=e;var H=t;if(L.visible&&0!==L.tb&&(p||!L.isTemporary)){var J=L.Ma.s,nt=J.length;if(0!==nt){var et=Ol(L,P),q=L.Bn;q.length=0;var G=H.scale,Mt=U.alloc();for(n=0;n<nt;n++){var pt=J[n];k.contains(pt)&&L.$h(P,pt,H,q,G,Mt,!1)}U.free(Mt),P.globalAlpha=et}}}}else for(k=0;k<C;k++)(H=w[k])===P?g&&H.tc(e,t,!0):H.tc(e,t,p);t.Vi=!1,t.vh&&vp(t.vh,t)&&t.Qs()}finally{t.xa=y,t.Zb.Oc(!0),Fh(t),t.Pd(w,C,t,t.viewportBounds),Us(t)}}}function bi(t,e){null!==(t=t.Ig)&&(void 0!==t.imageSmoothingEnabled&&e.Ex(!!t.imageSmoothingEnabled),null!=(t=t.defaultFont)&&(e.font=t))}function Lh(t,e){var l,n=t instanceof $,s=t instanceof V;for(l in e){""===l&&Y("Setting properties requires non-empty property names");var u=t,c=l;if(n||s){var d=l.indexOf(".");if(0<d){var p=l.substring(0,d);n?u=t.fb(p):null==(u=t[p])&&(u=t.toolManager[p]),Vt(u)?c=l.substr(d+1):Y("Unable to find object named: "+p+" in "+t.toString()+" when trying to set property: "+l)}}if("_"!==c[0]&&!Tn(u,c)){if(s&&"ModelChanged"===c){t.Cw(e[c]);continue}if(s&&"Changed"===c){t.Ug(e[c]);continue}if(s&&Tn(t.toolManager,c))u=t.toolManager;else{if(s&&ff(t,c)){t.wj(c,e[c]);continue}if(t instanceof st&&"Changed"===c){t.Ug(e[c]);continue}Y('Trying to set undefined property "'+c+'" on object: '+u.toString())}}u[c]=e[l],"_"===c[0]&&u instanceof lt&&u.zw(c)}}function ms(t){!1===t.Ti&&(t.Ti=!0)}function Fh(t){!1===t.Ui&&(t.Ui=!0)}function cp(t){!1!==t.Wm&&(t.Wm=!1,Ho(t,t.Ba,t.Aa))}function Ho(t,e,n){Ka(t);var s=t.kc;t.Ha.resize(e*s,n*s,e,n)&&(t.bd=!0,t.Zb.Oc(!0))}function fa(t){var e=t.Ha;if(null===e||t.Zn.v())return!0;var n=t.Ba,s=t.Aa,l=t.viewportBounds;if(!t.viewportBounds.v())return!0;var u=l.x,c=l.y,d=l.width,p=l.height,g=t.Qt,y=t.Nt,w=t.La,C=!1,D=t.Of?t.Ab:0,M=t.We?t.Ab:0,E=w.clientWidth||n+D,I=w.clientHeight||s+M;if((E!==n+D||I!==s+M)&&(t.Of=!1,t.We=!1,M=D=0,t.Ba=E,t.Aa=I,C=t.Wm=!0,Ka(t)),!(C||t.Of||t.We||t.Tm||t.Um))return!0;t.Ti=!1;var P=t.documentBounds,k=0,b=0,O=0,L=0;w=l.width;var H=l.height,J=t.mj;t.contentAlignment.pb()?(P.width>w&&(k=J.left,b=J.right),P.height>H&&(O=J.top,L=J.bottom)):(k=J.left,b=J.right,O=J.top,L=J.bottom),J=P.width+k+b;var nt=P.height+O+L;k=P.x-k;var et=l.x;b=P.right+b;var q=l.right+D;O=P.y-O;var G=l.y;P=P.bottom+L,L=l.bottom+M;var Mt="1px",pt="1px";if(E=J>E/(l=t.scale),I=nt>I/l,t.scrollMode===Hs&&(E||I)&&(E&&t.hasHorizontalScrollbar&&t.allowHorizontalScroll&&(E=1,k+1<et&&(E=Math.max((et-k)*l+t.Ba,E)),b>q+1&&(E=Math.max((b-q)*l+t.Ba,E)),w+D+1<J&&(E=Math.max((J-w)*l+t.Ba,E)),Mt=E.toString()+"px"),I&&t.hasVerticalScrollbar&&t.allowVerticalScroll&&(E=1,O+1<G&&(E=Math.max((G-O)*l+t.Aa,E)),P>L+1&&(E=Math.max((P-L)*l+t.Aa,E)),H+M+1<nt&&(E=Math.max((nt-H)*l+t.Aa,E)),pt=E.toString()+"px")),I="1px"!==pt,(E="1px"!==Mt)&&I||!E&&!I||(I&&(q-=t.Ab),E&&(L-=t.Ab),J<w+D||!t.hasHorizontalScrollbar||!t.allowHorizontalScroll||(D=1,k+1<et&&(D=Math.max((et-k)*l+t.Ba,D)),b>q+1&&(D=Math.max((b-q)*l+t.Ba,D)),w+1<J&&(D=Math.max((J-w)*l+t.Ba,D)),Mt=D.toString()+"px"),D=t.Aa,(E="1px"!==Mt)!==t.We&&(D=E?t.Aa-t.Ab:t.Aa+t.Ab),nt<H+M||!t.hasVerticalScrollbar||!t.allowVerticalScroll||(M=1,O+1<G&&(M=Math.max((G-O)*l+D,M)),P>L+1&&(M=Math.max((P-L)*l+D,M)),H+1<nt&&(M=Math.max((nt-H)*l+D,M)),pt=M.toString()+"px"),I="1px"!==pt),t.Nq&&E===t.We&&I===t.Of)return n===t.Ba&&s===t.Aa||t.nd(),!1;if(E!==t.We&&(t.Aa="1px"===Mt?t.Aa+t.Ab:Math.max(t.Aa-t.Ab,1),C=!0),t.We=E,y.style.width=Mt,I!==t.Of&&(t.Ba="1px"===pt?t.Ba+t.Ab:Math.max(t.Ba-t.Ab,1),C=!0,t.$m&&(M=A.alloc(),I?(e.style.left=t.Ab+"px",t.position=M.h(t.pa.x+t.Ab/t.scale,t.pa.y)):(e.style.left="0px",t.position=M.h(t.pa.x-t.Ab/t.scale,t.pa.y)),A.free(M))),C&&Ka(t),t.Of=I,y.style.height=pt,t.Mt=!0,C&&(t.Wm=!0),e=g.scrollLeft,t.hasHorizontalScrollbar&&t.allowHorizontalScroll&&(w+1<J?e=(t.position.x-k)*l:k+1<et?e=g.scrollWidth-g.clientWidth:b>q+1&&(e=t.position.x*l)),t.$m)switch(t.Ht){case"negative":e=-(g.scrollWidth-e-g.clientWidth);break;case"reverse":e=g.scrollWidth-e-g.clientWidth}return g.scrollLeft=e,t.hasVerticalScrollbar&&t.allowVerticalScroll&&(H+1<nt?g.scrollTop=(t.position.y-O)*l:O+1<G?g.scrollTop=g.scrollHeight-g.clientHeight:P>L+1&&(g.scrollTop=t.position.y*l)),I=t.Aa,g.style.width=(E=t.Ba)+(t.Of?t.Ab:0)+"px",g.style.height=I+(t.We?t.Ab:0)+"px",n===E&&s===I&&!t.animationManager.zb||(n=U.allocAt(u,c,d,p),t.onViewportBoundsChanged(n,t.viewportBounds,l,C),U.free(n),!1)}function cm(t,e,n){var s=e.layer;null!==s&&s.diagram===t&&(e.isSelected=!1,e.isHighlighted=!1,e.D(2),n&&e.Fj(),0<=(n=s.lc(-1,e,!1))&&t.bb(Me,"parts",s,e,null,n,null),null!==(t=e.layerChanged)&&t(e,s,null))}function ys(t,e,n,s,l,u){if(!e.contains(n)&&(void 0===u&&(u=!1),!s||u||n.canMove()||n.canCopy()))if(void 0===l&&(l=fm(t)),n instanceof Z){if(e.add(n,t.Fd(l,n,n.location)),n instanceof wt&&(null!==n.placeholder||l.dragsMembers))for(u=n.memberParts;u.next();)ys(t,e,u.value,s,l,l.groupsAlwaysMove);for(u=n.linksConnected;u.next();){var c=u.value;if(!e.contains(c)){var d=c.fromNode,p=c.toNode;null!==d&&e.contains(d)&&null!==p&&e.contains(p)&&ys(t,e,c,s,l)}}if(l.dragsTree)for(n=n.Au();n.next();)ys(t,e,n.value,s,l)}else if(n instanceof z)for(e.add(n,t.Fd(l,n)),n=n.labelNodes;n.next();)ys(t,e,n.value,s,l);else n instanceof At||e.add(n,t.Fd(l,n,n.location))}function Rh(t,e,n,s,l){if(null!==e&&0!==e.count){var u=A.alloc(),c=A.alloc();c.assign(n),isNaN(c.x)&&(c.x=0),isNaN(c.y)&&(c.y=0),(n=t.jr)||dm(t,e);for(var d=ce(),p=ce(),g=e.iterator,y=A.alloc();g.next();){var w=g.key,C=g.value;if(w.Tc()){var D=QS(t,w,e);null!==D?d.push(new y0(w,C,D)):(!l||w.canMove())&&(u.assign(D=C.point),t.computeMove(w,u.add(c),s,y),w.location=y,void 0===C.shifted&&(C.shifted=new A),C.shifted.assign(y.je(D)))}else g.key instanceof z&&p.push(g.ra)}for(A.free(y),l=d.length,g=0;g<l;g++)u.assign((w=d[g]).info.point),void 0===w.Eu.shifted&&(w.Eu.shifted=new A),w.node.location=u.add(w.Eu.shifted);for(l=A.alloc(),g=A.alloc(),w=p.length,C=0;C<w;C++){var M=p[C];if((D=M.key)instanceof z)if(D.suspendsRouting){D.ef=null,y=D.fromNode;var E=D.toNode;if(null!==t.draggedLink&&s.dragsLink)if(E=M.value.point,null===D.dragComputation)e.add(D,t.Fd(s,D,c)),Ma(D,c.x-E.x,c.y-E.y);else{M=A.allocAt(0,0),(y=D.i(0))&&y.v()&&M.assign(y);var I=y=A.alloc().assign(M).add(c);s.isGridSnapEnabled&&(s.isGridSnapRealtime||t.lastInput.up)&&n0(t,D,y,I=A.alloc(),s),y.assign(D.dragComputation(D,y,I)).je(M),e.add(D,t.Fd(s,D,y)),Ma(D,y.x-E.x,y.y-E.y),A.free(M),A.free(y),I!==y&&A.free(I)}else null!==y&&(l.assign(y.location),null!==(I=e.I(y))&&l.je(I.point)),null!==E&&(g.assign(E.location),null!==(I=e.I(E))&&g.je(I.point)),null!==y&&null!==E?l.$a(g)?(y=M.value.point,(E=u).assign(l),E.je(y),e.add(D,t.Fd(s,D,l)),Ma(D,E.x,E.y)):(D.suspendsRouting=!1,D.ab()):(M=M.value.point,e.add(D,t.Fd(s,D,y=null!==y?l:null!==E?g:c)),Ma(D,y.x-M.x,y.y-M.y))}else(null===D.fromNode||null===D.toNode)&&(y=M.value.point,e.add(D,t.Fd(s,D,c)),Ma(D,c.x-y.x,c.y-y.y))}A.free(u),A.free(c),A.free(l),A.free(g),It(d),It(p),n||($n(t),pm(t,e))}}function fm(t){var e=t.toolManager.findTool("Dragging");return null!==e?e.dragOptions:t.Em}function n0(t,e,n,s,l){if(void 0===l&&(l=fm(t)),s.assign(n),null!==e){var u=t.grid;t=(e=l.gridSnapCellSize).width,e=e.height;var c=l.gridSnapOrigin,d=c.x;if(c=c.y,l=l.gridSnapCellSpot,null!==u){var p=u.gridCellSize;isNaN(t)&&(t=p.width),isNaN(e)&&(e=p.height),u=u.gridOrigin,isNaN(d)&&(d=u.x),isNaN(c)&&(c=u.y)}(u=A.allocAt(0,0)).pi(0,0,t,e,l),R.so(n.x,n.y,d+u.x,c+u.y,t,e,s),A.free(u)}}function dm(t,e){if(null!==e)for(t.jr=!0,t=e.iterator;t.next();)(e=t.key)instanceof z&&(e.suspendsRouting=!0)}function pm(t,e){if(null!==e){for(e=e.iterator;e.next();){var n=e.key;n instanceof z&&(n.suspendsRouting=!1,rw(n)&&n.ab())}t.jr=!1}}function QS(t,e,n){return null===(e=e.containingGroup)||null===(t=QS(t,e,n))&&null===(t=n.I(e))?null:t}function gm(t,e,n){if(null!==e.diagram&&e.diagram!==t&&Y("Cannot share a Layer with another Diagram: "+e+" of "+e.diagram),null===n?null!==e.diagram&&Y("Cannot add an existing Layer to this Diagram again: "+e):(n.diagram!==t&&Y("Existing Layer must be in this Diagram: "+n+" not in "+n.diagram),e===n&&Y("Cannot move a Layer before or after itself: "+e)),e.diagram!==t){e=e.name,n=(t=t.Ua).count;for(var s=0;s<n;s++)t.K(s).name===e&&Y("Cannot add Layer with the name '"+e+"'; a Layer with the same name is already present in this Diagram.")}}function zo(t,e,n){var s=t.animationManager;if(t.wb||t.cd)t.xa=n,Ka(t),s.zb&&(Nu(s)||s.Wd.add(s.H,"scale",e,t.xa));else if(null===t.Ha)t.xa=n,Ka(t);else{t.wb=!0;var l=t.viewportBounds.copy(),u=t.Ba,c=t.Aa;l.width=t.Ba/e,l.height=t.Aa/e;var d=t.zoomPoint.x,p=t.zoomPoint.y,g=t.contentAlignment;isNaN(d)&&(g.Uc()?g.xf(Fs)?d=0:g.xf(On)&&(d=u-1):d=g.pb()?g.x*(u-1):u/2),isNaN(p)&&(g.Uc()?g.xf(fi)?p=0:g.xf(Ua)&&(p=c-1):p=g.pb()?g.y*(c-1):c/2),null===t.scaleComputation||t.animationManager.defaultAnimation.isAnimating||(n=t.scaleComputation(t,n)),n<t.minScale&&(n=t.minScale),n>t.maxScale&&(n=t.maxScale),u=A.allocAt(t.pa.x+d/e-d/n,t.pa.y+p/e-p/n),t.position=u,A.free(u),t.xa=n,Ka(t),t.onViewportBoundsChanged(l,t.viewportBounds,e,!1),t.wb=!1,Tr(t,!1),s.zb&&(Nu(s)||s.Wd.add(s.H,"scale",e,t.xa)),t.N(),ms(t)}}function Us(t,e){var n=t.Zd;if(null!==n&&n.visible){for(var s=gt.alloc(),l=1,u=1,c=n.R.s,d=c.length,p=0;p<d;p++){var g=c[p],y=Math.abs(g.interval);2>y||(I0(g.figure)?u=u*y/R.Xw(u,y):l=l*y/R.Xw(l,y))}if(s.h(u*(c=n.gridCellSize).width,l*c.height),void 0!==e)l=e.width,u=e.height,t=e.x,c=e.y;else{if((e=U.alloc()).h((t=t.viewportBounds).x,t.y,t.width,t.height),!e.v())return void U.free(e);l=e.width,u=e.height,t=e.x,c=e.y,U.free(e)}n.width=l+2*s.width,n.height=u+2*s.height,e=A.alloc(),R.so(t,c,0,0,s.width,s.height,e),e.offset(-s.width,-s.height),gt.free(s),n.part.location=e,A.free(e)}}function jh(t){var e=t.isModified;t.xw!==e&&(t.xw=e,t.P("Modified"))}function r0(t,e){for(var n=(e=e.R.s).length,s=0;s<n;s++)o0(t,e[s])}function o0(t,e){if(e instanceof Qi){var n=e.element;if(null!==n&&n instanceof HTMLImageElement){n.sg instanceof Q&&n.sg.add(t);var s=e.vg;if(null!==s&&!0===s.Up&&null!==e.diagram&&e.diagram.Fn.add(e),n.Pm)if(n=n.getAttribute("src")||"",null===(s=t.Fg.I(n)))(s=[]).push(e),t.Fg.add(n,s);else{for(t=0;t<s.length;t++)if(s[t]===e)return;s.push(e)}}}}function s0(t,e){if(e instanceof Qi){var n=e.element;if(null!==n&&n instanceof HTMLImageElement&&n.Pm){var s=n.getAttribute("src")||"",l=t.Fg.I(s);if(null!==l)for(var u=0;u<l.length;u++)if(l[u]===e){l.splice(u,1),0===l.length&&(t.Fg.remove(s),n.fq&&n.removeEventListener("load",n.fq),n.Bp&&n.removeEventListener("error",n.Bp),delete n.fq,delete n.Bp,n.sg instanceof Q&&n.sg.remove(t),Rf(s));break}}}}function Ka(t){var e=t.pa,n=t.xa;t.vw.h(e.x,e.y,Math.max(t.Ba,0)/n,Math.max(t.Aa,0)/n)}function a0(t,e){t.Si=!1;var n=t.wp;n.C(e)||(n=n.copy(),t.wp.assign(e),Tr(t,!1),t.P("DocumentBoundsChanged",void 0,n),ms(t))}function mm(t,e){for(var n=t.Uh.iterator;n.next();)P1(t,n.value,e);t.layout&&(e?t.layout.isValidLayout=!1:t.layout.D())}function P1(t,e,n){if(null!==e){for(var s=e.Vk.iterator;s.next();)P1(t,s.value,n);null!==e.layout&&(n?e.layout.isValidLayout=!1:e.layout.D())}}function fp(t,e){if(t.mh&&!t.Ns){var n=t.$;t.$=!0;var s=t.undoManager.transactionLevel,l=t.layout,u=t.animationManager;try{0===s&&(t.undoManager.isInternalTransaction=!0,t.Da("Layout")),1>=s&&!u.defaultAnimation.isAnimating&&!u.zb&&(e||$a(u,"Layout")),t.mh=!1;for(var c=t.Uh.iterator;c.next();)dp(t,c.value,e,s);l.isValidLayout||(!e||l.isRealtime||null===l.isRealtime||0===s?(l.doLayout(t),$n(t),l.isValidLayout=!0):t.mh=!0)}finally{e=t.undoManager.isInternalTransaction,0===s&&(t.eb("Layout"),t.undoManager.isInternalTransaction=!1),!e||0!==s&&1!==s||Wa(u),t.$=n}}}function dp(t,e,n,s){if(null!==e){for(var l=e.Vk.iterator;l.next();)dp(t,l.value,n,s);null===(l=e.layout)||l.isValidLayout||(!n||l.isRealtime||0===s?(e.gh=!e.location.v(),l.doLayout(e),e.D(32),E1(t,e),l.isValidLayout=!0):t.mh=!0)}}function ff(t,e){var n=t.Mv.I(e);return null!==n?n:t.Mv.I(e.toLowerCase())}function pp(t,e){var n=t.Nv.I(e);if(null!==n||null!==(n=t.Nv.I(e.toLowerCase())))return n;Y("Unknown DiagramEvent name: "+e)}function gp(t){if(t.animationManager.isTicking)return!1;var e=t.currentTool;return e!==t.toolManager.findTool("Dragging")||!t.jr||e.isComplexRoutingRealtime}function l0(t,e,n,s){var l=t.Qh;if(null===l&&(t.Qh=l=new qh(t.avoidanceCellSize)),l.Sr||l.group!==n||l.Hx!==s){if(l.mx=Math.max(l.ps+1,Math.floor(t.avoidanceLimit/t.avoidanceCellSize.width)),l.nx=Math.max(l.ps+1,Math.floor(t.avoidanceLimit/t.avoidanceCellSize.height)),null!==n&&(n=N1(t,n)),null===n){e=U.alloc(),t.computeOccupiedArea(e),e.vc(100,100),l.initialize(e);for(var u=t.nodes;u.next();){var c=u.value,d=c.layer;null!==d&&d.visible&&!d.isTemporary&&u0(t,c,s,e)}U.free(e)}else{for(0<n.memberParts.count&&((e=t.computePartsBounds(n.memberParts,!1)).vc(20,20),l.initialize(e)),e=U.alloc(),u=n.memberParts;u.next();)(c=u.value)instanceof Z&&u0(t,c,s,e);U.free(e)}l.group=n,l.Hx=s,l.Sr=!1}else e&&Zs(l);return l}function N1(t,e){return e.avoidable&&!e.isLinkLabel?e:null!==e.containingGroup?N1(t,e.containingGroup):null}function u0(t,e,n,s){if(e!==n&&e.isVisible())if(e.avoidable&&!e.isLinkLabel){var l=(e=e.getAvoidableRect(s)).x,u=e.y;if(tc(t=t.Qh,l,u))for(n=(u-t.Ed)/t.oc|0,s=Math.min((l+e.width-t.Dd)/t.nc|0,t.Wh),e=Math.min((u+e.height-t.Ed)/t.oc|0,t.Xh),l=(l-t.Dd)/t.nc|0;l<=s;l++)if((u=t.Xb[l]).fill)u.fill(Sa,n,e+1);else for(var c=n;c<=e;c++)u[c]=Sa}else if(e instanceof wt)for(e=e.memberParts;e.next();)(l=e.value)instanceof Z&&u0(t,l,n,s)}function ym(t,e){null===t.Qh||t.Qh.Sr||void 0!==e&&(!e.avoidable||e.isLinkLabel)||(t.Qh.Sr=!0)}function df(t){-1===t.ik&&(t.ik=xu(function(){if(-1!==t.ik&&(t.lg(),null!==t.lastInput.event)){var e=t.computeAutoScrollPosition(t.Zo);e.$a(t.position)||(t.position=e,t.lastInput.documentPoint=t.rs(t.Zo),t.doMouseMove(),t.Si=!0,e=U.alloc(),t.computeBounds(e),e.Xc(t.documentBounds),a0(t,e),U.free(e),t.bd=!0,t.nd(),df(t))}},t.Yo))}function Vh(t,e,n){function s(){var y=+new Date;for(u=!0,c.reset();c.next();)if(!c.value[0].Qk){u=!1;break}u||y-g>p?e(n,l,d):mt.requestAnimationFrame(s)}for(var l=n.callback,u=!0,c=t.Fg.iterator;c.next();)if(!c.value[0].Qk){u=!1;break}if("function"!=typeof l||u)return e(n,l,t);var d=t,p=n.callbackTimeout||300,g=+new Date;return mt.requestAnimationFrame(function(){s()}),null}function I1(t,e,n,s){if(t.animationManager.wc(),t.nd(),null===t.Ha)return null;"object"!=typeof e&&Y("properties argument must be an Object.");var l=e.size||null,u=e.scale||null;void 0!==e.scale&&isNaN(e.scale)&&(u="NaN");var c=e.maxSize;void 0===e.maxSize&&(c="SVG"===n?new gt(1/0,1/0):new gt(2e3,2e3));var d=e.position||null,p=e.parts||null,g=void 0===e.padding?1:e.padding,y=e.background||null,w=e.omitTemporary;void 0===w&&(w=!0);var C=e.document||document,D=e.elementFinished||null,M=e.showTemporary;void 0===M&&(M=!w),void 0===(e=e.showGrid)&&(e=M),null!==l&&isNaN(l.width)&&isNaN(l.height)&&(l=null),"number"==typeof g?g=new Ht(g):g instanceof Ht||Y("MakeImage padding must be a Margin or a number."),g.left=Math.max(g.left,0),g.right=Math.max(g.right,0),g.top=Math.max(g.top,0),g.bottom=Math.max(g.bottom,0),t.Zb.Oc(!0);var E=(w=new ro(null,C)).context;if(!(l||u||p||d))return w.width=t.Ba+Math.ceil(g.left+g.right),w.height=t.Aa+Math.ceil(g.top+g.bottom),"SVG"===n?null===s?null:(s.resize(w.width,w.height,w.width,w.height),s.ownerDocument=C,s.po=D,e0(t,s.context,g,new gt(w.width,w.height),t.xa,t.pa,p,y,M,e),s.context):(t.Fm=!1,e0(t,E,g,new gt(w.width,w.height),t.xa,t.pa,p,y,M,e),t.Fm=!0,w.context);var I=t.sp,P=t.documentBounds.copy();if(P.jv(t.ub),M)for(var k=t.Ua.s,b=k.length,O=0;O<b;O++){var L=k[O];if(L.visible&&L.isTemporary)for(var H=(L=L.Ma.s).length,J=0;J<H;J++){var nt=L[J];nt.isInDocumentBounds&&nt.isVisible()&&(nt=nt.actualBounds).v()&&P.Xc(nt)}}if(k=new A(P.x,P.y),null!==p){for(b=new U(0,0,0,0),O=!0,(L=p.iterator).reset();L.next();)(H=L.value)instanceof ut&&(null!==(J=H.layer)&&!J.visible||null!==J&&!M&&J.isTemporary||!H.isVisible()||(H=H.actualBounds).v()&&(O?(O=!1,b.assign(H)):b.Xc(H)));P.width=b.width,P.height=b.height,k.x=b.x,k.y=b.y}return null!==d&&d.v()&&(k=d,u||(u=I)),b=d=0,null!==g&&(d=g.left+g.right,b=g.top+g.bottom),O=L=0,null!==l&&(L=l.width,O=l.height,isFinite(L)&&(L=Math.max(0,L-d)),isFinite(O)&&(O=Math.max(0,O-b))),null!==l&&null!==u?("NaN"===u&&(u=I),l.v()?(l=L,P=O):isNaN(O)?(l=L,P=P.height*u):(l=P.width*u,P=O)):null!==l?l.v()?(u=Math.min(L/P.width,O/P.height),l=L,P=O):isNaN(O)?(l=L,P=P.height*(u=L/P.width)):(l=P.width*(u=O/P.height),P=O):null!==u?"NaN"===u&&c.v()?(u=Math.min((c.width-d)/P.width,(c.height-b)/P.height))>I?(u=I,l=P.width,P=P.height):(l=c.width,P=c.height):(l=P.width*u,P=P.height*u):(u=I,l=P.width,P=P.height),null!==g?(l+=d,P+=b):g=new Ht(0),null!==c&&(I=c.width,c=c.height,isNaN(I)&&(I=2e3),isNaN(c)&&(c=2e3),isFinite(I)&&(l=Math.min(l,I)),isFinite(c)&&(P=Math.min(P,c))),w.width=Math.ceil(l),w.height=Math.ceil(P),"SVG"===n?null===s?null:(s.resize(w.width,w.height,w.width,w.height),s.ownerDocument=C,s.po=D,e0(t,s.context,g,new gt(Math.ceil(l),Math.ceil(P)),u,k,p,y,M,e),s.context):(t.Fm=!1,e0(t,E,g,new gt(Math.ceil(l),Math.ceil(P)),u,k,p,y,M,e),t.Fm=!0,w.context)}ki.className="AnimationTrigger",ki.Default=af,ki.Immediate=ap,ki.Bundled=lm,(_=Gn.prototype).clear=function(){this.Ma.clear(),this.Bn.length=0},_.Le=function(t){this.H=t},_.toString=function(t){void 0===t&&(t=0);var e='Layer "'+this.name+'"';if(0>=t)return e;for(var n=0,s=0,l=0,u=0,c=0,d=this.Ma.iterator;d.next();){var p=d.value;p instanceof wt?l++:p instanceof Z?s++:p instanceof z?u++:p instanceof At?c++:n++}if(d="",0<n&&(d+=n+" Parts "),0<s&&(d+=s+" Nodes "),0<l&&(d+=l+" Groups "),0<u&&(d+=u+" Links "),0<c&&(d+=c+" Adornments "),1<t)for(t=this.Ma.iterator;t.next();)d+="\n    "+(n=t.value).toString(),null!==(s=n.data)&&Cn(s)&&(d+=" #"+Cn(s)),n instanceof Z?d+=" "+vo(s):n instanceof z&&(d+=" "+vo(n.fromNode)+" "+vo(n.toNode));return e+" "+this.Ma.count+": "+d},_.ec=function(t,e,n){if(void 0===e&&(e=null),void 0===n&&(n=null),!1===this.Nh)return null;var s=!1;null!==this.diagram&&this.diagram.viewportBounds.ba(t)&&(s=!0);for(var l=A.alloc(),u=this.Ma.s,c=u.length;c--;){var d=u[c];if((!0!==s||!1!==qa(d))&&d.isVisible()&&(l.assign(t),Jn(l,d.ge),null!==(d=d.ec(l,e,n))&&(null!==e&&(d=e(d)),null!==d&&(null===n||n(d)))))return A.free(l),d}return A.free(l),null},_.di=function(t,e,n,s){if(void 0===e&&(e=null),void 0===n&&(n=null),s instanceof tt||s instanceof Q||(s=new Q),!1===this.Nh)return s;var l=!1;null!==this.diagram&&this.diagram.viewportBounds.ba(t)&&(l=!0);for(var u=A.alloc(),c=this.Ma.s,d=c.length;d--;){var p=c[d];if((!0!==l||!1!==qa(p))&&p.isVisible()){u.assign(t),Jn(u,p.ge);var g=p;p.di(u,e,n,s)&&(null!==e&&(g=e(g)),null===g||null!==n&&!n(g)||s.add(g))}}return A.free(u),s},_.tf=function(t,e,n,s,l){if(void 0===e&&(e=null),void 0===n&&(n=null),void 0===s&&(s=!1),l instanceof tt||l instanceof Q||(l=new Q),!1===this.Nh)return l;var u=!1;null!==this.diagram&&this.diagram.viewportBounds.Ee(t)&&(u=!0);for(var c=this.Ma.s,d=c.length;d--;){var p=c[d];if((!0!==u||!1!==qa(p))&&p.isVisible()){var g=p;p.tf(t,e,n,s,l)&&(null!==e&&(g=e(g)),null===g||null!==n&&!n(g)||l.add(g))}}return l},_.zu=function(t,e,n,s,l,u,c){if(!1===this.Nh)return l;for(var d=this.Ma.s,p=d.length;p--;){var g=d[p];if((!0!==c||!1!==qa(g))&&u(g)&&g.isVisible()){var y=g;g.tf(t,e,n,s,l)&&(null!==e&&(y=e(y)),null===y||null!==n&&!n(y)||l.add(y))}}return l},_.hg=function(t,e,n,s,l,u){if(void 0===n&&(n=null),void 0===s&&(s=null),void 0===l&&(l=!0),!1!==l&&!0!==l&&((l instanceof tt||l instanceof Q)&&(u=l),l=!0),u instanceof tt||u instanceof Q||(u=new Q),!1===this.Nh)return u;var c=!1;null!==this.diagram&&this.diagram.viewportBounds.ba(t)&&(c=!0);for(var d=A.alloc(),p=A.alloc(),g=this.Ma.s,y=g.length;y--;){var w=g[y];if((!0!==c||!1!==qa(w))&&w.isVisible()){d.assign(t),Jn(d,w.ge),p.h(t.x+e,t.y),Jn(p,w.ge);var C=w;w.hg(d,p,n,s,l,u)&&(null!==n&&(C=n(C)),null===C||null!==s&&!s(C)||u.add(C))}}return A.free(d),A.free(p),u},_.Pd=function(t,e){if(this.visible){var n=this.Ma.s,s=n.length;if(0!==s){t=ce();for(var l=ce(),u=0;u<s;u++){var c=n[u];if(c.aw=u,c instanceof z){if(!1===c.xd)continue}else if(c instanceof At&&null!==c.adornedPart)continue;var d=c.actualBounds;c.isVisible()&&kv(d,e)?(c.Pd(!0),t.push(c)):(c.Pd(!1),null!==c.adornments&&0<c.adornments.count&&l.push(c))}for(e=0;e<t.length;e++)for(Ym(n=t[e]),n=n.adornments;n.next();)(s=n.value).measure(1/0,1/0),s.arrange(),s.Pd(!0);for(e=0;e<l.length;e++)Ym(l[e]);It(t),It(l)}}},_.tc=function(t,e,n){if(this.visible&&0!==this.tb&&(void 0===n&&(n=!0),n||!this.isTemporary)){var s=(n=this.Ma.s).length;if(0!==s){var l=Ol(this,t),u=this.Bn;u.length=0;for(var c=e.scale,d=U.alloc(),p=0;p<s;p++)this.$h(t,n[p],e,u,c,d,!0);U.free(d),t.globalAlpha=l}}},_.$h=function(t,e,n,s,l,u,c){if(!c||qa(e)){if(null!==s&&e instanceof z&&(e.isOrthogonal&&s.push(e),!1===e.xd))return;for(c=!1,s=e.containingGroup;null!==s;)c?null!==s.ib&&u.ix(s.ib):null!==s.ib&&(c=!0,u.assign(s.ib)),s=s.containingGroup;var d=e.actualBounds;if(s=!1,c&&e.isVisible()){if(!u.Sc(d))return;s=!u.Ee(d)}s&&(t.save(),t.beginPath(),t.rect(u.x,u.y,u.width,u.height),t.clip()),d.width*l>n.nq||d.height*l>n.nq?e.tc(t,n):(u=e.naturalBounds,0===(l=e.actualBounds).width||0===l.height||isNaN(l.x)||isNaN(l.y)||!e.isVisible()||(n=e.transform,null!==e.areaBackground&&(Si(e,t,e.areaBackground,!0,!0,u,l),t.fillRect(l.x,l.y,l.width,l.height)),null===e.areaBackground&&null===e.background&&(Si(e,t,"rgba(0,0,0,0.3)",!0,!1,u,l),t.fillRect(l.x,l.y,l.width,l.height)),null!==e.background&&(t.transform(n.m11,n.m12,n.m21,n.m22,n.dx,n.dy),Si(e,t,e.background,!0,!1,u,l),t.fillRect(0,0,u.width/2,u.height/2),n.Ur()||t.transform(n.m22*(e=1/(n.m11*n.m22-n.m12*n.m21)),-n.m12*e,-n.m21*e,n.m11*e,e*(n.m21*n.dy-n.m22*n.dx),e*(n.m12*n.dx-n.m11*n.dy))))),s&&(t.restore(),t.Oc(!0))}},_.g=function(t,e,n,s,l){var u=this.diagram;null!==u&&u.bb(re,t,this,e,n,s,l)},_.ii=function(t,e,n){var s=this.Ma;if(e.Ah=this,t>=s.count)t=s.count;else if(s.K(t)===e)return-1;return s.Cb(t,e),e.yo(n),null!==(s=this.diagram)&&(n?s.N():s.ii(e)),um(this,t,e),t},_.lc=function(t,e,n){if(!n&&e.layer!==this&&null!==e.layer)return e.layer.lc(t,e,n);var s=this.Ma;if(0>t||t>=s.length){if(0>(t=s.indexOf(e)))return-1}else if(s.K(t)!==e&&0>(t=s.indexOf(e)))return-1;return e.zo(n),s.mb(t),null!==(s=this.diagram)&&(n?s.N():s.lc(e)),e.Ah=null,t},St.Object.defineProperties(Gn.prototype,{parts:{get:function(){return this.Ma.iterator}},partsBackwards:{get:function(){return this.Ma.iteratorBackwards}},diagram:{get:function(){return this.H}},name:{get:function(){return this.va},set:function(t){var e=this.va;if(e!==t){var n=this.diagram;if(null!==n)for(""===e&&Y("Cannot rename default Layer to: "+t),n=n.layers;n.next();)n.value.name===t&&Y("Layer.name is already present in this diagram: "+t);for(this.va=t,this.g("name",e,t),t=this.Ma.iterator;t.next();)t.value.layerName=this.va}}},opacity:{get:function(){return this.tb},set:function(t){var e=this.tb;e!==t&&((0>t||1<t)&&pe(t,"0 <= value <= 1",Gn,"opacity"),this.tb=t,this.g("opacity",e,t),null!==(t=this.diagram)&&t.N())}},isTemporary:{get:function(){return this.m},set:function(t){var e=this.m;e!==t&&((this.m=t)&&(this.isInDocumentBounds=!1),this.g("isTemporary",e,t))}},visible:{get:function(){return this.u},set:function(t){var e=this.u;if(e!==t){for(this.u=t,this.g("visible",e,t),e=this.Ma.iterator;e.next();)e.value.Ub(t);null!==(t=this.diagram)&&t.N()}}},pickable:{get:function(){return this.Nh},set:function(t){var e=this.Nh;e!==t&&(this.Nh=t,this.g("pickable",e,t))}},isInDocumentBounds:{get:function(){return this.j},set:function(t){this.j!==t&&(this.j=t,null!==this.diagram&&this.diagram.Va())}},allowCopy:{get:function(){return this.zi},set:function(t){var e=this.zi;e!==t&&(this.zi=t,this.g("allowCopy",e,t))}},allowDelete:{get:function(){return this.Ai},set:function(t){var e=this.Ai;e!==t&&(this.Ai=t,this.g("allowDelete",e,t))}},allowTextEdit:{get:function(){return this.Ji},set:function(t){var e=this.Ji;e!==t&&(this.Ji=t,this.g("allowTextEdit",e,t))}},allowGroup:{get:function(){return this.Bi},set:function(t){var e=this.Bi;e!==t&&(this.Bi=t,this.g("allowGroup",e,t))}},allowUngroup:{get:function(){return this.Ki},set:function(t){var e=this.Ki;e!==t&&(this.Ki=t,this.g("allowUngroup",e,t))}},allowLink:{get:function(){return this.Ci},set:function(t){var e=this.Ci;e!==t&&(this.Ci=t,this.g("allowLink",e,t))}},allowRelink:{get:function(){return this.Ei},set:function(t){var e=this.Ei;e!==t&&(this.Ei=t,this.g("allowRelink",e,t))}},allowMove:{get:function(){return this.Di},set:function(t){var e=this.Di;e!==t&&(this.Di=t,this.g("allowMove",e,t))}},allowReshape:{get:function(){return this.Fi},set:function(t){var e=this.Fi;e!==t&&(this.Fi=t,this.g("allowReshape",e,t))}},allowResize:{get:function(){return this.Gi},set:function(t){var e=this.Gi;e!==t&&(this.Gi=t,this.g("allowResize",e,t))}},allowRotate:{get:function(){return this.Hi},set:function(t){var e=this.Hi;e!==t&&(this.Hi=t,this.g("allowRotate",e,t))}},allowSelect:{get:function(){return this.Ii},set:function(t){var e=this.Ii;e!==t&&(this.Ii=t,this.g("allowSelect",e,t))}}}),Gn.prototype.findObjectsNear=Gn.prototype.hg,Gn.prototype.findObjectsIn=Gn.prototype.tf,Gn.prototype.findObjectsAt=Gn.prototype.di,Gn.prototype.findObjectAt=Gn.prototype.ec,Gn.className="Layer",V.prototype.clear=function(){this.animationManager.wc(),this.model.clear(),Fu=null,Fl="",lp(this,!1),this.Fn.clear(),Rf(),this.Fg.clear(),this.Qh=null,this.Va(),this.Za(),this.N()},V.prototype.reset=function(){this.clear(),this.wb=!0,D1(this),Ka(this),this.Mg=!0,_1(this),this.layout=new Lt,this.Mg=!1,this.model=ww(),this.model.undoManager=new Le,this.wb=this.Ym=!1,this.N()},V.prototype.setRTL=function(t){null===(t=void 0===t?this.div:t)&&(t=mt.document.body);var e=hs("div");e.dir="rtl",e.style.cssText="font-size: 14px; width: 1px; height: 1px; position: absolute; top: -1000px; overflow: scroll;",e.textContent="A",t.appendChild(e);var n="reverse";0<e.scrollLeft?n="default":(e.scrollLeft=1,0===e.scrollLeft&&(n="negative")),t.removeChild(e),this.Ht=n},V.prototype.setScrollWidth=function(t){null===(t=void 0===t?this.div:t)&&(t=mt.document.body);var e=0;if(Je){var n=h0;e=Jv,null===n&&((n=h0=hs("p")).style.width="100%",n.style.height="200px",n.style.boxSizing="content-box",(e=Jv=hs("div")).style.position="absolute",e.style.visibility="hidden",e.style.width="200px",e.style.height="150px",e.style.boxSizing="content-box",e.appendChild(n)),e.style.overflow="hidden",t.appendChild(e);var s=n.offsetWidth;e.style.overflow="scroll",s===(n=n.offsetWidth)&&(n=e.clientWidth),t.removeChild(e),0!=(e=s-n)||Ro||(e=11)}this.Ab=e,this.kw=!0},V.prototype.ob=function(t){t.classType===V&&(this.autoScale=t)},V.prototype.toString=function(t){void 0===t&&(t=0);var e="";if(this.div&&this.div.id&&(e=this.div.id),e='Diagram "'+e+'"',0>=t)return e;for(var n=this.Ua.iterator;n.next();)e+="\n  "+n.value.toString(t-1);return e},V.prototype.addEventListener=function(t,e,n,s){t.addEventListener(e,n,{capture:s,passive:!1})},V.prototype.removeEventListener=function(t,e,n,s){t.removeEventListener(e,n,{capture:s})},V.prototype.computePixelRatio=function(){return null!==this.Rh?this.Rh:mt.devicePixelRatio||1},V.prototype.doMouseMove=function(){this.currentTool.doMouseMove()},V.prototype.doMouseDown=function(){this.currentTool.doMouseDown()},V.prototype.doMouseUp=function(){this.currentTool.doMouseUp()},V.prototype.doMouseWheel=function(){this.currentTool.doMouseWheel()},V.prototype.doKeyDown=function(){this.currentTool.doKeyDown()},V.prototype.doKeyUp=function(){this.currentTool.doKeyUp()},V.prototype.doFocus=function(){this.focus()},V.prototype.focus=function(){if(this.Ha)if(this.scrollsPageOnFocus)this.Ha.focus();else{var t=mt.scrollX||mt.pageXOffset,e=mt.scrollY||mt.pageYOffset;this.Ha.focus(),mt.scrollTo(t,e)}},V.prototype.wy=function(){this.H.P("GainedFocus")},V.prototype.vy=function(){this.H.P("LostFocus")},V.prototype.Nw=function(t){if(null!==this.Ha){var e=this.Qt,n=this.Nt;this.Nq=!0;var s=this.documentBounds,l=this.viewportBounds,u=this.mj,c=s.x-u.left,d=s.y-u.top,p=s.width+u.left+u.right,g=s.height+u.top+u.bottom,y=s.right+u.right;u=s.bottom+u.bottom;var w=l.x;s=l.y;var C=l.width,D=l.height,M=l.right,E=l.bottom;l=this.scale;var I=t.scrollLeft;if(this.$m)switch(this.Ht){case"negative":I=I+t.scrollWidth-t.clientWidth;break;case"reverse":I=t.scrollWidth-I-t.clientWidth}var P=I;C<p||D<g?(I=A.allocAt(this.position.x,this.position.y),this.allowHorizontalScroll&&this.Pt!==P&&(I.x=P/l+c,this.Pt=P),this.allowVerticalScroll&&this.Rt!==t.scrollTop&&(I.y=t.scrollTop/l+d,this.Rt=t.scrollTop),this.position=I,A.free(I),this.Ti=this.Nq=!1):(I=A.alloc(),t.$x&&this.allowHorizontalScroll&&(c<w&&(this.position=I.h(P+c,this.position.y)),y>M&&(this.position=I.h(-(e.scrollWidth-this.Ba)+P-this.Ba/l+y,this.position.y))),t.ay&&this.allowVerticalScroll&&(d<s&&(this.position=I.h(this.position.x,t.scrollTop+d)),u>E&&(this.position=I.h(this.position.x,-(e.scrollHeight-this.Aa)+t.scrollTop-this.Aa/l+u))),A.free(I),Fh(this),this.Ti=this.Nq=!1,y=(s=this.documentBounds).right,M=(l=this.viewportBounds).right,u=s.bottom,E=l.bottom,c=s.x,w=l.x,d=s.y,s=l.y,C>=p&&c>=w&&y<=M&&(n.style.width="1px"),D>=g&&d>=s&&u<=E&&(n.style.height="1px"))}},V.prototype.computeBounds=function(t){return void 0===t&&(t=new U),$n(this),Qv(this,t)},V.prototype.computePartsBounds=function(t,e){void 0===e&&(e=!1);var n=null;if(_n(t))for(var s=0;s<t.length;s++){var l=t[s];!e&&l instanceof z||(l.Za(),null===n?n=l.actualBounds.copy():n.Xc(l.actualBounds))}else for(t=t.iterator;t.next();)s=t.value,!e&&s instanceof z||(s.Za(),null===n?n=s.actualBounds.copy():n.Xc(s.actualBounds));return null===n?new U(NaN,NaN,0,0):n},V.prototype.zoomToFit=function(){var t=this.nj;this.nj=Hs,this.scale=ca(this,pf),t!==Hs&&(Tr(this,!1),Ou(this,this.documentBounds,this.Ba/this.xa,this.Aa/this.xa,this.mk,!1)),this.nj=t},(_=V.prototype).kA=function(t,e){void 0===e&&(e=pf);var n=t.width,s=t.height;if(!(0===n||0===s||isNaN(n)&&isNaN(s))){var l=1;if(e===pf||e===vm)if(isNaN(n))l=this.viewportBounds.height*this.scale/s;else if(isNaN(s))l=this.viewportBounds.width*this.scale/n;else{l=this.Ba;var u=this.Aa;l=e===vm?u/s>l/n?(u-(this.We?this.Ab:0))/s:(l-(this.Of?this.Ab:0))/n:Math.min(u/s,l/n)}this.scale=l,this.position=new A(t.x,t.y)}},_.py=function(t,e){this.Za();var n=this.documentBounds,s=this.viewportBounds;this.position=new A(n.x+(t.x*n.width+t.offsetX)-(e.x*s.width-e.offsetX),n.y+(t.y*n.height+t.offsetY)-(e.y*s.height-e.offsetY))},_.gz=function(t){if(t instanceof lt){this.Hp=t;var e=A.alloc();this.Ip=this.Ro(t.ia(je,e)),A.free(e)}else this.Hp=null,this.Ip=Wd},_.wl=function(t,e){if(void 0===e&&(e=!0),e){if((t=Lu(this,t,function(n){return n.part},function(n){return n.canSelect()}))instanceof ut)return t}else if((t=Lu(this,t,function(n){return n.part}))instanceof ut)return t;return null},_.ec=function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=null),$n(this);for(var s=this.Ua.iteratorBackwards;s.next();){var l=s.value;if(l.visible&&null!==(l=l.ec(t,e,n)))return l}return null},_.Uy=function(t,e,n){return void 0===e&&(e=!0),function T1(t,e,n,s,l){for(void 0===n&&(n=null),void 0===s&&(s=null),l instanceof tt||l instanceof Q||(l=new Q),$n(t),t=t.Ua.iteratorBackwards;t.next();){var u=t.value;u.visible&&!u.isTemporary&&u.di(e,n,s,l)}return l}(this,t,function(s){return s.part},e?function(s){return s instanceof ut&&s.canSelect()}:null,n)},_.di=function(t,e,n,s){void 0===e&&(e=null),void 0===n&&(n=null),s instanceof tt||s instanceof Q||(s=new Q),$n(this);for(var l=this.Ua.iteratorBackwards;l.next();){var u=l.value;u.visible&&u.di(t,e,n,s)}return s},_.Ww=function(t,e,n,s){return void 0===e&&(e=!1),void 0===n&&(n=!0),function qv(t,e,n,s,l){var u=null;for(void 0===u&&(u=null),void 0===n&&(n=null),void 0===s&&(s=!1),l instanceof tt||l instanceof Q||(l=new Q),$n(t),t=t.Ua.iteratorBackwards;t.next();){var c=t.value;c.visible&&!c.isTemporary&&c.tf(e,u,n,s,l)}return l}(this,t,function(l){return l instanceof ut&&(!n||l.canSelect())},e,s)},_.tf=function(t,e,n,s,l){void 0===e&&(e=null),void 0===n&&(n=null),void 0===s&&(s=!1),l instanceof tt||l instanceof Q||(l=new Q),$n(this);for(var u=this.Ua.iteratorBackwards;u.next();){var c=u.value;c.visible&&c.tf(t,e,n,s,l)}return l},_.zu=function(t,e,n,s,l,u){var c=new Q;$n(this);for(var d=this.Ua.iteratorBackwards;d.next();){var p=d.value;p.visible&&p.zu(t,e,n,s,c,l,u)}return c},_.Vy=function(t,e,n,s,l){return void 0===n&&(n=!0),void 0===s&&(s=!0),function hf(t,e,n,s,l,u){var c=null;for(void 0===c&&(c=null),void 0===s&&(s=null),void 0===l&&(l=!0),!1!==l&&!0!==l&&((l instanceof tt||l instanceof Q)&&(u=l),l=!0),u instanceof tt||u instanceof Q||(u=new Q),$n(t),t=t.Ua.iteratorBackwards;t.next();){var d=t.value;d.visible&&!d.isTemporary&&d.hg(e,n,c,s,l,u)}return u}(this,t,e,function(u){return u instanceof ut&&(!s||u.canSelect())},n,l)},_.hg=function(t,e,n,s,l,u){void 0===n&&(n=null),void 0===s&&(s=null),void 0===l&&(l=!0),!1!==l&&!0!==l&&((l instanceof tt||l instanceof Q)&&(u=l),l=!0),u instanceof tt||u instanceof Q||(u=new Q),$n(this);for(var c=this.Ua.iteratorBackwards;c.next();){var d=c.value;d.visible&&d.hg(t,e,n,s,l,u)}return u},V.prototype.acceptEvent=function(t){return cf(this,t,t instanceof MouseEvent)},V.prototype.yz=function(t){var e=this.H;if(!this.H.isEnabled)return!1;var n=cf(e,t,!1);switch(n.key=String.fromCharCode(t.which),n.down=!0,t.which){case 8:n.key="Backspace";break;case 33:n.key="PageUp";break;case 34:n.key="PageDown";break;case 35:n.key="End";break;case 36:n.key="Home";break;case 37:n.key="Left";break;case 38:n.key="Up";break;case 39:n.key="Right";break;case 40:n.key="Down";break;case 45:n.key="Insert";break;case 46:n.key="Del";break;case 48:n.key="0";break;case 187:case 61:case 107:n.key="Add";break;case 189:case 173:case 109:n.key="Subtract";break;case 27:n.key="Esc"}return e.doKeyDown(),Oh(n,t)},V.prototype.zz=function(t){var e=this.H;if(!e.isEnabled)return!1;var n=cf(e,t,!1);switch(n.key=String.fromCharCode(t.which),n.up=!0,t.which){case 8:n.key="Backspace";break;case 33:n.key="PageUp";break;case 34:n.key="PageDown";break;case 35:n.key="End";break;case 36:n.key="Home";break;case 37:n.key="Left";break;case 38:n.key="Up";break;case 39:n.key="Right";break;case 40:n.key="Down";break;case 45:n.key="Insert";break;case 46:n.key="Del"}return e.doKeyUp(),Oh(n,t)},V.prototype.Jy=function(t){var e=this.H;if(!e.isEnabled)return!1;var n=cf(e,t,!0);return null!==e.mouseEnter&&e.mouseEnter(n),Oh(n,t)},V.prototype.Ky=function(t){var e=this.H;if(!e.isEnabled)return!1;var n=cf(e,t,!0);return null!==e.mouseLeave&&e.mouseLeave(n),Oh(n,t)},V.prototype.getMouse=function(t){var e=this.Ha;if(null===e)return new A(0,0);var n=e.getBoundingClientRect();return e=t.clientX-this.Ba/n.width*n.left,t=t.clientY-this.Aa/n.height*n.top,null!==this.Bb?Jn(new A(e,t),this.Bb):new A(e,t)},V.prototype.Va=function(){this.Si||(this.Si=!0,this.Mb(!0))},V.prototype.redraw=function(){this.wb||this.cd||(this.N(),ms(this),this.nd())},(_=V.prototype).xz=function(){return this.cg},_.Ey=function(t){void 0===t&&(t=null);var e=this.animationManager,n=e.isEnabled;e.wc(),e.isEnabled=!1,Ll(this),this.Qf=!1,this.Jt=new A(NaN,NaN),e.isEnabled=n,this.cd=!0;var s=this;null!==t&&xu(function(){s.cd=!1,$a(e,"Model"),t(s)},1)},_.Mb=function(t){if(void 0===t&&(t=!1),!0!==this.cg&&!(this.wb||!1===t&&this.cd)){this.cg=!0;var e=this;mt.requestAnimationFrame(function(){e.cg&&e.nd()})}},_.nd=function(){(!this.Nm||this.cg)&&(this.Nm&&(this.Nm=!1),Ll(this))},_.rv=function(t,e){for(t.reset();t.next();){var n=t.value;!n.Tc()||n instanceof wt||(n.mi()?(n.measure(1/0,1/0),n.arrange()):e.add(n))}for(t.reset();t.next();)(n=t.value)instanceof wt&&n.isVisible()&&E1(this,n);for(t.reset();t.next();)(n=t.value)instanceof z&&n.isVisible()&&(n.mi()?(n.measure(1/0,1/0),n.arrange()):e.add(n));for(t.reset();t.next();)(n=t.value)instanceof At&&n.isVisible()&&(n.mi()?(n.measure(1/0,1/0),n.arrange()):e.add(n))},_.Pd=function(t,e,n,s){if(this.Ui||this.animationManager.isAnimating)for(var l=0;l<e;l++)t[l].Pd(n,s)},_.tc=function(t,e){if(null!==this.La){null===this.Ha&&Y("No canvas specified");var n=this.animationManager;if(!n.zb&&(!n.isAnimating||n.isTicking)){var s=new Date;if(cp(this),"0"!==this.La.style.opacity){var l=t!==this.Zb,u=this.Ua.s,c=u.length,d=this;if(this.Pd(u,c,d,d.viewportBounds),l)t.Oc(!0),Fh(this);else if(!this.bd&&void 0===e&&!n.isAnimating)return;c=this.pa;var p=this.xa,g=Math.round(c.x*p)/p,y=Math.round(c.y*p)/p;for((n=this.Bb).reset(),1!==p&&n.scale(p),0===c.x&&0===c.y||n.translate(-g,-y),t.setTransform(p=this.kc,0,0,p,0,0),t.clearRect(0,0,this.Ba,this.Aa),1!==this.tb&&(t.globalAlpha=this.tb),bi(this,t),g=void 0!==e?function(w){if(w.visible&&0!==w.tb){var C=w.Ma.s,D=C.length;if(0!==D){var M=Ol(w,t),E=w.Bn;E.length=0;for(var I=d.scale,P=U.alloc(),k=0;k<D;k++){var b=C[k];e.contains(b)||w.$h(t,b,d,E,I,P,!0)}U.free(P),t.globalAlpha=M}}}:function(w){w.tc(t,d)},c=u.length,y=0;y<c;y++)t.setTransform(p,0,0,p,0,0),t.transform(n.m11,n.m12,n.m21,n.m22,n.dx,n.dy),t.Pc(),g(u[y]);if(u=!1,this.vh?vp(this.vh,this)&&(u=this.Qs()):u=!0,u&&(Dt.prototype.Ld=Dt.prototype.Fw),l?(this.Zb.Oc(!0),Fh(this)):this.bd=this.Ui=!1,u=+new Date-+s,s=this.dw,(l=Sh&&Sh.Rw)||null===this.Rh){for(s[this.sq]=u,this.sq=(this.sq+1)%s.length,n=u=0;n<s.length;n++)u+=s[n];this.rq=u/s.length}if(1!==this.tb&&(t.globalAlpha=1),l)for(t.setTransform(1,0,0,1,0,0),l=0;l<s.length;l++)t.fillText(s[l].toString(),20,150+20*l)}}}},_.Ge=function(t){return this.Ig[t]},_.Fx=function(t,e){"minDrawingLength"===t&&(this.nq=e),this.Ig[t]=e,this.redraw()},_.Ax=function(){this.Ig=new Zr,this.Ig.drawShadows=!0,this.Ig.textGreeking=!0,this.Ig.viewportOptimizations=!(Ro||BS),this.Ig.temporaryPixelRatio=!0,this.Ig.pictureRatioOptimization=!0,this.nq=this.Ig.minDrawingLength=1},_.yl=function(t){return this.Vm[t]},_.Zz=function(t,e){this.Vm[t]=e},_.zx=function(){this.Vm=new Zr,this.Vm.extraTouchArea=10,this.Vm.extraTouchThreshold=10,this.Vm.hasGestureZoom=!0},_.set=function(t){return Object.assign(this,t),this},_.ku=function(t){return this.Vl(t)},_.Vl=function(t){return Lh(this,t),this},_.mu=function(){if(0===this.undoManager.transactionLevel&&0!==this.th.count){for(;0<this.th.count;){var t=this.th;for(this.th=new xt,t=t.iterator;t.next();){var e=t.key;e.Ao(t.value),e.mc(!1)}}this.N()}},_.N=function(t){if(void 0===t)this.bd=!0,this.Mb();else{var e=this.viewportBounds;t.v()&&e.Sc(t)&&(this.bd=!0,this.Mb())}this.P("InvalidateDraw")},V.prototype.invalidateViewport=function(t,e){if(!0!==this.bd){this.bd=!0;var n=!0===this.Ge("temporaryPixelRatio");if(!0===this.Ge("viewportOptimizations")&&this.scrollMode!==yf&&this.mj.bi(0,0,0,0)&&e.width===t.width&&e.height===t.height){var s=this.scale,l=Math.max(t.x,e.x),u=Math.max(t.y,e.y);if(s=U.allocAt(l,u,Math.max(0,Math.min(t.x+t.width,e.x+e.width)-l)*s,Math.max(0,Math.min(t.y+t.height,e.y+e.height)-u)*s),!this.kr&&0<s.width&&0<s.height){if(!(this.cd||(this.cg=!1,null===this.La||(this.cd=!0,this.mu(),this.documentBounds.v()||(l=U.alloc(),a0(this,this.computeBounds(l)),U.free(l)),l=this.Ha,null===l||l instanceof pa)))){var c=this.kc;u=this.Ba*c;var d=this.Aa*c,p=this.scale*c,g=Math.round(Math.round(e.x*p)-Math.round(t.x*p));e=Math.round(Math.round(e.y*p)-Math.round(t.y*p)),t=this.Ux,(p=this.Ov).width!==u&&(p.width=u),p.height!==d&&(p.height=d),t.clearRect(0,0,u,d),p=190*c;var y=70*c,w=Math.max(g,0),C=Math.max(e,0),D=Math.floor(u-w),M=Math.floor(d-C);t.drawImage(l.Sa,w,C,D,M,0,0,D,M),vp(this.vh,this)&&t.clearRect(0,0,p,y),l=ce(),t=ce(),M=Math.abs(g),D=Math.abs(e);var E=0===w?0:u-M;w=A.allocAt(E,0),M=A.allocAt(M+E,d),t.push(new U(Math.min(w.x,M.x),Math.min(w.y,M.y),Math.abs(w.x-M.x),Math.abs(w.y-M.y)));var I=this.Bb;if(I.reset(),I.scale(c,c),1!==this.xa&&I.scale(this.xa),(0!==(c=this.pa).x||0!==c.y)&&isFinite(c.x)&&isFinite(c.y)&&I.translate(-c.x,-c.y),Jn(w,I),Jn(M,I),l.push(new U(Math.min(w.x,M.x),Math.min(w.y,M.y),Math.abs(w.x-M.x),Math.abs(w.y-M.y))),w.h(0,E=0===C?0:d-D),M.h(u,D+E),t.push(new U(Math.min(w.x,M.x),Math.min(w.y,M.y),Math.abs(w.x-M.x),Math.abs(w.y-M.y))),Jn(w,I),Jn(M,I),l.push(new U(Math.min(w.x,M.x),Math.min(w.y,M.y),Math.abs(w.x-M.x),Math.abs(w.y-M.y))),vp(this.vh,this)&&(w.h(u=0<g?0:-g,d=0<e?0:-e),M.h(p+u,y+d),t.push(new U(Math.min(w.x,M.x),Math.min(w.y,M.y),Math.abs(w.x-M.x),Math.abs(w.y-M.y))),Jn(w,I),Jn(M,I),l.push(new U(Math.min(w.x,M.x),Math.min(w.y,M.y),Math.abs(w.x-M.x),Math.abs(w.y-M.y)))),A.free(w),A.free(M),hp(this,!1,!0),null===this.La&&Y("No div specified"),null===this.Ha&&Y("No canvas specified"),!this.animationManager.zb&&(u=this.Zb,this.bd)){for(cp(this),d=this.kc,u.setTransform(1,0,0,1,0,0),u.clearRect(0,0,this.Ba*d,this.Aa*d),u.drawImage(this.Ov.Sa,0<g?0:Math.round(-g),0<e?0:Math.round(-e)),g=this.pa,c=this.xa,p=Math.round(g.x*c)/c,y=Math.round(g.y*c)/c,(e=this.Bb).reset(),1!==c&&e.scale(c),0===g.x&&0===g.y||e.translate(-p,-y),u.save(),u.beginPath(),g=t.length,c=0;c<g;c++)0!==(p=t[c]).width&&0!==p.height&&u.rect(Math.floor(p.x),Math.floor(p.y),Math.ceil(p.width),Math.ceil(p.height));for(u.clip(),u.setTransform(d,0,0,d,0,0),u.transform(e.m11,e.m12,e.m21,e.m22,e.dx,e.dy),u.Pc(),this.Pd(e=this.Ua.s,g=e.length,this,this.viewportBounds),bi(this,u),u.globalAlpha=this.tb,d=0;d<g;d++)if(p=l,(c=e[d]).visible&&0!==c.tb){y=Ol(c,u),(C=c.Bn).length=0,w=this.scale,D=U.alloc(),I=(M=c.Ma.s).length,E=p.length;for(var P=0;P<I;P++){var k=M[P],b=Xh(k,k.actualBounds);t:{for(var O=2/w,L=4/w,H=0;H<E;H++){var J=p[H];if(0!==J.width&&0!==J.height&&b.Hu(J.x-O,J.y-O,J.width+L,J.height+L)){b=!0;break t}}b=!1}b&&c.$h(u,k,this,C,w,D,!0)}U.free(D),u.globalAlpha=y}u.restore(),u.Oc(!0),this.vh&&vp(this.vh,this)&&this.Qs(),this.bd=this.Ui=!1,this.Jo()}It(l),It(t),this.cd=!1}}else this.nd();U.free(s),n&&(uf(this),this.nd(),up(this,!0))}else n?(uf(this),this.nd(),up(this,!0)):this.nd()}},(_=V.prototype).add=function(t){var e=t.diagram;if(e!==this&&(null!==e&&Y("Cannot add part "+t.toString()+" to "+this.toString()+". It is already a part of "+e.toString()),null===(e=this.Ij(t.layerName))&&(e=this.Ij("")),null===e&&Y('Cannot add a Part when unable find a Layer named "'+t.layerName+'" and there is no default Layer'),t.layer!==e)){var n=e.ii(99999999,t,t.diagram===this);0<=n&&this.bb(un,"parts",e,null,t,null,n),e.isTemporary||this.Va(),t.D(1),null!==(n=t.layerChanged)&&n(t,null,e)}},_.ii=function(t){this.partManager.ii(t);var e=this;Kn(t,function(n){r0(e,n)}),(t instanceof At||t instanceof wt&&null!==t.placeholder)&&t.w(),null!==t.data&&Kn(t,function(n){dw(e.partManager,n)}),!0!==ii(t)&&!0!==Wl(t)||this.te.add(t),K0(t,!0,this),Hp(t)?(t.actualBounds.v()&&this.N(Xh(t,t.actualBounds)),this.Va()):t.isVisible()&&t.actualBounds.v()&&this.N(Xh(t,t.actualBounds)),this.Mb()},_.lc=function(t){t.zj(),this.partManager.lc(t);var e=this;null!==t.data&&Kn(t,function(n){Jf(e.partManager,n,e)}),this.te.remove(t),Hp(t)?(t.actualBounds.v()&&this.N(Xh(t,t.actualBounds)),this.Va()):t.isVisible()&&t.actualBounds.v()&&this.N(Xh(t,t.actualBounds)),this.Mb()},_.remove=function(t){cm(this,t,!0)},_.hs=function(t,e){if(void 0===e&&(e=!1),_n(t))for(var n=t.length,s=0;s<n;s++){var l=t[s];e&&!l.canDelete()||this.remove(l)}else for((n=new Q).addAll(t),t=n.iterator;t.next();)n=t.value,e&&!n.canDelete()||this.remove(n)},_.Ej=function(t,e,n){return void 0===n&&(n=!1),this.partManager.Ej(t,e,n)},V.prototype.moveParts=function(t,e,n,s){if(void 0===n&&(n=!1),void 0===s&&(s=fm(this)),null!==this.toolManager){var l=new xt;if(null!==t)if(_n(t))for(var u=0;u<t.length;u++)ys(this,l,t[u],n,s);else for(t=t.iterator;t.next();)ys(this,l,t.value,n,s);else{for(t=this.parts;t.next();)ys(this,l,t.value,n,s);for(t=this.nodes;t.next();)ys(this,l,t.value,n,s);for(t=this.links;t.next();)ys(this,l,t.value,n,s)}Rh(this,l,e,s,n)}},V.prototype.computeMove=function(t,e,n,s){if(void 0===s&&(s=new A),s.assign(e),null===t)return s;var l=e,u=n.isGridSnapEnabled;u&&(n.isGridSnapRealtime||this.lastInput.up)&&n0(this,t,e,l=A.alloc(),n),n=null!==t.dragComputation?t.dragComputation(t,e,l):l;var c=t.minLocation,d=c.x;isNaN(d)&&(d=u?Math.round(1e3*t.location.x)/1e3:t.location.x),c=c.y,isNaN(c)&&(c=u?Math.round(1e3*t.location.y)/1e3:t.location.y);var p=t.maxLocation,g=p.x;return isNaN(g)&&(g=u?Math.round(1e3*t.location.x)/1e3:t.location.x),p=p.y,isNaN(p)&&(p=u?Math.round(1e3*t.location.y)/1e3:t.location.y),s.h(Math.max(d,Math.min(n.x,g)),Math.max(c,Math.min(n.y,p))),l!==e&&A.free(l),s},(_=V.prototype).Fd=function(t,e,n){if(void 0===n)return new Rl(Va);var s=t.isGridSnapEnabled;return t.groupsSnapMembers||null===e.containingGroup||(s=!1),new Rl(s?new A(Math.round(1e3*n.x)/1e3,Math.round(1e3*n.y)/1e3):n.copy())},_.pl=function(t){gm(this,t,null),t.Le(this);var e=this.Ua,n=e.count-1;if(!t.isTemporary)for(;0<=n&&e.K(n).isTemporary;)n--;return e.Cb(n+1,t),null!==this.ac&&this.bb(un,"layers",this,null,t,null,n+1),this.N(),this.Va(),this},_.Aw=function(t,e){gm(this,t,e),t.Le(this);var n=this.Ua,s=n.indexOf(t);0<=s&&(n.remove(t),null!==this.ac&&this.bb(Me,"layers",this,t,null,s,null));var u,l=n.count;for(u=0;u<l;u++)if(n.K(u)===e){n.Cb(u,t);break}return null!==this.ac&&this.bb(un,"layers",this,null,t,null,u),this.N(),0>s&&this.Va(),this},_.jy=function(t,e){gm(this,t,e),t.Le(this);var n=this.Ua,s=n.indexOf(t);0<=s&&(n.remove(t),null!==this.ac&&this.bb(Me,"layers",this,t,null,s,null));var u,l=n.count;for(u=0;u<l;u++)if(n.K(u)===e){n.Cb(u+1,t);break}return null!==this.ac&&this.bb(un,"layers",this,null,t,null,u+1),this.N(),0>s&&this.Va(),this},_.Rz=function(t){if(t.diagram!==this&&Y("Cannot remove a Layer from another Diagram: "+t+" of "+t.diagram),""!==t.name){var e=this.Ua,n=e.indexOf(t);if(e.remove(t)){for(e=t.Ma.copy().iterator;e.next();){var s=e.value,l=s.layerName;s.layerName=l!==t.name?l:""}null!==this.ac&&this.bb(Me,"layers",this,t,null,n,null),this.N(),this.Va()}}},_.Ij=function(t){for(var e=this.layers;e.next();){var n=e.value;if(n.name===t)return n}return null},_.Cw=function(t){return null===this.bf&&(this.bf=new tt),this.bf.add(t),this.model.Ug(t),this},_.Tz=function(t){null!==this.bf&&(this.bf.remove(t),0===this.bf.count&&(this.bf=null)),this.model.ak(t)},_.Ug=function(t){return null===this.qg&&(this.qg=new tt),this.qg.add(t),this},_.ak=function(t){null!==this.qg&&(this.qg.remove(t),0===this.qg.count&&(this.qg=null))},_.Cr=function(t){if(this.skipsUndoManager||this.model.skipsUndoManager||this.model.undoManager.Fu(t),t.change!==ps&&(this.isModified=!0),null!==this.qg)for(var e=this.qg,n=e.length,s=0;s<n;s++)e.K(s)(t)},_.bb=function(t,e,n,s,l,u,c){void 0===u&&(u=null),void 0===c&&(c=null);var d=new Ne;d.diagram=this,d.change=t,d.propertyName=e,d.object=n,d.oldValue=s,d.oldParam=u,d.newValue=l,d.newParam=c,this.Cr(d)},_.g=function(t,e,n,s,l){this.bb(re,t,this,e,n,s,l)},V.prototype.changeState=function(t,e){if(null!==t&&t.diagram===this){var n=this.skipsModelSourceBindings;try{this.skipsModelSourceBindings=!0;var s=t.change;if(s===re){var l=t.object;if(se(l,t.propertyName,t.I(e)),l instanceof lt){var u=l.part;null!==u&&u.Rb()}this.isModified=!0}else if(s===un){var c=t.object,d=t.newParam,p=t.newValue;if(c instanceof $)if("number"==typeof d&&p instanceof lt){e?c.lc(d):c.Cb(d,p);var g=c.part;null!==g&&g.Rb()}else"number"==typeof d&&p instanceof cn&&(p.isRow?V1(c,d,e?void 0:p):B1(c,d,e?void 0:p));else if(c instanceof Gn){var y=!0===t.oldParam;"number"==typeof d&&p instanceof ut&&(e?(p.isSelected=!1,p.isHighlighted=!1,p.Rb(),c.lc(y?d:-1,p,y)):c.ii(d,p,y))}else c instanceof V?"number"==typeof d&&p instanceof Gn&&(e?this.Ua.mb(d):(p.Le(this),this.Ua.Cb(d,p))):Y("unknown ChangedEvent.Insert object: "+t.toString());this.isModified=!0}else if(s===Me){var w=t.object,C=t.oldParam,D=t.oldValue;if(w instanceof $)"number"==typeof C&&D instanceof lt?e?w.Cb(C,D):w.lc(C):"number"==typeof C&&D instanceof cn&&(D.isRow?V1(w,C,e?D:void 0):B1(w,C,e?D:void 0));else if(w instanceof Gn){var M=!0===t.newParam;"number"==typeof C&&D instanceof ut&&(e?0>w.Ma.indexOf(D)&&w.ii(C,D,M):(D.isSelected=!1,D.isHighlighted=!1,D.Rb(),w.lc(M?C:-1,D,M)))}else w instanceof V?"number"==typeof C&&D instanceof Gn&&(e?(D.Le(this),this.Ua.Cb(C,D)):this.Ua.mb(C)):Y("unknown ChangedEvent.Remove object: "+t.toString());this.isModified=!0}else s!==ps&&Y("unknown ChangedEvent: "+t.toString())}finally{this.skipsModelSourceBindings=n}}},V.prototype.Da=function(t){return this.undoManager.Da(t)},V.prototype.eb=function(t){return this.undoManager.eb(t)},V.prototype.Bf=function(){return this.undoManager.Bf()},V.prototype.commit=function(t,e){void 0===e&&(e="");var n=this.skipsUndoManager;null===e&&(this.skipsUndoManager=!0,e=""),this.undoManager.Da(e);var s=!1;try{t(this),s=!0}finally{s?this.undoManager.eb(e):this.undoManager.Bf(),this.skipsUndoManager=n}},V.prototype.updateAllTargetBindings=function(t){this.partManager.updateAllTargetBindings(t)},V.prototype.Uo=function(){this.partManager.Uo()},V.prototype.onViewportBoundsChanged=function(t,e,n,s){if(!t.C(e)){void 0===s&&(s=!1),s||ms(this),Fh(this);var l=this.layout;null===l||!l.isViewportSized||this.autoScale!==Rr||s||t.width===e.width&&t.height===e.height||l.D(),l=this.currentTool,!0===this.Kk&&l instanceof Te&&(this.lastInput.documentPoint=this.rs(this.lastInput.viewPoint),qg(l,this)),this.wb||this.invalidateViewport(t,e),Us(this),this.kd.scale=n,this.kd.position.x=t.x,this.kd.position.y=t.y,this.kd.bounds.assign(t),this.kd.Hw.width=Math.round(t.width*n),this.kd.Hw.height=Math.round(t.height*n),this.kd.sx.width=this.Ba,this.kd.sx.height=this.Aa,this.kd.lx=s,this.P("ViewportBoundsChanged",this.kd,t),this.isVirtualized&&this.links.each(function(u){u.isAvoiding&&u.actualBounds.Sc(e)&&u.ab()})}},V.prototype.clearSelection=function(t){void 0===t&&(t=!1);var e=this.selection;if(0!==e.count){t||this.P("ChangingSelection",e);for(var n=e.Ea(),s=n.length,l=0;l<s;l++)n[l].isSelected=!1;e.ja(),e.clear(),e.freeze(),t||this.P("ChangedSelection",e)}},V.prototype.select=function(t){null!==t&&t.diagram===this&&(!t.isSelected||1<this.selection.count)&&(this.P("ChangingSelection",this.selection),this.clearSelection(!0),t.isSelected=!0,this.P("ChangedSelection",this.selection))},V.prototype.Yz=function(t){if(this.P("ChangingSelection",this.selection),this.clearSelection(!0),_n(t))for(var e=t.length,n=0;n<e;n++){var s=t[n];s instanceof ut||Y("Diagram.selectCollection given something that is not a Part: "+s),s.isSelected=!0}else for(t=t.iterator;t.next();)(e=t.value)instanceof ut||Y("Diagram.selectCollection given something that is not a Part: "+e),e.isSelected=!0;this.P("ChangedSelection",this.selection)},V.prototype.clearHighlighteds=function(){var t=this.highlighteds;if(0<t.count){for(var e=t.Ea(),n=e.length,s=0;s<n;s++)e[s].isHighlighted=!1;t.ja(),t.clear(),t.freeze()}},(_=V.prototype).qz=function(t){null!==t&&t.diagram===this&&(!t.isHighlighted||1<this.highlighteds.count)&&(this.clearHighlighteds(),t.isHighlighted=!0)},_.rz=function(t){t=(new Q).addAll(t);for(var e=this.highlighteds.copy().Ko(t).iterator;e.next();)e.value.isHighlighted=!1;for(t=t.iterator;t.next();)(e=t.value)instanceof ut||Y("Diagram.highlightCollection given something that is not a Part: "+e),e.isHighlighted=!0},_.scroll=function(t,e,n){void 0===n&&(n=1);var s="up"===e||"down"===e,l=0;if("pixel"===t)l=n;else if("line"===t)l=n*(s?this.scrollVerticalLineChange:this.scrollHorizontalLineChange);else if("page"===t)t=s?this.viewportBounds.height:this.viewportBounds.width,0!=(t*=this.scale)&&(l=n*Math.max(t-(s?this.scrollVerticalLineChange:this.scrollHorizontalLineChange),0));else{if("document"===t)return l=this.documentBounds,n=this.viewportBounds,s=A.alloc(),"up"===e?this.position=s.h(n.x,l.y):"left"===e?this.position=s.h(l.x,n.y):"down"===e?this.position=s.h(n.x,l.bottom-n.height):"right"===e&&(this.position=s.h(l.right-n.width,n.y)),void A.free(s);Y("scrolling unit must be 'pixel', 'line', 'page', or 'document', not: "+t)}l/=this.scale,n=this.position.copy(),"up"===e?n.y=this.position.y-l:"down"===e?n.y=this.position.y+l:"left"===e?n.x=this.position.x-l:"right"===e?n.x=this.position.x+l:Y("scrolling direction must be 'up', 'down', 'left', or 'right', not: "+e),this.position=n},_.bv=function(t){var e=this.viewportBounds;e.Ee(t)||((t=t.center).x-=e.width/2,t.y-=e.height/2,this.position=t)},_.Dr=function(t){var e=this.viewportBounds;(t=t.center).x-=e.width/2,t.y-=e.height/2,this.position=t},_.Ro=function(t){var e=this.Bb;e.reset(),1!==this.xa&&e.scale(this.xa);var n=this.pa;return(0!==n.x||0!==n.y)&&isFinite(n.x)&&isFinite(n.y)&&e.translate(-n.x,-n.y),t.copy().transform(this.Bb)},_.gA=function(t){var e=this.Bb,n=t.x,s=t.y,l=n+t.width,u=s+t.height,c=e.m11,d=e.m12,p=e.m21,g=e.m22,y=e.dx,w=e.dy,C=n*c+s*p+y;e=n*d+s*g+w;var D=l*c+s*p+y;return t=l*d+s*g+w,s=n*c+u*p+y,n=n*d+u*g+w,c=l*c+u*p+y,l=l*d+u*g+w,u=Math.min(C,D),C=Math.max(C,D),D=Math.min(e,t),e=Math.max(e,t),u=Math.min(u,s),C=Math.max(C,s),D=Math.min(D,n),e=Math.max(e,n),u=Math.min(u,c),C=Math.max(C,c),new U(u,D=Math.min(D,l),C-u,(e=Math.max(e,l))-D)},_.rs=function(t){var e=this.Bb;e.reset(),1!==this.xa&&e.scale(this.xa);var n=this.pa;return(0!==n.x||0!==n.y)&&isFinite(n.x)&&isFinite(n.y)&&e.translate(-n.x,-n.y),Jn(t.copy(),this.Bb)},V.prototype.doModelChanged=function(t){var e=this;if(t.model===this.model){var n=t.change,s=t.propertyName;if(n===ps&&"S"===s[0])if("StartingFirstTransaction"===s){var l=this;(t=this.toolManager).mouseDownTools.each(function(p){p.diagram=l}),t.mouseMoveTools.each(function(p){p.diagram=l}),t.mouseUpTools.each(function(p){p.diagram=l}),this.cd||this.Qf||(this.xk=!0,this.Nm&&(this.cg=!0))}else"StartingUndo"===s||"StartingRedo"===s?((t=this.animationManager).defaultAnimation.isAnimating&&!this.skipsUndoManager&&t.wc(),this.P("ChangingSelection",this.selection)):"StartedTransaction"===s&&(t=this.animationManager).defaultAnimation.isAnimating&&!this.skipsUndoManager&&t.wc();else if(this.$){this.$=!1;try{if(""===t.modelChange&&n===ps){("FinishedUndo"===s||"FinishedRedo"===s)&&(this.P("ChangedSelection",this.selection),$n(this));var u=this.animationManager;"RolledBackTransaction"===s&&u.wc(),this.xk=!0,this.nd(),0!==this.undoManager.transactionLevel&&1!==this.undoManager.transactionLevel||Wa(u),"CommittedTransaction"===s&&this.undoManager.isJustDiscarded&&(this.se=Math.min(this.se,this.undoManager.historyIndex-1)),"CommittedTransaction"!==s&&"RolledBackTransaction"!==s||!this.undoManager.isPendingUnmodified||setTimeout(function(){e.isModified=!1},1);var c=t.isTransactionFinished;if(c&&(jh(this),this.Zr.clear(),function np(t){for(t=t.yi.iterator;t.next();)t.value.Mk=!1}(this.animationManager)),!this.wt&&c&&this.lastInput.targetDiagram){this.wt=!0;var d=this;xu(function(){d.currentTool.standardMouseOver(),d.wt=!1},10)}}}finally{this.$=!0}}}},V.prototype.Od=function(){this.partManager.Od()},V.prototype.vj=function(t,e){this.Rd.vj(t,e)},V.prototype.xj=function(t,e){this.Rd.xj(t,e)},V.prototype.findPartForKey=function(t){return this.partManager.findPartForKey(t)},V.prototype.Lb=function(t){return this.partManager.Lb(t)},V.prototype.findLinkForKey=function(t){return this.partManager.findLinkForKey(t)},(_=V.prototype).Ec=function(t){return this.partManager.Ec(t)},_.ci=function(t){return this.partManager.ci(t)},_.Dc=function(t){return this.partManager.Dc(t)},_.Jr=function(t){for(var e=[],n=0;n<arguments.length;++n)e[n]=arguments[n];return this.partManager.Jr.apply(this.partManager,e instanceof Array?e:ja(Wx(e)))},_.Ir=function(t){for(var e=[],n=0;n<arguments.length;++n)e[n]=arguments[n];return this.partManager.Ir.apply(this.partManager,e instanceof Array?e:ja(Wx(e)))},_.Za=function(){if(this.Si){var t=U.alloc();a0(this,this.computeBounds(t)),U.free(t)}},_.$y=function(){for(var t=new Q,e=this.nodes;e.next();){var n=e.value;n.isTopLevel&&t.add(n)}for(e=this.links;e.next();)(n=e.value).isTopLevel&&t.add(n);return t.iterator},_.Zy=function(){return this.Uh.iterator},_.Bz=function(t){$n(this),t&&mm(this,!0),this.cd?fp(this,!1):(this.xk=!0,Ll(this))},_.fz=function(){for(var t=new tt,e=this.nodes;e.next();){var n=e.value;n.isTopLevel&&null===n.$g()&&t.add(n)}return t.iterator},_.wj=function(t,e){return null!==(t=pp(this,t))&&t.add(e),this},_.Il=function(t,e){null!==(t=pp(this,t))&&t.remove(e)},_.P=function(t,e,n){var s=pp(this,t),l=new Jc;if(l.diagram=this,null!==(t=ff(this,t))&&(l.name=t),void 0!==e&&(l.subject=e),void 0!==n&&(l.parameter=n),1===(e=s.length))s.K(0)(l);else if(0!==e)for(s=s.Ea(),n=0;n<e;n++)(0,s[n])(l)},_.Pj=function(t,e){return l0(this,!1,null,e||null).Pj(t.x,t.y,t.width,t.height)},V.prototype.computeOccupiedArea=function(t){return this.isVirtualized?this.viewportBounds.copy():this.Si?Qv(this,t):t.assign(this.documentBounds)},V.prototype.Fr=function(t){this.Zo.assign(t),this.computeAutoScrollPosition(this.Zo).$a(this.position)?this.lg():df(this)},V.prototype.lg=function(){-1!==this.ik&&(mt.clearTimeout(this.ik),this.ik=-1)},V.prototype.computeAutoScrollPosition=function(t){var e=this.position,n=this.$o;if(0>=n.top&&0>=n.left&&0>=n.right&&0>=n.bottom)return e;var s=this.viewportBounds,l=this.scale;s=U.allocAt(0,0,s.width*l,s.height*l);var u=A.allocAt(0,0);if(t.x>=s.x&&t.x<s.x+n.left&&this.allowHorizontalScroll){var c=Math.max(this.scrollHorizontalLineChange,1);u.x-=c|=0,t.x<s.x+n.left/2&&(u.x-=c),t.x<s.x+n.left/4&&(u.x-=4*c)}else t.x<=s.x+s.width&&t.x>s.x+s.width-n.right&&this.allowHorizontalScroll&&(c=Math.max(this.scrollHorizontalLineChange,1),u.x+=c|=0,t.x>s.x+s.width-n.right/2&&(u.x+=c),t.x>s.x+s.width-n.right/4&&(u.x+=4*c));return t.y>=s.y&&t.y<s.y+n.top&&this.allowVerticalScroll?(c=Math.max(this.scrollVerticalLineChange,1),u.y-=c|=0,t.y<s.y+n.top/2&&(u.y-=c),t.y<s.y+n.top/4&&(u.y-=4*c)):t.y<=s.y+s.height&&t.y>s.y+s.height-n.bottom&&this.allowVerticalScroll&&(c=Math.max(this.scrollVerticalLineChange,1),u.y+=c|=0,t.y>s.y+s.height-n.bottom/2&&(u.y+=c),t.y>s.y+s.height-n.bottom/4&&(u.y+=4*c)),u.$a(Va)||(e=new A(e.x+u.x/l,e.y+u.y/l)),U.free(s),A.free(u),e},(_=V.prototype).bs=function(){return null},_.Nu=function(){return null},_.ny=function(t,e){this.Yx.add(t,e)},_.lu=function(t){(this.tw=t)||this.nodes.each(function(e){e instanceof wt&&(e.Dp=null)})},_.Dz=function(t){return Je?(void 0===t&&(t={}),t.returnType="Image",this.ox(t)):null},_.ox=function(t){return void 0===t&&(t={}),Vh(this,this.Ez,t)},_.Ez=function(t,e,n){var s=I1(n,t,"canvas",null);if(null===s)return null;var l=null;if(null!==(n=s.Z.canvas))switch(l=t.returnType,l=void 0===l?"string":l.toLowerCase(),l){case vf+"data":l=s.getImageData(0,0,n.width,n.height);break;case vf:(s=(t.document||document).createElement("img")).src=n.toDataURL(t.type,t.details),l=s;break;case"blob":return"function"!=typeof e&&Y('Error: Diagram.makeImageData called with "returnType: toBlob", but no required "callback" function property defined.'),"function"==typeof n.toBlob?(n.toBlob(e,t.type,t.details),"toBlob"):"function"==typeof n.msToBlob?(e(n.msToBlob()),"msToBlob"):(e(null),null);default:l=n.toDataURL(t.type,t.details)}return"function"==typeof e?(e(l),null):l},St.Object.defineProperties(V.prototype,{div:{get:function(){return this.La},set:function(t){if(this.La!==t){var e=this.La;null!==e?(e.H=void 0,e.goDiagram=void 0,e.go=void 0,e.innerHTML="",null!==this.Ha&&(this.removeEventListener(e=this.Ha.Sa,"pointermove",this.Xj,!1),this.removeEventListener(e,"pointerdown",this.Wj,!1),this.removeEventListener(e,"pointerup",this.Zj,!1),this.removeEventListener(e,"pointerout",this.Yj,!1),this.Ha.Pw()),this.cl&&(this.cl.disconnect(),this.cl=null),null!==(e=this.toolManager)&&(e.mouseDownTools.each(function(n){n.cancelWaitAfter()}),e.mouseMoveTools.each(function(n){n.cancelWaitAfter()}),e.mouseUpTools.each(function(n){n.cancelWaitAfter()})),e.cancelWaitAfter(),this.currentTool.doCancel(),this.Ha=null,this.removeEventListener(mt,"resize",this.sv,!1),this.removeEventListener(mt,"wheel",this.Sj,!0),bh===this&&(bh=null)):this.Qf=!1,this.La=null,null!==t&&((e=t.H)&&(e.div=null),m0(this,t),this.redraw())}}},Ew:{get:function(){return this.rq}},ji:{get:function(){return this.Qf}},draggedLink:{get:function(){return this.Ps},set:function(t){this.Ps!==t&&(this.Ps=t,null!==t&&(this.At=t.fromPort,this.Bt=t.toPort))}},tx:{get:function(){return this.At},set:function(t){this.At=t}},ux:{get:function(){return this.Bt},set:function(t){this.Bt=t}},animationManager:{get:function(){return this.Rd}},undoManager:{get:function(){return this.ac.undoManager}},skipsUndoManager:{get:function(){return this.Mg},set:function(t){this.Mg=t,this.ac.skipsUndoManager=t}},delaysLayout:{get:function(){return this.Ns},set:function(t){this.Ns=t}},opacity:{get:function(){return this.tb},set:function(t){var e=this.tb;e!==t&&((0>t||1<t)&&pe(t,"0 <= value <= 1",V,"opacity"),this.tb=t,this.g("opacity",e,t),this.N())}},validCycle:{get:function(){return this.bu},set:function(t){var e=this.bu;e!==t&&(this.bu=t,this.g("validCycle",e,t))}},layers:{get:function(){return this.Ua.iterator}},isModelReadOnly:{get:function(){var t=this.ac;return null!==t&&t.isReadOnly},set:function(t){var e=this.ac;null!==e&&(e.isReadOnly=t)}},isReadOnly:{get:function(){return this.xg},set:function(t){var e=this.xg;e!==t&&(this.xg=t,this.g("isReadOnly",e,t))}},isEnabled:{get:function(){return this.Ad},set:function(t){var e=this.Ad;e!==t&&(this.Ad=t,this.g("isEnabled",e,t))}},allowClipboard:{get:function(){return this.ws},set:function(t){var e=this.ws;e!==t&&(this.ws=t,this.g("allowClipboard",e,t))}},allowCopy:{get:function(){return this.zi},set:function(t){var e=this.zi;e!==t&&(this.zi=t,this.g("allowCopy",e,t))}},allowDelete:{get:function(){return this.Ai},set:function(t){var e=this.Ai;e!==t&&(this.Ai=t,this.g("allowDelete",e,t))}},allowDragOut:{get:function(){return this.xs},set:function(t){var e=this.xs;e!==t&&(this.xs=t,this.g("allowDragOut",e,t))}},allowDrop:{get:function(){return this.ys},set:function(t){var e=this.ys;e!==t&&(this.ys=t,this.g("allowDrop",e,t))}},allowTextEdit:{get:function(){return this.Ji},set:function(t){var e=this.Ji;e!==t&&(this.Ji=t,this.g("allowTextEdit",e,t))}},allowGroup:{get:function(){return this.Bi},set:function(t){var e=this.Bi;e!==t&&(this.Bi=t,this.g("allowGroup",e,t))}},allowUngroup:{get:function(){return this.Ki},set:function(t){var e=this.Ki;e!==t&&(this.Ki=t,this.g("allowUngroup",e,t))}},allowInsert:{get:function(){return this.As},set:function(t){var e=this.As;e!==t&&(this.As=t,this.g("allowInsert",e,t))}},allowLink:{get:function(){return this.Ci},set:function(t){var e=this.Ci;e!==t&&(this.Ci=t,this.g("allowLink",e,t))}},allowRelink:{get:function(){return this.Ei},set:function(t){var e=this.Ei;e!==t&&(this.Ei=t,this.g("allowRelink",e,t))}},allowMove:{get:function(){return this.Di},set:function(t){var e=this.Di;e!==t&&(this.Di=t,this.g("allowMove",e,t))}},allowReshape:{get:function(){return this.Fi},set:function(t){var e=this.Fi;e!==t&&(this.Fi=t,this.g("allowReshape",e,t))}},allowResize:{get:function(){return this.Gi},set:function(t){var e=this.Gi;e!==t&&(this.Gi=t,this.g("allowResize",e,t))}},allowRotate:{get:function(){return this.Hi},set:function(t){var e=this.Hi;e!==t&&(this.Hi=t,this.g("allowRotate",e,t))}},allowSelect:{get:function(){return this.Ii},set:function(t){var e=this.Ii;e!==t&&(this.Ii=t,this.g("allowSelect",e,t))}},allowUndo:{get:function(){return this.Bs},set:function(t){var e=this.Bs;e!==t&&(this.Bs=t,this.g("allowUndo",e,t))}},allowZoom:{get:function(){return this.Ds},set:function(t){var e=this.Ds;e!==t&&(this.Ds=t,this.g("allowZoom",e,t))}},hasVerticalScrollbar:{get:function(){return this.Um},set:function(t){var e=this.Um;e!==t&&(this.Um=t,ms(this),this.N(),this.g("hasVerticalScrollbar",e,t),Tr(this,!1))}},hasHorizontalScrollbar:{get:function(){return this.Tm},set:function(t){var e=this.Tm;e!==t&&(this.Tm=t,ms(this),this.N(),this.g("hasHorizontalScrollbar",e,t),Tr(this,!1))}},allowHorizontalScroll:{get:function(){return this.zs},set:function(t){var e=this.zs;e!==t&&(this.zs=t,this.g("allowHorizontalScroll",e,t),Tr(this,!1))}},allowVerticalScroll:{get:function(){return this.Cs},set:function(t){var e=this.Cs;e!==t&&(this.Cs=t,this.g("allowVerticalScroll",e,t),Tr(this,!1))}},scrollHorizontalLineChange:{get:function(){return this.Ot},set:function(t){var e=this.Ot;e!==t&&(0>t&&pe(t,">= 0",V,"scrollHorizontalLineChange"),this.Ot=t,this.g("scrollHorizontalLineChange",e,t))}},scrollVerticalLineChange:{get:function(){return this.St},set:function(t){var e=this.St;e!==t&&(0>t&&pe(t,">= 0",V,"scrollVerticalLineChange"),this.St=t,this.g("scrollVerticalLineChange",e,t))}},lastInput:{get:function(){return this.Yi},set:function(t){this.Yi=t}},previousInput:{get:function(){return this.Hg},set:function(t){this.Hg=t}},firstInput:{get:function(){return this.Fp},set:function(t){this.Fp=t}},currentCursor:{get:function(){return this.Ks},set:function(t){if(""===t&&(t=this.rp),this.Ks!==t){var e=this.Ha,n=this.La;if(null!==e&&null!==n){this.Ks=t;var s=e.style.cursor;e.style.cursor=t,n.style.cursor=t,e.style.cursor===s&&(e.style.cursor="-webkit-"+t,n.style.cursor="-webkit-"+t,e.style.cursor===s&&(e.style.cursor="-moz-"+t,n.style.cursor="-moz-"+t,e.style.cursor===s&&(e.style.cursor=t,n.style.cursor=t)))}}}},defaultCursor:{get:function(){return this.rp},set:function(t){""===t&&(t="auto");var e=this.rp;e!==t&&(this.rp=t,this.g("defaultCursor",e,t))}},click:{get:function(){return this.oh},set:function(t){var e=this.oh;e!==t&&(this.oh=t,this.g("click",e,t))}},doubleClick:{get:function(){return this.uh},set:function(t){var e=this.uh;e!==t&&(this.uh=t,this.g("doubleClick",e,t))}},contextClick:{get:function(){return this.qh},set:function(t){var e=this.qh;e!==t&&(this.qh=t,this.g("contextClick",e,t))}},mouseOver:{get:function(){return this.Jh},set:function(t){var e=this.Jh;e!==t&&(this.Jh=t,this.g("mouseOver",e,t))}},mouseHover:{get:function(){return this.Hh},set:function(t){var e=this.Hh;e!==t&&(this.Hh=t,this.g("mouseHover",e,t))}},mouseHold:{get:function(){return this.Gh},set:function(t){var e=this.Gh;e!==t&&(this.Gh=t,this.g("mouseHold",e,t))}},mouseDragOver:{get:function(){return this.vt},set:function(t){var e=this.vt;e!==t&&(this.vt=t,this.g("mouseDragOver",e,t))}},mouseDrop:{get:function(){return this.Eh},set:function(t){var e=this.Eh;e!==t&&(this.Eh=t,this.g("mouseDrop",e,t))}},handlesDragDropForTopLevelParts:{get:function(){return this.$s},set:function(t){var e=this.$s;e!==t&&(this.$s=t,this.g("handlesDragDropForTopLevelParts",e,t))}},mouseEnter:{get:function(){return this.Fh},set:function(t){var e=this.Fh;e!==t&&(this.Fh=t,this.g("mouseEnter",e,t))}},mouseLeave:{get:function(){return this.Ih},set:function(t){var e=this.Ih;e!==t&&(this.Ih=t,this.g("mouseLeave",e,t))}},toolTip:{get:function(){return this.Th},set:function(t){var e=this.Th;e!==t&&(this.Th=t,this.g("toolTip",e,t))}},contextMenu:{get:function(){return this.rh},set:function(t){var e=this.rh;e!==t&&(this.rh=t,this.g("contextMenu",e,t))}},commandHandler:{get:function(){return this.hb},set:function(t){this.hb!==t&&(this.hb=t,t.Le(this))}},toolManager:{get:function(){return this.le},set:function(t){this.le!==t&&(this.le=t,t.diagram=this)}},defaultTool:{get:function(){return this.nb},set:function(t){var e=this.nb;e!==t&&(this.nb=t,t.diagram=this,this.currentTool===e&&(this.currentTool=t))}},currentTool:{get:function(){return this.cb},set:function(t){var e=this.cb;e&&(e.isActive&&e.doDeactivate(),e.cancelWaitAfter(),e.doStop()),null===t&&(t=this.defaultTool),null!==t&&(this.cb=t,t.diagram=this,t.doStart())}},selection:{get:function(){return this.lw}},maxSelectionCount:{get:function(){return this.qt},set:function(t){var e=this.qt;if(e!==t)if(0<=t&&!isNaN(t)){if(this.qt=t,this.g("maxSelectionCount",e,t),!this.undoManager.isUndoingRedoing&&0<(t=this.selection.count-t)){this.P("ChangingSelection",this.selection),e=this.selection.Ea();for(var n=0;n<t;n++)e[n].isSelected=!1;this.P("ChangedSelection",this.selection)}}else pe(t,">= 0",V,"maxSelectionCount")}},nodeSelectionAdornmentTemplate:{get:function(){return this.xt},set:function(t){var e=this.xt;e!==t&&(this.xt=t,this.g("nodeSelectionAdornmentTemplate",e,t))}},groupSelectionAdornmentTemplate:{get:function(){return this.Zs},set:function(t){var e=this.Zs;e!==t&&(this.Zs=t,this.g("groupSelectionAdornmentTemplate",e,t))}},linkSelectionAdornmentTemplate:{get:function(){return this.nt},set:function(t){var e=this.nt;e!==t&&(this.nt=t,this.g("linkSelectionAdornmentTemplate",e,t))}},highlighteds:{get:function(){return this.Tv}},isModified:{get:function(){var t=this.undoManager;return t.isEnabled?null!==t.currentTransaction||this.Ym&&this.se!==t.historyIndex:this.Ym},set:function(t){if(this.Ym!==t){this.Ym=t;var e=this.undoManager;!t&&e.isEnabled&&(this.se=e.historyIndex),t||jh(this)}}},model:{get:function(){return this.ac},set:function(t){var e=this.ac;if(e!==t){this.currentTool.doCancel(),e&&e.undoManager!==t.undoManager&&e.undoManager.isInTransaction&&Y("Do not replace a Diagram.model while a transaction is in progress."),this.animationManager.wc(!0);var n=lp(this,!0);this.Qf=!1,this.Nm=!0,this.se=-2,this.cg=!1;var s=this.wb;this.wb=!0,$a(this.animationManager,"Model"),e&&(null!==this.bf&&this.bf.each(function(u){e.ak(u)}),e.ak(this.Hc)),this.ac=t,this.partManager=function VE(t){return null!==(t=kt.get(t))?new t:new Bt}(this.ac.type);for(var l=0;l<n.length;l++)this.add(n[l]);t.Ug(this.Db),this.partManager.addAllModeledParts(),t.ak(this.Db),t.Ug(this.Hc),null!==this.bf&&this.bf.each(function(u){t.Ug(u)}),this.wb=s,this.Va(),this.wb||this.N(),e&&t.undoManager.copyProperties(e.undoManager)}}},$:{get:function(){return this.Xv},set:function(t){this.Xv=t}},Zr:{get:function(){return this.Xx}},skipsModelSourceBindings:{get:function(){return this.mw},set:function(t){this.mw=t}},os:{get:function(){return this.Ut},set:function(t){this.Ut=t}},nodeTemplate:{get:function(){return this.Dg.I("")},set:function(t){var e=this.Dg.I("");e!==t&&(this.Dg.add("",t),this.g("nodeTemplate",e,t),this.undoManager.isUndoingRedoing||this.Od())}},nodeTemplateMap:{get:function(){return this.Dg},set:function(t){var e=this.Dg;e!==t&&(this.Dg=t,this.g("nodeTemplateMap",e,t),this.undoManager.isUndoingRedoing||this.Od())}},groupTemplate:{get:function(){return this.Ri.I("")},set:function(t){var e=this.Ri.I("");e!==t&&(this.Ri.add("",t),this.g("groupTemplate",e,t),this.undoManager.isUndoingRedoing||this.Od())}},groupTemplateMap:{get:function(){return this.Ri},set:function(t){var e=this.Ri;e!==t&&(this.Ri=t,this.g("groupTemplateMap",e,t),this.undoManager.isUndoingRedoing||this.Od())}},linkTemplate:{get:function(){return this.Ch.I("")},set:function(t){var e=this.Ch.I("");e!==t&&(this.Ch.add("",t),this.g("linkTemplate",e,t),this.undoManager.isUndoingRedoing||this.Od())}},linkTemplateMap:{get:function(){return this.Ch},set:function(t){var e=this.Ch;e!==t&&(this.Ch=t,this.g("linkTemplateMap",e,t),this.undoManager.isUndoingRedoing||this.Od())}},isMouseCaptured:{get:function(){return this.Wv},set:function(t){var e=this.Ha;null!==e&&((e=e.Sa)instanceof SVGElement||(t?(this.lastInput.bubbles=!1,this.removeEventListener(e,"pointermove",this.Xj,!1),this.removeEventListener(e,"pointerdown",this.Wj,!1),this.removeEventListener(e,"pointerup",this.Zj,!1),this.removeEventListener(e,"pointerout",this.Yj,!1),this.addEventListener(mt,"pointermove",this.Xj,!0),this.addEventListener(mt,"pointerdown",this.Wj,!0),this.addEventListener(mt,"pointerup",this.Zj,!0),this.addEventListener(mt,"pointerout",this.Yj,!0),this.removeEventListener(e,"wheel",this.Sj,!1),this.addEventListener(mt,"wheel",this.Sj,!0),this.addEventListener(mt,"selectstart",this.preventDefault,!1)):(this.removeEventListener(mt,"pointermove",this.Xj,!0),this.removeEventListener(mt,"pointerdown",this.Wj,!0),this.removeEventListener(mt,"pointerup",this.Zj,!0),this.removeEventListener(mt,"pointerout",this.Yj,!0),this.addEventListener(e,"pointermove",this.Xj,!1),this.addEventListener(e,"pointerdown",this.Wj,!1),this.addEventListener(e,"pointerup",this.Zj,!1),this.addEventListener(e,"pointerout",this.Yj,!1),this.removeEventListener(mt,"wheel",this.Sj,!0),this.removeEventListener(mt,"selectstart",this.preventDefault,!1),this.addEventListener(e,"wheel",this.Sj,!1)),this.Wv=t))}},position:{get:function(){return this.pa},set:function(t){var e=A.alloc().assign(this.pa);if(!e.C(t)){var n=this.viewportBounds.copy();this.pa.assign(t),C1(this.animationManager,e,this.pa),this.wb||null===this.Ha&&!this.Zn.v()?Ka(this):(this.wb=!0,Ou(this,this.wp,this.Ba/(t=this.scale),this.Aa/t,this.mk,!1),this.wb=!1),this.wb||this.onViewportBoundsChanged(n,this.viewportBounds,this.xa,!1)}A.free(e)}},initialPosition:{get:function(){return this.bt},set:function(t){this.bt.C(t)||(this.bt=t.J())}},initialScale:{get:function(){return this.ct},set:function(t){this.ct!==t&&(this.ct=t)}},grid:{get:function(){return null===this.Zd&&(this.Zd=Fr(this)),this.Zd},set:function(t){var e=this.Zd;if(e!==t){null===e&&(e=this.Zd=Fr(this)),t.type!==$.Grid&&Y("Diagram.grid must be a Panel of type Panel.Grid");var n=e.panel;null!==n&&n.remove(e),this.Zd=t,t.name="GRID",null!==n&&n.add(t),Us(this),this.N(),this.g("grid",e,t)}}},viewportBounds:{get:function(){return this.vw}},viewSize:{get:function(){return this.Zn},set:function(t){var e=this.viewSize;e.C(t)||(this.Zn=t=t.J(),this.Aa=this.Ba=0,t.v()?(this.Ba=t.width,this.Aa=t.height):null!==this.La&&(this.Ba=this.La.clientWidth||1,this.Aa=this.La.clientHeight||1),Ka(this),this.Va(),this.g("viewSize",e,t),this.redraw())}},fixedBounds:{get:function(){return this.Xs},set:function(t){var e=this.Xs;e.C(t)||(t.width!==-1/0&&t.height!==1/0&&t.height!==-1/0||Y("fixedBounds width/height must not be Infinity"),this.Xs=t=t.J(),this.Va(),this.g("fixedBounds",e,t))}},scrollMargin:{get:function(){return this.mj},set:function(t){"number"==typeof t&&(t=new Ht(t));var e=this.mj;e.C(t)||(this.mj=t=t.J(),this.g("scrollMargin",e,t),this.Jo())}},scrollMode:{get:function(){return this.nj},set:function(t){var e=this.nj;e!==t&&(this.nj=t,t===Hs&&Tr(this,!1),this.g("scrollMode",e,t),this.N())}},scrollsPageOnFocus:{get:function(){return this.Tt},set:function(t){var e=this.Tt;e!==t&&(this.Tt=t,this.g("scrollsPageOnFocus",e,t))}},positionComputation:{get:function(){return this.Et},set:function(t){var e=this.Et;e!==t&&(this.Et=t,Tr(this,!1),this.g("positionComputation",e,t))}},scaleComputation:{get:function(){return this.Lt},set:function(t){var e=this.Lt;e!==t&&(this.Lt=t,zo(this,this.scale,this.scale),this.g("scaleComputation",e,t))}},documentBounds:{get:function(){return this.wp}},isVirtualized:{get:function(){return this.lt},set:function(t){var e=this.lt;e!==t&&(this.lt=t,this.g("isVirtualized",e,t))}},scale:{get:function(){return this.xa},set:function(t){var e=this.xa;e!==t&&zo(this,e,t)}},defaultScale:{get:function(){return this.sp},set:function(t){this.sp=t}},autoScale:{get:function(){return this.nh},set:function(t){var e=this.nh;e!==t&&(this.nh=t,this.g("autoScale",e,t),t!==Rr&&Tr(this,!1))}},initialAutoScale:{get:function(){return this.wg},set:function(t){var e=this.wg;e!==t&&(this.wg=t,this.g("initialAutoScale",e,t))}},initialViewportSpot:{get:function(){return this.dt},set:function(t){var e=this.dt;e!==t&&(t.pb()||Y("initialViewportSpot must be a specific Spot: "+t),this.dt=t,this.g("initialViewportSpot",e,t))}},initialDocumentSpot:{get:function(){return this.at},set:function(t){var e=this.at;e!==t&&(t.pb()||Y("initialViewportSpot must be a specific Spot: "+t),this.at=t,this.g("initialDocumentSpot",e,t))}},minScale:{get:function(){return this.tt},set:function(t){var e=this.tt;e!==t&&(0<t?(this.tt=t,this.g("minScale",e,t),t>this.scale&&(this.scale=t)):pe(t,"> 0",V,"minScale"))}},maxScale:{get:function(){return this.pt},set:function(t){var e=this.pt;e!==t&&(0<t?(this.pt=t,this.g("maxScale",e,t),t<this.scale&&(this.scale=t)):pe(t,"> 0",V,"maxScale"))}},zoomPoint:{get:function(){return this.eu},set:function(t){this.eu.C(t)||(this.eu=t=t.J())}},contentAlignment:{get:function(){return this.mk},set:function(t){var e=this.mk;e.C(t)||(this.mk=t=t.J(),this.g("contentAlignment",e,t),Tr(this,!1))}},initialContentAlignment:{get:function(){return this.Rp},set:function(t){var e=this.Rp;e.C(t)||(this.Rp=t=t.J(),this.g("initialContentAlignment",e,t))}},padding:{get:function(){return this.ub},set:function(t){"number"==typeof t&&(t=new Ht(t));var e=this.ub;e.C(t)||(this.ub=t=t.J(),this.Va(),this.g("padding",e,t))}},partManager:{get:function(){return this.Ic},set:function(t){var e=this.Ic;e!==t&&(null!==t.diagram&&Y("Cannot share PartManagers between Diagrams: "+t.toString()),e&&e.Le(null),this.Ic=t,t.Le(this))}},nodes:{get:function(){return this.partManager.nodes.iterator}},links:{get:function(){return this.partManager.links.iterator}},parts:{get:function(){return this.partManager.parts.iterator}},layout:{get:function(){return this.Kc},set:function(t){var e=this.Kc;e!==t&&(this.Kc=t,t.diagram=this,t.group=null,this.mh=!0,this.g("layout",e,t),this.Mb())}},isTreePathToChildren:{get:function(){return this.kt},set:function(t){var e=this.kt;if(e!==t&&(this.kt=t,this.g("isTreePathToChildren",e,t),!this.undoManager.isUndoingRedoing))for(t=this.nodes;t.next();)ty(t.value)}},treeCollapsePolicy:{get:function(){return this.$t},set:function(t){var e=this.$t;e!==t&&(t!==Ru&&t!==d0&&t!==p0&&Y("Unknown Diagram.treeCollapsePolicy: "+t),this.$t=t,this.g("treeCollapsePolicy",e,t))}},Ie:{get:function(){return this.Vv},set:function(t){this.Vv=t}},avoidanceCellSize:{get:function(){return this.Fv},set:function(t){this.Qh=null,this.Fv=new gt(Math.max(1,t.width),Math.max(1,t.height))}},avoidanceLimit:{get:function(){return this.Gv},set:function(t){this.Gv=Math.max(1,t)}},autoScrollInterval:{get:function(){return this.Yo},set:function(t){var e=this.Yo;e!==t&&(this.Yo=t,this.g("autoScrollInterval",e,t))}},autoScrollRegion:{get:function(){return this.$o},set:function(t){"number"==typeof t&&(t=new Ht(t));var e=this.$o;e.C(t)||(this.$o=t=t.J(),this.Va(),this.g("autoScrollRegion",e,t))}}}),St.Object.defineProperties(V,{licenseKey:{get:function(){return ju.fc()},set:function(t){ju.add(t.replace(/\s/g,""))}},version:{get:function(){return yp}}}),V.prototype.makeImageData=V.prototype.ox,V.prototype.makeImage=V.prototype.Dz,V.prototype.cacheGroupExternalLinks=V.prototype.lu,V.prototype.addRenderer=V.prototype.ny,V.prototype.makeSVG=V.prototype.Nu,V.prototype.makeSvg=V.prototype.bs,V.prototype.stopAutoScroll=V.prototype.lg,V.prototype.doAutoScroll=V.prototype.Fr,V.prototype.isUnoccupied=V.prototype.Pj,V.prototype.raiseDiagramEvent=V.prototype.P,V.prototype.removeDiagramListener=V.prototype.Il,V.prototype.addDiagramListener=V.prototype.wj,V.prototype.findTreeRoots=V.prototype.fz,V.prototype.layoutDiagram=V.prototype.Bz,V.prototype.findTopLevelGroups=V.prototype.Zy,V.prototype.findTopLevelNodesAndLinks=V.prototype.$y,V.prototype.ensureBounds=V.prototype.Za,V.prototype.findLinksByExample=V.prototype.Ir,V.prototype.findNodesByExample=V.prototype.Jr,V.prototype.findLinkForData=V.prototype.Dc,V.prototype.findNodeForData=V.prototype.ci,V.prototype.findPartForData=V.prototype.Ec,V.prototype.findLinkForKey=V.prototype.findLinkForKey,V.prototype.findNodeForKey=V.prototype.Lb,V.prototype.findPartForKey=V.prototype.findPartForKey,V.prototype.rebuildParts=V.prototype.Od,V.prototype.transformViewToDoc=V.prototype.rs,V.prototype.transformRectDocToView=V.prototype.gA,V.prototype.transformDocToView=V.prototype.Ro,V.prototype.centerRect=V.prototype.Dr,V.prototype.scrollToRect=V.prototype.bv,V.prototype.scroll=V.prototype.scroll,V.prototype.highlightCollection=V.prototype.rz,V.prototype.highlight=V.prototype.qz,V.prototype.selectCollection=V.prototype.Yz,V.prototype.select=V.prototype.select,V.prototype.updateAllRelationshipsFromData=V.prototype.Uo,V.prototype.updateAllTargetBindings=V.prototype.updateAllTargetBindings,V.prototype.commit=V.prototype.commit,V.prototype.rollbackTransaction=V.prototype.Bf,V.prototype.commitTransaction=V.prototype.eb,V.prototype.startTransaction=V.prototype.Da,V.prototype.raiseChanged=V.prototype.g,V.prototype.raiseChangedEvent=V.prototype.bb,V.prototype.removeChangedListener=V.prototype.ak,V.prototype.addChangedListener=V.prototype.Ug,V.prototype.removeModelChangedListener=V.prototype.Tz,V.prototype.addModelChangedListener=V.prototype.Cw,V.prototype.findLayer=V.prototype.Ij,V.prototype.removeLayer=V.prototype.Rz,V.prototype.addLayerAfter=V.prototype.jy,V.prototype.addLayerBefore=V.prototype.Aw,V.prototype.addLayer=V.prototype.pl,V.prototype.moveParts=V.prototype.moveParts,V.prototype.copyParts=V.prototype.Ej,V.prototype.removeParts=V.prototype.hs,V.prototype.remove=V.prototype.remove,V.prototype.add=V.prototype.add,V.prototype.clearDelayedGeometries=V.prototype.mu,V.prototype.setProperties=V.prototype.Vl,V.prototype.attach=V.prototype.ku,V.prototype.set=V.prototype.set,V.prototype.resetInputOptions=V.prototype.zx,V.prototype.setInputOption=V.prototype.Zz,V.prototype.getInputOption=V.prototype.yl,V.prototype.resetRenderingHints=V.prototype.Ax,V.prototype.setRenderingHint=V.prototype.Fx,V.prototype.getRenderingHint=V.prototype.Ge,V.prototype.maybeUpdate=V.prototype.nd,V.prototype.requestUpdate=V.prototype.Mb,V.prototype.delayInitialization=V.prototype.Ey,V.prototype.isUpdateRequested=V.prototype.xz,V.prototype.invalidateDocumentBounds=V.prototype.Va,V.prototype.findObjectsNear=V.prototype.hg,V.prototype.findPartsNear=V.prototype.Vy,V.prototype.findObjectsIn=V.prototype.tf,V.prototype.findPartsIn=V.prototype.Ww,V.prototype.findObjectsAt=V.prototype.di,V.prototype.findPartsAt=V.prototype.Uy,V.prototype.findObjectAt=V.prototype.ec,V.prototype.findPartAt=V.prototype.wl,V.prototype.focusObject=V.prototype.gz,V.prototype.alignDocument=V.prototype.py,V.prototype.zoomToRect=V.prototype.kA,V.prototype.zoomToFit=V.prototype.zoomToFit,V.prototype.diagramScroll=V.prototype.Nw,V.prototype.focus=V.prototype.focus;var kt=new xt,h0=null,Je=void 0!==mt.document,Fu=null,Fl="",Rr=new K(V,"None",0),pf=new K(V,"Uniform",1),vm=new K(V,"UniformToFill",2),mp=new K(V,"CycleAll",10),gf=new K(V,"CycleNotDirected",11),c0=new K(V,"CycleNotDirectedFast",12),mf=new K(V,"CycleNotUndirected",13),A1=new K(V,"CycleDestinationTree",14),f0=new K(V,"CycleSourceTree",15),Hs=new K(V,"DocumentScroll",1),yf=new K(V,"InfiniteScroll",2),Ru=new K(V,"TreeParentCollapsed",21),d0=new K(V,"AllParentsCollapsed",22),p0=new K(V,"AnyParentsCollapsed",23),ju=new tt,yp="2.2.17",vf="image",qS=null,g0=!1;function eD(){this.by=null,this.j="zz@orderNum",this.pd="63ad05bbe23a1786468a4c741b6d2"===this._tk?this.j=!0:null}function vp(t,e){if(e.Zb.setTransform(e.kc,0,0,e.kc,0,0),e.Zb.Pc(),null===t.pd)t:{e="f";var n=mt[$t("76a715b2f73f148a")][$t("72ba13b5")];if(t.pd=!0,Je){var s=V[$t("76a115b6ed251eaf4692")];if(s)for(var l=ju.iterator;l.next()&&!(6>(s=$t(s=l.value).split($t("39e9"))).length);){var u=$t(s[1]).split(".");if("7da71ca0"!==s[4])break;var c=$t(wu[$t("6cae19")]).split(".");if(u[0]>c[0]||u[0]===c[0]&&u[1]>=c[1]){var d=mt[$t("74a900bae4370f8b51")][$t("6fbb13a1c2311e8a57")].toLowerCase();if(c=d[$t("73a612b6fb191d")]($t("3aad1ab6e022098b4dc4")),u=$t(s[2]),-1<c&&(d=d[$t("73a612b6fb191d")](u.toLowerCase()+"/"),t.pd=!(-1<d&&d<c),!t.pd))break;for(c=n[$t("76ad18b4f73e")],d=n[$t("73a612b6fb191d")]($t("35e7"))+2;d<c;d++)e+=n[d];if(0>(c=e[$t("73a612b6fb191d")](u))&&u!==$t("7da71ca0ad381e90")&&(c=e[$t("73a612b6fb191d")]($t("76a715b2ef3e149757"))),0>c&&(c=e[$t("73a612b6fb191d")]($t("76a715b2ef3e149757"))),0>c&&(c=n[$t("73a612b6fb191d")]($t("7baa19a6f76c1988428554"))),t.pd=!(0<=c&&c<e[$t("73a612b6fb191d")]($t("35"))||-1===e[$t("73a612b6fb191d")]($t("35"))),!t.pd||n[$t("73a612b6fb191d")]($t("7fb002b6ed25128b4da25b2e"))&&n[$t("73a612b6fb191d")]($t("75ba1beee63a1e875799507d"))&&(t.pd=!(-1<n[$t("73a612b6fb191d")](u)),!t.pd))break;if("#"===u[0]){c=mt.document.createElement("div");for(var p=s[0].replace(/[A-Za-z]/g,"");4>p.length;)p+="9";if(d=p,p=p.substr(p.length-4),s="",s+=["gsh","gsf"][parseInt(p.substr(0,1),10)%2],s+=["Header","Background","Display","Feedback"][parseInt(p.substr(0,1),10)%4],c[$t("79a417a0f0181a8946")]=s,mt.document[$t("78a712aa")]){mt.document[$t("78a712aa")][$t("7bb806b6ed32388c4a875b")](c),p=mt.getComputedStyle(c).getPropertyValue($t("78a704b7e62456904c9b12701b6532a8"));var g=mt.getComputedStyle(c).getPropertyValue($t("75b817b0ea2202"));if(mt.document[$t("78a712aa")][$t("68ad1bbcf533388c4a875b")](c),p){if(c=mt[$t("77a902b0eb1b1e804a8a")],g==="0."+parseInt(d,10)%100||-1!==p.indexOf(parseInt(u[1]+u[2],16))&&-1!==p.indexOf(parseInt(u[3]+u[4],16))){t.pd=!1;break}if(c&&c($t("32ae19a1e0331fc94084537c067a67fa59f1386b89d006")).matches)for(s="."+s,u=0;u<document.styleSheets.length;u++)for(var y in c=document.styleSheets[u].rules||document.styleSheets[u].cssRules)if(s===c[y].selectorText){t.pd=!1;break t}}}else t.pd=null,t.pd=!1}}}else{for(y=n[$t("76ad18b4f73e")],l=n[$t("73a612b6fb191d")]($t("35e7"))+2;l<y;l++)e+=n[l];n=e[$t("73a612b6fb191d")]($t("7da71ca0ad381e90")),t.pd=!(0<=n&&n<e[$t("73a612b6fb191d")]($t("35")))}}}return 0<t.pd&&t!==t.by}function m0(t,e){if(Je){if(null!=e||Y("Diagram setup requires an argument DIV."),null!==t.La&&Y("Diagram has already completed setup."),"string"==typeof e?t.La=mt.document.getElementById(e):e instanceof HTMLDivElement?t.La=e:Y("No DIV or DIV id supplied: "+e),null===t.La&&Y("Invalid DIV id; could not get element with id: "+e),void 0!==t.La.H&&Y("Invalid div id; div already has a Diagram associated with it."),!t.cl&&mt.ResizeObserver){var n=Tv(function(){t.Mb()},250);t.cl=new mt.ResizeObserver(function(){n()}),t.cl.observe(t.La)}"static"===mt.getComputedStyle(t.La,null).position&&(t.La.style.position="relative");var s="rgba(2"+(e=5)+"5, 255, 255, 0)";e--,t.La.style["-webkit-tap-highlight-color"]=s,t.La.innerHTML="",t.La.H=t,t.La.goDiagram=t,t.La.go=mt.go;var l=t.kr?new pa(t):new ro(t);if(void 0!==l.style&&(l.style.position="absolute",l.style.top="0px",l.style.left="0px","rtl"===mt.getComputedStyle(t.La,null).getPropertyValue("direction")&&(t.$m=!0),l.style.zIndex="2",l.style.userSelect="none",l.style.MozUserSelect="none",l.style.touchAction="none"),t.Ha=l,t.Zb=l.context,s=t.Zb,t.kc=t.computePixelRatio(),t.viewSize.v()||(t.Ba=t.La.clientWidth||1,t.Aa=t.La.clientHeight||1),Ho(t,t.Ba,t.Aa),t.La.insertBefore(l.Sa,t.La.firstChild),(l=new ro(null)).width=1,l.height=1,t.Ov=l,t.Ux=l.context,Je){l=hs("div");var u=hs("div");l.style.position="absolute",l.style.overflow="auto",l.style.width=t.Ba+"px",l.style.height=t.Aa+"px",l.style.zIndex="1",u.style.position="absolute",u.style.width="1px",u.style.height="1px",t.La.appendChild(l),l.appendChild(u),l.onscroll=Zv,l.addEventListener("pointerdown",JS),l.H=t,l.$x=!0,l.ay=!0,t.Qt=l,t.Nt=u}t.Jo=Tv(function(){t.Rh=null,t.N()},300),t.sv=Tv(function(){bu(t)},250),t.preventDefault=function(c){return c.preventDefault(),!1},t.Sj=function(c){if(t.isEnabled){var d=cf(t,c,!0);d.bubbles=!0;var p=0,g=0;d.delta=0,void 0!==c.deltaX?(0!==c.deltaX&&(p=0<c.deltaX?1:-1),0!==c.deltaY&&(g=0<c.deltaY?1:-1),d.delta=Math.abs(c.deltaX)>Math.abs(c.deltaY)?-p:-g):void 0!==c.wheelDeltaX?(0!==c.wheelDeltaX&&(p=0<c.wheelDeltaX?-1:1),0!==c.wheelDeltaY&&(g=0<c.wheelDeltaY?-1:1),d.delta=Math.abs(c.wheelDeltaX)>Math.abs(c.wheelDeltaY)?-p:-g):void 0!==c.wheelDelta&&0!==c.wheelDelta&&(d.delta=0<c.wheelDelta?1:-1),t.doMouseWheel(),Oh(d,c)}},t.Iz=function(c){t.isEnabled&&(t.Kk=!1,cf(t,c,!0),(c=t.currentTool).cancelWaitAfter(),c.standardMouseOver())},t.Wj=function(c){if(t.isEnabled){t.Kk=!0;var d=t.Dt;void 0===d[c.pointerId]&&(d[c.pointerId]=c);var p=!1;if(null!==(d=t.$k)[0]&&d[0].pointerId===c.pointerId)d[0]=c;else if(null!==d[1]&&d[1].pointerId===c.pointerId)d[1]=c,p=!0;else if(null===d[0])d[0]=c;else{if(null!==d[1])return void c.preventDefault();d[1]=c,p=!0}(d="touch"===c.pointerType||"pen"===c.pointerType)&&(t.Wt=!1,t.jt=!0);var g=p;p=Yt(t,c,!0,!1,!0,g),hm(t,c,p),p.targetDiagram=t0(c,c.target),p.targetObject=null,g||p.clone(t.Fp),g=t.$v,d=d?25:10,c.timeStamp-t.Zv<t.hy&&!(Math.abs(g.x-c.screenX)>d||Math.abs(g.y-c.screenY)>d)?t.Yp++:t.Yp=1,p.clickCount=t.Yp,t.Zv=c.timeStamp,t.$v.kg(c.screenX,c.screenY),t.doMouseDown(),1===c.button?c.preventDefault():Oh(p,c)}},t.Xj=function(c){if(t.isEnabled){t.Kk=!0;var d=t.$k;if(null!==d[0]&&d[0].pointerId===c.pointerId)d[0]=c;else{if(null!==d[1]&&d[1].pointerId===c.pointerId)return void(d[1]=c);if(null!==d[0])return;d[0]=c}if(d[0].pointerId===c.pointerId){d=Yt(t,c,!1,!1,!1,null!==d[1]);var p=mt.document.elementFromPoint(c.clientX,c.clientY);null!==p&&null!=p.shadowRoot&&(p=p.shadowRoot.elementFromPoint(c.clientX,c.clientY));var g=t,y=c;p&&p.H&&(y=c,g=p.H),d.targetDiagram=g,hm(t,y,d),d.targetObject=null,t.doMouseMove(),Oh(d,c)}}},t.Zj=function(c){if(t.isEnabled){t.Kk=!0;var d="touch"===c.pointerType||"pen"===c.pointerType,p=t.Dt;if(d&&t.Wt)delete p[c.pointerId],c.preventDefault();else if(null!==(p=t.$k)[0]&&p[0].pointerId===c.pointerId){p[0]=null,p=Yt(t,c,!1,!0,!0,!1);var g=mt.document.elementFromPoint(c.clientX,c.clientY);null!==g&&null!=g.shadowRoot&&(g=g.shadowRoot.elementFromPoint(c.clientX,c.clientY)),null!==g&&g.H instanceof V&&g.H!==t&&hm(g.H,c,p),null===g&&(g=c.target),hm(t,c,p),p.clickCount=t.Yp,p.targetDiagram=t0(c,g),p.targetObject=null,t.doMouseUp(),Oh(p,c),d&&(t.jt=!1)}else null!==p[1]&&p[1].pointerId===c.pointerId&&(p[1]=null)}},t.Yj=function(c){if(t.isEnabled){t.Kk=!1;var d=t.Dt;d[c.pointerId]&&delete d[c.pointerId],null!==(d=t.$k)[0]&&d[0].pointerId===c.pointerId&&(d[0]=null),null!==d[1]&&d[1].pointerId===c.pointerId&&(d[1]=null),"touch"!==c.pointerType&&"pen"!==c.pointerType&&((c=t.currentTool).cancelWaitAfter(),c.standardMouseOver())}},t.Qs=s.Z["d"+wp[1]+wp[2]+"wI"+vf.slice(1,5)]["b"+mD.slice(1,e)](s.Z,qS,e,e),s.Oc(!0),function XS(t){var e=t.Ha.Sa;e instanceof HTMLCanvasElement&&(t.addEventListener(e,"pointerdown",t.Wj,!1),t.addEventListener(e,"pointermove",t.Xj,!1),t.addEventListener(e,"pointerup",t.Zj,!1),t.addEventListener(e,"pointerout",t.Yj,!1),t.addEventListener(e,"pointerenter",t.Jy,!1),t.addEventListener(e,"pointerleave",t.Ky,!1),t.addEventListener(e,"wheel",t.Sj,!1),t.addEventListener(e,"keydown",t.yz,!1),t.addEventListener(e,"keyup",t.zz,!1),t.addEventListener(e,"blur",t.vy,!1),t.addEventListener(e,"focus",t.wy,!1),t.addEventListener(e,"selectstart",function(n){return n.preventDefault(),!1},!1),t.addEventListener(e,"contextmenu",function(n){return n.preventDefault(),!1},!1),t.addEventListener(mt,"resize",t.sv,!1),Ro&&t.addEventListener(e,"touchstart",function(n){n.preventDefault()},!1))}(t)}}function Rl(t){this.j=void 0===t?new A:t,this.m=new A}V.className="Diagram",V.fromDiv=function(t){var e=t;return"string"==typeof t&&(e=mt.document.getElementById(t)),e instanceof HTMLDivElement&&e.H instanceof V?e.H:null},V.inherit=function(t,e){function n(){}if(Object.getPrototypeOf(t).prototype)throw Error("Used go.Diagram.inherit defining already defined class \n"+t);n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t},V.useDOM=function(t){Je=!!t&&void 0!==mt.document},V.isUsingDOM=function(){return Je},V.None=Rr,V.Uniform=pf,V.UniformToFill=vm,V.CycleAll=mp,V.CycleNotDirected=gf,V.CycleNotDirectedFast=c0,V.CycleNotUndirected=mf,V.CycleDestinationTree=A1,V.CycleSourceTree=f0,V.DocumentScroll=Hs,V.InfiniteScroll=yf,V.TreeParentCollapsed=Ru,V.AllParentsCollapsed=d0,V.AnyParentsCollapsed=p0,eD.className="DiagramHelper",St.Object.defineProperties(Rl.prototype,{point:{get:function(){return this.j},set:function(t){this.j=t}},shifted:{get:function(){return this.m},set:function(t){this.m=t}}});var Ge,Ve,Gs,In,Wn,io,xf,Cf,Mf,Mp,wp="DraggingInfo";function y0(t,e,n){this.node=t,this.info=e,this.Eu=n}function wf(){this.reset()}function xp(t,e){if("string"==typeof t||mt.Element&&t instanceof Element)var n=V.call(this,t)||this;else n=V.call(this)||this,e=t;return nD(n),e&&n.Vl(e),n}function nD(t){t.allowDragOut=!0,t.allowMove=!1,t.isReadOnly=!0,t.contentAlignment=Qr,t.layout=new Vn}function zs(t,e){if("string"==typeof t||mt.Element&&t instanceof Element)var n=V.call(this,t)||this;else n=V.call(this)||this,e=t;var s=n;n.animationManager.isEnabled=!1,n.wb=!0,n.W=null,n.Tm=!1,n.Um=!1,n.F=!0,n.u=!0,n.ga=0,n.m=!1,n.fl=null,n.Fx("drawShadows",!1),t=new ut;var l=new Ct;return l.stroke="magenta",l.strokeWidth=2,l.fill="transparent",l.name="BOXSHAPE",t.selectable=!0,t.selectionAdorned=!1,t.selectionObjectName="BOXSHAPE",t.locationObjectName="BOXSHAPE",t.resizeObjectName="BOXSHAPE",t.cursor="move",t.add(l),n.j=t,n.allowCopy=!1,n.allowDelete=!1,n.allowSelect=!0,n.autoScrollRegion=new Ht(0,0,0,0),n.pa.h(0,0),n.toolManager.gb("Dragging",new Uh,n.toolManager.mouseMoveTools),n.click=function(){var u=s.observed;if(null!==u){var c=u.viewportBounds,d=s.lastInput.documentPoint;u.position=new A(d.x-c.width/2,d.y-c.height/2)}},n.Gf=function(){s.Va(),Bh(s)},n.Qd=function(){null!==s.observed&&(s.Va(),s.N())},n.Ga=function(){1>s.updateDelay?s.N():s.m||(s.m=!0,setTimeout(function(){return s.redraw()},s.updateDelay))},n.Ff=function(){null!==s.observed&&Bh(s)},n.autoScale=pf,n.wb=!1,e&&Object.assign(n,e),n}function iD(t){var e=t.observed;if(null!==e){var n=t.drawsTemporaryLayers,s=t.drawsGrid&&n,l=e.grid;s&&null!==l&&l.visible&&!isNaN(l.width)&&!isNaN(l.height)&&(Us(e,l=U.alloc().assign(t.viewportBounds).Xc(e.viewportBounds)),U.free(l),$n(e));var u=t.Bb;u.reset(),1!==t.scale&&u.scale(t.scale),0===t.position.x&&0===t.position.y||u.translate(-t.position.x,-t.position.y),(l=t.Zb).scale(t.kc,t.kc),l.transform(u.m11,u.m12,u.m21,u.m22,u.dx,u.dy),u=(e=e.Ua.s).length;for(var c=0;c<u;c++){var d=e[c],p=t;if(d.visible&&0!==d.opacity){var g=d.diagram.grid.part;if(!n&&d.isTemporary)s&&g.layer===d&&(d=Ol(d,l),g.tc(l,p),l.globalAlpha=d);else{for(var y=Ol(d,l),w=p.scale,C=U.alloc(),D=d.Ma.s,M=D.length,E=0;E<M;E++){var I=D[E];(s||I!==g)&&d.$h(l,I,p,null,w,C,!1)}U.free(C),l.globalAlpha=y}}}}}function Bh(t){var e=t.box;if(null!==e){var n=t.observed;if(null!==n){t.bd=!0,n=n.viewportBounds;var s=e.selectionObject,l=gt.alloc();l.h(n.width,n.height),s.desiredSize=l,gt.free(l),t=2/t.scale,s instanceof Ct&&(s.strokeWidth=t),e.location=new A(n.x-t/2,n.y-t/2),e.isSelected=!0}}}function Uh(){Ie.call(this),this.j=null}function Wt(){En(this),this.H=bh,this.Ga=this.u=this.m=!0,this.F=this.W=this.hb=this.ga=!1,this.dj=this.j=null,this.Db=1.05,this.mt=NaN,this.Yv=null,this.fu=NaN,this.du=Lr,this.cb=!0,this.Vf=null,this.nb=200}function Ya(t,e,n){if(e.isVisible())return n;if(e instanceof At)Ya(t,e.adornedPart,n);else if(e instanceof z){var s=e.fromNode;null!==s&&Ya(t,s,n),null!==(e=e.toNode)&&Ya(t,e,n)}else e instanceof Z&&(null!==(s=e.labeledLink)&&Ya(t,s,n),null!==(s=e.ig())&&(s.isTreeExpanded||s.wasTreeExpanded||n.push(s),Ya(t,s,n))),null!==(e=e.containingGroup)&&(e.isSubGraphExpanded||e.wasSubGraphExpanded||n.push(e),Ya(t,e,n));return n}function Cp(t){var e=ce();for(t=t.iterator;t.next();){var n=t.value;n instanceof z||e.push(n)}t=new Q,n=e.length;for(var s=0;s<n;s++){for(var l=e[s],u=!0,c=0;c<n;c++)if(l.Md(e[c])){u=!1;break}u&&t.add(l)}return It(e),t}function lt(){En(this),this.o=30723,this.tb=1,this.Yb=this.Uf=null,this.pa=new A(NaN,NaN).freeze(),this.$c=Av,this.Bb=new Dt,this.lh=new Dt,this.Ib=null,this.xa=this.yk=1,this.Gb=0,this.Ag=Eh,this.qc=new U(NaN,NaN,NaN,NaN).freeze(),this.Eb=new U(NaN,NaN,NaN,NaN).freeze(),this.bc=new U(0,0,NaN,NaN).freeze(),this.aa=this.Gn=this.Hn=null,this.fk=this.Fb=Zn,this.rg=this.Ln=0,this.Mn=this.jj=this.ib=this.sh=this.A=this.Ra=null}function hn(t){null===t.A?t.A=new Hl:t.A.ic&&(t.A=t.A.copy())}function Vu(t,e,n){var s=t.Yg();if(null!==s)for(var l=t.localBindings.iterator;l.next();){var u=l.value,c=null;if(null!==u.sourceName){if(null===(c=Ty(u,s,t)))continue;u.Vo(t,c,n,null)}else if(u.isToModel){var d=e.diagram;null===d||d.skipsModelSourceBindings||u.Vo(t,d.model.modelData,n,s)}else{if(null===(d=s.data))continue;var p=e.diagram;null===p||p.skipsModelSourceBindings||u.Vo(t,d,n,s)}c===t&&null!==(d=s.Hr(u.ti))&&u.pv(d,c,n)}}function k1(t,e,n,s){return!1!==t.pickable&&(s.multiply(t.transform),n?t.Sc(e,s):t.Wg(e,s))}function v0(t,e,n,s,l){if(t.Eb.h(e,n,s,l),!t.desiredSize.v()){var u=t.qc,c=(n=t.Ag).top+n.bottom;switch(n=u.width+(e=n.right+n.left),u=u.height+c,s+=e,l+=c,e=vs(t,!0),n===s&&u===l&&(e=Ve),e){case Ve:(n>s||u>l)&&(lr(t,!0),t.measure(n>s?s:n,u>l?l:u,0,0));break;case Ge:lr(t,!0),t.measure(s,l,0,0);break;case In:lr(t,!0),t.measure(s,u,0,0);break;case Wn:lr(t,!0),t.measure(n,l,0,0)}}}function jl(t,e,n,s){var l=t.naturalBounds,u=0,c=0,d=l.width;l=l.height;var p=t.Sv();t instanceof Ct&&(u=(l=t.sa.bounds).x,c=l.y,d=l.width,l=l.height),Si(t,e,t.Yb,!0,!1,n,s),t.Yb instanceof Rt&&t.Yb.type===Ji?(e.beginPath(),e.rect(u-p/2,c-p/2,d+p,l+p),e.sf(t.Yb)):e.fillRect(u-p/2,c-p/2,d+p,l+p)}function Si(t,e,n,s,l,u,c){if(null!==n){var d=1,p=1;if("string"==typeof n)s?e.fillStyle=n:e.strokeStyle=n;else if(n.type===oo)s?e.fillStyle=n.color:e.strokeStyle=n.color;else{var g=0;if(t instanceof Ct&&(g=t.strokeWidth),d=u.width,p=u.height,l?(d=c.width,p=c.height):s||(d+=g,p+=g),(u=e instanceof Rn)&&n.oe&&(n.type===zl||n.lk===d&&n.Hs===p))var y=n.oe;else{var w=0,C=0,D=0,M=0,E=0,I=0;if(I=E=0,l?(E=c.x,I=c.y):s||(E-=g/2,I-=g/2),w=n.start.x*d+n.start.offsetX,C=n.start.y*p+n.start.offsetY,D=n.end.x*d+n.end.offsetX,M=n.end.y*p+n.end.offsetY,w+=E,D+=E,C+=I,M+=I,n.type===ya)y=e.createLinearGradient(w,C,D,M);else if(n.type===Ji)I=isNaN(n.endRadius)?Math.max(d,p)/2:n.endRadius,isNaN(n.startRadius)?(E=0,I=Math.max(d,p)/2):E=n.startRadius,y=e.createRadialGradient(w,C,E,D,M,I);else if(n.type===zl)try{y=e.createPattern(n.pattern,"repeat")}catch{y=null}if(n.type!==zl&&null!==(l=n.colorStops))for(l=l.iterator;l.next();)y.addColorStop(l.key,l.value);if(u&&(n.oe=y,null!==y&&(n.lk=d,n.Hs=p),null===y&&n.type===zl&&-1!==n.lk)){n.lk=-1;var P=t.diagram;null!==P&&-1===n.lk&&xu(function(){P.redraw()},600)}}s?e.fillStyle=y:e.strokeStyle=y}}}function wm(t){if(0!=(2048&t.o)){var e=t.Bb;if(e.reset(),!t.Eb.v()||!t.qc.v())return void Sf(t,!1);if(e.translate(t.Eb.x-t.qc.x,t.Eb.y-t.qc.y),1!==t.scale||0!==t.angle){var n=t.naturalBounds;t.Qn(e,n.x,n.y,n.width,n.height)}Sf(t,!1),Vl(t,!0)}0!=(4096&t.o)&&(null===(e=t.panel)?(t.lh.set(t.Bb),t.yk=t.scale,Vl(t,!1)):null!==e.ge&&((n=t.lh).reset(),e.ke()?n.multiply(e.lh):null!==e.panel&&n.multiply(e.panel.lh),n.multiply(t.Bb),t.yk=t.scale*e.yk,Vl(t,!1)))}function Sp(t){if(!ii(t)){var e=t.panel;null!==e?e.w():t.li()&&null!==(e=t.diagram)&&(e.te.add(t),t instanceof Z&&t.vd(),e.Mb()),$s(t,!0)}}function vs(t,e){var n=t.stretch,s=t.panel;return null!==s&&s.type===$.Table?xm(t,s.getRowDefinition(t.row),s.getColumnDefinition(t.column),e):null!==s&&s.type===$.Auto&&s.vb()===t?Xa(t,Ge,e):n===io?null!==s?s.type===$.Spot&&s.vb()===t?Xa(t,Ge,e):Xa(t,(n=s.defaultStretch)===io?Ve:n,e):Xa(t,Ve,e):Xa(t,n,e)}function xm(t,e,n,s){var l=t.stretch;if(l!==io)return Xa(t,l,s);var u=l=null;switch(e.stretch){case Wn:case Ge:u=!0}switch(n.stretch){case In:case Ge:l=!0}return e=t.panel.defaultStretch,null===l&&(l=e===In||e===Ge),null===u&&(u=e===Wn||e===Ge),Xa(t,!0===l&&!0===u?Ge:!0===l?In:!0===u?Wn:Ve,s)}function Xa(t,e,n){if(n)return e;if(e===Ve||(n=t.desiredSize).v())return Ve;if(t=t.angle,!isNaN(n.width))if(90!==t&&270!==t){if(e===In)return Ve;if(e===Ge)return Wn}else{if(e===Wn)return Ve;if(e===Ge)return In}if(!isNaN(n.height))if(90!==t&&270!==t){if(e===Wn)return Ve;if(e===Ge)return In}else{if(e===In)return Ve;if(e===Ge)return Wn}return e}function w0(t,e){t.o=e?512|t.o:-513&t.o}function Bu(t){return 0!=(1024&t.o)}function x0(t,e){t.o=e?1024|t.o:-1025&t.o}function Sf(t,e){t.o=e?2048|t.o:-2049&t.o}function Vl(t,e){t.o=e?4096|t.o:-4097&t.o}function da(t){return 0!=(8192&t.o)}function lr(t,e){t.o=e?8192|t.o:-8193&t.o}function ii(t){return 0!=(16384&t.o)}function $s(t,e){t.o=e?16384|t.o:-16385&t.o}function Bl(t){var e=t.part;if(e instanceof Z&&(null!==t.portId||t===e.port)){var n=e.diagram;null===n||n.undoManager.isUndoingRedoing||eC(e,t)}}function C0(t){var e=t.diagram;null===e||e.undoManager.isUndoingRedoing||(t instanceof $?t instanceof Z?t.vd():t.$l(t,function(n){Bl(n)}):Bl(t))}function Er(t,e){for(var n=1;n<arguments.length;++n);n=arguments;var s=null,l=null;if("function"==typeof t)l=t;else if("string"==typeof t){var u=Uu.I(t);"function"==typeof u?Vt(s=u(n=Gc(arguments)))||Y('GraphObject.make invoked object builder "'+t+'", but it did not return an Object'):l=mt.go[t]}if(null===s&&(null!=l&&l.constructor||Y("GraphObject.make requires a class function or GoJS class name or name of an object builder, not: "+t),s=new l),l=1,s instanceof V&&1<n.length){u=s;var c=n[1];("string"==typeof c||c instanceof HTMLDivElement)&&(m0(u,c),l++)}for(;l<n.length;l++)void 0===(u=n[l])?Y("Undefined value at argument "+l+" for object being constructed by GraphObject.make: "+s):b1(s,u);return s}function b1(t,e){if("string"==typeof e)if(t instanceof Kt)t.text=e;else if(t instanceof Ct)t.figure=e;else if(t instanceof Qi)t.source=e;else if(t instanceof $)null!==(e=ao.I(e))&&(t.type=e);else if(t instanceof Rt){var n=ua(Rt,e);null!==n?t.type=n:Y("Unknown Brush type as an argument to GraphObject.make: "+e)}else t instanceof X?null!==(e=ua(X,e))&&(t.type=e):t instanceof Ft&&null!==(e=ua(Ft,e))&&(t.type=e);else if(e instanceof lt)t instanceof $||Y("A GraphObject can only be added to a Panel, not to: "+t),t.add(e);else if(e instanceof cn){var s;e.isRow&&"function"==typeof t.getRowDefinition?s=t.getRowDefinition(e.index):e.isRow||"function"!=typeof t.getColumnDefinition||(s=t.getColumnDefinition(e.index)),s instanceof cn?(t=s,e.isRow?t.height=e.height:t.width=e.width,t.minimum=e.minimum,t.maximum=e.maximum,t.alignment=e.alignment,t.stretch=e.stretch,t.sizing=e.sizing,t.Wf=null===e.separatorPadding?null:e.separatorPadding.J(),t.separatorStroke=e.separatorStroke,t.separatorStrokeWidth=e.separatorStrokeWidth,t.oj=null,e.separatorDashArray&&(t.oj=Gc(e.separatorDashArray)),t.background=e.background,t.coversSeparators=e.coversSeparators,t.Vd=e.Vd):Y("A RowColumnDefinition can only be added to an object that implements getRowDefinition/getColumnDefinition, not to: "+t)}else if(e instanceof K)"function"==typeof t.ob&&t.ob(e);else if(e instanceof $e)t.type=e;else if(e instanceof xe)t instanceof lt||t instanceof cn?t.bind(e):Y("A Binding can only be applied to a GraphObject or RowColumnDefinition, not to: "+t);else if(e instanceof ki)t instanceof lt?t.mv(e):Y("An AnimationTrigger can only be applied to a GraphObject, not to: "+t);else if(e instanceof Fn)t instanceof X&&t.type===X.m?t.figures.add(e):Y("A PathFigure can only be added to a Path Geometry, not to: "+t);else if(e instanceof Ft)t instanceof Fn?t.segments.add(e):Y("A PathSegment can only be added to a PathFigure, not to: "+t);else if(e instanceof Lt)t instanceof V||t instanceof wt?t.layout=e:Y("A Layout can only be assigned to a Diagram or a Group, not to: "+t);else if(Array.isArray(e))for(n=0;n<e.length;n++)b1(t,e[n]);else if("object"==typeof e&&null!==e)if(t instanceof Rt){for(var l in n=new Zr,e)s=parseFloat(l),isNaN(s)?n[l]=e[l]:t.addColorStop(s,e[l]);Lh(t,n)}else if(t instanceof cn){for(n in void 0!==e.row?((null==(l=e.row)||l===1/0||isNaN(l)||0>l)&&Y("Must specify non-negative integer row for RowColumnDefinition "+e+", not: "+l),t.isRow=!0,t.index=l):void 0!==e.column&&((null==(l=e.column)||l===1/0||isNaN(l)||0>l)&&Y("Must specify non-negative integer column for RowColumnDefinition "+e+", not: "+l),t.isRow=!1,t.index=l),l=new Zr,e)"row"!==n&&"column"!==n&&(l[n]=e[n]);Lh(t,l)}else Lh(t,e);else Y('Unknown initializer "'+e+'" for object being constructed by GraphObject.make: '+t)}function Ul(t,e){Uu.add(t,e)}function M0(t,e,n){void 0===n&&(n=null);var s=t[1];if("function"==typeof n?n(s):"string"==typeof s)return t.splice(1,1),s;if(void 0===e)throw Error("no "+("function"==typeof n?"satisfactory":"string")+" argument for GraphObject builder "+t[0]);return e}Rl.className="DraggingInfo",y0.className="DraggingNodeInfoPair",wf.prototype.reset=function(){this.isGridSnapEnabled=!1,this.isGridSnapRealtime=!0,this.gridSnapCellSize=new gt(NaN,NaN).freeze(),this.gridSnapCellSpot=je,this.gridSnapOrigin=new A(NaN,NaN).freeze(),this.groupsSnapMembers=this.dragsTree=this.dragsLink=!1,this.dragsMembers=this.groupsAlwaysMove=!0},wf.className="DraggingOptions",zt(xp,V),xp.prototype.reset=function(){V.prototype.reset.call(this),nD(this)},xp.className="Palette",zt(zs,V),zs.prototype.computePixelRatio=function(){return 1},zs.prototype.redraw=function(){if(this.m&&1<=this.updateDelay){this.m=!1;var t=this.Ha,e=this.Zb;if(null!==t&&null!==e){if(cp(this),null===this.fl){var n=new ro(null);n.width=t.width,n.height=t.height,this.fl=n}try{this.Ha=this.fl,this.Zb=this.Ha.context,this.Zb.Oc(!0),this.Zb.setTransform(1,0,0,1,0,0),this.Zb.clearRect(0,0,this.Ha.width,this.Ha.height),iD(this)}finally{this.Ha=t,this.Zb=e}}}V.prototype.redraw.call(this)},zs.prototype.tc=function(){if(null===this.La&&Y("No div specified"),null===this.Ha&&Y("No canvas specified"),!(this.Ha instanceof pa)&&(Ym(this.box),this.bd)){var t=this.observed;if(null!==t&&!t.animationManager.defaultAnimation.isAnimating&&t.ji){cp(this);var e=this.Ha;(t=this.Zb).Oc(!0),t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,e.width,e.height),1>this.updateDelay?iD(this):null!==this.fl&&(t.drawImage(this.fl.Sa,0,0),(e=this.Bb).reset(),1!==this.scale&&e.scale(this.scale),0===this.position.x&&0===this.position.y||e.translate(-this.position.x,-this.position.y),t.scale(this.kc,this.kc),t.transform(e.m11,e.m12,e.m21,e.m22,e.dx,e.dy));for(var n=(e=this.Ua.s).length,s=0;s<n;s++)e[s].tc(t,this);this.bd=this.Ui=!1}}},zs.prototype.computeBounds=function(){var t=this.observed;if(null===t)return Lr;var e=t.documentBounds.copy();return e.Xc(t.viewportBounds),e},zs.prototype.invalidateViewport=function(){!0!==this.bd&&(this.bd=!0,this.Mb())},zs.prototype.onViewportBoundsChanged=function(t,e,n,s){this.wb||(Fh(this),this.N(),ms(this),this.Va(),Bh(this),this.kd.scale=n,this.kd.position.x=t.x,this.kd.position.y=t.y,this.kd.bounds.assign(t),this.kd.lx=s,this.P("ViewportBoundsChanged",this.kd,t))},St.Object.defineProperties(zs.prototype,{observed:{get:function(){return this.W},set:function(t){var e=this.W;if(t instanceof zs&&Y("Overview.observed Diagram may not be an Overview itself: "+t),e!==t){if(null!==e&&(this.remove(this.box),e.Il("ViewportBoundsChanged",this.Gf),e.Il("DocumentBoundsChanged",this.Qd),e.Il("InvalidateDraw",this.Ga),e.Il("AnimationFinished",this.Ff)),this.W=t,null!==t&&(t.wj("ViewportBoundsChanged",this.Gf),t.wj("DocumentBoundsChanged",this.Qd),t.wj("InvalidateDraw",this.Ga),t.wj("AnimationFinished",this.Ff),this.add(this.box)),this.Va(),null===t){this.fl=null;var n=this.Ha,s=this.Zb;n&&s&&(s.setTransform(1,0,0,1,0,0),s.clearRect(0,0,n.width,n.height))}else this.Ga(null),Bh(this),this.N();this.g("observed",e,t)}}},box:{get:function(){return this.j},set:function(t){var e=this.j;e!==t&&(this.j=t,this.remove(e),this.add(this.j),Bh(this),this.g("box",e,t))}},drawsTemporaryLayers:{get:function(){return this.F},set:function(t){this.F!==t&&(this.F=t,this.redraw())}},drawsGrid:{get:function(){return this.u},set:function(t){this.u!==t&&(this.u=t,this.redraw())}},updateDelay:{get:function(){return this.ga},set:function(t){0>t&&(t=0),this.ga!==t&&(this.ga=t)}}}),zs.className="Overview",zt(Uh,Ie),Uh.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;if(null===t||!t.allowMove||!t.allowSelect)return!1;var e=t.observed;if(null===e)return!1;var n=t.lastInput;return!(!n.left||t.currentTool!==this&&(!this.isBeyondDragSize()||n.isTouchEvent&&n.timestamp-t.firstInput.timestamp<this.delay)||(null===this.findDraggablePart()&&(this.j=new A((n=e.viewportBounds).width/2,n.height/2),e.position=new A((t=t.firstInput.documentPoint).x-this.j.x,t.y-this.j.y)),0))},Uh.prototype.doActivate=function(){this.j=null,Ie.prototype.doActivate.call(this)},Uh.prototype.doUpdateCursor=function(){var t=this.diagram,e=t.box;null!==e&&e.cursor&&(t.currentCursor=e.cursor)},Uh.prototype.moveParts=function(){var t=this.diagram,e=t.observed;if(null!==e){var n=t.box;if(null!==n){if(null===this.j){var s=t.firstInput.documentPoint;this.j=new A(s.x-(n=n.location).x,s.y-n.y)}e.position=new A((t=t.lastInput.documentPoint).x-this.j.x,t.y-this.j.y)}}},Uh.className="OverviewDraggingTool",Wt.prototype.toString=function(){return"CommandHandler"},Wt.prototype.Le=function(t){this.H=t},Wt.prototype.doKeyDown=function(){var t=this.diagram,e=t.lastInput,n=Ro?e.meta:e.control,s=e.shift,l=e.alt,u=e.key;!n||"C"!==u&&"Insert"!==u?n&&"X"===u||s&&"Del"===u?this.canCutSelection()&&this.cutSelection():n&&"V"===u||s&&"Insert"===u?this.canPasteSelection()&&this.pasteSelection():n&&"Y"===u||l&&s&&"Backspace"===u?this.canRedo()&&this.redo():n&&"Z"===u||l&&"Backspace"===u?this.canUndo()&&this.undo():"Del"===u||"Backspace"===u?this.canDeleteSelection()&&this.deleteSelection():n&&"A"===u?this.canSelectAll()&&this.selectAll():"Esc"===u?this.canStopCommand()&&this.stopCommand():"Up"===u?t.allowVerticalScroll&&t.scroll(n?"pixel":"line","up"):"Down"===u?t.allowVerticalScroll&&t.scroll(n?"pixel":"line","down"):"Left"===u?t.allowHorizontalScroll&&t.scroll(n?"pixel":"line","left"):"Right"===u?t.allowHorizontalScroll&&t.scroll(n?"pixel":"line","right"):"PageUp"===u?s&&t.allowHorizontalScroll?t.scroll("page","left"):t.allowVerticalScroll&&t.scroll("page","up"):"PageDown"===u?s&&t.allowHorizontalScroll?t.scroll("page","right"):t.allowVerticalScroll&&t.scroll("page","down"):"Home"===u?n&&t.allowVerticalScroll?t.scroll("document","up"):!n&&t.allowHorizontalScroll&&t.scroll("document","left"):"End"===u?n&&t.allowVerticalScroll?t.scroll("document","down"):!n&&t.allowHorizontalScroll&&t.scroll("document","right"):" "===u?this.canScrollToPart()&&this.scrollToPart():"Subtract"===u?this.canDecreaseZoom()&&this.decreaseZoom():"Add"===u?this.canIncreaseZoom()&&this.increaseZoom():n&&"0"===u?this.canResetZoom()&&this.resetZoom():s&&"Z"===u?this.canZoomToFit()&&this.zoomToFit():n&&!s&&"G"===u?this.canGroupSelection()&&this.groupSelection():n&&s&&"G"===u?this.canUngroupSelection()&&this.ungroupSelection():"F2"===u||e.event&&"F2"===e.event.key?this.canEditTextBlock()&&this.editTextBlock():"ContextMenu"===u||e.event&&"ContextMenu"===e.event.key?this.canShowContextMenu()&&this.showContextMenu():e.bubbles=!0:this.canCopySelection()&&this.copySelection()},Wt.prototype.doKeyUp=function(){this.diagram.lastInput.bubbles=!0},Wt.prototype.stopCommand=function(){var t=this.diagram,e=t.currentTool;e instanceof Te&&t.allowSelect&&t.clearSelection(),null!==e&&e.doCancel()},Wt.prototype.canStopCommand=function(){return!0},Wt.prototype.selectAll=function(){var t=this.diagram;t.N();try{t.currentCursor="wait",t.P("ChangingSelection",t.selection);for(var e=t.parts;e.next();)e.value.isSelected=!0;for(var n=t.nodes;n.next();)n.value.isSelected=!0;for(var s=t.links;s.next();)s.value.isSelected=!0}finally{t.P("ChangedSelection",t.selection),t.currentCursor=""}},Wt.prototype.canSelectAll=function(){return this.diagram.allowSelect},Wt.prototype.deleteSelection=function(){var t=this.diagram;try{t.currentCursor="wait",t.P("ChangingSelection",t.selection),t.Da("Delete"),t.P("SelectionDeleting",t.selection);for(var e=new Q,n=t.selection.iterator;n.next();)Xs(e,n.value,!0,this.deletesTree?1/0:0,!!this.deletesConnectedLinks&&null,function(s){return s.canDelete()});t.hs(e,!0),t.P("SelectionDeleted",e)}finally{t.eb("Delete"),t.P("ChangedSelection",t.selection),t.currentCursor=""}},Wt.prototype.canDeleteSelection=function(){var t=this.diagram;return!(t.isReadOnly||t.isModelReadOnly||!t.allowDelete||0===t.selection.count)},Wt.prototype.copySelection=function(){var t=this.diagram,e=new Q;for(t=t.selection.iterator;t.next();)Xs(e,t.value,!0,this.copiesTree?1/0:0,this.copiesConnectedLinks,function(n){return n.canCopy()});this.copyToClipboard(e)},Wt.prototype.canCopySelection=function(){var t=this.diagram;return!(!t.allowCopy||!t.allowClipboard||0===t.selection.count)},Wt.prototype.cutSelection=function(){this.copySelection(),this.deleteSelection()},Wt.prototype.canCutSelection=function(){var t=this.diagram;return!(t.isReadOnly||t.isModelReadOnly||!t.allowCopy||!t.allowDelete||!t.allowClipboard||0===t.selection.count)},Wt.prototype.copyToClipboard=function(t){var e=this.diagram,n=null;if(null===t)Fu=null,Fl="";else{n=e.model;var s=!1,l=!1,u=null;try{n.Bl()&&(s=n.Dj,n.Dj=this.copiesParentKey),n.Nj()&&(l=n.Cj,n.Cj=this.copiesGroupKey),u=e.Ej(t,null,!0)}finally{n.Bl()&&(n.Dj=s),n.Nj()&&(n.Cj=l),(n=new tt).addAll(u),Fu=n,Fl=e.model.dataFormat}}e.P("ClipboardChanged",n)},Wt.prototype.pasteFromClipboard=function(){var t=new Q,e=Fu;if(null===e)return t;var n=this.diagram;if(Fl!==n.model.dataFormat)return t;var s=n.model,l=!1,u=!1,c=null;try{s.Bl()&&(l=s.Dj,s.Dj=this.copiesParentKey),s.Nj()&&(u=s.Cj,s.Cj=this.copiesGroupKey),c=n.Ej(e,n,!1)}finally{for(s.Bl()&&(s.Dj=l),s.Nj()&&(s.Cj=u),e=c.iterator;e.next();)s=e.key,(n=e.value).location.v()||(s.location.v()?n.location=s.location:!n.position.v()&&s.position.v()&&(n.position=s.position)),t.add(n)}return t},Wt.prototype.pasteSelection=function(t){void 0===t&&(t=null);var e=this.diagram;try{e.currentCursor="wait",e.P("ChangingSelection",e.selection),e.Da("Paste");var n=this.pasteFromClipboard();0<n.count&&e.clearSelection(!0);for(var s=n.iterator;s.next();)s.value.isSelected=!0;if(null!==t){var l=e.computePartsBounds(e.selection);l.v()&&Rh(e,this.computeEffectiveCollection(e.selection,e.Em),new A(t.x-l.centerX,t.y-l.centerY),e.Em,!1)}e.P("ClipboardPasted",n)}finally{e.eb("Paste"),e.P("ChangedSelection",e.selection),e.currentCursor=""}},Wt.prototype.canPasteSelection=function(){var t=this.diagram;return!(t.isReadOnly||t.isModelReadOnly||!t.allowInsert||!t.allowClipboard||null===Fu||0===Fu.count||Fl!==t.model.dataFormat)},Wt.prototype.undo=function(){this.diagram.undoManager.undo()},Wt.prototype.canUndo=function(){var t=this.diagram;return!t.isReadOnly&&!t.isModelReadOnly&&t.allowUndo&&t.undoManager.canUndo()},Wt.prototype.redo=function(){this.diagram.undoManager.redo()},Wt.prototype.canRedo=function(){var t=this.diagram;return!t.isReadOnly&&!t.isModelReadOnly&&t.allowUndo&&t.undoManager.canRedo()},Wt.prototype.decreaseZoom=function(t){void 0===t&&(t=1/this.zoomFactor);var e=this.diagram;e.autoScale===Rr&&((t*=e.scale)<e.minScale||t>e.maxScale||(e.scale=t))},Wt.prototype.canDecreaseZoom=function(t){void 0===t&&(t=1/this.zoomFactor);var e=this.diagram;return e.autoScale===Rr&&!((t*=e.scale)<e.minScale||t>e.maxScale)&&e.allowZoom},Wt.prototype.increaseZoom=function(t){void 0===t&&(t=this.zoomFactor);var e=this.diagram;e.autoScale===Rr&&((t*=e.scale)<e.minScale||t>e.maxScale||(e.scale=t))},Wt.prototype.canIncreaseZoom=function(t){void 0===t&&(t=this.zoomFactor);var e=this.diagram;return e.autoScale===Rr&&!((t*=e.scale)<e.minScale||t>e.maxScale)&&e.allowZoom},Wt.prototype.resetZoom=function(t){void 0===t&&(t=this.defaultScale);var e=this.diagram;t<e.minScale||t>e.maxScale||(e.scale=t)},Wt.prototype.canResetZoom=function(t){void 0===t&&(t=this.defaultScale);var e=this.diagram;return!(t<e.minScale||t>e.maxScale)&&e.allowZoom},Wt.prototype.zoomToFit=function(){var t=this.diagram,e=t.animationManager;e.wc(),t.redraw();var n=t.position,s=t.scale;$a(e,"Zoom To Fit"),this.isZoomToFitRestoreEnabled&&s===this.fu&&!isNaN(this.mt)&&t.documentBounds.C(this.du)?(t.scale=this.mt,t.position=this.Yv,this.fu=NaN,this.du=Lr):(this.mt=s,this.Yv=n.copy(),t.zoomToFit(),this.fu=t.scale,this.du=t.documentBounds.copy()),Wa(e)},Wt.prototype.canZoomToFit=function(){return this.diagram.allowZoom},Wt.prototype.scrollToPart=function(t){void 0===t&&(t=null);var e=this.diagram;if(e.Za(),null===t){try{null!==this.Vf&&(this.Vf.next()?t=this.Vf.value:this.Vf=null)}catch{this.Vf=null}null===t&&(0<e.highlighteds.count?this.Vf=e.highlighteds.iterator:0<e.selection.count&&(this.Vf=e.selection.iterator),null!==this.Vf&&this.Vf.next()&&(t=this.Vf.value))}if(null!==t){var n=e.animationManager;$a(n,"Scroll To Part");var s=this.scrollToPartPause;if(0<s){var l=Ya(this,t,[t]);if(1===l.length)e.Da(),e.Dr(t.actualBounds),e.eb("Scroll To Part");else{var u=function(){e.Da();for(var p=l.pop();0<l.length&&p instanceof Z&&p.isTreeExpanded&&(!(p instanceof wt)||p.isSubGraphExpanded);)p=l.pop();0<l.length?(p instanceof ut&&e.bv(p.actualBounds),p instanceof Z&&!p.isTreeExpanded&&(p.isTreeExpanded=!0),p instanceof wt&&!p.isSubGraphExpanded&&(p.isSubGraphExpanded=!0)):(p instanceof ut&&e.Dr(p.actualBounds),e.Il("LayoutCompleted",c)),e.eb("Scroll To Part")},c=function(){xu(u,(n.isEnabled?n.duration:0)+s)};e.wj("LayoutCompleted",c),u()}}else{var d=e.position.copy();e.Dr(t.actualBounds),d.$a(e.position)&&n.wc()}}},Wt.prototype.canScrollToPart=function(t){return void 0===t&&(t=null),(null===t||t instanceof ut)&&(0!==(t=this.diagram).selection.count||0!==t.highlighteds.count)&&t.allowHorizontalScroll&&t.allowVerticalScroll},Wt.prototype.collapseTree=function(t){void 0===t&&(t=null);var e=this.diagram;try{e.Da("Collapse Tree"),$a(e.animationManager,"Collapse Tree");var n=new tt;if(null!==t&&t.isTreeExpanded)t.collapseTree(),n.add(t);else if(null===t)for(var s=e.selection.iterator;s.next();){var l=s.value;l instanceof Z&&l.isTreeExpanded&&(l.collapseTree(),n.add(l))}e.P("TreeCollapsed",n)}finally{e.eb("Collapse Tree")}},Wt.prototype.canCollapseTree=function(t){void 0===t&&(t=null);var e=this.diagram;if(e.isReadOnly)return!1;if(null!==t){if(!(t instanceof Z&&t.isTreeExpanded))return!1;if(0<t.to().count)return!0}else for(t=e.selection.iterator;t.next();)if((e=t.value)instanceof Z&&e.isTreeExpanded&&0<e.to().count)return!0;return!1},Wt.prototype.expandTree=function(t){void 0===t&&(t=null);var e=this.diagram;try{e.Da("Expand Tree"),$a(e.animationManager,"Expand Tree");var n=new tt;if(null===t||t.isTreeExpanded){if(null===t)for(var s=e.selection.iterator;s.next();){var l=s.value;l instanceof Z&&!l.isTreeExpanded&&(l.expandTree(),n.add(l))}}else t.expandTree(),n.add(t);e.P("TreeExpanded",n)}finally{e.eb("Expand Tree")}},Wt.prototype.canExpandTree=function(t){void 0===t&&(t=null);var e=this.diagram;if(e.isReadOnly)return!1;if(null!==t){if(!(t instanceof Z)||t.isTreeExpanded)return!1;if(0<t.to().count)return!0}else for(t=e.selection.iterator;t.next();)if((e=t.value)instanceof Z&&!e.isTreeExpanded&&0<e.to().count)return!0;return!1},Wt.prototype.groupSelection=function(){var t=this.diagram,e=t.model;if(e.Oj()){var n=this.archetypeGroupData;if(null!==n){var s=null;try{t.currentCursor="wait",t.P("ChangingSelection",t.selection),t.Da("Group");for(var l=new tt,u=t.selection.iterator;u.next();){var c=u.value;c.Tc()&&c.canGroup()&&l.add(c)}for(var d=new tt,p=l.iterator;p.next();){var g=p.value;u=!1;for(var y=l.iterator;y.next();)if(g.Md(y.value)){u=!0;break}u||d.add(g)}if(0<d.count){var w=d.first().containingGroup;if(null!==w)for(;null!==w;){l=!1;for(var C=d.iterator;C.next();)if(!C.value.Md(w)){l=!0;break}if(!l)break;w=w.containingGroup}if(n instanceof wt)Do(n),null!==(s=n.copy())&&t.add(s);else if(e.Ku(n)){var D=e.copyNodeData(n);Vt(D)&&(e.lf(D),s=t.ci(D))}if(null!==s){null!==w&&this.isValidMember(w,s)&&(s.containingGroup=w);for(var M=d.iterator;M.next();){var E=M.value;this.isValidMember(s,E)&&(E.containingGroup=s)}t.clearSelection(!0),s.isSelected=!0}}t.P("SelectionGrouped",s)}finally{t.eb("Group"),t.P("ChangedSelection",t.selection),t.currentCursor=""}}}},Wt.prototype.canGroupSelection=function(){var t=this.diagram;if(t.isReadOnly||t.isModelReadOnly||!t.allowInsert||!t.allowGroup||!t.model.Oj()||null===this.archetypeGroupData)return!1;for(t=t.selection.iterator;t.next();){var e=t.value;if(e.Tc()&&e.canGroup())return!0}return!1},Wt.prototype.isValidMember=function(t,e){if(null===e||t===e||e instanceof z)return!1;if(null!==t){if(t===e||t.Md(e))return!1;var n=t.memberValidation;if(null!==n&&!n(t,e)||null===t.data&&null!==e.data||null!==t.data&&null===e.data)return!1}return null===(n=this.memberValidation)||n(t,e)},Wt.prototype.ungroupSelection=function(t){void 0===t&&(t=null);var e=this.diagram,n=e.model;if(n.Oj())try{e.currentCursor="wait",e.P("ChangingSelection",e.selection),e.Da("Ungroup");var s=new tt;if(null!==t)s.add(t);else for(var l=e.selection.iterator;l.next();){var u=l.value;u instanceof wt&&u.canUngroup()&&s.add(u)}var c=new tt;if(0<s.count){e.clearSelection(!0);for(var d=s.iterator;d.next();){var p=d.value;p.expandSubGraph();var g=p.containingGroup,y=null!==g&&null!==g.data?n.ua(g.data):void 0;c.addAll(p.memberParts);for(var w=c.iterator;w.next();){var C=w.value;if(C.isSelected=!0,!(C instanceof z)){var D=C.data;null!==D?n.Po(D,y):C.containingGroup=g}}e.remove(p)}}e.P("SelectionUngrouped",s,c)}finally{e.eb("Ungroup"),e.P("ChangedSelection",e.selection),e.currentCursor=""}},Wt.prototype.canUngroupSelection=function(t){void 0===t&&(t=null);var e=this.diagram;if(e.isReadOnly||e.isModelReadOnly||!e.allowDelete||!e.allowUngroup||!e.model.Oj())return!1;if(null!==t){if(!(t instanceof wt))return!1;if(t.canUngroup())return!0}else for(t=e.selection.iterator;t.next();)if((e=t.value)instanceof wt&&e.canUngroup())return!0;return!1},Wt.prototype.addTopLevelParts=function(t,e){var n=!0;for(t=Cp(t).iterator;t.next();){var s=t.value;null!==s.containingGroup&&(!e||this.isValidMember(null,s)?s.containingGroup=null:n=!1)}return n},Wt.prototype.collapseSubGraph=function(t){void 0===t&&(t=null);var e=this.diagram;try{e.Da("Collapse SubGraph"),$a(e.animationManager,"Collapse SubGraph");var n=new tt;if(null!==t&&t.isSubGraphExpanded)t.collapseSubGraph(),n.add(t);else if(null===t)for(var s=e.selection.iterator;s.next();){var l=s.value;l instanceof wt&&l.isSubGraphExpanded&&(l.collapseSubGraph(),n.add(l))}e.P("SubGraphCollapsed",n)}finally{e.eb("Collapse SubGraph")}},Wt.prototype.canCollapseSubGraph=function(t){void 0===t&&(t=null);var e=this.diagram;if(e.isReadOnly)return!1;if(null!==t)return!!(t instanceof wt&&t.isSubGraphExpanded);for(t=e.selection.iterator;t.next();)if((e=t.value)instanceof wt&&e.isSubGraphExpanded)return!0;return!1},Wt.prototype.expandSubGraph=function(t){void 0===t&&(t=null);var e=this.diagram;try{e.Da("Expand SubGraph"),$a(e.animationManager,"Expand SubGraph");var n=new tt;if(null===t||t.isSubGraphExpanded){if(null===t)for(var s=e.selection.iterator;s.next();){var l=s.value;l instanceof wt&&!l.isSubGraphExpanded&&(l.expandSubGraph(),n.add(l))}}else t.expandSubGraph(),n.add(t);e.P("SubGraphExpanded",n)}finally{e.eb("Expand SubGraph")}},Wt.prototype.canExpandSubGraph=function(t){void 0===t&&(t=null);var e=this.diagram;if(e.isReadOnly)return!1;if(null!==t)return t instanceof wt&&!t.isSubGraphExpanded;for(t=e.selection.iterator;t.next();)if((e=t.value)instanceof wt&&!e.isSubGraphExpanded)return!0;return!1},Wt.prototype.editTextBlock=function(t){void 0===t&&(t=null);var e=this.diagram,n=e.toolManager.findTool("TextEditing");if(null!==n){if(null===t){t=null;for(var s=e.selection.iterator;s.next();){var l=s.value;if(l.canEdit()){t=l;break}}if(null===t)return;t=t.vl(function(u){return u instanceof Kt&&u.editable})}null!==t&&(e.currentTool=null,n.textBlock=t,e.currentTool=n)}},Wt.prototype.canEditTextBlock=function(t){void 0===t&&(t=null);var e=this.diagram;if(e.isReadOnly||e.isModelReadOnly||!e.allowTextEdit||null===e.toolManager.findTool("TextEditing"))return!1;if(null!==t){if(!(t instanceof Kt))return!1;if(null!==(t=t.part)&&t.canEdit())return!0}else for(e=e.selection.iterator;e.next();)if((t=e.value).canEdit()&&null!==(t=t.vl(function(n){return n instanceof Kt&&n.editable})))return!0;return!1},Wt.prototype.showContextMenu=function(t){var e=this.diagram,n=e.toolManager.findTool("ContextMenu");if(null!==n&&(void 0===t&&(t=0<e.selection.count?e.selection.first():e),null!==(t=n.findObjectWithContextMenu(t)))){var s=e.lastInput,l=null;t instanceof lt?l=t.ia(ht):e.viewportBounds.ba(s.documentPoint)||(l=new A((l=e.viewportBounds).x+l.width/2,l.y+l.height/2)),null!==l&&(s.viewPoint=e.Ro(l),s.documentPoint=l,s.left=!1,s.right=!0,s.up=!0),e.currentTool=n,g1(n,!1,t)}},Wt.prototype.canShowContextMenu=function(t){var e=this.diagram,n=e.toolManager.findTool("ContextMenu");return null!==n&&(void 0===t&&(t=0<e.selection.count?e.selection.first():e),null!==n.findObjectWithContextMenu(t))},Wt.prototype.computeEffectiveCollection=function(t,e){var n=this.diagram,s=n.toolManager.findTool("Dragging"),l=n.currentTool===s;if(void 0===e&&(e=l?s.dragOptions:n.Em),s=new xt,null===t)return s;for(var u=t.iterator;u.next();)ys(n,s,u.value,l,e);if(null!==n.draggedLink&&e.dragsLink)return s;for(u=t.iterator;u.next();)(t=u.value)instanceof z&&((null===(e=t.fromNode)||s.contains(e))&&(null===(e=t.toNode)||s.contains(e))||s.remove(t));return s},St.Object.defineProperties(Wt.prototype,{diagram:{get:function(){return this.H}},copiesClipboardData:{get:function(){return this.m},set:function(t){this.m=t}},copiesConnectedLinks:{get:function(){return this.u},set:function(t){this.u=t}},deletesConnectedLinks:{get:function(){return this.Ga},set:function(t){this.Ga=t}},copiesTree:{get:function(){return this.ga},set:function(t){this.ga=t}},deletesTree:{get:function(){return this.hb},set:function(t){this.hb=t}},copiesParentKey:{get:function(){return this.W},set:function(t){this.W=t}},copiesGroupKey:{get:function(){return this.F},set:function(t){this.F=t}},archetypeGroupData:{get:function(){return this.j},set:function(t){this.j=t}},memberValidation:{get:function(){return this.dj},set:function(t){this.dj=t}},defaultScale:{get:function(){return this.diagram.defaultScale},set:function(t){this.diagram.defaultScale=t}},zoomFactor:{get:function(){return this.Db},set:function(t){1<t||Y("zoomFactor must be larger than 1.0, not: "+t),this.Db=t}},isZoomToFitRestoreEnabled:{get:function(){return this.cb},set:function(t){this.cb=t}},scrollToPartPause:{get:function(){return this.nb},set:function(t){this.nb=t}}}),Wt.className="CommandHandler",lf=function(){return new Wt},lt.prototype.cloneProtected=function(t){t.o=6144|this.o,t.tb=this.tb,t.Yb=this.Yb,t.pa.assign(this.pa),t.$c=this.$c.J(),t.Ib=null!==this.Ib?this.Ib.copy():null,t.xa=this.xa,t.Gb=this.Gb,t.Ag=this.Ag.J(),t.qc.assign(this.qc),t.Eb.assign(this.Eb),t.bc.assign(this.bc),t.Gn=this.Gn,null!==this.aa&&(t.aa=this.aa.copy()),t.Fb=this.Fb.J(),t.fk=this.fk.J(),t.Ln=this.Ln,t.rg=this.rg,null!==this.Ra&&(t.Ra=this.Ra.copy()),null!==this.A&&(t.A=this.A.ic?this.A:this.A.copy()),null!==this.sh&&(t.sh=Gc(this.sh)),null!==this.ib&&(t.ib=this.ib.copy())},lt.prototype.zw=function(t){var e=this.sh;if(_n(e)){for(var n=0;n<e.length;n++)if(e[n]===t)return}else this.sh=e=[];e.push(t)},lt.prototype.qf=function(t){t.Hn=null,t.jj=null,t.w()},lt.prototype.clone=function(){var t=new this.constructor;if(this.cloneProtected(t),null!==this.sh)for(var e=0;e<this.sh.length;e++){var n=this.sh[e];t[n]=this[n]}return t},lt.prototype.copy=function(){return this.clone()},(_=lt.prototype).ob=function(t){t.classType===z?0===t.name.indexOf("Orient")?this.segmentOrientation=t:Y("Unknown Link enum value for GraphObject.segmentOrientation property: "+t):t.classType===lt&&(this.stretch=t)},_.toString=function(){return la(this.constructor)+"#"+Cn(this)},_.ih=function(){null!==this.A&&(this.A.ic=!0)},_.Rc=function(){if(null===this.aa){var t=new Cm;t.Qi=Oe,t.tj=Oe,t.Oi=10,t.rj=10,t.Pi=0,t.sj=0,this.aa=t}},_.bb=function(t,e,n,s,l,u,c){var d=this.part;if(null!==d&&(d.$j(t,e,n,s,l,u,c),n===this&&t===re&&Bu(this)&&Vu(this,d,e),u=this.diagram,null===this.animationTriggers||null===u||!u.ji||u.undoManager.isUndoingRedoing||u.animationManager.lm||null!==(t=this.animationTriggers.get(e))&&u.animationManager.isEnabled&&!u.animationManager.isTicking&&(null===this.Mn&&(this.Mn=new xt),c=0===u.undoManager.transactionLevel,t.startCondition===ap?c=!0:t.startCondition===lm&&(c=!1),c?(function YS(t,e){null!==(t=t.hk)&&(t.duration&&(e.duration=t.duration),t.finished&&(e.finished=t.finished),t.easing&&(e.easing=t.easing))}(t,u=new Nn),null!==(c=this.Mn.get(t))&&c.stop(),this.Mn.add(t,u),u.au=this,u.rw=t,u.add(this,e,s,l),u.start()):($a(u.animationManager,"Trigger"),u.animationManager.defaultAnimation.add(this,e,s,l))),this instanceof $&&n===d&&0!=(16777216&d.o)&&null!==d.data))for(s=(n=this.R.s).length,l=0;l<s;l++)(d=n[l])instanceof $&&Kn(d,function(p){null!==p.data&&0!=(16777216&p.o)&&p.Ka(e)})},_.Hr=function(t){return this.bindingId===t?this:null},_.g=function(t,e,n){this.bb(re,t,this,e,n)},_.ve=function(t,e,n,s){var l=this.qc;if(l.h(t,e,n,s),1!==this.xa||0!==this.Gb){null===this.Ib&&(this.Ib=new Dt);var u=this.Ib;u.reset(),this.Qn(u,t,e,n,s),u.So(l)}},_.Vw=function(t,e,n){if(!1===this.pickable)return!1;var s=this.naturalBounds;return e=t.rf(e),n?ni(t.x,t.y,0,0,0,s.height)<=e||ni(t.x,t.y,0,s.height,s.width,s.height)<=e||ni(t.x,t.y,s.width,s.height,s.width,0)<=e||ni(t.x,t.y,s.width,0,0,0)<=e:t.td(0,0)<=e&&t.td(0,s.height)<=e&&t.td(s.width,0)<=e&&t.td(s.width,s.height)<=e},_.ke=function(){return!0},_.ba=function(t){var e=A.alloc();e.assign(t),this.transform.Fa(e);var n=this.actualBounds;if(!n.v())return A.free(e),!1;var s=this.diagram;if(null!==s&&s.jt){var l=s.yl("extraTouchThreshold"),u=s.yl("extraTouchArea"),c=u/2,d=this.naturalBounds,p=1/(s=this.uf()*s.scale);if(d.width*s<l&&d.height*s<l)return t=vr(n.x-c*p,n.y-c*p,n.width+u*p,n.height+u*p,e.x,e.y),A.free(e),t}return l=!1,(this instanceof At||this instanceof Ct?vr(n.x-5,n.y-5,n.width+10,n.height+10,e.x,e.y):n.ba(e))&&(l=!(this.ib&&!this.ib.ba(e))&&(!!(null!==this.areaBackground&&n.ba(e)||null!==this.Yb&&this.bc.ba(t))||this.Xg(t))),A.free(e),l},_.Xg=function(t){var e=this.naturalBounds;return vr(0,0,e.width,e.height,t.x,t.y)},_.Ee=function(t){if(0===this.angle)return this.actualBounds.Ee(t);var e=this.naturalBounds;e=U.allocAt(0,0,e.width,e.height);var n=this.transform,s=!1,l=A.allocAt(t.x,t.y);return e.ba(n.Ld(l))&&(l.h(t.x,t.bottom),e.ba(n.Ld(l))&&(l.h(t.right,t.bottom),e.ba(n.Ld(l))&&(l.h(t.right,t.y),e.ba(n.Ld(l))&&(s=!0)))),A.free(l),U.free(e),s},_.Wg=function(t,e){if(void 0===e)return t.Ee(this.actualBounds);var n=this.naturalBounds,s=!1,l=A.allocAt(0,0);return t.ba(e.Fa(l))&&(l.h(0,n.height),t.ba(e.Fa(l))&&(l.h(n.width,n.height),t.ba(e.Fa(l))&&(l.h(n.width,0),t.ba(e.Fa(l))&&(s=!0)))),A.free(l),s},_.Sc=function(t,e){if(void 0===e&&(e=this.transform,0===this.angle))return t.Sc(this.actualBounds);var n=this.naturalBounds,s=A.allocAt(0,0),l=A.allocAt(0,n.height),u=A.allocAt(n.width,n.height),c=A.allocAt(n.width,0),d=!1;if(t.ba(e.Fa(s))||t.ba(e.Fa(l))||t.ba(e.Fa(u))||t.ba(e.Fa(c)))d=!0;else{n=U.allocAt(0,0,n.width,n.height);var p=A.allocAt(t.x,t.y);n.ba(e.Ld(p))?d=!0:(p.h(t.x,t.bottom),n.ba(e.Ld(p))?d=!0:(p.h(t.right,t.bottom),n.ba(e.Ld(p))?d=!0:(p.h(t.right,t.y),n.ba(e.Ld(p))&&(d=!0)))),A.free(p),U.free(n),!d&&(R.Rr(t,s,l)||R.Rr(t,l,u)||R.Rr(t,u,c)||R.Rr(t,c,s))&&(d=!0)}return A.free(s),A.free(l),A.free(u),A.free(c),d},_.ia=function(t,e){if(void 0===e&&(e=new A),t instanceof ot){var n=this.naturalBounds;e.h(t.x*n.width+t.offsetX,t.y*n.height+t.offsetY)}else e.set(t);return this.ge.Fa(e),e},_.gi=function(t){void 0===t&&(t=new U);var e=this.naturalBounds,n=this.ge,s=A.allocAt(0,0).transform(n);return t.h(s.x,s.y,0,0),s.h(e.width,0).transform(n),Ke(t,s.x,s.y,0,0),s.h(e.width,e.height).transform(n),Ke(t,s.x,s.y,0,0),s.h(0,e.height).transform(n),Ke(t,s.x,s.y,0,0),A.free(s),t},_.fi=function(){var t=this.ge;return 1===t.m11&&0===t.m12?t=0:0>(t=180*Math.atan2(t.m12,t.m11)/Math.PI)&&(t+=360),t},_.uf=function(){if(0==(4096&this.o))return this.yk;var t=this.xa;return null!==this.panel?t*this.panel.uf():t},_.Nr=function(t,e){return void 0===e&&(e=new A),e.assign(t),this.ge.Ld(e),e},_.Or=function(t,e,n){return this.Kj(t.x,t.y,e.x,e.y,n)},_.Kj=function(t,e,n,s,l){var u=this.transform,c=1/(u.m11*u.m22-u.m12*u.m21),d=u.m22*c,p=-u.m12*c,g=-u.m21*c,y=u.m11*c,w=c*(u.m21*u.dy-u.m22*u.dx),C=c*(u.m12*u.dx-u.m11*u.dy);return null!==this.areaBackground?R.wf((u=this.actualBounds).left,u.top,u.right,u.bottom,t,e,n,s,l):(c=t*d+e*g+w,t=t*p+e*y+C,e=n*d+s*g+w,n=n*p+s*y+C,l.h(0,0),n=R.wf(0,0,(s=this.naturalBounds).width,s.height,c,t,e,n,l),l.transform(u),n)},lt.prototype.measure=function(t,e,n,s){if(!1!==da(this)){var l=this.Ag,u=l.right+l.left;l=l.top+l.bottom,t=Math.max(t-u,0),e=Math.max(e-l,0),n=Math.max((n||0)-u,0),s=Math.max((s||0)-l,0),l=this.desiredSize;var c=0;this instanceof Ct&&(c=this.strokeWidth),90===(u=this.angle)||270===u?(t=isFinite(l.height)?l.height+c:t,e=isFinite(l.width)?l.width+c:e):(t=isFinite(l.width)?l.width+c:t,e=isFinite(l.height)?l.height+c:e),l=n||0,c=s||0;var d=this instanceof $;switch(vs(this,!0)){case Ve:c=l=0,d&&(e=t=1/0);break;case Ge:isFinite(t)&&t>n&&(l=t),isFinite(e)&&e>s&&(c=e);break;case In:isFinite(t)&&t>n&&(l=t),c=0,d&&(e=1/0);break;case Wn:isFinite(e)&&e>s&&(c=e),l=0,d&&(t=1/0)}var p=this.minSize;l>(d=this.maxSize).width&&p.width<d.width&&(l=d.width),c>d.height&&p.height<d.height&&(c=d.height),n=Math.max(l/this.scale,p.width),s=Math.max(c/this.scale,p.height),d.width<n&&(n=Math.min(p.width,n)),d.height<s&&(s=Math.min(p.height,s)),t=Math.min(d.width,t),e=Math.min(d.height,e),t=Math.max(n,t),e=Math.max(s,e),(90===u||270===u)&&(u=t,t=e,e=u,u=n,n=s,s=u),this.qc.ja(),this.El(t,e,n,s),this.qc.freeze(),this.qc.v()||Y("Non-real measuredBounds has been set. Object "+this+", measuredBounds: "+this.qc.toString()),lr(this,!1)}},lt.prototype.El=function(){},lt.prototype.li=function(){return!1},lt.prototype.arrange=function(t,e,n,s,l){this.Jk();var u=U.alloc();u.assign(this.Eb),this.Eb.ja(),!1===ii(this)?this.Eb.h(t,e,n,s):this.Vg(t,e,n,s),this.Eb.freeze(),this.ib=void 0===l?null:l,n=!1,void 0!==l?n=!0:(null===(l=this.panel)||l.type!==$.TableRow&&l.type!==$.TableColumn||(l=l.panel),null!==l&&(l=l.bc,s=this.measuredBounds,null!==this.areaBackground&&(s=this.Eb),n=e+s.height,s=t+s.width,n=!(0<=t+.05&&s<=l.width+.05&&0<=e+.05&&n<=l.height+.05),this instanceof Kt&&(this.kq>(t=this.naturalBounds).height||this.yb>t.width))&&(n=!0)),this.o=n?256|this.o:-257&this.o,this.Eb.v()||Y("Non-real actualBounds has been set. Object "+this+", actualBounds: "+this.Eb.toString()),this.Fl(u,this.Eb),$s(this,!1),U.free(u)},(_=lt.prototype).Vg=function(){},_.Fl=function(t,e){var n=this.part;null!==n&&null!==n.diagram&&(n.selectionObject!==this&&n.resizeObject!==this&&n.rotateObject!==this||X0(n,!0),this.N(),Kc(t,e)||(n.dh(),this.wn(n)))},_.wn=function(t){null!==this.portId&&(X0(t,!0),t instanceof Z&&eC(t,this))},_.tc=function(t,e){if(this.visible){var n=this.opacity;if(0!==n){var s=this instanceof $&&(this.type===$.TableRow||this.type===$.TableColumn),l=this.Eb;if(s||0!==l.width&&0!==l.height&&!isNaN(l.x)&&!isNaN(l.y)){var u=1;if(1!==n&&(t.globalAlpha=(u=t.globalAlpha)*n),s){l=this.Eb,s=this.bc;var c=this.areaBackground,d=this.Yb;null===c&&null===d||t.Pc(),null!==c&&(Si(this,t,c,!0,!0,s,l),c instanceof Rt&&c.type===Ji?(t.beginPath(),t.rect(l.x,l.y,l.width,l.height),t.sf(c)):t.fillRect(l.x,l.y,l.width,l.height)),null!==d&&(Si(this,t,d,!0,!1,s,l),d instanceof Rt&&d.type===Ji?(t.beginPath(),t.rect(l.x,l.y,l.width,l.height),t.sf(d)):t.fillRect(l.x,l.y,l.width,l.height)),this.ai(t,e)}else if(!this.Qw(t,e)){this instanceof z&&this.Rj(!1),s=this.transform,c=this.panel,0!=(4096&this.o)&&wm(this);var p=this.part;d=!1;var w,g=0;if(p&&e.Ge("drawShadows")&&(d=p.isShadowed)){var y=p.shadowOffset;g=Math.max(y.y,y.x)*e.scale*e.kc}if(y=this.li(),!(w=e.Vi||!y)){var b,C=this.naturalBounds,D=(w=this.lh).m11,M=w.m21,E=w.dx,I=w.m12,P=w.m22,k=w.dy,O=b=0;w=b*D+O*M+E;var L=b*I+O*P+k,H=(b=C.width+g)*D+(O=0)*M+E;b=b*I+O*P+k,O=Math.min(w,H);var J=Math.min(L,b),nt=Math.max(w+0,H)-O,et=Math.max(L+0,b)-J;w=O,L=J,H=(b=C.width+g)*D+(O=C.height+g)*M+E,b=b*I+O*P+k,O=Math.min(w,H),J=Math.min(L,b),nt=Math.max(w+nt,H)-O,et=Math.max(L+et,b)-J,w=O,L=J,H=(b=0)*D+(O=C.height+g)*M+E,b=b*I+O*P+k,O=Math.min(w,H),J=Math.min(L,b),nt=Math.max(w+nt,H)-O,et=Math.max(L+et,b)-J,L=J,D=(g=e.viewportBounds).y,w=!((w=O)>g.width+(C=g.x)||C>nt+w||L>g.height+D||D>et+L)}if(w){if(w=0!=(256&this.o),t.clipInsteadOfFill&&(w=!1),this instanceof Kt&&(t.font=this.font),w){if(L=c.ke()?c.naturalBounds:c.actualBounds,null!==this.ib?(nt=(C=this.ib).x,et=C.y,g=C.width,C=C.height):(nt=Math.max(l.x,L.x),et=Math.max(l.y,L.y),g=Math.min(l.right,L.right)-nt,C=Math.min(l.bottom,L.bottom)-et),nt>l.width+l.x||l.x>L.width+L.x)return void(1!==n&&(t.globalAlpha=u));t.save(),t.beginPath(),t.rect(nt,et,g,C),t.clip()}if(y){if(!p.isVisible())return void(1!==n&&(t.globalAlpha=u));d&&(t.iv((L=p.shadowOffset).x*e.scale*e.kc,L.y*e.scale*e.kc,p.shadowBlur),Ws(t),t.shadowColor=p.shadowColor)}d&&!0===this.shadowVisible?Ws(t):d&&!1===this.shadowVisible&&ga(t),p=this.naturalBounds,null!==this.areaBackground&&(t.Pc(),Si(this,t,this.areaBackground,!0,!0,p,l),this.areaBackground instanceof Rt&&this.areaBackground.type===Ji?(t.beginPath(),t.rect(l.x,l.y,l.width,l.height),t.sf(this.areaBackground)):t.fillRect(l.x,l.y,l.width,l.height)),t.transform(s.m11,s.m12,s.m21,s.m22,s.dx,s.dy),d&&(null!==c&&0!=(512&c.o)||null!==c&&(c.type===$.Auto||c.type===$.Spot)&&c.vb()!==this)&&null===this.shadowVisible&&ga(t),null!==this.Yb&&(t.Pc(),jl(this,t,p,l)),d&&(null!==this.Yb||null!==this.areaBackground||null!==c&&0!=(512&c.o)||null!==c&&(c.type===$.Auto||c.type===$.Spot)&&c.vb()!==this)?(w0(this,!0),null===this.shadowVisible&&ga(t)):w0(this,!1),this.ai(t,e),d&&0!=(512&this.o)&&Ws(t),y&&d&&ga(t),w&&(t.restore(),t.Oc(this instanceof $)),s.Ur()||t.transform(s.m22*(e=1/(s.m11*s.m22-s.m12*s.m21)),-s.m12*e,-s.m21*e,s.m11*e,e*(s.m21*s.dy-s.m22*s.dx),e*(s.m12*s.dx-s.m11*s.dy))}}1!==n&&(t.globalAlpha=u)}}}},_.Qw=function(){return!1},_.ai=function(){},_.jg=function(t){if(t instanceof $)t:{if(this!==t&&null!==t)for(var e=this.panel;null!==e;){if(e===t){t=!0;break t}e=e.panel}t=!1}else t=!1;return t},_.zf=function(){if(!this.visible)return!1;var t=this.panel;return null===t||t.zf()},_.yf=function(){for(var t=this instanceof $?this:this.panel;null!==t&&t.isEnabled;)t=t.panel;return null===t},_.Qn=function(t,e,n,s,l){if(1!==this.xa&&t.scale(this.xa),0!==this.Gb){var u=A.alloc();u.pi(e,n,s,l,ht),t.rotate(this.Gb,u.x,u.y),A.free(u)}},_.w=function(t){if(!da(this)){void 0===t&&(t=!1),lr(this,!0),$s(this,!0);var e=this.panel;null===e||t||e.w()}},_.Mj=function(){da(this)||(lr(this,!0),$s(this,!0))},_.Jk=function(){0==(2048&this.o)&&(Sf(this,!0),Vl(this,!0))},_.Iu=function(){Vl(this,!0)},_.N=function(){var t=this.part;null!==t&&t.N()},_.ni=function(t){this.Uf=t},_.ns=function(){},_.fv=function(t){return this.pa=t,Sp(this),!0},_.Ul=function(t,e){(this.pa.x!==t||this.pa.y!==e)&&(this.pa.h(t,e),this.Jk())},_.Sv=function(){return 0},_.bind=function(t,e,n,s){var l=null;return(l="string"==typeof t?new xe(t,e,n,s):t).sd=this,null!==(t=this.Yg())&&Im(t)&&Y("Cannot add a Binding to a template that has already been copied: "+l),null===this.localBindings&&(this.localBindings=new tt),this.localBindings.add(l),this},_.set=function(t){return Object.assign(this,t),this},_.ku=function(t){return b1(this,t),this},_.apply=function(t){return t(this),this},_.Vl=function(t){return Lh(this,t),this},_.Yy=function(){return this.Yg()},_.Yg=function(){for(var t=this instanceof $?this:this.panel;null!==t;){if(null!==t.allBindings)return t;t=t.panel}return null},_.mv=function(t){return t.sd=this,null===this.animationTriggers&&(this.animationTriggers=new xt),this.animationTriggers.add(t.propertyName,t),this},St.Object.defineProperties(lt.prototype,{bindingId:{get:function(){return null!==this.A?this.A.bp:-1},set:function(t){this.bindingId!==t&&(null===this.A&&(this.A=new Hl),this.A.bp=t)}},localBindings:{get:function(){return null!==this.A?this.A.Ff:null},set:function(t){this.localBindings!==t&&(null===this.A&&(this.A=new Hl),this.A.Ff=t)}},srcBindings:{get:function(){return null!==this.A?this.A.Wo:null},set:function(t){this.srcBindings!==t&&(null===this.A&&(this.A=new Hl),this.A.Wo=t)}},shadowVisible:{get:function(){return null!==this.A?this.A.wi:null},set:function(t){var e=this.shadowVisible;e!==t&&(hn(this),this.A.wi=t,this.N(),this.g("shadowVisible",e,t))}},enabledChanged:{get:function(){return null!==this.A?this.A.Hc:null},set:function(t){var e=this.enabledChanged;e!==t&&(hn(this),this.A.Hc=t,this.g("enabledChanged",e,t))}},segmentOrientation:{get:function(){return null!==this.Ra?this.Ra.Oq:di},set:function(t){var e=this.segmentOrientation;e!==t&&(null===this.Ra&&(this.Ra=new Hu),this.Ra.Oq=t,this.w(),this.g("segmentOrientation",e,t),t===di&&(this.angle=0))}},segmentIndex:{get:function(){return null!==this.Ra?this.Ra.u:-1/0},set:function(t){t=Math.round(t);var e=this.segmentIndex;e!==t&&(null===this.Ra&&(this.Ra=new Hu),this.Ra.u=t,this.w(),this.g("segmentIndex",e,t))}},segmentFraction:{get:function(){return null!==this.Ra?this.Ra.m:0},set:function(t){isNaN(t)||0>t?t=0:1<t&&(t=1);var e=this.segmentFraction;e!==t&&(null===this.Ra&&(this.Ra=new Hu),this.Ra.m=t,this.w(),this.g("segmentFraction",e,t))}},segmentOffset:{get:function(){return null!==this.Ra?this.Ra.F:Va},set:function(t){var e=this.segmentOffset;e.C(t)||(t=t.J(),null===this.Ra&&(this.Ra=new Hu),this.Ra.F=t,this.w(),this.g("segmentOffset",e,t))}},stretch:{get:function(){return null!==this.A?this.A.$f:io},set:function(t){var e=this.stretch;e!==t&&(hn(this),this.A.$f=t,this.w(),this.g("stretch",e,t))}},name:{get:function(){return null!==this.A?this.A.va:""},set:function(t){var e=this.name;e!==t&&(hn(this),this.A.va=t,null!==this.part&&(this.part.Kh=null),this.g("name",e,t))}},opacity:{get:function(){return this.tb},set:function(t){var e=this.tb;e!==t&&((0>t||1<t)&&pe(t,"0 <= value <= 1",lt,"opacity"),this.tb=t,this.g("opacity",e,t),e=this.part,null!==(t=this.diagram)&&null!==e&&t.N(Xh(e,e.actualBounds)))}},visible:{get:function(){return 0!=(1&this.o)},set:function(t){var e=0!=(1&this.o);e!==t&&(this.o^=1,this.g("visible",e,t),null!==(e=this.panel)?e.w():this.li()&&this.Ub(t),this.N(),C0(this))}},pickable:{get:function(){return 0!=(2&this.o)},set:function(t){var e=0!=(2&this.o);e!==t&&(this.o^=2,this.g("pickable",e,t))}},fromLinkableDuplicates:{get:function(){return 0!=(4&this.o)},set:function(t){var e=0!=(4&this.o);e!==t&&(this.o^=4,this.g("fromLinkableDuplicates",e,t))}},fromLinkableSelfNode:{get:function(){return 0!=(8&this.o)},set:function(t){var e=0!=(8&this.o);e!==t&&(this.o^=8,this.g("fromLinkableSelfNode",e,t))}},toLinkableDuplicates:{get:function(){return 0!=(16&this.o)},set:function(t){var e=0!=(16&this.o);e!==t&&(this.o^=16,this.g("toLinkableDuplicates",e,t))}},toLinkableSelfNode:{get:function(){return 0!=(32&this.o)},set:function(t){var e=0!=(32&this.o);e!==t&&(this.o^=32,this.g("toLinkableSelfNode",e,t))}},isPanelMain:{get:function(){return 0!=(64&this.o)},set:function(t){var e=0!=(64&this.o);e!==t&&(this.o^=64,this.w(),this.g("isPanelMain",e,t))}},isActionable:{get:function(){return 0!=(128&this.o)},set:function(t){var e=0!=(128&this.o);e!==t&&(this.o^=128,this.g("isActionable",e,t))}},areaBackground:{get:function(){return null!==this.A?this.A.nb:null},set:function(t){var e=this.areaBackground;e!==t&&(null!==t&&Gu(t,"GraphObject.areaBackground"),t instanceof Rt&&t.freeze(),hn(this),this.A.nb=t,this.N(),this.g("areaBackground",e,t))}},background:{get:function(){return this.Yb},set:function(t){var e=this.Yb;e!==t&&(null!==t&&Gu(t,"GraphObject.background"),t instanceof Rt&&t.freeze(),this.Yb=t,this.N(),this.g("background",e,t))}},part:{get:function(){if(this.li())return this;if(null!==this.jj)return this.jj;var t;for(t=this.panel;t;){if(t instanceof ut)return this.jj=t;t=t.panel}return null}},svg:{get:function(){return this.kr},set:function(t){this.kr=t}},panel:{get:function(){return this.Uf}},layer:{get:function(){var t=this.part;return null!==t?t.layer:null}},diagram:{get:function(){var t=this.part;return null!==t?t.diagram:null}},position:{get:function(){return this.pa},set:function(t){var e=t.x,n=t.y,s=this.pa,l=s.x;s=s.y,(l===e||isNaN(l)&&isNaN(e))&&(s===n||isNaN(s)&&isNaN(n))?this.ns():(t=t.copy(),this.fv(t,l,s)&&this.g("position",new A(l,s),t))}},actualBounds:{get:function(){return this.Eb}},scale:{get:function(){return this.xa},set:function(t){var e=this.xa;e!==t&&(0>=t&&Y("GraphObject.scale for "+this+" must be greater than zero, not: "+t),this.xa=t,this.w(),this.g("scale",e,t))}},angle:{get:function(){return this.Gb},set:function(t){var e=this.Gb;e!==t&&(0>(t%=360)&&(t+=360),e!==t&&(this.Gb=t,C0(this),this.w(),this.g("angle",e,t)))}},desiredSize:{get:function(){return this.$c},set:function(t){var e=t.width,n=t.height,s=this.$c,l=s.width,u=s.height;(l===e||isNaN(l)&&isNaN(e))&&(u===n||isNaN(u)&&isNaN(n))||(this.$c=t=t.J(),this.w(),this instanceof Ct&&this.mc(),this.g("desiredSize",s,t),Bu(this)&&null!==(t=this.part)&&(Vu(this,t,"width"),Vu(this,t,"height")))}},width:{get:function(){return this.$c.width},set:function(t){var e=this.$c.width;e===t||isNaN(e)&&isNaN(t)||(e=this.$c,this.$c=t=new gt(t,this.$c.height).freeze(),this.w(),this instanceof Ct&&this.mc(),this.g("desiredSize",e,t),Bu(this)&&null!==(t=this.part)&&Vu(this,t,"width"))}},height:{get:function(){return this.$c.height},set:function(t){var e=this.$c.height;e===t||isNaN(e)&&isNaN(t)||(e=this.$c,this.$c=t=new gt(this.$c.width,t).freeze(),this.w(),this instanceof Ct&&this.mc(),this.g("desiredSize",e,t),Bu(this)&&null!==(t=this.part)&&Vu(this,t,"height"))}},minSize:{get:function(){return null!==this.A?this.A.u:_h},set:function(t){var e=this.minSize;e.C(t)||(t=t.copy(),isNaN(t.width)&&(t.width=0),isNaN(t.height)&&(t.height=0),t.freeze(),hn(this),this.A.u=t,this.w(),this.g("minSize",e,t))}},maxSize:{get:function(){return null!==this.A?this.A.m:cs},set:function(t){var e=this.maxSize;e.C(t)||(t=t.copy(),isNaN(t.width)&&(t.width=1/0),isNaN(t.height)&&(t.height=1/0),t.freeze(),hn(this),this.A.m=t,this.w(),this.g("maxSize",e,t))}},measuredBounds:{get:function(){return this.qc}},naturalBounds:{get:function(){return this.bc}},margin:{get:function(){return this.Ag},set:function(t){"number"==typeof t&&(t=new Ht(t));var e=this.Ag;e.C(t)||(this.Ag=t=t.J(),this.w(),this.g("margin",e,t))}},transform:{get:function(){return 0!=(2048&this.o)&&wm(this),this.Bb}},ge:{get:function(){return 0!=(4096&this.o)&&wm(this),this.lh}},animationTriggers:{get:function(){return null!==this.A?this.A.cb:null},set:function(t){this.animationTriggers!==t&&(hn(this),this.A.cb=t)}},reshapingBehavior:{get:function(){return null!==this.A?this.A.ui:Ve},set:function(t){this.reshapingBehavior!==t&&(hn(this),this.A.ui=t)}},alignment:{get:function(){return this.Fb},set:function(t){var e=this.Fb;e.C(t)||(t.Fc()&&!t.Sb()&&Y("GraphObject.alignment for "+this+" must be a real Spot or Spot.Default, not: "+t),this.Fb=t=t.J(),Sp(this),this.g("alignment",e,t))}},column:{get:function(){return this.rg},set:function(t){t=Math.round(t);var e=this.rg;e!==t&&(0>t&&pe(t,">= 0",lt,"column"),this.rg=t,this.w(),this.g("column",e,t))}},columnSpan:{get:function(){return null!==this.A?this.A.Db:1},set:function(t){t=Math.round(t);var e=this.columnSpan;e!==t&&(1>t&&pe(t,">= 1",lt,"columnSpan"),hn(this),this.A.Db=t,this.w(),this.g("columnSpan",e,t))}},row:{get:function(){return this.Ln},set:function(t){t=Math.round(t);var e=this.Ln;e!==t&&(0>t&&pe(t,">= 0",lt,"row"),this.Ln=t,this.w(),this.g("row",e,t))}},rowSpan:{get:function(){return null!==this.A?this.A.vi:1},set:function(t){t=Math.round(t);var e=this.rowSpan;e!==t&&(1>t&&pe(t,">= 1",lt,"rowSpan"),hn(this),this.A.vi=t,this.w(),this.g("rowSpan",e,t))}},spanAllocation:{get:function(){return null!==this.A?this.A.xi:null},set:function(t){var e=this.spanAllocation;e!==t&&(hn(this),this.A.xi=t,this.w(),this.g("spanAllocation",e,t))}},alignmentFocus:{get:function(){return this.fk},set:function(t){var e=this.fk;e.C(t)||(this.fk=t=t.J(),this.w(),this.g("alignmentFocus",e,t))}},portId:{get:function(){return this.Gn},set:function(t){var e=this.Gn;if(e!==t){var n=this.part;null===n||n instanceof Z||Y("Cannot set portID on a Link: "+t),null!==e&&null!==n&&ey(n,this),this.Gn=t,null!==t&&null!==n&&(n.He=!0,nC(n,this)),this.g("portId",e,t)}}},toSpot:{get:function(){return null!==this.aa?this.aa.tj:Oe},set:function(t){var e=this.toSpot;e.C(t)||(t=t.J(),this.Rc(),this.aa.tj=t,this.g("toSpot",e,t),Bl(this))}},toEndSegmentLength:{get:function(){return null!==this.aa?this.aa.rj:10},set:function(t){var e=this.toEndSegmentLength;e!==t&&(0>t&&pe(t,">= 0",lt,"toEndSegmentLength"),this.Rc(),this.aa.rj=t,this.g("toEndSegmentLength",e,t),Bl(this))}},toShortLength:{get:function(){return null!==this.aa?this.aa.sj:0},set:function(t){var e=this.toShortLength;e!==t&&(this.Rc(),this.aa.sj=t,this.g("toShortLength",e,t),Bl(this))}},toLinkable:{get:function(){return null!==this.aa?this.aa.sr:null},set:function(t){var e=this.toLinkable;e!==t&&(this.Rc(),this.aa.sr=t,this.g("toLinkable",e,t))}},toMaxLinks:{get:function(){return null!==this.aa?this.aa.tr:1/0},set:function(t){var e=this.toMaxLinks;e!==t&&(0>t&&pe(t,">= 0",lt,"toMaxLinks"),this.Rc(),this.aa.tr=t,this.g("toMaxLinks",e,t))}},fromSpot:{get:function(){return null!==this.aa?this.aa.Qi:Oe},set:function(t){var e=this.fromSpot;e.C(t)||(t=t.J(),this.Rc(),this.aa.Qi=t,this.g("fromSpot",e,t),Bl(this))}},fromEndSegmentLength:{get:function(){return null!==this.aa?this.aa.Oi:10},set:function(t){var e=this.fromEndSegmentLength;e!==t&&(0>t&&pe(t,">= 0",lt,"fromEndSegmentLength"),this.Rc(),this.aa.Oi=t,this.g("fromEndSegmentLength",e,t),Bl(this))}},fromShortLength:{get:function(){return null!==this.aa?this.aa.Pi:0},set:function(t){var e=this.fromShortLength;e!==t&&(this.Rc(),this.aa.Pi=t,this.g("fromShortLength",e,t),Bl(this))}},fromLinkable:{get:function(){return null!==this.aa?this.aa.Kp:null},set:function(t){var e=this.fromLinkable;e!==t&&(this.Rc(),this.aa.Kp=t,this.g("fromLinkable",e,t))}},fromMaxLinks:{get:function(){return null!==this.aa?this.aa.Lp:1/0},set:function(t){var e=this.fromMaxLinks;e!==t&&(0>t&&pe(t,">= 0",lt,"fromMaxLinks"),this.Rc(),this.aa.Lp=t,this.g("fromMaxLinks",e,t))}},cursor:{get:function(){return null!==this.A?this.A.j:""},set:function(t){var e=this.cursor;e!==t&&(hn(this),this.A.j=t,this.g("cursor",e,t))}},click:{get:function(){return null!==this.A?this.A.oh:null},set:function(t){var e=this.click;e!==t&&(hn(this),this.A.oh=t,this.g("click",e,t))}},doubleClick:{get:function(){return null!==this.A?this.A.uh:null},set:function(t){var e=this.doubleClick;e!==t&&(hn(this),this.A.uh=t,this.g("doubleClick",e,t))}},contextClick:{get:function(){return null!==this.A?this.A.qh:null},set:function(t){var e=this.contextClick;e!==t&&(hn(this),this.A.qh=t,this.g("contextClick",e,t))}},mouseEnter:{get:function(){return null!==this.A?this.A.Fh:null},set:function(t){var e=this.mouseEnter;e!==t&&(hn(this),this.A.Fh=t,this.g("mouseEnter",e,t))}},mouseLeave:{get:function(){return null!==this.A?this.A.Ih:null},set:function(t){var e=this.mouseLeave;e!==t&&(hn(this),this.A.Ih=t,this.g("mouseLeave",e,t))}},mouseOver:{get:function(){return null!==this.A?this.A.Jh:null},set:function(t){var e=this.mouseOver;e!==t&&(hn(this),this.A.Jh=t,this.g("mouseOver",e,t))}},mouseHover:{get:function(){return null!==this.A?this.A.Hh:null},set:function(t){var e=this.mouseHover;e!==t&&(hn(this),this.A.Hh=t,this.g("mouseHover",e,t))}},mouseHold:{get:function(){return null!==this.A?this.A.Gh:null},set:function(t){var e=this.mouseHold;e!==t&&(hn(this),this.A.Gh=t,this.g("mouseHold",e,t))}},mouseDragEnter:{get:function(){return null!==this.A?this.A.Qd:null},set:function(t){var e=this.mouseDragEnter;e!==t&&(hn(this),this.A.Qd=t,this.g("mouseDragEnter",e,t))}},mouseDragLeave:{get:function(){return null!==this.A?this.A.Gf:null},set:function(t){var e=this.mouseDragLeave;e!==t&&(hn(this),this.A.Gf=t,this.g("mouseDragLeave",e,t))}},mouseDrop:{get:function(){return null!==this.A?this.A.Eh:null},set:function(t){var e=this.mouseDrop;e!==t&&(hn(this),this.A.Eh=t,this.g("mouseDrop",e,t))}},actionDown:{get:function(){return null!==this.A?this.A.W:null},set:function(t){var e=this.actionDown;e!==t&&(hn(this),this.A.W=t,this.g("actionDown",e,t))}},actionMove:{get:function(){return null!==this.A?this.A.ga:null},set:function(t){var e=this.actionMove;e!==t&&(hn(this),this.A.ga=t,this.g("actionMove",e,t))}},actionUp:{get:function(){return null!==this.A?this.A.Ga:null},set:function(t){var e=this.actionUp;e!==t&&(hn(this),this.A.Ga=t,this.g("actionUp",e,t))}},actionCancel:{get:function(){return null!==this.A?this.A.F:null},set:function(t){var e=this.actionCancel;e!==t&&(hn(this),this.A.F=t,this.g("actionCancel",e,t))}},toolTip:{get:function(){return null!==this.A?this.A.Th:null},set:function(t){var e=this.toolTip;e!==t&&(hn(this),this.A.Th=t,this.g("toolTip",e,t))}},contextMenu:{get:function(){return null!==this.A?this.A.rh:null},set:function(t){var e=this.contextMenu;e!==t&&(hn(this),this.A.rh=t,this.g("contextMenu",e,t))}}}),lt.prototype.trigger=lt.prototype.mv,lt.prototype.findBindingPanel=lt.prototype.Yg,lt.prototype.findTemplateBinder=lt.prototype.Yy,lt.prototype.setProperties=lt.prototype.Vl,lt.prototype.apply=lt.prototype.apply,lt.prototype.attach=lt.prototype.ku,lt.prototype.set=lt.prototype.set,lt.prototype.isEnabledObject=lt.prototype.yf,lt.prototype.isVisibleObject=lt.prototype.zf,lt.prototype.isContainedBy=lt.prototype.jg,lt.prototype.getNearestIntersectionPoint=lt.prototype.Or,lt.prototype.getLocalPoint=lt.prototype.Nr,lt.prototype.getDocumentScale=lt.prototype.uf,lt.prototype.getDocumentAngle=lt.prototype.fi,lt.prototype.getDocumentBounds=lt.prototype.gi,lt.prototype.getDocumentPoint=lt.prototype.ia,lt.prototype.intersectsRect=lt.prototype.Sc,lt.prototype.containedInRect=lt.prototype.Wg,lt.prototype.containsRect=lt.prototype.Ee,lt.prototype.containsPoint=lt.prototype.ba,lt.prototype.raiseChanged=lt.prototype.g,lt.prototype.raiseChangedEvent=lt.prototype.bb,lt.prototype.addCopyProperty=lt.prototype.zw;var Uu=null;function Hl(){this.ic=!1,this.va="",this.bp=-1,this.hb=this.Wo=this.Ff=null,this.j="",this.cb=this.xi=this.Hc=this.rh=this.Th=this.F=this.Ga=this.ga=this.W=this.Eh=this.Gf=this.Qd=this.Gh=this.Hh=this.Jh=this.Ih=this.Fh=this.qh=this.uh=this.oh=null,this.u=_h,this.m=cs,this.$f=io,this.Db=this.vi=1,this.ui=Ve,this.le=this.wi=this.nb=null,this.Ic="category"}function Hu(){this.u=-1/0,this.m=0,this.F=Va,this.Oq=di,this.j=this.W="None"}function Cm(){this.tj=this.Qi=Zn,this.sj=this.Pi=this.rj=this.Oi=NaN,this.sr=this.Kp=null,this.tr=this.Lp=1/0}function zu(){this.Ta=[1,0,0,1,0,0]}function Df(t){this.type=t,this.r2=this.y2=this.x2=this.r1=this.y1=this.x1=0,this.Jw=[],this.pattern=null}function pa(t,e){this.ownerDocument=t=void 0===e?mt.document:e,this.Jz="http://www.w3.org/2000/svg",void 0!==t&&(this.Sa=this.Vb("svg",{width:"1px",height:"1px",viewBox:"0 0 1 1"}),this.Sa.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns","http://www.w3.org/2000/svg"),this.Sa.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink")),this.po=null,this.context=new Hh(this)}function Hh(t){this.qs=t,this.svg=t.Sa,this.stack=[],this.md=[],this.fillStyle="#000000",this.font="10px sans-serif",this.globalAlpha=1,this.lineCap="butt",this.lineDashOffset=0,this.lineJoin="miter",this.lineWidth=1,this.miterLimit=10,this.shadowBlur=0,this.shadowColor="rgba(0, 0, 0, 0)",this.shadowOffsetY=this.shadowOffsetX=0,this.strokeStyle="#000000",this.textAlign="start",this.clipInsteadOfFill=!1,this.Lg=this.Yq=this.Xq=0,this.Xr=null,this.path=[],this.et=!1,this.Og=null,this.pj=0,this.Fe=new zu,ws(this,1,0,0,1,0,0);var e=Pl++,n=this.Vb("clipPath",{id:"mainClip"+e});n.appendChild(this.Vb("rect",{x:0,y:0,width:t.width,height:t.height})),this.bw=n,this.qs.Sa.appendChild(n),this.md[0].setAttributeNS(null,"clip-path","url(#mainClip"+e+")"),this.Lz={}}function Dp(t,e,n,s,l){1!==t.globalAlpha&&(n.opacity=t.globalAlpha),"fill"===e?(t.fillStyle instanceof Df?n.fill=S0(t,t.fillStyle):/^rgba\(/.test(t.fillStyle)?(t=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(t.fillStyle),n.fill="rgb("+t[1]+","+t[2]+","+t[3]+")",n["fill-opacity"]=t[4]):n.fill=t.fillStyle,n.stroke="none"):"stroke"===e&&(n.fill="none",t.strokeStyle instanceof Df?n.stroke=S0(t,t.strokeStyle):/^rgba\(/.test(t.strokeStyle)?(e=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(t.strokeStyle),n.stroke="rgb("+e[1]+","+e[2]+","+e[3]+")",n["stroke-opacity"]=e[4]):n.stroke=t.strokeStyle,n["stroke-width"]=t.lineWidth,n["stroke-linecap"]=t.lineCap,n["stroke-linejoin"]=t.lineJoin,n["stroke-miterlimit"]=t.miterLimit),s="matrix("+(s=s.Ta)[0]+", "+s[1]+", "+s[2]+", "+s[3]+", "+s[4]+", "+s[5]+")",void 0!==l&&(s+=l),n.transform=s}function S0(t,e){var n="GRAD"+Pl++;if("linear"===e.type)var s=t.Vb("linearGradient",{x1:e.x1,x2:e.x2,y1:e.y1,y2:e.y2,id:n,gradientUnits:"userSpaceOnUse"});else{if("radial"!==e.type)throw Error("invalid gradient");s=t.Vb("radialGradient",{x1:e.x1,x2:e.x2,y1:e.y1,y2:e.y2,r1:e.r1,r2:e.r2,id:n})}var l=e.Jw;e=l.length;for(var u=[],c=0;c<e;c++){var d=l[c],p=d.color;d={offset:d.offset,"stop-color":p},/^rgba\(/.test(p)&&(p=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(p),d["stop-color"]="rgb("+p[1]+","+p[2]+","+p[3]+")",d["stop-opacity"]=p[4]),u.push(d)}for(u.sort(function(g,y){return g.offset>y.offset?1:-1}),l=0;l<e;l++)s.appendChild(t.Vb("stop",u[l]));return t.svg.appendChild(s),"url(#"+n+")"}function ws(t,e,n,s,l,u,c){var d=new zu;d.Ta=[e,n,s,l,u,c],Dp(t,"g",e={},d),d=t.addElement("g",e),t.md.push(d)}function ga(t){t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0}function Ws(t){t.shadowOffsetX=t.Xq,t.shadowOffsetY=t.Yq,t.shadowBlur=t.Lg}function ro(t,e,n){this.ownerDocument=e=void 0===e?mt.document:e,this.po=null,(e=e.createElement("canvas")).tabIndex=0,this.Sa=e,this.Sa.innerHTML="This text is displayed if your browser does not support the Canvas HTML element.",this.context=new Rn(e,n),e.H=t}function Rn(t,e){this.Z=t.getContext?t.getContext("2d",e):null,null===this.Z&&Y("Browser does not support HTML Canvas Element"),this.Es=this.Gs=this.Fs="",this.pm=!1,this.Lg=this.Yq=this.Xq=0,this.rl=new Dt}lt.className="GraphObject",Uu=new xt,Ul("Button",function(){function t(n,s){return null!==n.diagram.ec(n.documentPoint,function(l){for(;null!==l.panel&&!l.isActionable;)l=l.panel;return l},function(l){return l===s})}var e=Er($,$.Auto,{isActionable:!0,enabledChanged:function(n,s){if(n instanceof $){var l=n.fb("ButtonBorder");null!==l&&(l.fill=s?n._buttonFillNormal:n._buttonFillDisabled)}},cursor:"pointer",_buttonFillNormal:"#F5F5F5",_buttonStrokeNormal:"#BDBDBD",_buttonFillOver:"#E0E0E0",_buttonStrokeOver:"#9E9E9E",_buttonFillPressed:"#BDBDBD",_buttonStrokePressed:"#9E9E9E",_buttonFillDisabled:"#E5E5E5"},Er(Ct,{name:"ButtonBorder",figure:"RoundedRectangle",spot1:new ot(0,0,2.76142374915397,2.761423749153969),spot2:new ot(1,1,-2.76142374915397,-2.761423749153969),parameter1:2,parameter2:2,fill:"#F5F5F5",stroke:"#BDBDBD"}));return e.mouseEnter=function(n,s){if(s.yf()&&s instanceof $&&(n=s.fb("ButtonBorder"))instanceof Ct){var l=s._buttonFillOver;s._buttonFillNormal=n.fill,n.fill=l,l=s._buttonStrokeOver,s._buttonStrokeNormal=n.stroke,n.stroke=l}},e.mouseLeave=function(n,s){s.yf()&&s instanceof $&&(n=s.fb("ButtonBorder"))instanceof Ct&&(n.fill=s._buttonFillNormal,n.stroke=s._buttonStrokeNormal)},e.actionDown=function(n,s){if(s.yf()&&s instanceof $&&null!==s._buttonFillPressed&&0===n.button){var l=s.fb("ButtonBorder");if(l instanceof Ct){var u=(n=n.diagram).skipsUndoManager;n.skipsUndoManager=!0;var c=s._buttonFillPressed;s._buttonFillOver=l.fill,l.fill=c,c=s._buttonStrokePressed,s._buttonStrokeOver=l.stroke,l.stroke=c,n.skipsUndoManager=u}}},e.actionUp=function(n,s){if(s.yf()&&s instanceof $&&null!==s._buttonFillPressed&&0===n.button){var l=s.fb("ButtonBorder");if(l instanceof Ct){var u=n.diagram,c=u.skipsUndoManager;u.skipsUndoManager=!0,t(n,s)?(l.fill=s._buttonFillOver,l.stroke=s._buttonStrokeOver):(l.fill=s._buttonFillNormal,l.stroke=s._buttonStrokeNormal),u.skipsUndoManager=c}}},e.actionCancel=function(n,s){if(s.yf()&&s instanceof $&&null!==s._buttonFillPressed){var l=s.fb("ButtonBorder");if(l instanceof Ct){var u=n.diagram,c=u.skipsUndoManager;u.skipsUndoManager=!0,t(n,s)?(l.fill=s._buttonFillOver,l.stroke=s._buttonStrokeOver):(l.fill=s._buttonFillNormal,l.stroke=s._buttonStrokeNormal),u.skipsUndoManager=c}}},e.actionMove=function(n,s){if(s.yf()&&s instanceof $&&null!==s._buttonFillPressed){var l=n.diagram;if(0===l.firstInput.button&&(l.currentTool.standardMouseOver(),t(n,s)&&(n=s.fb("ButtonBorder"))instanceof Ct)){var u=l.skipsUndoManager;l.skipsUndoManager=!0;var c=s._buttonFillPressed;n.fill!==c&&(n.fill=c),n.stroke!==(c=s._buttonStrokePressed)&&(n.stroke=c),l.skipsUndoManager=u}}},e}),Ul("TreeExpanderButton",function(){var t=Er("Button",{_treeExpandedFigure:"MinusLine",_treeCollapsedFigure:"PlusLine"},Er(Ct,{name:"ButtonIcon",figure:"MinusLine",stroke:"#424242",strokeWidth:2,desiredSize:Wc},new xe("figure","isTreeExpanded",function(e,n){return n=n.panel,e?n._treeExpandedFigure:n._treeCollapsedFigure}).Fo()),{visible:!1},new xe("visible","isTreeLeaf",function(e){return!e}).Fo());return t.click=function(e,n){if((n=n.part)instanceof At&&(n=n.adornedPart),n instanceof Z){var s=n.diagram;if(null!==s){if(s=s.commandHandler,n.isTreeExpanded){if(!s.canCollapseTree(n))return}else if(!s.canExpandTree(n))return;e.handled=!0,n.isTreeExpanded?s.collapseTree(n):s.expandTree(n)}}},t}),Ul("SubGraphExpanderButton",function(){var t=Er("Button",{_subGraphExpandedFigure:"MinusLine",_subGraphCollapsedFigure:"PlusLine"},Er(Ct,{name:"ButtonIcon",figure:"MinusLine",stroke:"#424242",strokeWidth:2,desiredSize:Wc},new xe("figure","isSubGraphExpanded",function(e,n){return n=n.panel,e?n._subGraphExpandedFigure:n._subGraphCollapsedFigure}).Fo()));return t.click=function(e,n){if((n=n.part)instanceof At&&(n=n.adornedPart),n instanceof wt){var s=n.diagram;if(null!==s){if(s=s.commandHandler,n.isSubGraphExpanded){if(!s.canCollapseSubGraph(n))return}else if(!s.canExpandSubGraph(n))return;e.handled=!0,n.isSubGraphExpanded?s.collapseSubGraph(n):s.expandSubGraph(n)}}},t}),Ul("ToolTip",function(){return Er(At,$.Auto,{isShadowed:!0,shadowColor:"rgba(0, 0, 0, .4)",shadowOffset:new A(0,3),shadowBlur:5},Er(Ct,{name:"Border",figure:"RoundedRectangle",parameter1:1,parameter2:1,fill:"#F5F5F5",stroke:"#F0F0F0",spot1:new ot(0,0,4,6),spot2:new ot(1,1,-4,-4)}))}),Ul("ContextMenu",function(){return Er(At,$.Vertical,{background:"#F5F5F5",isShadowed:!0,shadowColor:"rgba(0, 0, 0, .4)",shadowOffset:new A(0,3),shadowBlur:5},new xe("background","",function(t){return null!==t.adornedPart&&null!==t.placeholder?null:"#F5F5F5"}))}),Ul("ContextMenuButton",function(){var t=Er("Button");t.stretch=In;var e=t.fb("ButtonBorder");return e instanceof Ct&&(e.figure="Rectangle",e.strokeWidth=0,e.spot1=new ot(0,0,2,3),e.spot2=new ot(1,1,-2,-2)),t}),Ul("PanelExpanderButton",function(t){var e=M0(t,"COLLAPSIBLE"),n=Er("Button",{_buttonExpandedFigure:"M0 0 M0 6 L4 2 8 6 M8 8",_buttonCollapsedFigure:"M0 0 M0 2 L4 6 8 2 M8 8",_buttonFillNormal:"rgba(0, 0, 0, 0)",_buttonStrokeNormal:null,_buttonFillOver:"rgba(0, 0, 0, .2)",_buttonStrokeOver:null,_buttonFillPressed:"rgba(0, 0, 0, .4)",_buttonStrokePressed:null},Er(Ct,{name:"ButtonIcon",strokeWidth:2},new xe("geometryString","visible",function(s){return s?n._buttonExpandedFigure:n._buttonCollapsedFigure}).Fo(e)));return(t=n.fb("ButtonBorder"))instanceof Ct&&(t.stroke=null,t.fill="rgba(0, 0, 0, 0)"),n.click=function(s,l){var u=l.diagram;if(null!==u&&!u.isReadOnly){var c=l.Yg();null===c&&(c=l.part),null!==c&&null!==(l=c.fb(e))&&(s.handled=!0,u.Da("Collapse/Expand Panel"),l.visible=!l.visible,u.eb("Collapse/Expand Panel"))}},n}),Ul("CheckBoxButton",function(t){var e=M0(t);return(t=Er("Button",{desiredSize:new gt(14,14)},Er(Ct,{name:"ButtonIcon",geometryString:"M0 0 M0 8.85 L4.9 13.75 16.2 2.45 M16.2 16.2",strokeWidth:2,stretch:Ge,geometryStretch:Gs,visible:!1},""!==e?new xe("visible",e).px():[]))).click=function(n,s){if(s instanceof $){var l=n.diagram;if(!(null===l||l.isReadOnly||""!==e&&l.model.isReadOnly)){n.handled=!0;var u=s.fb("ButtonIcon");l.Da("checkbox"),u.visible=!u.visible,"function"==typeof s._doClick&&s._doClick(n,s),l.eb("checkbox")}}},t}),Ul("CheckBox",function(t){t=Er("CheckBoxButton",t=M0(t),{name:"Button",isActionable:!1,margin:new Ht(0,1,0,0)});var e=Er($,"Horizontal",t,{isActionable:!0,cursor:t.cursor,margin:1,_buttonFillNormal:t._buttonFillNormal,_buttonStrokeNormal:t._buttonStrokeNormal,_buttonFillOver:t._buttonFillOver,_buttonStrokeOver:t._buttonStrokeOver,_buttonFillPressed:t._buttonFillPressed,_buttonStrokePressed:t._buttonStrokePressed,_buttonFillDisabled:t._buttonFillDisabled,mouseEnter:t.mouseEnter,mouseLeave:t.mouseLeave,actionDown:t.actionDown,actionUp:t.actionUp,actionCancel:t.actionCancel,actionMove:t.actionMove,click:t.click,_buttonClick:t.click});return t.mouseEnter=null,t.mouseLeave=null,t.actionDown=null,t.actionUp=null,t.actionCancel=null,t.actionMove=null,t.click=null,e}),lt.None=Ve=new K(lt,"None",0),lt.Default=io=new K(lt,"Default",0),lt.Vertical=Wn=new K(lt,"Vertical",4),lt.Horizontal=In=new K(lt,"Horizontal",5),lt.Fill=Ge=new K(lt,"Fill",3),lt.Uniform=Gs=new K(lt,"Uniform",1),lt.UniformToFill=xf=new K(lt,"UniformToFill",2),lt.FlipVertical=Cf=new K(lt,"FlipVertical",1),lt.FlipHorizontal=Mf=new K(lt,"FlipHorizontal",2),lt.FlipBoth=Mp=new K(lt,"FlipBoth",3),lt.make=Er,lt.getBuilders=function(){var e,t=new xt;for(e in Uu)if(e!==e.toLowerCase()){var n=Uu.I(e);"function"==typeof n&&t.add(e,n)}return t.freeze(),t},lt.defineBuilder=Ul,lt.build=function(t,e){var n=Uu.I(t);if("function"==typeof n&&(n=n(null))instanceof lt)return e&&n.set(e),n;Y('GraphObject.build invoked object builder "'+t+'", but it did not return an Object')},lt.takeBuilderArgument=M0,Hl.prototype.copy=function(){var t=new Hl;return t.va=this.va,t.bp=this.bp,t.Ff=this.Ff,t.hb=this.hb,t.j=this.j,t.oh=this.oh,t.uh=this.uh,t.qh=this.qh,t.Fh=this.Fh,t.Ih=this.Ih,t.Jh=this.Jh,t.Hh=this.Hh,t.Gh=this.Gh,t.Qd=this.Qd,t.Gf=this.Gf,t.Eh=this.Eh,t.W=this.W,t.ga=this.ga,t.Ga=this.Ga,t.F=this.F,t.Th=this.Th,t.rh=this.rh,t.Hc=this.Hc,t.xi=this.xi,t.cb=this.cb,t.u=this.u.J(),t.m=this.m.J(),t.$f=this.$f,t.vi=this.vi,t.Db=this.Db,t.ui=this.ui,t.nb=this.nb,t.wi=this.wi,t.le=this.le,t.Ic=this.Ic,t},Hu.prototype.copy=function(){var t=new Hu;return t.u=this.u,t.m=this.m,t.F=this.F.J(),t.Oq=this.Oq,t.W=this.W,t.j=this.j,t},Hu.className="LinkElementSettings",Cm.prototype.copy=function(){var t=new Cm;return t.Qi=this.Qi.J(),t.tj=this.tj.J(),t.Oi=this.Oi,t.rj=this.rj,t.Pi=this.Pi,t.sj=this.sj,t.Kp=this.Kp,t.sr=this.sr,t.Lp=this.Lp,t.tr=this.tr,t},Cm.className="LinkSettings",zu.prototype.copy=function(){var t=new zu;return t.Ta[0]=this.Ta[0],t.Ta[1]=this.Ta[1],t.Ta[2]=this.Ta[2],t.Ta[3]=this.Ta[3],t.Ta[4]=this.Ta[4],t.Ta[5]=this.Ta[5],t},zu.prototype.translate=function(t,e){this.Ta[4]+=this.Ta[0]*t+this.Ta[2]*e,this.Ta[5]+=this.Ta[1]*t+this.Ta[3]*e},zu.prototype.scale=function(t,e){this.Ta[0]*=t,this.Ta[1]*=t,this.Ta[2]*=e,this.Ta[3]*=e},zu.className="STransform",Df.prototype.addColorStop=function(t,e){this.Jw.push({offset:t,color:e})},Df.className="SGradient",pa.prototype.resize=function(t,e,n,s){return(this.width!==t||this.height!==e)&&(this.style.width=n+"px",this.style.height=s+"px",this.Sa.setAttributeNS(null,"width",n+"px"),this.Sa.setAttributeNS(null,"height",s+"px"),this.Sa.setAttributeNS(null,"viewBox","0 0 "+n+" "+s),this.context.bw.firstElementChild.setAttributeNS(null,"width",n+"px"),this.context.bw.firstElementChild.setAttributeNS(null,"height",s+"px"),!0)},pa.prototype.Vb=function(t,e,n){if(t=this.ownerDocument.createElementNS(this.Jz,t),Vt(e))for(var s in e)t.setAttributeNS("href"===s?"http://www.w3.org/1999/xlink":"",s,e[s]);return void 0!==n&&(t.textContent=n),t},pa.prototype.getBoundingClientRect=function(){return this.Sa.getBoundingClientRect()},pa.prototype.focus=function(){this.Sa.focus()},pa.prototype.Pw=function(){this.ownerDocument=null},St.Object.defineProperties(pa.prototype,{width:{get:function(){return this.Sa.width.baseVal.value},set:function(t){this.Sa.width=t}},height:{get:function(){return this.Sa.height.baseVal.value},set:function(t){this.Sa.height=t}},style:{get:function(){return this.Sa.style}}}),pa.className="SVGSurface",(_=Hh.prototype).arc=function(t,e,n,s,l,u,c,d){var p=2*Math.PI,g=p-1e-6,y=n*Math.cos(s),w=n*Math.sin(s),C=t+y,D=e+w,M=u?0:1;s=u?s-l:l-s,(1e-6<Math.abs(c-C)||1e-6<Math.abs(d-D))&&this.path.push(["L",C,+D]),0>s&&(s=s%p+p),s>g?(this.path.push(["A",n,n,0,1,M,t-y,e-w]),this.path.push(["A",n,n,0,1,M,C,D])):1e-6<s&&this.path.push(["A",n,n,0,+(s>=Math.PI),M,t+n*Math.cos(l),e+n*Math.sin(l)])},_.beginPath=function(){this.path=[]},_.bezierCurveTo=function(t,e,n,s,l,u){this.path.push(["C",t,e,n,s,l,u])},_.clearRect=function(){},_.clip=function(){this.addPath("clipPath",this.path,this.Fe)},_.closePath=function(){this.path.push(["z"])},_.createLinearGradient=function(t,e,n,s){var l=new Df("linear");return l.x1=t,l.y1=e,l.x2=n,l.y2=s,l},_.createPattern=function(t){var e="";t instanceof HTMLCanvasElement&&(e=t.toDataURL()),t instanceof HTMLImageElement&&(e=t.getAttribute("src"));var n=this.Lz;if(n[e])return"url(#"+n[e]+")";var s="PATTERN"+Pl++,l={x:0,y:0,width:t.width,height:t.height,href:e};return(t=this.Vb("pattern",{width:t.width,height:t.height,id:s,patternUnits:"userSpaceOnUse"})).appendChild(this.Vb(vf,l)),this.svg.appendChild(t),n[e]=s,"url(#"+s+")"},_.createRadialGradient=function(t,e,n,s,l,u){var c=new Df("radial");return c.x1=t,c.y1=e,c.r1=n,c.x2=s,c.y2=l,c.r2=u,c},_.drawImage=function(t,e,n,s,l,u,c,d,p){var g="";t instanceof HTMLCanvasElement&&(g=t.toDataURL()),t instanceof HTMLImageElement&&(g=t.getAttribute("src"));var y=t instanceof HTMLImageElement?t.naturalWidth:t.width,w=t instanceof HTMLImageElement?t.naturalHeight:t.height;void 0===s&&(u=e,c=n,d=s=y,p=l=w),s=s||0,l=l||0,u=u||0,c=c||0,p=p||0,t={x:0,y:0,width:y||s,height:w||l,href:g},R.ca(s,d=d||0)&&R.ca(l,p)?-1===g.toLowerCase().indexOf(".svg")&&-1===g.toLowerCase().indexOf("data:image/svg")&&(t.preserveAspectRatio="xMidYMid slice"):t.preserveAspectRatio="none",g="",p/=l,(0!==u||0!==c)&&(g+=" translate("+u+", "+c+")"),(1!=(d/=s)||1!==p)&&(g+=" scale("+d+", "+p+")"),(0!==e||0!==n)&&(g+=" translate("+-e+", "+-n+")"),(0!==e||0!==n||s!==y||l!==w)&&(u="CLIP"+Pl++,(c=this.Vb("clipPath",{id:u})).appendChild(this.Vb("rect",{x:e,y:n,width:s,height:l})),this.svg.appendChild(c),t["clip-path"]="url(#"+u+")"),Dp(this,vf,t,this.Fe,g),this.addElement(vf,t)},_.fill=function(){this.addPath("fill",this.path,this.Fe)},_.sf=function(){this.clipInsteadOfFill?this.clip():this.fill()},_.fillRect=function(t,e,n,s){Dp(this,"fill",t={x:(t=[t,e,n,s])[0],y:t[1],width:t[2],height:t[3]},this.Fe),this.addElement("rect",t)},_.fillText=function(t,e,n){t=[t,e,n],"left"===(e=this.textAlign)?e="start":"right"===e?e="end":"center"===e&&(e="middle"),Dp(this,"fill",e={x:t[1],y:t[2],style:"font: "+this.font,"text-anchor":e},this.Fe),this.addElement("text",e,t[0])},_.lineTo=function(t,e){this.path.push(["L",t,e])},_.moveTo=function(t,e){this.path.push(["M",t,e])},_.quadraticCurveTo=function(t,e,n,s){this.path.push(["Q",t,e,n,s])},_.rect=function(t,e,n,s){this.path.push(["M",t,e],["L",t+n,e],["L",t+n,e+s],["L",t,e+s],["z"])},_.restore=function(){this.Fe=this.stack.pop(),this.path=this.stack.pop();var t=this.stack.pop();this.fillStyle=t.fillStyle,this.font=t.font,this.globalAlpha=t.globalAlpha,this.lineCap=t.lineCap,this.lineDashOffset=t.lineDashOffset,this.lineJoin=t.lineJoin,this.lineWidth=t.lineWidth,this.miterLimit=t.miterLimit,this.shadowBlur=t.shadowBlur,this.shadowColor=t.shadowColor,this.shadowOffsetX=t.shadowOffsetX,this.shadowOffsetY=t.shadowOffsetY,this.strokeStyle=t.strokeStyle,this.textAlign=t.textAlign},_.save=function(){this.stack.push({fillStyle:this.fillStyle,font:this.font,globalAlpha:this.globalAlpha,lineCap:this.lineCap,lineDashOffset:this.lineDashOffset,lineJoin:this.lineJoin,lineWidth:this.lineWidth,miterLimit:this.miterLimit,shadowBlur:this.shadowBlur,shadowColor:this.shadowColor,shadowOffsetX:this.shadowOffsetX,shadowOffsetY:this.shadowOffsetY,strokeStyle:this.strokeStyle,textAlign:this.textAlign});for(var t=[],e=0;e<this.path.length;e++)t.push(this.path[e]);this.stack.push(t),this.stack.push(this.Fe.copy())},_.setTransform=function(t,e,n,s,l,u){1===t&&0===e&&0===n&&1===s&&0===l&&0===u||ws(this,t,e,n,s,l,u)},_.scale=function(t,e){this.Fe.scale(t,e)},_.translate=function(t,e){this.Fe.translate(t,e)},_.transform=function(){},_.Pc=function(){},_.stroke=function(){this.addPath("stroke",this.path,this.Fe)},_.si=function(){this.clipInsteadOfFill||this.stroke()},_.Vb=function(t,e,n){return this.qs.Vb(t,e,n)},_.addElement=function(t,e,n){return t=this.Vb(t,e,n),0<this.md.length?this.md[this.md.length-1].appendChild(t):this.svg.appendChild(t),this.Xr=t},_.addPath=function(t,e,n){for(var s=[],l=0;l<e.length;l++){var u=Gc(e[l]),c=[u.shift()];if("A"===c[0])c.push(u.shift()+","+u.shift(),u.shift(),u.shift()+","+u.shift(),u.shift()+","+u.shift());else for(;u.length;)c.push(u.shift()+","+u.shift());s.push(c.join(" "))}e={d:s.join(" ")},"stroke"===t&&this.et&&(e["stroke-dasharray"]=this.Og.toString(),e["stroke-dashoffset"]=this.pj),Dp(this,t,e,n),"clipPath"===t?(t="CLIP"+Pl++,(n=this.Vb("clipPath",{id:t})).appendChild(this.Vb("path",e)),this.svg.appendChild(n),0<this.md.length&&this.md[this.md.length-1].setAttributeNS(null,"clip-path","url(#"+t+")")):this.addElement("path",e)},_.Xl=function(t){if(0!==this.shadowOffsetX||0!==this.shadowOffsetY||0!==this.shadowBlur){var e="SHADOW"+Pl++,n=this.addElement("filter",{id:e,x:"-100%",y:"-100%",width:"300%",height:"300%"},null),s=t.computePixelRatio();t=this.Vb("feGaussianBlur",{in:"SourceAlpha",result:"blur",stdDeviation:this.shadowBlur/2/s});var l=this.Vb("feFlood",{in:"blur",result:"flood","flood-color":this.shadowColor}),u=this.Vb("feComposite",{in:"flood",in2:"blur",operator:"in",result:"comp"});s=this.Vb("feOffset",{in:"comp",result:"offsetBlur",dx:this.shadowOffsetX/s,dy:this.shadowOffsetY/s});var c=this.Vb("feMerge",{});c.appendChild(this.Vb("feMergeNode",{in:"offsetBlur"})),c.appendChild(this.Vb("feMergeNode",{in:"SourceGraphic"})),n.appendChild(t),n.appendChild(l),n.appendChild(u),n.appendChild(s),n.appendChild(c),0<this.md.length&&this.md[this.md.length-1].setAttributeNS(null,"filter","url(#"+e+")")}},_.iv=function(t,e,n){this.Xq=t,this.Yq=e,this.Lg=n},_.Gr=function(t,e){this.et=!0,this.Og=t,this.pj=e},_.Er=function(){this.et=!1},_.Oc=function(){},_.Ex=function(){},Hh.prototype.rotate=function(){},Hh.prototype.getImageData=function(){return null},Hh.prototype.measureText=function(){return null},Hh.className="SVGContext",V.prototype.makeSvg=V.prototype.bs=function(t){var e=new pa(this,mt.document);void 0===t&&(t=new Zr);var n=this;return Vh(this,function(s,l){return s=null!==(s=I1(n,s,"SVG",e))?s.svg:null,"function"==typeof l?(l(s),null):s},t)},V.prototype.makeSVG=V.prototype.Nu=function(t){return this.bs(t)},lt.prototype.Qw=function(t,e){if(!(t instanceof Hh))return!1;var n=null,s=t.Xr,l=this.transform,u=this.panel;0!=(4096&this.o)&&wm(this);var c=this.Eb,d=0!=(256&this.o);t.clipInsteadOfFill&&(d=!1);var p=!1;if(this instanceof Kt&&(t.font=this.font),d){if(p=u.ke()?u.naturalBounds:u.actualBounds,null!==this.ib){var g=this.ib,y=g.x,w=g.y,C=g.width;g=g.height}else y=Math.max(c.x,p.x),w=Math.max(c.y,p.y),C=Math.min(c.right,p.right)-y,g=Math.min(c.bottom,p.bottom)-w;if(y>c.width+c.x||c.x>p.width+p.x||w>c.height+c.y||c.y>p.height+p.y)return!0;p=!0,ws(t,1,0,0,1,0,0),t.save(),t.beginPath(),t.rect(y,w,C,g),t.clip()}return this.li()&&!this.isVisible()||(t.Fe.Ta=[1,0,0,1,0,0],(this instanceof Kt&&1<this.lineCount||this instanceof Ct&&1<this.geometry.figures.length)&&ws(t,1,0,0,1,0,0),y=!1,this.li()&&this.isShadowed&&e.Ge("drawShadows")&&(t.iv((w=this.shadowOffset).x*e.scale*e.kc,w.y*e.scale*e.kc,this.shadowBlur),Ws(t),t.shadowColor=this.shadowColor),w=!1,this.part&&e.Ge("drawShadows")&&(w=this.part.isShadowed),t.clipInsteadOfFill&&(w=!1),!0===this.shadowVisible?(Ws(t),!1===y&&w&&(ws(t,1,0,0,1,0,0),t.Xl(e),y=!0)):!1===this.shadowVisible&&ga(t),C=this.naturalBounds,null!==this.areaBackground&&(Si(this,t,this.areaBackground,!0,!0,C,c),!1===y&&w&&(ws(t,1,0,0,1,0,0),t.Xl(e),y=!0),this.areaBackground instanceof Rt&&this.areaBackground.type===Ji?(t.beginPath(),t.rect(c.x,c.y,c.width,c.height),t.sf(this.areaBackground)):t.fillRect(c.x,c.y,c.width,c.height)),g=!1,this instanceof $?ws(t,l.m11,l.m12,l.m21,l.m22,l.dx,l.dy):(t.Fe.Ta=[l.m11,l.m12,l.m21,l.m22,l.dx,l.dy],!1===y&&w&&(g=!0)),null!==this.background&&(!1===y&&w&&(ws(t,1,0,0,1,0,0),t.Xl(e),y=!0),jl(this,t,C,c)),w&&(null!==this.background||null!==this.areaBackground||null!==u&&0!=(512&u.o)||null!==u&&(u.type===$.Auto||u.type===$.Spot)&&u.vb()!==this)?(w0(this,!0),null===this.shadowVisible&&ga(t),g=!1):w0(this,!1),g&&!1===y&&(ws(t,1,0,0,1,0,0),t.Xl(e),y=!0),this.ai(t,e),w&&0!=(512&this.o)&&Ws(t),this.li()&&w&&ga(t),d&&(t.restore(),p&&t.md.pop()),this instanceof $&&(n=t.md.pop()),!0===y&&t.md.pop(),(this instanceof Kt&&1<this.lineCount||this instanceof Ct&&1<this.geometry.figures.length)&&(n=t.md.pop()),null!==t.qs.po&&(null===n&&(s===t.Xr?(ws(t,1,0,0,1,0,0),n=t.md.pop()):n=t.Xr),t.qs.po(this,n)),this.svg=n),!0},ro.prototype.resize=function(t,e,n,s){return(this.width!==t||this.height!==e)&&(this.width=t,this.height=e,this.style.width=n+"px",this.style.height=s+"px",!0)},ro.prototype.toDataURL=function(t,e){return this.Sa.toDataURL(t,e)},ro.prototype.getBoundingClientRect=function(){return this.Sa.getBoundingClientRect()},ro.prototype.focus=function(){this.Sa.focus()},ro.prototype.Pw=function(){this.ownerDocument=this.Sa.H=null},St.Object.defineProperties(ro.prototype,{width:{get:function(){return this.Sa.width},set:function(t){this.Sa.width=t}},height:{get:function(){return this.Sa.height},set:function(t){this.Sa.height=t}},style:{get:function(){return this.Sa.style}}}),ro.className="CanvasSurface",(_=Rn.prototype).Ex=function(t){this.Z.imageSmoothingEnabled=t},_.arc=function(t,e,n,s,l,u){this.Z.arc(t,e,n,s,l,u)},_.beginPath=function(){this.Z.beginPath()},_.bezierCurveTo=function(t,e,n,s,l,u){this.Z.bezierCurveTo(t,e,n,s,l,u)},_.clearRect=function(t,e,n,s){this.Pc(),this.Z.clearRect(t,e,n,s)},_.clip=function(){this.Z.clip()},_.closePath=function(){this.Z.closePath()},_.createLinearGradient=function(t,e,n,s){return this.Z.createLinearGradient(t,e,n,s)},_.createPattern=function(t,e){return this.Z.createPattern(t,e)},_.createRadialGradient=function(t,e,n,s,l,u){return this.Z.createRadialGradient(t,e,n,s,l,u)},_.drawImage=function(t,e,n,s,l,u,c,d,p){void 0===s?this.Z.drawImage(t,e,n):this.Z.drawImage(t,e,n,s,l,u,c,d,p)},_.fill=function(){this.Z.fill()},_.fillRect=function(t,e,n,s){this.Z.fillRect(t,e,n,s)},_.fillText=function(t,e,n){this.Z.fillText(t,e,n)},_.getImageData=function(t,e,n,s){return this.Z.getImageData(t,e,n,s)},_.lineTo=function(t,e){this.Z.lineTo(t,e)},_.measureText=function(t){return this.Z.measureText(t)},_.moveTo=function(t,e){this.Z.moveTo(t,e)},_.quadraticCurveTo=function(t,e,n,s){this.Z.quadraticCurveTo(t,e,n,s)},_.rect=function(t,e,n,s){this.Z.rect(t,e,n,s)},_.restore=function(){this.Z.restore()},_.save=function(){this.Pc(),this.Z.save()},Rn.prototype.rotate=function(t){this.rl.rotate(57.2958*t,0,0)},(_=Rn.prototype).setTransform=function(t,e,n,s,l,u){this.rl.setTransform(t,e,n,s,l,u)},_.scale=function(t,e){this.rl.scale(t,e)},_.translate=function(t,e){this.rl.translate(t,e)},_.stroke=function(){this.Z.stroke()},_.transform=function(t,e,n,s,l,u){if(1!==t||0!==e||0!==n||1!==s||0!==l||0!==u){var c=this.rl,d=c.m11*t+c.m21*e;t=c.m12*t+c.m22*e,e=c.m11*n+c.m21*s,n=c.m12*n+c.m22*s,c.dx=c.m11*l+c.m21*u+c.dx,c.dy=c.m12*l+c.m22*u+c.dy,c.m11=d,c.m12=t,c.m21=e,c.m22=n}},_.Pc=function(){var t=this.rl;this.Z.setTransform(t.m11,t.m12,t.m21,t.m22,t.dx,t.dy)},_.sf=function(t){if(t instanceof Rt&&t.type===Ji){var e=t.lk;(t=t.Hs)>e?(this.scale(e/t,1),this.translate((t-e)/2,0)):e>t&&(this.scale(1,t/e),this.translate(0,(e-t)/2)),this.pm?this.clip():this.fill(),t>e?(this.translate(-(t-e)/2,0),this.scale(1/(e/t),1)):e>t&&(this.translate(0,-(e-t)/2),this.scale(1,1/(t/e)))}else this.pm?this.clip():this.fill()},_.si=function(){this.pm||this.stroke()},_.iv=function(t,e,n){this.Xq=t,this.Yq=e,this.Lg=n},_.Gr=function(t,e){var n=this.Z;void 0!==n.setLineDash&&(n.setLineDash(t),n.lineDashOffset=e)},_.Er=function(){var t=this.Z;void 0!==t.setLineDash&&(t.setLineDash(rD),t.lineDashOffset=0)},_.Oc=function(t){t&&(this.Fs=""),this.Es=this.Gs=""},St.Object.defineProperties(Rn.prototype,{fillStyle:{get:function(){return this.Z.fillStyle},set:function(t){this.Es!==t&&(this.Es=this.Z.fillStyle=t)}},font:{get:function(){return this.Z.font},set:function(t){this.Fs!==t&&(this.Fs=this.Z.font=t)}},globalAlpha:{get:function(){return this.Z.globalAlpha},set:function(t){this.Z.globalAlpha=t}},lineCap:{get:function(){return this.Z.lineCap},set:function(t){this.Z.lineCap=t}},lineDashOffset:{get:function(){return this.Z.lineDashOffset},set:function(t){this.Z.lineDashOffset=t}},lineJoin:{get:function(){return this.Z.lineJoin},set:function(t){this.Z.lineJoin=t}},lineWidth:{get:function(){return this.Z.lineWidth},set:function(t){this.Z.lineWidth=t}},miterLimit:{get:function(){return this.Z.miterLimit},set:function(t){this.Z.miterLimit=t}},shadowBlur:{get:function(){return this.Z.shadowBlur},set:function(t){this.Z.shadowBlur=t}},shadowColor:{get:function(){return this.Z.shadowColor},set:function(t){this.Z.shadowColor=t}},shadowOffsetX:{get:function(){return this.Z.shadowOffsetX},set:function(t){this.Z.shadowOffsetX=t}},shadowOffsetY:{get:function(){return this.Z.shadowOffsetY},set:function(t){this.Z.shadowOffsetY=t}},strokeStyle:{get:function(){return this.Z.strokeStyle},set:function(t){this.Gs!==t&&(this.Gs=this.Z.strokeStyle=t)}},textAlign:{get:function(){return this.Z.textAlign},set:function(t){this.Z.textAlign=t}},imageSmoothingEnabled:{get:function(){return this.Z.imageSmoothingEnabled},set:function(t){this.Z.imageSmoothingEnabled=t}},clipInsteadOfFill:{get:function(){return this.pm},set:function(t){this.pm=t}}});var rD=Object.freeze([]);function _p(){this.F=this.m=this.u=this.j=0}function Rt(t,e){$h||(Mm(),$h=!0),En(this),this._isFrozen=!1,void 0===t?(this.qa=oo,this.kk="black"):"string"==typeof t?(this.qa=oo,this.kk=t):(this.qa=t,this.kk="black"),(t=this.qa)===ya?(this.Gd=Qr,this.zk=sr):this.zk=this.Gd=t===Ji?ht:Oe,this.cr=0,this.Ap=NaN,this.oe=this.Bq=this.ne=null,this.Hs=this.lk=0,e&&Object.assign(this,e)}function D0(t,e,n){return e=void 0===e||"number"!=typeof e?.2:e,n=void 0===n?Ef:n,ma(t),Tf(e,n)}function O1(t,e,n){return e=void 0===e||"number"!=typeof e?.2:e,n=void 0===n?Ef:n,ma(t),Tf(-e,n)}function _0(t,e,n){ma(t),t=Qt.j;var s=Qt.u,l=Qt.m,u=Qt.F;return ma(e),void 0===n&&(n=.5),"rgba("+Math.round((Qt.j-t)*n+t)+", "+Math.round((Qt.u-s)*n+s)+", "+Math.round((Qt.m-l)*n+l)+", "+Math.round((Qt.F-u)*n+u)+")"}function _f(t){return!!t&&(t instanceof Rt?t.kx():(ma(t),128>(299*Qt.j+587*Qt.u+114*Qt.m)/1e3))}function Tf(t,e){switch(e){case Ef:e=100*F1(Qt.j);var n=100*F1(Qt.u),s=100*F1(Qt.m);return ri.j=.4124564*e+.3575761*n+.1804375*s,ri.u=.2126729*e+.7151522*n+.072175*s,ri.m=.0193339*e+.119192*n+.9503041*s,ri.F=Qt.F,e=Tp(ri.j/Gh[0]),n=Tp(ri.u/Gh[1]),s=Tp(ri.m/Gh[2]),xs.j=116*n-16,xs.u=500*(e-n),xs.m=200*(n-s),xs.F=ri.F,xs.j=Math.min(100,Math.max(0,xs.j+100*t)),e=(t=(xs.j+16)/116)-xs.m/200,ri.j=Gh[0]*T0(xs.u/500+t),ri.u=Gh[1]*(xs.j>Ep*E0?Math.pow(t,3):xs.j/Ep),ri.m=Gh[2]*T0(e),ri.F=xs.F,t=-.969266*ri.j+1.8760108*ri.u+.041556*ri.m,e=.0556434*ri.j+-.2040259*ri.u+1.0572252*ri.m,Qt.j=255*zh((3.2404542*ri.j+-1.5371385*ri.u+-.4985314*ri.m)/100),Qt.u=255*zh(t/100),Qt.m=255*zh(e/100),Qt.F=ri.F,Qt.j=Math.round(Qt.j),255<Qt.j?Qt.j=255:0>Qt.j&&(Qt.j=0),Qt.u=Math.round(Qt.u),255<Qt.u?Qt.u=255:0>Qt.u&&(Qt.u=0),Qt.m=Math.round(Qt.m),255<Qt.m?Qt.m=255:0>Qt.m&&(Qt.m=0),"rgba("+Qt.j+", "+Qt.u+", "+Qt.m+", "+Qt.F+")";case Sm:return L1(),Pr.m=Math.min(100,Math.max(0,Pr.m+100*t)),"hsla("+Pr.j+", "+Pr.u+"%, "+Pr.m+"%, "+Pr.F+")";default:Y("Unknown color space: "+e)}}function ma(t){$h||(Mm(),$h=!0);var e=Pp;if(null!==e){e.clearRect(0,0,1,1),e.fillStyle="#000000";var n=e.fillStyle;e.fillStyle=t,e.fillStyle!==n?(e.fillRect(0,0,1,1),t=e.getImageData(0,0,1,1).data,Qt.j=t[0],Qt.u=t[1],Qt.m=t[2],Qt.F=t[3]/255):(e.fillStyle="#FFFFFF",e.fillStyle=t,Qt.j=0,Qt.u=0,Qt.m=0,Qt.F=1)}}function L1(){var t=Qt.j/255,e=Qt.u/255,n=Qt.m/255,s=Math.max(t,e,n),l=Math.min(t,e,n),u=s-l;if(l=(s+l)/2,0===u)var c=t=0;else{switch(s){case t:c=(e-n)/u%6;break;case e:c=(n-t)/u+2;break;case n:c=(t-e)/u+4}0>(c*=60)&&(c+=360),t=u/(1-Math.abs(2*l-1))}Pr.j=Math.round(c),Pr.u=Math.round(100*t),Pr.m=Math.round(100*l),Pr.F=Qt.F}function F1(t){return.04045>=(t/=255)?t/12.92:Math.pow((t+.055)/1.055,2.4)}function zh(t){return.0031308>=t?12.92*t:1.055*Math.pow(t,1/2.4)-.055}function Tp(t){return t>E0?Math.pow(t,1/3):(Ep*t+16)/116}function T0(t){var e=t*t*t;return e>E0?e:(116*t-16)/Ep}function Gu(t,e){"string"!=typeof t&&(t instanceof Rt||Y("Value for "+e+" must be a color string or a Brush, not "+t))}function Mm(){Pp=Je?new ro(null,void 0,{AA:!0}).context:null}Rn.className="CanvasSurfaceContext",_p.className="ColorNumbers",Rt.prototype.copy=function(){var t=new Rt;return t.qa=this.qa,t.kk=this.kk,t.Gd=this.Gd.J(),t.zk=this.zk.J(),t.cr=this.cr,t.Ap=this.Ap,null!==this.ne&&(t.ne=this.ne.copy()),t.Bq=this.Bq,t},(_=Rt.prototype).freeze=function(){return this._isFrozen=!0,null!==this.ne&&this.ne.freeze(),this},_.ja=function(){return Object.isFrozen(this)&&Y("cannot thaw constant: "+this),this._isFrozen=!1,null!==this.ne&&this.ne.ja(),this},_.ob=function(t){t.classType===Rt&&(this.type=t)},_.toString=function(){var t="Brush(";if(this.type===oo)t+=this.color;else if(t=this.type===ya?t+"Linear ":this.type===Ji?t+"Radial ":this.type===zl?t+"Pattern ":t+"(unknown) ",t+=this.start+" "+this.end,null!==this.colorStops)for(var e=this.colorStops.iterator;e.next();)t+=" "+e.key+":"+e.value;return t+")"},_.addColorStop=function(t,e){return this._isFrozen&&Nt(this),("number"!=typeof t||!isFinite(t)||1<t||0>t)&&pe(t,"0 <= loc <= 1",Rt,"addColorStop:loc"),null===this.ne&&(this.ne=new xt),this.ne.add(t,e),this.qa===oo&&(this.type=ya),this.oe=null,this},_.Cz=function(t,e){if(this._isFrozen&&Nt(this),t=void 0===t||"number"!=typeof t?.2:t,e=void 0===e?Ef:e,this.type===oo)ma(this.color),this.color=Tf(t,e);else if((this.type===ya||this.type===Ji)&&null!==this.colorStops)for(var n=this.colorStops.iterator;n.next();)ma(n.value),this.addColorStop(n.key,Tf(t,e));return this},_.Dy=function(t,e){if(this._isFrozen&&Nt(this),t=void 0===t||"number"!=typeof t?.2:t,e=void 0===e?Ef:e,this.type===oo)ma(this.color),this.color=Tf(-t,e);else if((this.type===ya||this.type===Ji)&&null!==this.colorStops)for(var n=this.colorStops.iterator;n.next();)ma(n.value),this.addColorStop(n.key,Tf(-t,e));return this},_.kx=function(){if(this.type===oo)return _f(this.color);if((this.type===ya||this.type===Ji)&&null!==this.colorStops){var t=this.colorStops;if(this.type===Ji)return _f(t.first().value);if(null!==t.get(.5))return _f(t.get(.5));if(2===t.count)return _f(_0((t=t.Ea())[0].value,t[1].value));for(var e=t.iterator,n=-1,s=-1,l=1,u=1;e.next();){var c=e.key,d=Math.abs(.5-e.key);l>u&&d<l?(n=c,l=d):u>=l&&d<u&&(s=c,u=d)}return n>s&&(u=n,n=s,s=u,u=l),l=s-n,_f(_0(t.get(n),t.get(s),1-u/l))}return!1},St.Object.defineProperties(Rt.prototype,{type:{get:function(){return this.qa},set:function(t){this._isFrozen&&Nt(this,t),this.qa=t,this.start.Fc()&&(t===ya?this.start=Qr:t===Ji&&(this.start=ht)),this.end.Fc()&&(t===ya?this.end=sr:t===Ji&&(this.end=ht)),this.oe=null}},color:{get:function(){return this.kk},set:function(t){this._isFrozen&&Nt(this,t),this.kk=t,this.oe=null}},start:{get:function(){return this.Gd},set:function(t){this._isFrozen&&Nt(this,t),this.Gd=t.J(),this.oe=null}},end:{get:function(){return this.zk},set:function(t){this._isFrozen&&Nt(this,t),this.zk=t.J(),this.oe=null}},startRadius:{get:function(){return this.cr},set:function(t){this._isFrozen&&Nt(this,t),0>t&&pe(t,">= zero",Rt,"startRadius"),this.cr=t,this.oe=null}},endRadius:{get:function(){return this.Ap},set:function(t){this._isFrozen&&Nt(this,t),0>t&&pe(t,">= zero",Rt,"endRadius"),this.Ap=t,this.oe=null}},colorStops:{get:function(){return this.ne},set:function(t){this._isFrozen&&Nt(this,t),this.ne=t,this.oe=null}},pattern:{get:function(){return this.Bq},set:function(t){this._isFrozen&&Nt(this,t),this.Bq=t,this.oe=null}}}),Rt.prototype.isDark=Rt.prototype.kx,Rt.prototype.darkenBy=Rt.prototype.Dy,Rt.prototype.lightenBy=Rt.prototype.Cz,Rt.prototype.addColorStop=Rt.prototype.addColorStop;var oo,ya,Ji,zl,Ef,Sm,E0=216/24389,Ep=24389/27,Gh=[95.047,100,108.883],Pp=null,Qt=new _p,Pr=new _p,ri=new _p,xs=new _p,$h=!1;function $e(){this.va="Base"}function va(){this.va="Base"}function Np(){this.va="Base"}function Pf(){this.va="Base"}function Dm(){this.va="Base"}function P0(t,e,n){var s=null;if(t instanceof $&&""!==t.Pe&&(s=t.fb(t.Pe))===t&&(s=null),null!==s)for(n&&t.arrange(0,0,e.width,e.height),e.assign(s.actualBounds),s=s.panel;s!==t;)s.transform.So(e),s=s.panel}function Ip(){this.va="Base"}function Gl(){this.va="Base",this.name="Table"}function _m(){this.va="Base"}function Tm(){this.va="Base"}function Em(){this.va="Base"}function Ap(){this.va="Base"}function Nf(t,e,n,s){if(0>e)return t%e===n;if(t%e!==n)return!1;e=s.length;for(var l=0;l<e;l++)if(t%s[l]===n)return!1;return!0}function Pm(){this.va="Base"}function N0(t,e,n,s){if(!1!==da(s)){var l=s.strokeWidth;0===l&&t instanceof At&&t.type===$.Link&&t.adornedObject instanceof Ct&&(l=t.adornedObject.strokeWidth),l*=s.xa,t instanceof z&&null!==t.sa?s.ve((t=t.sa.bounds).x-l/2,t.y-l/2,t.width+l,t.height+l):t instanceof At&&null!==t.adornedPart.sa?s.ve((t=t.adornedPart.sa.bounds).x-l/2,t.y-l/2,t.width+l,t.height+l):s.ve(-l/2,-l/2,e+l,n+l),(l=s.desiredSize).v()||null===s.sa?s.bc.h(0,0,l.width,l.height):s.bc.assign(s.sa.bounds),lr(s,!1)}}function kp(){this.va="Base"}function $(t,e){if(lt.call(this),this.qa=null,void 0===t)this.qa=$.Position;else if("string"==typeof t){var n=ao.I(t);null!==n&&(this.qa=n)}else t instanceof $e?this.qa=t:t&&(this.qa=$.Position,e=t);null===this.qa&&Y("Panel type not specified or PanelLayout not loaded: "+t),this.o=4194304|this.o|(this.qa===$.Grid?1048576:0),this.R=new tt,this.ub=Eh,this.Bm=Zn,this.Kf=io,this.Qg=null,this.Pe="",this.bg=new U(NaN,NaN,NaN,NaN),this.T=this.F=null,this.$n=Gs,this.Qm=Nl,this.Rm=Va,this.qb=this.oa=null,this.fn=NaN,this.$d=this.xh=null,e&&Object.assign(this,e)}function oD(t,e,n,s){for(var l=s.length,u=t.actualBounds,c=t.naturalBounds,d=!0,p=0;p<l;p++){var g=s[p];if(void 0!==g&&0!==g.actual)if(d)d=!1;else{if(n){if(g.position>u.height)continue}else if(g.position>u.width)continue;var y=g.separatorStrokeWidth;isNaN(y)&&(y=n?t.defaultRowSeparatorStrokeWidth:t.defaultColumnSeparatorStrokeWidth);var w=g.separatorStroke;if(null===w&&(w=n?t.defaultRowSeparatorStroke:t.defaultColumnSeparatorStroke),0!==y&&null!==w){Si(t,e,w,!1,!1,c,u),w=!1;var C=g.separatorDashArray;null===C&&(C=n?t.defaultRowSeparatorDashArray:t.defaultColumnSeparatorDashArray),null!==C&&(w=!0,e.Gr(C,0)),e.beginPath(),C=g.position+y,n?C>u.height&&(y-=C-u.height):C>u.width&&(y-=C-u.width),g=g.position+y/2,e.lineWidth=y,y=t.ub,n?(C=u.width-y.right,e.moveTo(y.left,g+=y.top),e.lineTo(C,g)):(C=u.height-y.bottom,e.moveTo(g+=y.left,y.top),e.lineTo(g,C)),e.stroke(),w&&e.Er()}}}}function Nm(t,e,n,s,l){for(var u=s.length,c=t.actualBounds,d=t.naturalBounds,p=If(t,!0),g=If(t,!1),y=0;y<u;y++){var w=s[y];if(void 0!==w&&null!==w.background&&w.coversSeparators!==l&&0!==w.actual){var C=n?c.height:c.width;if(!(w.position>C)){var D=w.Qc(),M=w.separatorStrokeWidth;isNaN(M)&&(M=n?t.defaultRowSeparatorStrokeWidth:t.defaultColumnSeparatorStrokeWidth);var E=w.separatorStroke;null===E&&(E=n?t.defaultRowSeparatorStroke:t.defaultColumnSeparatorStroke),(null===E||w.index===(n?p:g))&&(M=0),D-=M,(M=w.position+M)+(D+=w.actual)>C&&(D=C-M),0>=D||(C=t.ub,Si(t,e,w.background,!0,!1,d,c),n?e.fillRect(C.left,M+C.top,c.width-(C.left+C.right),D):e.fillRect(M+C.left,C.top,D,c.height-(C.top+C.bottom)))}}}}function If(t,e){for(var n=e?t.rowCount:t.columnCount,s=0;s<n;s++){var l=e?t.rowDefs[s]:t.colDefs[s];if(void 0!==l)return l.index}return 0}function I0(t){return"LineV"===t||"BarV"===t}function so(t){return null!==t.part?t.part.locationObject:null}function Kn(t,e){R1(t,t,e)}function R1(t,e,n){n(e);for(var s=(e=e.R.s).length,l=0;l<s;l++){var u=e[l];u instanceof $&&R1(t,u,n)}}function UE(t,e){Af(t,t,e)}function Af(t,e,n){if(n(e),e instanceof $)for(var s=(e=e.R.s).length,l=0;l<s;l++)Af(t,e[l],n)}function Ja(t,e,n){if(n(e))return e;if(e instanceof $)for(var s=(e=e.R.s).length,l=0;l<s;l++){var u=Ja(t,e[l],n);if(null!==u)return u}return null}function j1(t){for(var e=(t=t.R.s).length,n=0,s=0;s<e;s++){var l=t[s];l instanceof $?n=Math.max(n,j1(l)):l instanceof Ct&&(n=Math.max(n,l.ag/2*l.strokeMiterLimit*l.uf()))}return n}function A0(t,e,n,s){for(var l=t.R.s,u=l.length;u--;){var c=l[u];if(c.visible){var d=c.actualBounds,p=t.naturalBounds;d.x>p.width||d.y>p.height||0>d.x+d.width||0>d.y+d.height||(c instanceof $&&A0(c,e,n,s),null!==e&&(c=e(c)),null===c||null!==n&&!n(c)||s.add(c))}}}function Wh(t){var e=null;return t instanceof Ct&&((e=t.spot1)===Zn&&(e=null),null!==(t=t.geometry)&&null===e&&(e=t.spot1)),null===e&&(e=je),e}function k0(t){var e=null;return t instanceof Ct&&((e=t.spot2)===Zn&&(e=null),null!==(t=t.geometry)&&null===e&&(e=t.spot2)),null===e&&(e=xr),e}function bp(t,e){t.o=e?16777216|t.o:-16777217&t.o}function V1(t,e,n){var s=t.rowDefs;if(!(0>e)){if(s[e]=n instanceof cn?n:void 0,!n)for(e=s.length-1;0<=e&&void 0===s[e--];)s.length--;t.w()}}function B1(t,e,n){var s=t.colDefs;if(!(0>e)){if(s[e]=n instanceof cn?n:void 0,!n)for(e=s.length-1;0<=e&&void 0===s[e--];)s.length--;t.w()}}function Im(t){return null!==(t=t.allBindings)&&t._isFrozen}function Do(t){var e=t.allBindings;if(null===e)null!==t.data&&Y("Template cannot have .data be non-null: "+t),t.allBindings=e=new tt;else if(e._isFrozen)return;var n=new tt;bp(t,!1),t.$l(t,function(g,y){y.ih();var w=y.localBindings;if(null!==w)for(x0(y,!1),w=w.iterator;w.next();){var C=w.value;C.mode===Ey&&x0(y,!0);var D=C.sourceName;null!==D&&("/"===D&&bp(g,!0),null!==(D=Ty(C,g,y))&&(n.add(D),null===D.srcBindings&&(D.srcBindings=new tt),D.srcBindings.add(C))),e.add(C)}if(y instanceof $&&y.type===$.Table){if(0<y.rowCount)for(w=(g=y.rowDefs).length,C=0;C<w;C++)if(void 0!==(D=g[C])&&null!==D.Vd)for(var M=D.Vd.iterator;M.next();){var E=M.value;E.sd=D,E.Wn=2,E.ll=D.index,e.add(E)}if(0<y.columnCount)for(g=(y=y.colDefs).length,w=0;w<g;w++)if(void 0!==(C=y[w])&&null!==C.Vd)for(D=C.Vd.iterator;D.next();)(M=D.value).sd=C,M.Wn=1,M.ll=C.index,e.add(M)}});for(var s=n.iterator;s.next();){var l=s.value;if(null!==l.srcBindings){x0(l,!0);for(var u=l.srcBindings.iterator;u.next();){var c=u.value;null===l.localBindings&&(l.localBindings=new tt),l.localBindings.add(c)}}l.srcBindings=null}for(s=e.iterator;s.next();)if(null!==(u=(l=s.value).sd)){l.sd=null;var d=l.targetProperty,p=d.indexOf(".");0<p&&u instanceof $&&(c=d.substring(0,p),d=d.substr(p+1),null!==(p=u.fb(c))?(u=p,l.targetProperty=d):wi('Warning: unable to find GraphObject named "'+c+'" for Binding: '+l.toString())),u instanceof cn?(c=Cn(u.panel),l.ti=void 0===c?-1:c,u.panel.bindingId=l.ti):u instanceof lt?(c=Cn(u),l.ti=void 0===c?-1:c,u.bindingId=l.ti):Y("Unknown type of binding target: "+u)}e.freeze(),t instanceof ut&&t.Tc()&&t.Za()}function Kh(t){if(t.type===$.Spot||t.type===$.Auto)return Math.min(t.R.length,1);if(t.type===$.Link){for(var e=(t=t.R).length,n=0;n<e;n++){var s=t.K(n);if(!(s instanceof Ct&&s.isPanelMain))break}return n}return t.type===$.Table&&0<t.R.length&&(t=t.R.K(0)).isPanelMain&&t instanceof $&&(t.type===$.TableRow||t.type===$.TableColumn)?1:0}function sD(t,e){var n=Kh(t);if(null===e||0===e.length)for(;t.R.length>n;)t.lc(t.R.length-1,!1);else if(t.R.length<=n){n=e.length;for(var s=0;s<n;s++)b0(t,e[s],s,!0)}else{s=n;for(var l=0;l<e.length;l++,s++){var u=e[l],c=s<t.R.length?t.R.K(s):null;if(c instanceof $){if(c.data!==u){var d=H1(t,c.data),p=H1(t,u),g=p!==d;g||(d=z1(t,d),g=z1(t,p)!==d),g?(t.lc(s,!1),b0(t,u,l,!1)):c.data=u}}else b0(t,u,l,!1)}for(;s<t.R.length;)t.lc(s,!1);t.Qg=null,U1(t,n,0),da(t)||t.w(),t.graduatedIntervals=null,t.yf()||Am(t,t,!1),null!==(e=t.part)&&(e.Kh=null,e.Sf=NaN,t.He&&e instanceof Z&&(e.He=!0),e.He&&e instanceof Z&&(e.sc=null))}}function b0(t,e,n,s){if(!(null==e||0>n)){var l=H1(t,e);if(null!==(l=z1(t,l))){if(Do(l),0!=(16777216&(l=l.copy()).o)){var u=t.Yg();null!==u&&bp(u,!0)}"object"==typeof e&&(null===t.$d&&(t.$d=new xt),t.$d.add(e,l)),u=n+Kh(t),t.Cb(u,l),s&&(l.qb=e,U1(t,u,n),l.qb=null),l.data=e}}}function U1(t,e,n){for(t=t.R;e<t.length;){var s=t.K(e);if(s instanceof $){var l=e,u=n;s.type===$.TableRow?s.row=l:s.type===$.TableColumn&&(s.column=l),s.itemIndex=u}e++,n++}}function H1(t,e){if(null===e)return"";if("function"==typeof(t=t.itemCategoryProperty))t=t(e);else{if("string"!=typeof t||"object"!=typeof e)return"";if(""===t)return"";t=Be(e,t)}return void 0===t?"":"string"==typeof t?t:void Y("Panel.getCategoryForItemData found a non-string category for "+e+": "+t)}function z1(t,e){var n=t.itemTemplateMap,s=null;return null!==n&&(s=n.I(e)),null===s&&(null!==n&&(s=n.I("")),null===s&&(km||(km=!0,wi('No item template Panel found for category "'+e+'" on '+t),wi("  Using default item template."),t=new $,(e=new Kt).bind(new xe("text","",vo)),t.add(e),O0=t),s=O0)),s}function Am(t,e,n){var s=e.enabledChanged;if(null!==s&&s(e,n),e instanceof $){s=(e=e.R.s).length;for(var l=0;l<s;l++){var u=e[l];n&&u instanceof $&&!u.isEnabled||Am(t,u,n)}}}function Go(t,e){e.name=t,ao.add(t,e)}Rt.className="Brush",Rt.Solid=oo=new K(Rt,"Solid",0),Rt.Linear=ya=new K(Rt,"Linear",1),Rt.Radial=Ji=new K(Rt,"Radial",2),Rt.Pattern=zl=new K(Rt,"Pattern",4),Rt.Lab=Ef=new K(Rt,"Lab",5),Rt.HSL=Sm=new K(Rt,"HSL",6),Rt.randomColor=function(t,e){void 0===t&&(t=128),void 0===e&&(e=Math.max(t,255));var n=Math.abs(e-t);e=Math.floor(t+Math.random()*n).toString(16);var s=Math.floor(t+Math.random()*n).toString(16);return t=Math.floor(t+Math.random()*n).toString(16),2>e.length&&(e="0"+e),2>s.length&&(s="0"+s),2>t.length&&(t="0"+t),"#"+e+s+t},Rt.isValidColor=function(t){if("black"===t)return!0;if(""===t)return!1;$h||(Mm(),$h=!0);var e=Pp;if(null===e)return!0;e.fillStyle="#000000";var n=e.fillStyle;return e.fillStyle=t,e.fillStyle!==n||(e.fillStyle="#FFFFFF",n=e.fillStyle,e.fillStyle=t,e.fillStyle!==n)},Rt.lighten=function(t){return D0(t)},Rt.lightenBy=D0,Rt.darken=function(t){return O1(t)},Rt.darkenBy=O1,Rt.mix=_0,Rt.isDark=_f,$e.prototype.measure=function(){},$e.prototype.Fz=function(t,e,n,s,l){t.measure(e,n,s,l)},$e.prototype.arrange=function(){},$e.prototype.sy=function(t,e,n,s,l,u){t.arrange(e,n,s,l,u)},$e.prototype.Pz=function(t){t.Mj()},$e.prototype.tc=function(){},St.Object.defineProperties($e.prototype,{name:{get:function(){return this.va},set:function(t){this.va=t}},classType:{get:function(){return $}}}),$e.prototype.remeasureObject=$e.prototype.Pz,$e.prototype.arrangeElement=$e.prototype.sy,$e.prototype.measureElement=$e.prototype.Fz,$e.className="PanelLayout",zt(va,$e),va.prototype.measure=function(t,e,n,s,l,u,c){var d=s.length;t=so(t);for(var p=0;p<d;p++){var g=s[p];if(g.visible||g===t){var y=g.margin,w=y.right+y.left;y=y.top+y.bottom,g.measure(e,n,u,c);var C=g.measuredBounds;w=Math.max(C.width+w,0),y=Math.max(C.height+y,0),C=g.position.x;var D=g.position.y;isFinite(C)||(C=0),isFinite(D)||(D=0),g instanceof Ct&&g.isGeometryPositioned&&(C-=g=g.strokeWidth/2,D-=g),Ke(l,C,D,w,y)}}},va.prototype.arrange=function(t,e,n){var s=e.length,l=t.padding;for(t=n.x-l.left,n=n.y-l.top,l=0;l<s;l++){var u=e[l],c=u.measuredBounds,d=u.margin,p=u.position.x,g=u.position.y;if(p=isNaN(p)?-t:p-t,g=isNaN(g)?-n:g-n,u instanceof Ct&&u.isGeometryPositioned){var y=u.strokeWidth/2;p-=y,g-=y}u.visible&&u.arrange(p+d.left,g+d.top,c.width,c.height)}},zt(Np,$e),Np.prototype.measure=function(t,e,n,s,l,u,c){var d=s.length;e=ce(),u=so(t);for(var p=0;p<d;p++){var g=s[p];if(g.visible||g===u){var y=vs(g,!1);if(y!==Ve&&y!==In)e.push(g);else{g.measure(1/0,n,0,c),y=g.margin,g=g.measuredBounds;var w=Math.max(g.height+y.top+y.bottom,0);l.width+=Math.max(g.width+y.right+y.left,0),l.height=Math.max(l.height,w)}}}for(s=e.length,t.desiredSize.height?n=Math.min(t.desiredSize.height,t.maxSize.height):0!==l.height&&(n=Math.min(l.height,t.maxSize.height)),t=0;t<s;t++)((p=e[t]).visible||p===u)&&(d=(y=p.margin).right+y.left,y=y.top+y.bottom,p.measure(1/0,n,0,c),p=p.measuredBounds,y=Math.max(p.height+y,0),l.width+=Math.max(p.width+d,0),l.height=Math.max(l.height,y));It(e)},Np.prototype.arrange=function(t,e,n){for(var s=e.length,l=t.padding,u=l.top,c=t.isOpposite,d=c?n.width:l.left,p=0;p<s;p++){var g=u,y=e[p];if(y.visible){var w=y.measuredBounds,C=y.margin,D=C.top+C.bottom,M=u+l.bottom,E=w.height,I=vs(y,!1);(isNaN(y.desiredSize.height)&&I===Ge||I===Wn)&&(E=Math.max(n.height-D-M,0)),D=E+D+M,(M=y.alignment).Sb()&&(M=t.defaultAlignment),M.pb()||(M=ht),c&&(d-=w.width+C.left+C.right),y.arrange(d+M.offsetX+C.left,g+M.offsetY+C.top+(n.height*M.y-D*M.y),w.width,E),c||(d+=w.width+C.left+C.right)}}},zt(Pf,$e),Pf.prototype.measure=function(t,e,n,s,l,u){var c=s.length;n=ce();for(var d=so(t),p=0;p<c;p++){var g=s[p];if(g.visible||g===d){var y=vs(g,!1);if(y!==Ve&&y!==Wn)n.push(g);else{var w=g.margin;y=w.right+w.left,w=w.top+w.bottom,g.measure(e,1/0,u,0),g=g.measuredBounds,Ba(l,Math.max(l.width,Math.max(g.width+y,0)),l.height+Math.max(g.height+w,0))}}}if(0!==(s=n.length)){for(t.desiredSize.width?e=Math.min(t.desiredSize.width,t.maxSize.width):0!==l.width&&(e=Math.min(l.width,t.maxSize.width)),t=0;t<s;t++)((p=n[t]).visible||p===d)&&(c=(g=p.margin).right+g.left,g=g.top+g.bottom,p.measure(e,1/0,u,0),p=p.measuredBounds,g=Math.max(p.height+g,0),l.width=Math.max(l.width,Math.max(p.width+c,0)),l.height+=g);It(n)}},Pf.prototype.arrange=function(t,e,n){for(var s=e.length,l=t.padding,u=l.left,c=t.isOpposite,d=c?n.height:l.top,p=0;p<s;p++){var g=u,y=e[p];if(y.visible){var w=y.measuredBounds,C=y.margin,D=C.left+C.right,M=u+l.right,E=w.width,I=vs(y,!1);(isNaN(y.desiredSize.width)&&I===Ge||I===In)&&(E=Math.max(n.width-D-M,0)),D=E+D+M,(M=y.alignment).Sb()&&(M=t.defaultAlignment),M.pb()||(M=ht),c&&(d-=w.height+C.bottom+C.top),y.arrange(g+M.offsetX+C.left+(n.width*M.x-D*M.x),d+M.offsetY+C.top,E,w.height),c||(d+=w.height+C.bottom+C.top)}}},zt(Dm,$e),Dm.prototype.measure=function(t,e,n,s,l,u,c){var d=s.length,p=t.vb(),g=p.margin,y=g.right+g.left,w=g.top+g.bottom;p.measure(e,n,u,c);var C=p.measuredBounds;u=C.width,c=C.height;var D=Math.max(u+y,0),M=Math.max(c+w,0),E=t.isClipping,I=U.allocAt(-g.left,-g.top,D,M),P=U.allocAt(0,0,u,c);P0(p,P,!0),u=P.width,c=P.height;for(var k=!0,b=so(t),O=0;O<d;O++){var L=s[O],H=e,J=n;if(L!==p&&(L.visible||L===b)){switch(D=(g=L.margin).right+g.left,M=g.top+g.bottom,C=vs(L,!1)){case Ge:H=u,J=c;break;case In:H=u;break;case Wn:J=c}L.measure(H,J,0,0),C=L.measuredBounds,D=Math.max(C.width+D,0),M=Math.max(C.height+M,0),(H=L.alignment).Sb()&&(H=t.defaultAlignment),H.pb()||(H=ht);var nt=L.alignmentFocus;nt.Sb()&&(nt=ht),J=null,L instanceof $&&""!==L.Pe&&(J=L.fb(L.Pe))===L&&(J=null);var et=P.x,q=P.y;if(null!==J){for(L.arrange(0,0,C.width,C.height),g=A.allocAt((g=J.actualBounds).x+(nt.x*g.width-nt.offsetX),g.y+(nt.y*g.height-nt.offsetY)),J=J.panel;J!==L;)J.transform.Fa(g),J=J.panel;et+=H.x*u+H.offsetX-g.x,q+=H.y*c+H.offsetY-g.y,A.free(g)}else et+=H.x*u+H.offsetX-(nt.x*C.width+nt.offsetX)-g.left,q+=H.y*c+H.offsetY-(nt.y*C.height+nt.offsetY)-g.top;k?(k=!1,l.h(et,q,D,M)):Ke(l,et,q,D,M)}}switch(k?l.assign(I):E?l.Gu(P.x,P.y,P.width,P.height):Ke(l,I.x,I.y,I.width,I.height),U.free(I),U.free(P),(C=p.stretch)===io&&(C=vs(p,!1)),C){case Ve:return;case Ge:if(!isFinite(e)&&!isFinite(n))return;break;case In:if(!isFinite(e))return;break;case Wn:if(!isFinite(n))return}for(u=(C=p.measuredBounds).width,c=C.height,D=Math.max(u+y,0),M=Math.max(c+w,0),P0(p,P=U.allocAt(-(g=p.margin).left,-g.top,D,M),!0),u=P.width,c=P.height,e=0;e<d;e++)(n=s[e])===p||!n.visible&&n!==b||(D=(g=n.margin).right+g.left,M=g.top+g.bottom,C=n.measuredBounds,D=Math.max(C.width+D,0),M=Math.max(C.height+M,0),(y=n.alignment).Sb()&&(y=t.defaultAlignment),y.pb()||(y=ht),(n=n.alignmentFocus).Sb()&&(n=ht),k?(k=!1,l.h(y.x*u+y.offsetX-(n.x*C.width+n.offsetX)-g.left,y.y*c+y.offsetY-(n.y*C.height+n.offsetY)-g.top,D,M)):Ke(l,y.x*u+y.offsetX-(n.x*C.width+n.offsetX)-g.left,y.y*c+y.offsetY-(n.y*C.height+n.offsetY)-g.top,D,M));k?l.assign(I):E?l.Gu(P.x,P.y,P.width,P.height):Ke(l,I.x,I.y,I.width,I.height),U.free(P)},Dm.prototype.arrange=function(t,e,n){var s=e.length,l=t.vb(),u=l.measuredBounds,c=u.width,d=u.height,p=t.padding,g=(u=p.left)-n.x,y=(p=p.top)-n.y;for(l.arrange(g,y,c,d),P0(l,c=U.allocAt(0,0,c,d),!1),d=0;d<s;d++){var w=e[d];if(w!==l){var C=(g=w.measuredBounds).width,D=g.height;(y=w.alignment).Sb()&&(y=t.defaultAlignment),y.pb()||(y=ht);var M=w.alignmentFocus;if(M.Sb()&&(M=ht),g=null,w instanceof $&&""!==w.Pe&&(g=w.fb(w.Pe))===w&&(g=null),null!==g){var E=g.actualBounds;for(M=A.allocAt(E.x+(M.x*E.width-M.offsetX),E.y+(M.y*E.height-M.offsetY)),g=g.panel;g!==w;)g.transform.Fa(M),g=g.panel;g=y.x*c.width+y.offsetX-M.x,y=y.y*c.height+y.offsetY-M.y,A.free(M)}else g=y.x*c.width+y.offsetX-(M.x*C+M.offsetX),y=y.y*c.height+y.offsetY-(M.y*D+M.offsetY);g+=c.x-n.x,y+=c.y-n.y,w.visible&&w.arrange(u+g,p+y,C,D)}}U.free(c)},zt(Ip,$e),Ip.prototype.measure=function(t,e,n,s,l,u,c){var d=s.length,p=t.vb(),g=p.margin,y=e,w=n,C=g.right+g.left,D=g.top+g.bottom;p.measure(e,n,u,c),g=p.measuredBounds;var M=0,E=null;p instanceof Ct&&(M=(E=p).strokeWidth*E.scale);var I=Math.max(g.width+C,0);g=Math.max(g.height+D,0);var P=Wh(p),k=P.x*I+P.offsetX;P=P.y*g+P.offsetY;var b=k0(p),O=b.x*I+b.offsetX;for(b=b.y*g+b.offsetY,isFinite(e)&&(y=Math.max(Math.abs(k-O)-M,0)),isFinite(n)&&(w=Math.max(Math.abs(P-b)-M,0)),(M=gt.alloc()).h(0,0),t=so(t),b=0;b<d;b++)(P=s[b])===p||!P.visible&&P!==t||(I=(g=P.margin).right+g.left,k=g.top+g.bottom,P.measure(y,w,0,0),g=P.measuredBounds,I=Math.max(g.width+I,0),g=Math.max(g.height+k,0),M.h(Math.max(I,M.width),Math.max(g,M.height)));if(1===d)l.width=I,l.height=g,gt.free(M);else{switch(P=Wh(p),d=s=0,(b=k0(p)).x!==P.x&&b.y!==P.y&&(s=M.width/Math.abs(b.x-P.x),d=M.height/Math.abs(b.y-P.y)),gt.free(M),M=0,null!==E&&(M=E.strokeWidth*E.scale,L0(E)===Gs&&(s=d=Math.max(s,d))),s+=Math.abs(P.offsetX)+Math.abs(b.offsetX)+M,d+=Math.abs(P.offsetY)+Math.abs(b.offsetY)+M,(E=p.stretch)===io&&(E=vs(p,!1)),E){case Ve:c=u=0;break;case Ge:isFinite(e)&&(s=e),isFinite(n)&&(d=n);break;case In:isFinite(e)&&(s=e),c=0;break;case Wn:u=0,isFinite(n)&&(d=n)}p.Mj(),p.measure(s,d,u,c),l.width=p.measuredBounds.width+C,l.height=p.measuredBounds.height+D}},Ip.prototype.arrange=function(t,e){var n=e.length,s=t.vb(),l=s.measuredBounds,u=U.alloc();u.h(0,0,1,1);var c=s.margin,d=c.left,p=t.padding,g=p.left;s.arrange(g+d,(p=p.top)+(c=c.top),l.width,l.height);var y=Wh(s),w=k0(s),C=y.y*l.height+y.offsetY,D=w.x*l.width+w.offsetX;for(w=w.y*l.height+w.offsetY,u.x=y.x*l.width+y.offsetX,u.y=C,Ke(u,D,w,0,0),u.x+=d+g,u.y+=c+p,l=0;l<n;l++)(d=e[l])!==s&&(g=d.measuredBounds,c=d.margin,p=Math.max(g.width+c.right+c.left,0),y=Math.max(g.height+c.top+c.bottom,0),(C=d.alignment).Sb()&&(C=t.defaultAlignment),C.pb()||(C=ht),p=u.width*C.x+C.offsetX-p*C.x+c.left+u.x,c=u.height*C.y+C.offsetY-y*C.y+c.top+u.y,d.visible&&(vr(u.x,u.y,u.width,u.height,p,c,g.width,g.height)?d.arrange(p,c,g.width,g.height):d.arrange(p,c,g.width,g.height,new U(u.x,u.y,u.width,u.height))));U.free(u)},zt(Gl,$e),Gl.prototype.measure=function(t,e,n,s,l){for(var u=s.length,c=ce(),d=ce(),p=0;p<u;p++){var g=s[p],y=g instanceof $?g:null;if(null===y||y.type!==$.TableRow&&y.type!==$.TableColumn||!g.visible)c.push(g);else{d.push(y);for(var w=y.R.s,C=w.length,D=0;D<C;D++){var M=w[D];y.type===$.TableRow?M.row=g.row:y.type===$.TableColumn&&(M.column=g.column),c.push(M)}}}0===(u=c.length)&&(t.getRowDefinition(0),t.getColumnDefinition(0));for(var E=[],I=0;I<u;I++){var P=c[I];P.visible&&(lr(P,!0),$s(P,!0),E[P.row]||(E[P.row]=[]),E[P.row][P.column]||(E[P.row][P.column]=[]),E[P.row][P.column].push(P))}It(c);var k=ce(),b=ce(),O=ce(),L={count:0},H={count:0},J=e,nt=n,et=t.rowDefs,q=t.colDefs,G=null;u=et.length;for(var Mt=0;Mt<u;Mt++)void 0!==(G=et[Mt])&&(G.actual=0);u=q.length;for(var pt=0;pt<u;pt++)void 0!==(G=q[pt])&&(G.actual=0);for(var bt=E.length,ue=0,Ce=0;Ce<bt;Ce++)E[Ce]&&(ue=Math.max(ue,E[Ce].length));var Sn=Math.min(t.topIndex,bt-1),ui=Math.min(t.leftIndex,ue-1),pn=0;bt=E.length;for(var iu=so(t),vt=0;vt<bt;vt++)if(E[vt]){ue=E[vt].length;var Qo=t.getRowDefinition(vt);Qo.actual=0;for(var gi=Qo.jc=0;gi<ue;gi++)if(E[vt][gi]){var fl=t.getColumnDefinition(gi);void 0===k[gi]&&(fl.actual=0,fl.jc=0,k[gi]=!0);for(var mi=E[vt][gi],ho=mi.length,Pi=0;Pi<ho;Pi++){var yi=mi[Pi];if(yi.visible||yi===iu){var xn=1<yi.rowSpan||1<yi.columnSpan;xn&&(vt<Sn||gi<ui||b.push(yi));var Es=yi.margin,mc=Es.right+Es.left,er=Es.top+Es.bottom,vi=xm(yi,Qo,fl,!1),yd=yi.desiredSize,nh=!isNaN(yd.height),qo=!isNaN(yd.width)&&nh;if(xn||vi===Ve||qo||vt<Sn||gi<ui||(void 0!==L[gi]||vi!==Ge&&vi!==In||(L[gi]=-1,L.count++),void 0!==H[vt]||vi!==Ge&&vi!==Wn||(H[vt]=-1,H.count++),O.push(yi)),yi.measure(1/0,1/0,0,0),!(vt<Sn||gi<ui)){var Bi=yi.measuredBounds,ih=Math.max(Bi.width+mc,0),pr=Math.max(Bi.height+er,0);if(1===yi.rowSpan&&(vi===Ve||vi===In)){var ru=(G=t.getRowDefinition(vt)).Qc();(pn=Math.max(pr-G.actual,0))+ru>nt&&(pn=Math.max(nt-ru,0));var rh=0===G.ma;G.jc=G.jc+pn,G.actual=G.ma+pn,nt=Math.max(nt-(pn+(rh?ru:0)),0)}if(1===yi.columnSpan&&(vi===Ve||vi===Wn)){var Dg=(G=t.getColumnDefinition(gi)).Qc();(pn=Math.max(ih-G.actual,0))+Dg>J&&(pn=Math.max(J-Dg,0));var Bw=0===G.ma;G.jc=G.jc+pn,G.actual=G.ma+pn,J=Math.max(J-(pn+(Bw?Dg:0)),0)}xn&&yi.Mj()}}}}}It(k);var ta=0,ts=0;u=t.columnCount;for(var oh=0;oh<u;oh++){var dl=q[oh];void 0!==dl&&(ta+=isNaN(dl.Ac)?dl.jc:dl.Ac,0!==dl.jc&&(ta+=dl.Qc()))}u=t.rowCount;for(var yc=0;yc<u;yc++){var ou=et[yc];void 0!==ou&&(ts+=isNaN(ou.Ac)?ou.jc:ou.Ac,0!==ou.jc&&(ts+=ou.Qc()))}J=Math.max(e-ta,0);var co=nt=Math.max(n-ts,0),es=J;u=O.length;for(var nr=0;nr<u;nr++){var Ps=O[nr],Qy=t.getRowDefinition(Ps.row),ea=t.getColumnDefinition(Ps.column),vc=Ps.measuredBounds,ko=Ps.margin,ns=ko.top+ko.bottom;L[Ps.column]=0===ea.jc&&void 0!==L[Ps.column]?Math.max(vc.width+(ko.right+ko.left),L[Ps.column]):null,H[Ps.row]=0===Qy.jc&&void 0!==H[Ps.row]?Math.max(vc.height+ns,H[Ps.row]):null}var is,wc=0,vd=0;for(is in H)"count"!==is&&(wc+=H[is]);for(is in L)"count"!==is&&(vd+=L[is]);for(var Bn=gt.alloc(),qy=0;qy<u;qy++){var Ui=O[qy];if(Ui.visible||Ui===iu){var Ue=t.getRowDefinition(Ui.row),ti=t.getColumnDefinition(Ui.column),Ea=0;isFinite(ti.width)?Ea=ti.width:(Ea=isFinite(J)&&null!==L[Ui.column]?0===vd?ti.actual+J:L[Ui.column]/vd*es:null!==L[Ui.column]?J:ti.actual||J,Ea=Math.max(0,Ea-ti.Qc()));var pl=0;switch(isFinite(Ue.height)?pl=Ue.height:(pl=isFinite(nt)&&null!==H[Ui.row]?0===wc?Ue.actual+nt:H[Ui.row]/wc*co:null!==H[Ui.row]?nt:Ue.actual||nt,pl=Math.max(0,pl-Ue.Qc())),Bn.h(Math.max(ti.minimum,Math.min(Ea,ti.maximum)),Math.max(Ue.minimum,Math.min(pl,Ue.maximum))),vi=xm(Ui,Ue,ti,!1)){case In:Bn.height=Math.max(Bn.height,Ue.actual+nt);break;case Wn:Bn.width=Math.max(Bn.width,ti.actual+J)}var su=Ui.margin,xc=su.right+su.left,tv=su.top+su.bottom;Ui.Mj(),Ui.measure(Bn.width,Bn.height,ti.minimum,Ue.minimum);var wd=Ui.measuredBounds,ah=Math.max(wd.width+xc,0),Cc=Math.max(wd.height+tv,0);isFinite(J)&&(ah=Math.min(ah,Bn.width)),isFinite(nt)&&(Cc=Math.min(Cc,Bn.height));var ir=0;ir=Ue.actual,Ue.actual=Math.max(Ue.actual,Cc),Ue.jc=Math.max(Ue.jc,Cc),pn=Ue.actual-ir,nt=Math.max(nt-pn,0),null===H[Ui.row]&&(co=Math.max(co-pn,0)),ir=ti.actual,ti.actual=Math.max(ti.actual,ah),ti.jc=Math.max(ti.jc,ah),pn=ti.actual-ir,J=Math.max(J-pn,0),null===L[Ui.column]&&(es=Math.max(es-pn,0))}}It(O);var na=gt.alloc(),rs=ce(),Gr=ce();if(0!==(u=b.length))for(var Ns=0;Ns<bt;Ns++)if(E[Ns]){ue=E[Ns].length;var xd=t.getRowDefinition(Ns);rs[Ns]=xd.actual;for(var gl=0;gl<ue;gl++)if(E[Ns][gl]){var ev=t.getColumnDefinition(gl);Gr[gl]=ev.actual}}for(var Mc=0;Mc<u;Mc++){var ke=b[Mc];if(ke.visible||ke===iu){var fo=t.getRowDefinition(ke.row),po=t.getColumnDefinition(ke.column);switch(Bn.h(Math.max(po.minimum,Math.min(e,po.maximum)),Math.max(fo.minimum,Math.min(n,fo.maximum))),vi=xm(ke,fo,po,!1)){case Ge:0!==Gr[po.index]&&(Bn.width=Math.min(Bn.width,Gr[po.index])),0!==rs[fo.index]&&(Bn.height=Math.min(Bn.height,rs[fo.index]));break;case In:0!==Gr[po.index]&&(Bn.width=Math.min(Bn.width,Gr[po.index]));break;case Wn:0!==rs[fo.index]&&(Bn.height=Math.min(Bn.height,rs[fo.index]))}isFinite(po.width)&&(Bn.width=po.width),isFinite(fo.height)&&(Bn.height=fo.height),na.h(0,0);for(var Cd=po.minimum,gr=fo.minimum,Pa=1;Pa<ke.rowSpan&&!(ke.row+Pa>=t.rowCount);Pa++)G=t.getRowDefinition(ke.row+Pa),pn=0,pn=vi===Ge||vi===Wn?Math.max(G.minimum,0===rs[ke.row+Pa]?G.maximum:Math.min(rs[ke.row+Pa],G.maximum)):Math.max(G.minimum,isNaN(G.Ac)?G.maximum:Math.min(G.Ac,G.maximum)),na.height+=pn,gr+=G.minimum;for(var $r=1;$r<ke.columnSpan&&!(ke.column+$r>=t.columnCount);$r++)G=t.getColumnDefinition(ke.column+$r),pn=0,pn=vi===Ge||vi===In?Math.max(G.minimum,0===Gr[ke.column+$r]?G.maximum:Math.min(Gr[ke.column+$r],G.maximum)):Math.max(G.minimum,isNaN(G.Ac)?G.maximum:Math.min(G.Ac,G.maximum)),na.width+=pn,Cd+=G.minimum;Bn.width+=na.width,Bn.height+=na.height;var Md=ke.margin,au=Md.right+Md.left,_g=Md.top+Md.bottom;ke.measure(Bn.width,Bn.height,Cd,gr);for(var lh=ke.measuredBounds,Is=Math.max(lh.width+au,0),lu=Math.max(lh.height+_g,0),uu=0,Sd=0;Sd<ke.rowSpan&&!(ke.row+Sd>=t.rowCount);Sd++)uu+=(G=t.getRowDefinition(ke.row+Sd)).total||0;if(uu<lu){var ml=lu-uu,ia=lu-uu;if(null!==ke.spanAllocation)for(var yl=ke.spanAllocation,Na=0;Na<ke.rowSpan&&!(0>=ml)&&!(ke.row+Na>=t.rowCount);Na++){var vl=(G=t.getRowDefinition(ke.row+Na)).ma||0,uh=yl(ke,G,ia);G.actual=Math.min(G.maximum,vl+uh),G.ma!==vl&&(ml-=G.ma-vl)}for(;0<ml;){var bo=G.ma||0;if(isNaN(G.height)&&G.maximum>bo&&(G.actual=Math.min(G.maximum,bo+ml),G.ma!==bo&&(ml-=G.ma-bo)),0===G.index)break;G=t.getRowDefinition(G.index-1)}}for(var hh=0,wl=0;wl<ke.columnSpan&&!(ke.column+wl>=t.columnCount);wl++)hh+=(G=t.getColumnDefinition(ke.column+wl)).total||0;if(hh<Is){var Sc=Is-hh,nv=Is-hh;if(null!==ke.spanAllocation)for(var Ia=ke.spanAllocation,ch=0;ch<ke.columnSpan&&!(0>=Sc)&&!(ke.column+ch>=t.columnCount);ch++){var Tg=(G=t.getColumnDefinition(ke.column+ch)).ma||0,Eg=Ia(ke,G,nv);G.actual=Math.min(G.maximum,Tg+Eg),G.ma!==Tg&&(Sc-=G.ma-Tg)}for(;0<Sc;){var Dd=G.ma||0;if(isNaN(G.width)&&G.maximum>Dd&&(G.actual=Math.min(G.maximum,Dd+Sc),G.ma!==Dd&&(Sc-=G.ma-Dd)),0===G.index)break;G=t.getColumnDefinition(G.index-1)}}}}It(b),gt.free(na),gt.free(Bn),void 0!==rs&&It(rs),void 0!==Gr&&It(Gr);var fh=0,hu=0,iv=t.desiredSize,jC=t.maxSize;vi=vs(t,!0);var Dc=ts=ta=0,Pg=0;u=t.columnCount;for(var Dn=0;Dn<u;Dn++)void 0!==q[Dn]&&(G=t.getColumnDefinition(Dn),isFinite(G.width)?(Dc+=G.width,Dc+=G.Qc()):kf(G)===Op?(Dc+=G.ma,Dc+=G.Qc()):0!==G.ma&&(ta+=G.ma,ta+=G.Qc()));fh=isFinite(iv.width)?Math.min(iv.width,jC.width):vi!==Ve&&isFinite(e)?e:ta,fh=Math.max(fh,t.minSize.width),fh=Math.max(fh-Dc,0);for(var _c=0===ta?1:Math.max(fh/ta,1),Ng=0;Ng<u;Ng++)void 0!==q[Ng]&&(G=t.getColumnDefinition(Ng),isFinite(G.width)||kf(G)===Op||(G.actual=G.ma*_c),G.position=l.width,0!==G.ma&&(l.width+=G.ma,l.width+=G.Qc()));u=t.rowCount;for(var rv=0;rv<u;rv++)void 0!==et[rv]&&(G=t.getRowDefinition(rv),isFinite(G.height)?(Pg+=G.height,Pg+=G.Qc()):kf(G)===Op?(Pg+=G.ma,Pg+=G.Qc()):0!==G.ma&&(ts+=G.ma,ts+=G.Qc()));hu=isFinite(iv.height)?Math.min(iv.height,jC.height):vi!==Ve&&isFinite(n)?n:ts,hu=Math.max(hu,t.minSize.height),hu=Math.max(hu-Pg,0);for(var $E=0===ts?1:Math.max(hu/ts,1),Ig=0;Ig<u;Ig++)void 0!==et[Ig]&&(G=t.getRowDefinition(Ig),isFinite(G.height)||kf(G)===Op||(G.actual=G.ma*$E),G.position=l.height,0!==G.ma&&(l.height+=G.ma,l.height+=G.Qc()));u=d.length;for(var Ag=0;Ag<u;Ag++){var kg=d[Ag],_d=0,Uw=0;kg.type===$.TableRow?(_d=l.width,Uw=(G=t.getRowDefinition(kg.row)).actual):(_d=(G=t.getColumnDefinition(kg.column)).actual,Uw=l.height),kg.measuredBounds.h(0,0,_d,Uw),lr(kg,!1)}It(d),t.inRowsCols=E},Gl.prototype.arrange=function(t,e,n){var s=e.length,l=t.padding,u=l.left;l=l.top;var c=t.inRowsCols;if(null!==c){for(var d,p,g=c.length,y=0,w=0;w<g;w++)c[w]&&(y=Math.max(y,c[w].length));p=t.rowDefs,d=t.colDefs;var C=w=0,D=Math.min(t.topIndex,g-1);if(0<p.length){for(;D!==g&&(void 0===p[D]||0===p[D].ma);)D++;w=-p[D=Math.max(Math.min(D,g-1),0)].position}var M=Math.min(t.leftIndex,y-1);if(0<d.length){for(;M!==y&&(void 0===d[M]||0===d[M].ma);)M++;C=-d[M=Math.max(Math.min(M,y-1),0)].position}for(var E=0,I=0;E!==g&&void 0===p[E];)E++;for(;I!==g&&void 0===d[I];)I++;y=t.part,t.getRowDefinition(E),t.getColumnDefinition(I);for(var P=0;P<e.length;P++){var k=e[P];if(k instanceof $&&k.visible&&(k.type===$.TableRow||k.type===$.TableColumn)){if(k.type===$.TableRow){d=t.getRowDefinition(k.row);var b=t.getColumnDefinition(I)}else d=t.getRowDefinition(E),b=t.getColumnDefinition(k.column);p=d.position+w+l,0!==d.ma&&(p+=d.mo(Math.max(E,D))),d=b.position+C+u,0!==b.ma&&(d+=b.mo(Math.max(I,M))),b=k.measuredBounds,k.Jk(),k.actualBounds.ja();var O=k.actualBounds,L=U.allocAt(O.x,O.y,O.width,O.height);O.x=k.type===$.TableRow?u:d,O.y=k.type===$.TableColumn?l:p,O.width=b.width,O.height=b.height,k.actualBounds.freeze(),$s(k,!1),Kc(L,O)||null===y||(y.dh(),k.wn(y)),U.free(L)}}for(P=gt.alloc(),k=0;k<g;k++)if(c[k])for(y=c[k].length,p=(b=t.getRowDefinition(k)).position+w+l,0!==b.ma&&(p+=b.mo(Math.max(E,D))),O=0;O<y;O++)if(c[k][O]){d=(L=t.getColumnDefinition(O)).position+C+u,0!==L.ma&&(d+=L.mo(Math.max(I,M)));for(var H=c[k][O],J=H.length,nt=0;nt<J;nt++){var et=H[nt],q=et.measuredBounds;P.h(0,0);for(var G=1;G<et.rowSpan&&!(k+G>=t.rowCount);G++){var Mt=t.getRowDefinition(k+G);0!==Mt.ma&&(P.height+=Mt.total)}for(G=1;G<et.columnSpan&&!(O+G>=t.columnCount);G++)0!==(Mt=t.getColumnDefinition(O+G)).ma&&(P.width+=Mt.total);var pt=L.ma+P.width,bt=b.ma+P.height;G=d,Mt=p;var ue=pt,Ce=bt,Sn=d,ui=p,pn=pt,iu=bt;d+pt>n.width&&(pn=Math.max(n.width-d,0)),p+bt>n.height&&(iu=Math.max(n.height-p,0));var vt=et.alignment;if(vt.Sb()){(vt=t.defaultAlignment).pb()||(vt=ht);var Qo=vt.x,gi=vt.y,fl=vt.offsetX;vt=vt.offsetY;var mi=L.alignment,ho=b.alignment;mi.pb()&&(Qo=mi.x,fl=mi.offsetX),ho.pb()&&(gi=ho.y,vt=ho.offsetY)}else Qo=vt.x,gi=vt.y,fl=vt.offsetX,vt=vt.offsetY;(isNaN(Qo)||isNaN(gi))&&(gi=Qo=.5,vt=fl=0),mi=q.width,ho=q.height;var Pi=et.margin,yi=Pi.left+Pi.right,xn=Pi.top+Pi.bottom,Es=xm(et,b,L,!1);!isNaN(et.desiredSize.width)||Es!==Ge&&Es!==In||(mi=Math.max(pt-yi,0)),!isNaN(et.desiredSize.height)||Es!==Ge&&Es!==Wn||(ho=Math.max(bt-xn,0)),pt=et.maxSize,bt=et.minSize,mi=Math.min(pt.width,mi),ho=Math.min(pt.height,ho),mi=Math.max(bt.width,mi),ho=Math.max(bt.height,ho),G+=ue*Qo-(mi+yi)*Qo+fl+Pi.left,Mt+=Ce*gi-(pt=ho+xn)*gi+vt+Pi.top,et.visible&&(vr(Sn,ui,pn,iu,G,Mt,q.width,q.height)?et.arrange(G,Mt,mi,ho):et.arrange(G,Mt,mi,ho,new U(Sn,ui,pn,iu)))}}for(gt.free(P),t=0;t<s;t++)null===(u=(n=e[t])instanceof $?n:null)||u.type!==$.TableRow&&u.type!==$.TableColumn||(u=n.actualBounds,n.naturalBounds.ja(),n.naturalBounds.h(0,0,u.width,u.height),n.naturalBounds.freeze())}},zt(_m,$e),_m.prototype.measure=function(){},_m.prototype.arrange=function(){},zt(Tm,$e),Tm.prototype.measure=function(){},Tm.prototype.arrange=function(){},zt(Em,$e),Em.prototype.measure=function(t,e,n,s,l,u,c){1<s.length&&Y("Viewbox Panel cannot contain more than one GraphObject."),(s=s[0]).xa=1,s.Mj(),s.measure(1/0,1/0,u,c);var d=s.measuredBounds,p=s.margin,g=p.right+p.left;if(p=p.top+p.bottom,isFinite(e)||isFinite(n)){var y=s.scale,w=d.width;d=d.height;var C=Math.max(e-g,0),D=Math.max(n-p,0),M=1;t.viewboxStretch===Gs?0!==w&&0!==d&&(M=Math.min(C/w,D/d)):0!==w&&0!==d&&(M=Math.max(C/w,D/d)),0===M&&(M=1e-4),s.xa*=M,y!==s.scale&&(lr(s,!0),s.measure(1/0,1/0,u,c))}d=s.measuredBounds,l.width=isFinite(e)?e:Math.max(d.width+g,0),l.height=isFinite(n)?n:Math.max(d.height+p,0)},Em.prototype.arrange=function(t,e,n){var s=(e=e[0]).measuredBounds,l=e.margin,u=Math.max(s.width+(l.right+l.left),0);l=Math.max(s.height+(l.top+l.bottom),0);var c=e.alignment;c.Sb()&&(c=t.defaultAlignment),c.pb()||(c=ht),e.arrange(n.width*c.x-u*c.x+c.offsetX,n.height*c.y-l*c.y+c.offsetY,s.width,s.height)},zt(Ap,$e),Ap.prototype.measure=function(){},Ap.prototype.arrange=function(){},Ap.prototype.tc=function(t,e,n){0>=(n=t.uf()*n.scale)&&(n=1);var s=t.gridCellSize,l=s.width;s=s.height;var u=t.naturalBounds,c=t.actualBounds,d=u.width,p=u.height,g=Math.ceil(d/l),y=Math.ceil(p/s),w=t.gridOrigin,C=w.x;w=w.y,e.save(),e.beginPath(),e.rect(0,0,d,p),e.clip();for(var D=[],M=t.R.s,E=M.length,I=0;I<E;I++){var P=M[I],k=[];if(D.push(k),P.visible){var b=P.interval;if(!(0>b)){P=I0(P.figure);for(var O=0;O<E;O++)if(O!==I){var L=M[O];L.visible&&I0(L.figure)===P&&(L=L.interval)>b&&k.push(L)}}}}for(E=(M=t.R.s).length,I=0;I<E;I++){var H=M[I];if(H.visible&&(k=H.interval||1,!(2>l*(P=Math.abs(k))*n))){if(b=H.segmentIndex,(!isFinite(b)||isNaN(b))&&(b=0),0>b&&(b=P-Math.min(-b,P)),b=Math.round(b%P),O=1,1!==(P=H.opacity)){if(0===P)continue;e.globalAlpha=(O=e.globalAlpha)*P}L=D[I];var J=!1,nt=H.strokeDashArray;if(null!==nt&&(J=!0,e.Gr(nt,H.strokeDashOffset)),"LineV"===H.figure&&null!==H.stroke&&0<H.strokeWidth){for(e.lineWidth=H.strokeWidth,Si(t,e,H.stroke,!1,!1,u,c),e.beginPath(),nt=H=Math.floor((C-l)/l);nt<=H+g;nt++){var et=nt*l+C;0<=et&&et<=d&&Nf(nt,k,b,L)&&(e.moveTo(et,0),e.lineTo(et,p))}e.stroke()}else if("LineH"===H.figure&&null!==H.stroke&&0<H.strokeWidth){for(e.lineWidth=H.strokeWidth,Si(t,e,H.stroke,!1,!1,u,c),e.beginPath(),nt=H=Math.floor((w-s)/s);nt<=H+y;nt++)0<=(et=nt*s+w)&&et<=p&&Nf(nt,k,b,L)&&(e.moveTo(0,et),e.lineTo(d,et));e.stroke()}else if("BarV"===H.figure&&null!==H.fill)for(Si(t,e,H.fill,!0,!1,u,c),H=H.width,isNaN(H)&&(H=l),et=nt=Math.floor((C-l)/l);et<=nt+g;et++){var q=et*l+C;0<=q+H&&q<=d&&Nf(et,k,b,L)&&e.fillRect(q,0,H,p)}else if("BarH"===H.figure&&null!==H.fill)for(Si(t,e,H.fill,!0,!1,u,c),H=H.height,isNaN(H)&&(H=s),et=nt=Math.floor((w-s)/s);et<=nt+y;et++)0<=(q=et*s+w)+H&&q<=p&&Nf(et,k,b,L)&&e.fillRect(0,q,d,H);J&&e.Er(),1!==P&&(e.globalAlpha=O)}}e.restore(),e.Oc(!1)},zt(Pm,$e),Pm.prototype.measure=function(t,e,n,s,l){var u=s.length;if(t instanceof At||t instanceof z){var c=null,d=null;if(t instanceof z&&(c=t),t instanceof At&&(c=(d=t).adornedPart,null===t.j&&(t.j=[])),c instanceof z){var p=c;if(0===u)Ba(t.naturalBounds,0,0),t.measuredBounds.h(0,0,0,0);else{var g=t instanceof At?null:c.path;(n=t.bg).h(0,0,(e=c.routeBounds).width,e.height);var y=p.points,w=c.pointsCount;null!==d?d.Rj(!1):null!==c&&c.Rj(!1),d=e.width;var C=e.height,D=t.j;if(D.length=0,null!==g){N0(t,d,C,g);var M=g.measuredBounds;n.Xc(M),D.push(M)}M=Dt.alloc();for(var E=A.alloc(),I=A.alloc(),P=0;P<u;P++){var k=s[P];if(k!==g)if(k.isPanelMain&&k instanceof Ct){N0(t,d,C,k);var b=k.measuredBounds;n.Xc(b),D.push(b)}else if(2>w)k.measure(1/0,1/0,0,0),n.Xc(b=k.measuredBounds),D.push(b);else{var O=k.segmentIndex,L=k.segmentFraction,H=k.alignmentFocus;H.Fc()&&(H=ht);var J=k.segmentOrientation,nt=k.segmentOffset;if(isNaN(O)){var et=p.sa;b=ce(),et.Cu(L,b);var q=A.allocAt(b[0],b[1]);if(q.add(p.i(0)),(et.type===X.j||null!==(et=et.figures.first()))&&q.offset(-et.startX,-et.startY),et=b[2],J!==di){var G=p.computeAngle(k,J,et);k.Gb=G}G=q.x-e.x;var Mt=q.y-e.y;A.free(q),It(b)}else if(O<-w||O>=w)b=A.alloc(),p.mg(),p.computeMidPoint(b),et=p.midAngle,J!==di&&(G=p.computeAngle(k,J,et),k.Gb=G),G=b.x-e.x,Mt=b.y-e.y,A.free(b);else{if(G=0,0<=O?(Mt=y.K(O),b=O<w-1?y.K(O+1):Mt):(Mt=y.K(G=w+O),b=0<G?y.K(G-1):Mt),Mt.$a(b)){0<=O?(et=0<O?y.K(O-1):Mt,G=O<w-2?y.K(O+2):b):(et=G<w-1?y.K(G+1):Mt,G=1<G?y.K(G-2):b),q=et.rf(Mt);var pt=b.rf(G);et=q>pt+10?0<=O?et.Ya(Mt):Mt.Ya(et):pt>q+10?0<=O?b.Ya(G):G.Ya(b):0<=O?et.Ya(G):G.Ya(et)}else et=0<=O?Mt.Ya(b):b.Ya(Mt);J!==di&&(G=p.computeAngle(k,J,et),k.Gb=G),G=Mt.x+(b.x-Mt.x)*L-e.x,Mt=Mt.y+(b.y-Mt.y)*L-e.y}k.measure(1/0,1/0,0,0),b=k.measuredBounds;var bt=0;k instanceof Ct&&(bt=k.strokeWidth),pt=(q=k.naturalBounds).width+bt;var ue=q.height+bt;M.reset(),M.translate(-b.x,-b.y),M.scale(k.scale,k.scale),M.rotate(J===di?k.angle:et,pt/2,ue/2),J!==Yp&&J!==$f||M.rotate(90,pt/2,ue/2),J!==Gf&&J!==Qh||M.rotate(-90,pt/2,ue/2),J===hw&&(45<et&&135>et||225<et&&315>et)&&M.rotate(-et,pt/2,ue/2),q=new U(0,0,pt,ue),E.oi(q,H),M.Fa(E),H=bt/2*k.scale-E.x,k=bt/2*k.scale-E.y,I.assign(nt),bt=isNaN(nt.x);var Ce=isNaN(nt.y);if(bt||Ce){pt=pt/2+3,ue=ue/2+3;var Sn=45<=et&&135>=et,ui=225<=et&&315>=et;J===di&&(Sn||ui)?(I.x=Ce?pt:nt.y,I.y=bt?ue:nt.x,Sn?0<=O||isNaN(O)&&.5>L||!bt||(I.y=-ue):ui&&((0<=O||isNaN(O)&&.5>L)&&bt&&(I.y=-ue),Ce&&(I.x=-pt))):(bt&&(I.x=0<=O||isNaN(O)&&.5>L?pt:-pt),Ce&&(I.y=-ue),I.rotate(et))}else I.rotate(et);G+=I.x,Mt+=I.y,q.set(b),q.h(G+H,Mt+k,b.width,b.height),D.push(q),n.Xc(q)}}if(null!==c)for(s=c.labelNodes;s.next();)s.value.measure(1/0,1/0);t.bg=n,t.position.h(e.x+n.x,e.y+n.y),t.location.h(NaN,NaN),Ba(l,n.width||0,n.height||0),Dt.free(M),A.free(E),A.free(I)}}}},Pm.prototype.arrange=function(t,e){var n=e.length;if(t instanceof At||t instanceof z){var s=t,l=null;t instanceof At&&(s=(l=t).adornedPart);var u=t instanceof At?null:s.path,c=t.j;if(0!==c.length){var d=0;if(null!==u&&d<c.length){var p=c[d];d++,u.arrange(p.x-t.bg.x,p.y-t.bg.y,p.width,p.height)}for(p=0;p<n;p++){var g=e[p];if(g!==u&&d<c.length){var y=c[d];d++,g.arrange(y.x-t.bg.x,y.y-t.bg.y,y.width,y.height)}}}if(2<=(n=(e=s.points).count)&&t instanceof z)for(u=t.labelNodes;u.next();){var w=t;d=(c=u.value).segmentIndex,p=c.segmentFraction;var C=c.alignmentFocus;if(g=c.segmentOrientation,y=c.segmentOffset,isNaN(d)){var D=w.sa,M=ce();D.Cu(p,M);var E=A.allocAt(M[0],M[1]);E.add(w.i(0)),D.type===X.j||(D=D.figures.first()),E.offset(-D.startX,-D.startY),D=M[2],g!==di&&(w=w.computeAngle(c,g,D),c.angle=w),w=E.x;var I=E.y;A.free(E),It(M)}else if(d<-n||d>=n)I=M=A.alloc(),(D=w).mg(),D.computeMidPoint(I),D=w.midAngle,g!==di&&(w=w.computeAngle(c,g,D),c.angle=w),w=M.x,I=M.y,A.free(M);else{if(E=0,0<=d?(M=e.s[d],I=d<n-1?e.s[d+1]:M):(M=e.s[E=n+d],I=0<E?e.s[E-1]:M),M.$a(I)){0<=d?(D=0<d?e.s[d-1]:M,E=d<n-2?e.s[d+2]:I):(D=E<n-1?e.s[E+1]:M,E=1<E?e.s[E-2]:I);var P=D.rf(M),k=I.rf(E);D=P>k+10?0<=d?D.Ya(M):M.Ya(D):k>P+10?0<=d?I.Ya(E):E.Ya(I):0<=d?D.Ya(E):E.Ya(D)}else D=0<=d?M.Ya(I):I.Ya(M);g!==di&&(w=w.computeAngle(c,g,D),c.angle=w),w=M.x+(I.x-M.x)*p,I=M.y+(I.y-M.y)*p}if(C.Wr())c.location=new A(w,I);else{C.Fc()&&(C=ht),(M=Dt.alloc()).reset(),M.scale(c.scale,c.scale),M.rotate(c.angle,0,0);var b=c.naturalBounds;E=U.allocAt(0,0,b.width,b.height),(P=A.alloc()).oi(E,C),M.Fa(P),C=-P.x,k=-P.y;var O=b.width,L=b.height;(b=A.alloc()).assign(y);var H=isNaN(y.x),J=isNaN(y.y);if(H||J){O=O/2+3,L=L/2+3;var nt=45<=D&&135>=D,et=225<=D&&315>=D;g===di&&(nt||et)?(b.x=J?O:y.y,b.y=H?L:y.x,nt?0<=d||isNaN(d)&&.5>p||!H||(b.y=-L):et&&((0<=d||isNaN(d)&&.5>p)&&H&&(b.y=-L),J&&(b.x=-O))):(H&&(b.x=0<=d||isNaN(d)&&.5>p?O:-O),J&&(b.y=-L),b.rotate(D))}else b.rotate(D);w+=b.x,I+=b.y,M.So(E),d=A.allocAt(w+(C+=E.x),I+(k+=E.y)),c.move(d),A.free(d),A.free(b),A.free(P),U.free(E),Dt.free(M)}}null!==l?l.Rj(!1):s.Rj(!1)}},zt(kp,$e),kp.prototype.measure=function(t,e,n,s,l,u,c){var d=t.vb();t.graduatedBounds=[];var p=d.margin,g=p.right+p.left,y=p.top+p.bottom;d.measure(e,n,u,c);var w=d.measuredBounds,C=new U(-p.left,-p.top,Math.max(w.width+g,0),Math.max(w.height+y,0));t.graduatedBounds.push(C),l.assign(C);for(var D=d.geometry,M=d.strokeWidth,E=D.flattenedSegments,I=D.flattenedLengths,P=D.flattenedTotalLength,k=E.length,b=0,O=0,L=ce(),H=0;H<k;H++){var J=E[H],nt=[];O=b=0;for(var et=J.length,q=0;q<et;q+=2){var G=J[q],Mt=J[q+1];if(0!==q){var pt=180*Math.atan2(Mt-O,G-b)/Math.PI;0>pt&&(pt+=360),nt.push(pt)}b=G,O=Mt}L.push(nt)}if(null===t.graduatedIntervals){for(var bt=[],ue=t.R.s,Ce=ue.length,Sn=0;Sn<Ce;Sn++){var ui=ue[Sn],pn=[];if(bt.push(pn),ui.visible){var iu=ui.interval;if(!(0>iu))for(var vt=0;vt<Ce;vt++)if(vt!==Sn){var Qo=ue[vt];if(Qo.visible&&ui.constructor===Qo.constructor){var gi=Qo.interval;gi>iu&&pn.push(gi)}}}}t.graduatedIntervals=bt}var fl=t.graduatedIntervals,mi=t.R.s,ho=mi.length,Pi=0,yi=0,xn=P;t.graduatedMarks=[];for(var Es,mc=0;mc<ho;mc++){var er=mi[mc];if(Es=[],er.visible&&er!==d){var vi=Math.abs(er.interval),yd=t.graduatedTickUnit;if(!(2>yd*vi*P/t.graduatedRange&&null===er.graduatedSkip)){var nh=I[0][0],qo=0,Bi=0;yi=P*er.graduatedStart-1e-4,xn=P*er.graduatedEnd+1e-4;var ih=yd*vi,pr=t.graduatedTickBase;if(pr<t.graduatedMin){var ru=(t.graduatedMin-pr)/ih;pr+=(ru=ru%1==0?ru:Math.floor(ru+1))*ih}else pr>t.graduatedMin+ih&&(pr-=Math.floor((pr-t.graduatedMin)/ih)*ih);for(var rh=fl[mc],Dg=pr,Bw=1e-6*t.graduatedMax,ta=1;pr<=t.graduatedMax+Bw;ta++){t:{for(var ts=rh.length,oh=0;oh<ts;oh++){var dl=(pr-t.graduatedTickBase)%(rh[oh]*t.graduatedTickUnit),yc=1e-6*t.graduatedTickUnit;if(dl<yc&&dl>-yc){var ou=!1;break t}}ou=!0}if(ou&&(pr>t.graduatedMax&&(pr=t.graduatedMax),null===er.graduatedSkip||er instanceof Kt&&!er.graduatedSkip(pr,er)||er instanceof Ct&&!er.graduatedSkip(pr,er))&&((Pi=(pr-t.graduatedMin)*P/t.graduatedRange)>P&&(Pi=P),yi<=Pi&&Pi<=xn)){for(var co=L[qo][Bi],es=I[qo][Bi];qo<I.length;){for(;Pi>nh&&Bi<I[qo].length-1;)Bi++,co=L[qo][Bi],nh+=es=I[qo][Bi];if(Pi<=nh)break;co=L[++qo][Bi=0],nh+=es=I[qo][Bi]}var nr=E[qo],Ps=nr[2*Bi],Qy=nr[2*Bi+1],ea=(Pi-(nh-es))/es,vc=new A(Ps+(nr[2*Bi+2]-Ps)*ea+M/2-D.bounds.x,Qy+(nr[2*Bi+3]-Qy)*ea+M/2-D.bounds.y);vc.scale(d.scale,d.scale);t:{var ko=co,sh=L[qo];if(!(.5005>ea&&.4995<ea)){var ns=ko;if(.5>ea?0<Bi?ns=sh[Bi-1]:R.ca(nr[0],nr[nr.length-2])&&R.ca(nr[1],nr[nr.length-1])&&(ns=sh[sh.length-1]):.5<ea&&(Bi+1<sh.length?ns=sh[Bi+1]:R.ca(nr[0],nr[nr.length-2])&&R.ca(nr[1],nr[nr.length-1])&&(ns=sh[0])),ko!==ns){var wc=Math.abs(ko-ns);if(180<wc&&(ko<ns?ko+=360:ns+=360,wc=Math.abs(ko-ns)),5e-4>ea||.9995<ea){co=(ko+ns)/2%360;break t}if(10>wc){var vd=1-Math.abs(.5-ea);co=(ko*vd+ns*(1-vd))%360;break t}}}co=ko}if(er instanceof Kt){var is="";""!==(is=null!==er.graduatedFunction?null!=(is=er.graduatedFunction(pr,er))?is.toString():"":(+pr.toFixed(2)).toString())&&Es.push({Hl:vc,angle:co,text:is})}else Es.push({Hl:vc,angle:co})}pr=Dg+ta*ih}}}t.graduatedMarks.push(Es)}It(L);var Bn=t.graduatedMarks;if(null!==Bn)for(var qy=s.length,Ui=0;Ui<qy;Ui++){var Ue=s[Ui],ti=Bn[Ui];if(Ue.visible&&Ue!==d&&0!==ti.length){if(Ue instanceof Ct){var Ea=t,pl=l,su=Ue.alignmentFocus;su.Fc()&&(su=Qr);var xc=Ue.angle;Ue.Gb=0,Ue.measure(1/0,1/0,0,0),Ue.Gb=xc;var tv=Ue.measuredBounds,wd=tv.width,ah=tv.height,Cc=U.allocAt(0,0,wd,ah),ir=A.alloc();ir.oi(Cc,su),U.free(Cc);for(var na=-ir.x,rs=-ir.y,Gr=new U,Ns=ti.length,xd=0;xd<Ns;xd++)for(var gl=ti[xd],ev=gl.Hl.x,Mc=gl.Hl.y,ke=gl.angle,fo=0;4>fo;fo++){switch(fo){case 0:ir.h(na,rs);break;case 1:ir.h(na+wd,rs);break;case 2:ir.h(na,rs+ah);break;case 3:ir.h(na+wd,rs+ah)}ir.rotate(ke+Ue.angle),ir.offset(ev,Mc),0===xd&&0===fo?Gr.h(ir.x,ir.y,0,0):Gr.Me(ir),ir.offset(-ev,-Mc),ir.rotate(-ke-Ue.angle)}A.free(ir),null!==Ea.graduatedBounds&&Ea.graduatedBounds.push(Gr),Ke(pl,Gr.x,Gr.y,Gr.width,Gr.height)}else if(Ue instanceof Kt){var po=t,Cd=l;null===po.temporaryTextBlock&&(po.temporaryTextBlock=new Kt);var gr=po.temporaryTextBlock;Rm(gr,Ue);var Pa=Ue.alignmentFocus;Pa.Fc()&&(Pa=Qr);for(var $r=Ue.segmentOrientation,Md=Ue.segmentOffset,au=new U,_g=0,lh=0,Is=0,lu=0,uu=0,Sd=ti.length,ml=0;ml<Sd;ml++){var ia=ti[ml];_g=ia.Hl.x,lh=ia.Hl.y,Is=ia.angle,uu=lu=Ue.angle,$r!==di&&(lu=z.computeAngle($r,uu=$r===Kp||$r===Xp?Is+Ue.angle:Is)),gr.Gb=lu,gr.text=ia.text||"",gr.measure(1/0,1/0,0,0);var yl=gr.measuredBounds,Na=gr.naturalBounds,vl=Na.width,uh=Na.height,bo=Dt.alloc();bo.reset(),bo.translate(-yl.x,-yl.y),bo.scale(gr.scale,gr.scale),bo.rotate(uu,vl/2,uh/2),$r!==Yp&&$r!==$f||bo.rotate(90,vl/2,uh/2),$r!==Gf&&$r!==Qh||bo.rotate(-90,vl/2,uh/2),$r===hw&&(45<Is&&135>Is||225<Is&&315>Is)&&bo.rotate(-Is,vl/2,uh/2);var hh=U.allocAt(0,0,vl,uh),wl=A.alloc();wl.oi(hh,Pa),bo.Fa(wl);var Sc=-wl.x,nv=-wl.y,Ia=A.alloc();Ia.assign(Md),isNaN(Ia.x)&&(Ia.x=vl/2+3),isNaN(Ia.y)&&(Ia.y=-(uh/2+3)),Ia.rotate(Is);var ch=new U(_g+=Ia.x+Sc,lh+=Ia.y+nv,yl.width,yl.height),Tg=new U(yl.x,yl.y,yl.width,yl.height),Eg=new U(Na.x,Na.y,Na.width,Na.height);ia.Az=lu,ia.lineCount=gr.lineCount,ia.lines=[gr.yb,gr.zh,gr.Te,gr.Ae,gr.Jc,gr.Wb,gr.qe],ia.actualBounds=ch,ia.measuredBounds=Tg,ia.naturalBounds=Eg,0===ml?au.assign(ch):au.Xc(ch),A.free(Ia),A.free(wl),U.free(hh),Dt.free(bo)}null!==po.graduatedBounds&&po.graduatedBounds.push(au),Ke(Cd,au.x,au.y,au.width,au.height)}lr(Ue,!1)}}},kp.prototype.arrange=function(t,e,n){if(null!==t.graduatedBounds){var s=t.vb(),l=t.graduatedMarks;if(null!==l){var u=t.graduatedBounds,c=0,d=u[c];c++,null!==s&&s.arrange(d.x-n.x,d.y-n.y,d.width,d.height);for(var p=e.length,g=0;g<p;g++){var y=e[g];d=l[g],y.visible&&y!==s&&0!==d.length&&(d=u[c],c++,y.arrange(d.x-n.x,d.y-n.y,d.width,d.height))}t.graduatedBounds=null}}},kp.prototype.tc=function(t,e,n){var s=n.Vi;n.Vi=!0;var l=t.naturalBounds,u=l.width;l=l.height,e.save(),e.beginPath(),e.rect(-1,-1,u+1,l+1),e.clip(),(u=t.vb()).tc(e,n),0>=(l=t.uf()*n.scale)&&(l=1);for(var c=u.actualBounds,d=t.R.s,p=t.graduatedMarks,g=d.length,y=0;y<g;y++){var w=d[y],C=p[y],D=C.length;if(w.visible&&w!==u&&0!==C.length)if(w instanceof Ct){if(!(2>t.graduatedTickUnit*w.interval*u.geometry.flattenedTotalLength/t.graduatedRange*l&&null===w.graduatedSkip)){var M=w.measuredBounds,E=w.strokeWidth*w.scale,I=w.alignmentFocus;I.Fc()&&(I=Qr);for(var P=0;P<D;P++){var k=C[P].Hl,b=C[P].angle,O=I,L=w.Bb;L.reset(),L.translate(k.x+c.x,k.y+c.y),L.rotate(b+w.angle,0,0),L.translate(-M.width*O.x+O.offsetX+E/2,-M.height*O.y+O.offsetY+E/2),L.scale(w.scale,w.scale),Sf(w,!1),w.lh.set(w.Bb),w.yk=w.scale,Vl(w,!1),w.tc(e,n),w.Bb.reset()}}}else if(w instanceof Kt)for(null===t.temporaryTextBlock&&(t.temporaryTextBlock=new Kt),Rm(M=t.temporaryTextBlock,w),w=0;w<D;w++)(E=C[w]).actualBounds&&E.measuredBounds&&E.naturalBounds&&(M.cc=E.text||"",M.Gb=E.Az||0,M.dd=E.lineCount||0,void 0!==(I=E.lines)&&(M.yb=I[0],M.zh=I[1],M.Te=I[2],M.Ae=I[3],M.Jc=I[4],M.Wb=I[5],M.qe=I[6]),E.naturalBounds&&(M.bc=E.naturalBounds),E.actualBounds&&M.arrange((I=E.actualBounds).x,I.y,I.width,I.height),M.arrange((I=E.actualBounds).x,I.y,I.width,I.height),P=E.measuredBounds,E=E.naturalBounds,(k=M.Bb).reset(),k.translate(I.x+c.x,I.y+c.y),k.translate(-P.x,-P.y),M.Qn(k,E.x,E.y,E.width,E.height),Sf(M,!1),M.lh.set(M.Bb),M.yk=M.scale,Vl(M,!1),M.tc(e,n))}n.Vi=s,e.restore(),e.Oc(!0)},zt($,lt),$.prototype.cloneProtected=function(t){lt.prototype.cloneProtected.call(this,t),t.qa=this.qa,t.ub=this.ub.J(),t.Bm=this.Bm.J(),t.Kf=this.Kf,t.Pe=this.Pe,t.bg.assign(this.bg),null!==this.T&&(t.T=this.T.copy(t)),t.$n=this.$n,t.Qm=this.Qm.J(),t.Rm=this.Rm.J(),null!==this.oa&&(t.oa=this.oa.copy()),t.qb=this.qb,t.fn=this.fn,t.xh=this.xh},$.prototype.qf=function(t){lt.prototype.qf.call(this,t),t.R=this.R;for(var e=t.R.s,n=e.length,s=0;s<n;s++)e[s].Uf=t;t.Qg=null},$.prototype.copy=function(){var t=lt.prototype.copy.call(this);if(null!==t){for(var e=this.R.s,n=e.length,s=0;s<n;s++){var l=e[s].copy();l.ni(t),l.jj=null;var u=t.R,c=u.count;if(u.Cb(c,l),null!==(u=t.part)){u.Kh=null,null!==l.portId&&u instanceof Z&&(u.He=!0);var d=t.diagram;null!==d&&d.undoManager.isUndoingRedoing||u.bb(un,"elements",t,null,l,null,c)}}return t}return null},(_=$.prototype).toString=function(){return"Panel("+this.type.name+")#"+Cn(this)},_.wn=function(t){lt.prototype.wn.call(this,t);for(var e=this.R.s,n=e.length,s=0;s<n;s++)e[s].wn(t)},_.ai=function(t,e){if(this.qa===$.Grid)t.Pc(),this.qa.tc(this,t,e);else if(this.qa===$.Graduated)t.Pc(),this.qa.tc(this,t,e);else{if(this.qa===$.Table){t.Pc(),t.lineCap="butt";var n=0<this.rowCount?this.rowDefs:null,s=0<this.columnCount?this.colDefs:null;null!==n&&Nm(this,t,!0,n,!0),null!==s&&Nm(this,t,!1,s,!0),null!==n&&oD(this,t,!0,n),null!==s&&oD(this,t,!1,s),null!==n&&Nm(this,t,!0,n,!1),null!==s&&Nm(this,t,!1,s,!1)}(n=this.isClipping&&this.qa===$.Spot)&&t.save(),s=this.vb();for(var l=this.R.s,u=l.length,c=0;c<u;c++){var d=l[c];n&&d===s&&(t.clipInsteadOfFill=!0),d.tc(t,e),n&&d===s&&(t.clipInsteadOfFill=!1)}n&&(t.restore(),t.Oc(!0))}},_.Kj=function(t,e,n,s,l){var u=this.ke(),c=this.transform,d=1/(c.m11*c.m22-c.m12*c.m21),p=c.m22*d,g=-c.m12*d,y=-c.m21*d,w=c.m11*d,C=d*(c.m21*c.dy-c.m22*c.dx),D=d*(c.m12*c.dx-c.m11*c.dy);if(null!==this.areaBackground)return R.wf((c=this.actualBounds).left,c.top,c.right,c.bottom,t,e,n,s,l);if(null!==this.background)return u=t*p+e*y+C,d=t*g+e*w+D,t=n*p+s*y+C,p=n*g+s*w+D,l.h(0,0),u=R.wf(0,0,(n=this.naturalBounds).width,n.height,u,d,t,p,l),l.transform(c),u;u||(p=1,y=g=0,w=1,D=C=0),d=t*p+e*y+C,t=t*g+e*w+D,l.h(p=n*p+s*y+C,n=n*g+s*w+D),s=(p-d)*(p-d)+(n-t)*(n-t),g=!1,D=(w=this.R.s).length,y=A.alloc(),C=null,e=1/0;var M=null,E=this.isClipping&&this.qa===$.Spot;E&&(M=A.alloc(),(g=(C=this.vb()).Kj(d,t,p,n,M))&&(e=(d-M.x)*(d-M.x)+(t-M.y)*(t-M.y)));for(var I=0;I<D;I++){var P=w[I];P.visible&&P!==C&&P.Kj(d,t,p,n,y)&&(g=!0,(P=(d-y.x)*(d-y.x)+(t-y.y)*(t-y.y))<s&&(s=P,l.set(y)))}return E&&(e>s&&l.set(M),A.free(M)),A.free(y),u&&l.transform(c),g},_.w=function(t){if(!da(this)){lt.prototype.w.call(this,t),t=null,(this.qa===$.Auto||this.qa===$.Link)&&(t=this.vb());for(var e=this.R.s,n=e.length,s=0;s<n;s++){var l=e[s];if((l===t||l.isPanelMain)&&l.w(!0),!l.desiredSize.v()){var u=vs(l,!1);(l instanceof Di||l instanceof $||l instanceof Kt||u!==Ve)&&l.w(!0)}}}},_.Mj=function(){if(!da(this)){lr(this,!0),$s(this,!0);for(var t=this.R.s,e=t.length,n=0;n<e;n++)t[n].Mj()}},_.Jk=function(){if(0==(2048&this.o)){Sf(this,!0),Vl(this,!0);for(var t=this.R.s,e=t.length,n=0;n<e;n++)t[n].Iu()}},_.Iu=function(){Vl(this,!0);for(var t=this.R.s,e=t.length,n=0;n<e;n++)t[n].Iu()},_.El=function(t,e,n,s){var l=this.bg;l.h(0,0,0,0);var u=this.desiredSize,c=this.minSize;void 0===n&&(n=c.width,s=c.height),n=Math.max(n,c.width),s=Math.max(s,c.height);var d=this.maxSize;isNaN(u.width)||(t=Math.min(u.width,d.width)),isNaN(u.height)||(e=Math.min(u.height,d.height)),t=Math.max(n,t),e=Math.max(s,e);var p=this.ub;t=Math.max(t-p.left-p.right,0),e=Math.max(e-p.top-p.bottom,0);var g=this.R.s;0!==g.length&&this.qa.measure(this,t,e,g,l,n,s),t=l.width+p.left+p.right,p=l.height+p.top+p.bottom,isFinite(u.width)&&(t=u.width),isFinite(u.height)&&(p=u.height),t=Math.min(d.width,t),p=Math.min(d.height,p),t=Math.max(c.width,t),p=Math.max(c.height,p),Ba(l,t=Math.max(n,t),p=Math.max(s,p)),Ba(this.naturalBounds,t,p),this.ve(0,0,t,p)},_.vb=function(){if(null===this.Qg){var t=this.R.s,e=t.length;if(0===e)return null;for(var n=0;n<e;n++){var s=t[n];if(!0===s.isPanelMain)return this.Qg=s}this.Qg=t[0]}return this.Qg},_.Vg=function(t,e,n,s){var l=this.R.s;if(this.actualBounds.h(t,e,n,s),0!==l.length){if(!this.desiredSize.v()){t=vs(this,!0);var u=this.measuredBounds;e=u.width,u=u.height;var c=this.Ag,d=c.left+c.right;switch(c=c.top+c.bottom,e===n&&u===s&&(t=Ve),t){case Ve:(e>n||u>s)&&(this.w(),this.measure(e>n?n:e,u>s?s:u,0,0));break;case Ge:this.w(!0),this.measure(n+d,s+c,0,0);break;case In:this.w(!0),this.measure(n+d,u+c,0,0);break;case Wn:this.w(!0),this.measure(e+d,s+c,0,0)}}this.qa.arrange(this,l,this.bg)}},_.Xg=function(t){var e=this.naturalBounds,n=so(this);if(vr(0,0,e.width,e.height,t.x,t.y)){for(var s=(e=this.R.s).length,l=A.allocAt(0,0);s--;){var u=e[s];if((u.visible||u===n)&&(Jn(l.set(t),u.transform),u.ba(l)))return A.free(l),!0}return A.free(l),!(null===this.Yb&&null===this.areaBackground)}return!1},_.Hr=function(t){if(this.bindingId===t)return this;for(var e=this.R.s,n=e.length,s=0;s<n;s++){var l=e[s].Hr(t);if(null!==l)return l}return null},_.$l=function(t,e){if(e(this,t),t instanceof $)for(var n=(t=t.R.s).length,s=0;s<n;s++)this.$l(t[s],e)},_.vl=function(t){return Ja(this,this,t)},_.fb=function(t){if(this.name===t)return this;var e=this.R.s,n=e.length;null===this.xh&&null===this.itemTemplateMap||(n=Kh(this));for(var s=0;s<n;s++){var l=e[s];if(l instanceof $){var u=l.fb(t);if(null!==u)return u}if(l.name===t)return l}return null},_.ke=function(){return!(this.type===$.TableRow||this.type===$.TableColumn)},_.ec=function(t,e,n){if(!1===this.pickable||(void 0===e&&(e=null),void 0===n&&(n=null),ii(this)))return null;var s=this.naturalBounds,l=1/this.uf(),u=this.ke(),c=u?t:Jn(A.allocAt(t.x,t.y),this.transform),d=this.diagram,p=10,g=5;if(null!==d&&(g=(p=d.yl("extraTouchArea"))/2),vr(-g*l,-g*l,s.width+p*l,s.height+p*l,c.x,c.y)){if(!this.isAtomic){var y=(l=this.R.s).length;if(d=A.alloc(),g=(p=this.isClipping&&this.qa===$.Spot)?this.vb():null,p&&(g.ke()?Jn(d.set(t),g.transform):d.set(t),!g.ba(d)))return A.free(d),u||A.free(c),null;for(var w=so(this);y--;){var C=l[y];if((C.visible||C===w)&&(C.ke()?Jn(d.set(t),C.transform):d.set(t),!p||C!==g)){var D=null;if(C instanceof $?D=C.ec(d,e,n):!0===C.pickable&&C.ba(d)&&(D=C),null!==D&&(null!==e&&(D=e(D)),null!==D&&(null===n||n(D))))return A.free(d),u||A.free(c),D}}A.free(d)}return null===this.background&&null===this.areaBackground?(u||A.free(c),null):(t=vr(0,0,s.width,s.height,c.x,c.y)?this:null,u||A.free(c),t)}return u||A.free(c),null},_.di=function(t,e,n,s){if(!1===this.pickable)return!1;void 0===e&&(e=null),void 0===n&&(n=null);var l=this.naturalBounds,u=this.ke(),c=u?t:Jn(A.allocAt(t.x,t.y),this.transform);if(l=vr(0,0,l.width,l.height,c.x,c.y),this.type===$.TableRow||this.type===$.TableColumn||l){if(!this.isAtomic){for(var d=this.R.s,p=d.length,g=A.alloc(),y=so(this);p--;){var w=d[p];if(w.visible||w===y){w.ke()?Jn(g.set(t),w.transform):g.set(t);var C=w;(null!==(w=w instanceof $?w:null)?w.di(g,e,n,s):C.ba(g))&&!1!==C.pickable&&(null!==e&&(C=e(C)),null===C||null!==n&&!n(C)||s.add(C))}}A.free(g)}return u||A.free(c),l&&(null!==this.background||null!==this.areaBackground)}return u||A.free(c),!1},_.tf=function(t,e,n,s,l,u){if(!1===this.pickable)return!1;void 0===e&&(e=null),void 0===n&&(n=null);var c=u;if(void 0===u&&(c=Dt.alloc()).reset(),c.multiply(this.transform),this.Wg(t,c))return A0(this,e,n,l),void 0===u&&Dt.free(c),!0;if(this.Sc(t,c)){if(!this.isAtomic)for(var d=so(this),p=this.R.s,g=p.length;g--;){var y=p[g];if(y.visible||y===d){var w=y.actualBounds,C=this.naturalBounds;w.x>C.width||w.y>C.height||0>w.x+w.width||0>w.y+w.height||(w=y,y=y instanceof $?y:null,(C=Dt.alloc()).set(c),(null!==y?y.tf(t,e,n,s,l,C):k1(w,t,s,C))&&(null!==e&&(w=e(w)),null===w||null!==n&&!n(w)||l.add(w)),Dt.free(C))}}return void 0===u&&Dt.free(c),s}return void 0===u&&Dt.free(c),!1},_.hg=function(t,e,n,s,l,u){if(!1===this.pickable)return!1;void 0===n&&(n=null),void 0===s&&(s=null);var c=this.naturalBounds,d=this.ke(),p=d?t:Jn(A.allocAt(t.x,t.y),this.transform),g=d?e:Jn(A.allocAt(e.x,e.y),this.transform),y=p.rf(g),w=0<p.x&&p.x<c.width&&0<p.y&&p.y<c.height||ni(p.x,p.y,0,0,0,c.height)<=y||ni(p.x,p.y,0,c.height,c.width,c.height)<=y||ni(p.x,p.y,c.width,c.height,c.width,0)<=y||ni(p.x,p.y,c.width,0,0,0)<=y;if(c=p.td(0,0)<=y&&p.td(0,c.height)<=y&&p.td(c.width,0)<=y&&p.td(c.width,c.height)<=y,d||(A.free(p),A.free(g)),w){if(!this.isAtomic){p=A.alloc(),g=A.alloc(),y=so(this);for(var C=this.R.s,D=C.length;D--;){var M=C[D];if(M.visible||M===y){var E=M.actualBounds,I=this.naturalBounds;(!d||!(E.x>I.width||E.y>I.height||0>E.x+E.width||0>E.y+E.height))&&(M.ke()?(E=M.transform,Jn(p.set(t),E),Jn(g.set(e),E)):(p.set(t),g.set(e)),E=M,(null!==(M=M instanceof $?M:null)?M.hg(p,g,n,s,l,u):E.Vw(p,g,l))&&(null!==n&&(E=n(E)),null===E||null!==s&&!s(E)||u.add(E)))}}A.free(p),A.free(g)}return l?w:c}return!1},_.add=function(t){for(var e=[],n=0;n<arguments.length;++n)e[n]=arguments[n];for(n=0;n<e.length;n++)this.Cb(this.R.count,e[n]);return this},_.K=function(t){return this.R.K(t)},_.Cb=function(t,e){e instanceof ut&&Y("Cannot add a Part to a Panel: "+e+"; use a Panel instead"),(this===e||this.jg(e))&&(this===e&&Y("Cannot make a Panel contain itself: "+this.toString()),Y("Cannot make a Panel indirectly contain itself: "+this.toString()+" already contains "+e.toString()));var n=e.panel;if(null!==n&&n!==this&&Y("Cannot add a GraphObject that already belongs to another Panel to this Panel: "+e.toString()+", already contained by "+n.toString()+", cannot be shared by this Panel: "+this.toString()),this.qa!==$.Grid||e instanceof Ct||Y("Can only add Shapes to a Grid Panel, not: "+e),this.qa!==$.Graduated||e instanceof Ct||e instanceof Kt||Y("Can only add Shapes or TextBlocks to a Graduated Panel, not: "+e),e.ni(this),e.jj=null,null!==this.itemArray){var s=e.data;null!==s&&"object"==typeof s&&(null===this.$d&&(this.$d=new xt),this.$d.add(s,e))}var l=this.R;if(s=-1,n===this){for(var u=-1,c=this.R.s,d=c.length,p=0;p<d;p++)if(c[p]===e){u=p;break}if(-1!==u){if(u===t||u+1>=l.count&&t>=l.count)return;l.mb(u),s=u}else Y("element "+e.toString()+" has panel "+n.toString()+" but is not contained by it.")}(0>t||t>l.count)&&(t=l.count),l.Cb(t,e),(0===t||e.isPanelMain)&&(this.Qg=null),da(this)||this.w(),e.w(!1),(null!==e.portId||e instanceof $&&!0===e.He)&&(this.He=!0),this.graduatedIntervals=null,this.yf()||Am(this,e,!1),null!==(n=this.part)&&(n.Kh=null,n.Sf=NaN,this.He&&n instanceof Z&&(n.He=!0),n.He&&n instanceof Z&&(n.sc=null),null!==(l=this.diagram)&&l.undoManager.isUndoingRedoing||(-1!==s&&n.bb(Me,"elements",this,e,null,s,null),n.bb(un,"elements",this,null,e,null,t)))},_.remove=function(t){for(var e=this.R.s,n=e.length,s=-1,l=0;l<n;l++)if(e[l]===t){s=l;break}-1!==s&&this.lc(s,!0)},_.mb=function(t){0<=t&&this.lc(t,!0)},_.lc=function(t,e){var n=this.R,s=n.K(t);if(s.jj=null,s.ni(null),null!==this.$d){var l=s.data;"object"==typeof l&&this.$d.remove(l)}n.mb(t),lr(this,!1),this.w(),this.Qg===s&&(this.Qg=null),this.graduatedIntervals=null;var u=this.part;null!==u&&(u.Kh=null,u.Sf=NaN,u.Rb(),u instanceof Z&&(s instanceof $?s.$l(s,function(c,d){ey(u,d,e)}):ey(u,s,e)),null!==(n=this.diagram)&&n.undoManager.isUndoingRedoing||u.bb(Me,"elements",this,s,null,t,null))},$.prototype.getRowDefinition=function(t){0>t&&pe(t,">= 0",$,"getRowDefinition:idx"),t=Math.round(t);var e=this.rowDefs;if(void 0===e[t]){var n=new cn;n.ni(this),n.isRow=!0,n.index=t,e[t]=n,this.bb(un,"rowdefs",this,null,n,null,t)}return e[t]},$.prototype.Vz=function(t){if(0>t&&pe(t,">= 0",$,"removeRowDefinition:idx"),0!==this.rowCount){t=Math.round(t);var e=this.rowDefs,n=e[t];if(n){e[t]=void 0;for(var s=e.length-1;0<=s&&void 0===e[s--];)e.length--;this.bb(Me,"rowdefs",this,n,null,t,null),this.w()}}},$.prototype.getColumnDefinition=function(t){0>t&&pe(t,">= 0",$,"getColumnDefinition:idx"),t=Math.round(t);var e=this.colDefs;if(void 0===e[t]){var n=new cn;n.ni(this),n.isRow=!1,n.index=t,e[t]=n,this.bb(un,"coldefs",this,null,n,null,t)}return e[t]},(_=$.prototype).Qz=function(t){if(0>t&&pe(t,">= 0",$,"removeColumnDefinition:idx"),0!==this.columnCount){t=Math.round(t);var e=this.colDefs,n=e[t];if(n){e[t]=void 0;for(var s=e.length-1;0<=s&&void 0===e[s--];)e.length--;this.bb(Me,"coldefs",this,n,null,t,null),this.w()}}},_.Wy=function(t){if(0>t||this.type!==$.Table||0===this.rowCount)return-1;for(var e=0,n=this.rowDefs,s=n.length,l=this.topIndex;l<s;l++){var u=n[l];if(void 0!==u&&t<(e+=u.total))break}return l},_.Oy=function(t){if(0>t||this.type!==$.Table||0===this.columnCount)return-1;for(var e=0,n=this.colDefs,s=n.length,l=this.leftIndex;l<s;l++){var u=n[l];if(void 0!==u&&t<(e+=u.total))break}return l},_.mz=function(t,e){if(void 0===e&&(e=new A(NaN,NaN)),this.type!==$.Graduated)return e.h(NaN,NaN),e;t=Math.min(Math.max(t,this.graduatedMin),this.graduatedMax);var n=this.vb();return n.geometry.Bu((t-this.graduatedMin)/this.graduatedRange,e),n.transform.Fa(e)},_.nz=function(t){if(this.type!==$.Graduated)return NaN;var e=this.vb();return e.transform.Ld(t),e.geometry.Zw(t)*this.graduatedRange+this.graduatedMin},_.By=function(t){void 0===t&&(t=!1);var e=this.copy();return UE(e,function(n){n instanceof $&&(n.allBindings=null,n.qb=null);var s=n.localBindings;null!==s&&(n.localBindings=null,s.each(function(l){n.bind(l.copy())})),null!==(s=n.animationTriggers)&&(n.animationTriggers=null,s.each(function(l){n.mv(l.value.copy())}))}),t&&Do(e),e},_.Ka=function(t){var e=this.allBindings;if(null!==e)for(void 0===t&&(t=""),e=e.iterator;e.next();){var n=e.value,s=n.sourceProperty;if((""===t||""===s||s===t)&&(s=n.targetProperty,null!==n.converter||""!==s)){s=this.data;var l=n.sourceName;if(null!==l){if(""===l)s=this;else if("/"===l)s=this;else if("."===l)s=this;else if(".."===l)s=this;else if(null===(s=this.fb(l)))continue}else if(n.isToModel){if(null===(s=this.diagram))continue;s=s.model.modelData}var u=this,c=n.ti;if(-1!==c){if(null===(u=this.Hr(c)))continue}else null!==n.sd&&(u=n.sd);if("/"===l?s=u.part:"."===l?s=u:".."===l&&(s=u.panel),0!==(l=n.Wn)){if(!(u instanceof $))continue;1===l?u=u.getColumnDefinition(n.ll):2===l&&(u=u.getRowDefinition(n.ll))}void 0!==u&&n.pv(u,s)}}},_.Uw=function(t){return null==t||null===this.$d?null:this.$d.I(t)},_.Vu=function(){for(var t=Kh(this);this.R.length>t;)this.lc(this.R.length-1,!1);sD(this,this.itemArray)},St.Object.defineProperties($.prototype,{type:{get:function(){return this.qa},set:function(t){var e=this.qa;e!==t&&(this.qa=t,this.isAtomic=this.qa===$.Grid,this.w(),this.g("type",e,t))}},elements:{get:function(){return this.R.iterator}},naturalBounds:{get:function(){return this.bc}},padding:{get:function(){return this.ub},set:function(t){"number"==typeof t?(0>t&&pe(t,">= 0",$,"padding"),t=new Ht(t)):(0>t.left&&pe(t.left,">= 0",$,"padding:value.left"),0>t.right&&pe(t.right,">= 0",$,"padding:value.right"),0>t.top&&pe(t.top,">= 0",$,"padding:value.top"),0>t.bottom&&pe(t.bottom,">= 0",$,"padding:value.bottom"));var e=this.ub;e.C(t)||(this.ub=t=t.J(),this.w(),this.g("padding",e,t))}},defaultAlignment:{get:function(){return this.Bm},set:function(t){var e=this.Bm;e.C(t)||(this.Bm=t=t.J(),this.w(),this.g("defaultAlignment",e,t))}},defaultStretch:{get:function(){return this.Kf},set:function(t){var e=this.Kf;e!==t&&(this.Kf=t,this.w(),this.g("defaultStretch",e,t))}},defaultSeparatorPadding:{get:function(){return null!==this.T?this.T.tp:Eh},set:function(t){"number"==typeof t&&(t=new Ht(t));var e=this.defaultSeparatorPadding;e.C(t)||(t=t.J(),null===this.T&&(this.T=new ur),this.T.tp=t,this.w(),this.g("defaultSeparatorPadding",e,t))}},defaultRowSeparatorStroke:{get:function(){return null!==this.T?this.T.ga:null},set:function(t){var e=this.defaultRowSeparatorStroke;e!==t&&(null===t||"string"==typeof t||t instanceof Rt)&&(t instanceof Rt&&t.freeze(),null===this.T&&(this.T=new ur),this.T.ga=t,this.N(),this.g("defaultRowSeparatorStroke",e,t))}},defaultRowSeparatorStrokeWidth:{get:function(){return null!==this.T?this.T.Ga:1},set:function(t){var e=this.defaultRowSeparatorStrokeWidth;e!==t&&isFinite(t)&&0<=t&&(null===this.T&&(this.T=new ur),this.T.Ga=t,this.w(),this.g("defaultRowSeparatorStrokeWidth",e,t))}},defaultRowSeparatorDashArray:{get:function(){return null!==this.T?this.T.W:null},set:function(t){var e=this.defaultRowSeparatorDashArray;if(e!==t){if(null!==t){for(var n=t.length,s=0,l=0;l<n;l++){var u=t[l];"number"==typeof u&&0<=u&&isFinite(u)||Y("defaultRowSeparatorDashArray value "+u+" at index "+l+" must be a positive number or zero."),s+=u}if(0===s){if(null===e)return;t=null}}null===this.T&&(this.T=new ur),this.T.W=t,this.N(),this.g("defaultRowSeparatorDashArray",e,t)}}},defaultColumnSeparatorStroke:{get:function(){return null!==this.T?this.T.u:null},set:function(t){var e=this.defaultColumnSeparatorStroke;e!==t&&(null===t||"string"==typeof t||t instanceof Rt)&&(t instanceof Rt&&t.freeze(),null===this.T&&(this.T=new ur),this.T.u=t,this.N(),this.g("defaultColumnSeparatorStroke",e,t))}},defaultColumnSeparatorStrokeWidth:{get:function(){return null!==this.T?this.T.F:1},set:function(t){var e=this.defaultColumnSeparatorStrokeWidth;e!==t&&isFinite(t)&&0<=t&&(null===this.T&&(this.T=new ur),this.T.F=t,this.w(),this.g("defaultColumnSeparatorStrokeWidth",e,t))}},defaultColumnSeparatorDashArray:{get:function(){return null!==this.T?this.T.m:null},set:function(t){var e=this.defaultColumnSeparatorDashArray;if(e!==t){if(null!==t){for(var n=t.length,s=0,l=0;l<n;l++){var u=t[l];"number"==typeof u&&0<=u&&isFinite(u)||Y("defaultColumnSeparatorDashArray value "+u+" at index "+l+" must be a positive number or zero."),s+=u}if(0===s){if(null===e)return;t=null}}null===this.T&&(this.T=new ur),this.T.m=t,this.N(),this.g("defaultColumnSeparatorDashArray",e,t)}}},inRowsCols:{get:function(){return null!==this.T?this.T.hb:null},set:function(t){null===this.T&&(this.T=new ur),this.T.hb=t}},viewboxStretch:{get:function(){return this.$n},set:function(t){var e=this.$n;e!==t&&(this.$n=t,this.w(),this.g("viewboxStretch",e,t))}},gridCellSize:{get:function(){return this.Qm},set:function(t){var e=this.Qm;if(!e.C(t)){t.v()&&0!==t.width&&0!==t.height||Y("Invalid Panel.gridCellSize: "+t),this.Qm=t.J();var n=this.diagram;null!==n&&this===n.grid&&Us(n),this.N(),this.g("gridCellSize",e,t)}}},gridOrigin:{get:function(){return this.Rm},set:function(t){var e=this.Rm;if(!e.C(t)){t.v()||Y("Invalid Panel.gridOrigin: "+t),this.Rm=t.J();var n=this.diagram;null!==n&&this===n.grid&&Us(n),this.N(),this.g("gridOrigin",e,t)}}},graduatedMin:{get:function(){return null!==this.oa?this.oa.Np:0},set:function(t){var e=this.graduatedMin;e!==t&&(null===this.oa&&(this.oa=new Ks),this.oa.Np=t,this.w(),this.g("graduatedMin",e,t),Bu(this)&&null!==(t=this.part)&&Vu(this,t,"graduatedRange"))}},graduatedMax:{get:function(){return null!==this.oa?this.oa.F:100},set:function(t){var e=this.graduatedMax;e!==t&&(null===this.oa&&(this.oa=new Ks),this.oa.F=t,this.w(),this.g("graduatedMax",e,t),Bu(this)&&null!==(t=this.part)&&Vu(this,t,"graduatedRange"))}},graduatedRange:{get:function(){return this.graduatedMax-this.graduatedMin}},graduatedTickUnit:{get:function(){return null!==this.oa?this.oa.ga:10},set:function(t){var e=this.graduatedTickUnit;e!==t&&0<t&&(null===this.oa&&(this.oa=new Ks),this.oa.ga=t,this.w(),this.g("graduatedTickUnit",e,t))}},graduatedTickBase:{get:function(){return null!==this.oa?this.oa.W:0},set:function(t){var e=this.graduatedTickBase;e!==t&&(null===this.oa&&(this.oa=new Ks),this.oa.W=t,this.w(),this.g("graduatedTickBase",e,t))}},graduatedMarks:{get:function(){return null!==this.oa?this.oa.u:null},set:function(t){null!==this.oa?this.oa.u=t:null!==t&&(this.oa=new Ks,this.oa.u=t)}},graduatedBounds:{get:function(){return null!==this.oa?this.oa.j:null},set:function(t){null!==this.oa?this.oa.j=t:null!==t&&(this.oa=new Ks,this.oa.j=t)}},graduatedIntervals:{get:function(){return null!==this.oa?this.oa.m:null},set:function(t){null!==this.oa?this.oa.m=t:null!==t&&(this.oa=new Ks,this.oa.m=t)}},temporaryTextBlock:{get:function(){return null!==this.oa?this.oa.Sh:null},set:function(t){null!==this.oa?this.oa.Sh=t:null!==t&&(this.oa=new Ks,this.oa.Sh=t)}},panelLayoutState:{get:function(){return this.F},set:function(t){this.F=t}},He:{get:function(){return 0!=(8388608&this.o)},set:function(t){0!=(8388608&this.o)!==t&&(this.o^=8388608)}},rowDefs:{get:function(){return null===this.T&&(this.T=new ur),this.T.Ic}},rowCount:{get:function(){return null===this.T?0:this.rowDefs.length}},colDefs:{get:function(){return null===this.T&&(this.T=new ur),this.T.Hc}},columnCount:{get:function(){return null===this.T?0:this.colDefs.length}},rowSizing:{get:function(){return null!==this.T?this.T.nb:bm},set:function(t){var e=this.rowSizing;e!==t&&(null===this.T&&(this.T=new ur),this.T.nb=t,this.w(),this.g("rowSizing",e,t))}},columnSizing:{get:function(){return null!==this.T?this.T.j:bm},set:function(t){var e=this.columnSizing;e!==t&&(null===this.T&&(this.T=new ur),this.T.j=t,this.w(),this.g("columnSizing",e,t))}},topIndex:{get:function(){return null!==this.T?this.T.Db:0},set:function(t){var e=this.topIndex;e!==t&&((!isFinite(t)||0>t)&&Y("Panel.topIndex must be greater than zero and a real number, not: "+t),null===this.T&&(this.T=new ur),this.T.Db=t,this.w(),this.g("topIndex",e,t))}},leftIndex:{get:function(){return null!==this.T?this.T.cb:0},set:function(t){var e=this.leftIndex;e!==t&&((!isFinite(t)||0>t)&&Y("Panel.leftIndex must be greater than zero and a real number, not: "+t),null===this.T&&(this.T=new ur),this.T.cb=t,this.w(),this.g("leftIndex",e,t))}},data:{get:function(){return this.qb},set:function(t){var e=this.qb;if(e!==t){var n=this instanceof ut&&!(this instanceof At);Do(this),this.qb=t;var s=this.diagram;null!==s&&(n?(n=s.partManager,this instanceof z?(null!==e&&n.Re.remove(e),null!==t&&n.Re.add(t,this)):this instanceof ut&&(null!==e&&n.Se.remove(e),null!==t&&n.Se.add(t,this))):null!==(n=this.panel)&&null!==n.$d&&(null!==e&&n.$d.remove(e),null!==t&&n.$d.add(t,this))),this.g("data",e,t),null!==s&&s.undoManager.isUndoingRedoing||null!==t&&this.Ka()}}},itemIndex:{get:function(){return this.fn},set:function(t){var e=this.fn;e!==t&&(this.fn=t,this.g("itemIndex",e,t))}},allBindings:{get:function(){return null!==this.A?this.A.hb:null},set:function(t){this.localBindings!==t&&(null===this.A&&(this.A=new Hl),this.A.hb=t)}},itemArray:{get:function(){return this.xh},set:function(t){var e=this.xh;if(e!==t||null!==t&&function HE(t,e){for(var n=(t=t.R.s).length,s=e.length,l=0,u=null;l<n&&!((u=t[l])instanceof $&&null!==u.data);)u=t[++l];if(n-l!==s)return!0;if(null===u)return 0<s;for(var c=0;l<n&&c<s;){if(!((u=t[l])instanceof $)||u.data!==e[c])return!0;l++,c++}return!1}(this,t)){var n=this.diagram;e!==t&&(null!==n&&null!==e&&Jf(n.partManager,this,n),this.xh=t,null!==n&&null!==t&&dw(n.partManager,this)),this.g("itemArray",e,t),null!==n&&n.undoManager.isUndoingRedoing||sD(this,t)}}},itemTemplate:{get:function(){return null===this.itemTemplateMap?null:this.itemTemplateMap.I("")},set:function(t){if(null===this.itemTemplateMap){if(null===t)return;this.itemTemplateMap=new xt}var e=this.itemTemplateMap.I("");e!==t&&((t instanceof ut||t.isPanelMain)&&Y("Panel.itemTemplate must not be a Part or be Panel.isPanelMain: "+t),this.itemTemplateMap.add("",t),this.g("itemTemplate",e,t),null!==(t=this.diagram)&&t.undoManager.isUndoingRedoing||this.Vu())}},itemTemplateMap:{get:function(){return null!==this.A?this.A.le:null},set:function(t){var e=this.itemTemplateMap;if(e!==t){for(var n=t.iterator;n.next(););hn(this),this.A.le=t,this.g("itemTemplateMap",e,t),null!==(t=this.diagram)&&t.undoManager.isUndoingRedoing||this.Vu()}}},itemCategoryProperty:{get:function(){return null!==this.A?this.A.Ic:"category"},set:function(t){var e=this.itemCategoryProperty;e!==t&&(hn(this),this.A.Ic=t,this.g("itemCategoryProperty",e,t))}},isAtomic:{get:function(){return 0!=(1048576&this.o)},set:function(t){var e=0!=(1048576&this.o);e!==t&&(this.o^=1048576,this.g("isAtomic",e,t))}},isClipping:{get:function(){return 0!=(2097152&this.o)},set:function(t){var e=0!=(2097152&this.o);e!==t&&(this.o^=2097152,this instanceof wt&&(this.ib=null),this.w(),this.g("isClipping",e,t))}},isOpposite:{get:function(){return 0!=(33554432&this.o)},set:function(t){var e=0!=(33554432&this.o);e!==t&&(this.o^=33554432,this.w(),this.g("isOpposite",e,t))}},isEnabled:{get:function(){return 0!=(4194304&this.o)},set:function(t){var e=0!=(4194304&this.o);if(e!==t){var n=null===this.panel||this.panel.yf();this.o^=4194304,this.g("isEnabled",e,t),null!==(e=this.diagram)&&e.undoManager.isUndoingRedoing||n&&Am(this,this,t)}}},alignmentFocusName:{get:function(){return this.Pe},set:function(t){var e=this.Pe;e!==t&&(this.Pe=t,this.w(),this.g("alignmentFocusName",e,t))}}}),St.Object.defineProperties($,{Position:{get:function(){return ao.I("Position")}},Horizontal:{get:function(){return ao.I("Horizontal")}},Vertical:{get:function(){return ao.I("Vertical")}},Spot:{get:function(){return ao.I("Spot")}},Auto:{get:function(){return ao.I("Auto")}},Table:{get:function(){return ao.I("Table")}},Viewbox:{get:function(){return ao.I("Viewbox")}},TableRow:{get:function(){return ao.I("TableRow")}},TableColumn:{get:function(){return ao.I("TableColumn")}},Link:{get:function(){return ao.I("Link")}},Grid:{get:function(){return ao.I("Grid")}},Graduated:{get:function(){return ao.I("Graduated")}}}),$.prototype.rebuildItemElements=$.prototype.Vu,$.prototype.findItemPanelForData=$.prototype.Uw,$.prototype.updateTargetBindings=$.prototype.Ka,$.prototype.copyTemplate=$.prototype.By,$.prototype.graduatedValueForPoint=$.prototype.nz,$.prototype.graduatedPointForValue=$.prototype.mz,$.prototype.findColumnForLocalX=$.prototype.Oy,$.prototype.findRowForLocalY=$.prototype.Wy,$.prototype.removeColumnDefinition=$.prototype.Qz,$.prototype.removeRowDefinition=$.prototype.Vz,$.prototype.removeAt=$.prototype.mb,$.prototype.remove=$.prototype.remove,$.prototype.insertAt=$.prototype.Cb,$.prototype.elt=$.prototype.K,$.prototype.add=$.prototype.add,$.prototype.findObject=$.prototype.fb,$.prototype.findInVisualTree=$.prototype.vl,$.prototype.walkVisualTreeFrom=$.prototype.$l,$.prototype.findMainElement=$.prototype.vb;var km=!1,O0=null,ao=new xt;function Ks(){this.Np=0,this.F=100,this.ga=10,this.W=0,this.Sh=this.m=this.j=this.u=null}function ur(){this.Ic=[],this.Hc=[],this.j=this.nb=bm,this.cb=this.Db=0,this.tp=Eh,this.Ga=1,this.W=this.ga=null,this.F=1,this.hb=this.m=this.u=null}function cn(){En(this),this.Uf=null,this.Wp=!0,this.Wa=0,this.Ac=NaN,this.ej=0,this.cj=1/0,this.Fb=Zn,this.pa=this.jc=this.ma=0,this.Vd=null,this.Rn=$u,this.$f=io,this.On=this.Wf=null,this.Pn=NaN,this.Yb=this.oj=null,this.xm=!1}function kf(t){if(t.sizing===$u){var e=t.Uf;return t.isRow?e.rowSizing:e.columnSizing}return t.sizing}$.className="Panel",$.definePanelLayout=Go,Go("Position",new va),Go("Vertical",new Pf),Go("Auto",new Ip),Go("Link",new Pm),Ks.prototype.copy=function(){var t=new Ks;return t.Np=this.Np,t.F=this.F,t.ga=this.ga,t.W=this.W,t.u=this.u,t.j=this.j,t.m=this.m,t.Sh=this.Sh,t},Ks.className="GradPanelSettings",ur.prototype.copy=function(t){for(var e=new ur,n=this.Ic,s=n.length,l=e.Ic,u=0;u<s;u++)if(void 0!==n[u]){var c=n[u].copy();c.ni(t),l[u]=c}for(s=(n=this.Hc).length,l=e.Hc,u=0;u<s;u++)void 0!==n[u]&&((c=n[u].copy()).ni(t),l[u]=c);return e.nb=this.nb,e.j=this.j,e.Db=this.Db,e.cb=this.cb,e.tp=this.tp.J(),e.Ga=this.Ga,e.ga=this.ga,e.W=this.W,e.F=this.F,e.u=this.u,e.m=this.m,e.hb=this.hb,e},ur.className="TablePanelSettings",cn.prototype.copy=function(){var t=new cn;return t.Wp=this.Wp,t.Wa=this.Wa,t.Ac=this.Ac,t.ej=this.ej,t.cj=this.cj,t.Fb=this.Fb,t.ma=this.ma,t.jc=this.jc,t.pa=this.pa,t.$f=this.$f,t.Rn=this.Rn,t.Wf=null===this.Wf?null:this.Wf.J(),t.On=this.On,t.Pn=this.Pn,t.oj=null,null!==this.oj&&(t.separatorDashArray=Gc(this.separatorDashArray)),t.Yb=this.Yb,t.xm=this.xm,t.Vd=this.Vd,t},(_=cn.prototype).ob=function(t){t.classType===cn&&(this.sizing=t)},_.toString=function(){return"RowColumnDefinition "+(this.isRow?"(Row ":"(Column ")+this.index+") #"+Cn(this)},_.ni=function(t){this.Uf=t},_.mo=function(t){var e=0,n=this.Uf;if(this.index!==t&&(null===(t=this.separatorStroke)&&null!==n&&(t=this.isRow?n.defaultRowSeparatorStroke:n.defaultColumnSeparatorStroke),null!==t&&(e=this.separatorStrokeWidth,isNaN(e)&&(e=null!==n?this.isRow?n.defaultRowSeparatorStrokeWidth:n.defaultColumnSeparatorStrokeWidth:0))),null===(t=this.Wf)){if(null===n)return e;t=n.defaultSeparatorPadding}return e+(this.isRow?t.top:t.left)},_.Qc=function(){var t=0,e=this.Uf,n=0,s=this.isRow;if(null!==e&&e.type===$.Table)for(var l=s?e.rowDefs.length:e.colDefs.length,u=0;u<l;u++){var c=s?e.rowDefs[u]:e.colDefs[u];if(void 0!==c&&0!==c.ma){n=c.index;break}}if(this.index!==n&&(null===(n=this.separatorStroke)&&null!==e&&(n=s?e.defaultRowSeparatorStroke:e.defaultColumnSeparatorStroke),null!==n&&(t=this.separatorStrokeWidth,isNaN(t)&&(t=null!==e?s?e.defaultRowSeparatorStrokeWidth:e.defaultColumnSeparatorStrokeWidth:0))),null===(s=this.Wf)){if(null===e)return t;s=e.defaultSeparatorPadding}return t+(this.isRow?s.top+s.bottom:s.left+s.right)},_.Kb=function(t,e,n){var s=this.Uf;if(null!==s&&(s.bb(re,t,this,e,n,void 0,void 0),null!==this.Vd&&null!==(e=s.diagram)&&!e.skipsModelSourceBindings&&null!==(s=s.Yg())&&null!==(e=s.data)))for(n=this.Vd.iterator;n.next();)n.value.Vo(this,e,t,s)},_.bind=function(t,e,n,s){var l=null;return(l="string"==typeof t?new xe(t,e,n,s):t).sd=this,null!==(t=this.panel)&&null!==(e=t.Yg())&&Im(e)&&Y("Cannot add a Binding to a RowColumnDefinition that is already frozen: "+l+" on "+t),null===this.Vd&&(this.Vd=new tt),this.Vd.add(l),this},St.Object.defineProperties(cn.prototype,{panel:{get:function(){return this.Uf}},isRow:{get:function(){return this.Wp},set:function(t){this.Wp=t}},index:{get:function(){return this.Wa},set:function(t){this.Wa=t}},height:{get:function(){return this.Ac},set:function(t){var e=this.Ac;e!==t&&(0>t&&pe(t,">= 0",cn,"height"),this.Ac=t,this.actual=this.ma,null!==this.panel&&this.panel.w(),this.Kb("height",e,t))}},width:{get:function(){return this.Ac},set:function(t){var e=this.Ac;e!==t&&(0>t&&pe(t,">= 0",cn,"width"),this.Ac=t,this.actual=this.ma,null!==this.panel&&this.panel.w(),this.Kb("width",e,t))}},minimum:{get:function(){return this.ej},set:function(t){var e=this.ej;e!==t&&((0>t||!isFinite(t))&&pe(t,">= 0",cn,"minimum"),this.ej=t,this.actual=this.ma,null!==this.panel&&this.panel.w(),this.Kb("minimum",e,t))}},maximum:{get:function(){return this.cj},set:function(t){var e=this.cj;e!==t&&(0>t&&pe(t,">= 0",cn,"maximum"),this.cj=t,this.actual=this.ma,null!==this.panel&&this.panel.w(),this.Kb("maximum",e,t))}},alignment:{get:function(){return this.Fb},set:function(t){var e=this.Fb;e.C(t)||(this.Fb=t.J(),null!==this.panel&&this.panel.w(),this.Kb("alignment",e,t))}},stretch:{get:function(){return this.$f},set:function(t){var e=this.$f;e!==t&&(this.$f=t,null!==this.panel&&this.panel.w(),this.Kb("stretch",e,t))}},separatorPadding:{get:function(){return this.Wf},set:function(t){"number"==typeof t&&(t=new Ht(t));var e=this.Wf;null!==t&&null!==e&&e.C(t)||(null!==t&&(t=t.J()),this.Wf=t,null!==this.panel&&this.panel.w(),this.Kb("separatorPadding",e,t))}},separatorStroke:{get:function(){return this.On},set:function(t){var e=this.On;e!==t&&(null!==t&&Gu(t,"RowColumnDefinition.separatorStroke"),t instanceof Rt&&t.freeze(),this.On=t,null!==this.panel&&this.panel.w(),this.Kb("separatorStroke",e,t))}},separatorStrokeWidth:{get:function(){return this.Pn},set:function(t){var e=this.Pn;e!==t&&(this.Pn=t,null!==this.panel&&this.panel.w(),this.Kb("separatorStrokeWidth",e,t))}},separatorDashArray:{get:function(){return this.oj},set:function(t){var e=this.oj;if(e!==t){if(null!==t){for(var n=t.length,s=0,l=0;l<n;l++){var u=t[l];"number"==typeof u&&0<=u&&isFinite(u)||Y("separatorDashArray value "+u+" at index "+l+" must be a positive number or zero."),s+=u}if(0===s){if(null===e)return;t=null}}this.oj=t,null!==this.panel&&this.panel.N(),this.Kb("separatorDashArray",e,t)}}},background:{get:function(){return this.Yb},set:function(t){var e=this.Yb;e!==t&&(null!==t&&Gu(t,"RowColumnDefinition.background"),t instanceof Rt&&t.freeze(),this.Yb=t,null!==this.panel&&this.panel.N(),this.Kb("background",e,t))}},coversSeparators:{get:function(){return this.xm},set:function(t){var e=this.xm;e!==t&&(this.xm=t,null!==this.panel&&this.panel.N(),this.Kb("coversSeparators",e,t))}},sizing:{get:function(){return this.Rn},set:function(t){var e=this.Rn;e!==t&&(this.Rn=t,null!==this.panel&&this.panel.w(),this.Kb("sizing",e,t))}},actual:{get:function(){return this.ma},set:function(t){this.ma=isNaN(this.Ac)?Math.max(Math.min(this.cj,t),this.ej):Math.max(Math.min(this.cj,this.Ac),this.ej)}},measured:{get:function(){return this.jc},set:function(t){this.jc=t}},total:{get:function(){return this.ma+this.Qc()}},position:{get:function(){return this.pa},set:function(t){this.pa=t}}}),cn.prototype.computeEffectiveSpacing=cn.prototype.Qc,cn.prototype.computeEffectiveSpacingTop=cn.prototype.mo;var $u=new K(cn,"Default",0),Op=new K(cn,"None",1),bm=new K(cn,"ProportionalExtra",2);function Ct(t,e){lt.call(this),this.Hd=this.sa=null,this.Jm="None",this.Nc=this.Ak="black",this.ag=1,this.Na=this.Og=null,this.Dn=this.Cn=NaN,this.fa=null,"string"==typeof t?this.figure=t:t&&Object.assign(this,t),e&&Object.assign(this,e)}function $l(t){null===t.Na?t.Na=new F0:t.Na.ic&&(t.Na=t.Na.copy())}function bf(t,e,n,s){var l=n.length;if(!(4>l)){var u=s.measuredBounds,c=Math.max(1,u.width);u=u.height;for(var g,y,w,C,D,M,d=n[0],p=n[1],E=0,I=ce(),P=2;P<l;P+=2)0==(w=(g=n[P])-d)&&(w=.001),C=(d=(y=n[P+1])-p)/w,D=Math.atan2(d,w),M=Math.sqrt(w*w+d*d),I.push([w,D,C,M]),E+=M,d=g,p=y;d=n[0],p=n[1],w=s.measuredBounds.width,s instanceof Ct&&(w-=s.strokeWidth),1>w&&(w=1),l=n=w,y=0!=(g=c/2),w=(M=I[P=0])[0],D=M[1],C=M[2],M=M[3];for(var k=0;.1<=E;){if(0===k&&(y?(l=n,l-=g,E-=g,y=!1):l=n,0===l&&(l=1)),l>E)return void It(I);l>M?(k=l-M,l=M):k=0;var b=Math.sqrt(l*l/(1+C*C));if(0>w&&(b=-b),t.translate(d+=b,p+=C*b),t.rotate(D),t.translate(-c/2,-u/2),0===k&&s.ai(t,e),t.translate(c/2,u/2),t.rotate(-D),t.translate(-d,-p),E-=l,M-=l,0!==k){if(++P===I.length)return void It(I);w=(M=I[P])[0],D=M[1],C=M[2],M=M[3],l=k}}It(I)}}function L0(t){var e=t.geometryStretch;return null!==t.Hd?e===io?Ge:e:e===io?Fm[t.figure].defaultStretch:e}function Om(t,e,n,s,l){return(e=(t=n.x-t)*t+(e=n.y-e)*e)<s?(l.x=n.x,l.y=n.y,e):s}function Lm(t,e,n,s,l,u,c,d,p){var g=!1,y=(l-c)*(e-s)-(u-d)*(t-n);return 0!==y&&(p.x=((l*d-u*c)*(t-n)-(l-c)*(t*s-e*n))/y,p.y=((l*d-u*c)*(e-s)-(u-d)*(t*s-e*n))/y,(t>n?t-n:n-t)<(e>s?e-s:s-e)?(t=e<s?e:s,e=e<s?s:e,(p.y>t||R.ca(p.y,t))&&(p.y<e||R.ca(p.y,e))&&(g=!0)):(e=t<n?t:n,t=t<n?n:t,(p.x>e||R.ca(p.x,e))&&(p.x<t||R.ca(p.x,t))&&(g=!0)),g)}function Za(t,e,n,s){if(!t.Or(e,n,s))return!1;t=e.x,e=e.y;var l=n.x,u=n.y;return n=s.x,s=s.y,t===l?(e<u?(t=e,e=u):t=u,s>=t&&s<=e):(t<l?(s=t,t=l):s=l,n>=s&&n<=t)}function G1(t){var e=t.diagram;null!==e&&e.undoManager.isUndoingRedoing||(t.segmentOrientation=Kp,"None"!==t.toArrow?(t.segmentIndex=-1,t.alignmentFocus=Ci):"None"!==t.fromArrow&&(t.segmentIndex=0,t.alignmentFocus=new ot(1-Ci.x,Ci.y)))}function $1(t){var e=Ys[t];if(void 0===e){var n=t.toLowerCase();if("none"===n)return"None";if(void 0===(e=Ys[n])){var l,s=null;for(l in R.dm)if(l.toLowerCase()===n){s=l;break}if(null!==s)return t=X.parse(R.dm[s],!1),Ys[s]=t,n!==s&&(Ys[n]=s),s}}return"string"==typeof e?e:e instanceof X?t:null}cn.className="RowColumnDefinition",cn.Default=$u,cn.None=Op,cn.ProportionalExtra=bm,zt(Ct,lt),Ct.prototype.cloneProtected=function(t){lt.prototype.cloneProtected.call(this,t),t.sa=this.sa,t.Hd=this.Hd,t.Jm=this.Jm,t.Ak=this.Ak,t.Nc=this.Nc,t.ag=this.ag,null!==this.Og&&(t.Og=Gc(this.Og)),null!==this.Na&&(t.Na=this.Na.ic?this.Na:this.Na.copy()),t.Cn=this.Cn,t.Dn=this.Dn,null!==this.fa&&(t.fa=this.fa.copy())},(_=Ct.prototype).ih=function(){lt.prototype.ih.call(this),null!==this.Na&&(this.Na.ic=!0)},_.ob=function(t){t===Ve||t===Gs||t===xf||t===io?this.geometryStretch=t:lt.prototype.ob.call(this,t)},_.toString=function(){return"Shape("+("None"!==this.figure?this.figure:"None"!==this.toArrow?this.toArrow:this.fromArrow)+")#"+Cn(this)},_.ai=function(t,e){var n=this.Nc,s=this.Ak;if(null!==n||null!==s){var l=this.sa;if(null!==l){t.Pc();var u=this.actualBounds,c=this.naturalBounds;null!==s&&Si(this,t,s,!0,!1,c,u);var d=this.part,p=this.ag;if(null===n||0!==p||null===d||!this.isPanelMain&&d.vb()!==this||(p=d.type===$.Link&&d instanceof At&&"Selection"===d.category&&d.adornedObject instanceof Ct&&d.adornedPart.vb()===d.adornedObject?d.adornedObject.strokeWidth:0),0===p&&(n=null),null!==n&&0!==p&&(Si(this,t,n,!1,!1,c,u),t.lineWidth=p,t.lineJoin=this.strokeJoin,t.lineCap=this.strokeCap,t.miterLimit=this.strokeMiterLimit),u=!1,d&&e.Ge("drawShadows")&&(u=d.isShadowed),d=!0,null===n||null!==s&&"transparent"!==s||(d=!1),c=!1,null!==(p=this.strokeDashArray)&&(c=!0,t.Gr(p,this.strokeDashOffset)),l.type===X.j)t.beginPath(),t.moveTo(l.startX,l.startY),t.lineTo(l.endX,l.endY),null!==n&&t.si();else if(l.type===X.u){var g=l.startX;p=l.startY;var y=l.endX,w=l.endY;l=Math.min(g,y);var C=Math.min(p,w);g=Math.abs(y-g),p=Math.abs(w-p),t.beginPath(),t.rect(l,C,g,p),null!==s&&t.sf(s),null!==n&&(d&&u&&ga(t),(0===g||0===p)&&(t.beginPath(),t.rect(l,C,Math.max(g,.1),Math.max(p,.1))),t.si(),d&&u&&Ws(t))}else if(l.type===X.F)g=l.startX,p=l.startY,y=l.endX,w=l.endY,l=Math.abs(y-g)/2,C=Math.abs(w-p)/2,g=Math.min(g,y)+l,p=Math.min(p,w)+C,t.beginPath(),t.moveTo(g,p-C),t.bezierCurveTo(g+R.ng*l,p-C,g+l,p-R.ng*C,g+l,p),t.bezierCurveTo(g+l,p+R.ng*C,g+R.ng*l,p+C,g,p+C),t.bezierCurveTo(g-R.ng*l,p+C,g-l,p+R.ng*C,g-l,p),t.bezierCurveTo(g-l,p-R.ng*C,g-R.ng*l,p-C,g,p-C),t.closePath(),null!==s&&t.sf(s),null!==n&&(d&&u?(ga(t),t.si(),Ws(t)):t.si());else if(l.type===X.m)for(p=(l=l.figures).length,C=0;C<p;C++){g=l.s[C],t.beginPath(),t.moveTo(g.startX,g.startY),w=(y=g.segments.s).length;for(var D=null,M=0;M<w;M++){var E=y[M];switch(E.type){case Vo:t.moveTo(E.endX,E.endY);break;case _e:t.lineTo(E.endX,E.endY);break;case to:t.bezierCurveTo(E.point1X,E.point1Y,E.point2X,E.point2Y,E.endX,E.endY);break;case js:t.quadraticCurveTo(E.point1X,E.point1Y,E.endX,E.endY);break;case ln:if(E.radiusX===E.radiusY){var I=Math.PI/180;t.arc(E.point1X,E.point1Y,E.radiusX,E.startAngle*I,(E.startAngle+E.sweepAngle)*I,0>E.sweepAngle,null!==D?D.endX:g.startX,null!==D?D.endY:g.startY)}else if(0===(I=(D=Ha(E,g)).length))t.lineTo(E.centerX,E.centerY);else for(var P=0;P<I;P++){var k=D[P];0===P&&t.lineTo(k[0],k[1]),t.bezierCurveTo(k[2],k[3],k[4],k[5],k[6],k[7])}break;case Co:if(P=I=0,null!==D&&D.type===ln){if(0===(k=(D=Ha(D,g)).length)){t.lineTo(E.endX,E.endY);break}null!==(D=D[k-1]||null)&&(I=D[6],P=D[7])}else I=null!==D?D.endX:g.startX,P=null!==D?D.endY:g.startY;if(0===(I=(D=Ih(E,g,I,P)).length)){t.lineTo(E.endX,E.endY);break}for(P=0;P<I;P++)t.bezierCurveTo((k=D[P])[2],k[3],k[4],k[5],k[6],k[7]);break;default:Y("Segment not of valid type: "+E.type)}E.isClosed&&t.closePath(),D=E}y=g.isFilled,u?g.isShadowed?(!0===y&&"transparent"!==s&&null!==s&&t.sf(s),null!==n&&(y&&d&&ga(t),t.si(),y&&d&&Ws(t))):(ga(t),y&&"transparent"!==s&&null!==s&&t.sf(s),null!==n&&t.si(),Ws(t)):(y&&null!==s&&t.sf(s),null!==n&&t.si())}if(c&&t.Er(),null!==this.pathPattern){if((n=this.pathPattern).measure(1/0,1/0),n.arrange(0,0,(s=n.measuredBounds).width,s.height),u=this.geometry,t.save(),t.beginPath(),s=ce(),u.type===X.j)s.push(u.startX),s.push(u.startY),s.push(u.endX),s.push(u.endY),bf(t,e,s,n);else if(u.type===X.m)for(u=u.figures.iterator;u.next();){for(d=u.value,s.length=0,s.push(d.startX),s.push(d.startY),p=c=d.startX,C=l=d.startY,y=(g=d.segments.s).length,w=0;w<y;w++){switch((M=g[w]).type){case Vo:bf(t,e,s,n),s.length=0,s.push(M.endX),s.push(M.endY),p=c=M.endX,C=l=M.endY;break;case _e:s.push(M.endX),s.push(M.endY),c=M.endX,l=M.endY;break;case to:R.De(c,l,M.point1X,M.point1Y,M.point2X,M.point2Y,M.endX,M.endY,.5,s),c=M.endX,l=M.endY;break;case js:R.Go(c,l,M.point1X,M.point1Y,M.endX,M.endY,.5,s),c=M.endX,l=M.endY;break;case ln:if(0===(D=(E=Ha(M,d)).length)){s.push(M.centerX),s.push(M.centerY),c=M.centerX,l=M.centerY;break}for(I=0;I<D;I++)R.De(c,l,(P=E[I])[2],P[3],P[4],P[5],P[6],P[7],.5,s),c=P[6],l=P[7];break;case Co:if(0===(D=(E=Ih(M,d,c,l)).length)){s.push(M.endX),s.push(M.endY),c=M.endX,l=M.endY;break}for(I=0;I<D;I++)R.De(c,l,(P=E[I])[2],P[3],P[4],P[5],P[6],P[7],.5,s),c=P[6],l=P[7];break;default:Y("Segment not of valid type: "+M.type)}M.isClosed&&(s.push(p),s.push(C),bf(t,e,s,n))}bf(t,e,s,n)}else if(u.type===X.u)s.push(u.startX),s.push(u.startY),s.push(u.endX),s.push(u.startY),s.push(u.endX),s.push(u.endY),s.push(u.startX),s.push(u.endY),s.push(u.startX),s.push(u.startY),bf(t,e,s,n);else if(u.type===X.F){if((l=new Fn).startX=u.endX,l.startY=(u.startY+u.endY)/2,(c=new Ft(ln)).startAngle=0,c.sweepAngle=360,c.centerX=(u.startX+u.endX)/2,c.centerY=(u.startY+u.endY)/2,c.radiusX=Math.abs(u.startX-u.endX)/2,c.radiusY=Math.abs(u.startY-u.endY)/2,l.add(c),0===(d=(u=Ha(c,l)).length))s.push(c.centerX),s.push(c.centerY);else for(c=l.startX,l=l.startY,p=0;p<d;p++)R.De(c,l,(C=u[p])[2],C[3],C[4],C[5],C[6],C[7],.5,s),c=C[6],l=C[7];bf(t,e,s,n)}It(s),t.restore(),t.Oc(!1)}}}},_.ia=function(t,e){if(void 0===e&&(e=new A),t instanceof ot){t.Fc()&&Y("getDocumentPoint Spot must be a real, specific Spot, not: "+t.toString());var n=this.naturalBounds,s=this.strokeWidth;e.h(t.x*(n.width+s)-s/2+n.x+t.offsetX,t.y*(n.height+s)-s/2+n.y+t.offsetY)}else e.set(t);return this.ge.Fa(e),e},_.gi=function(t){void 0===t&&(t=new U);var e=this.naturalBounds,n=this.ge;e=U.allocAt(e.x,e.y,e.width,e.height);var s=this.strokeWidth;return e.vc(s/2,s/2),s=A.allocAt(e.x,e.y).transform(n),t.h(s.x,s.y,0,0),s.h(e.right,e.y).transform(n),Ke(t,s.x,s.y,0,0),s.h(e.right,e.bottom).transform(n),Ke(t,s.x,s.y,0,0),s.h(e.x,e.bottom).transform(n),Ke(t,s.x,s.y,0,0),U.free(e),A.free(s),t},_.Xg=function(t,e){var n=this.geometry;if(null===n||null===this.fill&&null===this.stroke)return!1;var s=n.bounds,l=this.strokeWidth/2;n.type!==X.j||e||(l+=2);var u=U.alloc();if(u.assign(s),u.vc(l+2,l+2),!u.ba(t))return U.free(u),!1;if(s=l+1e-4,n.type===X.j)return!(null===this.stroke||(s=(n.endX-n.startX)*(t.x-n.startX)+(n.endY-n.startY)*(t.y-n.startY),0>(n.startX-n.endX)*(t.x-n.endX)+(n.startY-n.endY)*(t.y-n.endY)||0>s))&&(U.free(u),R.Tb(n.startX,n.startY,n.endX,n.endY,l,t.x,t.y));if(n.type===X.u){e=n.startX;var c=n.startY,d=n.endX;if(n=n.endY,u.x=Math.min(e,d),u.y=Math.min(c,n),u.width=Math.abs(d-e),u.height=Math.abs(n-c),null===this.fill){if(u.vc(-s,-s),u.ba(t))return U.free(u),!1;u.vc(s,s)}return null!==this.stroke&&u.vc(l,l),t=u.ba(t),U.free(u),t}if(n.type===X.F){c=n.startX,l=n.startY,d=n.endX;var p=n.endY;if(n=Math.min(c,d),e=Math.min(l,p),c=Math.abs(d-c)/2,l=Math.abs(p-l)/2,n=t.x-(n+c),e=t.y-(e+l),null===this.fill){if(l-=s,0>=(c-=s)||0>=l||1>=n*n/(c*c)+e*e/(l*l))return U.free(u),!1;c+=s,l+=s}return null!==this.stroke&&(c+=s,l+=s),U.free(u),!(0>=c||0>=l)&&1>=n*n/(c*c)+e*e/(l*l)}if(n.type===X.m)return U.free(u),null===this.fill?HS(n,t.x,t.y,l):o1(n,t,l,1<this.strokeWidth,e);Y("Unknown Geometry type: "+n.type)},_.El=function(t,e,n,s){var l=this.desiredSize,u=this.ag;if(t=Math.max(t,0),e=Math.max(e,0),null!==this.Hd)var c=this.geometry.bounds;else{var d=this.figure,p=Fm[d];if(void 0===p){var g=R.Oe[d];"string"==typeof g&&(g=R.Oe[g]),"function"==typeof g?(p=g(null,100,100),Fm[d]=p):Y("Unsupported Figure: "+d)}c=p.bounds}d=c.width,p=c.height,g=c.width;var y=c.height;switch(vs(this,!0)){case Ve:s=n=0;break;case Ge:g=Math.max(t-u,0),y=Math.max(e-u,0);break;case In:g=Math.max(t-u,0),s=0;break;case Wn:n=0,y=Math.max(e-u,0)}isFinite(l.width)&&(g=l.width),isFinite(l.height)&&(y=l.height),c=this.maxSize;var w=this.minSize;switch(n=Math.max(n-u,w.width),s=Math.max(s-u,w.height),g=Math.min(c.width,g),y=Math.min(c.height,y),g=isFinite(g)?Math.max(n,g):Math.max(d,n),y=isFinite(y)?Math.max(s,y):Math.max(p,s),n=L0(this)){case Ve:break;case Ge:d=g,p=y;break;case Gs:n=Math.min(g/d,y/p),isFinite(n)||(n=1),d*=n,p*=n;break;default:Y(n+" is not a valid geometryStretch.")}null!==this.Hd?(0===d&&(d=.001),0===p&&(p=.001),s=d/(c=(n=null!==this.Hd?this.Hd:this.sa).bounds).width,c=p/c.height,isFinite(s)||(s=1),isFinite(c)||(c=1),this.sa=1===s&&1===c?n:n.copy().scale(s,c)):null!==this.sa&&R.ca(this.sa.Hk,t-u)&&R.ca(this.sa.Gk,e-u)||(this.sa=Ct.makeGeometry(this,d,p)),c=this.sa.bounds,t===1/0||e===1/0?this.ve(c.x-u/2,c.y-u/2,0===t&&0===d?0:c.width+u,0===e&&0===p?0:c.height+u):this.ve(-u/2,-u/2,g+u,y+u),l.v()?this.bc.h(0,0,l.width,l.height):this.bc.assign(c)},_.Vg=function(t,e,n,s){v0(this,t,e,n,s)},_.Or=function(t,e,n){return this.Kj(t.x,t.y,e.x,e.y,n)},_.Kj=function(t,e,n,s,l){var u=this.transform,c=1/(u.m11*u.m22-u.m12*u.m21),d=u.m22*c,p=-u.m12*c,g=-u.m21*c,y=u.m11*c,w=c*(u.m21*u.dy-u.m22*u.dx),C=c*(u.m12*u.dx-u.m11*u.dy);u=t*d+e*g+w,c=t*p+e*y+C,d=n*d+s*g+w,p=n*p+s*y+C,w=this.ag/2,null===(g=this.sa)&&(this.measure(1/0,1/0),g=this.sa);var D=g.bounds;if(y=!1,g.type===X.j)if(1.5>=this.strokeWidth)y=R.Je(g.startX,g.startY,g.endX,g.endY,u,c,d,p,l);else{if(g.startX===g.endX?(s=w,y=0):(e=(g.endY-g.startY)/(g.endX-g.startX),s=(y=w/Math.sqrt(1+e*e))*e),e=ce(),t=new A,R.Je(g.startX+s,g.startY+y,g.endX+s,g.endY+y,u,c,d,p,t)&&e.push(t),t=new A,R.Je(g.startX-s,g.startY-y,g.endX-s,g.endY-y,u,c,d,p,t)&&e.push(t),t=new A,R.Je(g.startX+s,g.startY+y,g.startX-s,g.startY-y,u,c,d,p,t)&&e.push(t),t=new A,R.Je(g.endX+s,g.endY+y,g.endX-s,g.endY-y,u,c,d,p,t)&&e.push(t),0===(d=e.length))return It(e),!1;for(y=!0,p=1/0,s=0;s<d;s++)(n=((t=e[s]).x-u)*(t.x-u)+(t.y-c)*(t.y-c))<p&&(p=n,l.x=t.x,l.y=t.y);It(e)}else if(g.type===X.u)y=R.wf(D.x-w,D.y-w,D.x+D.width+w,D.y+D.height+w,u,c,d,p,l);else if(g.type===X.F){t:if(0===(e=U.allocAt(D.x,D.y,D.width,D.height).vc(w,w)).width)y=R.Je(e.x,e.y,e.x,e.y+e.height,u,c,d,p,l);else if(0===e.height)y=R.Je(e.x,e.y,e.x+e.width,e.y,u,c,d,p,l);else{if(s=e.x+(t=e.width/2),y=e.y+(g=e.height/2),n=9999,u!==d&&(n=(c-p)/(u-d)),9999>Math.abs(n)){if(0>t*t*n*n+g*g-(p=c-y-n*(u-s))*p){l.x=NaN,l.y=NaN,y=!1;break t}d=(-t*t*n*p+t*g*(w=Math.sqrt(t*t*n*n+g*g-p*p)))/(g*g+t*t*n*n)+s,t=(-t*t*n*p-t*g*w)/(g*g+t*t*n*n)+s,g=n*(d-s)+p+y,p=n*(t-s)+p+y,Math.abs((u-d)*(u-d))+Math.abs((c-g)*(c-g))<Math.abs((u-t)*(u-t))+Math.abs((c-p)*(c-p))?(l.x=d,l.y=g):(l.x=t,l.y=p)}else{if(d=g*g,0>(d-=d/(t*t)*(p=u-s)*p)){l.x=NaN,l.y=NaN,y=!1;break t}d=y+(p=Math.sqrt(d)),p=y-p,Math.abs(d-c)<Math.abs(p-c)?(l.x=u,l.y=d):(l.x=u,l.y=p)}y=!0}U.free(e)}else if(g.type===X.m){C=A.alloc();var M=d-u,E=p-c,I=M*M+E*E,P=u,k=c;if(0<I&&D.contains(P,k)&&(C.x=P,C.y=k,this.ba(C)))for(0!==M&&.5>Math.abs(M)?(E*=.5/M,M=.5):0!==E&&.5>Math.abs(E)&&(M*=.5/E,E=.5),P-=M,k-=E;D.contains(P,k);)P-=M,k-=E;for(l.x=d,l.y=p,E=0;E<g.figures.count;E++)for(var b=g.figures.s[E],O=b.isFilled?P:u,L=b.isFilled?k:c,H=b.segments,J=D=b.startX,nt=M=b.startY,et=0;et<H.count;et++){var q=H.s[et],G=q.type,Mt=q.endX,pt=q.endY,bt=!1;switch(G){case Vo:J=Mt,nt=pt;break;case _e:bt=Lm(D,M,Mt,pt,O,L,d,p,C);break;case to:bt=R.io(D,M,q.point1X,q.point1Y,q.point2X,q.point2Y,Mt,pt,O,L,d,p,.6,C);break;case js:bt=R.io(D,M,D+2/3*(q.point1X-D),M+2/3*(q.point1Y-M),Mt+2/3*(q.point1X-Mt),pt+2/3*(q.point1Y-pt),Mt,pt,O,L,d,p,.6,C);break;case ln:case Co:var ue=(G=q.type===ln?Ha(q,b):Ih(q,b,D,M)).length;if(0===ue){bt=Lm(D,M,q.type===ln?q.centerX:q.endX,q.type===ln?q.centerY:q.endY,O,L,d,p,C);break}for(pt=null,Mt=0;Mt<ue;Mt++){if(pt=G[Mt],0===Mt&&Lm(D,M,pt[0],pt[1],O,L,d,p,C)){var Ce=Om(O,L,C,I,l);Ce<I&&(I=Ce,y=!0)}R.io(pt[0],pt[1],pt[2],pt[3],pt[4],pt[5],pt[6],pt[7],O,L,d,p,.6,C)&&(Ce=Om(O,L,C,I,l))<I&&(I=Ce,y=!0)}Mt=pt[6],pt=pt[7];break;default:Y("Unknown Segment type: "+G)}D=Mt,M=pt,bt&&(bt=Om(O,L,C,I,l))<I&&(I=bt,y=!0),q.isClosed&&Lm(D,M,Mt=J,pt=nt,O,L,d,p,C)&&(q=Om(O,L,C,I,l))<I&&(I=q,y=!0)}u=n-t,c=s-e,0!==(d=Math.sqrt(u*u+c*c))&&(u/=d,c/=d),l.x-=u*w,l.y-=c*w,A.free(C)}else Y("Unknown Geometry type: "+g.type);return!!y&&(this.transform.Fa(l),!0)},_.Wg=function(t,e){if(void 0===e)return t.Ee(this.actualBounds);var n=this.sa;null===n&&(this.measure(1/0,1/0),n=this.sa),n=n.bounds;var s=this.strokeWidth/2,l=!1,u=A.alloc();return u.h(n.x-s,n.y-s),t.ba(e.Fa(u))&&(u.h(n.x-s,n.bottom+s),t.ba(e.Fa(u))&&(u.h(n.right+s,n.bottom+s),t.ba(e.Fa(u))&&(u.h(n.right+s,n.y-s),t.ba(e.Fa(u))&&(l=!0)))),A.free(u),l},_.Sc=function(t,e){if(this.Wg(t,e)||void 0===e&&(e=this.transform,t.Ee(this.actualBounds)))return!0;var n=Dt.alloc();n.set(e),n.Tr();var s=t.left,l=t.right,u=t.top;t=t.bottom;var c=A.alloc();if(c.h(s,u),n.Fa(c),this.Xg(c,!0)||(c.h(l,u),n.Fa(c),this.Xg(c,!0))||(c.h(s,t),n.Fa(c),this.Xg(c,!0))||(c.h(l,t),n.Fa(c),this.Xg(c,!0)))return A.free(c),!0;var d=A.alloc(),p=A.alloc();return n.set(e),n.Ou(this.transform),n.Tr(),d.x=l,d.y=u,d.transform(n),c.x=s,c.y=u,c.transform(n),e=!1,Za(this,c,d,p)?e=!0:(c.x=l,c.y=t,c.transform(n),Za(this,c,d,p)?e=!0:(d.x=s,d.y=t,d.transform(n),Za(this,c,d,p)?e=!0:(c.x=s,c.y=u,c.transform(n),Za(this,c,d,p)&&(e=!0)))),A.free(c),Dt.free(n),A.free(d),A.free(p),e},_.Vw=function(t,e,n){function s(I,P){for(var k=I.length,b=0;b<k;b+=2)if(P.td(I[b],I[b+1])>l)return!0;return!1}if(n&&null!==this.fill&&this.Xg(t,!0))return!0;var l=t.rf(e),u=l;if(1.5<this.strokeWidth&&(l=this.strokeWidth/2+Math.sqrt(l),l*=l),null===(e=this.sa)&&(this.measure(1/0,1/0),null===(e=this.sa)))return!1;if(!n){var c=e.bounds,d=c.x,p=c.y,g=c.x+c.width;if(c=c.y+c.height,Os(t.x,t.y,d,p)<=l&&Os(t.x,t.y,g,p)<=l&&Os(t.x,t.y,d,c)<=l&&Os(t.x,t.y,g,c)<=l)return!0}if(d=e.startX,p=e.startY,g=e.endX,c=e.endY,e.type===X.j){if(n=(d-g)*(t.x-g)+(p-c)*(t.y-c),ni(t.x,t.y,d,p,g,c)<=(0<=(g-d)*(t.x-d)+(c-p)*(t.y-p)&&0<=n?l:u))return!0}else{if(e.type===X.u)return e=!1,n&&(e=ni(t.x,t.y,d,p,d,c)<=l||ni(t.x,t.y,d,p,g,p)<=l||ni(t.x,t.y,g,p,g,c)<=l||ni(t.x,t.y,d,c,g,c)<=l),e;if(e.type===X.F){e=t.x-(d+g)/2,u=t.y-(p+c)/2;var y=Math.abs(g-d)/2,w=Math.abs(c-p)/2;if(0===y||0===w)return ni(t.x,t.y,d,p,g,c)<=l;if(!n)return!(Os(e,u,-y,0)>=l||Os(e,u,0,-w)>=l||Os(e,u,0,w)>=l||Os(e,u,y,0)>=l);if((t=R.Hy(y,w,e,u))*t<=l)return!0}else if(e.type===X.m){if(u=(g=e.bounds).x,d=g.y,p=g.x+g.width,g=g.y+g.height,t.x>p&&t.x<u&&t.y>g&&t.y<d&&ni(t.x,t.y,u,d,u,g)>l&&ni(t.x,t.y,u,d,p,d)>l&&ni(t.x,t.y,p,g,u,g)>l&&ni(t.x,t.y,p,g,p,d)>l)return!1;if(u=Math.sqrt(l),!n){for(n=e.figures,e=0;e<n.count;e++){if(t.td(c=(u=n.s[e]).startX,y=u.startY)>l)return!1;for(p=(d=u.segments.s).length,g=0;g<p;g++)switch(w=d[g],w.type){case Vo:case _e:if(t.td(c=w.endX,y=w.endY)>l)return!1;break;case to:var C=ce();if(R.De(c,y,w.point1X,w.point1Y,w.point2X,w.point2Y,w.endX,w.endY,.8,C),c=s(C,t),It(C),c||t.td(c=w.endX,y=w.endY)>l)return!1;break;case js:if(C=ce(),R.Go(c,y,w.point1X,w.point1Y,w.endX,w.endY,.8,C),c=s(C,t),It(C),c||t.td(c=w.endX,y=w.endY)>l)return!1;break;case ln:case Co:var D=(C=w.type===ln?Ha(w,u):Ih(w,u,c,y)).length;if(0===D){if(t.td(c=w.type===ln?w.centerX:w.endX,y=w.type===ln?w.centerY:w.endY)>l)return!1;break}w=null;for(var M=ce(),E=0;E<D;E++)if(w=C[E],M.length=0,R.De(w[0],w[1],w[2],w[3],w[4],w[5],w[6],w[7],.8,M),s(M,t))return It(M),!1;It(M),null!==w&&(c=w[6],y=w[7]);break;default:Y("Unknown Segment type: "+w.type)}}return!0}if(null===this.fill?HS(e,t.x,t.y,u):o1(e,t,u,!0,!1))return!0}}return!1},_.mc=function(){this.sa=null},_.Sv=function(){return this.ag},Ct.makeGeometry=function(t,e,n){if("None"!==t.toArrow)var s=Ys[t.toArrow];else"None"!==t.fromArrow?s=Ys[t.fromArrow]:("string"==typeof(s=R.Oe[t.figure])&&(s=R.Oe[s]),void 0===s&&Y("Unknown Shape.figure: "+t.figure),(s=s(t,e,n)).Hk=e,s.Gk=n);if(null===s){var l=R.Oe.Rectangle;"function"==typeof l&&(s=l(t,e,n))}return s},St.Object.defineProperties(Ct.prototype,{geometry:{get:function(){return null!==this.sa?this.sa:this.Hd},set:function(t){var e=this.sa,n=this.Hd;if(e!==t){this.Hd=this.sa=null!==t?t.freeze():null;var s=this.part;null!==s&&(s.Sf=NaN),this.w(),this.g("geometry",e||n,t),Bu(this)&&null!==(t=this.part)&&Vu(this,t,"geometryString")}}},geometryString:{get:function(){return null===this.geometry?"":this.geometry.toString()},set:function(t){var e=(t=X.parse(t)).normalize();this.geometry=t,this.position=t=A.allocAt(-e.x,-e.y),A.free(t)}},isGeometryPositioned:{get:function(){return 0!=(1048576&this.o)},set:function(t){var e=0!=(1048576&this.o);e!==t&&(this.o^=1048576,this.w(),this.g("isGeometryPositioned",e,t))}},fill:{get:function(){return this.Ak},set:function(t){var e=this.Ak;e!==t&&(null!==t&&Gu(t,"Shape.fill"),t instanceof Rt&&t.freeze(),this.Ak=t,this.N(),this.g("fill",e,t))}},stroke:{get:function(){return this.Nc},set:function(t){var e=this.Nc;e!==t&&(null!==t&&Gu(t,"Shape.stroke"),t instanceof Rt&&t.freeze(),this.Nc=t,this.N(),this.g("stroke",e,t))}},strokeWidth:{get:function(){return this.ag},set:function(t){var e=this.ag;if(e!==t)if(0<=t){this.ag=t,this.w();var n=this.part;null!==n&&(n.Sf=NaN),this.g("strokeWidth",e,t)}else pe(t,"value >= 0",Ct,"strokeWidth:value")}},strokeCap:{get:function(){return null!==this.Na?this.Na.dr:"butt"},set:function(t){var e=this.strokeCap;e!==t&&("string"!=typeof t||"butt"!==t&&"round"!==t&&"square"!==t?pe(t,'"butt", "round", or "square"',Ct,"strokeCap"):($l(this),this.Na.dr=t,this.N(),this.g("strokeCap",e,t)))}},strokeJoin:{get:function(){return null!==this.Na?this.Na.er:"miter"},set:function(t){var e=this.strokeJoin;e!==t&&("string"!=typeof t||"miter"!==t&&"bevel"!==t&&"round"!==t?pe(t,'"miter", "bevel", or "round"',Ct,"strokeJoin"):($l(this),this.Na.er=t,this.N(),this.g("strokeJoin",e,t)))}},strokeMiterLimit:{get:function(){return null!==this.Na?this.Na.fr:10},set:function(t){var e=this.strokeMiterLimit;if(e!==t&&1<=t){$l(this),this.Na.fr=t,this.N();var n=this.part;null!==n&&(n.Sf=NaN),this.g("strokeMiterLimit",e,t)}}},strokeDashArray:{get:function(){return this.Og},set:function(t){var e=this.Og;if(e!==t){if(null!==t){for(var n=t.length,s=0,l=0;l<n;l++){var u=t[l];0<=u&&isFinite(u)||Y("strokeDashArray:value "+u+" at index "+l+" must be a positive number or zero."),s+=u}if(0===s){if(null===e)return;t=null}}this.Og=t,this.N(),this.g("strokeDashArray",e,t)}}},strokeDashOffset:{get:function(){return null!==this.Na?this.Na.pj:0},set:function(t){var e=this.strokeDashOffset;e!==t&&0<=t&&($l(this),this.Na.pj=t,this.N(),this.g("strokeDashOffset",e,t))}},figure:{get:function(){return this.Jm},set:function(t){var e=this.Jm;if(e!==t){var n=R.Oe[t];"function"==typeof n?n=t:(n=R.Oe[t.toLowerCase()])||Y("Unknown Shape.figure: "+t),e!==n&&(null!==(t=this.part)&&(t.Sf=NaN),this.Jm=n,this.Hd=null,this.mc(),this.w(),this.g("figure",e,n))}}},toArrow:{get:function(){return null!==this.Ra?this.Ra.W:"None"},set:function(t){var e=this.toArrow;if(!0===t?t="Standard":!1===t&&(t=""),e!==t){var n=$1(t);null===n?Y("Unknown Shape.toArrow: "+t):e!==n&&(null===this.Ra&&(this.Ra=new Hu),this.Ra.W=n,this.Hd=null,this.mc(),this.w(),G1(this),this.g("toArrow",e,n))}}},fromArrow:{get:function(){return null!==this.Ra?this.Ra.j:"None"},set:function(t){var e=this.fromArrow;if(!0===t?t="Standard":!1===t&&(t=""),e!==t){var n=$1(t);null===n?Y("Unknown Shape.fromArrow: "+t):e!==n&&(null===this.Ra&&(this.Ra=new Hu),this.Ra.j=n,this.Hd=null,this.mc(),this.w(),G1(this),this.g("fromArrow",e,n))}}},spot1:{get:function(){return null!==this.Na?this.Na.Yf:Zn},set:function(t){var e=this.spot1;e.C(t)||(t=t.J(),$l(this),this.Na.Yf=t,this.w(),this.g("spot1",e,t))}},spot2:{get:function(){return null!==this.Na?this.Na.Zf:Zn},set:function(t){var e=this.spot2;e.C(t)||(t=t.J(),$l(this),this.Na.Zf=t,this.w(),this.g("spot2",e,t))}},parameter1:{get:function(){return this.Cn},set:function(t){var e=this.Cn;e!==t&&(this.Cn=t,this.mc(),this.w(),this.g("parameter1",e,t))}},parameter2:{get:function(){return this.Dn},set:function(t){var e=this.Dn;e!==t&&(this.Dn=t,this.mc(),this.w(),this.g("parameter2",e,t))}},naturalBounds:{get:function(){return this.bc}},pathPattern:{get:function(){return null!==this.Na?this.Na.Aq:null},set:function(t){var e=this.pathPattern;e!==t&&($l(this),this.Na.Aq=t,this.N(),this.g("pathPattern",e,t))}},geometryStretch:{get:function(){return null!==this.Na?this.Na.Mp:io},set:function(t){var e=this.geometryStretch;e!==t&&($l(this),this.Na.Mp=t,this.w(),this.g("geometryStretch",e,t))}},interval:{get:function(){return null!==this.fa?this.fa.Ik:1},set:function(t){var e=this.interval;if(e!==(t=Math.round(t))&&0!==t&&isFinite(t)){null===this.fa&&(this.fa=new $o),this.fa.Ik=t;var n=this.diagram;null!==n&&this.panel===n.grid&&Us(n),this.w(),null!==(n=this.panel)&&(n.graduatedIntervals=null),this.g("interval",e,t)}}},graduatedStart:{get:function(){return null!==this.fa?this.fa.u:0},set:function(t){var e=this.graduatedStart;e!==t&&(0>t?t=0:1<t&&(t=1),null===this.fa&&(this.fa=new $o),this.fa.u=t,this.w(),this.g("graduatedStart",e,t))}},graduatedEnd:{get:function(){return null!==this.fa?this.fa.j:1},set:function(t){var e=this.graduatedEnd;e!==t&&(0>t?t=0:1<t&&(t=1),null===this.fa&&(this.fa=new $o),this.fa.j=t,this.w(),this.g("graduatedEnd",e,t))}},graduatedSkip:{get:function(){return null!==this.fa?this.fa.m:null},set:function(t){var e=this.graduatedSkip;e!==t&&(null===this.fa&&(this.fa=new $o),this.fa.m=t,this.w(),this.g("graduatedSkip",e,t))}}}),Ct.prototype.intersectsRect=Ct.prototype.Sc,Ct.prototype.containedInRect=Ct.prototype.Wg,Ct.prototype.getNearestIntersectionPoint=Ct.prototype.Or,Ct.prototype.getDocumentBounds=Ct.prototype.gi,Ct.prototype.getDocumentPoint=Ct.prototype.ia;var Ys=new Zr,Fm=new Zr;function F0(){this.ic=!1,this.dr="butt",this.er="miter",this.fr=10,this.pj=0,this.Aq=null,this.Mp=io,this.Zf=this.Yf=Zn}function Kt(t,e){return lt.call(this),jr||(Zi=Je?new ro(null).context:null,jr=!0),this.o|=2097152,this.cc="",this.Nc="black",this.re="13px sans-serif",this.kq=this.yb=this.dd=0,this.da=this.fa=this.om=this.rt=this.st=null,this.zh=0,this.Te=null,this.Ae=0,this.qe=this.Wb=this.Jc=null,"string"==typeof t?this.text=t:t&&Object.assign(this,t),e&&Object.assign(this,e),this}function jn(t){null===t.da?t.da=new Vp:t.da.ic&&(t.da=t.da.copy())}function Rm(t,e){t.o=6144|e.o,t.tb=e.opacity,t.Yb=e.background,t.areaBackground=e.areaBackground,t.$c=e.desiredSize.J(),t.minSize=e.minSize.J(),t.maxSize=e.maxSize.J(),t.Ib=null!==e.Ib?e.Ib.copy():null,t.xa=e.scale,t.Gb=e.angle,t.stretch=e.stretch,t.Ag=e.margin.J(),t.Fb=e.alignment.J(),t.fk=e.alignmentFocus.J(),t.segmentFraction=e.segmentFraction,t.segmentOffset=e.segmentOffset.J(),t.segmentOrientation=e.segmentOrientation,null!==e.ib&&(t.ib=e.ib.copy()),t.shadowVisible=e.shadowVisible,t.cc=e.cc,t.Nc=e.Nc,t.re=e.re,null!==t.fa&&(t.fa=e.fa.copy()),null!==e.da&&(t.da=e.da.ic?e.da:e.da.copy()),t.zh=e.zh}function Of(t,e,n){null===t.qe?(t.qe=e,t.yb=n):((null===t.Wb||null===t.Jc)&&(t.Wb=[],t.Jc=[],t.Wb.push(t.qe),t.Jc.push(t.yb)),t.Wb.push(e),t.Jc.push(n))}function Lp(t,e,n,s){var l=t.formatting===jp;l&&(e=e.trim());var u=0,c=t.re,d=t.spacingAbove+t.spacingBelow;d=Math.max(0,Lf(t)+d);var p=t.overflow===Rp?W1(c):0;if(t.dd>=t.maxLines)null!==s&&s.h(0,d);else if(c=e,t.wrap===Vm){t.Ae=1;var g=hr(e);if(0===p||g<=n)t.yb=Math.max(t.yb,g),Of(t,e,t.yb),null!==s&&s.h(g,d);else{for(g=hr((u=Oi(t,c))+(e=Oi(t,c=c.substr(u.length))));0<e.length&&g<=n;)g=(u+=e)+(e=Oi(t,c=c.substr(e.length))),l&&(g=g.trim()),g=hr(g);for(l&&(e=e.trim()),u+=e,n=Math.max(1,n-p);hr(u)>n&&1<u.length;)u=u.substr(0,u.length-1);var y=hr(u+=Hm);t.yb=y,Of(t,u,y),null!==s&&s.h(y,d)}}else{for(p=0,0===c.length&&(p=1,Of(t,c,0));0<c.length;){for(e=Oi(t,c),c=c.substr(e.length);hr(e)>n;){var w=1;for(g=hr(e.substr(0,w)),y=0;g<=n;)w++,y=g,g=hr(e.substr(0,w));if(1===w){var C=g;u=Math.max(u,g)}else C=y,u=Math.max(u,y);if(1>--w&&(w=1),Of(t,e.substr(0,w),C),p++,e=e.substr(w),t.dd+p>t.maxLines)break}for(g=hr(e+(y=Oi(t,c)));0<y.length&&g<=n;)g=(e+=y)+(y=Oi(t,c=c.substr(y.length))),l&&(g=g.trim()),g=hr(g);if(l&&(e=e.trim()),""!==e&&("\xad"===e[e.length-1]&&(e=e.substring(0,e.length-1)+"\u2010"),0===y.length?(w=g,u=Math.max(u,g)):(w=y=hr(e),u=Math.max(u,y)),Of(t,e,w),p++,t.dd+p>t.maxLines))break}t.Ae=Math.min(t.maxLines,p),t.yb=Math.max(t.yb,u),null!==s&&s.h(t.yb,d*t.Ae)}}function Oi(t,e){if(t.wrap===X1)return e.substr(0,1);for(var n=e.length,s=0,l=Ff;s<n&&!l.test(e.charAt(s));)s++;for(t.formatting===J1&&(n=Math.min(n,s+1));s<n&&l.test(e.charAt(s));)s++;return s>=e.length?e:e.substr(0,s)}function hr(t){return null===Zi?8*t.length:Zi.measureText(t).width}function Lf(t){if(null!==t.Te)return t.Te;var e=t.re;if(null===Zi){var n=16;return t.Te=n}return void 0!==wa[e]&&5e3>Z1?n=wa[e]:(n=1.3*Zi.measureText("M").width,wa[e]=n,Z1++),t.Te=n}function W1(t){if(null===Zi)return 6;if(void 0!==Um[t]&&5e3>Q1)var e=Um[t];else e=Zi.measureText(Hm).width,Um[t]=e,Q1++;return e}function K1(t,e){var n=t.cc.replace(/\r\n/g,"\n").replace(/\r/g,"\n"),s=t.spacingAbove+t.spacingBelow;if(s=Math.max(0,Lf(t)+s),0===n.length)return t.yb=0,t.dd=1,s;if(!t.isMultiline){var l=n.indexOf("\n",0);0<=l&&(n=n.substr(0,l))}l=0;for(var c,u=t.dd=0,d=!1;!d;){if(-1===(c=n.indexOf("\n",u))&&(c=n.length,d=!0),u<=c){if(u=n.substr(u,c-u),t.wrap!==Vm){t.Ae=0;var p=gt.alloc();Lp(t,u,e,p),l+=p.height,gt.free(p),t.dd+=t.Ae}else Lp(t,u,e,null),l+=s,t.dd++;t.dd===t.maxLines&&(d=!0)}u=c+1}return t.kq=l}Ct.className="Shape",Ct.getFigureGenerators=function(){var e,t=new xt;for(e in R.Oe)e!==e.toLowerCase()&&t.add(e,R.Oe[e]);return t.freeze(),t},Ct.defineFigureGenerator=function(t,e){var n=t.toLowerCase(),s=R.Oe;s[t]=e,s[n]=t},Ct.getArrowheadGeometries=function(){var t=new xt;for(s in R.dm)if(void 0===Ys[s]){var e=X.parse(R.dm[s],!1);Ys[s]=e,(e=s.toLowerCase())!==s&&(Ys[e]=s)}for(var n in Ys)if(n!==n.toLowerCase()){var s=Ys[n];s instanceof X&&t.add(n,s)}return t.freeze(),t},Ct.defineArrowheadGeometry=function(t,e){var n;n="string"==typeof e?X.parse(e,!1):e,"none"!==(e=t.toLowerCase())&&t!==e||Y("Shape.defineArrowheadGeometry name must not be empty or None or all-lower-case: "+t);var s=Ys;s[t]=n,s[e]=t},F0.prototype.copy=function(){var t=new F0;return t.dr=this.dr,t.er=this.er,t.fr=this.fr,t.pj=this.pj,t.Aq=this.Aq,t.Mp=this.Mp,t.Yf=this.Yf.J(),t.Zf=this.Zf.J(),t},zt(Kt,lt),Kt.prototype.cloneProtected=function(t){lt.prototype.cloneProtected.call(this,t),t.cc=this.cc,t.Nc=this.Nc,t.re=this.re,t.dd=this.dd,t.yb=this.yb,t.kq=this.kq,t.st=this.st,t.rt=this.rt,t.om=this.om,null!==this.fa&&(t.fa=this.fa.copy()),null!==this.da&&(t.da=this.da.ic?this.da:this.da.copy()),t.zh=this.zh,t.Te=this.Te,t.Ae=this.Ae,t.Jc=this.Jc,t.Wb=this.Wb,t.qe=this.qe},(_=Kt.prototype).ih=function(){lt.prototype.ih.call(this),null!==this.da&&(this.da.ic=!0)},_.ob=function(t){t.classType===Kt?this.wrap=t:lt.prototype.ob.call(this,t)},_.toString=function(){return 22<this.cc.length?'TextBlock("'+this.cc.substring(0,20)+'"...)':'TextBlock("'+this.cc+'")'},_.w=function(){lt.prototype.w.call(this),this.rt=this.st=null},_.ai=function(t,e){if(null!==this.Nc&&0!==this.cc.length&&null!==this.re){var n=this.naturalBounds,s=this.actualBounds,l=n.width,u=n.height,c=Lf(this),d=t.textAlign=this.textAlign,p=e.$m;"start"===d?d=p?"right":"left":"end"===d&&(d=p?"left":"right"),p=this.isUnderline;var g=this.isStrikethrough;Si(this,t,this.Nc,!0,!1,n,s),(p||g)&&Si(this,t,this.Nc,!1,!1,n,s),s=0,n=!1;var y=this.ge,w=y.dx-(c*y.m21+y.dx),C=e.scale;switch(8>(w*w+(y=y.dy-(c*y.m22+y.dy))*y)*C*C&&(n=!0),e.Zb!==t&&(n=!1),!1===e.Ge("textGreeking")&&(n=!1),e=this.spacingAbove,w=this.spacingBelow,this.flip){case Mf:t.translate(l,0),t.scale(-1,1);break;case Cf:t.translate(0,u),t.scale(1,-1);break;case Mp:t.translate(l,u),t.scale(-1,-1)}if(t.Pc(),u>(C=(e+c+w)*(y=this.dd))&&(s=(s=this.verticalAlignment).y*u-s.y*C+s.offsetY),1===y&&null!==this.qe)(w=this.yb)>l&&(w=l),this.$h(this.qe,t,0,s+e,l,c,w,n,d,p,g);else if(null!==this.Jc&&null!==this.Wb)for(C=0;C<y;C++){var D=this.Jc[C];D>l&&(D=l),this.$h(this.Wb[C],t,0,s+=e,l,c,D,n,d,p,g),s+=c+w}switch(this.flip){case Mf:t.scale(-1,1),t.translate(-l,0);break;case Cf:t.scale(1,-1),t.translate(0,-u);break;case Mp:t.scale(-1,-1),t.translate(-l,-u)}}},_.$h=function(t,e,n,s,l,u,c,d,p,g,y){var w=0;d?("left"===p?w=0:"right"===p?w=l-c:"center"===p&&(w=(l-c)/2),e.fillRect(n+w,s+.25*u,c,1)):("left"===p?w=0:"right"===p?w=l:"center"===p&&(w=l/2),l=null!==Fp?Fp(this,u):.75*u,e.fillText(t,n+w,s+l),0==(t=u/20|0)&&(t=1),"right"===p?w-=c:"center"===p&&(w-=c/2),g&&(p=null!==jm?jm(this,u):.8*u,e.beginPath(),e.lineWidth=t,e.moveTo(n+w,s+p),e.lineTo(n+w+c,s+p),e.stroke()),y&&(e.beginPath(),e.lineWidth=t,s=s+u-u/2.2|0,t%2!=0&&(s+=.5),e.moveTo(n+w,s),e.lineTo(n+w+c,s),e.stroke()))},_.El=function(t,e,n,s){this.zh=t;var u,l=this.re;if(null!==Zi&&j0!==l&&(j0=Zi.font=l),this.yb=this.Ae=0,this.qe=this.Wb=this.Jc=this.Te=null,isNaN(this.desiredSize.width)){if(0===(l=this.cc.replace(/\r\n/g,"\n").replace(/\r/g,"\n")).length)l=0;else if(this.isMultiline){for(var c=u=0,d=!1;!d;){var p=l.indexOf("\n",c);-1===p&&(p=l.length,d=!0),c=l.substr(c,p-c),this.formatting===jp&&(c=c.trim()),u=Math.max(u,hr(c)),c=p+1}l=u}else 0<=(u=l.indexOf("\n",0))&&(l=l.substr(0,u)),l=hr(l);l=Math.min(l,t/this.scale),l=Math.max(8,l)}else l=this.desiredSize.width;if(null!==this.panel&&(l=Math.min(l,this.panel.maxSize.width)),u=K1(this,l),d=u=isNaN(this.desiredSize.height)?Math.min(u,e/this.scale):this.desiredSize.height,0!==this.yb&&null!==this.Jc&&null!==this.Wb&&this.overflow===Rp&&(e=this.re,e=this.overflow===Rp?W1(e):0,p=this.spacingAbove+this.spacingBelow,p=Math.max(0,Lf(this)+p),!((d=Math.min(this.maxLines-1,Math.max(Math.floor(d/p+.01)-1,0)))+1>=this.Wb.length))){for(p=this.Wb[d],e=Math.max(1,t-e);hr(p)>e&&1<p.length;)p=p.substr(0,p.length-1);e=hr(p+=Hm),this.Wb[d]=p,this.Wb=this.Wb.slice(0,d+1),this.Jc[d]=e,this.Jc=this.Jc.slice(0,d+1),this.Ae=this.Wb.length,this.yb=Math.max(this.yb,e),this.dd=this.Ae,1===this.dd&&(this.qe=this.Wb[0])}(this.wrap===Y1||isNaN(this.desiredSize.width))&&(l=isNaN(t)?this.yb:Math.min(t,this.yb),isNaN(this.desiredSize.width)&&(l=Math.max(8,l))),l=Math.max(n,l),u=Math.max(s,u),Ba(this.bc,l,u),this.ve(0,0,l,u)},_.Vg=function(t,e,n,s){v0(this,t,e,n,s)},St.Object.defineProperties(Kt.prototype,{font:{get:function(){return this.re},set:function(t){var e=this.re;e!==t&&(this.re=t,this.Te=null,this.w(),this.g("font",e,t))}},text:{get:function(){return this.cc},set:function(t){var e=this.cc;e!==(t=null!=t?t.toString():"")&&(this.cc=t,this.w(),this.g("text",e,t))}},textAlign:{get:function(){return null!==this.da?this.da.mr:"start"},set:function(t){var e=this.textAlign;e===t||"start"!==t&&"end"!==t&&"left"!==t&&"right"!==t&&"center"!==t||(jn(this),this.da.mr=t,this.N(),this.g("textAlign",e,t))}},flip:{get:function(){return null!==this.da?this.da.Nf:Ve},set:function(t){var e=this.flip;e!==t&&(jn(this),this.da.Nf=t,this.N(),this.g("flip",e,t))}},verticalAlignment:{get:function(){return null!==this.da?this.da.xr:Zg},set:function(t){var e=this.verticalAlignment;e.C(t)||(t=t.J(),jn(this),this.da.xr=t,Sp(this),this.g("verticalAlignment",e,t))}},naturalBounds:{get:function(){if(!this.bc.v()){var t=gt.alloc();Lp(this,this.cc,999999,t);var e=t.width;gt.free(t),t=K1(this,e);var n=this.desiredSize;isNaN(n.width)||(e=n.width),isNaN(n.height)||(t=n.height),Ba(this.bc,e,t)}return this.bc}},isMultiline:{get:function(){return 0!=(2097152&this.o)},set:function(t){var e=0!=(2097152&this.o);e!==t&&(this.o^=2097152,this.w(),this.g("isMultiline",e,t))}},isUnderline:{get:function(){return 0!=(4194304&this.o)},set:function(t){var e=0!=(4194304&this.o);e!==t&&(this.o^=4194304,this.N(),this.g("isUnderline",e,t))}},isStrikethrough:{get:function(){return 0!=(8388608&this.o)},set:function(t){var e=0!=(8388608&this.o);e!==t&&(this.o^=8388608,this.N(),this.g("isStrikethrough",e,t))}},wrap:{get:function(){return null!==this.da?this.da.Ar:Bm},set:function(t){var e=this.wrap;e!==t&&(jn(this),this.da.Ar=t,this.w(),this.g("wrap",e,t))}},overflow:{get:function(){return null!==this.da?this.da.yq:R0},set:function(t){var e=this.overflow;e!==t&&(jn(this),this.da.yq=t,this.w(),this.g("overflow",e,t))}},stroke:{get:function(){return this.Nc},set:function(t){var e=this.Nc;e!==t&&(null!==t&&Gu(t,"TextBlock.stroke"),t instanceof Rt&&t.freeze(),this.Nc=t,this.N(),this.g("stroke",e,t))}},lineCount:{get:function(){return this.dd}},lineHeight:{get:function(){return Lf(this)}},editable:{get:function(){return 0!=(1048576&this.o)},set:function(t){var e=0!=(1048576&this.o);e!==t&&(this.o^=1048576,this.g("editable",e,t))}},textEditor:{get:function(){return null!==this.da?this.da.pr:null},set:function(t){var e=this.textEditor;e!==t&&(jn(this),this.da.pr=t,this.g("textEditor",e,t))}},errorFunction:{get:function(){return null!==this.da?this.da.zd:null},set:function(t){var e=this.errorFunction;e!==t&&(jn(this),this.da.zd=t,this.g("errorFunction",e,t))}},interval:{get:function(){return null!==this.fa?this.fa.Ik:1},set:function(t){var e=this.interval;if(e!==(t=Math.round(t))&&0!==t&&isFinite(t)){null===this.fa&&(this.fa=new $o),this.fa.Ik=t,this.w();var n=this.panel;null!==n&&(n.graduatedIntervals=null),this.g("interval",e,t)}}},graduatedStart:{get:function(){return null!==this.fa?this.fa.u:0},set:function(t){var e=this.graduatedStart;e!==t&&(0>t?t=0:1<t&&(t=1),null===this.fa&&(this.fa=new $o),this.fa.u=t,this.w(),this.g("graduatedStart",e,t))}},graduatedEnd:{get:function(){return null!==this.fa?this.fa.j:1},set:function(t){var e=this.graduatedEnd;e!==t&&(0>t?t=0:1<t&&(t=1),null===this.fa&&(this.fa=new $o),this.fa.j=t,this.w(),this.g("graduatedEnd",e,t))}},graduatedFunction:{get:function(){return null!==this.fa?this.fa.F:null},set:function(t){var e=this.graduatedFunction;e!==t&&(null===this.fa&&(this.fa=new $o),this.fa.F=t,this.w(),this.g("graduatedFunction",e,t))}},graduatedSkip:{get:function(){return null!==this.fa?this.fa.m:null},set:function(t){var e=this.graduatedSkip;e!==t&&(null===this.fa&&(this.fa=new $o),this.fa.m=t,this.w(),this.g("graduatedSkip",e,t))}},textValidation:{get:function(){return null!==this.da?this.da.qj:null},set:function(t){var e=this.textValidation;e!==t&&(jn(this),this.da.qj=t,this.g("textValidation",e,t))}},textEdited:{get:function(){return null!==this.da?this.da.nr:null},set:function(t){var e=this.textEdited;e!==t&&(jn(this),this.da.nr=t,this.g("textEdited",e,t))}},spacingAbove:{get:function(){return null!==this.da?this.da.$q:0},set:function(t){var e=this.spacingAbove;e!==t&&(jn(this),this.da.$q=t,this.w(),this.g("spacingAbove",e,t))}},spacingBelow:{get:function(){return null!==this.da?this.da.ar:0},set:function(t){var e=this.spacingBelow;e!==t&&(jn(this),this.da.ar=t,this.w(),this.g("spacingBelow",e,t))}},formatting:{get:function(){return null!==this.da?this.da.Jp:jp},set:function(t){var e=this.formatting;e!==t&&(jn(this),this.da.Jp=t,this.w(),this.g("formatting",e,t))}},maxLines:{get:function(){return null!==this.da?this.da.iq:1/0},set:function(t){var e=this.maxLines;e!==t&&(0>=(t=Math.floor(t))&&pe(t,"> 0",Kt,"maxLines"),jn(this),this.da.iq=t,this.w(),this.g("maxLines",e,t))}},metrics:{get:function(){return{arrSize:null!==this.Jc?this.Jc:[this.yb],arrText:null!==this.Wb?this.Wb:[this.qe],maxLineWidth:this.yb,fontHeight:this.Te}}},choices:{get:function(){return this.om},set:function(t){var e=this.om;e!==t&&(this.om=t,this.g("choices",e,t))}}});var Yh,Fp=null,jm=null,Vm=new K(Kt,"None",0),Y1=new K(Kt,"WrapFit",1),Bm=new K(Kt,"WrapDesiredSize",2),X1=new K(Kt,"WrapBreakAll",3),R0=new K(Kt,"OverflowClip",0),Rp=new K(Kt,"OverflowEllipsis",1),jp=new K(Kt,"FormatTrim",0),J1=new K(Kt,"FormatNone",0),Ff=/[ \u200b\u00ad]/,wa=new Zr,Z1=0,Um=new Zr,Q1=0,Hm="...",j0="",Zi=null,jr=!1;function Vp(){this.ic=!1,this.zd=null,this.Nf=Ve,this.Jp=jp,this.iq=1/0,this.yq=R0,this.ar=this.$q=0,this.mr="start",this.qj=this.pr=this.nr=null,this.xr=Zg,this.Ar=Bm}function $o(){this.Ik=1,this.u=0,this.j=1,this.m=this.F=null}function Qi(t,e){lt.call(this),this.vg=null,this.Tn="",this.Ng=qx,this.Ck=Ge,this.Pg=this.zd=null,this.Bk=ht,this.Nf=Ve,this.kl=null,this.Xm=!1,this.Mm=!0,this.Qk=!1,this.gl=null,"string"==typeof t?this.source=t:t&&Object.assign(this,t),e&&Object.assign(this,e)}function Rf(t){void 0===t&&(t=""),""!==t?Yh[t]&&(delete Yh[t],zm--):(Yh=new Zr,zm=0)}function jf(t,e){e.Wx||(e.fq=function(n){e.Up=!0,e.Sm=!1;var s=e.sg.copy();if(null!=s){for(s=s.iterator;s.next();){var l=s.value,u=e.getAttribute("src")||"",c=l.Fg.I(u);if(null!==c)for(var d=c.length,p=0;p<d;p++)l.Fn.add(u=c[p]),l.Mb(),e.Pm&&(void 0===e.Kt&&(e.Kt=n),null!==u.Pg&&u.Pg(u,n))}e.sg.clear()}t.desiredSize.v()||(lr(t,!1),t.w())},e.Bp=function(n){e.Sm=n;var s=e.sg.copy();if(null!=s){for(s=s.iterator;s.next();){var l=s.value,u=e.getAttribute("src")||"",c=l.Fg.I(u);if(null!==c){l=c.length,u=ce();for(var d=0;d<l;d++)u.push(c[d]);if(e.Pm)for(d=0;d<l;d++)null!==(c=u[d]).zd&&c.zd(c,n);It(u)}}e.sg.clear()}},e.addEventListener("load",e.fq),e.addEventListener("error",e.Bp),e.Wx=!0)}Kt.className="TextBlock",Vp.prototype.copy=function(){var t=new Vp;return t.zd=this.zd,t.Nf=this.Nf,t.Jp=this.Jp,t.iq=this.iq,t.yq=this.yq,t.$q=this.$q,t.ar=this.ar,t.mr=this.mr,t.nr=this.nr,t.pr=this.pr,t.qj=this.qj,t.xr=this.xr,t.Ar=this.Ar,t},Kt.getEllipsis=function(){return Hm},Kt.setEllipsis=function(t){Hm=t,Um=new Zr,Q1=0},Kt.getBaseline=function(){return Fp},Kt.setBaseline=function(t){Fp=t},Kt.getUnderline=function(){return jm},Kt.setUnderline=function(t){jm=t},Kt.isValidFont=function(t){if(jr||(Zi=Je?new ro(null).context:null,jr=!0),null===Zi)return!0;var e=Zi.font;if(t===e||"10px sans-serif"===t)return!0;Zi.font="10px sans-serif",Zi.font=t;var n=Zi.font;if("10px sans-serif"!==n)return Zi.font=e,!0;Zi.font="19px serif";var s=Zi.font;return Zi.font=t,n=Zi.font,Zi.font=e,n!==s},Kt.FormatNone=J1,Kt.FormatTrim=jp,Kt.None=Vm,Kt.OverflowClip=R0,Kt.OverflowEllipsis=Rp,Kt.WrapBreakAll=X1,Kt.WrapDesiredSize=Bm,Kt.WrapFit=Y1,$o.prototype.copy=function(){var t=new $o;return t.Ik=this.Ik,t.u=this.u,t.j=this.j,t.F=this.F,t.m=this.m,t},$o.className="GradElementSettings",zt(Qi,lt),Qi.prototype.cloneProtected=function(t){lt.prototype.cloneProtected.call(this,t),t.Tn=this.Tn,t.element=this.vg,t.Ng=this.Ng.J(),t.Ck=this.Ck,t.Nf=this.Nf,t.zd=this.zd,t.Pg=this.Pg,t.Bk=this.Bk.J(),t.Mm=this.Mm,t.gl=this.gl},Qi.prototype.ob=function(t){t===Ve||t===Gs||t===xf?this.imageStretch=t:lt.prototype.ob.call(this,t)},Qi.prototype.toString=function(){return"Picture("+this.source+")#"+Cn(this)},Qi.prototype.Oz=function(){if(""!==this.source){Rf(this.source);var t=this.source;this.source="",this.source=t}},Qi.prototype.redraw=function(){this.N()},Qi.prototype.ai=function(t,e){var n=this.vg;if(null!==n){var s=n.getAttribute("src");if(!(n instanceof HTMLImageElement&&(null===s||""===s)||n.Sm instanceof Event&&t instanceof Rn)){s=this.naturalBounds;var l=0,u=0,c=this.Xm,d=c?+n.width:n.naturalWidth;if(void 0===d&&n.videoWidth&&(d=n.videoWidth),void 0===(c=c?+n.height:n.naturalHeight)&&n.videoHeight&&(c=n.videoHeight),c=c||s.height,0!==(d=d||s.width)&&0!==c){var p=d,g=c;this.sourceRect.v()&&(l=this.Ng.x,u=this.Ng.y,d=this.Ng.width,c=this.Ng.height);var y=d,w=c,C=this.Ck,D=this.Bk;switch(C){case Ve:if(this.sourceRect.v())break;y>=s.width&&(l=l+D.offsetX+(y*D.x-s.width*D.x)),w>=s.height&&(u=u+D.offsetY+(w*D.y-s.height*D.y)),d=Math.min(s.width,y),c=Math.min(s.height,w);break;case Ge:y=s.width,w=s.height;break;case Gs:case xf:C===Gs?(y*=C=Math.min(s.height/w,s.width/y),w*=C):C===xf&&((y*=C=Math.max(s.height/w,s.width/y))>=s.width&&(l=(l+D.offsetX+(y*D.x-s.width*D.x)/y)*d),(w*=C)>=s.height&&(u=(u+D.offsetY+(w*D.y-s.height*D.y)/w)*c),d*=1/(y/s.width),c*=1/(w/s.height),y=s.width,w=s.height)}var M=y*(C=this.uf()*e.scale)*w*C,E=d*c/M,I=n.__goCache;if(C=null,n.Up&&void 0!==I&&4<M&&E>aD*aD)for(null===I.Zh&&($m(I,4,p,g,n),$m(I,16,p,g,n)),g=(p=I.Zh).length,M=0;M<g&&p[M].ratio*p[M].ratio<E;M++)C=p[M];if(!e.Fm){if(null===this.kl)if(null===this.vg)this.kl=!1;else{p=new ro(null).context;try{p.drawImage(this.vg,0,0)}catch{this.Mm=!1}try{p.getImageData(0,0,1,1).data[3]&&(this.kl=!1),this.kl=!1}catch{this.kl=!0}}if(this.kl)return}switch(p=0,y<s.width&&(p=D.offsetX+(s.width*D.x-y*D.x)),g=0,w<s.height&&(g=D.offsetY+(s.height*D.y-w*D.y)),this.flip){case Mf:t.translate(Math.min(s.width,y),0),t.scale(-1,1);break;case Cf:t.translate(0,Math.min(s.height,w)),t.scale(1,-1);break;case Mp:t.translate(Math.min(s.width,y),Math.min(s.height,w)),t.scale(-1,-1)}if(t.Pc(),e.Ge("pictureRatioOptimization")&&!e.Vi&&void 0!==I&&null!==C&&1!==C.ratio){t.save(),e=C.ratio;try{t.drawImage(C.source,l/e,u/e,Math.min(C.source.width,d/e),Math.min(C.source.height,c/e),p,g,Math.min(s.width,y),Math.min(s.height,w))}catch{this.Mm=!1}t.restore()}else try{t.drawImage(n,l,u,d,c,p,g,Math.min(s.width,y),Math.min(s.height,w))}catch{this.Mm=!1}switch(this.flip){case Mf:t.scale(-1,1),t.translate(-Math.min(s.width,y),0);break;case Cf:t.scale(1,-1),t.translate(0,-Math.min(s.height,w));break;case Mp:t.scale(-1,-1),t.translate(-Math.min(s.width,y),-Math.min(s.height,w))}}}}},Qi.prototype.El=function(t,e,n,s){var l=this.desiredSize,u=vs(this,!0),c=this.vg,d=this.Xm;(d||!this.Qk&&c&&c.complete)&&(this.Qk=!0),null===c&&(isFinite(l.width)||(t=0),isFinite(l.height)||(e=0)),isFinite(l.width)||u===Ge||u===In?(isFinite(t)||(this.sourceRect.v()?t=this.sourceRect.width:null!==c&&(t=d?+c.width:c.naturalWidth)),n=0):null!==c&&!1!==this.Qk&&(t=this.sourceRect.v()?this.sourceRect.width:d?+c.width:c.naturalWidth),isFinite(l.height)||u===Ge||u===Wn?(isFinite(e)||(this.sourceRect.v()?e=this.sourceRect.height:null!==c&&(e=d?+c.height:c.naturalHeight)),s=0):null!==c&&!1!==this.Qk&&(e=this.sourceRect.v()?this.sourceRect.height:d?+c.height:c.naturalHeight),isFinite(l.width)&&(t=l.width),isFinite(l.height)&&(e=l.height),l=this.maxSize,u=this.minSize,n=Math.max(n||0,u.width),s=Math.max(s||0,u.height),t=Math.min(l.width,t),e=Math.min(l.height,e),t=Math.max(n,t),e=Math.max(s,e),null===c||c.complete||(isFinite(t)||(t=0),isFinite(e)||(e=0)),Ba(this.bc,t,e),this.ve(0,0,t,e)},Qi.prototype.Vg=function(t,e,n,s){v0(this,t,e,n,s)},St.Object.defineProperties(Qi.prototype,{element:{get:function(){return this.vg},set:function(t){var e=this.vg;if(e!==t){this.Xm=t instanceof HTMLCanvasElement;var n=t instanceof HTMLImageElement;null===t||n||t instanceof HTMLVideoElement||this.Xm||Y("Picture.element must be an instance of Image, Canvas, or Video, not: "+t);var s=this.diagram;null!==s&&s0(s,this),this.vg=t,null!==t&&n&&void 0===t.sg&&(t.sg=new Q),null!==s&&n&&o0(s,this),null!==t&&(this.Xm||!0===t.complete?(t.Pm&&(t.Sm instanceof Event&&null!==this.zd?this.zd(this,t.Sm):!0===t.Up&&!t.Sm&&null!==this.Pg&&t.Kt&&this.Pg(this,t.Kt)),t.Up=!0,this.desiredSize.v()||(lr(this,!1),this.w())):n&&jf(this,t)),this.g("element",e,t),this.N()}}},source:{get:function(){return this.Tn},set:function(t){var e=this.Tn;if(e!==t){this.Tn=t;var n=Yh;if(Je){if(void 0!==n[t])var s=n[t];else if(""!==t){30<zm&&(Rf(),n=Yh),(s=hs("img")).Pm=!0,jf(this,s);var l=this.gl;null!==l&&(s.crossOrigin=l(this)),s.src=t,n[t]=s,zm++}this.element=s,null!==s&&void 0===s.__goCache&&(s.__goCache=new Gm),this.w(),this.N()}this.g("source",e,t)}}},sourceCrossOrigin:{get:function(){return this.gl},set:function(t){if(this.gl!==t&&(this.gl=t,null!==this.element)){var e=this.element.getAttribute("src");null===t&&"string"==typeof e?this.element.crossOrigin=null:null!==t&&(this.element.crossOrigin=t(this)),this.element.src=e}}},sourceRect:{get:function(){return this.Ng},set:function(t){var e=this.Ng;e.C(t)||(this.Ng=t=t.J(),this.N(),this.g("sourceRect",e,t))}},imageStretch:{get:function(){return this.Ck},set:function(t){var e=this.Ck;e!==t&&(this.Ck=t,this.N(),this.g("imageStretch",e,t))}},flip:{get:function(){return this.Nf},set:function(t){var e=this.Nf;e!==t&&(this.Nf=t,this.N(),this.g("flip",e,t))}},imageAlignment:{get:function(){return this.Bk},set:function(t){var e=this.Bk;e.C(t)||(this.Bk=t=t.J(),this.N(),this.g("imageAlignment",e,t))}},errorFunction:{get:function(){return this.zd},set:function(t){var e=this.zd;e!==t&&(this.zd=t,this.g("errorFunction",e,t))}},successFunction:{get:function(){return this.Pg},set:function(t){var e=this.Pg;e!==t&&(this.Pg=t,this.g("successFunction",e,t))}},naturalBounds:{get:function(){return this.bc}}}),Qi.prototype.redraw=Qi.prototype.redraw,Qi.prototype.reloadSource=Qi.prototype.Oz;var zm=0,aD=4;function Gm(){this.Zh=null}function $m(t,e,n,s,l){null===t.Zh&&(t.Zh=[]);var u=new ro(null),c=u.context,d=1/e;u.width=n/e,u.height=s/e,0!==u.width&&0!==u.height&&(e=new V0(u.Sa,e),n=1,0<t.Zh.length&&(l=(n=t.Zh[t.Zh.length-1]).source,n=n.ratio),c.setTransform(d*n,0,0,d*n,0,0),c.Pc(),c.drawImage(l,0,0),t.Zh.push(e))}function V0(t,e){this.source=t,this.ratio=e}function Vf(){this.Lr=new X,this.pc=null}function xa(t,e,n,s,l){t.pc=new Fn,t.pc.startX=e,t.pc.startY=n,t.pc.isFilled=s,t.Lr.figures.add(t.pc),void 0!==l&&(t.pc.isShadowed=l)}function B0(t){var e=t.pc.segments.length;0<e&&t.pc.segments.K(e-1).close()}function Ca(t,e,n,s,l,u,c){var d;void 0===d&&(d=!1);var p=new Ft(to);p.point1X=e,p.point1Y=n,p.point2X=s,p.point2Y=l,p.endX=u,p.endY=c,d&&p.close(),t.pc.segments.add(p)}function Wm(t,e,n,s,l){var u;void 0===u&&(u=!1);var c=new Ft(js);c.point1X=e,c.point1Y=n,c.endX=s,c.endY=l,u&&c.close(),t.pc.segments.add(c)}function U0(t,e,n,s,l,u,c,d){var p;void 0===p&&(p=!1),e=new Ft(Co,c,d,e,n,s,l,u),p&&e.close(),t.pc.segments.add(e)}function q1(t){var e=Km;return null!==e?(Km=null,e.reset(t),e):((e=new Vf).reset(t),e)}Qi.className="Picture",Yh=new Zr,Qi.clearCache=Rf,Gm.className="PictureCacheArray",V0.className="PictureCacheInstance",Vf.prototype.reset=function(t){null!==t?(t.ja(),this.Lr=t,t.figures.clear()):this.Lr=new X,this.pc=null},Vf.prototype.Xl=function(t){this.pc.isShadowed=t},Vf.prototype.moveTo=function(t,e,n){void 0===n&&(n=!1);var s=new Ft(Vo);s.endX=t,s.endY=e,n&&s.close(),this.pc.segments.add(s)},Vf.prototype.lineTo=function(t,e,n){void 0===n&&(n=!1);var s=new Ft(_e);s.endX=t,s.endY=e,n&&s.close(),this.pc.segments.add(s)},Vf.prototype.arcTo=function(t,e,n,s,l,u,c){void 0===u&&(u=0),void 0===c&&(c=!1);var d=new Ft(ln);d.startAngle=t,d.sweepAngle=e,d.centerX=n,d.centerY=s,d.radiusX=l,d.radiusY=0!==u?u:l,c&&d.close(),this.pc.segments.add(d)};var Km=null;function oi(t,e){var n=t.toLowerCase(),s=R.Oe;s[t]=e,s[n]=t}function H0(){this.ic=!1,this.Qq=this.np=this.Zp=null,this.Sq="",this.Eq=this.Qp=this.Rq=null,this.Gq="",this.Fq=Av,this.Hq=null,this.Iq="",this.Kq=Zn,this.gq="",this.hq=je,this.oq=Xn,this.jq=$c,this.yp=null,this.bq=127,this.Wq=Pv,this.Vq="gray",this.Lg=4}function ut(t,e){void 0===t||t instanceof $e||"string"==typeof t?$.call(this,t):($.call(this),t&&(e=t)),this.G=2408959,this.Jf="",this.O=null,this.zg="",this.Hf=this.Kg=null,this.cc="",this.ph=this.Ah=null,this.de=new A(NaN,NaN).freeze(),this.af=null,this.eo=NaN,this.aw=-1,this.Vx=new U,this.Kh=null,this.Sf=NaN,e&&Object.assign(this,e)}function Li(t){null===t.O?t.O=new H0:t.O.ic&&(t.O=t.O.copy())}function Ym(t){0!=(16384&t.G)&&(t.updateAdornments(),t.G&=-16385)}function Bp(t){if(!1===Wl(t)){Bf(t,!0),t.Jk();var e=t.diagram;null!==e&&(e.te.add(t),e.Mb())}}function Xm(t){if(t.G|=2097152,!1!==Wl(t)){var e=t.position,n=t.location;n.v()&&e.v()||$0(t,e,n),n=t.Eb;var s=U.alloc().assign(n);n.ja(),n.x=e.x,n.y=e.y,n.freeze(),t.Fl(s,n),U.free(s),Bf(t,!1)}}function Qa(t,e,n,s){void 0===s&&(s=new A),n=n.Fc()?ht:n;var l=e.naturalBounds;if(s.h(l.width*n.x+n.offsetX,l.height*n.y+n.offsetY),null===e||e===t)return s;for(e.transform.Fa(s),e=e.panel;null!==e&&e!==t;)e.transform.Fa(s),e=e.panel;return null!==t.Ib&&t.Ib.Fa(s),s.offset(-t.qc.x,-t.qc.y),s}function Xh(t,e){var n=t.Vx;isNaN(t.Sf)&&(t.Sf=j1(t));var s=t.Sf,l=2*s;if(!t.isShadowed)return n.h(e.x-1-s,e.y-1-s,e.width+2+l,e.height+2+l),n;s=e.x,l=e.y;var u=e.width;e=e.height;var c=t.shadowBlur;return u+=c,e+=c,s-=c/2,l-=c/2,0<(t=t.shadowOffset).x?u+=t.x:(s+=t.x,u-=t.x),0<t.y?e+=t.y:(l+=t.y,e-=t.y),n.h(s-1,l-1,u+2,e+2),n}function G0(t,e,n,s,l){null===e||t instanceof At||(e=e.animationManager).zb&&x1(e,t,new A(s,l),n)}function $0(t,e,n){var s=A.alloc(),l=t.locationObject,u=l.naturalBounds,c=l instanceof Ct?l.strokeWidth:0;if(s.pi(0,0,u.width+c,u.height+c,t.locationSpot),l!==t)for(s.offset(-c/2,-c/2),l.transform.Fa(s),l=l.panel;null!==l&&l!==t;)l.transform.Fa(s),l=l.panel;null!==t.Ib&&t.Ib.Fa(s),s.offset(-t.qc.x,-t.qc.y),l=t.diagram,u=n.v(),c=e.v(),u&&c?0!=(2097152&t.G)?Wu(t,e,n,l,s):W0(t,e,n,l,s):u?Wu(t,e,n,l,s):c&&W0(t,e,n,l,s),t.G|=2097152,A.free(s),t.Jk()}function Wu(t,e,n,s,l){var u=e.x,c=e.y;e.h(n.x-l.x,n.y-l.y),null!==s&&((s=(n=s.animationManager).defaultAnimation.isAnimating)||!n.zb||t instanceof At||x1(n,t,new A(u,c),e),s||e.x===u&&e.y===c||t.g("position",new A(u,c),e.copy()))}function W0(t,e,n,s,l){var u=n.copy();n.h(e.x+l.x,e.y+l.y),n.C(u)||null===s||t.g("location",u,n.copy())}function K0(t,e,n){X0(t,!1),t instanceof Z&&ym(n,t),t.layer.isTemporary||e||n.Va(),e=t.Eb;var s=n.viewportBounds;s.v()?qa(t)?(kv(e,s)||t.Pd(!1),t.updateAdornments()):e.Sc(s)?(t.Pd(!0),t.updateAdornments()):t.Rb():n.Ui=!0}function Y0(t,e,n,s){e.constructor===t.constructor||J0||(J0=!0,wi('Should not change the class of the Part when changing category from "'+n+'" to "'+s+'"'),wi("  Old class: "+la(t.constructor)+", new class: "+la(e.constructor)+", part: "+t.toString())),t.zj();var l=t.data;n=t.layerName;var u=t.isSelected,c=t.isHighlighted,d=!0,p=!0,g=!1;t instanceof Z&&(d=t.isTreeLeaf,p=t.isTreeExpanded,g=t.wasTreeExpanded),e.qf(t),e.cloneProtected(t),t.Jf=s,t.w(),t.N(),s=!0,null!==(e=t.diagram)&&(s=e.skipsUndoManager,e.skipsUndoManager=!0),t.qb=l,t.G=u?4096|t.G:-4097&t.G,t.G=c?524288|t.G:-524289&t.G,t instanceof Z&&(t.U=d?4|t.U:-5&t.U,t.U=p?1|t.U:-2&t.U,t.U=g?2|t.U:-3&t.U),null!==l&&t.Ka(),(l=t.layerName)!==n&&(t.zg=n,t.layerName=l),null!==e&&(e.skipsUndoManager=s),t.Tc()&&t.D(64)}function Wl(t){return 0!=(32768&t.G)}function Bf(t,e){t.G=e?32768|t.G:-32769&t.G}function X0(t,e){t.G=e?65536|t.G:-65537&t.G}function qa(t){return 0!=(131072&t.G)}function Up(t,e){t.G=e?1048576|t.G:-1048577&t.G}function Jm(t,e){var n=e.containingGroup;return null!==n?1+Jm(t,n):e instanceof Z&&null!==(e=e.labeledLink)?Jm(t,e):0}function Zm(t,e){var n=e.containingGroup;return null!==n||e instanceof Z&&null!==(n=e.labeledLink)?Zm(t,n):e}function Qm(t,e,n){if(e===n||null===n)return!1;var s=e.containingGroup;return!(null===s||s!==n&&!Qm(t,s,n))||e instanceof Z&&null!==(e=e.labeledLink)&&Qm(t,e,n)}function Hp(t){return!(!t.isVisible()||null!==(t=t.layer)&&t.isTemporary)}function Xs(t,e,n,s,l,u){if(void 0===u&&(u=null),!(t.contains(e)||null!==u&&!u(e)||e instanceof At))if(t.add(e),e instanceof Z){if(n&&e instanceof wt)for(var c=e.memberParts;c.next();)Xs(t,c.value,n,s,l,u);if(!1!==l)for(c=e.linksConnected;c.next();){var d=c.value;if(!t.contains(d)){var p=d.fromNode,g=d.toNode;p=null===p||t.contains(p),g=null===g||t.contains(g),(l?p&&g:p||g)&&Xs(t,d,n,s,l,u)}}if(1<s)for(e=e.Au();e.next();)Xs(t,e.value,n,s-1,l,u)}else if(e instanceof z)for(e=e.labelNodes;e.next();)Xs(t,e.value,n,s,l,u)}Vf.className="StreamGeometryContext",oi("Rectangle",function(t,e,n){var s=R.Df[t="r"+e+","+n];return void 0!==s||((s=new X(X.u)).endX=e,s.endY=n,R.Ef<R.em&&(R.Df[t]=s,R.Ef++)),s}),oi("Square",function(t,e,n){var s=R.Df[t="s"+e+","+n];return void 0!==s||((s=new X(X.u)).endX=e,s.endY=n,s.defaultStretch=Gs,R.Ef<R.em&&(R.Df[t]=s,R.Ef++)),s}),oi("RoundedRectangle",function(t,e,n){t=t?t.parameter1:NaN,(isNaN(t)||0>t)&&(t=5),t=Math.min(t,e/3);var s="rr"+e+","+n+","+(t=Math.min(t,n/3)),l=R.Df[s];if(void 0!==l)return l;var u=t*R.ng;return l=(new X).add(new Fn(t,0,!0).add(new Ft(_e,e-t,0)).add(new Ft(to,e,t,e-u,0,e,u)).add(new Ft(_e,e,n-t)).add(new Ft(to,e-t,n,e,n-u,e-u,n)).add(new Ft(_e,t,n)).add(new Ft(to,0,n-t,u,n,0,n-u)).add(new Ft(_e,0,t)).add(new Ft(to,t,0,0,u,u,0).close())),1<u&&(l.spot1=new ot(0,0,u,u),l.spot2=new ot(1,1,-u,-u)),R.Ef<R.em&&(R.Df[s]=l,R.Ef++),l}),oi("Border","RoundedRectangle"),oi("Ellipse",function(t,e,n){var s=R.Df[t="e"+e+","+n];return void 0!==s||((s=new X(X.F)).endX=e,s.endY=n,s.spot1=Sr,s.spot2=bv,R.Ef<R.em&&(R.Df[t]=s,R.Ef++)),s}),oi("Circle",function(t,e,n){var s=R.Df[t="c"+e+","+n];return void 0!==s||((s=new X(X.F)).endX=e,s.endY=n,s.spot1=Sr,s.spot2=bv,s.defaultStretch=Gs,R.Ef<R.em&&(R.Df[t]=s,R.Ef++)),s}),oi("TriangleRight",function(t,e,n){return(new X).add(new Fn(0,0).add(new Ft(_e,e,.5*n)).add(new Ft(_e,0,n).close())).Yl(0,.25,.5,.75)}),oi("TriangleDown",function(t,e,n){return(new X).add(new Fn(0,0).add(new Ft(_e,e,0)).add(new Ft(_e,.5*e,n).close())).Yl(.25,0,.75,.5)}),oi("TriangleLeft",function(t,e,n){return(new X).add(new Fn(e,n).add(new Ft(_e,0,.5*n)).add(new Ft(_e,e,0).close())).Yl(.5,.25,1,.75)}),oi("TriangleUp",function(t,e,n){return(new X).add(new Fn(e,n).add(new Ft(_e,0,n)).add(new Ft(_e,.5*e,0).close())).Yl(.25,.5,.75,1)}),oi("Triangle","TriangleUp"),oi("Diamond",function(t,e,n){return(new X).add(new Fn(.5*e,0).add(new Ft(_e,0,.5*n)).add(new Ft(_e,.5*e,n)).add(new Ft(_e,e,.5*n).close())).Yl(.25,.25,.75,.75)}),oi("LineH",function(t,e,n){return(t=new X(X.j)).startX=0,t.startY=n/2,t.endX=e,t.endY=n/2,t}),oi("LineV",function(t,e,n){return(t=new X(X.j)).startX=e/2,t.startY=0,t.endX=e/2,t.endY=n,t}),oi("None","Rectangle"),oi("BarH","Rectangle"),oi("BarV","Rectangle"),oi("MinusLine","LineH"),oi("PlusLine",function(t,e,n){return(new X).add(new Fn(0,n/2,!1).add(new Ft(_e,e,n/2)).add(new Ft(Vo,e/2,0)).add(new Ft(_e,e/2,n)))}),oi("XLine",function(t,e,n){return(new X).add(new Fn(0,n,!1).add(new Ft(_e,e,0)).add(new Ft(Vo,0,0)).add(new Ft(_e,e,n)))}),oi("LineRight",function(t,e,n){return(new X).add(new Fn(.25*e,0,!1).add(new Ft(_e,.75*e,.5*n)).add(new Ft(_e,.25*e,n)))}),oi("LineDown",function(t,e,n){return(new X).add(new Fn(0,.25*n,!1).add(new Ft(_e,.5*e,.75*n)).add(new Ft(_e,e,.25*n)))}),oi("LineLeft",function(t,e,n){return(new X).add(new Fn(.75*e,0,!1).add(new Ft(_e,.25*e,.5*n)).add(new Ft(_e,.75*e,n)))}),oi("LineUp",function(t,e,n){return(new X).add(new Fn(0,.75*n,!1).add(new Ft(_e,.5*e,.25*n)).add(new Ft(_e,e,.75*n)))}),R.dm={"":"",Standard:"F1 m 0,0 l 8,4 -8,4 2,-4 z",Backward:"F1 m 8,0 l -2,4 2,4 -8,-4 z",Triangle:"F1 m 0,0 l 8,4.62 -8,4.62 z",BackwardTriangle:"F1 m 8,4 l 0,4 -8,-4 8,-4 0,4 z",Boomerang:"F1 m 0,0 l 8,4 -8,4 4,-4 -4,-4 z",BackwardBoomerang:"F1 m 8,0 l -8,4 8,4 -4,-4 4,-4 z",SidewaysV:"m 0,0 l 8,4 -8,4 0,-1 6,-3 -6,-3 0,-1 z",BackwardV:"m 8,0 l -8,4 8,4 0,-1 -6,-3 6,-3 0,-1 z",OpenTriangle:"m 0,0 l 8,4 -8,4",BackwardOpenTriangle:"m 8,0 l -8,4 8,4",OpenTriangleLine:"m 0,0 l 8,4 -8,4 m 8.5,0 l 0,-8",BackwardOpenTriangleLine:"m 8,0 l  -8,4 8,4 m -8.5,0 l 0,-8",OpenTriangleTop:"m 0,0 l 8,4 m 0,4",BackwardOpenTriangleTop:"m 8,0 l -8,4 m 0,4",OpenTriangleBottom:"m 0,8 l 8,-4",BackwardOpenTriangleBottom:"m 0,4 l 8,4",HalfTriangleTop:"F1 m 0,0 l 0,4 8,0 z m 0,8",BackwardHalfTriangleTop:"F1 m 8,0 l 0,4 -8,0 z m 0,8",HalfTriangleBottom:"F1 m 0,4 l 0,4 8,-4 z",BackwardHalfTriangleBottom:"F1 m 8,4 l 0,4 -8,-4 z",ForwardSemiCircle:"m 4,0 b 270 180 0 4 4",BackwardSemiCircle:"m 4,8 b 90 180 0 -4 4",Feather:"m 0,0 l 3,4 -3,4",BackwardFeather:"m 3,0 l -3,4 3,4",DoubleFeathers:"m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4",BackwardDoubleFeathers:"m 3,0 l -3,4 3,4 m 3,-8 l -3,4 3,4",TripleFeathers:"m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4 m 3,-8 l 3,4 -3,4",BackwardTripleFeathers:"m 3,0 l -3,4 3,4 m 3,-8 l -3,4 3,4 m 3,-8 l -3,4 3,4",ForwardSlash:"m 0,8 l 5,-8",BackSlash:"m 0,0 l 5,8",DoubleForwardSlash:"m 0,8 l 4,-8 m -2,8 l 4,-8",DoubleBackSlash:"m 0,0 l 4,8 m -2,-8 l 4,8",TripleForwardSlash:"m 0,8 l 4,-8 m -2,8 l 4,-8 m -2,8 l 4,-8",TripleBackSlash:"m 0,0 l 4,8 m -2,-8 l 4,8 m -2,-8 l 4,8",Fork:"m 0,4 l 8,0 m -8,0 l 8,-4 m -8,4 l 8,4",BackwardFork:"m 8,4 l -8,0 m 8,0 l -8,-4 m 8,4 l -8,4",LineFork:"m 0,0 l 0,8 m 0,-4 l 8,0 m -8,0 l 8,-4 m -8,4 l 8,4",BackwardLineFork:"m 8,4 l -8,0 m 8,0 l -8,-4 m 8,4 l -8,4 m 8,-8 l 0,8",CircleFork:"F1 m 6,4 b 0 360 -3 0 3 z m 0,0 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",BackwardCircleFork:"F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 6,0 b 0 360 -3 0 3",CircleLineFork:"F1 m 6,4 b 0 360 -3 0 3 z m 1,-4 l 0,8 m 0,-4 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",BackwardCircleLineFork:"F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 0,-4 l 0,8 m 7,-4 b 0 360 -3 0 3",Circle:"F1 m 8,4 b 0 360 -4 0 4 z",Block:"F1 m 0,0 l 0,8 8,0 0,-8 z",StretchedDiamond:"F1 m 0,3 l 5,-3 5,3 -5,3 -5,-3 z",Diamond:"F1 m 0,4 l 4,-4 4,4 -4,4 -4,-4 z",Chevron:"F1 m 0,0 l 5,0 3,4 -3,4 -5,0 3,-4 -3,-4 z",StretchedChevron:"F1 m 0,0 l 8,0 3,4 -3,4 -8,0 3,-4 -3,-4 z",NormalArrow:"F1 m 0,2 l 4,0 0,-2 4,4 -4,4 0,-2 -4,0 z",X:"m 0,0 l 8,8 m 0,-8 l -8,8",TailedNormalArrow:"F1 m 0,0 l 2,0 1,2 3,0 0,-2 2,4 -2,4 0,-2 -3,0 -1,2 -2,0 1,-4 -1,-4 z",DoubleTriangle:"F1 m 0,0 l 4,4 -4,4 0,-8 z  m 4,0 l 4,4 -4,4 0,-8 z",BigEndArrow:"F1 m 0,0 l 5,2 0,-2 3,4 -3,4 0,-2 -5,2 0,-8 z",ConcaveTailArrow:"F1 m 0,2 h 4 v -2 l 4,4 -4,4 v -2 h -4 l 2,-2 -2,-2 z",RoundedTriangle:"F1 m 0,1 a 1,1 0 0 1 1,-1 l 7,3 a 0.5,1 0 0 1 0,2 l -7,3 a 1,1 0 0 1 -1,-1 l 0,-6 z",SimpleArrow:"F1 m 1,2 l -1,-2 2,0 1,2 -1,2 -2,0 1,-2 5,0 0,-2 2,2 -2,2 0,-2 z",AccelerationArrow:"F1 m 0,0 l 0,8 0.2,0 0,-8 -0.2,0 z m 2,0 l 0,8 1,0 0,-8 -1,0 z m 3,0 l 2,0 2,4 -2,4 -2,0 0,-8 z",BoxArrow:"F1 m 0,0 l 4,0 0,2 2,0 0,-2 2,4 -2,4 0,-2 -2,0 0,2 -4,0 0,-8 z",TriangleLine:"F1 m 8,4 l -8,-4 0,8 8,-4 z m 0.5,4 l 0,-8",CircleEndedArrow:"F1 m 10,4 l -2,-3 0,2 -2,0 0,2 2,0 0,2 2,-3 z m -4,0 b 0 360 -3 0 3 z",DynamicWidthArrow:"F1 m 0,3 l 2,0 2,-1 2,-2 2,4 -2,4 -2,-2 -2,-1 -2,0 0,-2 z",EquilibriumArrow:"m 0,3 l 8,0 -3,-3 m 3,5 l -8,0 3,3",FastForward:"F1 m 0,0 l 3.5,4 0,-4 3.5,4 0,-4 1,0 0,8 -1,0 0,-4 -3.5,4 0,-4 -3.5,4 0,-8 z",Kite:"F1 m 0,4 l 2,-4 6,4 -6,4 -2,-4 z",HalfArrowTop:"F1 m 0,0 l 4,4 4,0 -8,-4 z m 0,8",HalfArrowBottom:"F1 m 0,8 l 4,-4 4,0 -8,4 z",OpposingDirectionDoubleArrow:"F1 m 0,4 l 2,-4 0,2 4,0 0,-2 2,4 -2,4 0,-2 -4,0 0,2 -2,-4 z",PartialDoubleTriangle:"F1 m 0,0 4,3 0,-3 4,4 -4,4 0,-3 -4,3 0,-8 z",LineCircle:"F1 m 0,0 l 0,8 m 7 -4 b 0 360 -3 0 3 z",DoubleLineCircle:"F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z",TripleLineCircle:"F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z",CircleLine:"F1 m 6 4 b 0 360 -3 0 3 z m 1,-4 l 0,8",DiamondCircle:"F1 m 8,4 l -4,4 -4,-4 4,-4 4,4 m 8,0 b 0 360 -4 0 4 z",PlusCircle:"F1 m 8,4 b 0 360 -4 0 4 l -8 0 z m -4 -4 l 0 8",OpenRightTriangleTop:"m 8,0 l 0,4 -8,0 m 0,4",OpenRightTriangleBottom:"m 8,8 l 0,-4 -8,0",Line:"m 0,0 l 0,8",DoubleLine:"m 0,0 l 0,8 m 2,0 l 0,-8",TripleLine:"m 0,0 l 0,8 m 2,0 l 0,-8 m 2,0 l 0,8",PentagonArrow:"F1 m 8,4 l -4,-4 -4,0 0,8 4,0 4,-4 z"},H0.prototype.copy=function(){var t=new H0;return t.Zp=this.Zp,t.np=this.np,t.Qq=this.Qq,t.Sq=this.Sq,t.Rq=this.Rq,t.Qp=this.Qp,t.Eq=this.Eq,t.Gq=this.Gq,t.Fq=this.Fq.J(),t.Hq=this.Hq,t.Iq=this.Iq,t.Kq=this.Kq.J(),t.gq=this.gq,t.hq=this.hq.J(),t.oq=this.oq.J(),t.jq=this.jq.J(),t.yp=this.yp,t.bq=this.bq,t.Wq=this.Wq.J(),t.Vq=this.Vq,t.Lg=this.Lg,t},zt(ut,$),ut.prototype.cloneProtected=function(t){$.prototype.cloneProtected.call(this,t),t.G=-4097&this.G|49152,t.Jf=this.Jf,null!==this.O&&(t.O=this.O.ic?this.O:this.O.copy()),t.zg=this.zg,t.Hf=null,t.cc=this.cc,t.de.assign(this.de),t.eo=this.eo},(_=ut.prototype).qf=function(t){$.prototype.qf.call(this,t),t.dh(),t.Kg=null,t.af=null,t.Kh=null},_.toString=function(){var t=la(this.constructor)+"#"+Cn(this);return null!==this.data&&(t+="("+vo(this.data)+")"),t},_.ih=function(){$.prototype.ih.call(this),null!==this.O&&(this.O.ic=!0)},_.$j=function(t,e,n,s,l,u,c){var d=this.diagram;null!==d&&(t===un&&"elements"===e?l instanceof $?Kn(l,function(p){dw(d.partManager,p),r0(d,p)}):o0(d,l):t===Me&&"elements"===e&&(l instanceof $?Kn(l,function(p){Jf(d.partManager,p,d)}):s0(d,l)),d.bb(t,e,n,s,l,u,c))},_.Ka=function(t){if($.prototype.Ka.call(this,t),null!==this.data){for(var e=this.R.s,n=e.length,s=0;s<n;s++){var l=e[s];l instanceof $&&Kn(l,function(u){null!==u.data&&u.Ka()})}for(e=this.adornments;e.next();)e.value.Ka(t)}},ut.prototype.updateRelationshipsFromData=function(){var t;null!==this.data&&(null===(t=this.diagram)||void 0===t||t.partManager.updateRelationshipsFromData(this))},ut.prototype.Hj=function(t){var e=this.Hf;return null===e?null:e.I(t)},ut.prototype.Tg=function(t,e){if(null!==e){var n=null,s=this.Hf;if(null!==s&&(n=s.I(t)),n!==e){if(null!==n){var l=n.diagram;null!==l&&l.remove(n)}null===s&&(this.Hf=s=new xt),e.Jf!==t&&(e.category=t),s.add(t,e),null!==(t=this.diagram)&&(t.add(e),null!==(t=e.adornedObject)&&null!==(t=t.Yg())&&(e.data=t.data))}}},ut.prototype.Af=function(t){var e=this.Hf;if(null!==e){var n=e.I(t);if(null!==n){var s=n.diagram;null!==s&&s.remove(n)}e.remove(t),0===e.count&&(this.Hf=null)}},ut.prototype.zj=function(){var t=this.Hf;if(null!==t){var e=ce();for(t=t.iterator;t.next();)e.push(t.key);t=e.length;for(var n=0;n<t;n++)this.Af(e[n]);It(e)}},ut.prototype.updateAdornments=function(){var t=this.diagram;if(null!==t){for(var e=this.adornments;e.next();){var n=e.value;n.w(),n.placeholder&&n.placeholder.w()}t:{if(this.isSelected&&this.selectionAdorned&&null!==(e=this.selectionObject)&&this.actualBounds.v()&&this.isVisible()&&e.zf()&&e.actualBounds.v()){if(null===(n=this.Hj("Selection"))){if(null===(n=this.selectionAdornmentTemplate)&&(n=this.eh()?t.linkSelectionAdornmentTemplate:this instanceof wt?t.groupSelectionAdornmentTemplate:t.nodeSelectionAdornmentTemplate),!(n instanceof At))break t;Do(n),null!==(n=n.copy())&&(this.eh()&&this.selectionObject===this.path&&(n.type=$.Link),n.adornedObject=e)}if(null!==n){n.type===$.Link&&n.w(),this.Tg("Selection",n);break t}}this.Af("Selection")}for(function z0(t,e){e.toolManager.mouseDownTools.each(function(n){n.isEnabled&&n.updateAdornments(t)}),e.toolManager.updateAdornments(t)}(this,t),e=this.adornments;e.next();)e.value.Ka()}},ut.prototype.Rb=function(){var t=this.diagram;null!==t&&(Fh(t),0==(16384&this.G)&&(this.G|=16384,t.Mb()))},ut.prototype.ve=function(t,e,n,s){var l=this.qc;l.h(t,e,n,s),null===this.Ib&&(this.Ib=new Dt);var u=this.Ib;u.reset(),this.Qn(u,t,e,n,s),this.Ib=u,u.Ur()||u.So(l)},ut.prototype.Qn=function(t,e,n,s,l){if(1!==this.xa&&t.scale(this.xa),0!==this.Gb){var u=ht;this.locationSpot.pb()&&(u=this.locationSpot);var c=A.alloc();if(this.locationObject!==this)for(c.pi((n=(e=this.locationObject).naturalBounds).x,n.y,n.width,n.height,u),null!==e.Ib&&e.Ib.Fa(c),c.offset(-e.measuredBounds.x,-e.measuredBounds.y),u=e.panel;null!==u&&u!==this;)null!==u.Ib&&u.Ib.Fa(c),c.offset(-u.measuredBounds.x,-u.measuredBounds.y),u=u.panel;else c.pi(e,n,s,l,u);t.rotate(this.Gb,c.x,c.y),A.free(c)}},ut.prototype.move=function(t,e){!0===e?this.location=t:this.position=t},ut.prototype.moveTo=function(t,e,n){t=A.allocAt(t,e),this.move(t,n),A.free(t)},ut.prototype.isVisible=function(){if(!this.visible)return!1;var t=this.layer;if(null!==t){if(!t.visible)return!1;if(null!==(t=t.diagram)&&t.animationManager.es(this))return!0}return!!(null===(t=this.containingGroup)||t.isSubGraphExpanded&&t.isVisible())},ut.prototype.Ub=function(t){var e=this.diagram;t?(this.D(4),this.Rb(),null!==e&&e.te.add(this)):(this.D(8),this.zj()),this.dh(),null!==e&&(e.Va(),e.N())},ut.prototype.fb=function(t){if(this.name===t)return this;var e=this.Kh;if(null===e&&(this.Kh=e=new xt),null!==e.I(t))return e.I(t);var n=$.prototype.fb.call(this,t);return null!==n?(e.set(t,n),n):(e.set(t,null),null)},ut.prototype.gi=function(t){return void 0===t&&(t=new U),t.assign(this.actualBounds)},ut.prototype.Za=function(){!0===da(this)&&this.measure(1/0,1/0),this.arrange()},ut.prototype.arrange=function(){if(!1===ii(this))Xm(this);else{$s(this,!1);var t=this.Eb,e=U.alloc();e.assign(t);var n=qa(this);this.Vg(0,0,this.qc.width,this.qc.height);var s=this.position;$0(this,s,this.location),t.ja(),t.x=s.x,t.y=s.y,t.freeze(),this.Fl(e,t),e.C(t)?this.Pd(n):!this.Tc()||R.B(e.width,t.width)&&R.B(e.height,t.height)||0<=this.aw&&this.D(16),U.free(e),Bf(this,!1)}},(_=ut.prototype).Fl=function(t,e){var n=this.diagram;if(null!==n){var s=!1;if(!1===n.Si&&t.v()){var l=U.alloc();l.assign(n.documentBounds),l.jv(n.padding),t.x>l.x&&t.y>l.y&&t.right<l.right&&t.bottom<l.bottom&&e.x>l.x&&e.y>l.y&&e.right<l.right&&e.bottom<l.bottom&&(s=!0),U.free(l)}0==(65536&this.G)&&t.C(e)||K0(this,s,n),n.N(),!t.v()&&!e.v()||Kc(t,e)||(this instanceof Z&&!n.undoManager.isUndoingRedoing&&this.vd(),this.dh())}},_.fv=function(t,e,n){if(this.eh()||!t.v())return!1;var s=this.diagram;return null!==s&&G0(this,s,t,e,n),this.pa=t,this.G&=-2097153,!this.de.v()||null!==s&&!s.animationManager.isTicking&&s.undoManager.isUndoingRedoing||(this.de=new A((s=this.de).x+(t.x-e),s.y+(t.y-n)),this.g("location",s,this.de.copy())),!1===Wl(this)&&!1===ii(this)&&(Bp(this),Xm(this)),!0},_.Ul=function(t,e,n){var s=this.de,l=this.pa;if(n){if(s.x===t&&s.y===e)return;Wl(this)||ii(this)?l.h(NaN,NaN):l.h(l.x+t-s.x,l.y+e-s.y),s.h(t,e)}else{if(l.x===t&&l.y===e)return;Wl(this)||ii(this)?this.ns():s.h(s.x+t-l.x,s.y+e-l.y),l.h(t,e)}Bp(this)},_.ns=function(){this.G&=-2097153,Bp(this)},_.mi=function(){return!0},_.Tc=function(){return!0},_.eh=function(){return!1},_.li=function(){return!0},ut.prototype.canCopy=function(){if(!this.copyable)return!1;var t=this.layer;return null===t||!!t.allowCopy&&(null===(t=t.diagram)||!!t.allowCopy)},ut.prototype.canDelete=function(){if(!this.deletable)return!1;var t=this.layer;return null===t||!!t.allowDelete&&(null===(t=t.diagram)||!!t.allowDelete)},ut.prototype.canEdit=function(){if(!this.textEditable)return!1;var t=this.layer;return null===t||!!t.allowTextEdit&&(null===(t=t.diagram)||!!t.allowTextEdit)},ut.prototype.canGroup=function(){if(!this.groupable)return!1;var t=this.layer;return null===t||!!t.allowGroup&&(null===(t=t.diagram)||!!t.allowGroup)},ut.prototype.canMove=function(){if(!this.movable)return!1;var t=this.layer;return null===t||!!t.allowMove&&(null===(t=t.diagram)||!!t.allowMove)},ut.prototype.canReshape=function(){if(!this.reshapable)return!1;var t=this.layer;return null===t||!!t.allowReshape&&(null===(t=t.diagram)||!!t.allowReshape)},ut.prototype.canResize=function(){if(!this.resizable)return!1;var t=this.layer;return null===t||!!t.allowResize&&(null===(t=t.diagram)||!!t.allowResize)},ut.prototype.canRotate=function(){if(!this.rotatable)return!1;var t=this.layer;return null===t||!!t.allowRotate&&(null===(t=t.diagram)||!!t.allowRotate)},ut.prototype.canSelect=function(){if(!this.selectable)return!1;var t=this.layer;return null===t||!!t.allowSelect&&(null===(t=t.diagram)||!!t.allowSelect)},(_=ut.prototype).Pd=function(t){this.G=t?131072|this.G:-131073&this.G},_.dh=function(){var t=this.containingGroup;null!==t&&(t.w(),null!==t.placeholder&&t.placeholder.w(),t.vd())},_.N=function(){var t=this.diagram;null!==t&&!ii(this)&&!Wl(this)&&this.isVisible()&&this.Eb.v()&&t.N(Xh(this,this.Eb))},_.w=function(){$.prototype.w.call(this);var t=this.diagram;null!==t&&(t.te.add(this),this instanceof Z&&null!==this.labeledLink&&Sp(this.labeledLink),t.Mb(!0))},_.yo=function(t){t||null!==(t=this.ph)&&ew(t,this)},_.zo=function(t){t||null!==(t=this.ph)&&iy(t,this)},_.Fj=function(){var t=this.data;if(null!==t){var e=this.diagram;null!==e&&null!==(e=e.model)&&e.Kl(t)}},_.Xy=function(){return Jm(this,this)},_.az=function(){return Zm(this,this)},_.Md=function(t){return t instanceof wt&&Qm(this,this,t)},_.Sw=function(t){if(null===t)return null;if(this===t)return this.containingGroup;for(var e=this;null!==e;){if(e instanceof wt&&Up(e,!0),e instanceof Z){var n=e.labeledLink;null!==n&&(e=n)}e=e.containingGroup}for(n=null,e=t;null!==e;){if(0!=(1048576&e.G)){n=e;break}e instanceof Z&&null!==(t=e.labeledLink)&&(e=t),e=e.containingGroup}for(e=this;null!==e;)e instanceof wt&&Up(e,!1),e instanceof Z&&null!==(t=e.labeledLink)&&(e=t),e=e.containingGroup;return n},ut.prototype.canLayout=function(){if(!this.isLayoutPositioned||!this.isVisible())return!1;var t=this.layer;return!(null!==t&&t.isTemporary||this instanceof Z&&this.isLinkLabel)},ut.prototype.D=function(t){if(void 0===t&&(t=16777215),this.isLayoutPositioned&&0!=(t&this.layoutConditions)){var e=this.layer;e=!(null!==e&&e.isTemporary||this instanceof Z&&this.isLinkLabel)&&!(null!==(e=this.diagram)&&e.undoManager.isUndoingRedoing)}else e=!1;if(e)if(null!==(e=this.ph)){var n=e.layout;null!==n?n.D():e.D(t)}else null!==(t=this.diagram)&&null!==(t=t.layout)&&t.D()},St.Object.defineProperties(ut.prototype,{key:{get:function(){var t=this.diagram;if(null!==t)return t.model.ua(this.data)}},adornments:{get:function(){return null===this.Hf?jo:this.Hf.iteratorValues}},layer:{get:function(){return this.Ah}},diagram:{get:function(){var t=this.Ah;return null==t?null:t.diagram}},layerName:{get:function(){return this.zg},set:function(t){var e=this.zg;if(e!==t){var n=this.diagram;if((null===n||null!==n.Ij(t)&&!n.partManager.addsToTemporaryLayer)&&(this.zg=t,null!==n&&n.Va(),this.g("layerName",e,t),null!==(e=this.layer)&&e.name!==t&&null!==(n=e.diagram)&&null!==(t=n.Ij(t))&&t!==e)){var s=e.lc(-1,this,!0);if(0<=s&&n.bb(Me,"parts",e,this,null,s,!0),s=t.ii(99999999,this,!0),e.visible!==t.visible&&this.Ub(t.visible),0<=s&&n.bb(un,"parts",t,null,this,!0,s),null!==(s=this.layerChanged)){var l=n.$;n.$=!0,s(this,e,t),n.$=l}}}}},layerChanged:{get:function(){return null!==this.O?this.O.Zp:null},set:function(t){var e=this.layerChanged;e!==t&&(Li(this),this.O.Zp=t,this.g("layerChanged",e,t))}},zOrder:{get:function(){return this.eo},set:function(t){var e=this.eo;if(e!==t){this.eo=t;var n=this.layer;null!==n&&um(n,-1,this),this.g("zOrder",e,t),null!==(t=this.diagram)&&t.N()}}},locationObject:{get:function(){if(null===this.af){var t=this.locationObjectName;""!==t?(t=this.fb(t),this.af=null!==t?t:this):this.af=this instanceof At&&this.type!==$.Link&&null!==this.placeholder?this.placeholder:this}return this.af.visible?this.af:this}},minLocation:{get:function(){return null!==this.O?this.O.oq:Xn},set:function(t){var e=this.minLocation;e.C(t)||(t=t.J(),Li(this),this.O.oq=t,this.g("minLocation",e,t))}},maxLocation:{get:function(){return null!==this.O?this.O.jq:$c},set:function(t){var e=this.maxLocation;e.C(t)||(t=t.J(),Li(this),this.O.jq=t,this.g("maxLocation",e,t))}},locationObjectName:{get:function(){return null!==this.O?this.O.gq:""},set:function(t){var e=this.locationObjectName;e!==t&&(Li(this),this.O.gq=t,this.af=null,this.w(),this.g("locationObjectName",e,t))}},locationSpot:{get:function(){return null!==this.O?this.O.hq:je},set:function(t){var e=this.locationSpot;e.C(t)||(t=t.J(),Li(this),this.O.hq=t,this.w(),this.g("locationSpot",e,t))}},location:{get:function(){return this.de},set:function(t){var e=t.x,n=t.y,s=this.de;if(!(s.x===e||isNaN(s.x)&&isNaN(e))||!(s.y===n||isNaN(s.y)&&isNaN(n))){if(e=t=t.copy(),this.eh())e=!1;else{if(this.de=e,this.G|=2097152,!1===ii(this)&&(Bp(this),(n=this.pa).v())){var l=this.diagram;if(null===l||l.animationManager.isTicking||!l.undoManager.isUndoingRedoing){var u=n.copy();n.h(n.x+(e.x-s.x),n.y+(e.y-s.y)),G0(this,l,n,u.x,u.y),this.g("position",u,n.copy())}}e=!0}e&&this.g("location",s,t.copy())}}},category:{get:function(){return this.Jf},set:function(t){var e=this.Jf;if(e!==t){var n=this.diagram,s=this.data,l=null;if(null!==n&&null!==s&&!(this instanceof At)){var u=n.model.undoManager;u.isEnabled&&!u.isUndoingRedoing&&(l=this.clone()).R.addAll(this.R)}this.Jf=t,this.g("category",e,t),null===n||null===s||this instanceof At?this instanceof At&&null!==(l=this.adornedPart)&&(null!==(t=l.Hf)&&t.remove(e),l.Tg(this.category,this)):(u=n.model).undoManager.isUndoingRedoing||(this.eh()?(n.partManager.setLinkCategoryForData(s,t),null!==(n=n.partManager.findLinkTemplateForCategory(t))&&(Do(n),null!==(n=n.copy())&&Y0(this,n,e,t))):(null!==u&&u.Rl(s,t),null!==(n=CC(n.partManager,s,t))&&(Do(n),null===(n=n.copy())||n instanceof z||(s=this.location.copy(),Y0(this,n,e,t),this.location.v()||(this.location=s)))),null!==l&&((e=this.clone()).R.addAll(this.R),this.g("self",l,e)))}}},self:{get:function(){return this},set:function(t){Y0(this,t,this.category,t.category)}},copyable:{get:function(){return 0!=(1&this.G)},set:function(t){var e=0!=(1&this.G);e!==t&&(this.G^=1,this.g("copyable",e,t))}},deletable:{get:function(){return 0!=(2&this.G)},set:function(t){var e=0!=(2&this.G);e!==t&&(this.G^=2,this.g("deletable",e,t))}},textEditable:{get:function(){return 0!=(4&this.G)},set:function(t){var e=0!=(4&this.G);e!==t&&(this.G^=4,this.g("textEditable",e,t),this.Rb())}},groupable:{get:function(){return 0!=(8&this.G)},set:function(t){var e=0!=(8&this.G);e!==t&&(this.G^=8,this.g("groupable",e,t))}},movable:{get:function(){return 0!=(16&this.G)},set:function(t){var e=0!=(16&this.G);e!==t&&(this.G^=16,this.g("movable",e,t))}},selectionAdorned:{get:function(){return 0!=(32&this.G)},set:function(t){var e=0!=(32&this.G);e!==t&&(this.G^=32,this.g("selectionAdorned",e,t),this.Rb())}},isInDocumentBounds:{get:function(){return 0!=(64&this.G)},set:function(t){var e=0!=(64&this.G);if(e!==t){this.G^=64;var n=this.diagram;null!==n&&n.Va(),this.g("isInDocumentBounds",e,t)}}},isLayoutPositioned:{get:function(){return 0!=(128&this.G)},set:function(t){var e=0!=(128&this.G);e!==t&&(this.G^=128,this.g("isLayoutPositioned",e,t),this.D(t?4:8))}},selectable:{get:function(){return 0!=(256&this.G)},set:function(t){var e=0!=(256&this.G);e!==t&&(this.G^=256,this.g("selectable",e,t),this.Rb())}},reshapable:{get:function(){return 0!=(512&this.G)},set:function(t){var e=0!=(512&this.G);e!==t&&(this.G^=512,this.g("reshapable",e,t),this.Rb())}},resizable:{get:function(){return 0!=(1024&this.G)},set:function(t){var e=0!=(1024&this.G);e!==t&&(this.G^=1024,this.g("resizable",e,t),this.Rb())}},rotatable:{get:function(){return 0!=(2048&this.G)},set:function(t){var e=0!=(2048&this.G);e!==t&&(this.G^=2048,this.g("rotatable",e,t),this.Rb())}},isSelected:{get:function(){return 0!=(4096&this.G)},set:function(t){var e=0!=(4096&this.G);if(e!==t){var n=this.diagram;if(!t||this.canSelect()&&!(null!==n&&n.selection.count>=n.maxSelectionCount)){this.G^=4096;var s=!1;if(null!==n){s=n.skipsUndoManager,n.skipsUndoManager=!0;var l=n.selection;l.ja(),t?l.add(this):l.remove(this),l.freeze()}this.g("isSelected",e,t),this.Rb(),null!==(t=this.selectionChanged)&&t(this),null!==n&&(n.Mb(),n.skipsUndoManager=s)}}}},isHighlighted:{get:function(){return 0!=(524288&this.G)},set:function(t){var e=0!=(524288&this.G);if(e!==t){this.G^=524288;var n=this.diagram;null!==n&&((n=n.highlighteds).ja(),t?n.add(this):n.remove(this),n.freeze()),this.g("isHighlighted",e,t),this.N(),null!==(t=this.highlightedChanged)&&t(this)}}},isShadowed:{get:function(){return 0!=(8192&this.G)},set:function(t){var e=0!=(8192&this.G);e!==t&&(this.G^=8192,this.g("isShadowed",e,t),this.N())}},isAnimated:{get:function(){return 0!=(262144&this.G)},set:function(t){var e=0!=(262144&this.G);e!==t&&(this.G^=262144,this.g("isAnimated",e,t))}},highlightedChanged:{get:function(){return null!==this.O?this.O.Qp:null},set:function(t){var e=this.highlightedChanged;e!==t&&(Li(this),this.O.Qp=t,this.g("highlightedChanged",e,t))}},selectionObjectName:{get:function(){return null!==this.O?this.O.Sq:""},set:function(t){var e=this.selectionObjectName;e!==t&&(Li(this),this.O.Sq=t,this.Kg=null,this.g("selectionObjectName",e,t))}},selectionAdornmentTemplate:{get:function(){return null!==this.O?this.O.Qq:null},set:function(t){var e=this.selectionAdornmentTemplate;e!==t&&(Li(this),this.O.Qq=t,this.g("selectionAdornmentTemplate",e,t))}},selectionObject:{get:function(){if(null===this.Kg){var t=this.selectionObjectName;null!==t&&""!==t?(t=this.fb(t),this.Kg=null!==t?t:this):this.Kg=this instanceof z&&null!==(t=this.path)?t:this}return this.Kg}},selectionChanged:{get:function(){return null!==this.O?this.O.Rq:null},set:function(t){var e=this.selectionChanged;e!==t&&(Li(this),this.O.Rq=t,this.g("selectionChanged",e,t))}},resizeAdornmentTemplate:{get:function(){return null!==this.O?this.O.Eq:null},set:function(t){var e=this.resizeAdornmentTemplate;e!==t&&(Li(this),this.O.Eq=t,this.g("resizeAdornmentTemplate",e,t))}},resizeObjectName:{get:function(){return null!==this.O?this.O.Gq:""},set:function(t){var e=this.resizeObjectName;e!==t&&(Li(this),this.O.Gq=t,this.g("resizeObjectName",e,t))}},resizeObject:{get:function(){var t=this.resizeObjectName;return""!==t&&null!==(t=this.fb(t))?t:this}},resizeCellSize:{get:function(){return null!==this.O?this.O.Fq:Av},set:function(t){var e=this.resizeCellSize;e.C(t)||(t=t.J(),Li(this),this.O.Fq=t,this.g("resizeCellSize",e,t))}},rotateAdornmentTemplate:{get:function(){return null!==this.O?this.O.Hq:null},set:function(t){var e=this.rotateAdornmentTemplate;e!==t&&(Li(this),this.O.Hq=t,this.g("rotateAdornmentTemplate",e,t))}},rotateObjectName:{get:function(){return null!==this.O?this.O.Iq:""},set:function(t){var e=this.rotateObjectName;e!==t&&(Li(this),this.O.Iq=t,this.g("rotateObjectName",e,t))}},rotateObject:{get:function(){var t=this.rotateObjectName;return""!==t&&null!==(t=this.fb(t))?t:this}},rotationSpot:{get:function(){return null!==this.O?this.O.Kq:Zn},set:function(t){var e=this.rotationSpot;e.C(t)||(t=t.J(),Li(this),this.O.Kq=t,this.g("rotationSpot",e,t))}},text:{get:function(){return this.cc},set:function(t){var e=this.cc;e!==t&&(this.cc=t,this.g("text",e,t))}},containingGroup:{get:function(){return this.ph},set:function(t){if(this.Tc()){var e=this.ph;if(e!==t){null===t||this!==t&&!t.Md(this)||(this===t&&Y("Cannot make a Group a member of itself: "+this.toString()),Y("Cannot make a Group indirectly contain itself: "+this.toString()+" already contains "+t.toString())),this.D(2);var n=this.diagram;if(null!==e?iy(e,this):this instanceof wt&&null!==n&&n.Uh.remove(this),this.ph=t,null!==t?ew(t,this):this instanceof wt&&null!==n&&n.Uh.add(this),this.D(1),null!==n&&n.$){var s=this.data,l=n.model;if(null!==s&&l.Oj()){var u=l.ua(null!==t?t.data:null);l.Po(s,u)}}if(null!==(s=this.containingGroupChanged)&&(l=!0,null!==n&&(l=n.$,n.$=!0),s(this,e,t),null!==n&&(n.$=l)),this instanceof wt)for(Xs(n=new Q,this,!0,0,!0),n=n.iterator;n.next();)if((s=n.value)instanceof Z)for(s=s.linksConnected;s.next();)ee(s.value);if(this instanceof Z){for(n=this.linksConnected;n.next();)ee(n.value);null!==(n=this.labeledLink)&&ee(n)}this.g("containingGroup",e,t),null!==t&&null!==(e=t.layer)&&um(e,-1,t)}}else Y("cannot set the Part.containingGroup of a Link or Adornment")}},containingGroupChanged:{get:function(){return null!==this.O?this.O.np:null},set:function(t){var e=this.containingGroupChanged;e!==t&&(Li(this),this.O.np=t,this.g("containingGroupChanged",e,t))}},isTopLevel:{get:function(){return!(null!==this.containingGroup||this instanceof Z&&null!==this.labeledLink)}},layoutConditions:{get:function(){return null!==this.O?this.O.bq:127},set:function(t){var e=this.layoutConditions;e!==t&&(Li(this),this.O.bq=t,this.g("layoutConditions",e,t))}},dragComputation:{get:function(){return null!==this.O?this.O.yp:null},set:function(t){var e=this.dragComputation;e!==t&&(Li(this),this.O.yp=t,this.g("dragComputation",e,t))}},shadowOffset:{get:function(){return null!==this.O?this.O.Wq:Pv},set:function(t){var e=this.shadowOffset;e.C(t)||(t=t.J(),Li(this),this.O.Wq=t,this.N(),this.g("shadowOffset",e,t))}},shadowColor:{get:function(){return null!==this.O?this.O.Vq:"gray"},set:function(t){var e=this.shadowColor;e!==t&&(Li(this),this.O.Vq=t,this.N(),this.g("shadowColor",e,t))}},shadowBlur:{get:function(){return null!==this.O?this.O.Lg:4},set:function(t){var e=this.shadowBlur;e!==t&&(Li(this),this.O.Lg=t,this.N(),this.g("shadowBlur",e,t))}}}),ut.prototype.invalidateLayout=ut.prototype.D,ut.prototype.findCommonContainingGroup=ut.prototype.Sw,ut.prototype.isMemberOf=ut.prototype.Md,ut.prototype.findTopLevelPart=ut.prototype.az,ut.prototype.findSubGraphLevel=ut.prototype.Xy,ut.prototype.ensureBounds=ut.prototype.Za,ut.prototype.getDocumentBounds=ut.prototype.gi,ut.prototype.findObject=ut.prototype.fb,ut.prototype.moveTo=ut.prototype.moveTo,ut.prototype.invalidateAdornments=ut.prototype.Rb,ut.prototype.clearAdornments=ut.prototype.zj,ut.prototype.removeAdornment=ut.prototype.Af,ut.prototype.addAdornment=ut.prototype.Tg,ut.prototype.findAdornment=ut.prototype.Hj,ut.prototype.updateTargetBindings=ut.prototype.Ka;var J0=!1;function At(t,e){void 0===t||t instanceof $e||"string"==typeof t?ut.call(this,t):(ut.call(this),t&&(e=t)),this.G&=-257,this.zg="Adornment",this.me=null,this.ew=0,this.yw=!1,this.j=this.Xa=null,e&&Object.assign(this,e)}function qm(){this.ic=!1,this.ur=this.bj=this.eq=this.cq=null,this.ap=Xt,this.Dq=ny,this.gr=this.dj=this.mq=this.lq=null}function Z(t,e){void 0===t||t instanceof $e||"string"==typeof t?ut.call(this,t):(ut.call(this),t&&(e=t)),this.U=13,this.ya=null,this.jb=new tt,this.sc=this.Qe=this.Nk=null,this.Rg=!1,e&&Object.assign(this,e)}function Wo(t){null===t.ya?t.ya=new qm:t.ya.ic&&(t.ya=t.ya.copy())}function tC(t,e){null!==e&&(null===t.Qe&&(t.Qe=new Q),t.Qe.add(e))}function Z0(t,e,n,s){if(null===e||null===t.Qe)return null;for(var l=t.Qe.iterator;l.next();){var u=l.value;if(u.cs===t&&u.Pu===e&&u.vx===n&&u.wx===s||u.cs===e&&u.Pu===t&&u.vx===s&&u.wx===n)return u}return null}function eC(t,e){for(t=t.linksConnected;t.next();){var n=t.value;(n.fromPort===e||n.toPort===e)&&(cr(n.fromPort),cr(n.toPort),n.ab())}}function cr(t){if(null!==t){var e=t.Hn;null!==e&&e.Al(),null===(e=(t=t.part).containingGroup)||t.isVisible()||cr(e.port)}}function Q0(t,e,n,s){if(null!==e&&!n.has(e)){n.add(e);var l=!0,u=t.diagram;null!==u&&(l=u.isTreePathToChildren),e.linksConnected.each(function(c){c.isTreeLink?(l?c.fromNode===e:c.toNode===e)&&Q0(t,l?c.toNode:c.fromNode,n,s):s.add(c)})}}function Uf(t,e,n){cr(n);var s=t.jb.contains(e);if(s||t.jb.add(e),!s||e.fromNode===e.toNode){var l=t.linkConnected;if(null!==l){var u=!0,c=t.diagram;null!==c&&(u=c.$,c.$=!0),l(t,e,n),null!==c&&(c.$=u)}}!s&&e.isTreeLink&&(n=e.fromNode,e=e.toNode,null!==n&&null!==e&&n!==e&&(s=!0,null!==(t=t.diagram)&&(s=t.isTreePathToChildren),u=s?n:e,(l=s?e:n).Rg||(l.Rg=u),!u.isTreeLeaf||null!==t&&t.undoManager.isUndoingRedoing||(s?n===u&&(u.isTreeLeaf=!1):e===u&&(u.isTreeLeaf=!1))))}function zp(t,e,n){cr(n);var s=t.jb.remove(e),l=null;if(s||e.toNode===e.fromNode){var u=t.linkDisconnected;if(l=t.diagram,null!==u){var c=!0;null!==l&&(c=l.$,l.$=!0),u(t,e,n),null!==l&&(l.$=c)}}s&&e.isTreeLink&&(n=!0,null!==l&&(n=l.isTreePathToChildren),t=n?e.toNode:e.fromNode,e=n?e.fromNode:e.toNode,null!==t&&(t.Rg=!1),null===e||e.isTreeLeaf||(0===e.jb.count?(e.Rg=null,null!==l&&l.undoManager.isUndoingRedoing||(e.isTreeLeaf=!0)):ty(e)))}function ty(t){if(t.Rg=!1,0!==t.jb.count){var e=!0,n=t.diagram;if(null===n||!n.undoManager.isUndoingRedoing){for(null!==n&&(e=n.isTreePathToChildren),n=t.jb.iterator;n.next();){var s=n.value;if(s.isTreeLink)if(e){if(s.fromNode===t)return void(t.isTreeLeaf=!1)}else if(s.toNode===t)return void(t.isTreeLeaf=!1)}t.isTreeLeaf=!0}}}function q0(t){null===t.sc?t.sc=new xt:t.sc.clear(),t.$l(t,function(e,n){nC(e,n)}),0===t.sc.count&&t.sc.add("",t)}function nC(t,e){var n=e.portId;null!==n&&null!==t.sc&&t.sc.add(n,e)}function ey(t,e,n){var s=e.portId;if(null!==s&&(null!==t.sc&&t.sc.remove(s),null!==(e=t.diagram)&&n)){for(n=null,t=t.findLinksConnected(s);t.next();)s=t.value,null===n&&(n=ce()),n.push(s);if(null!==n){for(t=0;t<n.length;t++)e.remove(n[t]);It(n)}}}function iC(t,e){return null===(e=e.ig())?0:1+iC(t,e)}function rC(t,e,n,s,l,u,c){if(1<s)for(var d=n?t.ro():t.Kd();d.next();){var p=d.value;p.isTreeLink&&(null===(p=p.wo(t))||p===t||e.contains(p)||(e.add(p),rC(p,e,n,s-1,l,u,c)))}else Js(t,e,n,l,u,c)}function Js(t,e,n,s,l,u){for(var c=l===t||t.isTreeExpanded,d=n?t.ro():t.Kd();d.next();){var p=d.value;if(p.isTreeLink&&null!==(p=p.wo(t))&&p!==t){var g=e.contains(p);g||e.add(p),c&&(u&&s.vj(p,l),p.dh(),p.Ub(!1)),p.isTreeExpanded&&(p.wasTreeExpanded=p.isTreeExpanded,g||Js(p,e,n,s,l,u))}}t.isTreeExpanded=!1}function oC(t,e,n,s,l,u,c){for(var d=u!==t&&t.isTreeExpanded,p=n?t.ro():t.Kd();p.next();){var g=p.value;g.isTreeLink&&(d||g.xd||g.ab(),null!==(g=g.wo(t))&&g!==t&&!e.contains(g)&&(e.add(g),d||(g.Ub(!0),g.dh(),c&&l.xj(g,u)),2<s||g.wasTreeExpanded))&&(g.wasTreeExpanded=!1,oC(g,e,n,s-1,l,u,c))}t.isTreeExpanded=!0}ut.className="Part",ut.LayoutNone=0,ut.LayoutAdded=1,ut.LayoutRemoved=2,ut.LayoutShown=4,ut.LayoutHidden=8,ut.LayoutNodeSized=16,ut.LayoutGroupLayout=32,ut.LayoutNodeReplaced=64,ut.LayoutStandard=127,ut.LayoutAll=16777215,zt(At,ut),At.prototype.toString=function(){var t=this.adornedPart;return"Adornment("+this.category+")"+(null!==t?t.toString():"")},At.prototype.updateRelationshipsFromData=function(){},At.prototype.Rj=function(t){var e=this.adornedObject,n=e?.part;if(n instanceof z&&e instanceof Ct){e=n.path,n.Rj(t),t=e.geometry,e=(n=this.R.s).length;for(var s=0;s<e;s++){var l=n[s];l.isPanelMain&&l instanceof Ct&&(l.sa=t)}}},At.prototype.mi=function(){var t=this.me;return null===t||null===(t=t.part)||!ii(t)},At.prototype.Tc=function(){return!1},At.prototype.$j=function(t,e,n,s,l,u,c){if(t===un&&"elements"===e){if(l instanceof Di)null===this.Xa&&(this.Xa=l);else if(l instanceof $){var d=l.vl(function(p){return p instanceof Di});d instanceof Di&&null===this.Xa&&(this.Xa=d)}}else t===Me&&"elements"===e&&null!==this.Xa&&(s===this.Xa||s instanceof $&&this.Xa.jg(s))&&(this.Xa=null);ut.prototype.$j.call(this,t,e,n,s,l,u,c)},At.prototype.updateAdornments=function(){},At.prototype.Fj=function(){},St.Object.defineProperties(At.prototype,{placeholder:{get:function(){return this.Xa}},adornedObject:{get:function(){return this.me},set:function(t){var e=this.adornedPart,n=null;null!==t&&(n=t.part),null===e||null!==t&&e===n||e.Af(this.category),this.me=t,null!==n&&n.Tg(this.category,this)}},adornedPart:{get:function(){var t=this.me;return null!==t?t.part:null}},containingGroup:{get:function(){return null}}}),At.className="Adornment",qm.prototype.copy=function(){var t=new qm;return t.cq=this.cq,t.eq=this.eq,t.bj=this.bj,t.ur=this.ur,t.ap=this.ap.J(),t.Dq=this.Dq,t.lq=this.lq,t.mq=this.mq,t.dj=this.dj,t.gr=this.gr,t},zt(Z,ut),Z.prototype.cloneProtected=function(t){ut.prototype.cloneProtected.call(this,t),t.U=this.U,null!==this.ya&&(t.ya=this.ya.ic?this.ya:this.ya.copy())},(_=Z.prototype).qf=function(t){ut.prototype.qf.call(this,t),t.vd(),t.Qe=this.Qe,t.sc=null},_.ih=function(){ut.prototype.ih.call(this),null!==this.ya&&(this.ya.ic=!0)},_.uz=function(t,e,n){null==e&&(e=""),null==n&&(n=""),null!==(t=Z0(this,t,e,n))&&t.Al()},_.$j=function(t,e,n,s,l,u,c){(t===un&&"elements"===e||t===Me&&"elements"===e)&&(this.sc=null),ut.prototype.$j.call(this,t,e,n,s,l,u,c)},_.vd=function(t){for(var e=this.linksConnected;e.next();){var n=e.value;void 0!==t&&t.contains(n)||(cr(n.fromPort),cr(n.toPort),n.ab())}},_.mi=function(){return!0},Z.prototype.getAvoidableRect=function(t){return t.set(this.actualBounds),t.fo(this.avoidableMargin),t},Z.prototype.findVisibleNode=function(){for(var t=this;null!==t&&!t.isVisible();)t=t.containingGroup;return t},Z.prototype.isVisible=function(){if(!ut.prototype.isVisible.call(this))return!1;var t=!0,e=Ru,n=this.diagram;if(null!==n){if(n.animationManager.es(this))return!0;t=n.isTreePathToChildren,e=n.treeCollapsePolicy}if(e===Ru){if(null!==(t=this.ig())&&!t.isTreeExpanded)return!1}else if(e===d0){if(0<(t=t?this.xu():this.yu()).count&&t.all(function(s){return!s.isTreeExpanded}))return!1}else if(e===p0&&0<(t=t?this.xu():this.yu()).count&&t.any(function(s){return!s.isTreeExpanded}))return!1;return null===(t=this.labeledLink)||t.isVisible()},Z.prototype.Ub=function(t){ut.prototype.Ub.call(this,t);for(var e=this.linksConnected;e.next();){var n=e.value;if(t&&null!==this.containingGroup){var s=n.wo(this);null===s||s.Md(this.containingGroup)||n.ab()}n.Ub(t)}},Z.prototype.Tw=function(){var t=new Q,e=new Q;return Q0(this,this,t,e),e.iterator},Z.prototype.findLinksConnected=function(t){if(void 0===t&&(t=null),null===t)return this.jb.iterator;var e=new kn(this.jb),n=this;return e.predicate=function(s){return s.fromNode===n&&s.fromPortId===t||s.toNode===n&&s.toPortId===t},e},(_=Z.prototype).ro=function(t){void 0===t&&(t=null);var e=new kn(this.jb),n=this;return e.predicate=function(s){return s.fromNode===n&&(null===t||s.fromPortId===t)},e},_.Kd=function(t){void 0===t&&(t=null);var e=new kn(this.jb),n=this;return e.predicate=function(s){return s.toNode===n&&(null===t||s.toPortId===t)},e},_.wu=function(t){void 0===t&&(t=null);for(var e=null,n=null,s=this.jb.iterator;s.next();){var l=s.value;l.fromNode===this?(null===t||l.fromPortId===t)&&(l=l.toNode,null!==e?e.add(l):null!==n&&n!==l?((e=new Q).add(n),e.add(l)):n=l):l.toNode!==this||null!==t&&l.toPortId!==t||(l=l.fromNode,null!==e?e.add(l):null!==n&&n!==l?((e=new Q).add(n),e.add(l)):n=l)}return null!==e?e.iterator:null!==n?new An(n):jo},_.yu=function(t){void 0===t&&(t=null);for(var e=null,n=null,s=this.jb.iterator;s.next();){var l=s.value;l.fromNode!==this||null!==t&&l.fromPortId!==t||(l=l.toNode,null!==e?e.add(l):null!==n&&n!==l?((e=new Q).add(n),e.add(l)):n=l)}return null!==e?e.iterator:null!==n?new An(n):jo},_.xu=function(t){void 0===t&&(t=null);for(var e=null,n=null,s=this.jb.iterator;s.next();){var l=s.value;l.toNode!==this||null!==t&&l.toPortId!==t||(l=l.fromNode,null!==e?e.add(l):null!==n&&n!==l?((e=new Q).add(n),e.add(l)):n=l)}return null!==e?e.iterator:null!==n?new An(n):jo},_.Sy=function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=null);var s=new kn(this.jb),l=this;return s.predicate=function(u){return!((u.fromNode!==l||u.toNode!==t||null!==e&&u.fromPortId!==e||null!==n&&u.toPortId!==n)&&(u.fromNode!==t||u.toNode!==l||null!==n&&u.fromPortId!==n||null!==e&&u.toPortId!==e))},s},_.Ty=function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=null);var s=new kn(this.jb),l=this;return s.predicate=function(u){return!(u.fromNode!==l||u.toNode!==t||null!==e&&u.fromPortId!==e||null!==n&&u.toPortId!==n)},s},Z.prototype.updateRelationshipsFromData=function(){var t=this.diagram;null!==t&&t.partManager.updateRelationshipsFromData(this)},(_=Z.prototype).yo=function(t){ut.prototype.yo.call(this,t),t||(ty(this),null!==(t=this.Nk)&&nw(t,this))},_.zo=function(t){ut.prototype.zo.call(this,t),t||null!==(t=this.Nk)&&null!==t.rd&&(t.rd.remove(this),t.w())},_.Fj=function(){if(0<this.jb.count){var t=this.diagram;if(null!==t)for(var e=null===t.commandHandler||t.commandHandler.deletesConnectedLinks,n=this.jb.copy().iterator;n.next();){var s=n.value;e?t.remove(s):(s.fromNode===this&&(s.fromNode=null),s.toNode===this&&(s.toNode=null))}}this.labeledLink=null,ut.prototype.Fj.call(this)},_.Kr=function(t){if(null===this.sc){if(""===t&&!1===this.He)return this;q0(this)}var e=this.sc.I(t);return null!==e||""!==t&&null!==(e=this.sc.I(""))?e:this},_.wz=function(t){if(null===t||t===this)return!1;var e=!0,n=this.diagram;if(null!==n&&(e=n.isTreePathToChildren),n=this,e)for(;n!==t;){e=null;for(var s=n.jb.iterator;s.next();){var l=s.value;if(l.isTreeLink&&(e=l.fromNode)!==n&&e!==this)break}if(e===this||null===e||e===n)return!1;n=e}else for(;n!==t;){for(e=null,s=n.jb.iterator;s.next()&&(!(l=s.value).isTreeLink||(e=l.toNode)===n||e===this););if(e===this||null===e||e===n)return!1;n=e}return!0},_.ez=function(){var t=!0,e=this.diagram;if(null!==e&&(t=e.isTreePathToChildren),e=this,t)for(;;){t=null;for(var n=e.jb.iterator;n.next();){var s=n.value;if(s.isTreeLink&&(t=s.fromNode)!==e&&t!==this)break}if(t===this)return this;if(null===t||t===e)return e;e=t}else for(;;){for(t=null,n=e.jb.iterator;n.next()&&(!(s=n.value).isTreeLink||(t=s.toNode)===e||t===this););if(t===this)return this;if(null===t||t===e)return e;e=t}},_.Py=function(t){if(null===t)return null;if(this===t)return this;for(var e=this;null!==e;)Up(e,!0),e=e.ig();var n=null;for(e=t;null!==e;){if(0!=(1048576&e.G)){n=e;break}e=e.ig()}for(e=this;null!==e;)Up(e,!1),e=e.ig();return n},_.$g=function(){var t=!0,e=this.diagram;if(null!==e&&(t=e.isTreePathToChildren),e=this.jb.iterator,t){for(;e.next();)if((t=e.value).isTreeLink&&t.fromNode!==this)return t}else for(;e.next();)if((t=e.value).isTreeLink&&t.toNode!==this)return t;return null},_.ig=function(){var t=this.Rg;if(null===t)return null;if(t instanceof Z)return t;var e=!0;if(null!==(t=this.diagram)&&(e=t.isTreePathToChildren),t=this.jb.iterator,e){for(;t.next();)if((e=t.value).isTreeLink&&(e=e.fromNode)!==this)return this.Rg=e}else for(;t.next();)if((e=t.value).isTreeLink&&(e=e.toNode)!==this)return this.Rg=e;return this.Rg=null},_.cz=function(){var e=new Q;return function t(n,s){s.add(n);var l=n.$g();null!==l&&(s.add(l),null!==(n=n.ig())&&t(n,s))}(this,e),e},_.bz=function(){return iC(this,this)},_.to=function(){var t=!0,e=this.diagram;null!==e&&(t=e.isTreePathToChildren),e=new kn(this.jb);var n=this;return e.predicate=t?function(s){return!(!s.isTreeLink||s.fromNode!==n)}:function(s){return!(!s.isTreeLink||s.toNode!==n)},e},_.Au=function(){var t=!0,e=this.diagram;null!==e&&(t=e.isTreePathToChildren);var n=e=null,s=this.jb.iterator;if(t)for(;s.next();)(t=s.value).isTreeLink&&t.fromNode===this&&(t=t.toNode,null!==e?e.add(t):null!==n&&n!==t?((e=new tt).add(n),e.add(t)):n=t);else for(;s.next();)(t=s.value).isTreeLink&&t.toNode===this&&(t=t.fromNode,null!==e?e.add(t):null!==n&&n!==t?((e=new tt).add(n),e.add(t)):n=t);return null!==e?e.iterator:null!==n?new An(n):jo},_.dz=function(t){void 0===t&&(t=1/0);var e=new Q;return Xs(e,this,!1,t,!0),e},Z.prototype.collapseTree=function(t){void 0===t&&(t=1),1>t&&(t=1);var e=this.diagram;if(null!==e&&!e.Ie){e.Ie=!0;var n=new Q;n.add(this),rC(this,n,e.isTreePathToChildren,t,e,this,e.treeCollapsePolicy===Ru),e.Ie=!1}},Z.prototype.expandTree=function(t){void 0===t&&(t=2),2>t&&(t=2);var e=this.diagram;if(null!==e&&!e.Ie){e.Ie=!0;var n=new Q;n.add(this),oC(this,n,e.isTreePathToChildren,t,e,this,e.treeCollapsePolicy===Ru),e.Ie=!1}},St.Object.defineProperties(Z.prototype,{portSpreading:{get:function(){return null!==this.ya?this.ya.Dq:ny},set:function(t){var e=this.portSpreading;e!==t&&(Wo(this),this.ya.Dq=t,this.g("portSpreading",e,t),null!==(t=this.diagram)&&t.undoManager.isUndoingRedoing||this.vd())}},avoidable:{get:function(){return 0!=(8&this.U)},set:function(t){var e=0!=(8&this.U);if(e!==t){this.U^=8;var n=this.diagram;null!==n&&ym(n,this),this.g("avoidable",e,t)}}},avoidableMargin:{get:function(){return null!==this.ya?this.ya.ap:Xt},set:function(t){"number"==typeof t&&(t=new Ht(t));var e=this.avoidableMargin;if(!e.C(t)){t=t.J(),Wo(this),this.ya.ap=t;var n=this.diagram;null!==n&&ym(n,this),this.g("avoidableMargin",e,t)}}},linksConnected:{get:function(){return this.jb.iterator}},linkConnected:{get:function(){return null!==this.ya?this.ya.cq:null},set:function(t){var e=this.linkConnected;e!==t&&(Wo(this),this.ya.cq=t,this.g("linkConnected",e,t))}},linkDisconnected:{get:function(){return null!==this.ya?this.ya.eq:null},set:function(t){var e=this.linkDisconnected;e!==t&&(Wo(this),this.ya.eq=t,this.g("linkDisconnected",e,t))}},linkValidation:{get:function(){return null!==this.ya?this.ya.bj:null},set:function(t){var e=this.linkValidation;e!==t&&(Wo(this),this.ya.bj=t,this.g("linkValidation",e,t))}},isLinkLabel:{get:function(){return null!==this.Nk}},labeledLink:{get:function(){return this.Nk},set:function(t){var e=this.Nk;if(e!==t){var n=this.diagram,s=this.data;if(null!==e){if(null!==e.rd&&(e.rd.remove(this),e.w()),null!==n&&null!==s&&!n.undoManager.isUndoingRedoing){var l=e.data,u=n.model;if(null!==l&&u.ki()){var c=u.ua(s);void 0!==c&&u.xx(l,c)}}this.containingGroup=null}this.Nk=t,null!==t&&(nw(t,this),null===n||null===s||n.undoManager.isUndoingRedoing||(n=n.model,null!==(l=t.data)&&n.ki()&&void 0!==(s=n.ua(s))&&n.hu(l,s)),this.containingGroup=t.containingGroup),Sp(this),this.g("labeledLink",e,t)}}},port:{get:function(){return this.Kr("")}},ports:{get:function(){return null===this.sc&&q0(this),this.sc.iteratorValues}},isTreeExpanded:{get:function(){return 0!=(1&this.U)},set:function(t){var e=0!=(1&this.U);if(e!==t){this.U^=1;var n=this.diagram;if(this.g("isTreeExpanded",e,t),null!==(e=this.treeExpandedChanged)){var s=!0;null!==n&&(s=n.$,n.$=!0),e(this),null!==n&&(n.$=s)}null!==n&&n.undoManager.isUndoingRedoing?this.Ub(t):t?this.expandTree():this.collapseTree()}}},wasTreeExpanded:{get:function(){return 0!=(2&this.U)},set:function(t){var e=0!=(2&this.U);e!==t&&(this.U^=2,this.g("wasTreeExpanded",e,t))}},treeExpandedChanged:{get:function(){return null!==this.ya?this.ya.ur:null},set:function(t){var e=this.treeExpandedChanged;e!==t&&(Wo(this),this.ya.ur=t,this.g("treeExpandedChanged",e,t))}},isTreeLeaf:{get:function(){return 0!=(4&this.U)},set:function(t){var e=0!=(4&this.U);e!==t&&(this.U^=4,this.g("isTreeLeaf",e,t))}}}),Z.prototype.expandTree=Z.prototype.expandTree,Z.prototype.collapseTree=Z.prototype.collapseTree,Z.prototype.findTreeParts=Z.prototype.dz,Z.prototype.findTreeChildrenNodes=Z.prototype.Au,Z.prototype.findTreeChildrenLinks=Z.prototype.to,Z.prototype.findTreeLevel=Z.prototype.bz,Z.prototype.findTreeParentChain=Z.prototype.cz,Z.prototype.findTreeParentNode=Z.prototype.ig,Z.prototype.findTreeParentLink=Z.prototype.$g,Z.prototype.findCommonTreeParent=Z.prototype.Py,Z.prototype.findTreeRoot=Z.prototype.ez,Z.prototype.isInTreeOf=Z.prototype.wz,Z.prototype.findPort=Z.prototype.Kr,Z.prototype.findLinksTo=Z.prototype.Ty,Z.prototype.findLinksBetween=Z.prototype.Sy,Z.prototype.findNodesInto=Z.prototype.xu,Z.prototype.findNodesOutOf=Z.prototype.yu,Z.prototype.findNodesConnected=Z.prototype.wu,Z.prototype.findLinksInto=Z.prototype.Kd,Z.prototype.findLinksOutOf=Z.prototype.ro,Z.prototype.findExternalTreeLinksConnected=Z.prototype.Tw,Z.prototype.invalidateConnectedLinks=Z.prototype.vd,Z.prototype.invalidateLinkBundle=Z.prototype.uz;var sC=new K(Z,"SpreadingNone",10),ny=new K(Z,"SpreadingEvenly",11),tw=new K(Z,"SpreadingPacked",12);function wt(t,e){void 0===t||t instanceof $e||"string"==typeof t?Z.call(this,t):(Z.call(this),t&&(e=t)),this.U|=4608,this.on=new Q,this.Xa=null,this.Kc=new Lt,this.Kc.group=this,this.Vk=new Q,this.ib=this.Dp=null,e&&Object.assign(this,e)}function ew(t,e){if(t.on.add(e)){e instanceof wt&&t.Vk.add(e);var n=t.memberAdded;if(null!==n){var s=!0,l=t.diagram;null!==l&&(s=l.$,l.$=!0),n(t,e),null!==l&&(l.$=s)}t.isVisible()&&t.isSubGraphExpanded||e.Ub(!1)}e instanceof z&&!t.computesBoundsIncludingLinks||(null===(e=t.Xa)&&(e=t),e.w())}function iy(t,e){if(t.on.remove(e)){e instanceof wt&&t.Vk.remove(e);var n=t.memberRemoved;if(null!==n){var s=!0,l=t.diagram;null!==l&&(s=l.$,l.$=!0),n(t,e),null!==l&&(l.$=s)}t.isVisible()&&t.isSubGraphExpanded||e.Ub(!0)}e instanceof z&&!t.computesBoundsIncludingLinks||(null===(e=t.Xa)&&(e=t),e.w())}function aC(t,e,n,s){for(var l=t.memberParts;l.next();){var u=l.value;if(u.Ub(!1),u instanceof wt&&u.isSubGraphExpanded&&(u.wasSubGraphExpanded=u.isSubGraphExpanded,aC(u,e,n,s)),u instanceof Z)u.vd(e),n.vj(u,s);else if(u instanceof z)for(u=u.labelNodes;u.next();)u.value.vd(e)}t.isSubGraphExpanded=!1}function lC(t,e,n,s){for(var l=t.memberParts;l.next();){var u=l.value;if(u.Ub(!0),u instanceof wt&&u.wasSubGraphExpanded&&(u.wasSubGraphExpanded=!1,lC(u,e,n,s)),u instanceof Z)u.vd(e),n.xj(u,s);else if(u instanceof z)for(u=u.labelNodes;u.next();)u.value.vd(e)}t.isSubGraphExpanded=!0}function Di(t){lt.call(this),this.ub=Eh,this.Nn=new U(NaN,NaN,NaN,NaN),t&&Object.assign(this,t)}function z(t){ut.call(this,$.Link),this.Oa=8,this.Ue=null,this.Ve="",this.hf=this.Om=null,this.jf="",this.Xn=null,this.dk=di,this.wm=0,this.ym=di,this.zm=NaN,this.kj=uC,this.Sn=.5,this.rd=null,this.Jb=(new tt).freeze(),this.ef=this.Eg=null,this.bl=new U,this.sa=new X,this.u=this.m=this.If=this.Mf=null,this.Yt=new A,this.Gp=this.qw=this.pw=null,this.Ys=NaN,this.aa=null,this.j=[],t&&Object.assign(this,t)}function ee(t){var s,e=t.fromNode,n=t.toNode;if(s=null!==e?null!==n?e.Sw(n):e.containingGroup:null!==n?n.containingGroup:null,(n=t.ph)!==(e=s)){null!==n&&iy(n,t),t.ph=e,null!==e&&ew(e,t);var l=t.containingGroupChanged;if(null!==l){var u=!0,c=t.diagram;null!==c&&(u=c.$,c.$=!0),l(t,n,e),null!==c&&(c.$=u)}!t.xd||t.pw!==n&&t.qw!==n||t.ab()}if(t.isLabeledLink)for(t=t.labelNodes;t.next();)t.value.containingGroup=s}function nw(t,e){null===t.rd&&(t.rd=new Q),t.rd.add(e),t.w()}function Ma(t,e,n){if(0!==e||0!==n)if(0===t.pointsCount)t.defaultFromPoint&&t.defaultFromPoint.offset(e,n),t.defaultToPoint&&t.defaultToPoint.offset(e,n);else{for(var s=t.xd,l=new tt,u=t.Jb.iterator;u.next();){var c=u.value;l.add(new A(c.x+e,c.y+n).freeze())}l.freeze(),u=t.Jb,t.Jb=l,c=t.diagram,isNaN(e)||isNaN(n)||null!==c&&c.animationManager.zb?t.w():(t.de.h(t.de.x+e,t.de.y+n),t.pa.h(t.pa.x+e,t.pa.y+n),Sp(t)),s?ry(t):(t.defaultFromPoint&&(t.defaultFromPoint=t.i(0)),t.defaultToPoint&&(t.defaultToPoint=t.i(t.pointsCount-1))),null!==c&&c.animationManager.zb&&(e=c.animationManager,t.ef=l,e.dl.add(t)),t.g("points",u,l)}}function ry(t){0===t.Jb.count?t.xd=!1:(t.xd=!0,t.Gp=null,t.Ys=NaN,t.defaultFromPoint=t.i(0),t.defaultToPoint=t.i(t.pointsCount-1),lw(t,!1))}function iw(t,e){return Math.abs(e.x-t.x)>Math.abs(e.y-t.y)?(e.x=e.x>=t.x?t.x+9e9:t.x-9e9,e.y=t.y):(e.y=e.y>=t.y?t.y+9e9:t.y-9e9,e.x=t.x),e}function Gp(t,e){var n=e.Hn;return null===n&&((n=new rl).port=e,n.node=e.part,e.Hn=n),my(n,t)}function Hf(t){return t===Oe||.5===t.x&&.5===t.y}function $p(t){return.5===t.x&&.5===t.y?t:ht}function rw(t){if(null===t.diagram||!t.isAvoiding||!gp(t.diagram))return!1;var e=t.points.s,n=e.length;if(4>n)return!1;t=l0(t.diagram,!0,t.containingGroup,null);for(var s=1;s<n-2;s++){var l=e[s],u=e[s+1];if(!t.Pj(Math.min(l.x,u.x),Math.min(l.y,u.y),Math.abs(l.x-u.x),Math.abs(l.y-u.y)))return!0}return!1}function ow(t,e,n,s,l,u,c){var d=e.lo,p=e.ko,g=_o(e,n,s),y=n,w=s;for(0===l?y+=d:90===l?w+=p:180===l?y-=d:w-=p,l!==c&&g>il&&_o(e,y,w)!==g-1&&(_o(e,n-d,s)===g-1?(l=180,y=n-d,w=s):_o(e,n+d,s)===g-1?(l=0,y=n+d,w=s):_o(e,n,s-p)===g-1?(l=270,y=n,w=s-p):_o(e,n,s+p)===g-1&&(l=90,y=n,w=s+p));g>il&&_o(e,y,w)===g-1;)n=y,s=w,0===l?y+=d:90===l?w+=p:180===l?y-=d:w-=p,--g;u?g>il&&(180===l||0===l?n=Math.floor(n/d)*d+d/2:(90===l||270===l)&&(s=Math.floor(s/p)*p+p/2)):(n=Math.floor(n/d)*d+d/2,s=Math.floor(s/p)*p+p/2),g>il&&(u=l,c=n,y=s,0===l?(u=90,y+=p):90===l?(u=180,c-=d):180===l?(u=270,y-=p):270===l&&(u=0,c+=d),_o(e,c,y)===g-1?ow(t,e,c,y,u,!1,u):(c=n,y=s,0===l?(u=270,y-=p):90===l?(u=0,c+=d):180===l?(u=90,y+=p):270===l&&(u=180,c-=d),_o(e,c,y)===g-1&&ow(t,e,c,y,u,!1,u))),t.mf(n,s)}function sw(t,e,n,s){return t=n-t,isNaN(t)||t===1/0||t===-1/0?NaN:(0>t&&(t=-t),e=s-e,isNaN(e)||e===1/0||e===-1/0?NaN:(0>e&&(e=-e),R.ca(t,0)?e:R.ca(e,0)?t:Math.sqrt(t*t+e*e)))}function Ku(t,e,n,s){var l=t.pointsCount;if(2>l)return e;if(n){var u=t.i(1);if(0===(s=sw(e.x,e.y,n=u.x-s.x,u=u.y-s.y)))return e;l=2===l?.5*s:s,(t=t.computeShortLength(!0))>l&&(t=l),l=t*(u-e.y)/s,e.x+=t*(n-e.x)/s,e.y+=l}else{if(u=t.i(l-2),0===(s=sw(e.x,e.y,n=u.x-s.x,u=u.y-s.y)))return e;l=2===l?.5*s:s,(t=t.computeShortLength(!1))>l&&(t=l),l=t*(e.y-u)/s,e.x-=t*(e.x-n)/s,e.y-=l}return e}function oy(t,e,n,s){for(var l=t.pointsCount,u=e;R.ca(e.x,u.x)&&R.ca(e.y,u.y);){if(n>=l)return l-1;u=t.i(n++)}if(!R.ca(e.x,u.x)&&!R.ca(e.y,u.y))return n-1;for(var c=u;R.ca(e.x,u.x)&&R.ca(u.x,c.x)&&(!s||(e.y>=u.y?u.y>=c.y:u.y<=c.y))||R.ca(e.y,u.y)&&R.ca(u.y,c.y)&&(!s||(e.x>=u.x?u.x>=c.x:u.x<=c.x));){if(n>=l)return l-1;c=t.i(n++)}return n-2}function fr(t,e,n,s,l,u,c){if(!c&&tl(t)){var d=(c=t.computeJumpLength())/2,p=[],g=0;if(t.isVisible()&&(g=function lD(t,e,n,s){var l=t.diagram;if(null===l||e.C(n))return 0;for(l=l.layers;l.next();){var u=l.value;if(null!==u&&u.visible)for(var c=(u=u.Ma.s).length,d=0;d<c;d++){var p=u[d];if(p instanceof z){if(p===t)return 0<s.length&&s.sort(function(y,w){return y-w}),s.length;if(p.isVisible()&&tl(p)){var g=p.routeBounds;g.v()&&t.routeBounds.Sc(g)&&!t.usesSamePort(p)&&null!==(g=p.path)&&g.zf()&&aw(e,n,s,p)}}}}return 0<s.length&&s.sort(function(y,w){return y-w}),s.length}(t,l,u,p)),0<g)if(R.B(l.y,u.y))if(l.x<u.x)for(var y=0;y<g;){var w=Math.max(l.x,Math.min(p[y++]-d,u.x-c));e.lineTo(w+n,u.y+s);for(var C=w+n,D=Math.min(w+c,u.x);y<g&&(w=p[y])<D+c;)y++,D=Math.min(w+d,u.x);w=u.y-c+s,D+=n;var M=u.y+s;t.curve===el?xa(e,D,M,!1):Ca(e,C,w,D,w,D,M)}else for(--g;0<=g;){for(y=Math.min(l.x,Math.max(p[g--]+d,u.x+c)),e.lineTo(y+n,u.y+s),C=y+n,w=Math.max(y-c,u.x);0<=g&&(y=p[g])>w-c;)g--,w=Math.max(y-d,u.x);y=u.y-c+s,w+=n,D=u.y+s,t.curve===el?xa(e,w,D,!1):Ca(e,C,y,w,y,w,D)}else if(R.B(l.x,u.x))if(l.y<u.y)for(y=0;y<g;){for(w=Math.max(l.y,Math.min(p[y++]-d,u.y-c)),e.lineTo(u.x+n,w+s),C=w+s,w=Math.min(w+c,u.y);y<g&&(D=p[y])<w+c;)y++,w=Math.min(D+d,u.y);D=u.x-c+n,M=u.x+n,w+=s,t.curve===el?xa(e,M,w,!1):Ca(e,D,C,D,w,M,w)}else for(--g;0<=g;){for(y=Math.min(l.y,Math.max(p[g--]+d,u.y+c)),e.lineTo(u.x+n,y+s),C=y+s,y=Math.max(y-c,u.y);0<=g&&(w=p[g])>y-c;)g--,y=Math.max(w-d,u.y);w=u.x-c+n,D=u.x+n,y+=s,t.curve===el?xa(e,D,y,!1):Ca(e,w,C,w,y,D,y)}}e.lineTo(u.x+n,u.y+s)}function aw(t,e,n,s){for(var l=R.B(t.y,e.y),u=s.pointsCount,c=s.i(0),d=A.alloc(),p=1;p<u;p++){var g=s.i(p);if(p<u-1){var y=s.i(p+1);if(c.y===g.y&&g.y===y.y){if(g.x>c.x&&y.x>=g.x||g.x<c.x&&y.x<=g.x)continue}else if(c.x===g.x&&g.x===y.x&&(g.y>c.y&&y.y>=g.y||g.y<c.y&&y.y<=g.y))continue}t:{var w=t.y,C=e.x,D=e.y,M=c.x;c=c.y;var E=g.x,I=g.y;if(R.B(y=t.x,C)){if(!R.B(w,D)&&R.B(c,I)&&Math.min(w,D)<c&&Math.max(w,D)>c&&Math.min(M,E)<y&&Math.max(M,E)>y&&!R.B(M,E)){d.x=y,d.y=c,y=!0;break t}}else if(R.B(w,D)&&R.B(M,E)&&Math.min(y,C)<M&&Math.max(y,C)>M&&Math.min(c,I)<w&&Math.max(c,I)>w&&!R.B(c,I)){d.x=M,d.y=w,y=!0;break t}d.x=0,d.y=0,y=!1}y&&n.push(l?d.x:d.y),c=g}A.free(d)}function tl(t){return(t=t.curve)===Zh||t===el}function lw(t,e){(e||tl(t))&&(null===(e=t.diagram)||e.animationManager.isTicking||e.th.contains(t)||0===t.bl.width&&0===t.bl.height||e.th.add(t,t.bl.copy()))}function uD(t,e,n){if(null!==e&&e.Zl&&e.xd&&tl(e)){var s=e.routeBounds;s.v()&&(t.routeBounds.Sc(s)||n.Sc(s))&&(t.usesSamePort(e)||e.mc(!1))}}function sy(t){var e=t.Ue;if(null!==e){var n=t.hf;if(null!==n&&isNaN(t.curviness)){for(var s=t.Ve,l=t.jf,u=t=null,c=e.jb.s,d=c.length,p=0;p<d;p++){var g=c[p];(g.Ue===e&&g.Ve===s&&g.hf===n&&g.jf===l||g.Ue===n&&g.Ve===l&&g.hf===e&&g.jf===s)&&(null===u?u=g:(null===t&&(t=[]).push(u),t.push(g)))}if(null!==t){for(null===(u=Z0(e,n,s,l))&&(tC(e,u=new ct(e,s,n,l)),tC(n,u)),u.links=t,e=0;e<t.length;e++)t[e].If=u;u.Al()}}}}function ay(t){var e=t.If;null!==e&&isNaN(t.curviness)&&(t.If=null,0<=(t=e.links.indexOf(t))&&(en(e.links,t),e.Al()))}Z.className="Node",Z.SpreadingNone=sC,Z.SpreadingEvenly=ny,Z.SpreadingPacked=tw,zt(wt,Z),wt.prototype.cloneProtected=function(t){Z.prototype.cloneProtected.call(this,t),this.U=-32769&this.U;var e=t.vl(function(n){return n instanceof Di});t.Xa=e instanceof Di?e:null,null!==this.Kc?(t.Kc=this.Kc.copy(),t.Kc.group=t):(null!==t.Kc&&(t.Kc.group=null),t.Kc=null),null!==this.ib&&(t.ib=this.ib.copy())},(_=wt.prototype).qf=function(t){Z.prototype.qf.call(this,t);var e=t.Jj();for(t=t.memberParts;t.next();){var n=t.value;if(n.w(),n.D(8),n.zj(),n instanceof Z)n.vd(e);else if(n instanceof z)for(n=n.labelNodes;n.next();)n.value.vd(e)}},_.$j=function(t,e,n,s,l,u,c){if(t===un&&"elements"===e){if(l instanceof Di)null===this.Xa?this.Xa=l:this.Xa!==l&&Y("Cannot insert a second Placeholder into the visual tree of a Group.");else if(l instanceof $){var d=l.vl(function(p){return p instanceof Di});d instanceof Di&&(null===this.Xa?this.Xa=d:this.Xa!==d&&Y("Cannot insert a second Placeholder into the visual tree of a Group."))}}else t===Me&&"elements"===e&&null!==this.Xa&&(s===this.Xa||s instanceof $&&this.Xa.jg(s))&&(this.Xa=null);Z.prototype.$j.call(this,t,e,n,s,l,u,c)},_.Fl=function(t,e){Z.prototype.Fl.call(this,t,e),this.isClipping&&this.type!==$.Spot&&this.isSubGraphExpanded&&((t=this.resizeObject)instanceof $&&(t=t.vb()),null===this.ib&&(this.ib=new U),t.gi(this.ib),t instanceof Ct&&this.ib.vc(-t.strokeWidth,-t.strokeWidth))},_.Vg=function(t,e,n,s){this.af=this.Xa,Z.prototype.Vg.call(this,t,e,n,s)},_.Za=function(){var t=this;t.isSubGraphExpanded&&this.memberParts.each(function(e){!t.computesBoundsIncludingLinks&&e instanceof z||e.Za()}),Z.prototype.Za.call(this)},_.mi=function(){if(!Z.prototype.mi.call(this))return!1;for(var t=this.memberParts;t.next();){var e=t.value;if(e instanceof Z){if(e.isVisible()&&ii(e))return!1}else if(e instanceof z&&e.isVisible()&&ii(e)&&e.fromNode!==this&&e.toNode!==this)return!1}return!0},_.Fj=function(){if(0<this.on.count){var t=this.diagram;if(null!==t)for(var e=this.on.copy().iterator;e.next();)t.remove(e.value)}Z.prototype.Fj.call(this)},wt.prototype.canAddMembers=function(t){var e=this.diagram;if(null===e)return!1;for(e=e.commandHandler,t=Cp(t).iterator;t.next();)if(!e.isValidMember(this,t.value))return!1;return!0},wt.prototype.addMembers=function(t,e){var n=this.diagram;if(null===n)return!1;n=n.commandHandler;var s=!0;for(t=Cp(t).iterator;t.next();){var l=t.value;!e||n.isValidMember(this,l)?l.containingGroup=this:s=!1}return s},wt.prototype.canUngroup=function(){if(!this.ungroupable)return!1;var t=this.layer;return!(null===t||!t.allowUngroup||null!==(t=t.diagram)&&!t.allowUngroup)},(_=wt.prototype).vd=function(t){var e=0!=(65536&this.U);if(Z.prototype.vd.call(this,t),!e)for(0==(65536&this.U)&&(this.U=65536^this.U),e=this.vu();e.next();){var n=e.value;if(void 0===t||!t.contains(n)){var s=n.fromNode;(null!==s&&s!==this&&s.Md(this)&&!s.isVisible()||null!==(s=n.toNode)&&s!==this&&s.Md(this)&&!s.isVisible())&&(cr(n.fromPort),cr(n.toPort),n.ab())}}},_.vu=function(){var t=null!==this.diagram&&this.diagram.tw;if(t&&null!==this.Dp)return this.Dp.iterator;var e=this.Jj();e.add(this);for(var n=new Q,s=e.iterator;s.next();){var l=s.value;if(l instanceof Z)for(l=l.linksConnected;l.next();){var u=l.value;e.contains(u)||n.add(u)}}return t&&(this.Dp=n),n.iterator},_.Ry=function(){var t=this.Jj();t.add(this);for(var e=new Q,n=t.iterator;n.next();){var s=n.value;if(s instanceof Z)for(s=s.linksConnected;s.next();){var l=s.value,u=l.fromNode;null===u||t.contains(u)&&u!==this||e.add(u),null===(l=l.toNode)||t.contains(l)&&l!==this||e.add(l)}}return e.iterator},_.Qy=function(){var e=new Q;return function t(n,s){null!==n&&(s.add(n),t(n.containingGroup,s))}(this,e),e},_.Jj=function(){var t=new Q;return Xs(t,this,!0,0,!0),t.remove(this),t},_.Ub=function(t){Z.prototype.Ub.call(this,t);for(var e=this.memberParts;e.next();)e.value.Ub(t)},wt.prototype.collapseSubGraph=function(){var t=this.diagram;null===t||t.Ie||(t.Ie=!0,aC(this,this.Jj(),t,this),t.Ie=!1)},wt.prototype.expandSubGraph=function(){var t=this.diagram;null===t||t.Ie||(t.Ie=!0,lC(this,this.Jj(),t,this),t.Ie=!1)},wt.prototype.move=function(t,e){void 0===e&&(e=!1);var n=e?this.location:this.position,s=n.x;n=n.y;var l=t.x,u=t.y;if(!(s===l||isNaN(s)&&isNaN(l))||!(n===u||isNaN(n)&&isNaN(u))){for(s=l-(isNaN(s)?0:s),n=u-(isNaN(n)?0:n),u=A.alloc(),Z.prototype.move.call(this,t,e),t=new Q,e=this.Jj().iterator;e.next();)(l=e.value)instanceof z&&(l.suspendsRouting&&t.add(l),l.xd||l.fromNode!==this&&l.toNode!==this)&&(l.suspendsRouting=!0);for(e.reset();e.next();)if(!((l=e.value).eh()||l instanceof Z&&l.isLinkLabel)){var c=l.position,d=l.location;c.v()?(u.x=c.x+s,u.y=c.y+n,l.position=u):d.v()&&(u.x=d.x+s,u.y=d.y+n,l.location=u)}for(e.reset();e.next();)(l=e.value)instanceof z&&(l.suspendsRouting=t.contains(l),l.xd||l.fromNode!==this&&l.toNode!==this)&&(u.x=(c=l.position).x+s,u.y=c.y+n,u.v()?l.move(u):l.ab(),rw(l)&&l.ab());A.free(u)}},St.Object.defineProperties(wt.prototype,{placeholder:{get:function(){return this.Xa}},computesBoundsAfterDrag:{get:function(){return 0!=(2048&this.U)},set:function(t){var e=0!=(2048&this.U);e!==t&&(this.U^=2048,this.g("computesBoundsAfterDrag",e,t))}},computesBoundsIncludingLinks:{get:function(){return 0!=(4096&this.U)},set:function(t){var e=0!=(4096&this.U);e!==t&&(this.U^=4096,this.g("computesBoundsIncludingLinks",e,t))}},computesBoundsIncludingLocation:{get:function(){return 0!=(8192&this.U)},set:function(t){var e=0!=(8192&this.U);e!==t&&(this.U^=8192,this.g("computesBoundsIncludingLocation",e,t))}},handlesDragDropForMembers:{get:function(){return 0!=(16384&this.U)},set:function(t){var e=0!=(16384&this.U);e!==t&&(this.U^=16384,this.g("handlesDragDropForMembers",e,t))}},memberParts:{get:function(){return this.on.iterator}},layout:{get:function(){return this.Kc},set:function(t){var e=this.Kc;if(e!==t){null!==t&&null!==t.diagram&&t.diagram.layout===t&&Y("A layout cannot be both the Diagram.layout and a Group.layout: "+t),null!==e&&(e.diagram=null,e.group=null),this.Kc=t;var n=this.diagram;null!==t&&(t.diagram=n,t.group=this),null!==n&&(n.mh=!0),this.g("layout",e,t),null!==n&&n.Mb()}}},memberAdded:{get:function(){return null!==this.ya?this.ya.lq:null},set:function(t){var e=this.memberAdded;e!==t&&(Wo(this),this.ya.lq=t,this.g("memberAdded",e,t))}},memberRemoved:{get:function(){return null!==this.ya?this.ya.mq:null},set:function(t){var e=this.memberRemoved;e!==t&&(Wo(this),this.ya.mq=t,this.g("memberRemoved",e,t))}},memberValidation:{get:function(){return null!==this.ya?this.ya.dj:null},set:function(t){var e=this.memberValidation;e!==t&&(Wo(this),this.ya.dj=t,this.g("memberValidation",e,t))}},ungroupable:{get:function(){return 0!=(256&this.U)},set:function(t){var e=0!=(256&this.U);e!==t&&(this.U^=256,this.g("ungroupable",e,t))}},isSubGraphExpanded:{get:function(){return 0!=(512&this.U)},set:function(t){var e=0!=(512&this.U);if(e!==t){this.U^=512;var n=this.diagram;if(this.g("isSubGraphExpanded",e,t),null!==(e=this.subGraphExpandedChanged)){var s=!0;null!==n&&(s=n.$,n.$=!0),e(this),null!==n&&(n.$=s)}null!==n&&n.undoManager.isUndoingRedoing?(null!==this.Xa&&this.Xa.w(),this.memberParts.each(function(l){l.updateAdornments()})):t?this.expandSubGraph():this.collapseSubGraph()}}},wasSubGraphExpanded:{get:function(){return 0!=(1024&this.U)},set:function(t){var e=0!=(1024&this.U);e!==t&&(this.U^=1024,this.g("wasSubGraphExpanded",e,t))}},subGraphExpandedChanged:{get:function(){return null!==this.ya?this.ya.gr:null},set:function(t){var e=this.subGraphExpandedChanged;e!==t&&(Wo(this),this.ya.gr=t,this.g("subGraphExpandedChanged",e,t))}},gh:{get:function(){return 0!=(32768&this.U)},set:function(t){0!=(32768&this.U)!==t&&(this.U^=32768)}}}),wt.prototype.expandSubGraph=wt.prototype.expandSubGraph,wt.prototype.collapseSubGraph=wt.prototype.collapseSubGraph,wt.prototype.findSubGraphParts=wt.prototype.Jj,wt.prototype.findContainingGroupChain=wt.prototype.Qy,wt.prototype.findExternalNodesConnected=wt.prototype.Ry,wt.prototype.findExternalLinksConnected=wt.prototype.vu,wt.prototype.ensureBounds=wt.prototype.Za,wt.className="Group",zt(Di,lt),Di.prototype.cloneProtected=function(t){lt.prototype.cloneProtected.call(this,t),t.ub=this.ub.J(),t.Nn=this.Nn.copy()},Di.prototype.Xg=function(t){if(null===this.background&&null===this.areaBackground)return!1;var e=this.naturalBounds;return vr(0,0,e.width,e.height,t.x,t.y)},Di.prototype.El=function(){var t=this.part;if(null!==t&&(t instanceof wt||t instanceof At)||Y("Placeholder is not inside a Group or Adornment."),t instanceof wt){var e=this.computeBorder(this.Nn),n=this.minSize,s=this.bc;for(Ba(s,(isFinite(n.width)?Math.max(n.width,e.width):e.width)||0,(isFinite(n.height)?Math.max(n.height,e.height):e.height)||0),this.ve(0,0,s.width,s.height),s=t.memberParts,n=!1;s.next();)if(s.value.isVisible()){n=!0;break}s=t.diagram,!n||null===s||s.animationManager.Ju(t)||isNaN(e.x)||isNaN(e.y)||((n=A.alloc()).oi(e,t.locationSpot),n.C(t.location)||(t.location=n),A.free(n))}else{e=this.bc,s=(n=this.ub).left+n.right;var l=n.top+n.bottom,u=t.adornedObject;t.angle=u.fi();var c=0;u instanceof Ct&&(c=u.strokeWidth);var d=u.uf(),p=u.naturalBounds,g=(p.width+c)*d;c=(p.height+c)*d,t.type!==$.Link&&(d=u.ia("Selection"===t.category?je:t.locationSpot,A.alloc()),t.location=d,A.free(d)),isNaN(g)||isNaN(c)?(t=u.ia(je,A.alloc()),(g=U.allocAt(t.x,t.y,0,0)).Me(u.ia(xr,t)),g.Me(u.ia(wr,t)),g.Me(u.ia(Mn,t)),Ba(e,g.width+s||0,g.height+l||0),this.ve(-n.left,-n.top,e.width,e.height),A.free(t),U.free(g)):(Ba(e,g+s||0,c+l||0),this.ve(-n.left,-n.top,e.width,e.height))}},Di.prototype.Vg=function(t,e,n,s){this.actualBounds.h(t,e,n,s)},Di.prototype.computeBorder=function(t){var e=this.part,n=e.diagram;if(null!==n&&e instanceof wt&&!e.layer.isTemporary&&e.computesBoundsAfterDrag&&this.Nn.v()){var s=n.toolManager.findTool("Dragging");if(s===n.currentTool&&null!==(n=s.computeBorder(e,this.Nn,t)))return n}n=U.alloc(),s=this.computeMemberBounds(n);var l=this.ub;return e instanceof wt&&!e.isSubGraphExpanded?t.h(s.x-l.left,s.y-l.top,0,0):t.h(s.x-l.left,s.y-l.top,Math.max(s.width+l.left+l.right,0),Math.max(s.height+l.top+l.bottom,0)),U.free(n),e instanceof wt&&e.computesBoundsIncludingLocation&&e.location.v()&&t.Me(e.location),t},Di.prototype.computeMemberBounds=function(t){if(!(this.part instanceof wt))return t.h(0,0,0,0),t;for(var e=this.part,n=1/0,s=1/0,l=-1/0,u=-1/0,c=e.memberParts;c.next();){var d=c.value;if(d.isVisible()){if(d instanceof z&&(!e.computesBoundsIncludingLinks||da(d)||d.fromNode===e||d.toNode===e))continue;(d=d.actualBounds).left<n&&(n=d.left),d.top<s&&(s=d.top),d.right>l&&(l=d.right),d.bottom>u&&(u=d.bottom)}}return isFinite(n)&&isFinite(s)?t.h(n,s,l-n,u-s):t.h((e=e.location).x,e.y,0,0),t},St.Object.defineProperties(Di.prototype,{padding:{get:function(){return this.ub},set:function(t){"number"==typeof t&&(t=new Ht(t));var e=this.ub;e.C(t)||(this.ub=t=t.J(),this.g("padding",e,t),this.w())}}}),Di.className="Placeholder",zt(z,ut),z.prototype.cloneProtected=function(t){ut.prototype.cloneProtected.call(this,t),t.Oa=-113&this.Oa,t.Ve=this.Ve,t.Om=this.Om,t.jf=this.jf,t.Xn=this.Xn,t.dk=this.dk,t.wm=this.wm,t.ym=this.ym,t.zm=this.zm,t.kj=this.kj,t.Sn=this.Sn,null!==this.aa&&(t.aa=this.aa.copy())},(_=z.prototype).qf=function(t){ut.prototype.qf.call(this,t),this.Ve=t.Ve,this.jf=t.jf,t.Eg=null,t.ab(),t.If=this.If;var e=t.fromPort;null!==e&&cr(e),null!==(t=t.toPort)&&cr(t)},_.ob=function(t){t.classType===z?2==(2&t.value)?this.routing=t:t===Fi||t===el||t===Zh?this.curve=t:t===Wp||t===ly||t===uy?this.adjusting=t:t!==uC&&t!==di&&Y("Unknown Link enum value for a Link property: "+t):ut.prototype.ob.call(this,t)},_.Rc=function(){null===this.aa&&(this.aa=new Cm)},_.mi=function(){var t=this.fromNode;if(null!==t){var e=t.findVisibleNode();if(null!==e&&(t=e),ii(t)||Wl(t))return!1}return!(null!==(t=this.toNode)&&(e=t.findVisibleNode(),null!==e&&(t=e),ii(t)||Wl(t)))},_.fv=function(){return!1},_.ns=function(){},_.Tc=function(){return!1},z.prototype.computeAngle=function(t,e,n){return z.computeAngle(e,n)},z.computeAngle=function(t,e){switch(t){default:case di:t=0;break;case Kp:t=e;break;case Yp:t=e+90;break;case Gf:t=e-90;break;case uw:t=e+180;break;case Xp:90<(t=R.Eo(e))&&270>t&&(t-=180);break;case $f:90<(t=R.Eo(e+90))&&270>t&&(t-=180);break;case Qh:90<(t=R.Eo(e-90))&&270>t&&(t-=180);break;case hw:if(45<(t=R.Eo(e))&&135>t||225<t&&315>t)return 0;90<t&&270>t&&(t-=180)}return R.Eo(t)},(_=z.prototype).dh=function(){var t=this.containingGroup;null!==t&&this.fromNode!==t&&this.toNode!==t&&t.computesBoundsIncludingLinks&&ut.prototype.dh.call(this)},_.wo=function(t){var e=this.fromNode;return t===e?this.toNode:e},_.jz=function(t){var e=this.fromPort;return t===e?this.toPort:e},_.yo=function(t){if(ut.prototype.yo.call(this,t),tl(this)&&this.Ao(this.actualBounds),!t){var e=null;null!==(t=this.Ue)&&Uf(t,this,e=this.fromPort);var n=this.hf;if(null!==n){var s=this.toPort;n===t&&s===e||Uf(n,this,s)}sy(this)}},_.zo=function(t){if(ut.prototype.zo.call(this,t),tl(this)&&this.Ao(this.actualBounds),!t){var e=null;null!==(t=this.Ue)&&zp(t,this,e=this.fromPort);var n=this.hf;if(null!==n){var s=this.toPort;n===t&&s===e||zp(n,this,s)}ay(this)}},_.Fj=function(){if(this.xd=!0,null!==this.rd){var t=this.diagram;if(null!==t)for(var e=this.rd.copy().iterator;e.next();)t.remove(e.value)}null!==this.data&&null!==(t=this.diagram)&&t.partManager.removeDataForLink(this)},z.prototype.updateRelationshipsFromData=function(){if(null!==this.data){var t=this.diagram;null!==t&&t.partManager.updateRelationshipsFromData(this)}},z.prototype.move=function(t,e){var n=e?this.location:this.position,s=n.x;isNaN(s)&&(s=0);var l=n.y;for(isNaN(l)&&(l=0),s=t.x-s,l=t.y-l,!0===e?ut.prototype.move.call(this,t,!1):(t=A.allocAt(n.x+s,n.y+l),ut.prototype.move.call(this,t,!1),A.free(t)),Ma(this,s,l),t=this.labelNodes;t.next();)(e=t.value).moveTo((n=e.position).x+s,n.y+l)},z.prototype.canRelinkFrom=function(){if(!this.relinkableFrom)return!1;var t=this.layer;return null===t||!!t.allowRelink&&!(null!==(t=t.diagram)&&!t.allowRelink)},z.prototype.canRelinkTo=function(){if(!this.relinkableTo)return!1;var t=this.layer;return null===t||!!t.allowRelink&&!(null!==(t=t.diagram)&&!t.allowRelink)},z.prototype.computeMidPoint=function(t){var e=this.pointsCount;if(0===e)return t.assign(Wd),t;if(1===e)return t.assign(this.i(0)),t;if(2===e){var n=this.i(0),s=this.i(1);return t.h((n.x+s.x)/2,(n.y+s.y)/2),t}if(this.isOrthogonal&&(15<=this.computeCorner()||this.computeCurve()===Fi))return this.sa.Bu(.5,t),t.add(this.i(0)),n=this.sa.figures.first(),t.offset(-n.startX,-n.startY),t;if(this.computeCurve()===Fi){if(3===e){n=this.i(0),s=this.i(1);var l=this.i(2);return R.Gw(n.x,n.y,s.x,s.y,s.x,s.y,l.x,l.y,t),t}if(n=3*((s=(e-1)/3|0)/2|0),s%2==1){s=this.i(n),l=this.i(n+1);var u=this.i(n+2);n=this.i(n+3),R.Gw(s.x,s.y,l.x,l.y,u.x,u.y,n.x,n.y,t)}else t.assign(this.i(n));return t}var c=this.flattenedLengths;for(n=this.flattenedTotalLength,l=u=s=0;s<n/2&&u<e&&!(s+(l=c[u])>n/2);)s+=l,u++;return e=this.i(u),u=this.i(u+1),1>Math.abs(e.x-u.x)?t.h(e.x,e.y>u.y?e.y-(n/2-s):e.y+(n/2-s)):1>Math.abs(e.y-u.y)?t.h(e.x>u.x?e.x-(n/2-s):e.x+(n/2-s),e.y):t.h(e.x+(n=(n/2-s)/l)*(u.x-e.x),e.y+n*(u.y-e.y)),t},z.prototype.computeMidAngle=function(){var t=this.pointsCount;if(2>t)return NaN;if(2===t)return this.i(0).Ya(this.i(1));if(this.isOrthogonal&&(15<=this.computeCorner()||this.computeCurve()===Fi))return this.sa.Yw(.5);if(this.computeCurve()===Fi&&4<=t){var e=(t-1)/3|0,n=3*(e/2|0);if(e%2==1){n=Math.floor(n),t=this.i(n),e=this.i(n+1);var s=this.i(n+2);return n=this.i(n+3),R.ty(t.x,t.y,e.x,e.y,s.x,s.y,n.x,n.y)}if(0<n&&n+1<t)return this.i(n-1).Ya(this.i(n+1))}e=this.flattenedLengths,s=this.flattenedTotalLength;var u,l=0;for(n=0;l<s/2&&n<t&&!(l+(u=e[n])>s/2);)l+=u,n++;if(e=this.i(n),s=this.i(n+1),1>Math.abs(e.x-s.x)&&1>Math.abs(e.y-s.y)){if(0<n&&n+2<t)return this.i(n-1).Ya(this.i(n+2))}else{if(1>Math.abs(e.x-s.x))return e.y>s.y?270:90;if(1>Math.abs(e.y-s.y))return e.x>s.x?180:0}return e.Ya(s)},(_=z.prototype).i=function(t){return this.Jb.s[t]},_.Wc=function(t,e){this.Jb.Vc(t,e)},_.M=function(t,e,n){this.Jb.Vc(t,new A(e,n))},_.sz=function(t,e){this.Jb.Cb(t,e)},_.l=function(t,e,n){this.Jb.Cb(t,new A(e,n))},_.fe=function(t){this.Jb.add(t)},_.mf=function(t,e){this.Jb.add(new A(t,e))},_.Yu=function(t){this.Jb.mb(t)},_.Aj=function(){this.Jb.clear()},_.jh=function(){null===this.Eg&&(this.Eg=this.Jb,this.Jb=this.Jb.copy())},_.pf=function(){if(null!==this.Eg){for(var t=this.Eg,e=this.Jb,n=1/0,s=1/0,l=t.s,u=l.length,c=0;c<u;c++){var d=l[c];n=Math.min(d.x,n),s=Math.min(d.y,s)}d=c=1/0;for(var p=e.s,g=p.length,y=0;y<g;y++){var w=p[y];c=Math.min(w.x,c),d=Math.min(w.y,d),w.freeze()}if(e.freeze(),g===u){for(u=0;u<g;u++)if((y=l[u]).x-n!=(w=p[u]).x-c||y.y-s!=w.y-d){this.mc(!0);break}}else this.mc(!0);this.Eg=null,null!==(n=this.diagram)&&n.animationManager.zb&&(n=n.animationManager,this.ef=e,n.dl.add(this)),ry(this),this.g("points",t,e)}},_.$u=function(){null!==this.Eg&&(this.Jb=this.Eg,this.Eg=null)},_.ab=function(){if(!this.suspendsRouting){var t=this.diagram;if(t){if(t.Zr.contains(this)||t.undoManager.isUndoingRedoing||(t=t.animationManager).isTicking&&!t.isAnimating)return;null!==this.ef&&!t.isTicking&&t.isAnimating&&(this.ef=null)}null!==(t=this.path)&&(this.xd=!1,this.w(),t.w())}},_.mg=function(){if(!this.xd&&!this.computingPoints){var t=!0;try{this.computingPoints=!0,this.jh(),t=this.computePoints()}catch{this.computingPoints=!1,this.$u()}finally{this.computingPoints=!1,t?this.pf():this.$u()}}},z.prototype.computePoints=function(){if(null===this.diagram)return!1;var t=this.fromNode,e=null;if(null===t?(Jh||((Jh=new Z).desiredSize=_h,Jh.Za()),this.defaultFromPoint&&(Jh.location=this.defaultFromPoint,Jh.Za(),e=t=Jh)):e=this.fromPort,null!==e&&!t.isVisible()){var n=t.findVisibleNode();null!==n&&n!==t?(t=n,e=n.port):t=n}if(this.pw=t,null===t||!t.location.v())return!1;for(;!(null===e||e.actualBounds.v()&&e.zf());)e=e.panel;if(null===e)return!1;var s=this.toNode,l=null;if(null===s?(Yu||((Yu=new Z).desiredSize=_h,Yu.Za()),this.defaultToPoint&&(Yu.location=this.defaultToPoint,Yu.Za(),l=s=Yu)):l=this.toPort,null===l||s.isVisible()||(null!==(n=s.findVisibleNode())&&n!==s?(s=n,l=n.port):s=n),this.qw=s,null===s||!s.location.v())return!1;for(;!(null===l||l.actualBounds.v()&&l.zf());)l=l.panel;if(null===l)return!1;var u=this.pointsCount,c=this.computeSpot(!0,e);n=this.computeSpot(!1,l);var d=Hf(c),p=Hf(n),g=e===l&&null!==e,y=this.isOrthogonal,w=this.curve===Fi;this.Mf=!(!g||y)&&(w=!0);var C=this.computeAdjusting()===di||g;if(!y&&!g&&d&&p){if(d=!1,!C&&3<=u&&(C=this.getLinkPoint(t,e,c,!0,!1,s,l),p=this.getLinkPoint(s,l,n,!1,!1,t,e),d=this.adjustPoints(0,C,u-1,p))&&(C=this.getLinkPoint(t,e,c,!0,!1,s,l),p=this.getLinkPoint(s,l,n,!1,!1,t,e),this.adjustPoints(0,C,u-1,p)),!d)if(this.Aj(),w){u=this.getLinkPoint(t,e,c,!0,!1,s,l),d=(C=this.getLinkPoint(s,l,n,!1,!1,t,e)).x-u.x,p=C.y-u.y,g=this.computeCurviness(),w=y=0;var D=u.x+d/3,M=u.y+p/3,E=D,I=M;R.B(p,0)?I=0<d?I-g:I+g:(y=-d/p,w=Math.sqrt(g*g/(y*y+1)),0>g&&(w=-w),I=y*((E=(0>p?-1:1)*w+D)-D)+M);var P=D=u.x+2*d/3,k=M=u.y+2*p/3;k=R.B(p,0)?0<d?k-g:k+g:y*((P=(0>p?-1:1)*w+D)-D)+M,this.Aj(),this.fe(u),this.mf(E,I),this.mf(P,k),this.fe(C),this.Wc(0,this.getLinkPoint(t,e,c,!0,!1,s,l)),this.Wc(3,this.getLinkPoint(s,l,n,!1,!1,t,e))}else s=this.getLinkPoint(t,e,c,!0,!1,u=s,C=l),l=this.getLinkPoint(u,C,n,!1,!1,t,e),this.hasCurviness()?(C=l.x-s.x,n=l.y-s.y,c=this.computeCurviness(),u=t=s.x+C/2,d=e=s.y+n/2,R.B(n,0)?d=0<C?d-c:d+c:(C=-C/n,u=Math.sqrt(c*c/(C*C+1)),0>c&&(u=-u),d=C*((u=(0>n?-1:1)*u+t)-t)+e),this.fe(s),this.mf(u,d),this.fe(l)):(this.fe(s),this.fe(l),d=U.alloc(),e.gi(d),p=d.ba(l),C.gi(d),g=d.ba(s),(p||g)&&(c=e.ia($p(c),new A),this.Wc(0,this.getLinkPointFromPoint(t,e,c,l,!0,c)),n=C.ia($p(n),new A),this.Wc(1,this.getLinkPointFromPoint(u,C,n,s,!1,n))),U.free(d))}else{w=this.isAvoiding,C&&(y&&w||g)&&this.Aj();var b=g?this.computeCurviness():0;w=this.getLinkPoint(t,e,c,!0,y,s,l),D=E=M=0,(y||!d||g)&&(I=this.computeEndSegmentLength(t,e,c,!0),D=this.getLinkDirection(t,e,w,c,!0,y,s,l),g&&(d||c.C(n)||!y&&c.x+n.x===1&&c.y+n.y===1)&&(D-=y?90:30,0>b&&(D-=180)),0>D?D+=360:360<=D&&(D-=360),g&&(I+=Math.abs(b)*(y?1:2)),0===D?M=I:90===D?E=I:180===D?M=-I:270===D?E=-I:(M=I*Math.cos(D*Math.PI/180),E=I*Math.sin(D*Math.PI/180)),c.Fc()&&g&&(I=e.ia(ht,A.alloc()),P=A.allocAt(I.x+1e3*M,I.y+1e3*E),this.getLinkPointFromPoint(t,e,I,P,!0,w),A.free(I),A.free(P))),I=this.getLinkPoint(s,l,n,!1,y,t,e);var O=k=P=0;if(y||!p||g){var L=this.computeEndSegmentLength(s,l,n,!1);O=this.getLinkDirection(s,l,I,n,!1,y,t,e),g&&(p||c.C(n)||!y&&c.x+n.x===1&&c.y+n.y===1)&&(O+=y?0:30,0>b&&(O+=180)),0>O?O+=360:360<=O&&(O-=360),g&&(L+=Math.abs(b)*(y?1:2)),0===O?P=L:90===O?k=L:180===O?P=-L:270===O?k=-L:(P=L*Math.cos(O*Math.PI/180),k=L*Math.sin(O*Math.PI/180)),n.Fc()&&g&&(n=l.ia(ht,A.alloc()),c=A.allocAt(n.x+1e3*P,n.y+1e3*k),this.getLinkPointFromPoint(s,l,n,c,!1,I),A.free(n),A.free(c))}n=w,(y||!d||g)&&(n=new A(w.x+M,w.y+E)),c=I,(y||!p||g)&&(c=new A(I.x+P,I.y+k)),!C&&!y&&d&&3<u&&this.adjustPoints(0,w,u-2,c)?this.Wc(u-1,I):!C&&!y&&p&&3<u&&this.adjustPoints(1,n,u-1,I)?this.Wc(0,w):!C&&(y?6<=u:4<u)&&this.adjustPoints(1,n,u-2,c)?(this.Wc(0,w),this.Wc(u-1,I)):(this.Aj(),this.fe(w),(y||!d||g)&&this.fe(n),y&&this.addOrthoPoints(n,D,c,O,t,s),(y||!p||g)&&this.fe(c),this.fe(I))}return!0},z.prototype.getLinkPointFromPoint=function(t,e,n,s,l,u){if(void 0===u&&(u=new A),null===t||null===e)return u.assign(n),u;if(t.isVisible()||null!==(l=t.findVisibleNode())&&l!==t&&(e=l.port),t=null,null===(l=e.panel)||l.ke()||(l=l.panel),null===l){l=s.x,s=s.y;var c=n.x;n=n.y}else{var d=-(t=l.ge).m12*(l=1/(t.m11*t.m22-t.m12*t.m21)),p=-t.m21*l,g=t.m11*l,y=l*(t.m21*t.dy-t.m22*t.dx),w=l*(t.m12*t.dx-t.m11*t.dy);l=s.x*(c=t.m22*l)+s.y*p+y,s=s.x*d+s.y*g+w,c=n.x*c+n.y*p+y,n=n.x*d+n.y*g+w}return e.Kj(l,s,c,n,u),null!==t&&u.transform(t),u},z.prototype.getLinkPoint=function(t,e,n,s,l,u,c,d){if(void 0===d&&(d=new A),n.pb()&&!Hf(n))return e.ia(n,d),d;if(n.Uc()){var p=Gp(this,e);if(null!==p){if(d.assign(p.Co),l&&this.routing===hC){var g=Gp(this,c);if(null!==g&&p.tl<g.tl){p=A.alloc(),g=A.alloc();var y=new U(e.ia(je,p),e.ia(xr,g)),w=this.computeSpot(!s,c);t=this.getLinkPoint(u,c,w,!s,l,t,e,g),(n.xf(Fs)||n.xf(On))&&t.y>=y.y&&t.y<=y.y+y.height?d.y=t.y:(n.xf(fi)||n.xf(Ua))&&t.x>=y.x&&t.x<=y.x+y.width&&(d.x=t.x),A.free(p),A.free(g)}}return d}}return n=e.ia($p(n),A.alloc()),this.pointsCount>(l?6:2)?(c=this.i(s?1:this.pointsCount-2),l&&(c=iw(n,c.copy()))):(p=this.computeSpot(!s,c),u=A.alloc(),c=c.ia($p(p),u),l&&(c=iw(n,c)),A.free(u)),this.getLinkPointFromPoint(t,e,n,c,s,d),A.free(n),d},z.prototype.getLinkDirection=function(t,e,n,s,l,u,c,d){t:if(s.pb())var p=s.x>s.y?s.x>1-s.y?0:s.x<1-s.y?270:315:s.x<s.y?s.x>1-s.y?90:s.x<1-s.y?180:135:.5>s.x?225:.5<s.x?45:0;else{if(s.Uc()&&null!==(p=Gp(this,e)))switch(p.Gc){case 1:p=270;break t;case 2:p=180;break t;default:case 4:p=0;break t;case 8:p=90;break t}p=e.ia(ht,A.alloc()),this.pointsCount>(u?6:2)?(d=this.i(l?1:this.pointsCount-2),d=u?iw(p,d.copy()):n):(n=A.alloc(),d=d.ia(ht,n),A.free(n)),n=Math.abs(d.x-p.x)>Math.abs(d.y-p.y)?d.x>=p.x?0:180:d.y>=p.y?90:270,A.free(p),p=n}return s.Fc()&&c.Md(t)&&360<=(p+=180)&&(p-=360),Hf(s)||0===(t=e.fi())||(45<=t&&135>t?p+=90:135<=t&&225>t?p+=180:225<=t&&315>t&&(p+=270),360<=p&&(p-=360)),p},z.prototype.computeEndSegmentLength=function(t,e,n,s){return null!==e&&n.Uc()&&null!==(t=Gp(this,e))?t.tu:(t=s?this.fromEndSegmentLength:this.toEndSegmentLength,null!==e&&isNaN(t)&&(t=s?e.fromEndSegmentLength:e.toEndSegmentLength),isNaN(t)&&(t=10),t)},z.prototype.computeSpot=function(t,e){return void 0===e&&(e=null),t?null===(t=e||this.fromPort)?t=ht:((e=this.fromSpot).Sb()&&(e=t.fromSpot),t=e===Zn?Oe:e):null===(t=e||this.toPort)?t=ht:((e=this.toSpot).Sb()&&(e=t.toSpot),t=e===Zn?Oe:e),t},z.prototype.computeOtherPoint=function(t,e){return this.computeAdjusting()!==di&&4<this.pointsCount?this.computeMidPoint(new A):null!==(t=null!==(t=e.Hn)?my(t,this):null)?t.Co:e.ia(ht)},z.prototype.computeShortLength=function(t){if(t){if(t=this.fromShortLength,isNaN(t)){var e=this.fromPort;null!==e&&(t=e.fromShortLength)}return isNaN(t)?0:t}return t=this.toShortLength,isNaN(t)&&null!==(e=this.toPort)&&(t=e.toShortLength),isNaN(t)?0:t},z.prototype.tf=function(t,e,n,s,l,u){if(!1===this.pickable)return!1;void 0===e&&(e=null),void 0===n&&(n=null);var c=u;if(void 0===u&&(c=Dt.alloc()).reset(),c.multiply(this.transform),this.Wg(t,c))return A0(this,e,n,l),void 0===u&&Dt.free(c),!0;if(this.Sc(t,c)){var d=!1;if(!this.isAtomic)for(var p=this.R.s,g=p.length;g--;){var y=p[g];if(y.visible||y===this.locationObject){var w=y.actualBounds,C=this.naturalBounds;if(!(w.x>C.width||w.y>C.height||0>w.x+w.width||0>w.y+w.height)){if((w=Dt.alloc()).set(c),y instanceof $)d=y.tf(t,e,n,s,l,w);else if(this.path===y){if(y instanceof Ct)if(d=t,C=s,!1===y.pickable)d=!1;else if(w.multiply(y.transform),C)t:{var D=d,M=w;if(y.Wg(D,M))d=!0;else{if(void 0===M&&(M=y.transform,D.Ee(y.actualBounds))){d=!0;break t}d=D.left,C=D.right;var E=D.top;D=D.bottom;var I=A.alloc(),P=A.alloc(),k=A.alloc(),b=Dt.alloc();b.set(M),b.Ou(y.transform),b.Tr(),P.x=C,P.y=E,P.transform(b),I.x=d,I.y=E,I.transform(b),M=!1,Za(y,I,P,k)?M=!0:(I.x=C,I.y=D,I.transform(b),Za(y,I,P,k)?M=!0:(P.x=d,P.y=D,P.transform(b),Za(y,I,P,k)?M=!0:(I.x=d,I.y=E,I.transform(b),Za(y,I,P,k)&&(M=!0)))),Dt.free(b),A.free(I),A.free(P),A.free(k),d=M}}else d=y.Wg(d,w)}else d=k1(y,t,s,w);d&&(C=y,null!==e&&(C=e(y)),C&&(null===n||n(C))&&l.add(C)),Dt.free(w)}}}return void 0===u&&Dt.free(c),d||null!==this.background||null!==this.areaBackground}return void 0===u&&Dt.free(c),!1},z.prototype.computeCurve=function(){if(null===this.Mf){var t=this.fromPort;this.Mf=null!==t&&t===this.toPort&&!this.isOrthogonal}return this.Mf?Fi:this.curve},z.prototype.computeCorner=function(){if(this.curve===Fi)return 0;var t=this.corner;return(isNaN(t)||0>t)&&(t=10),t},z.prototype.findMidLabel=function(){for(var t=this.path,e=this.R.s,n=e.length,s=0;s<n;s++){var l=e[s];if(l!==t&&!l.isPanelMain&&(l.segmentIndex===-1/0||isNaN(l.segmentIndex)))return l}for(t=this.labelNodes;t.next();)if((e=t.value).segmentIndex===-1/0||isNaN(e.segmentIndex))return e;return null},z.prototype.computeSpacing=function(){if(!this.isVisible())return 0;var t=cC;t=Math.max(t,this.computeThickness());var e=this.fromPort,n=this.toPort;if(null!==e&&null!==n){var s=this.findMidLabel();if(null!==s){var l=s.naturalBounds,u=s.margin,c=isNaN(l.width)?30:l.width*s.scale+u.left+u.right;l=isNaN(l.height)?14:l.height*s.scale+u.top+u.bottom,(s=s.segmentOrientation)===Kp||s===Xp||s===uw?t=Math.max(t,l):s===Gf||s===Qh||s===Yp||s===$f?t=Math.max(t,c):(e=e.ia(ht).Ya(n.ia(ht))/180*Math.PI,t=Math.max(t,Math.abs(Math.sin(e)*c)+Math.abs(Math.cos(e)*l)+1)),this.curve===Fi&&(t*=1.333)}}return t},z.prototype.arrangeBundledLinks=function(t,e){if(e)for(e=0;e<t.length;e++){var n=t[e];n.computeAdjusting()===di&&n.ab()}},z.prototype.computeCurviness=function(){var t=this.curviness;if(isNaN(t)){t=hy;var e=this.If;if(null!==e){for(var n=ce(),s=0,l=e.links,u=0;u<l.length;u++){var c=l[u].computeSpacing();n.push(c),s+=c}for(s=-s/2,u=0;u<l.length;u++){if(l[u]===this){t=s+n[u]/2;break}s+=n[u]}e.cs===this.fromNode&&(t=-t),It(n)}}return t},z.prototype.computeThickness=function(){if(!this.isVisible())return 0;var t=this.path;return null!==t?Math.max(t.strokeWidth,1):1},z.prototype.hasCurviness=function(){return!isNaN(this.curviness)||null!==this.If},z.prototype.adjustPoints=function(t,e,n,s){var l=this.computeAdjusting();if(this.isOrthogonal){if(l===ly)return!1;l===uy&&(l=Wp)}switch(l){case ly:var u=this.i(t),c=this.i(n);if(!u.$a(e)||!c.$a(s)){var d=c.x-(l=u.x),p=c.y-(u=u.y),g=Math.sqrt(d*d+p*p);if(!R.ca(g,0)){if(R.ca(d,0))var y=0>p?-Math.PI/2:Math.PI/2;else y=Math.atan(p/Math.abs(d)),0>d&&(y=Math.PI-y);var w=e.y;d=s.x-(c=e.x);var C=s.y-w;for(p=Math.sqrt(d*d+C*C),R.ca(d,0)?C=0>C?-Math.PI/2:Math.PI/2:(C=Math.atan(C/Math.abs(d)),0>d&&(C=Math.PI-C)),g=p/g,y=C-y,this.Wc(t,e),t+=1;t<n;t++)d=(e=this.i(t)).x-l,p=e.y-u,e=Math.sqrt(d*d+p*p),R.ca(e,0)||(R.ca(d,0)?p=0>p?-Math.PI/2:Math.PI/2:(p=Math.atan(p/Math.abs(d)),0>d&&(p=Math.PI-p)),d=p+y,this.M(t,c+(e*=g)*Math.cos(d),w+e*Math.sin(d)));this.Wc(n,s)}}return!0;case uy:if(u=this.i(t),w=this.i(n),!u.$a(e)||!w.$a(s)){g=((c=w.x)-(l=u.x))*(c-l)+((w=w.y)-(u=u.y))*(w-u),y=e.y,C=s.y;var D=1;if((p=s.x)-(d=e.x)!=0){var M=(C-y)/(p-d);D=Math.sqrt(1+1/(M*M))}else M=9e9;for(this.Wc(t,e),t+=1;t<n;t++){var E=(e=this.i(t)).x,I=e.y,P=.5;0!==g&&(P=((l-E)*(l-c)+(u-I)*(u-w))/g);var k=l+P*(c-l),b=u+P*(w-u);e=Math.sqrt((E-k)*(E-k)+(I-b)*(I-b)),I<M*(E-k)+b&&(e=-e),0<M&&(e=-e),E=d+P*(p-d),P=y+P*(C-y),0!==M?this.M(t,e=E+e/D,P-(e-E)/M):this.M(t,E,P+e)}this.Wc(n,s)}return!0;case Wp:return this.isOrthogonal&&(l=this.i(t),u=this.i(t+1),c=this.i(t+2),w=d=u.x,g=y=u.y,R.B(l.y,u.y)?R.B(u.x,c.x)?y=e.y:R.B(u.y,c.y)&&(d=e.x):R.B(l.x,u.x)&&(R.B(u.y,c.y)?d=e.x:R.B(u.x,c.x)&&(y=e.y)),this.M(t+1,d,y),l=this.i(n),u=this.i(n-1),c=this.i(n-2),p=d=u.x,C=y=u.y,R.B(l.y,u.y)?R.B(u.x,c.x)?y=s.y:R.B(u.y,c.y)&&(d=s.x):R.B(l.x,u.x)&&(R.B(u.y,c.y)?d=s.x:R.B(u.x,c.x)&&(y=s.y)),this.M(n-1,d,y),rw(this))?(this.M(t+1,w,g),this.M(n-1,p,C),n=!1):(this.Wc(t,e),this.Wc(n,s),n=!0),n;default:return!1}},z.prototype.addOrthoPoints=function(t,e,n,s,l,u){0>e?e+=360:360<=e&&(e-=360),0>s?s+=360:360<=s&&(s-=360);var c=s;e=315<=e||45>e?0:45<=e&&135>e?90:135<=e&&225>e?180:270,s=315<=s||45>s?0:45<=s&&135>s?90:135<=s&&225>s?180:270;var d=l.actualBounds.copy(),p=u.actualBounds.copy();if(d.v()&&p.v()){d.vc(cy,cy),p.vc(cy,cy),d.Me(t),p.Me(n);var g=A.alloc(),y=A.alloc();0===e?n.x>t.x||270===s&&n.y<t.y&&p.right>t.x||90===s&&n.y>t.y&&p.right>t.x?(g.h(n.x,t.y),y.h(n.x,(t.y+n.y)/2),180===s?(g.x=this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!1),y.x=g.x,y.y=n.y):270===s&&n.y<t.y||90===s&&n.y>t.y?(g.x=t.x<p.left?this.computeMidOrthoPosition(t.x,t.y,p.left,n.y,!1):t.x<p.right&&(270===s&&t.y<p.top||90===s&&t.y>p.bottom)?this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!1):p.right,y.x=g.x,y.y=n.y):0===s&&t.x<p.left&&t.y>p.top&&t.y<p.bottom&&(g.x=t.x,g.y=t.y<n.y?Math.min(n.y,p.top):Math.max(n.y,p.bottom),y.y=g.y)):(g.h(t.x,n.y),y.h((t.x+n.x)/2,n.y),(180===s||90===s&&n.y<d.top||270===s&&n.y>d.bottom)&&(180===s&&(p.ba(t)||d.ba(n))?g.y=this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!0):n.y<t.y&&(180===s||90===s)?g.y=this.computeMidOrthoPosition(t.x,d.top,n.x,Math.max(n.y,p.bottom),!0):n.y>t.y&&(180===s||270===s)&&(g.y=this.computeMidOrthoPosition(t.x,d.bottom,n.x,Math.min(n.y,p.top),!0)),y.x=n.x,y.y=g.y),g.y>d.top&&g.y<d.bottom&&(n.x>=d.left&&n.x<=t.x||t.x<=p.right&&t.x>=n.x?(90===s||270===s)&&(g.h(Math.max((t.x+n.x)/2,t.x),t.y),y.h(g.x,n.y)):(g.y=270===s||(0===s||180===s)&&n.y<t.y?Math.min(n.y,0===s?d.top:Math.min(d.top,p.top)):Math.max(n.y,0===s?d.bottom:Math.max(d.bottom,p.bottom)),y.x=n.x,y.y=g.y))):180===e?n.x<t.x||270===s&&n.y<t.y&&p.left<t.x||90===s&&n.y>t.y&&p.left<t.x?(g.h(n.x,t.y),y.h(n.x,(t.y+n.y)/2),0===s?(g.x=this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!1),y.x=g.x,y.y=n.y):270===s&&n.y<t.y||90===s&&n.y>t.y?(g.x=t.x>p.right?this.computeMidOrthoPosition(t.x,t.y,p.right,n.y,!1):t.x>p.left&&(270===s&&t.y<p.top||90===s&&t.y>p.bottom)?this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!1):p.left,y.x=g.x,y.y=n.y):180===s&&t.x>p.right&&t.y>p.top&&t.y<p.bottom&&(g.x=t.x,g.y=t.y<n.y?Math.min(n.y,p.top):Math.max(n.y,p.bottom),y.y=g.y)):(g.h(t.x,n.y),y.h((t.x+n.x)/2,n.y),(0===s||90===s&&n.y<d.top||270===s&&n.y>d.bottom)&&(0===s&&(p.ba(t)||d.ba(n))?g.y=this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!0):n.y<t.y&&(0===s||90===s)?g.y=this.computeMidOrthoPosition(t.x,d.top,n.x,Math.max(n.y,p.bottom),!0):n.y>t.y&&(0===s||270===s)&&(g.y=this.computeMidOrthoPosition(t.x,d.bottom,n.x,Math.min(n.y,p.top),!0)),y.x=n.x,y.y=g.y),g.y>d.top&&g.y<d.bottom&&(n.x<=d.right&&n.x>=t.x||t.x>=p.left&&t.x<=n.x?(90===s||270===s)&&(g.h(Math.min((t.x+n.x)/2,t.x),t.y),y.h(g.x,n.y)):(g.y=270===s||(0===s||180===s)&&n.y<t.y?Math.min(n.y,180===s?d.top:Math.min(d.top,p.top)):Math.max(n.y,180===s?d.bottom:Math.max(d.bottom,p.bottom)),y.x=n.x,y.y=g.y))):90===e?n.y>t.y||180===s&&n.x<t.x&&p.bottom>t.y||0===s&&n.x>t.x&&p.bottom>t.y?(g.h(t.x,n.y),y.h((t.x+n.x)/2,n.y),270===s?(g.y=this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!0),y.x=n.x,y.y=g.y):180===s&&n.x<t.x||0===s&&n.x>t.x?(g.y=t.y<p.top?this.computeMidOrthoPosition(t.x,t.y,n.x,p.top,!0):t.y<p.bottom&&(180===s&&t.x<p.left||0===s&&t.x>p.right)?this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!0):p.bottom,y.x=n.x,y.y=g.y):90===s&&t.y<p.top&&t.x>p.left&&t.x<p.right&&(g.x=t.x<n.x?Math.min(n.x,p.left):Math.max(n.x,p.right),g.y=t.y,y.x=g.x)):(g.h(n.x,t.y),y.h(n.x,(t.y+n.y)/2),(270===s||0===s&&n.x<d.left||180===s&&n.x>d.right)&&(270===s&&(p.ba(t)||d.ba(n))?g.x=this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!1):n.x<t.x&&(270===s||0===s)?g.x=this.computeMidOrthoPosition(d.left,t.y,Math.max(n.x,p.right),n.y,!1):n.x>t.x&&(270===s||180===s)&&(g.x=this.computeMidOrthoPosition(d.right,t.y,Math.min(n.x,p.left),n.y,!1)),y.x=g.x,y.y=n.y),g.x>d.left&&g.x<d.right&&(n.y>=d.top&&n.y<=t.y||t.y<=p.bottom&&t.y>=n.y?(0===s||180===s)&&(g.h(t.x,Math.max((t.y+n.y)/2,t.y)),y.h(n.x,g.y)):(g.x=180===s||(90===s||270===s)&&n.x<t.x?Math.min(n.x,90===s?d.left:Math.min(d.left,p.left)):Math.max(n.x,90===s?d.right:Math.max(d.right,p.right)),y.x=g.x,y.y=n.y))):n.y<t.y||180===s&&n.x<t.x&&p.top<t.y||0===s&&n.x>t.x&&p.top<t.y?(g.h(t.x,n.y),y.h((t.x+n.x)/2,n.y),90===s?(g.y=this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!0),y.x=n.x,y.y=g.y):180===s&&n.x<t.x||0===s&&n.x>=t.x?(g.y=t.y>p.bottom?this.computeMidOrthoPosition(t.x,t.y,n.x,p.bottom,!0):t.y>p.top&&(180===s&&t.x<p.left||0===s&&t.x>p.right)?this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!0):p.top,y.x=n.x,y.y=g.y):270===s&&t.y>p.bottom&&t.x>p.left&&t.x<p.right&&(g.x=t.x<n.x?Math.min(n.x,p.left):Math.max(n.x,p.right),g.y=t.y,y.x=g.x)):(g.h(n.x,t.y),y.h(n.x,(t.y+n.y)/2),(90===s||0===s&&n.x<d.left||180===s&&n.x>d.right)&&(90===s&&(p.ba(t)||d.ba(n))?g.x=this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!1):n.x<t.x&&(90===s||0===s)?g.x=this.computeMidOrthoPosition(d.left,t.y,Math.max(n.x,p.right),n.y,!1):n.x>t.x&&(90===s||180===s)&&(g.x=this.computeMidOrthoPosition(d.right,t.y,Math.min(n.x,p.left),n.y,!1)),y.x=g.x,y.y=n.y),g.x>d.left&&g.x<d.right&&(n.y<=d.bottom&&n.y>=t.y||t.y>=p.top&&t.y<=n.y?(0===s||180===s)&&(g.h(t.x,Math.min((t.y+n.y)/2,t.y)),y.h(n.x,g.y)):(g.x=180===s||(90===s||270===s)&&n.x<t.x?Math.min(n.x,270===s?d.left:Math.min(d.left,p.left)):Math.max(n.x,270===s?d.right:Math.max(d.right,p.right)),y.x=g.x,y.y=n.y)));var w=n;if(this.isAvoiding){var C=this.diagram;if(null===C||l===u||this.layer.isTemporary||!gp(C)||d.ba(w)&&!u.Md(l)||p.ba(t)&&!l.Md(u))e=!1;else{var D=l0(C,!0,this.containingGroup,null);if(17!==this.segmentIndex&&D.Pj(Math.min(t.x,g.x),Math.min(t.y,g.y),Math.abs(t.x-g.x),Math.abs(t.y-g.y))&&D.Pj(Math.min(g.x,y.x),Math.min(g.y,y.y),Math.abs(g.x-y.x),Math.abs(g.y-y.y))&&D.Pj(Math.min(y.x,w.x),Math.min(y.y,w.y),Math.abs(y.x-w.x),Math.abs(y.y-w.y)))e=!1;else{l=t,u=w;var M=n=null;if(C.isVirtualized){(C=D.bounds.copy()).vc(-D.lo,-D.ko);var E=A.alloc();tc(D,t.x,t.y)||(R.wf(C.x,C.y,C.x+C.width,C.y+C.height,t.x,t.y,g.x,g.y,E)?(n=t=E.copy(),e=E.Ya(g)):R.wf(C.x,C.y,C.x+C.width,C.y+C.height,g.x,g.y,y.x,y.y,E)?(n=t=E.copy(),e=E.Ya(y)):R.wf(C.x,C.y,C.x+C.width,C.y+C.height,y.x,y.y,w.x,w.y,E)&&(n=t=E.copy(),e=E.Ya(w))),tc(D,w.x,w.y)||(R.wf(C.x,C.y,C.x+C.width,C.y+C.height,w.x,w.y,y.x,y.y,E)?(M=w=E.copy(),s=y.Ya(E)):R.wf(C.x,C.y,C.x+C.width,C.y+C.height,y.x,y.y,g.x,g.y,E)?(M=w=E.copy(),s=g.Ya(E)):R.wf(C.x,C.y,C.x+C.width,C.y+C.height,g.x,g.y,t.x,t.y,E)&&(M=w=E.copy(),s=t.Ya(E))),A.free(E)}(d=d.copy().Xc(p)).vc(D.lo*D.ps,D.ko*D.ps),nl(D,t,e,w,s,d,!0),p=_o(D,w.x,w.y),!D.abort&&p>=Jp&&(Zs(D),d.vc(D.lo*D.mx,D.ko*D.nx),nl(D,t,e,w,s,d,!1),p=_o(D,w.x,w.y)),!D.abort&&p<Jp&&_o(D,w.x,w.y)!==Sa?(ow(this,D,w.x,w.y,s,!0,c),d=this.i(2),4>this.pointsCount?(0===e||180===e?(d.x=t.x,d.y=w.y):(d.x=w.x,d.y=t.y),this.M(2,d.x,d.y),this.l(3,d.x,d.y)):(c=this.i(3),0===e||180===e?R.B(d.x,c.x)?(d=0===e?Math.max(d.x,t.x):Math.min(d.x,t.x),this.M(2,d,t.y),this.M(3,d,c.y)):R.B(d.y,c.y)?(Math.abs(t.y-d.y)<=D.ko/2&&(this.M(2,d.x,t.y),this.M(3,c.x,t.y)),this.l(2,d.x,t.y)):this.M(2,t.x,d.y):(90===e||270===e)&&(R.B(d.y,c.y)?(d=90===e?Math.max(d.y,t.y):Math.min(d.y,t.y),this.M(2,t.x,d),this.M(3,c.x,d)):R.B(d.x,c.x)?(Math.abs(t.x-d.x)<=D.lo/2&&(this.M(2,t.x,d.y),this.M(3,t.x,c.y)),this.l(2,t.x,d.y)):this.M(2,d.x,t.y))),null!==n&&(t=this.i(1),c=this.i(2),t.x!==c.x&&t.y!==c.y?0===e||180===e?this.l(2,t.x,c.y):this.l(2,c.x,t.y):0===e||180===e?this.l(2,l.x,n.y):this.l(2,n.x,l.y)),null!==M&&(0===s||180===s?this.mf(u.x,M.y):this.mf(M.x,u.y)),e=!0):e=!1}}}else e=!1;e||(this.fe(g.copy()),this.fe(y.copy())),A.free(g),A.free(y)}},z.prototype.computeMidOrthoPosition=function(t,e,n,s,l){var u=0;return!this.hasCurviness()||this.computeSpot(!0,this.fromPort).Uc()||this.computeSpot(!1,this.toPort).Uc()||(u=this.computeCurviness()),l?(e+s)/2+u:(t+n)/2+u},z.prototype.Ny=function(t){var e=t.x;t=t.y;for(var n=this.i(0),s=this.i(1),l=ni(e,t,n.x,n.y,s.x,s.y),u=0,c=1;c<this.pointsCount-1;c++){n=this.i(c+1);var d=ni(e,t,s.x,s.y,n.x,n.y);s=n,d<l&&(u=c,l=d)}return u},z.prototype.mc=function(t){this.Zl=!1,t&&this.w()},z.prototype.Rj=function(t){if((t||!1!==this.xd&&(t=this.vb(),!this.Zl||null!==t&&null===t.geometry))&&(this.sa=this.makeGeometry(),null!==(t=this.path))){t.sa=this.sa;for(var e=this.R.s,n=e.length,s=0;s<n;s++){var l=e[s];l!==t&&l.isPanelMain&&l instanceof Ct&&(l.sa=this.sa)}}},z.prototype.makeGeometry=function(){var t=this.sa,e=this.pointsCount;if(2>e)return t.type=X.j,this.Zl=!0,t;var n=!1,s=this.diagram;null!==s&&tl(this)&&s.th.contains(this)&&(0!==this.bl.width||0!==this.bl.height)&&(n=!0);var l=this.i(0).copy(),u=l.copy();s=this.Jb.s;var c=this.computeCurve();if(c===Fi&&3<=e&&!R.ca(this.smoothness,0))if(3===e){var d=this.i(1);s=Math.min(l.x,d.x);var p=Math.min(l.y,d.y);d=this.i(2),s=Math.min(s,d.x),p=Math.min(p,d.y)}else{if(this.isOrthogonal)for(p=0;p<e;p++)d=s[p],u.x=Math.min(d.x,u.x),u.y=Math.min(d.y,u.y);else for(s=3;s<e;s+=3)s+3>=e&&(s=e-1),p=this.i(s),u.x=Math.min(p.x,u.x),u.y=Math.min(p.y,u.y);s=u.x,p=u.y}else{for(p=0;p<e;p++)d=s[p],u.x=Math.min(d.x,u.x),u.y=Math.min(d.y,u.y);s=u.x,p=u.y}if(p-=this.Yt.y,l.x-=s-=this.Yt.x,l.y-=p,2!==e||tl(this)){if(t.type=X.m,d=q1(t),0!==this.computeShortLength(!0)&&(l=Ku(this,l,!0,u)),xa(d,l.x,l.y,!1),c===Fi&&3<=e&&!R.ca(this.smoothness,0))if(3===e)e=(n=this.i(1)).x-s,n=n.y-p,(l=this.i(2).copy()).x-=s,l.y-=p,0!==this.computeShortLength(!1)&&(l=Ku(this,l,!1,u)),Ca(d,e,n,e,n,l.x,l.y);else if(this.isOrthogonal){e=A.allocAt(s,p),(n=A.alloc()).assign(this.i(1)),u=A.allocAt(s,p),l=A.allocAt(s,p),c=this.i(0);for(var g,y=this.smoothness/3,w=1;w<this.pointsCount-1;w++){var C=c,D=g=this.i(w),M=this.i(oy(this,g,w,!1));if(!(R.ca(C.x,D.x)&&R.ca(D.x,M.x)||R.ca(C.y,D.y)&&R.ca(D.y,M.y))){var E=y;isNaN(E)&&(E=this.smoothness/3);var I=C.x,P=D.x,k=M.x;M=M.y;var b=E*sw(I,C=C.y,P,D=D.y);E*=sw(P,D,k,M),R.ca(C,D)&&R.ca(P,k)&&(P>I?M>D?(u.x=P-b,u.y=D-b,l.x=P+E,l.y=D+E):(u.x=P-b,u.y=D+b,l.x=P+E,l.y=D-E):M>D?(u.x=P+b,u.y=D-b,l.x=P-E,l.y=D+E):(u.x=P+b,u.y=D+b,l.x=P-E,l.y=D-E)),R.ca(I,P)&&R.ca(D,M)&&(D>C?(k>P?(u.x=P-b,u.y=D-b,l.x=P+E):(u.x=P+b,u.y=D-b,l.x=P-E),l.y=D+E):(k>P?(u.x=P-b,u.y=D+b,l.x=P+E):(u.x=P+b,u.y=D+b,l.x=P-E),l.y=D-E)),(R.ca(I,P)&&R.ca(P,k)||R.ca(C,D)&&R.ca(D,M))&&(C=.5*(C+M),u.x=I=.5*(I+k),u.y=C,l.x=I,l.y=C),(1===w||2===w&&R.ca(c.x,this.i(0).x)&&R.ca(c.y,this.i(0).y))&&(n.x=.5*(c.x+g.x),n.y=.5*(c.y+g.y)),Ca(d,n.x-s,n.y-p,u.x-s,u.y-p,g.x-s,g.y-p),e.set(u),n.set(l),c=g}}g=c.x,c=c.y,y=this.i(this.pointsCount-1),0!==this.computeShortLength(!1)&&(y=Ku(this,y.copy(),!1,Va)),Ca(d,l.x-s,l.y-p,(g=.5*(g+y.x))-s,(c=.5*(c+y.y))-p,y.x-s,y.y-p),A.free(e),A.free(n),A.free(u),A.free(l)}else for(n=3;n<e;n+=3)u=this.i(n-2),n+3>=e&&(n=e-1),l=this.i(n-1),c=this.i(n),n===e-1&&0!==this.computeShortLength(!1)&&(c=Ku(this,c.copy(),!1,Va)),Ca(d,u.x-s,u.y-p,l.x-s,l.y-p,c.x-s,c.y-p);else{for((u=A.alloc()).assign(this.i(0)),(l=A.alloc()).assign(u),c=this.computeCorner(),w=1,g=0;w<e;){if(w=oy(this,u,w,1<w),y=this.i(w),w>=e-1){if(u.C(y)){if(0===g)for(w=1;w<e;)l.assign(u),fr(this,d,-s,-p,u,y=this.i(w++),n),u.assign(y)}else 0!==this.computeShortLength(!1)&&(y=Ku(this,y.copy(),!1,Va)),fr(this,d,-s,-p,u,y,n);break}if(g=oy(this,y,w+1,w<e-3),w=-s,I=-p,C=y,P=this.i(g),E=n,R.B(u.y,C.y)&&R.B(C.x,P.x))if(M=Math.min(c,Math.abs(C.x-l.x)/2),M=b=Math.min(M,Math.abs(P.y-C.y)/2),R.B(M,0))fr(this,d,w,I,u,C,E),u.assign(C);else{var O=C.x,L=C.y;D=O,k=L,k=P.y>C.y?C.y+b:C.y-b,fr(this,d,w,I,u,P=A.allocAt(O=C.x>u.x?C.x-M:C.x+M,L),E),A.free(P),Wm(d,C.x+w,C.y+I,D+w,k+I),u.h(D,k)}else R.B(u.x,C.x)&&R.B(C.y,P.y)?(M=Math.min(c,Math.abs(C.y-l.y)/2),M=b=Math.min(M,Math.abs(P.x-C.x)/2),R.B(b,0)?(fr(this,d,w,I,u,C,E),u.assign(C)):(D=O=C.x,k=L=C.y,D=P.x>C.x?C.x+b:C.x-b,fr(this,d,w,I,u,P=A.allocAt(O,L=C.y>u.y?C.y-M:C.y+M),E),A.free(P),Wm(d,C.x+w,C.y+I,D+w,k+I),u.h(D,k))):(fr(this,d,w,I,u,C,E),u.assign(C));l.assign(y),w=g}A.free(u)}Km=d}else(d=this.i(1).copy()).x-=s,d.y-=p,0!==this.computeShortLength(!0)&&(l=Ku(this,l,!0,u)),0!==this.computeShortLength(!1)&&(d=Ku(this,d,!1,u)),t.type=X.j,t.startX=l.x,t.startY=l.y,t.endX=d.x,t.endY=d.y;return this.Zl=!0,t},z.prototype.computeJumpLength=function(){return 10},z.prototype.Ao=function(t){var e=this.layer;if(null!==e&&e.visible&&!e.isTemporary){var n=e.diagram;if(null!==n&&!n.animationManager.isTicking){var s=!1;for(n=n.layers;n.next();){var l=n.value;if(l.visible)if(l===e){s=!0;for(var u=!1,c=(l=l.Ma.s).length,d=0;d<c;d++){var p=l[d];p instanceof z&&(p===this?u=!0:u&&uD(this,p,t))}}else if(s)for(l=(u=l.Ma.s).length,c=0;c<l;c++)(d=u[c])instanceof z&&uD(this,d,t)}}}},z.prototype.usesSamePort=function(t){var e=this.pointsCount,n=t.pointsCount;if(0<e&&0<n){var s=this.i(0),l=t.i(0);if(s.$a(l)||(e=this.i(e-1),t=t.i(n-1),e.$a(t)||s.$a(t)||e.$a(l)))return!0}else if(this.fromNode===t.fromNode||this.toNode===t.toNode||this.fromNode===t.toNode||this.toNode===t.fromNode)return!0;return!1},z.prototype.isVisible=function(){if(!ut.prototype.isVisible.call(this))return!1;var t=this.containingGroup,e=!0,n=this.diagram;if(null!==n&&(e=n.isTreePathToChildren),null!==(n=this.fromNode)){if(this.isTreeLink&&e&&!n.isTreeExpanded)return!1;if(n===t)return!0;for(var s=n;null!==s;){if(s.labeledLink===this)return!0;s=s.containingGroup}if(null===(n=n.findVisibleNode())||n===t)return!1}if(null!==(n=this.toNode)){if(this.isTreeLink&&!e&&!n.isTreeExpanded)return!1;if(n===t)return!0;for(e=n;null!==e;){if(e.labeledLink===this)return!0;e=e.containingGroup}if(null===(e=n.findVisibleNode())||e===t)return!1}return!0},z.prototype.Ub=function(t){if(ut.prototype.Ub.call(this,t),null!==this.If&&this.If.Al(),null!==this.rd)for(var e=this.rd.iterator;e.next();)e.value.Ub(t)},z.prototype.computeAdjusting=function(){return this.isAvoiding&&null!==this.diagram&&this.diagram.animationManager.defaultAnimation.isAnimating?Wp:this.dk},z.prototype.eh=function(){return!0},St.Object.defineProperties(z.prototype,{fromNode:{get:function(){return this.Ue},set:function(t){var e=this.Ue;if(e!==t){var n=this.fromPort;null!==e&&(this.hf!==e&&zp(e,this,n),ay(this),this.D(2)),this.Ue=t,null!==t&&this.Ub(t.isVisible()),this.Mf=null,this.ab();var s=this.diagram;null!==s&&s.$&&s.partManager.setFromNodeForLink(this,t,e);var l=this.fromPort,u=this.fromPortChanged;if(null!==u){var c=!0;null!==s&&(c=s.$,s.$=!0),u(this,n,l),null!==s&&(s.$=c)}null!==t&&(this.hf!==t&&Uf(t,this,l),sy(this),this.D(1)),this.g("fromNode",e,t),ee(this)}}},fromPortId:{get:function(){return this.Ve},set:function(t){var e=this.Ve;if(e!==t){var n=this.fromPort;null!==n&&cr(n),ay(this),this.Ve=t;var s=this.fromPort;null!==s&&cr(s);var l=this.diagram;if(null!==l){var u=this.data,c=l.model;null!==u&&c.ki()&&c.dv(u,t)}n!==s&&(this.Mf=null,this.ab(),null!==(u=this.fromPortChanged)&&(c=!0,null!==l&&(c=l.$,l.$=!0),u(this,n,s),null!==l&&(l.$=c))),sy(this),this.g("fromPortId",e,t)}}},fromPort:{get:function(){var t=this.Ue;return null===t?null:t.Kr(this.Ve)}},fromPortChanged:{get:function(){return this.Om},set:function(t){var e=this.Om;e!==t&&(this.Om=t,this.g("fromPortChanged",e,t))}},toNode:{get:function(){return this.hf},set:function(t){var e=this.hf;if(e!==t){var n=this.toPort;null!==e&&(this.Ue!==e&&zp(e,this,n),ay(this),this.D(2)),this.hf=t,null!==t&&this.Ub(t.isVisible()),this.Mf=null,this.ab();var s=this.diagram;null!==s&&s.$&&s.partManager.setToNodeForLink(this,t,e);var l=this.toPort,u=this.toPortChanged;if(null!==u){var c=!0;null!==s&&(c=s.$,s.$=!0),u(this,n,l),null!==s&&(s.$=c)}null!==t&&(this.Ue!==t&&Uf(t,this,l),sy(this),this.D(1)),this.g("toNode",e,t),ee(this)}}},toPortId:{get:function(){return this.jf},set:function(t){var e=this.jf;if(e!==t){var n=this.toPort;null!==n&&cr(n),ay(this),this.jf=t;var s=this.toPort;null!==s&&cr(s);var l=this.diagram;if(null!==l){var u=this.data,c=l.model;null!==u&&c.ki()&&c.hv(u,t)}n!==s&&(this.Mf=null,this.ab(),null!==(u=this.toPortChanged)&&(c=!0,null!==l&&(c=l.$,l.$=!0),u(this,n,s),null!==l&&(l.$=c))),sy(this),this.g("toPortId",e,t)}}},toPort:{get:function(){var t=this.hf;return null===t?null:t.Kr(this.jf)}},toPortChanged:{get:function(){return this.Xn},set:function(t){var e=this.Xn;e!==t&&(this.Xn=t,this.g("toPortChanged",e,t))}},fromSpot:{get:function(){return null!==this.aa?this.aa.Qi:Zn},set:function(t){var e=this.fromSpot;e.C(t)||(t=t.J(),this.Rc(),this.aa.Qi=t,this.g("fromSpot",e,t),(e.Uc()||t.Uc())&&null!==this.fromNode&&cr(this.fromPort),this.ab())}},fromEndSegmentLength:{get:function(){return null!==this.aa?this.aa.Oi:NaN},set:function(t){var e=this.fromEndSegmentLength;e!==t&&(0>t&&pe(t,">= 0",z,"fromEndSegmentLength"),this.Rc(),this.aa.Oi=t,this.g("fromEndSegmentLength",e,t),this.ab())}},fromShortLength:{get:function(){return null!==this.aa?this.aa.Pi:NaN},set:function(t){var e=this.fromShortLength;e!==t&&(this.Rc(),this.aa.Pi=t,this.mc(!0),this.g("fromShortLength",e,t))}},toSpot:{get:function(){return null!==this.aa?this.aa.tj:Zn},set:function(t){var e=this.toSpot;e.C(t)||(t=t.J(),this.Rc(),this.aa.tj=t,this.g("toSpot",e,t),(e.Uc()||t.Uc())&&null!==this.toNode&&cr(this.toPort),this.ab())}},toEndSegmentLength:{get:function(){return null!==this.aa?this.aa.rj:NaN},set:function(t){var e=this.toEndSegmentLength;e!==t&&(0>t&&pe(t,">= 0",z,"toEndSegmentLength"),this.Rc(),this.aa.rj=t,this.g("toEndSegmentLength",e,t),this.ab())}},toShortLength:{get:function(){return null!==this.aa?this.aa.sj:NaN},set:function(t){var e=this.toShortLength;e!==t&&(this.Rc(),this.aa.sj=t,this.mc(!0),this.g("toShortLength",e,t))}},isLabeledLink:{get:function(){return null!==this.rd&&0<this.rd.count}},labelNodes:{get:function(){return null===this.rd?jo:this.rd.iterator}},relinkableFrom:{get:function(){return 0!=(1&this.Oa)},set:function(t){var e=0!=(1&this.Oa);e!==t&&(this.Oa^=1,this.g("relinkableFrom",e,t),this.Rb())}},relinkableTo:{get:function(){return 0!=(2&this.Oa)},set:function(t){var e=0!=(2&this.Oa);e!==t&&(this.Oa^=2,this.g("relinkableTo",e,t),this.Rb())}},resegmentable:{get:function(){return 0!=(4&this.Oa)},set:function(t){var e=0!=(4&this.Oa);e!==t&&(this.Oa^=4,this.g("resegmentable",e,t),this.Rb())}},isTreeLink:{get:function(){return 0!=(8&this.Oa)},set:function(t){var e=0!=(8&this.Oa);e!==t&&(this.Oa^=8,this.g("isTreeLink",e,t),null!==this.fromNode&&ty(this.fromNode),null!==this.toNode&&ty(this.toNode))}},path:{get:function(){var t=this.vb();return t instanceof Ct?t:null}},routeBounds:{get:function(){this.mg();var t=this.bl,e=1/0,n=1/0,s=this.pointsCount;if(0===s)t.h(NaN,NaN,0,0);else{if(1===s)s=this.i(0),e=Math.min(s.x,e),n=Math.min(s.y,n),t.h(s.x,s.y,0,0);else if(2===s){s=this.i(0);var l=this.i(1);e=Math.min(s.x,l.x),n=Math.min(s.y,l.y),t.h(s.x,s.y,0,0),t.Me(l)}else if(this.computeCurve()===Fi&&3<=s&&!this.isOrthogonal)if(l=this.i(0),t.h(e=l.x,n=l.y,0,0),3===s){s=this.i(1),e=Math.min(s.x,e),n=Math.min(s.y,n);var u=this.i(2);e=Math.min(u.x,e),n=Math.min(u.y,n),R.ql(l.x,l.y,s.x,s.y,s.x,s.y,u.x,u.y,.5,t)}else for(u=3;u<s;u+=3){var c=this.i(u-2);u+3>=s&&(u=s-1);var d=this.i(u-1),p=this.i(u);R.ql(l.x,l.y,c.x,c.y,d.x,d.y,p.x,p.y,.5,t),e=Math.min(p.x,e),n=Math.min(p.y,n),l=p}else for(l=this.i(0),u=this.i(1),e=Math.min(l.x,u.x),n=Math.min(l.y,u.y),t.h(l.x,l.y,0,0),t.Me(u),l=2;l<s;l++)u=this.i(l),e=Math.min(u.x,e),n=Math.min(u.y,n),t.Me(u);this.Yt.h(e-t.x,n-t.y)}return t}},midPoint:{get:function(){return this.mg(),this.computeMidPoint(new A)}},midAngle:{get:function(){return this.mg(),this.computeMidAngle()}},flattenedLengths:{get:function(){if(null===this.Gp){this.xd||ry(this);for(var t=this.Gp=[],e=this.pointsCount,n=0;n<e-1;n++){var s=this.i(n),l=this.i(n+1);R.ca(s.x,l.x)?0>(s=l.y-s.y)&&(s=-s):R.ca(s.y,l.y)?0>(s=l.x-s.x)&&(s=-s):s=Math.sqrt(s.rf(l)),t.push(s)}}return this.Gp}},flattenedTotalLength:{get:function(){var t=this.Ys;if(isNaN(t)){for(var e=this.flattenedLengths,n=e.length,s=t=0;s<n;s++)t+=e[s];this.Ys=t}return t}},points:{get:function(){return this.Jb},set:function(t){var e=this.Jb;if(e!==t){var n=null;if(Array.isArray(t)){var s=t.length%2==0;if(s)for(var l=0;l<t.length;l++)if("number"!=typeof t[l]||isNaN(t[l])){s=!1;break}if(s)for(n=new tt,s=0;s<t.length/2;s++)l=new A(t[2*s],t[2*s+1]).freeze(),n.add(l);else{for(s=!0,l=0;l<t.length;l++){var u=t[l];if(!Vt(u)||"number"!=typeof u.x||isNaN(u.x)||"number"!=typeof u.y||isNaN(u.y)){s=!1;break}}if(s)for(n=new tt,s=0;s<t.length;s++)n.add(new A((l=t[s]).x,l.y).freeze())}}else if(t instanceof tt)for(n=t.copy(),t=n.iterator;t.next();)t.value.freeze();else Y("Link.points value is not an instance of List or Array: "+t);n.freeze(),this.Jb=n,this.mc(!0),ry(this),null!==(t=this.diagram)&&(t.ji||t.undoManager.isUndoingRedoing||t.Zr.add(this),t.animationManager.zb&&(t=t.animationManager,this.ef=n,t.dl.add(this))),this.g("points",e,n)}}},pointsCount:{get:function(){return this.Jb.count}},xd:{get:function(){return 0!=(16&this.Oa)},set:function(t){0!=(16&this.Oa)!==t&&(this.Oa^=16)}},suspendsRouting:{get:function(){return 0!=(32&this.Oa)},set:function(t){0!=(32&this.Oa)!==t&&(this.Oa^=32)}},computingPoints:{get:function(){return 0!=(64&this.Oa)},set:function(t){0!=(64&this.Oa)!==t&&(this.Oa^=64)}},defaultFromPoint:{get:function(){return this.m},set:function(t){this.m=t.copy()}},defaultToPoint:{get:function(){return this.u},set:function(t){this.u=t.copy()}},isOrthogonal:{get:function(){return 2==(2&this.kj.value)}},isAvoiding:{get:function(){return 4==(4&this.kj.value)}},Zl:{get:function(){return 0!=(128&this.Oa)},set:function(t){0!=(128&this.Oa)!==t&&(this.Oa^=128)}},geometry:{get:function(){return this.Zl||(this.mg(),this.sa=this.makeGeometry()),this.sa}},firstPickIndex:{get:function(){return 2>=this.pointsCount?0:this.isOrthogonal||!Hf(this.computeSpot(!0))?1:0}},lastPickIndex:{get:function(){var t=this.pointsCount;return 0===t?0:2>=t?t-1:this.isOrthogonal||!Hf(this.computeSpot(!1))?t-2:t-1}},adjusting:{get:function(){return this.dk},set:function(t){var e=this.dk;e!==t&&(this.dk=t,this.g("adjusting",e,t))}},corner:{get:function(){return this.wm},set:function(t){var e=this.wm;e!==t&&(this.wm=t,this.mc(!0),this.g("corner",e,t))}},curve:{get:function(){return this.ym},set:function(t){var e=this.ym;e!==t&&(this.ym=t,this.ab(),this.mc(!0),lw(this,e===el||e===Zh||t===el||t===Zh),this.g("curve",e,t))}},curviness:{get:function(){return this.zm},set:function(t){var e=this.zm;e!==t&&(this.zm=t,this.ab(),this.mc(!1),this.g("curviness",e,t))}},routing:{get:function(){return this.kj},set:function(t){var e=this.kj;e!==t&&(this.kj=t,this.Mf=null,this.ab(),lw(this,2==(2&e.value)||2==(2&t.value)),this.g("routing",e,t))}},smoothness:{get:function(){return this.Sn},set:function(t){var e=this.Sn;e!==t&&(this.Sn=t,this.mc(!0),this.g("smoothness",e,t))}},key:{get:function(){var t=this.diagram;if(null!==t&&t.model.ki())return t.model.uc(this.data)}}}),z.prototype.invalidateOtherJumpOvers=z.prototype.Ao,z.prototype.findClosestSegment=z.prototype.Ny,z.prototype.updateRoute=z.prototype.mg,z.prototype.invalidateRoute=z.prototype.ab,z.prototype.rollbackRoute=z.prototype.$u,z.prototype.commitRoute=z.prototype.pf,z.prototype.startRoute=z.prototype.jh,z.prototype.clearPoints=z.prototype.Aj,z.prototype.removePoint=z.prototype.Yu,z.prototype.addPointAt=z.prototype.mf,z.prototype.addPoint=z.prototype.fe,z.prototype.insertPointAt=z.prototype.l,z.prototype.insertPoint=z.prototype.sz,z.prototype.setPointAt=z.prototype.M,z.prototype.setPoint=z.prototype.Wc,z.prototype.getPoint=z.prototype.i,z.prototype.getOtherPort=z.prototype.jz,z.prototype.getOtherNode=z.prototype.wo;var Jh=null,Yu=null,uC=new K(z,"Normal",1),hD=new K(z,"Orthogonal",2),zf=new K(z,"AvoidsNodes",6),hC=new K(z,"AvoidsNodesStraight",7),di=new K(z,"None",0),Fi=new K(z,"Bezier",9),el=new K(z,"JumpGap",10),Zh=new K(z,"JumpOver",11),Wp=new K(z,"End",17),ly=new K(z,"Scale",18),uy=new K(z,"Stretch",19),Kp=new K(z,"OrientAlong",21),Yp=new K(z,"OrientPlus90",22),Gf=new K(z,"OrientMinus90",23),uw=new K(z,"OrientOpposite",24),Xp=new K(z,"OrientUpright",25),$f=new K(z,"OrientPlus90Upright",26),Qh=new K(z,"OrientMinus90Upright",27),hw=new K(z,"OrientUpright45",28),hy=16,cC=14,cy=8;function ct(t,e,n,s){En(this),this.ue=this.Sp=!1,this.cs=t,this.vx=e,this.Pu=n,this.wx=s,this.links=[]}function qh(t){En(this),this.Hx=this.group=null,this.Sr=!0,this.abort=!1,this.Ed=this.Dd=1,this.mn=this.ln=-1,this.nc=t.width,this.oc=t.height,this.Xb=null,this.Xh=this.Wh=0,this.ps=11,this.nx=this.mx=22}function tc(t,e,n){return t.Dd<=e&&e<=t.ln&&t.Ed<=n&&n<=t.mn}function _o(t,e,n){return tc(t,e,n)?(e-=t.Dd,n-=t.Ed,t.Xb[0|(e/=t.nc)][0|(n/=t.oc)]):py}function Zs(t){if(null!==t.Xb)for(var e=0;e<=t.Wh;e++)for(var n=t.Xb[e],s=0;s<=t.Xh;s++)n[s]>=il&&(n[s]=py)}function Cs(t,e,n,s,l,u,c,d,p){if(!(e<u||e>c||n<d||n>p)){var g=0|e,y=0|n,w=t.Xb[g][y];if(w>=il&&w<Jp)for(l?y+=s:g+=s,w+=1;u<=g&&g<=c&&d<=y&&y<=p&&!(w>=t.Xb[g][y]);)t.Xb[g][y]=w,w+=1,l?y+=s:g+=s;if(g=l?y:g,l)if(0<s)for(n+=s;n<g;n+=s)Cs(t,e,n,1,!l,u,c,d,p),Cs(t,e,n,-1,!l,u,c,d,p);else for(n+=s;n>g;n+=s)Cs(t,e,n,1,!l,u,c,d,p),Cs(t,e,n,-1,!l,u,c,d,p);else if(0<s)for(e+=s;e<g;e+=s)Cs(t,e,n,1,!l,u,c,d,p),Cs(t,e,n,-1,!l,u,c,d,p);else for(e+=s;e>g;e+=s)Cs(t,e,n,1,!l,u,c,d,p),Cs(t,e,n,-1,!l,u,c,d,p)}}function fy(t,e,n,s,l,u,c,d,p){var g=Sa,y=il;for(t.Xb[e|=0][n|=0]=y;g===Sa&&e>u&&e<c&&n>d&&n<p;)t.Xb[e][n]=y+=1,l?n+=s:e+=s,g=t.Xb[e][n]}function Wf(t,e,n,s,l,u,c,d,p){var g=Sa,y=Jp;for(t.Xb[e|=0][n|=0]=y;g===Sa&&e>u&&e<c&&n>d&&n<p;)t.Xb[e][n]=y,l?n+=s:e+=s,g=t.Xb[e][n]}function nl(t,e,n,s,l,u,c){if(null!==t.Xb){t.abort=!1;var d=e.x,p=e.y;if(tc(t,d,p)){d-=t.Dd,d/=t.nc,p-=t.Ed,p/=t.oc;var g=s.x,y=s.y;if(tc(t,g,y))if(g-=t.Dd,g/=t.nc,y-=t.Ed,y/=t.oc,1>=Math.abs(d-g)&&1>=Math.abs(p-y))t.abort=!0;else{var w=u.x;s=u.y,e=u.x+u.width;var C=u.y+u.height;w-=t.Dd,w/=t.nc,s-=t.Ed,s/=t.oc,e-=t.Dd,e/=t.nc,C-=t.Ed,C/=t.oc,u=Math.max(0,Math.min(t.Wh,0|w)),e=Math.min(t.Wh,Math.max(0,0|e)),w=Math.max(0,Math.min(t.Xh,0|s)),C=Math.min(t.Xh,Math.max(0,0|C)),g|=0,y|=0;var D=0===n||90===n?1:-1;if(n=90===n||270===n,(s=t.Xb)[d|=0][p|=0]===Sa?(fy(t,d,p,D,n,u,e,w,C),fy(t,d,p,1,!n,u,e,w,C),fy(t,d,p,-1,!n,u,e,w,C)):fy(t,d,p,D,n,d,p,d,p),s[g][y]===Sa?(Wf(t,g,y,0===l||90===l?1:-1,90===l||270===l,u,e,w,C),Wf(t,g,y,1,!(90===l||270===l),u,e,w,C),Wf(t,g,y,-1,!(90===l||270===l),u,e,w,C)):Wf(t,g,y,D,n,g,y,g,y),n=ce(),c&&dy(t,g,y,l,d,p,n))for((n[0]!==g||n[1]!==y)&&(n.unshift(y),n.unshift(g)),(n[n.length-2]!==d||n[n.length-1]!==p)&&(n.push(d),n.push(p)),t=il,s[l=n[n.length-2]][c=n[n.length-1]]=t++,u=n.length-4;0<=u;u-=2)for(l=n[u+2],c=n[u+3],e=n[u],g=n[u+1];e>l?l++:e<l?l--:g>c?c++:g<c&&c--,s[l][c]=t++,l!==e||c!==g;);else Cs(t,d,p,1,!1,u,e,w,C),Cs(t,d,p,-1,!1,u,e,w,C),Cs(t,d,p,1,!0,u,e,w,C),Cs(t,d,p,-1,!0,u,e,w,C);It(n)}}}}function dy(t,e,n,s,l,u,c){for(var d=t.Xb,p=e,g=n;;){if(p===l&&g===u)return!0;var y=p,w=g;if(0===s){if(!(y<l))break;y++}else if(90===s){if(!(w<u))break;w++}else if(180===s){if(!(y>l))break;y--}else{if(!(w>u))break;w--}var C=d[y][w];if(0===C||C===fC)break;p=y,g=w}for(;;){if(y=s,w=p,C=g,0===s?C<u?(y=90,C++):C>u&&(y=270,C--):90===s?w<l?(y=0,w++):w>l&&(y=180,w--):180===s?C<u?(y=90,C++):C>u&&(y=270,C--):w<l?(y=0,w++):w>l&&(y=180,w--),w=d[w][C],y!==s&&0!==w&&w!==fC){if(c.push(p),c.push(g),dy(t,p,g,y,l,u,c))return!0;c.pop(),c.pop()}if(d[p][g]=fC,0===s){if(p===e)return!1;p--}else if(90===s){if(g===n)return!1;g--}else if(180===s){if(p===e)return!1;p++}else{if(g===n)return!1;g++}}}z.className="Link",z.Normal=uC,z.Orthogonal=hD,z.AvoidsNodes=zf,z.AvoidsNodesStraight=hC,z.None=di,z.Bezier=Fi,z.JumpGap=el,z.JumpOver=Zh,z.End=Wp,z.Scale=ly,z.Stretch=uy,z.OrientAlong=Kp,z.OrientPlus90=Yp,z.OrientMinus90=Gf,z.OrientOpposite=uw,z.OrientUpright=Xp,z.OrientPlus90Upright=$f,z.OrientMinus90Upright=Qh,z.OrientUpright45=hw,z.EndSegmentStep=8,z.CurvinessStart=hy,z.SpacingMin=cC,z.OrthoShortCut=cy,ct.prototype.Al=function(){if(!this.Sp){var t=this.links;0<t.length&&null!==(t=t[0].diagram)&&(t.Uv.add(this),this.ue=t.undoManager.isUndoingRedoing)}this.Sp=!0},ct.prototype.rv=function(){if(this.Sp){this.Sp=!1;var t=this.links;if(0<t.length){var e=t[0],n=e.diagram;n=null===n||n.ji&&!this.ue,this.ue=!1,e.arrangeBundledLinks(t,n),1===t.length&&(e.If=null,t.length=0)}0===t.length&&(t=this.cs,null!==this&&null!==t.Qe&&t.Qe.remove(this),t=this.Pu,null!==this&&null!==t.Qe&&t.Qe.remove(this))}},ct.className="LinkBundle",qh.prototype.initialize=function(t){if(!(0>=t.width||0>=t.height)){var e=t.y,n=t.x+t.width,s=t.y+t.height;if(this.Dd=Math.floor((t.x-this.nc)/this.nc)*this.nc,this.Ed=Math.floor((e-this.oc)/this.oc)*this.oc,this.ln=Math.ceil((n+2*this.nc)/this.nc)*this.nc,this.mn=Math.ceil((s+2*this.oc)/this.oc)*this.oc,t=1+(0|Math.ceil((this.ln-this.Dd)/this.nc)),e=1+(0|Math.ceil((this.mn-this.Ed)/this.oc)),null===this.Xb||this.Wh<t-1||this.Xh<e-1){for(n=[],s=0;s<=t;s++)n[s]=new Uint32Array(e);this.Xb=n,this.Wh=t-1,this.Xh=e-1}if(t=py,null!==this.Xb)for(e=0;e<=this.Wh;e++)if((n=this.Xb[e]).fill)n.fill(t);else for(s=0;s<=this.Xh;s++)n[s]=t}},qh.prototype.Pj=function(t,e,n,s){if(t>this.ln||t+n<this.Dd||e>this.mn||e+s<this.Ed)return!0;t=(t-this.Dd)/this.nc|0,e=(e-this.Ed)/this.oc|0,n=Math.max(0,n)/this.nc+1|0;var l=Math.max(0,s)/this.oc+1|0;if(0>t&&(n+=t,t=0),0>e&&(l+=e,e=0),0>n||0>l)return!0;for(s=0|Math.min(t+n-1,this.Wh),n=0|Math.min(e+l-1,this.Xh);t<=s;t++){l=this.Xb[t];for(var u=e;u<=n;u++)if(l[u]===Sa)return!1}return!0},St.Object.defineProperties(qh.prototype,{bounds:{get:function(){return new U(this.Dd,this.Ed,this.ln-this.Dd,this.mn-this.Ed)}},lo:{get:function(){return this.nc},set:function(t){0<t&&t!==this.nc&&(this.nc=t,this.initialize(this.bounds))}},ko:{get:function(){return this.oc},set:function(t){0<t&&t!==this.oc&&(this.oc=t,this.initialize(this.bounds))}}});var Sa=0,il=1,Jp=999999,py=Jp+1,fC=Jp+2;function rl(){En(this),this.port=this.node=null,this.he=[],this.Do=!1}function gy(t,e,n,s){switch(e=e.offsetY){case 8:return 90;case 2:return 180;case 1:return 270;case 4:return 0}switch(e){case 9:return 180<n?270:90;case 6:return 90<n&&270>=n?180:0}switch(t=180*Math.atan2(t.height,t.width)/Math.PI,e){case 3:return n>t&&n<=180+t?180:270;case 5:return n>180-t&&n<=360-t?270:0;case 12:return n>t&&n<=180+t?90:0;case 10:return n>180-t&&n<=360-t?180:90;case 7:return 90<n&&n<=180+t?180:n>180+t&&n<=360-t?270:0;case 13:return 180<n&&n<=360-t?270:n>t&&180>=n?90:0;case 14:return n>t&&n<=180-t?90:n>180-t&&270>=n?180:0;case 11:return n>180-t&&n<=180+t?180:n>180+t?270:90}return s&&15!==e&&0>(n-=15)&&(n+=360),n>t&&n<180-t?90:n>=180-t&&n<=180+t?180:n>180+t&&n<360-t?270:0}function my(t,e){var n=t.he;if(0===n.length){t:if(!t.Do){n=t.Do,t.Do=!0;var s=null,l=t.node,u=l instanceof wt?l:null;if(null===u||u.isSubGraphExpanded)var c=l.isTreeExpanded?l.findLinksConnected(t.port.portId):l.Tw();else{if(!u.actualBounds.v()){t.Do=n;break t}c=(s=u).vu()}u=t.he.length=0;var d=t.port.ia(je,A.alloc()),p=t.port.ia(xr,A.alloc());for((l=U.allocAt(d.x,d.y,0,0)).Me(p),A.free(d),A.free(p),d=A.allocAt(l.x+l.width/2,l.y+l.height/2),p=t.port.fi(),c=c.iterator;c.next();){var g=c.value;if(g.isVisible()&&g.fromPort!==g.toPort){var y=g.fromPort===t.port||null!==g.fromNode&&g.fromNode.Md(s),w=g.computeSpot(y,t.port);if(w.Uc()&&null!==(y=y?g.toPort:g.fromPort)){var C=y.part;if(null!==C){var D=C.findVisibleNode();null!==D&&D!==C&&(y=(C=D).port),y=g.computeOtherPoint(C,y),C=d.Ya(y),0>(C-=p)?C+=360:360<=C&&(C-=360),0===(w=gy(l,w,C,g.isOrthogonal))?(w=4,180<C&&(C-=360)):90===w?(w=8,270<C&&(C-=360)):180===w?w=2:(w=1,90>C&&(C+=360)),void 0===(D=t.he[u])?(D=new Zp(g,C,w),t.he[u]=D):(D.link=g,D.angle=C,D.Gc=w),D.Ru.set(y),u++}}}}for(A.free(d),t.he.sort(rl.prototype.j),p=t.he.length,s=-1,u=d=0;u<p;u++)void 0!==(c=t.he[u])&&(c.Gc!==s&&(s=c.Gc,d=0),c.xo=d,d++);for(s=-1,d=0,u=p-1;0<=u;u--)void 0!==(p=t.he[u])&&(p.Gc!==s&&(s=p.Gc,d=p.xo+1),p.tl=d);if(u=t.he,w=t.port,s=t.node.portSpreading,d=A.alloc(),p=A.alloc(),c=A.alloc(),g=A.alloc(),w.ia(je,d),w.ia(wr,p),w.ia(xr,c),w.ia(Mn,g),D=C=y=w=0,s===tw)for(var M=0;M<u.length;M++){var E=u[M];if(null!==E){var I=E.link.computeThickness();switch(E.Gc){case 8:C+=I;break;case 2:D+=I;break;case 1:w+=I;break;default:y+=I}}}var P=M=0,k=1,b=E=0;for(I=0;I<u.length;I++){var O=u[I];if(null!==O){if(M!==O.Gc){switch(M=O.Gc){case 8:var L=c;P=g;break;case 2:L=g,P=d;break;case 1:L=d,P=p;break;default:L=p,P=c}switch(E=P.x-L.x,b=P.y-L.y,M){case 8:C>Math.abs(E)?(k=Math.abs(E)/C,C=Math.abs(E)):k=1;break;case 2:D>Math.abs(b)?(k=Math.abs(b)/D,D=Math.abs(b)):k=1;break;case 1:w>Math.abs(E)?(k=Math.abs(E)/w,w=Math.abs(E)):k=1;break;default:y>Math.abs(b)?(k=Math.abs(b)/y,y=Math.abs(b)):k=1}P=0}var H=O.Co;if(s===tw){switch(O=O.link.computeThickness(),O*=k,H.set(L),M){case 8:H.x=L.x+E/2+C/2-P-O/2;break;case 2:H.y=L.y+b/2+D/2-P-O/2;break;case 1:H.x=L.x+E/2-w/2+P+O/2;break;default:H.y=L.y+b/2-y/2+P+O/2}P+=O}else{var J=.5;s===ny&&(J=(O.xo+1)/(O.tl+1)),H.x=L.x+E*J,H.y=L.y+b*J}}}for(A.free(d),A.free(p),A.free(c),A.free(g),L=t.he,u=0;u<L.length;u++)null!==(s=L[u])&&(s.tu=t.computeEndSegmentLength(s));t.Do=n,U.free(l)}n=t.he}for(t=0;t<n.length;t++)if(null!==(l=n[t])&&l.link===e)return l;return null}function Zp(t,e,n){this.link=t,this.angle=e,this.Gc=n,this.Ru=new A,this.tl=this.xo=0,this.Co=new A,this.tu=0}function Lt(t){En(this),this.m=this.H=null,this.wh=this.Zm=!0,this.en=!1,this.im=new A(0,0).freeze(),this.bn=!0,this.mm=this.an=null,this.dn=!1,this.j=null,this.u=0,this.nn=this.ao=null,this.zr=!1,this.dg=this.lj=null,this.ir=!1,t&&Object.assign(this,t)}function Xu(t,e,n,s,l,u,c,d){for(n=n.iterator;n.next();){var p=n.value;s&&!p.isTopLevel||null!==l&&!l(p)||!p.canLayout()||(u&&p instanceof Z?p.isLinkLabel||(p instanceof wt&&null===p.layout?Xu(t,e,p.memberParts,!1,l,u,c,d):(Qp(p),e.add(p))):c&&p instanceof z?e.add(p):!d||!p.Tc()||p instanceof Z||(Qp(p),e.add(p)))}}function Qp(t){var e=t.actualBounds;(0===e.width||0===e.height||isNaN(e.width)||isNaN(e.height))&&t.Za()}function yy(t,e){if(null!==t.workerStateChanged){var n={key:t.group?t.group.key:null};void 0!==e&&(n.time=e),null!==t.lj&&(n.running=dC(t.lj)),null!==t.dg&&(n.waiting=dC(t.dg)),t.workerStateChanged(n,t)}}function dC(t){return{vertexes:t.vertexes.count,edges:t.edges.count}}function vy(t,e){var n=Kf(t);if(!n)throw Error("Unknown Layout class: "+t);if(e)for(var s in e)n[s]=e[s]}function Kf(t){var e=null;if("function"==typeof t){if(!(e=ec.get(t))){var n=la(t);(e=ec.get(n))||((e=new fw).pu=t,e.name=n,e.j=t.name,e.hx=cw,ec.set(n,e),ec.set(t,e),ec.set(t.name,e))}}else"string"==typeof t&&(e=ec.get(t));return e}function cD(t,e){t.zr=!0;var n=Kf(t.constructor),s=pC(t,e,!0);s._GoJS="_GoJS",n.Ne.postMessage(s),n.Cl.set(Cn(t),t),t.lj=e}function pC(t,e,n){t.onNetworkSerialization(1,n,e,null);var s={};t.serializeLayoutProperties(s,n);var l=[];e.vertexes.each(function(c){var d={};c.serializeVertexProperties(d,n),l.push(d)});var u=[];return e.edges.each(function(c){var d={};c.serializeEdgeProperties(d,n),u.push(d)}),s={id:n?Cn(t):t.id,layout:la(t.constructor),p:s,hA:l,Ly:u},t.onNetworkSerialization(2,n,e,s),s}function fD(t,e,n){n&&(t.id=e.id);var s=t.diagram,l=t.createNetwork();t.onNetworkSerialization(3,n,l,e);var u=e.hA,c=new xt;u&&u.forEach(function(g){var y=null;null===g.key||null===s||n||(y=s.Lb(g.key)),null!==y?y=l.yj(y):(y=l.createVertex(),l.fg(y)),n&&null!==g.key&&(y.data={yh:g.key}),c.set(g.id,y)});var d=e.Ly,p=new xt;return d&&d.forEach(function(g){var y=null;null===g.key||null===s||n||(y=s.findLinkForKey(g.key));var w=l.createEdge();l.ol(w),w.link=y,n&&null!==g.key&&(w.data={yh:g.key}),p.set(g.id,w)}),u&&u.forEach(function(g){var y=c.get(g.id);y&&y.deserializeVertexProperties(g,c,p,n)}),d&&d.forEach(function(g){var y=p.get(g.id);y&&y.deserializeEdgeProperties(g,c,p,n)}),t.deserializeLayoutProperties(e.p,c,p,n,l),t.onNetworkSerialization(4,n,l,e),l}qh.className="PositionArray",rl.prototype.toString=function(){for(var t=this.he,e=this.node.toString()+" "+t.length.toString()+":",n=0;n<t.length;n++){var s=t[n];null!==s&&(e+="\n  "+s.toString())}return e},rl.prototype.Al=function(){this.he.length=0},rl.prototype.j=function(t,e){return t===e?0:null===t?-1:null===e?1:t.Gc<e.Gc?-1:t.Gc>e.Gc?1:t.angle<e.angle?-1:t.angle>e.angle?1:0},rl.prototype.computeEndSegmentLength=function(t){var e=t.link,n=e.computeEndSegmentLength(this.node,this.port,Oe,e.fromPort===this.port),s=t.xo;if(0>s)return n;var l=t.tl;if(1>=l||!e.isOrthogonal)return n;e=t.Ru;var u=t.Co;return(2===t.Gc||8===t.Gc)&&(s=l-1-s),((t=2===t.Gc||4===t.Gc)?e.y<u.y:e.x<u.x)?n+8*s:(t?e.y===u.y:e.x===u.x)?n:n+8*(l-1-s)},rl.className="Knot",Zp.prototype.toString=function(){return this.link.toString()+" "+this.angle.toString()+" "+this.Gc.toString()+":"+this.xo.toString()+"/"+this.tl.toString()+" "+this.Co.toString()+" "+this.tu.toString()+" "+this.Ru.toString()},Zp.className="LinkInfo",Lt.prototype.cloneProtected=function(t){t.Zm=this.Zm,t.wh=this.wh,t.en=this.en,t.im.assign(this.im),t.bn=this.bn,t.an=this.an,t.mm=this.mm,t.dn=!0,t.nn=this.nn,t.ao=this.ao},Lt.prototype.copy=function(){var t=new this.constructor;return this.cloneProtected(t),t},Lt.prototype.serializeLayoutProperties=function(t){t.arrangementOrigin={x:this.arrangementOrigin.x,y:this.arrangementOrigin.y},t.isRouting=this.isRouting},Lt.prototype.deserializeLayoutProperties=function(t){null!==t&&(this.arrangementOrigin=new A(t.arrangementOrigin.x,t.arrangementOrigin.y),this.isRouting=t.isRouting)},Lt.prototype.ob=function(){},Lt.prototype.toString=function(){var t=la(this.constructor);return t+="(",null!==this.group&&(t+=" in "+this.group),null!==this.diagram&&(t+=" for "+this.diagram),t+")"},Lt.prototype.D=function(){if(this.isValidLayout){var t=this.diagram;if(null!==t&&!t.undoManager.isUndoingRedoing){var e=t.animationManager;!e.isTicking&&(e.defaultAnimation.isAnimating&&e.wc(),this.isOngoing&&t.ji||this.isInitial&&!t.ji)&&(this.isValidLayout=!1,t.Mb())}}},Lt.prototype.createNetwork=function(){return new Jt(this)},Lt.prototype.makeNetwork=function(t){var e=this.createNetwork();return t instanceof V?(e.eg(t.nodes,!0),e.eg(t.links,!0)):e.eg(t instanceof wt?t.memberParts:t.iterator),e},Lt.prototype.updateParts=function(){if(this.isValidLayout=!0,!this.workerLayout()){var t=this.diagram;if(null===t&&null!==this.network)for(var e=this.network.vertexes.iterator;e.next();){var n=e.value.node;if(null!==n&&null!==(t=n.diagram))break}try{null!==t&&t.Da("Layout"),this.commitLayout()}finally{null!==t&&t.eb("Layout")}}},Lt.prototype.commitLayout=function(){if(null!==this.network){for(var t=this.network.vertexes.iterator;t.next();)t.value.commit();if(this.isRouting)for(t=this.network.edges.iterator;t.next();)t.value.commit()}},Lt.prototype.doLayout=function(t){var e=new Q;t instanceof V?(Xu(this,e,t.nodes,!0,this.gh,!0,!1,!0),Xu(this,e,t.parts,!0,this.gh,!0,!1,!0)):t instanceof wt?Xu(this,e,t.memberParts,!1,this.gh,!0,!1,!0):e.addAll(t.iterator),0<e.count&&(null!==(t=this.diagram)&&t.Da("Layout"),this.doMinimalNoNetworkLayout(e),null!==t&&t.eb("Layout")),this.isValidLayout=!0},Lt.prototype.doMinimalNoNetworkLayout=function(t){var e=Math.ceil(Math.sqrt(t.count));this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin);var n=this.arrangementOrigin.x,s=n,l=this.arrangementOrigin.y,u=0,c=0;for(t=t.iterator;t.next();){var d=t.value;Qp(d);var p=d.measuredBounds,g=p.width;p=p.height,d.moveTo(s,l),d instanceof wt&&(d.gh=!1),s+=Math.max(g,50)+20,c=Math.max(c,Math.max(p,50)),u>=e-1?(u=0,s=n,l+=c+20,c=0):u++}},Lt.prototype.doMinimalNetworkLayout=function(){var t=Math.ceil(Math.sqrt(this.network.vertexes.count));this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin);for(var e=this.arrangementOrigin.x,n=e,s=this.arrangementOrigin.y,l=0,u=0,c=this.network.vertexes.iterator;c.next();){var d=c.value.node;if(!(null===d||d instanceof z)&&(Qp(d),this.gh(d))){var p=d.measuredBounds,g=p.width;p=p.height,d.moveTo(n,s),d instanceof wt&&(d.gh=!1),n+=Math.max(g,50)+20,u=Math.max(u,Math.max(p,50)),l>=t-1?(l=0,n=e,s+=u+20,u=0):l++}}},Lt.prototype.gh=function(t){return!(t.location.v()&&!(t instanceof wt&&t.gh))},Lt.prototype.hi=function(t,e){var n=this.boundsComputation;return null!==n?(e||(e=new U),n(t,this,e)):e?(e.set(t.actualBounds),e):t.actualBounds},Lt.prototype.Iw=function(t){var e=new Q;return t instanceof V?(Xu(this,e,t.nodes,!0,null,!0,!0,!0),Xu(this,e,t.links,!0,null,!0,!0,!0),Xu(this,e,t.parts,!0,null,!0,!0,!0)):Xu(this,e,t instanceof wt?t.memberParts:t.iterator,!1,null,!0,!0,!0),e},Lt.prototype.initialOrigin=function(t){var e=this.group;if(null!==e){var n=e.position.copy();return(isNaN(n.x)||isNaN(n.y))&&n.set(t),null!==(e=e.placeholder)&&(n=e.ia(je),(isNaN(n.x)||isNaN(n.y))&&n.set(t),n.x+=(t=e.padding).left,n.y+=t.top),n}return t},Lt.prototype.mayUseWorker=function(){return!!this.mayUseWorkerFunction&&this.mayUseWorkerFunction(this)},Lt.prototype.workerLayout=function(){return!1},Lt.prototype.uy=function(){var t=Kf(this.constructor);t&&(null!==t.Ne&&t.Ne.terminate(),t.Ne=null,t.Cl.iteratorValues.each(function(e){e.zr=!1,e.lj=null,e.dg=null,e.ir=!1,yy(e)}),t.Cl.clear())},Lt.prototype.qv=function(){if(typeof Worker>"u"||!gC||typeof self>"u"||typeof self.DedicatedWorkerGlobalScope<"u")return!1;if(!this.mayUseWorker())return this.zr&&(this.ir=!0,this.dg=this.lj=null,yy(this)),!1;var t=Kf(this.constructor);return null!==t&&(null===t.Ne&&(t.Ne=new Worker(gC),t.Ne.onerror=function(e){e.preventDefault(),wi("Worker Error at: "+e.filename+" "+e.lineno+" "+e.colno+"\n  "+e.message)},t.Ne.j=function(e){wi("Worker serialization error: "+e)},t.Ne.onmessage=function(e){var n=e.data;if("_GoJS"===n._GoJS)if(n.version&&V.version&&n.version!==V.version)wi("Failure: GoJS v"+V.version+"  Worker v"+n.version);else if(e=t.Cl.get(n.id)){if(t.Cl.remove(n.id),e.zr=!1,e.lj=null,e.ir)e.ir=!1,e.dg=null;else{var s=fD(e,n,!1);e.network=s,e.updateParts(),e.network=null,e.isValidLayout=!0}if(yy(e,n.time),null!==(n=e.dg))e.dg=null;else for(s=t.Cl.iteratorValues;s.next();){var l=s.value;if(null!==(n=l.dg)){l.dg=null;break}}null!==n&&cD(e,n)}},t.Ne.postMessage({_GoJS:"_GoJS",url:t.hx}),Array.isArray(t.scripts)&&t.scripts.forEach(function(e){t.Ne.postMessage({_GoJS:"_GoJS",url:e})}),t.Ne.postMessage({_GoJS:"_GoJS",version:-1})),null!==this.lj?this.dg=this.network:cD(this,this.network),yy(this),this.doMinimalNetworkLayout(),this.network=null,this.isValidLayout=!0)},Lt.prototype.onNetworkSerialization=function(){},St.Object.defineProperties(Lt.prototype,{diagram:{get:function(){return this.H},set:function(t){this.H=t}},group:{get:function(){return this.m},set:function(t){this.m!==t&&(this.m=t,null!==t&&(this.H=t.diagram))}},isOngoing:{get:function(){return this.Zm},set:function(t){this.Zm!==t&&(this.Zm=t)}},isInitial:{get:function(){return this.wh},set:function(t){this.wh=t,t||(this.dn=!0)}},isViewportSized:{get:function(){return this.en},set:function(t){this.en!==t&&(this.en=t)&&this.D()}},isRouting:{get:function(){return this.bn},set:function(t){this.bn!==t&&(this.bn=t)}},isRealtime:{get:function(){return this.an},set:function(t){this.an!==t&&(this.an=t)}},isValidLayout:{get:function(){return this.dn},set:function(t){this.dn!==t&&(this.dn=t,t||null!==(t=this.diagram)&&(t.mh=!0))}},network:{get:function(){return this.j},set:function(t){this.j!==t&&(this.j=t,null!==t&&(t.layout=this))}},boundsComputation:{get:function(){return this.mm},set:function(t){this.mm!==t&&(this.mm=t,this.D())}},arrangementOrigin:{get:function(){return this.im},set:function(t){this.im.C(t)||(this.im.assign(t),this.D())}},id:{get:function(){return this.u},set:function(t){this.u=t}},mayUseWorkerFunction:{get:function(){return this.nn},set:function(t){this.nn!==t&&(this.nn=t)}},workerStateChanged:{get:function(){return this.ao},set:function(t){this.ao!==t&&(this.ao=t)}}}),Lt.prototype.useWorker=Lt.prototype.qv,Lt.declareWorkerLayout=vy,Lt.prototype.cancelWorker=Lt.prototype.uy,Lt.prototype.collectParts=Lt.prototype.Iw,Lt.prototype.getLayoutBounds=Lt.prototype.hi,Lt.prototype.invalidateLayout=Lt.prototype.D;var ec=new xt,cw="object"==typeof mt.document&&mt.document.currentScript?mt.document.currentScript.src:"",gC=typeof URL<"u"&&"function"==typeof URL.createObjectURL&&"function"==typeof Blob?URL.createObjectURL(new Blob(["self.onmessage=function(e){if(e.data.url){\nimportScripts(e.data.url);}}"],{type:"text/javascript"})):"";function fw(){this.pu=null,this.hx=this.j=this.name="",this.scripts=[],this.Ne=null,this.Cl=new xt}function Jt(t){En(this),this.Kc=t,this.kf=new Q,this.pe=new Q,this.ds=new xt,this.Yr=new xt}function dD(t,e){if(null===e)return!1;var n=t.kf.remove(e);return n&&null!==(e=e.node)&&t.ds.remove(e),n}function mC(t,e){if(null!==e){t.pe.add(e);var n=e.link;null!==n&&null===t.qo(n)&&t.Yr.add(n,e),e.network=t}}function yC(t,e){null!==e&&t.pe.remove(e)&&null!==(e=e.link)&&t.Yr.remove(e)}function vC(t,e,n){if(null!==n&&n.network!==e){dD(t,n),e.fg(n);for(var s=n.sourceEdges;s.next();){var l=s.value;l.network!==e&&(yC(t,l),mC(e,l),vC(t,e,l.fromVertex))}for(s=n.destinationEdges;s.next();)(n=s.value).network!==e&&(yC(t,n),mC(e,n),vC(t,e,n.toVertex))}}function tn(t){En(this),this.nb=t,this.j=new U(0,0,10,10).freeze(),this.m=new A(5,5).freeze(),this.Lh=this.qb=null,this.wd=new tt,this.Jd=new tt}function wC(t,e){return e=e.Lh,(t=t.Lh)?e?(t=t.text)<(e=e.text)?-1:t>e?1:0:1:null!==e?-1:0}function si(t){En(this),this.hb=t,this.jd=this.ad=this.Pk=this.qb=null}function Vn(t){Lt.call(this),this.isViewportSized=!0,this.bo=this.co=NaN,this.pg=new gt(NaN,NaN).freeze(),this.gf=new gt(10,10).freeze(),this.Fb=qp,this.Nb=tg,this.fd=eg,this.Zc=Kl,t&&Object.assign(this,t)}function Kl(t,e){return(t=t.text)<(e=e.text)?-1:t>e?1:0}Lt.className="Layout",Lt.GoJSScriptURL=cw,Lt.declareWorkerLayout=vy,typeof self<"u"&&typeof self.DedicatedWorkerGlobalScope<"u"&&typeof self<"u"&&typeof self.DedicatedWorkerGlobalScope<"u"&&(self.onmessage=function(t){if("_GoJS"===(t=t.data)._GoJS)if(t.url)importScripts(t.url);else if(t.version)self.postMessage({_GoJS:"_GoJS",version:V.version},void 0);else{var e=performance.now(),n=null;t.layout&&(n=Kf(t.layout));var s=null;if(n&&n.pu&&(s=new n.pu),!s)throw Error("no registered Worker Layout: "+t.layout);s.network=fD(s,t,!0),s.workerLayout=function(){var l=pC(s,s.network,!1);return l._GoJS="_GoJS",l.time=performance.now()-e,self.postMessage(l,void 0),!0},s.doLayout(new tt)}}),Jt.prototype.clear=function(){if(this.kf)for(var t=this.kf.iterator;t.next();)t.value.clear();if(this.pe)for(t=this.pe.iterator;t.next();)t.value.clear();this.kf=new Q,this.pe=new Q,this.ds=new xt,this.Yr=new xt},Jt.prototype.toString=function(t){void 0===t&&(t=0);var e="LayoutNetwork"+(null!==this.layout?"("+this.layout.toString()+")":"");if(0>=t)return e;if(e+=" vertexes: "+this.kf.count+" edges: "+this.pe.count,1<t){for(var n=this.kf.iterator;n.next();)e+="\n    "+n.value.toString(t-1);for(n=this.pe.iterator;n.next();)e+="\n    "+n.value.toString(t-1)}return e},Jt.prototype.createVertex=function(){return new tn(this)},Jt.prototype.createEdge=function(){return new si(this)},Jt.prototype.eg=function(t,e,n){if(null!==t){for(void 0===e&&(e=!1),void 0===n&&(n=null),null===n&&(n=function(c){if(c instanceof Z)return!c.isLinkLabel;if(c instanceof z){var d=c.fromNode;return null!==d&&!d.isLinkLabel&&!(null===(c=c.toNode)||c.isLinkLabel)}return!1}),t=t.iterator;t.next();){var s=t.value;if(s instanceof Z&&(!e||s.isTopLevel)&&s.canLayout()&&n(s))if(s instanceof wt&&null===s.layout)this.eg(s.memberParts,!1);else if(null===this.ei(s)){var l=this.createVertex();l.node=s,this.fg(l)}}for(t.reset();t.next();)if((s=t.value)instanceof z&&(!e||s.isTopLevel)&&s.canLayout()&&n(s)&&null===this.qo(s)){var u=s.fromNode;l=s.toNode,null!==u&&null!==l&&u!==l&&(u=this.findGroupVertex(u),l=this.findGroupVertex(l),null!==u&&null!==l&&this.Qj(u,l,s))}}},Jt.prototype.findGroupVertex=function(t){if(null===t)return null;var e=t.findVisibleNode();if(null===e)return null;if(null!==(t=this.ei(e)))return t;for(e=e.containingGroup;null!==e;){if(null!==(t=this.ei(e)))return t;e=e.containingGroup}return null},(_=Jt.prototype).fg=function(t){if(null!==t){this.kf.add(t);var e=t.node;null!==e&&this.ds.add(e,t),t.network=this}},_.yj=function(t){if(null===t)return null;var e=this.ei(t);return null===e&&((e=this.createVertex()).node=t,this.fg(e)),e},_.su=function(t){if(null!==t&&dD(this,t)){for(var e=t.wd,n=e.count-1;0<=n;n--){var s=e.K(n);this.Gj(s)}for(t=(e=t.Jd).count-1;0<=t;t--)n=e.K(t),this.Gj(n)}},_.Gy=function(t){null!==t&&null!==(t=this.ei(t))&&this.su(t)},_.ei=function(t){return null===t?null:this.ds.I(t)},_.ol=function(t){if(null!==t){mC(this,t);var e=t.toVertex;null!==e&&e.iu(t),null!==(e=t.fromVertex)&&e.gu(t)}},_.ky=function(t){if(null===t)return null;var e=t.fromNode,n=t.toNode,s=this.qo(t);return null===s?((s=this.createEdge()).link=t,null!==e&&(s.fromVertex=this.yj(e)),null!==n&&(s.toVertex=this.yj(n)),this.ol(s)):(s.fromVertex=null!==e?this.yj(e):null,s.toVertex=null!==n?this.yj(n):null),s},_.Gj=function(t){if(null!==t){var e=t.toVertex;null!==e&&e.ru(t),null!==(e=t.fromVertex)&&e.qu(t),yC(this,t)}},_.Fy=function(t){null!==t&&null!==(t=this.qo(t))&&this.Gj(t)},_.qo=function(t){return null===t?null:this.Yr.I(t)},_.Qj=function(t,e,n){if(null===t||null===e)return null;if(t.network===this&&e.network===this){var s=this.createEdge();return s.link=n,s.fromVertex=t,s.toVertex=e,this.ol(s),s}return null},_.Ol=function(t){if(null!==t){var e=t.fromVertex,n=t.toVertex;null!==e&&null!==n&&(e.qu(t),n.ru(t),t.Ol(),e.iu(t),n.gu(t))}},_.oo=function(){for(var t=ce(),e=this.pe.iterator;e.next();){var n=e.value;n.fromVertex===n.toVertex&&t.push(n)}for(e=t.length,n=0;n<e;n++)this.Gj(t[n]);It(t)},Jt.prototype.deleteArtificialVertexes=function(){for(var t=ce(),e=this.kf.iterator;e.next();){var n=e.value;null===n.node&&null===n.data&&t.push(n)}for(n=t.length,e=0;e<n;e++)this.su(t[e]);for(e=ce(),n=this.pe.iterator;n.next();){var s=n.value;null===s.link&&null===s.data&&e.push(s)}for(n=e.length,s=0;s<n;s++)this.Gj(e[s]);It(t),It(e)},Jt.prototype.Ix=function(t){void 0===t&&(t=!0),t&&(this.deleteArtificialVertexes(),function zE(t){for(var e=ce(),n=t.pe.iterator;n.next();){var s=n.value;null!==s.fromVertex&&null!==s.toVertex||e.push(s)}for(n=e.length,s=0;s<n;s++)t.Gj(e[s]);It(e)}(this),this.oo()),t=new tt;for(var e=!0;e;){e=!1;for(var n=this.kf.iterator;n.next();){var s=n.value;if(0<s.wd.count||0<s.Jd.count){e=this.layout.createNetwork(),t.add(e),vC(this,e,s),e=!0;break}}}return t.sort(function(l,u){return null===l||null===u||l===u?0:u.vertexes.count-l.vertexes.count}),t},Jt.prototype.My=function(){for(var t=new Q,e=this.kf.iterator;e.next();)t.add(e.value.node);for(e=this.pe.iterator;e.next();)t.add(e.value.link);return t},St.Object.defineProperties(Jt.prototype,{layout:{get:function(){return this.Kc},set:function(t){null!==t&&(this.Kc=t)}},vertexes:{get:function(){return this.kf}},edges:{get:function(){return this.pe}}}),Jt.prototype.findAllParts=Jt.prototype.My,Jt.prototype.splitIntoSubNetworks=Jt.prototype.Ix,Jt.prototype.deleteSelfEdges=Jt.prototype.oo,Jt.prototype.reverseEdge=Jt.prototype.Ol,Jt.prototype.linkVertexes=Jt.prototype.Qj,Jt.prototype.findEdge=Jt.prototype.qo,Jt.prototype.deleteLink=Jt.prototype.Fy,Jt.prototype.deleteEdge=Jt.prototype.Gj,Jt.prototype.addLink=Jt.prototype.ky,Jt.prototype.addEdge=Jt.prototype.ol,Jt.prototype.findVertex=Jt.prototype.ei,Jt.prototype.deleteNode=Jt.prototype.Gy,Jt.prototype.deleteVertex=Jt.prototype.su,Jt.prototype.addNode=Jt.prototype.yj,Jt.prototype.addVertex=Jt.prototype.fg,Jt.prototype.addParts=Jt.prototype.eg,Jt.className="LayoutNetwork",tn.prototype.serializeVertexProperties=function(t){t.id=Cn(this),t.key=this.node?this.node.key:this.data?this.data.yh:void 0,void 0===t.key&&(t.key=null),t.x=this.bounds.x,t.y=this.bounds.y,t.iA=this.bounds.width,t.pz=this.bounds.height,t.fx=this.focus.x,t.fy=this.focus.y;var e=[];this.wd.each(function(s){e.push(Cn(s))}),t.Gx=e;var n=[];this.Jd.each(function(s){n.push(Cn(s))}),t.Ow=n},tn.prototype.deserializeVertexProperties=function(t,e,n){if(null!==t){this.x=t.x,this.y=t.y,this.width=t.iA,this.height=t.pz,this.focusX=t.fx,this.focusY=t.fy;var s=this;t.Gx&&t.Gx.forEach(function(l){(l=n.get(l))&&s.wd.add(l)}),t.Ow&&t.Ow.forEach(function(l){(l=n.get(l))&&s.Jd.add(l)})}},tn.prototype.clear=function(){this.Lh=this.qb=null,this.wd=new tt,this.Jd=new tt},tn.prototype.toString=function(t){void 0===t&&(t=0);var e="LayoutVertex#"+Cn(this);if(0<t&&(e+=null!==this.node?"("+this.node.toString()+")":"",1<t)){t="";for(var n=!0,s=this.wd.iterator;s.next();){var l=s.value;n?n=!1:t+=",",t+=l.toString(0)}for(l="",n=!0,s=this.Jd.iterator;s.next();)n?n=!1:l+=",",l+=s.value.toString(0);e+=" sources: "+t+" destinations: "+l}return e},tn.prototype.commit=function(){var t=this.qb;if(null!==t){var e=this.bounds,n=t.bounds;Vt(n)?(n.x=e.x,n.y=e.y,n.width=e.width,n.height=e.height):t.bounds=e.copy()}else if(null!==(t=this.node)){if(e=this.bounds,!(t instanceof wt)){n=U.alloc();var s=this.network.layout.hi(t,n),l=t.locationObject.ia(ht);if(s.v()&&l.v())return t.moveTo(e.x+this.focusX-(l.x-s.x),e.y+this.focusY-(l.y-s.y)),void U.free(n);U.free(n)}t.moveTo(e.x,e.y)}},tn.prototype.iu=function(t){null!==t&&(this.wd.contains(t)||this.wd.add(t))},tn.prototype.ru=function(t){null!==t&&this.wd.remove(t)},tn.prototype.gu=function(t){null!==t&&(this.Jd.contains(t)||this.Jd.add(t))},tn.prototype.qu=function(t){null!==t&&this.Jd.remove(t)},St.Object.defineProperties(tn.prototype,{sourceEdgesArrayAccess:{get:function(){return this.wd._dataArray}},destinationEdgesArrayAccess:{get:function(){return this.Jd._dataArray}},data:{get:function(){return this.qb},set:function(t){if(this.qb=t,null!==t&&t.bounds){var e=t.bounds;t=e.x;var n=e.y,s=e.width;this.m.h(s/2,(e=e.height)/2),this.j.h(t,n,s,e)}}},node:{get:function(){return this.Lh},set:function(t){if(this.Lh!==t){this.Lh=t,t.Za();var e=this.network.layout,n=U.alloc(),s=e.hi(t,n);e=s.x;var l=s.y,u=s.width;if(s=s.height,isNaN(e)&&(e=0),isNaN(l)&&(l=0),this.j.h(e,l,u,s),U.free(n),!(t instanceof wt)&&(t=t.locationObject.ia(ht)).v())return void this.m.h(t.x-e,t.y-l);this.m.h(u/2,s/2)}}},bounds:{get:function(){return this.j},set:function(t){this.j.C(t)||this.j.assign(t)}},focus:{get:function(){return this.m},set:function(t){this.m.C(t)||this.m.assign(t)}},centerX:{get:function(){return this.j.x+this.m.x},set:function(t){var e=this.j;e.x+this.m.x!==t&&(e.ja(),e.x=t-this.m.x,e.freeze())}},centerY:{get:function(){return this.j.y+this.m.y},set:function(t){var e=this.j;e.y+this.m.y!==t&&(e.ja(),e.y=t-this.m.y,e.freeze())}},focusX:{get:function(){return this.m.x},set:function(t){var e=this.m;e.x!==t&&(e.ja(),e.x=t,e.freeze())}},focusY:{get:function(){return this.m.y},set:function(t){var e=this.m;e.y!==t&&(e.ja(),e.y=t,e.freeze())}},x:{get:function(){return this.j.x},set:function(t){var e=this.j;e.x!==t&&(e.ja(),e.x=t,e.freeze())}},y:{get:function(){return this.j.y},set:function(t){var e=this.j;e.y!==t&&(e.ja(),e.y=t,e.freeze())}},width:{get:function(){return this.j.width},set:function(t){var e=this.j;e.width!==t&&(e.ja(),e.width=t,e.freeze())}},height:{get:function(){return this.j.height},set:function(t){var e=this.j;e.height!==t&&(e.ja(),e.height=t,e.freeze())}},network:{get:function(){return this.nb},set:function(t){this.nb=t}},sourceVertexes:{get:function(){for(var t=new Q,e=this.sourceEdges;e.next();)t.add(e.value.fromVertex);return t.iterator}},destinationVertexes:{get:function(){for(var t=new Q,e=this.destinationEdges;e.next();)t.add(e.value.toVertex);return t.iterator}},vertexes:{get:function(){for(var t=new Q,e=this.sourceEdges;e.next();)t.add(e.value.fromVertex);for(e=this.destinationEdges;e.next();)t.add(e.value.toVertex);return t.iterator}},sourceEdges:{get:function(){return this.wd.iterator}},destinationEdges:{get:function(){return this.Jd.iterator}},edges:{get:function(){for(var t=new tt,e=this.sourceEdges;e.next();)t.add(e.value);for(e=this.destinationEdges;e.next();)t.add(e.value);return t.iterator}},edgesCount:{get:function(){return this.wd.count+this.Jd.count}}}),tn.prototype.deleteDestinationEdge=tn.prototype.qu,tn.prototype.addDestinationEdge=tn.prototype.gu,tn.prototype.deleteSourceEdge=tn.prototype.ru,tn.prototype.addSourceEdge=tn.prototype.iu,tn.className="LayoutVertex",tn.standardComparer=wC,tn.smartComparer=function(t,e){if(null!==t){if(null!==e){var n=e.Lh;if(null!==(t=t.Lh)){if(null!==n){for(e=t.text.toLocaleLowerCase().split(/([+-]?[.]?\d+(?:\.\d*)?(?:e[+-]?\d+)?)/),t=n.text.toLocaleLowerCase().split(/([+-]?[.]?\d+(?:\.\d*)?(?:e[+-]?\d+)?)/),n=0;n<e.length;n++)if(""!==t[n]&&void 0!==t[n]){var s=parseFloat(e[n]),l=parseFloat(t[n]);if(isNaN(s)){if(!isNaN(l))return 1;if(0!==e[n].localeCompare(t[n]))return e[n].localeCompare(t[n])}else{if(isNaN(l))return-1;if(s-l!=0)return s-l}}else if(""!==e[n])return 1;return""!==t[n]&&void 0!==t[n]?-1:0}return 1}return null!==n?-1:0}return 1}return null!==e?-1:0},si.prototype.clear=function(){this.jd=this.ad=this.Pk=this.qb=null},si.prototype.serializeEdgeProperties=function(t){t.id=Cn(this),t.key=this.link?this.link.key:this.data?this.data.yh:void 0,void 0===t.key&&(t.key=null),t.from=this.fromVertex?Cn(this.fromVertex):null,t.dA=this.toVertex?Cn(this.toVertex):null},si.prototype.deserializeEdgeProperties=function(t,e){if(null!==t){var n=e.get(t.from);n&&(this.fromVertex=n),(t=e.get(t.dA))&&(this.toVertex=t)}},si.prototype.toString=function(t){void 0===t&&(t=0);var e="LayoutEdge#"+Cn(this);return 0<t&&(e+=null!==this.Pk?"("+this.Pk.toString()+")":"",1<t&&(e+=" "+(this.ad?this.ad.toString():"null")+" --\x3e "+(this.jd?this.jd.toString():"null"))),e},si.prototype.Ol=function(){var t=this.ad;this.ad=this.jd,this.jd=t},si.prototype.commit=function(){},si.prototype.bx=function(t){return this.jd===t?this.ad:this.ad===t?this.jd:null},St.Object.defineProperties(si.prototype,{network:{get:function(){return this.hb},set:function(t){this.hb=t}},data:{get:function(){return this.qb},set:function(t){this.qb!==t&&(this.qb=t)}},link:{get:function(){return this.Pk},set:function(t){this.Pk!==t&&(this.Pk=t)}},fromVertex:{get:function(){return this.ad},set:function(t){this.ad!==t&&(this.ad=t)}},toVertex:{get:function(){return this.jd},set:function(t){this.jd!==t&&(this.jd=t)}}}),si.prototype.getOtherVertex=si.prototype.bx,si.className="LayoutEdge",zt(Vn,Lt),Vn.prototype.cloneProtected=function(t){Lt.prototype.cloneProtected.call(this,t),t.co=this.co,t.bo=this.bo,t.pg.assign(this.pg),t.gf.assign(this.gf),t.Fb=this.Fb,t.Nb=this.Nb,t.fd=this.fd,t.Zc=this.Zc},Vn.prototype.ob=function(t){t.classType===Vn?t===eg||t===Da||t===wy||t===Xf?this.sorting=t:t===tg||t===lo?this.arrangement=t:t===qp||t===Yf?this.alignment=t:Y("Unknown enum value: "+t):Lt.prototype.ob.call(this,t)},Vn.prototype.doLayout=function(t){this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin);var e=this.Iw(t);t=this.diagram;for(var n=e.copy().iterator;n.next();){var s=n.value;if(!s.eh()||null===s.fromNode&&null===s.toNode){if(s.Za(),s instanceof wt)for(s=s.memberParts;s.next();)e.remove(s.value)}else e.remove(s)}var l=e.Ea();if(0!==l.length){switch(this.sorting){case Xf:l.reverse();break;case eg:l.sort(this.comparer);break;case Da:l.sort(this.comparer),l.reverse()}var u=this.wrappingColumn;isNaN(u)&&(u=0);var c=this.wrappingWidth;switch(isNaN(c)&&null!==t?(e=t.padding,c=Math.max(t.viewportBounds.width-e.left-e.right,0)):c=Math.max(this.wrappingWidth,0),0>=u&&0>=c&&(u=1),e=this.spacing.width,isFinite(e)||(e=0),n=this.spacing.height,isFinite(n)||(n=0),null!==t&&t.Da("Layout"),s=[],this.alignment){case Yf:var d=e,p=n,g=U.alloc(),y=Math.max(this.cellSize.width,1);if(!isFinite(y))for(var w=y=0;w<l.length;w++){var C=this.hi(l[w],g);y=Math.max(y,C.width)}if(y=Math.max(y+d,1),w=Math.max(this.cellSize.height,1),!isFinite(w))for(C=w=0;C<l.length;C++){var D=this.hi(l[C],g);w=Math.max(w,D.height)}w=Math.max(w+p,1),C=this.arrangement;for(var M=D=this.arrangementOrigin.x,E=this.arrangementOrigin.y,I=0,P=0,k=0;k<l.length;k++){var b=l[k],O=this.hi(b,g),L=Math.ceil((O.width+d)/y)*y,H=Math.ceil((O.height+p)/w)*w;if(C===lo)var J=Math.abs(M-O.width);else J=M+O.width;(0<u&&I>u-1||0<c&&0<I&&J-D>c)&&(s.push(new U(0,E,c+d,P)),I=0,M=D,E+=P,P=0),P=Math.max(P,H),b.moveTo(M+(O=C===lo?-O.width:0),E),C===lo?M-=L:M+=L,I++}s.push(new U(0,E,c+d,P)),U.free(g);break;case qp:for(p=c,y=u,w=e,C=n,c=U.alloc(),D=Math.max(this.cellSize.width,1),u=E=g=0,d=A.alloc(),M=0;M<l.length;M++)I=this.hi(P=l[M],c),P=Qa(P,P.locationObject,P.locationSpot,d),g=Math.max(g,P.x),E=Math.max(E,I.width-P.x),u=Math.max(u,P.y);(M=this.arrangement)===lo?g+=w:E+=w,D=isFinite(D)?Math.max(D+w,1):Math.max(g+E,1);var nt=P=this.arrangementOrigin.x;for(k=this.arrangementOrigin.y,E=0,p>=g&&(p-=g),g=b=0,L=Math.max(this.cellSize.height,1),O=u=0,H=!0,I=A.alloc(),J=0;J<l.length;J++){var et=l[J],q=this.hi(et,c),G=Qa(et,et.locationObject,et.locationSpot,d);if(0<E?M===lo?(nt=(nt-P-(q.width-G.x))/D,nt=(nt=R.ca(Math.round(nt),nt)?Math.round(nt):Math.floor(nt))*D+P):(nt=(nt-P+G.x)/D,nt=(nt=R.ca(Math.round(nt),nt)?Math.round(nt):Math.ceil(nt))*D+P):b=M===lo?nt+G.x+q.width:nt-G.x,M===lo)var Mt=-(nt+G.x)+b;else Mt=nt+q.width-G.x-b;if(0<y&&E>y-1||0<p&&0<E&&Mt>p){for(s.push(new U(0,H?k-u:k,p+w,O+u+C)),nt=0;nt<E&&J!==E;nt++){var pt=Qa(Mt=l[J-E+nt],Mt.locationObject,Mt.locationSpot,I);Mt.moveTo(Mt.position.x,Mt.position.y+u-pt.y)}O+=C,k=H?k+O:k+(O+u),E=O=u=0,nt=P,H=!1}nt===P&&(g=M===lo?Math.max(g,q.width-G.x):Math.min(g,-G.x)),u=Math.max(u,G.y),O=Math.max(O,q.height-G.y),isFinite(L)&&(O=Math.max(O,Math.max(q.height,L)-G.y)),et.moveTo(nt-G.x,H?k-G.y:k),M===lo?nt-=G.x+w:nt+=q.width-G.x+w,E++}if(s.push(new U(0,k,p+w,(H?O:O+u)+C)),l.length!==E)for(p=0;p<E;p++)w=Qa(y=l[l.length-E+p],y.locationObject,y.locationSpot,d),y.moveTo(y.position.x,y.position.y+u-w.y);if(A.free(d),A.free(I),M===lo)for(l=0;l<s.length;l++)(u=s[l]).width+=g,u.x-=g;else for(l=0;l<s.length;l++)(u=s[l]).x>g&&(u.width+=u.x-g,u.x=g);U.free(c)}for(d=u=c=l=0;d<s.length;d++)p=s[d],l=Math.min(l,p.x),c=Math.min(c,p.y),u=Math.max(u,p.x+p.width);this.commitLayers(s,new A(this.arrangement===lo?l+e/2-(u+l):l-e/2,c-n/2)),null!==t&&t.eb("Layout"),this.isValidLayout=!0}},Vn.prototype.commitLayers=function(){},St.Object.defineProperties(Vn.prototype,{wrappingWidth:{get:function(){return this.co},set:function(t){this.co!==t&&(0<t||isNaN(t))&&(this.co=t,this.isViewportSized=isNaN(t),this.D())}},wrappingColumn:{get:function(){return this.bo},set:function(t){this.bo!==t&&(0<t||isNaN(t))&&(this.bo=t,this.D())}},cellSize:{get:function(){return this.pg},set:function(t){this.pg.C(t)||(this.pg.assign(t),this.D())}},spacing:{get:function(){return this.gf},set:function(t){this.gf.C(t)||(this.gf.assign(t),this.D())}},alignment:{get:function(){return this.Fb},set:function(t){this.Fb===t||t!==qp&&t!==Yf||(this.Fb=t,this.D())}},arrangement:{get:function(){return this.Nb},set:function(t){this.Nb===t||t!==tg&&t!==lo||(this.Nb=t,this.D())}},sorting:{get:function(){return this.fd},set:function(t){this.fd===t||t!==wy&&t!==Xf&&t!==eg&&t!==Da||(this.fd=t,this.D())}},comparer:{get:function(){return this.Zc},set:function(t){this.Zc!==t&&(this.Zc=t,this.D())}}});var Yf=new K(Vn,"Position",0),qp=new K(Vn,"Location",1),tg=new K(Vn,"LeftToRight",2),lo=new K(Vn,"RightToLeft",3),wy=new K(Vn,"Forward",4),Xf=new K(Vn,"Reverse",5),eg=new K(Vn,"Ascending",6),Da=new K(Vn,"Descending",7);function Bt(){this.vn=new Q,this.kn=new Q,this.Ma=new Q,this.Se=new xt,this.Re=new xt,this.Wi=new xt,this.H=null,this.Xo=!1}function xC(t,e,n){if(null!=e&&!t.diagram.undoManager.isUndoingRedoing&&!t.Se.contains(e)){void 0===n&&(n=!0);t:{if(null!=e&&!t.H.undoManager.isUndoingRedoing&&!t.Se.contains(e)){var s=t.uo(e),l=CC(t,e,s);if(null!==l&&(Do(l),null!==(l=l.copy()))){var u=t.diagram.skipsModelSourceBindings;t.diagram.skipsModelSourceBindings=!0,l.Jf=s,l.qb=e,t.Xo&&(l.zg="Tool"),t.diagram.add(l),l.qb=null,l.data=e,t.diagram.skipsModelSourceBindings=u,s=l;break t}}s=null}null!==s&&n&&t.resolveReferencesForData(e)}}function CC(t,e,n){var s=(t=t.H).model;return s.Oj()&&s.Ku(e)?null===(e=t.groupTemplateMap.I(n))&&null===(e=t.groupTemplateMap.I(""))&&(nc||(nc=!0,wi('No Group template found for category "'+n+'"'),wi("  Using default group template")),e=t.Rx):null===(e=t.nodeTemplateMap.I(n))&&null===(e=t.nodeTemplateMap.I(""))&&(Cy||(Cy=!0,wi('No Node template found for category "'+n+'"'),wi("  Using default node template")),e=t.Tx),e}function xy(t,e,n){for(var s in n){var l=e[s],u=n[s];if(_n(u)){if(!_n(l)||l.length<u.length)return!1;for(var c=0;c<l.length;c++){var d=u[c];if(void 0!==d&&!MC(t,l[c],d))return!1}}else if(!MC(t,l,u))return!1}return!0}function MC(t,e,n){if("function"==typeof n){if(!n(e))return!1}else if(n instanceof RegExp){if(!e||!n.test(e.toString()))return!1}else if(Vt(e)&&Vt(n)){if(!xy(t,e,n))return!1}else if(e!==n)return!1;return!0}function dw(t,e){var n=e.xh;if(_n(n)){var s=t.Wi.I(n);if(null===s)(s=[]).push(e),t.Wi.add(n,s);else{for(t=0;t<s.length;t++)if(s[t]===e)return;s.push(e)}}}function Jf(t,e,n){Kn(e,function(c){for(var d=(c=c.R.s).length,p=0;p<d;p++)s0(n,c[p])});var s=e.xh;if(_n(s)){var l=t.Wi.I(s);if(null!==l)for(var u=0;u<l.length;u++)if(l[u]===e){l.splice(u,1),0===l.length&&t.Wi.remove(s);break}}}function Yl(t,e,n,s,l){if(null===e||l&&!e.canCopy())return null;if(s.contains(e))return s.I(e);var u=t.copyPartData(e,n);if(!(u instanceof ut))return null;if(u.isSelected=!1,u.isHighlighted=!1,s.add(e,u),e instanceof Z){for(var c=e.linksConnected;c.next();){var d=c.value;if(d.fromNode===e){var p=s.I(d);null!==p&&(p.fromNode=u)}d.toNode===e&&null!==(d=s.I(d))&&(d.toNode=u)}if(e instanceof wt&&u instanceof wt)for(e=e.memberParts;e.next();)(c=Yl(t,e.value,n,s,l))instanceof z||null===c||(c.containingGroup=u)}else if(e instanceof z&&u instanceof z)for(null!==(c=e.fromNode)&&null!==(c=s.I(c))&&(u.fromNode=c),null!==(c=e.toNode)&&null!==(c=s.I(c))&&(u.toNode=c),e=e.labelNodes;e.next();)null!==(c=Yl(t,e.value,n,s,l))&&c instanceof Z&&(c.labeledLink=u);return u}Vn.className="GridLayout",Vn.standardComparer=Kl,Vn.smartComparer=function(t,e){if(null!==t){if(null!==e){t=t.text.toLocaleLowerCase().split(/([+-]?[.]?\d+(?:\.\d*)?(?:e[+-]?\d+)?)/),e=e.text.toLocaleLowerCase().split(/([+-]?[.]?\d+(?:\.\d*)?(?:e[+-]?\d+)?)/);for(var n=0;n<t.length;n++)if(""!==e[n]&&void 0!==e[n]){var s=parseFloat(t[n]),l=parseFloat(e[n]);if(isNaN(s)){if(!isNaN(l))return 1;if(0!==t[n].localeCompare(e[n]))return t[n].localeCompare(e[n])}else{if(isNaN(l))return-1;if(s-l!=0)return s-l}}else if(""!==t[n])return 1;return""!==e[n]&&void 0!==e[n]?-1:0}return 1}return null!==e?-1:0},Vn.Position=Yf,Vn.Location=qp,Vn.LeftToRight=tg,Vn.RightToLeft=lo,Vn.Forward=wy,Vn.Reverse=Xf,Vn.Ascending=eg,Vn.Descending=Da,(_=Bt.prototype).clear=function(){this.vn.clear(),this.kn.clear(),this.Ma.clear(),this.Se.clear(),this.Re.clear(),this.Wi.clear()},_.Le=function(t){this.H=t},_.ii=function(t){if(t instanceof Z){if(this.vn.add(t),t instanceof wt){var e=t.containingGroup;null===e?this.H.Uh.add(t):e.Vk.add(t),null!==(e=t.layout)&&(e.diagram=this.H)}}else t instanceof z?this.kn.add(t):t instanceof At||this.Ma.add(t);null===(e=t.data)||t instanceof At||(t instanceof z?this.Re.add(e,t):this.Se.add(e,t))},_.lc=function(t){if(t.zj(),t instanceof Z){if(this.vn.remove(t),t instanceof wt){var e=t.containingGroup;null===e?this.H.Uh.remove(t):e.Vk.remove(t),null!==(e=t.layout)&&(e.diagram=null)}}else t instanceof z?this.kn.remove(t):t instanceof At||this.Ma.remove(t);null===(e=t.data)||t instanceof At||(t instanceof z?this.Re.remove(e):this.Se.remove(e))},_.Od=function(){var t=this.H;if(null!==t){for(var e=t.nodeTemplateMap.iterator;e.next();){var n=e.value,s=e.key;(!n.Tc()||n instanceof wt)&&Y('Invalid node template in Diagram.nodeTemplateMap: template for "'+s+'" must be a Node or a simple Part, not a Group or Link: '+n)}for(e=t.groupTemplateMap.iterator;e.next();)s=e.key,(n=e.value)instanceof wt||Y('Invalid group template in Diagram.groupTemplateMap: template for "'+s+'" must be a Group, not a normal Node or Link: '+n);for(e=t.linkTemplateMap.iterator;e.next();)s=e.key,(n=e.value)instanceof z||Y('Invalid link template in Diagram.linkTemplateMap: template for "'+s+'" must be a Link, not a normal Node or simple Part: '+n);for(e=ce(),n=t.selection.iterator;n.next();)(s=n.value.data)&&e.push(s);for(n=ce(),t=t.highlighteds.iterator;t.next();)(s=t.value.data)&&n.push(s);for(t=ce(),s=this.nodes.iterator;s.next();){var l=s.value;null!==l.data&&(t.push(l.data),t.push(l.location))}for(s=this.links.iterator;s.next();)null!==(l=s.value).data&&(t.push(l.data),t.push(l.location));for(s=this.parts.iterator;s.next();)null!==(l=s.value).data&&(t.push(l.data),t.push(l.location));for(this.removeAllModeledParts(),this.addAllModeledParts(),s=0;s<e.length;s++)null!==(l=this.Ec(e[s]))&&(l.isSelected=!0);for(s=0;s<n.length;s++)null!==(l=this.Ec(n[s]))&&(l.isHighlighted=!0);for(s=0;s<t.length;s+=2)null!==(l=this.Ec(t[s]))&&(l.location=t[s+1]);It(e),It(n),It(t)}},Bt.prototype.addAllModeledParts=function(){this.addModeledParts(this.diagram.model.nodeDataArray)},Bt.prototype.addModeledParts=function(t,e){var n=this,s=this.diagram.model;t.forEach(function(l){s.lb(l)&&xC(n,l,!1)}),t.forEach(function(l){s.lb(l)&&n.resolveReferencesForData(l)}),!1!==e&&mm(this.diagram,!1)},Bt.prototype.insertLink=function(){return null},Bt.prototype.resolveReferencesForData=function(){},Bt.prototype.uo=function(t){return this.H.model.uo(t)},Bt.prototype.getLinkCategoryForData=function(){return""},Bt.prototype.setLinkCategoryForData=function(){},Bt.prototype.setFromNodeForLink=function(){},Bt.prototype.setToNodeForLink=function(){},Bt.prototype.findLinkTemplateForCategory=function(t){var e=this.H,n=e.linkTemplateMap.I(t);return null===n&&null===(n=e.linkTemplateMap.I(""))&&(My||(My=!0,wi('No Link template found for category "'+t+'"'),wi("  Using default link template")),n=e.Sx),n},Bt.prototype.removeAllModeledParts=function(){this.gs(this.diagram.model.nodeDataArray)},Bt.prototype.gs=function(t){var e=this;t.forEach(function(n){e.Lo(n)})},Bt.prototype.Lo=function(t){null!==(t=this.Ec(t))&&(cm(this.diagram,t,!1),this.unresolveReferencesForPart(t))},Bt.prototype.unresolveReferencesForPart=function(){},Bt.prototype.removeDataForLink=function(){},Bt.prototype.findPartForKey=function(t){return null==t?null:null!==(t=this.H.model.dc(t))?this.Se.I(t):null},Bt.prototype.Lb=function(t){return null==t||null===(t=this.H.model.dc(t))?null:(t=this.Se.I(t))instanceof Z?t:null},Bt.prototype.findLinkForKey=function(){return null},(_=Bt.prototype).Ec=function(t){if(null===t)return null;var e=this.Se.I(t);return null!==e?e:e=this.Re.I(t)},_.ci=function(t){return null===t?null:(t=this.Se.I(t))instanceof Z?t:null},_.Dc=function(t){return null===t?null:this.Re.I(t)},_.Jr=function(t){for(var e=0;e<arguments.length;++e);e=new Q;for(var n=this.vn.iterator;n.next();){var s=n.value,l=s.data;if(null!==l)for(var u=0;u<arguments.length;u++){var c=arguments[u];if(Vt(c)&&xy(this,l,c)){e.add(s);break}}}return e.iterator},_.Ir=function(t){for(var e=0;e<arguments.length;++e);e=new Q;for(var n=this.kn.iterator;n.next();){var s=n.value,l=s.data;if(null!==l)for(var u=0;u<arguments.length;u++){var c=arguments[u];if(Vt(c)&&xy(this,l,c)){e.add(s);break}}}return e.iterator},Bt.prototype.doModelChanged=function(t){if(this.H){var e=this.H;if(t.model===e.model){var n=t.change;if(e.doModelChanged(t),e.$){e.$=!1;try{var s=t.modelChange;if(""!==s)if(n===re){if("nodeCategory"===s){var l=this.Ec(t.object),u=t.newValue;null!==l&&"string"==typeof u&&(l.category=u)}else"nodeDataArray"===s&&(this.gs(t.oldValue),this.addModeledParts(t.newValue));e.isModified=!0}else if(n===un){var c=t.newValue;"nodeDataArray"===s&&Vt(c)&&xC(this,c),e.isModified=!0}else if(n===Me){var d=t.oldValue;"nodeDataArray"===s&&Vt(d)&&this.Lo(d),e.isModified=!0}else n===ps&&("SourceChanged"===s?null!==t.object?this.updateDataBindings(t.object,t.propertyName):(this.Uo(),this.updateAllTargetBindings()):"ModelDisplaced"===s&&this.Od());else if(n===re){var p=t.propertyName,g=t.object;g===e.model?("nodeKeyProperty"===p||"nodeCategoryProperty"===p)&&(e.undoManager.isUndoingRedoing||this.Od()):this.updateDataBindings(g,p),e.isModified=!0}else if(n===un||n===Me){var y=t.change===un,w=y?t.newParam:t.oldParam,C=y?t.newValue:t.oldValue,D=this.Wi.I(t.object);if(Array.isArray(D))for(t=0;t<D.length;t++){var M=D[t];if(y)b0(M,C,w,!0);else if(!(0>w)){var E=w+Kh(M);M.lc(E,!0),U1(M,E,w)}}e.isModified=!0}}finally{e.$=!0}}}}},Bt.prototype.updateAllTargetBindings=function(t){void 0===t&&(t="");for(var e=this.parts.iterator;e.next();)e.value.Ka(t);for(e=this.nodes.iterator;e.next();)e.value.Ka(t);for(e=this.links.iterator;e.next();)e.value.Ka(t)},Bt.prototype.Uo=function(){for(var t=this.H.model,e=new Q,n=t.nodeDataArray,s=0;s<n.length;s++)e.add(n[s]);var l=[];for(this.nodes.each(function(c){null===c.data||e.contains(c.data)||l.push(c.data)}),this.parts.each(function(c){null===c.data||e.contains(c.data)||l.push(c.data)}),l.forEach(function(c){vw(t,c,!1)}),s=0;s<n.length;s++){var u=n[s];null===this.Ec(u)&&_y(t,u,!1)}for(this.refreshDataBoundLinks(),n=this.parts.iterator;n.next();)n.value.updateRelationshipsFromData();for(n=this.nodes.iterator;n.next();)n.value.updateRelationshipsFromData();for(n=this.links.iterator;n.next();)n.value.updateRelationshipsFromData()},Bt.prototype.refreshDataBoundLinks=function(){},Bt.prototype.updateRelationshipsFromData=function(){},Bt.prototype.updateDataBindings=function(t,e){if("string"==typeof e){var n=this.Ec(t);if(null!==n)n.Ka(e);else{n=null;for(var s=this.Wi.iterator;s.next();){for(var l=s.value,u=0;u<l.length;u++){var c=l[u].Uw(t);null!==c&&(null===n&&(n=ce()),n.push(c))}if(null!==n)break}if(null!==n){for(s=0;s<n.length;s++)n[s].Ka(e);It(n)}}t===this.diagram.model.modelData&&this.updateAllTargetBindings(e)}},Bt.prototype.Ej=function(t,e,n){void 0===n&&(n=!1);var s=new xt;if(_n(t))for(var l=0;l<t.length;l++)Yl(this,t[l],e,s,n);else for(t=t.iterator;t.next();)Yl(this,t.value,e,s,n);if(null!==e){n=e.model,t=null!==(t=e.toolManager.findTool("Dragging"))?t.dragOptions.dragsLink:e.Em.dragsLink,l=new Q;for(var u=new xt,c=s.iterator;c.next();){var d=c.value;if(d instanceof z)t||null!==d.fromNode&&null!==d.toNode||l.add(d);else if(d instanceof Z&&null!==d.data&&n.Bl()){var p=d,g=(d=c.key).ig();null!==g&&(null!==(g=s.I(g))?(n.ie(p.data,n.ua(g.data)),p=e.Dc(p.data),null!==(d=d.$g())&&null!==p&&u.add(d,p)):n.ie(p.data,void 0))}}if(0<l.count&&e.hs(l,!1),0<u.count)for(n=u.iterator;n.next();)s.add(n.key,n.value)}if(null!==e&&null!==this.H&&null!==(n=(e=e.model).afterCopyFunction)){var y=new xt;s.each(function(w){null!==w.key.data&&y.add(w.key.data,w.value.data)}),n(y,e,this.H.model)}for(e=s.iterator;e.next();)e.value.Ka();return s},Bt.prototype.copyPartData=function(t,e){var n=null,s=t.data;if(null!==s&&null!==e){var l=e.model;t instanceof z||Vt(s=l.copyNodeData(s))&&(l.lf(s),n=e.Ec(s))}else Do(t),null!==(n=t.copy())&&(l=this.H,null!==e?e.add(n):null!==s&&null!==l&&null!==l.commandHandler&&l.commandHandler.copiesClipboardData&&(e=l.model,l=null,n instanceof z||(l=e.copyNodeData(s)),Vt(l)&&(n.data=l)));return n},St.Object.defineProperties(Bt.prototype,{nodes:{get:function(){return this.vn}},links:{get:function(){return this.kn}},parts:{get:function(){return this.Ma}},diagram:{get:function(){return this.H}},addsToTemporaryLayer:{get:function(){return this.Xo},set:function(t){this.Xo=t}}}),Bt.prototype.updateAllRelationshipsFromData=Bt.prototype.Uo,Bt.prototype.findLinksByExample=Bt.prototype.Ir,Bt.prototype.findNodesByExample=Bt.prototype.Jr,Bt.prototype.findLinkForData=Bt.prototype.Dc,Bt.prototype.findNodeForData=Bt.prototype.ci,Bt.prototype.findPartForData=Bt.prototype.Ec,Bt.prototype.findNodeForKey=Bt.prototype.Lb,Bt.prototype.removeModeledPart=Bt.prototype.Lo,Bt.prototype.removeModeledParts=Bt.prototype.gs,Bt.prototype.rebuildParts=Bt.prototype.Od;var Cy=!1,nc=!1,My=!1;function nn(t){Bt.apply(this,arguments)}function pw(t,e){e.forEach(function(n){gw(t,n)}),mm(t.diagram,!1)}function gw(t,e){if(null!=e&&!t.diagram.undoManager.isUndoingRedoing&&!t.Re.contains(e)){var n=t.getLinkCategoryForData(e),s=t.findLinkTemplateForCategory(n);if(null!==s){Do(s);var l=s.copy();if(null!==l){s=t.diagram.skipsModelSourceBindings,t.diagram.skipsModelSourceBindings=!0,l.Jf=n,l.qb=e;var u=td(n=t.diagram.model,e,!0);""!==u&&(l.fromPortId=u),void 0!==(u=Nr(n,e,!0))&&(u=t.Lb(u))instanceof Z&&(l.fromNode=u),""!==(u=td(n,e,!1))&&(l.toPortId=u),void 0!==(u=Nr(n,e,!1))&&(u=t.Lb(u))instanceof Z&&(l.toNode=u),n=n.vf(e),Array.isArray(n)&&n.forEach(function(c){null!==(c=t.Lb(c))&&(c.labeledLink=l)}),t.Xo&&(l.zg="Tool"),t.diagram.add(l),l.qb=null,l.data=e,t.diagram.skipsModelSourceBindings=s}}}}function Sy(t,e){e.forEach(function(n){t.Lo(n)})}function dr(){Bt.apply(this,arguments),this.Jg=null}function ng(t,e,n){if(null!==e&&null!==n&&null===n.$g()){var s=t.diagram.toolManager.findTool("Linking"),l=e,u=n;if(t.diagram.isTreePathToChildren||(l=n,u=e),(null===s||!Qd(s,l,u,null,!0))&&(e=t.getLinkCategoryForData(n.data),null!==(s=t.findLinkTemplateForCategory(e))&&(Do(s),null!==(s=s.copy())))){var c=t.diagram.skipsModelSourceBindings;t.diagram.skipsModelSourceBindings=!0,s.Jf=e,s.qb=n.data,s.fromNode=l,s.toNode=u,t.diagram.add(s),s.qb=null,s.data=n.data,t.diagram.skipsModelSourceBindings=c}}}function st(t,e){this.Zk=new Q,this.Xk=new Q,this.Av=',\n  "insertedNodeKeys": ',this.Px=',\n  "modifiedNodeData": ',this.Cv=',\n  "removedNodeKeys": ',this.kh=null,En(this),this.Am=this.va="",this.xg=!1,this.j={},this.Mc=[],this.kb=new xt,this.Mh="key",this.pk=this.Rk=null,this.rm=this.sm=!1,this.um=!0,this.fm=null,this.gj="category",this.Lf=new xt,this.ot=new tt,this.Mg=!1,this.m=null,this.undoManager=new Le,void 0!==t&&(_n(t)?this.nodeDataArray=t:Object.assign(this,t)),e&&Object.assign(this,e)}function Zf(t,e,n,s,l,u){function c(w,C){d?(void 0===w.__gohashid&&u.push(w),s.set(w,C)):(w=Pl++,s.set(w,C),l.set(w,e))}if(!Vt(e))return e;u||(u=[]);var d=Object.isExtensible(e);if(s||(s=new xt),d){var p=s.get(e);if(p)return p}else for(l||(l=new xt),p=l.iterator;p.next();){var g=p.key;if(p.value===e&&(g=s.get(g)))return g}if(Array.isArray(e)){c(e,p=[]);for(var y=0;y<e.length;y++)p.push(Zf(t,e[y],!1,s,l,u))}else if(e instanceof A||e instanceof gt||e instanceof U||e instanceof Ht||e instanceof ot)p=e.copy(),c(e,p);else{if(e instanceof Rt||e instanceof X||e instanceof K)return e;if(e instanceof tt)p=(new tt).addAll(Zf(t,e.Ea(),!1,s,l,u)),c(e,p);else if(e instanceof Q)p=(new Q).addAll(Zf(t,e.Ea(),!1,s,l,u)),c(e,p);else if(e instanceof xt)p=(new xt).addAll(Zf(t,e.Ea(),!1,s,l,u)),c(e,p);else if(e instanceof Date)p=new Date(e.getTime()),c(e,p);else if(e instanceof RegExp)p=new RegExp(e),c(e,p),p.lastIndex=e.lastIndex;else if("function"==typeof e.copy)p=e.copy(),c(e,p);else for(y in c(e,p={}),e)"__gohashid"!==y&&(p[y]=Zf(t,e[y],!1,s,l,u))}return n&&u.forEach(function(w){delete w.__gohashid}),p}function pD(t,e){Vt(e=e.modelData)&&(t.Ll(e),t.modelData=e)}function SC(t,e){function n(l,u){if((u=u.part)&&l!==(u=u.data)){var c=s.get(l);null===c?((c=new Q).add(u),s.add(l,c)):c.add(u)}}var s=t.kh;null===s&&(s=new xt,e.changes.each(function(l){if(null!==l.diagram){var u=l.change;u===re?(l=l.object.panel)&&(u=l.data)&&n(u,l):(u===un||u===Me)&&(u=(l=l.object).itemArray)&&n(u,l)}}),t.kh=s)}function mw(t,e){for(var n=new Q,s=0;s<t.nodeDataArray.length;s++){var l=t.nodeDataArray[s];Dy(t,e,l,l,n)}return n}function Dy(t,e,n,s,l){if(Array.isArray(n))for(var u=0;u<n.length;u++){var c=n[u];if(c===e)return l.add(s),!0;if(Dy(t,e,c,s,l))return!0}else if(Vt(n)&&Object.getPrototypeOf(n)===Object.prototype)for(u in n){if((c=n[u])===e)return l.add(s),!0;if(Dy(t,e,c,s,l))return!0}return!1}function ol(t,e,n){void 0===n&&(n=!1);var s=e.length;if(0>=s)return"[]";var l=new Ev;l.add("["),n&&1<s&&l.add("\n");for(var u=0;u<s;u++){var c=e[u];void 0!==c&&(0<u&&(l.add(","),n&&l.add("\n")),l.add(t.bm(c)))}return n&&1<s&&l.add("\n"),l.add("]"),l.toString()}function yw(t,e){return void 0===e||"__gohashid"===t||"_"===t[0]||"function"==typeof e}function _i(t){return isNaN(t)?"NaN":t===1/0?"9e9999":t===-1/0?"-9e9999":t}function To(t,e){var n=e;if(n instanceof A)e={class:"go.Point",x:_i(n.x),y:_i(n.y)};else if(n instanceof gt)e={class:"go.Size",width:_i(n.width),height:_i(n.height)};else if(n instanceof U)e={class:"go.Rect",x:_i(n.x),y:_i(n.y),width:_i(n.width),height:_i(n.height)};else if(n instanceof Ht)e={class:"go.Margin",top:_i(n.top),right:_i(n.right),bottom:_i(n.bottom),left:_i(n.left)};else if(n instanceof ot)e=n.pb()?{class:"go.Spot",x:_i(n.x),y:_i(n.y),offsetX:_i(n.offsetX),offsetY:_i(n.offsetY)}:{class:"go.Spot",enum:n.toString()};else if(n instanceof Rt){if(e={class:"go.Brush",type:n.type.name},n.type===oo?e.color=n.color:(n.type===ya||n.type===Ji)&&(e.start=n.start,e.end=n.end,n.type===Ji&&(0!==n.startRadius&&(e.startRadius=_i(n.startRadius)),isNaN(n.endRadius)||(e.endRadius=_i(n.endRadius)))),null!==n.colorStops){var s={};for(n=n.colorStops.iterator;n.next();)s[n.key]=n.value;e.colorStops=s}}else n instanceof X?(e={class:"go.Geometry",type:n.type.name},0!==n.startX&&(e.startX=_i(n.startX)),0!==n.startY&&(e.startY=_i(n.startY)),0!==n.endX&&(e.endX=_i(n.endX)),0!==n.endY&&(e.endY=_i(n.endY)),n.spot1.C(je)||(e.spot1=n.spot1),n.spot2.C(xr)||(e.spot2=n.spot2),n.type===X.m&&(e.path=X.ga(n))):n instanceof K&&(e={class:"go.EnumValue",classType:Qf(t,n.classType),name:n.name});for(var l in s="{",n=!0,e){var u=Be(e,l);if(!yw(l,u))if(n?n=!1:s+=",",s+=t.quote(l)+":","points"===l&&u instanceof tt){var c="[";for(u=u.iterator;u.next();){var d=u.value;1<c.length&&(c+=","),c+=t.bm(d.x),c+=",",c+=t.bm(d.y)}s+=c+="]"}else s+=t.bm(u)}return s+"}"}function pi(t){return"number"==typeof t?t:"NaN"===t?NaN:"9e9999"===t?1/0:"-9e9999"===t?-1/0:parseFloat(t)}function rn(t,e,n,s,l,u,c,d,p){void 0===d&&(d=null),void 0===p&&(p=null);var g=new Ne;g.model=t,g.change=n,g.modelChange=e,g.propertyName=s,g.object=l,g.oldValue=u,g.oldParam=d,g.newValue=c,g.newParam=p,t.Cr(g)}function Xl(t){return"number"==typeof t||"string"==typeof t}function _y(t,e,n){var s=t.ua(e);(void 0===s||t.kb.I(s)!==e)&&(t.Mu(e),void 0===(s=t.ua(e))&&Y("Model.makeNodeDataKeyUnique failed on "+e+".  Data not added to Model."),t.kb.add(s,e),s=null,n&&Cu(t.Mc,s=t.Mc.length,e),rn(t,"nodeDataArray",un,"nodeDataArray",t,null,e,null,s),t.Nl(e),t.Ml(e))}function vw(t,e,n){var s=t.ua(e);if(void 0!==s&&t.kb.remove(s),s=null,n){t:if(n=t.Mc,Array.isArray(n))s=n.indexOf(e);else{s=n.length;for(var l=0;l<s;l++)if(n[l]===e){s=l;break t}s=-1}if(0>s)return;en(t.Mc,s)}rn(t,"nodeDataArray",Me,"nodeDataArray",t,e,null,s,null),t.To(e)}function Ko(t,e,n){if(void 0!==e){var s=t.Lf.I(e);null===s&&(s=new Q,t.Lf.add(e,s)),s.add(n)}}function Yo(t,e,n){if(void 0!==e){var s=t.Lf.I(e);s instanceof Q&&(null==n?t.Lf.remove(e):(s.remove(n),0===s.count&&t.Lf.remove(e)))}}function ig(t,e){return void 0===e?null:(t=t.Lf.I(e))instanceof Q?t:null}function rg(t,e,n){if(t.copiesArrays&&Array.isArray(e)){var s=[];for(n=0;n<e.length;n++){var l=rg(t,e[n],t.copiesArrayObjects);s.push(l)}return En(s),s}if(n&&Vt(e)){for(s in n=(n=e.constructor)?new n:{},l=t.copiesKey||"string"!=typeof t.nodeKeyProperty?null:t.nodeKeyProperty,e)if("__gohashid"===s)n.__gohashid=void 0;else if(s===l)n[l]=void 0;else{var u=Be(e,s),c=Qf(t,u);"GraphObject"===c||"Diagram"===c||"Layer"===c||"RowColumnDefinition"===c||"AnimationManager"===c||"Tool"===c||"CommandHandler"===c||"Layout"===c||"InputEvent"===c||"DiagramEvent"===c||u instanceof st||u instanceof Le||u instanceof Pn||u instanceof Ne||(u=rg(t,u,!1)),se(n,s,u)}return En(n),n}return e instanceof A||e instanceof gt||e instanceof U||e instanceof ot||e instanceof Ht?e.copy():e}function ww(){return new st}function Qf(t,e){if("function"==typeof e){if(e.className)return e.className;if(e.name)return e.name}else if("object"==typeof e&&null!==e&&e.constructor)return Qf(t,e.constructor);return typeof e}function xw(t){return Eo[t]?Eo[t]:void 0!==mt.go&&mt.go[t]?mt.go[t]:null}function Be(t,e){if(!t||!e)return null;try{if("function"==typeof e)var n=e(t);else"function"==typeof t.getAttribute?null===(n=t.getAttribute(e))&&(n=void 0):n=t[e]}catch{}return n}function se(t,e,n){if(t&&e)try{"function"==typeof e?e(t,n):"function"==typeof t.setAttribute?t.setAttribute(e,n):t[e]=n}catch{}}Bt.className="PartManager",zt(nn,Bt),nn.prototype.addAllModeledParts=function(){var t=this.diagram.model;this.addModeledParts(t.nodeDataArray),pw(this,t.linkDataArray)},nn.prototype.addModeledParts=function(t){for(Bt.prototype.addModeledParts.call(this,t,!1),t=this.links.iterator;t.next();)ee(t.value);mm(this.diagram,!1)},nn.prototype.removeAllModeledParts=function(){var t=this.diagram.model;Sy(this,t.linkDataArray),this.gs(t.nodeDataArray)},nn.prototype.getLinkCategoryForData=function(t){return this.diagram.model.Mr(t)},nn.prototype.setLinkCategoryForData=function(t,e){return this.diagram.model.Oo(t,e)},nn.prototype.setFromNodeForLink=function(t,e){var n=this.diagram.model;n.cv(t.data,n.ua(null!==e?e.data:null))},nn.prototype.setToNodeForLink=function(t,e){var n=this.diagram.model;n.gv(t.data,n.ua(null!==e?e.data:null))},nn.prototype.removeDataForLink=function(t){this.diagram.model.Jl(t.data)},nn.prototype.findPartForKey=function(t){var e=Bt.prototype.findPartForKey.call(this,t);return null===e&&null!==(t=this.diagram.model.Zg(t))?this.Re.I(t):e},nn.prototype.findLinkForKey=function(t){return null==t?null:null!==(t=this.diagram.model.Zg(t))?this.Re.I(t):null},nn.prototype.doModelChanged=function(t){var e=this;if(Bt.prototype.doModelChanged.call(this,t),this.diagram){var n=this.diagram;if(t.model===n.model){var s=t.change;if(n.$){n.$=!1;try{var l=t.modelChange;if(""!==l){if(s===re){if("linkFromKey"===l){var u=this.Dc(t.object);if(null!==u){var c=this.Lb(t.newValue);u.fromNode=c}}else if("linkToKey"===l){var d=this.Dc(t.object);if(null!==d){var p=this.Lb(t.newValue);d.toNode=p}}else if("linkFromPortId"===l){var g=this.Dc(t.object);if(null!==g){var y=t.newValue;"string"==typeof y&&(g.fromPortId=y)}}else if("linkToPortId"===l){var w=this.Dc(t.object);if(null!==w){var C=t.newValue;"string"==typeof C&&(w.toPortId=C)}}else if("nodeGroupKey"===l){var D=this.Ec(t.object);if(null!==D){var M=t.newValue;if(void 0!==M){var E=this.Lb(M);D.containingGroup=E instanceof wt?E:null}else D.containingGroup=null}}else if("linkLabelKeys"===l){var I=this.Dc(t.object);if(null!==I){var P=t.oldValue,k=t.newValue;Array.isArray(P)&&P.forEach(function(G){0<=k.indexOf(G)||null!==(G=e.Lb(G))&&(G.labeledLink=null)}),Array.isArray(k)&&k.forEach(function(G){null!==(G=e.Lb(G))&&(G.labeledLink=I)})}}else if("linkCategory"===l){var b=this.Dc(t.object),O=t.newValue;null!==b&&"string"==typeof O&&(b.category=O)}else"linkDataArray"===l&&(Sy(this,t.oldValue),pw(this,t.newValue));n.isModified=!0}else if(s===un){var L=t.newValue;if("linkDataArray"===l&&"object"==typeof L&&null!==L)gw(this,L);else if("linkLabelKeys"===l&&Xl(L)){var H=this.Dc(t.object),J=this.Lb(L);null!==H&&null!==J&&(J.labeledLink=H)}n.isModified=!0}else if(s===Me){var nt=t.oldValue;if("linkDataArray"===l&&"object"==typeof nt&&null!==nt)this.Lo(nt);else if("linkLabelKeys"===l&&Xl(nt)){var et=this.Lb(nt);null!==et&&(et.labeledLink=null)}n.isModified=!0}}else if(s===re){var q=t.propertyName;t.object!==n.model||"linkFromKeyProperty"!==q&&"linkToKeyProperty"!==q&&"linkFromPortIdProperty"!==q&&"linkToPortIdProperty"!==q&&"linkLabelKeysProperty"!==q&&"nodeIsGroupProperty"!==q&&"nodeGroupKeyProperty"!==q&&"linkCategoryProperty"!==q||n.undoManager.isUndoingRedoing||this.Od(),n.isModified=!0}}finally{n.$=!0}}}}},nn.prototype.refreshDataBoundLinks=function(){var t=this,e=this.diagram.model,n=new Q,s=e.linkDataArray;s.forEach(function(u){n.add(u)});var l=[];this.links.each(function(u){null===u.data||n.contains(u.data)||l.push(u.data)}),l.forEach(function(u){og(e,u,!1)}),s.forEach(function(u){null===t.Dc(u)&&TC(e,u,!1)})},nn.prototype.updateRelationshipsFromData=function(t){var e=t.data;if(null!==e){var n=t.diagram;if(null!==n){var s=n.model;if(t instanceof z){var l=Nr(s,e,!0);if(l=n.Lb(l),t.fromNode=l,l=Nr(s,e,!1),l=n.Lb(l),t.toNode=l,0<(e=s.vf(e)).length||0<t.labelNodes.count){if(1===e.length&&1===t.labelNodes.count){l=e[0];var u=t.labelNodes.first();if(s.ua(u.data)===l)return}l=(new Q).addAll(e);var c=new Q;t.labelNodes.each(function(d){null!==d.data&&void 0!==(d=s.ua(d.data))&&c.add(d)}),(e=c.copy()).Ko(l),(l=l.copy()).Ko(c),(0<e.count||0<l.count)&&(e.each(function(d){null!==(d=n.Lb(d))&&d.labeledLink===t&&(d.labeledLink=null)}),l.each(function(d){null!==(d=n.Lb(d))&&d.labeledLink!==t&&(d.labeledLink=t)}))}}else!(t instanceof At)&&(e=s.ah(e),null===(e=n.findPartForKey(e))||e instanceof wt)&&(t.containingGroup=e)}}},nn.prototype.resolveReferencesForData=function(t){var e=this.diagram.model,n=e.ua(t);if(void 0!==n){var s=ig(e,n),l=this.Ec(t);if(null!==s&&null!==l){s=s.iterator;for(var u={};s.next();){var c=s.value;e.lb(c)?l instanceof wt&&e.ah(c)===n&&null!==(c=this.Ec(c))&&(c.containingGroup=l):(u.link=this.Dc(c),null!==u.link&&l instanceof Z&&(Nr(e,c,!0)===n&&(u.link.fromNode=l),Nr(e,c,!1)===n&&(u.link.toNode=l),c=e.vf(c),Array.isArray(c)&&c.some(function(d){return function(p){return p===n&&(l.labeledLink=d.link,!0)}}(u)))),u={link:u.link}}Yo(e,n)}void 0!==(t=e.ah(t))&&(t=this.Lb(t))instanceof wt&&(l.containingGroup=t)}},nn.prototype.unresolveReferencesForPart=function(t){var e=this.diagram.model;if(t instanceof Z){var n=e.ua(t.data);if(void 0!==n){for(var s=t.linksConnected;s.next();)Ko(e,n,s.value.data);if(t.isLinkLabel&&null!==(s=t.labeledLink)&&Ko(e,n,s.data),t instanceof wt)for(t=t.memberParts;t.next();)e.lb(s=t.value.data)&&Ko(e,n,s)}}},nn.prototype.copyPartData=function(t,e){var n=Bt.prototype.copyPartData.call(this,t,e);if(t instanceof z)if(null!==(t=t.data)&&null!==e){var s=e.model;"object"==typeof(t=s.no(t))&&null!==t&&(s.Yh(t),n=e.Dc(t))}else null!==n&&(e=this.diagram,null!==t&&null!==e&&null!==e.commandHandler&&e.commandHandler.copiesClipboardData&&"object"==typeof(e=e.model.no(t))&&null!==e&&(n.data=e));return n},nn.prototype.insertLink=function(t,e,n,s){var l=this.diagram,u=l.model,c=l.toolManager.findTool("Linking"),d="";if(null!==t&&(null===e&&(e=t),null===(d=e.portId)&&(d="")),e="",null!==n&&(null===s&&(s=n),null===(e=s.portId)&&(e="")),(s=c.archetypeLinkData)instanceof z){if(Do(s),null!==(u=s.copy()))return u.fromNode=t,u.fromPortId=d,u.toNode=n,u.toPortId=e,l.add(u),(t=c.archetypeLabelNodeData)instanceof Z&&(Do(t),null!==(t=t.copy())&&(t.labeledLink=u,l.add(t))),u}else if(null!==s&&"object"==typeof(s=u.no(s))&&null!==s)return null!==t&&qf(u,s,u.ua(t.data),!0),ed(u,s,d,!0),null!==n&&qf(u,s,u.ua(n.data),!1),ed(u,s,e,!1),u.Yh(s),null===(t=c.archetypeLabelNodeData)||t instanceof Z||"object"==typeof(t=u.copyNodeData(t))&&null!==t&&(u.lf(t),void 0!==(t=u.ua(t))&&u.hu(s,t)),l.Dc(s);return null},nn.prototype.findLinkForKey=nn.prototype.findLinkForKey,nn.prototype.findPartForKey=nn.prototype.findPartForKey,nn.prototype.removeAllModeledParts=nn.prototype.removeAllModeledParts,nn.prototype.addModeledParts=nn.prototype.addModeledParts,nn.prototype.addAllModeledParts=nn.prototype.addAllModeledParts,nn.className="GraphLinksPartManager",zt(dr,Bt),dr.prototype.getLinkCategoryForData=function(t){return this.diagram.model.Pr(t)},dr.prototype.setLinkCategoryForData=function(t,e){this.diagram.model.ms(t,e)},dr.prototype.setFromNodeForLink=function(t,e,n){var s=this.diagram.model;if(void 0===n&&(n=null),e=null!==e?e.data:null,this.diagram.isTreePathToChildren)s.ie(t.data,s.ua(e));else{var l=this.Jg;this.Jg=t,null!==n&&s.ie(n.data,void 0),s.ie(e,s.ua(null!==t.toNode?t.toNode.data:null)),this.Jg=l}},dr.prototype.setToNodeForLink=function(t,e,n){var s=this.diagram.model;if(void 0===n&&(n=null),e=null!==e?e.data:null,this.diagram.isTreePathToChildren){var l=this.Jg;this.Jg=t,null!==n&&s.ie(n.data,void 0),s.ie(e,s.ua(null!==t.fromNode?t.fromNode.data:null)),this.Jg=l}else s.ie(t.data,s.ua(e))},dr.prototype.removeDataForLink=function(t){this.diagram.model.ie(t.data,void 0)},dr.prototype.findLinkForKey=function(t){return null==t?null:null!==(t=this.diagram.model.dc(t))?this.Re.I(t):null},dr.prototype.doModelChanged=function(t){if(Bt.prototype.doModelChanged.call(this,t),this.diagram){var e=this.diagram;if(t.model===e.model){var n=t.change;if(e.$){e.$=!1;try{var s=t.modelChange;if(""!==s){if(n===re){if("nodeParentKey"===s){var l=t.object,u=this.Lb(t.newValue),c=this.ci(l);if(null!==this.Jg)null!==u&&(this.Jg.data=l,this.Jg.category=this.getLinkCategoryForData(l));else if(null!==c){var d=c.$g();null!==d?null===u?e.remove(d):e.isTreePathToChildren?d.fromNode=u:d.toNode=u:ng(this,u,c)}}else if("parentLinkCategory"===s){var p=this.ci(t.object),g=t.newValue;if(null!==p&&"string"==typeof g){var y=p.$g();null!==y&&(y.category=g)}}e.isModified=!0}}else n===re&&(t.object===e.model&&"nodeParentKeyProperty"===t.propertyName&&(e.undoManager.isUndoingRedoing||this.Od()),e.isModified=!0)}finally{e.$=!0}}}}},dr.prototype.updateRelationshipsFromData=function(t){var e=t.data;if(null!==e){var n=t.diagram;if(null!==n){var s=n.model;t instanceof Z&&(e=s.bh(e),(e=n.Lb(e))!==(s=t.ig())&&(s=t.$g(),null!==e?null!==s?n.isTreePathToChildren?s.fromNode=e:s.toNode=e:ng(this,e,t):null!==s&&cm(n,s,!1)))}}},dr.prototype.updateDataBindings=function(t,e){Bt.prototype.updateDataBindings.call(this,t,e),"string"==typeof e&&null!==this.Ec(t)&&null!==(t=this.Dc(t))&&t.Ka(e)},dr.prototype.resolveReferencesForData=function(t){var e=this.diagram.model,n=e.ua(t);if(void 0!==n){var s=ig(e,n),l=this.Ec(t);if(null!==s&&null!==l){for(s=s.iterator;s.next();){var u=s.value;e.lb(u)&&l instanceof Z&&e.bh(u)===n&&ng(this,l,this.ci(u))}Yo(e,n)}void 0!==(t=e.bh(t))&&l instanceof Z&&ng(this,t=this.Lb(t),l)}},dr.prototype.unresolveReferencesForPart=function(t){var e=this.diagram.model;if(t instanceof Z){var n=e.ua(t.data),s=this.Dc(t.data);if(null!==s){s.isSelected=!1,s.isHighlighted=!1;var l=s.layer;if(null!==l){var u=l.lc(-1,s,!1);0<=u&&this.diagram.bb(Me,"parts",l,s,null,u,null),null!==(u=s.layerChanged)&&u(s,l,null)}}for(s=this.diagram.isTreePathToChildren,t=t.linksConnected;t.next();)l=t.value,e.lb(l=(s?l.toNode:l.fromNode).data)&&Ko(e,n,l)}},dr.prototype.insertLink=function(t,e,n){e=this.diagram.model;var s=t,l=n;return this.diagram.isTreePathToChildren||(s=n,l=t),null!==s&&null!==l?(e.ie(l.data,e.ua(s.data)),l.$g()):null},dr.prototype.findLinkForKey=dr.prototype.findLinkForKey,dr.className="TreePartManager",st.prototype.cloneProtected=function(t){t.va=this.va,t.Am=this.Am,t.xg=this.xg,t.Mh=this.Mh,t.Rk=this.Rk,t.pk=this.pk,t.sm=this.sm,t.rm=this.rm,t.um=this.um,t.fm=this.fm,t.gj=this.gj},st.prototype.copy=function(){var t=new this.constructor;return this.cloneProtected(t),t},st.prototype.clear=function(){this.Mc=[],this.kb.clear(),this.Lf.clear(),this.undoManager.clear()},st.prototype.toString=function(t){if(void 0===t&&(t=0),1<t)return this.Qo();var e=(""!==this.name?this.name:"")+" Model";if(0<t){e+="\n node data:";for(var n=(t=this.nodeDataArray).length,s=0;s<n;s++){var l=t[s];e+=" "+this.ua(l)+":"+vo(l)}}return e},st.prototype.eA=function(t){t.change!==ps&&Y("Model.toIncrementalData argument is not a Transaction ChangedEvent:"+t.toString());var e=t.object;return t.isTransactionFinished&&e instanceof Pn?(SC(this,e),t=this.uv(e,"FinishedUndo"===t.propertyName),this.kh=null,t):null},st.prototype.uv=function(t,e){var n=this,s=!1,l=new Q,u=new Q,c=new Q,d=this.kh;t.changes.each(function(w){w.model===n&&("nodeDataArray"===w.modelChange?w.change===un?l.add(w.newValue):w.change===Me&&c.add(w.oldValue):n.lb(w.object)?u.add(w.object):w.change!==re||n.modelData!==w.object&&"modelData"!==w.propertyName?null!==w.object&&(d&&d.contains(w.object)?d.get(w.object).each(function(C){n.lb(C)&&u.add(C)}):w.object instanceof st||n.ki()&&n.Cc(w.object)||mw(n,w.object).each(function(C){u.add(C)})):s=!0)});var p=this.Xk;p.clear(),l.each(function(w){p.add(n.ua(w)),e||u.add(w)});var g=this.Zk;g.clear(),c.each(function(w){g.add(n.ua(w)),e&&u.add(w)}),t=n.cloneDeep(u.Ea());var y=null;return s&&(null===y&&(y={}),y.modelData=this.cloneDeep(this.modelData)),0<p.count&&(null===y&&(y={}),e?y.removedNodeKeys=p.Ea():y.insertedNodeKeys=p.Ea()),0<t.length&&(null===y&&(y={}),y.modifiedNodeData=t),0<g.count&&(null===y&&(y={}),e?y.insertedNodeKeys=g.Ea():y.removedNodeKeys=g.Ea()),g.clear(),p.clear(),y},st.prototype.cloneDeep=function(t){return Zf(this,t,!0)},(_=st.prototype).quote=function(t){return JSON.stringify(t).replace(/[\u007F-\uFFFF]/g,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).substr(-4)})},_.am=function(){var t="";return""!==this.name&&(t+=',\n  "name": '+this.quote(this.name)),""!==this.dataFormat&&(t+=',\n  "dataFormat": '+this.quote(this.dataFormat)),this.isReadOnly&&(t+=',\n  "isReadOnly": '+this.isReadOnly),"key"!==this.nodeKeyProperty&&"string"==typeof this.nodeKeyProperty&&(t+=',\n  "nodeKeyProperty": '+this.quote(this.nodeKeyProperty)),this.copiesArrays&&(t+=',\n  "copiesArrays": true'),this.copiesArrayObjects&&(t+=',\n  "copiesArrayObjects": true'),this.copiesKey||(t+=',\n  "copiesKey": false'),"category"!==this.nodeCategoryProperty&&"string"==typeof this.nodeCategoryProperty&&(t+=',\n  "nodeCategoryProperty": '+this.quote(this.nodeCategoryProperty)),t},_.Io=function(t){t.name&&(this.name=t.name),t.dataFormat&&(this.dataFormat=t.dataFormat),t.isReadOnly&&(this.isReadOnly=!0),t.nodeKeyProperty&&(this.nodeKeyProperty=t.nodeKeyProperty),t.copiesArrays&&(this.copiesArrays=!0),t.copiesArrayObjects&&(this.copiesArrayObjects=!0),!1===t.copiesKey&&(this.copiesKey=!1),t.nodeCategoryProperty&&(this.nodeCategoryProperty=t.nodeCategoryProperty)},_.vv=function(){var n,t=this.modelData,e=!1;for(n in t)if(!yw(n,t[n])){e=!0;break}return t="",e&&(t=',\n  "modelData": '+To(this,this.modelData)),t+',\n  "nodeDataArray": '+ol(this,this.nodeDataArray,!0)},_.Uu=function(t){pD(this,t),_n(t=t.nodeDataArray)&&(this.Ll(t),this.nodeDataArray=t)},_.tv=function(t,e){var n=this,s=!1,l=new Q,u=new Q,c=new Q,d=this.kh;t.changes.each(function(y){y.model===n&&("nodeDataArray"===y.modelChange?y.change===un?l.add(y.newValue):y.change===Me&&c.add(y.oldValue):n.lb(y.object)?u.add(y.object):y.change!==re||n.modelData!==y.object&&"modelData"!==y.propertyName?null!==y.object&&(d&&d.contains(y.object)?d.get(y.object).each(function(w){n.lb(w)&&u.add(w)}):y.object instanceof st||n.ki()&&n.Cc(y.object)||mw(n,y.object).each(function(w){u.add(w)})):s=!0)});var p=this.Xk;p.clear(),l.each(function(y){p.add(n.ua(y)),e||u.add(y)});var g=this.Zk;return g.clear(),c.each(function(y){g.add(n.ua(y)),e&&u.add(y)}),t="",s&&(t+=',\n  "modelData": '+To(this,this.modelData)),0<p.count&&(t+=(e?this.Cv:this.Av)+ol(this,p.Ea(),!0)),0<u.count&&(t+=this.Px+ol(this,u.Ea(),!0)),0<g.count&&(t+=(e?this.Av:this.Cv)+ol(this,g.Ea(),!0)),g.clear(),p.clear(),t},_.Ho=function(t){(void 0!==t.name&&t.name!==this.name||void 0!==t.dataFormat&&t.dataFormat!==this.dataFormat||void 0!==t.isReadOnly&&t.isReadOnly!==this.isReadOnly||void 0!==t.nodeKeyProperty&&t.nodeKeyProperty!==this.nodeKeyProperty||void 0!==t.copiesArrays&&t.copiesArrays!==this.copiesArrays||void 0!==t.copiesArrayObjects&&t.copiesArrayObjects!==this.copiesArrayObjects||void 0!==t.copiesKey&&t.copiesKey!==this.copiesKey||void 0!==t.nodeCategoryProperty&&t.nodeCategoryProperty!==this.nodeCategoryProperty)&&Y("applyIncrementalJson cannot change Model properties"),pD(this,t);var e=t.insertedNodeKeys,n=t.modifiedNodeData,s=new xt;if(Array.isArray(n))for(var l=0;l<n.length;l++){var u=n[l],c=this.ua(u);null!=c&&s.set(c,u)}if(Array.isArray(e))for(l=e.length,u=0;u<l;u++){var d=this.dc(c=e[u]);null===d&&(d=(d=s.get(c))?d:this.copyNodeData({}),this.Sl(d,c),this.lf(d))}if(Array.isArray(n))for(e=n.length,s=0;s<e;s++)if(u=this.ua(l=n[s]),null!==(u=this.dc(u))){for(var p in l)"__gohashid"===p||p===this.nodeKeyProperty||this.Nj()&&p===this.nodeIsGroupProperty||this.setDataProperty(u,p,l[p]);this.Tl(l,u)}if(t=t.removedNodeKeys,Array.isArray(t))for(n=t.length,p=0;p<n;p++)null!==(e=this.dc(t[p]))&&this.Kl(e)},_.Jx=function(t,e){t.change!==ps&&Y("Model.toIncrementalJson argument is not a Transaction ChangedEvent:"+t.toString());var n=t.object;return t.isTransactionFinished&&n instanceof Pn?(void 0===e&&(e=Qf(this,this)),SC(this,n),t=this.tv(n,"FinishedUndo"===t.propertyName),this.kh=null,"2"===e?'{ "incremental": 2'+t+"}":'{ "class": '+this.quote(e)+', "incremental": 1'+this.am()+t+"}"):'{ "incremental": 0 }'},_.fA=function(t,e){return this.Jx(t,e)},_.Qo=function(t){return void 0===t&&(t=Qf(this,this)),'{ "class": '+this.quote(t)+this.am()+this.vv()+"}"},_.toJSON=function(t){return this.Qo(t)},_.Dw=function(t){var e=null;if("string"==typeof t)try{e=mt.JSON.parse(t)}catch{}else"object"==typeof t?e=t:Y("Unable to modify a Model from: "+t);var n=e.incremental;"number"!=typeof n&&Y("Unable to apply non-incremental changes to Model: "+t),0!==n&&(this.Da("applyIncrementalJson"),this.Ho(e),this.eb("applyIncrementalJson"))},_.qy=function(t){return this.Dw(t)},st.constructGraphLinksModel=function(){return new st},(_=st.prototype).Ll=function(t){if(_n(t))for(var e=t.length,n=0;n<e;n++){var s=t[n];if(Vt(s)){var l=n;s=this.Ll(s),Array.isArray(t)?t[l]=s:Y("Cannot replace an object in an HTMLCollection or NodeList at "+l)}}else if(Vt(t)){for(e in t)if(Vt(n=t[e])&&(n=this.Ll(n),t[e]=n,"points"===e&&Array.isArray(n))){for(l=n.length%2==0,s=0;s<n.length;s++)if("number"!=typeof n[s]){l=!1;break}if(l){for(l=new tt,s=0;s<n.length/2;s++)l.add(new A(n[2*s],n[2*s+1]));l.freeze(),t[e]=l}}return function gD(t){if("object"!=typeof t)return t;var e=t.class||"";if("NaN"===e)return NaN;if("Date"===e)return new Date(t.value);if(0!==e.indexOf("go."))return t;var n=t;if("Point"===(e=e.substr(3)))n=new A(pi(t.x),pi(t.y));else if("Size"===e)n=new gt(pi(t.width),pi(t.height));else if("Rect"===e)n=new U(pi(t.x),pi(t.y),pi(t.width),pi(t.height));else if("Margin"===e)n=new Ht(pi(t.top),pi(t.right),pi(t.bottom),pi(t.left));else if("Spot"===e)n="string"==typeof t.enum?ds(t.enum):new ot(pi(t.x),pi(t.y),pi(t.offsetX),pi(t.offsetY));else if("Brush"===e){if((n=new Rt).type=ua(Rt,t.type),"string"==typeof t.color&&(n.color=t.color),t.start instanceof ot&&(n.start=t.start),t.end instanceof ot&&(n.end=t.end),"number"==typeof t.startRadius&&(n.startRadius=pi(t.startRadius)),"number"==typeof t.endRadius&&(n.endRadius=pi(t.endRadius)),Vt(t=t.colorStops))for(var s in t)n.addColorStop(parseFloat(s),t[s])}else"Geometry"===e?(n=null,(n="string"==typeof t.path?X.parse(t.path):new X).type=ua(X,t.type),"number"==typeof t.startX&&(n.startX=pi(t.startX)),"number"==typeof t.startY&&(n.startY=pi(t.startY)),"number"==typeof t.endX&&(n.endX=pi(t.endX)),"number"==typeof t.endY&&(n.endY=pi(t.endY)),t.spot1 instanceof ot&&(n.spot1=t.spot1),t.spot2 instanceof ot&&(n.spot2=t.spot2)):"EnumValue"===e&&(0===(s=t.classType).indexOf("go.")&&(s=s.substr(3)),"function"==typeof(s=xw(s))&&(n=ua(s,t.name)));return n}(t)}return t},_.bm=function(t){return void 0===t?"undefined":null===t?"null":!0===t?"true":!1===t?"false":"string"==typeof t?this.quote(t):"number"==typeof t?t===1/0?"9e9999":t===-1/0?"-9e9999":isNaN(t)?'{"class":"NaN"}':t.toString():t instanceof Date?'{"class":"Date", "value":"'+t.toJSON()+'"}':t instanceof Number?this.bm(t.valueOf()):_n(t)?ol(this,t):Vt(t)?To(this,t):"function"==typeof t?"null":t.toString()},_.Ug=function(t){return this.ot.add(t),this},_.ak=function(t){this.ot.remove(t)},_.Cr=function(t){this.skipsUndoManager||this.undoManager.Fu(t);for(var e=this.ot,n=e.length,s=0;s<n;s++)e.K(s)(t)},_.bb=function(t,e,n,s,l,u,c){rn(this,"",t,e,n,s,l,u,c)},_.g=function(t,e,n,s,l){rn(this,"",re,t,this,e,n,s,l)},_.fs=function(t,e,n,s,l,u){rn(this,"",re,e,t,n,s,l,u)},st.prototype.changeState=function(t,e){if(null!==t&&t.model===this)if(t.change===re){var n=t.object,s=t.propertyName,l=t.I(e);s===this.nodeKeyProperty&&this.lb(n)&&(void 0!==(e=t.I(!e))&&this.kb.remove(e),void 0!==l&&this.kb.add(l,n)),se(n,s,l)}else t.change===un?(n=t.newParam,"nodeDataArray"===t.modelChange?Vt(t=t.newValue)&&"number"==typeof n&&(s=this.ua(t),e?(this.Mc[n]===t&&en(this.Mc,n),void 0!==s&&this.kb.remove(s)):(this.Mc[n]!==t&&Cu(this.Mc,n,t),void 0!==s&&this.kb.add(s,t))):""===t.modelChange?((s=t.object)&&!_n(s)&&t.propertyName&&(s=Be(t.object,t.propertyName)),_n(s)&&"number"==typeof n&&(t=t.newValue,e?en(s,n):Cu(s,n,t))):Y("unknown ChangedEvent.Insert modelChange: "+t.toString())):t.change===Me?(n=t.oldParam,"nodeDataArray"===t.modelChange?Vt(t=t.oldValue)&&"number"==typeof n&&(s=this.ua(t),e?(this.Mc[n]!==t&&Cu(this.Mc,n,t),void 0!==s&&this.kb.add(s,t)):(this.Mc[n]===t&&en(this.Mc,n),void 0!==s&&this.kb.remove(s))):""===t.modelChange?((s=t.object)&&!_n(s)&&t.propertyName&&(s=Be(t.object,t.propertyName)),_n(s)&&"number"==typeof n&&(t=t.oldValue,e?Cu(s,n,t):en(s,n))):Y("unknown ChangedEvent.Remove modelChange: "+t.toString())):t.change!==ps&&Y("unknown ChangedEvent: "+t.toString())},st.prototype.Da=function(t){return this.undoManager.Da(t)},st.prototype.eb=function(t){return this.undoManager.eb(t)},st.prototype.Bf=function(){return this.undoManager.Bf()},st.prototype.commit=function(t,e){void 0===e&&(e="");var n=this.skipsUndoManager;null===e&&(this.skipsUndoManager=!0,e=""),this.undoManager.Da(e);var s=!1;try{t(this),s=!0}finally{s?this.undoManager.eb(e):this.undoManager.Bf(),this.skipsUndoManager=n}},(_=st.prototype).Ka=function(t,e){void 0===e&&(e=""),rn(this,"SourceChanged",ps,e,t,null,null)},_.ua=function(t){if(null!==t){var e=this.Mh;if(""!==e&&void 0!==(e=Be(t,e))){if(Xl(e))return e;Y("Key value for node data "+t+" is not a number or a string: "+e)}}},_.Sl=function(t,e){if(null!==t){var n=this.Mh;if(""!==n)if(this.lb(t)){var s=Be(t,n);s!==e&&null===this.dc(e)&&(se(t,n,e),void 0!==s&&this.kb.remove(s),this.kb.add(e,t),rn(this,"nodeKey",re,n,t,s,e),"string"==typeof n&&this.Ka(t,n),this.Mo(s,e))}else se(t,n,e)}},_.lb=function(t){var e=this.ua(t);return void 0!==e&&this.kb.I(e)===t},_.dc=function(t){return null===t&&Y("Model.findNodeDataForKey:key must not be null"),void 0!==t&&Xl(t)?this.kb.I(t):null},_.Mu=function(t){if(null!==t){var e=this.Mh;if(""!==e){var n=this.ua(t);if(void 0===n||this.kb.contains(n)){var s=this.Rk;if(null!==s&&null!=(n=s(this,t))&&!this.kb.contains(n))return void se(t,e,n);if("string"==typeof n){for(s=2;this.kb.contains(n+s);)s++;se(t,e,n+s)}else if(void 0===n||"number"==typeof n){for(n=-this.kb.count-1;this.kb.contains(n);)n--;se(t,e,n)}}}}},_.lf=function(t){null!==t&&(Dh(t),this.lb(t)||_y(this,t,!0))},_.my=function(t){if(_n(t))for(var e=t.length,n=0;n<e;n++)this.lf(t[n]);else for(t=t.iterator;t.next();)this.lf(t.value)},_.Kl=function(t){null!==t&&vw(this,t,!0)},_.Uz=function(t){if(_n(t))for(var e=t.length,n=0;n<e;n++)this.Kl(t[n]);else for(t=t.iterator;t.next();)this.Kl(t.value)},_.Hz=function(t){if(t!==this.nodeDataArray&&_n(t)){var e=this.Zk;e.clear(),e.addAll(this.kb.iteratorKeys);var n=this.Xk;n.clear();for(var s=t.length,l=0;l<s;l++){var u=t[l],c=this.ua(u);if(void 0!==c){n.add(c);var d=this.dc(c);d!==u&&(null!==d?(this.ho(d,u),this.Tl(u,d)):(u=this.cloneDeep(u),this.Sl(u,c),this.lf(u)))}else c=this.cloneDeep(u),this.lf(c),n.add(this.ua(c))}for(t=e.iterator;t.next();)n.contains(s=t.value)||(s=this.dc(s))&&this.Kl(s);e.clear(),n.clear()}},_.Mo=function(t,e){void 0!==e&&(t=ig(this,t))instanceof Q&&this.Lf.add(e,t)},_.ov=function(){},_.Nl=function(){},_.Ml=function(){},_.To=function(){},_.xy=function(t){void 0===t?this.Lf.clear():this.Lf.remove(t)},st.prototype.copyNodeData=function(t){if(null===t)return null;var e=this.pk;return Vt(t=null!==e?e(t,this):rg(this,t,!0))&&En(t),t},st.prototype.setDataProperty=function(t,e,n){if(this.lb(t)){if(e===this.nodeKeyProperty)return void this.Sl(t,n);if(e===this.nodeCategoryProperty)return void this.Rl(t,n)}else!Cw&&t instanceof lt&&(Cw=!0,wi('Model.setDataProperty is modifying a GraphObject, "'+t.toString()+'"'),wi("  Is that really your intent?"));var s=Be(t,e);s!==n&&(se(t,e,n),this.fs(t,e,s,n))},(_=st.prototype).set=function(t,e,n){this.setDataProperty(t,e,n)},_.ho=function(t,e){if(e){var s,n=this.lb(t);for(s in e)"__gohashid"===s||n&&s===this.nodeKeyProperty||this.setDataProperty(t,s,e[s])}},_.iy=function(t,e){this.Qr(t,-1,e)},_.Qr=function(t,e,n){0>e&&(e=t.length),Cu(t,e,n),rn(this,"",un,"",t,null,n,null,e)},_.Xu=function(t,e){void 0===e&&(e=-1),t===this.Mc&&Y("Model.removeArrayItem should not be called on the Model.nodeDataArray"),-1===e&&(e=t.length-1);var n=t[e];en(t,e),rn(this,"",Me,"",t,n,null,e,null)},_.uo=function(t){if(null===t)return"";var e=this.gj;return""===e||void 0===(e=Be(t,e))?"":"string"==typeof e?e:void Y("getCategoryForNodeData found a non-string category for "+t+": "+e)},_.Rl=function(t,e){if(null!==t){var n=this.gj;if(""!==n)if(this.lb(t)){var s=Be(t,n);void 0===s&&(s=""),s!==e&&(se(t,n,e),rn(this,"nodeCategory",re,n,t,s,e))}else se(t,n,e)}},_.Tl=function(t,e){this.Rl(e,this.uo(t))},_.Bl=function(){return!1},_.Nj=function(){return!1},_.ki=function(){return!1},_.Vr=function(){return!1},_.Oj=function(){return!1},St.Object.defineProperties(st.prototype,{name:{get:function(){return this.va},set:function(t){var e=this.va;e!==t&&(this.va=t,this.g("name",e,t))}},dataFormat:{get:function(){return this.Am},set:function(t){var e=this.Am;e!==t&&(this.Am=t,this.g("dataFormat",e,t))}},isReadOnly:{get:function(){return this.xg},set:function(t){var e=this.xg;e!==t&&(this.xg=t,this.g("isReadOnly",e,t))}},modelData:{get:function(){return this.j},set:function(t){var e=this.j;e!==t&&(this.j=t,this.g("modelData",e,t),this.Ka(t))}},undoManager:{get:function(){return this.m},set:function(t){var e=this.m;e!==t&&(null!==e&&e.yx(this),this.m=t,null!==t&&t.Bw(this))}},skipsUndoManager:{get:function(){return this.Mg},set:function(t){this.Mg=t}},nodeKeyProperty:{get:function(){return this.Mh},set:function(t){var e=this.Mh;e!==t&&(""===t&&Y("Model.nodeKeyProperty may not be the empty string"),0<this.kb.count&&Y("Cannot set Model.nodeKeyProperty when there is existing node data"),this.Mh=t,this.g("nodeKeyProperty",e,t))}},makeUniqueKeyFunction:{get:function(){return this.Rk},set:function(t){var e=this.Rk;e!==t&&(this.Rk=t,this.g("makeUniqueKeyFunction",e,t))}},nodeDataArray:{get:function(){return this.Mc},set:function(t){var e=this.Mc;if(e!==t){this.kb.clear(),this.ov();for(var n=t.length,s=0;s<n;s++){var l=t[s];Vt(l)||Y("Model.nodeDataArray must only contain Objects, not: "+l),Dh(l)}for(this.Mc=t,s=new tt,l=0;l<n;l++){var u=t[l],c=this.ua(u);void 0===c||null!==this.kb.I(c)?s.add(u):this.kb.add(c,u)}for(s=s.iterator;s.next();)this.Mu(l=s.value),void 0!==(u=this.ua(l))&&this.kb.add(u,l);for(rn(this,"nodeDataArray",re,"nodeDataArray",this,e,t),e=0;e<n;e++)this.Nl(s=t[e]),this.Ml(s);Array.isArray(t)||(this.isReadOnly=!0)}}},copyNodeDataFunction:{get:function(){return this.pk},set:function(t){var e=this.pk;e!==t&&(this.pk=t,this.g("copyNodeDataFunction",e,t))}},copiesArrays:{get:function(){return this.sm},set:function(t){var e=this.sm;e!==t&&(this.sm=t,this.g("copiesArrays",e,t))}},copiesArrayObjects:{get:function(){return this.rm},set:function(t){var e=this.rm;e!==t&&(this.rm=t,this.g("copiesArrayObjects",e,t))}},copiesKey:{get:function(){return this.um},set:function(t){var e=this.um;e!==t&&(this.um=t,this.g("copiesKey",e,t))}},afterCopyFunction:{get:function(){return this.fm},set:function(t){var e=this.fm;e!==t&&(this.fm=t,this.g("afterCopyFunction",e,t))}},nodeCategoryProperty:{get:function(){return this.gj},set:function(t){var e=this.gj;e!==t&&(this.gj=t,this.g("nodeCategoryProperty",e,t))}},type:{get:function(){return"Model"}}}),st.prototype.setCategoryForNodeData=st.prototype.Rl,st.prototype.getCategoryForNodeData=st.prototype.uo,st.prototype.removeArrayItem=st.prototype.Xu,st.prototype.insertArrayItem=st.prototype.Qr,st.prototype.addArrayItem=st.prototype.iy,st.prototype.assignAllDataProperties=st.prototype.ho,st.prototype.set=st.prototype.set,st.prototype.clearUnresolvedReferences=st.prototype.xy,st.prototype.mergeNodeDataArray=st.prototype.Hz,st.prototype.removeNodeDataCollection=st.prototype.Uz,st.prototype.removeNodeData=st.prototype.Kl,st.prototype.addNodeDataCollection=st.prototype.my,st.prototype.addNodeData=st.prototype.lf,st.prototype.makeNodeDataKeyUnique=st.prototype.Mu,st.prototype.findNodeDataForKey=st.prototype.dc,st.prototype.containsNodeData=st.prototype.lb,st.prototype.setKeyForNodeData=st.prototype.Sl,st.prototype.getKeyForNodeData=st.prototype.ua,st.prototype.updateTargetBindings=st.prototype.Ka,st.prototype.commit=st.prototype.commit,st.prototype.rollbackTransaction=st.prototype.Bf,st.prototype.commitTransaction=st.prototype.eb,st.prototype.startTransaction=st.prototype.Da,st.prototype.raiseDataChanged=st.prototype.fs,st.prototype.raiseChanged=st.prototype.g,st.prototype.raiseChangedEvent=st.prototype.bb,st.prototype.removeChangedListener=st.prototype.ak,st.prototype.addChangedListener=st.prototype.Ug,st.prototype.writeJsonValue=st.prototype.bm,st.prototype.replaceJsonObjects=st.prototype.Ll,st.prototype.applyIncrementalJSON=st.prototype.qy,st.prototype.applyIncrementalJson=st.prototype.Dw,st.prototype.toJSON=st.prototype.toJSON,st.prototype.toJson=st.prototype.Qo,st.prototype.toIncrementalJSON=st.prototype.fA,st.prototype.toIncrementalJson=st.prototype.Jx,st.prototype.toIncrementalData=st.prototype.eA,st.prototype.clear=st.prototype.clear;var Cw=!1,Eo={};function xe(t,e,n,s){En(this),this._isFrozen=!1,void 0===t&&(t=""),void 0===e&&(e=t),void 0===n&&(n=null),this.j=-1,this.sd=null,this.ml=t,this.ll=this.Wn=0,this.Zq=null,this.cn=!1,this.hl=e,this.qm=n,void 0===s?(this.Uk=DC,this.jk=null):(this.Uk=Ey,this.jk=s),this.Vs=new Q}function Ty(t,e,n){return null===(t=t.sourceName)||""===t?e:"/"===t?n.part:"."===t?n:".."===t?n.panel:e.fb(t)}st.className="Model",st.fromJSON=st.fromJson=function(t,e){void 0===e&&(e=null);var n=null;if("string"==typeof t)try{n=mt.JSON.parse(t)}catch{}else"object"==typeof t?n=t:Y("Unable to construct a Model from: "+t);if(null===e){t=null;var s=n.class;if("string"==typeof s)try{var l=null;0===s.indexOf("go.")?l=xw(s=s.substr(3)):null===(l=xw(s))&&(l=mt[s]),"function"==typeof l&&(t=new l)}catch{}null===t||t instanceof st?e=t:Y("Unable to construct a Model of declared class: "+n.class)}return null===e&&(e=st.constructGraphLinksModel()),e.Io(n),e.Uu(n),e},st.safePropertyValue=Be,st.safePropertySet=se,Eo.Brush=Rt,Eo.ChangedEvent=Ne,Eo.Geometry=X,Eo.Margin=Ht,Eo.Panel=$,Eo.Point=A,Eo.Rect=U,Eo.Size=gt,Eo.Spot=ot,Eo.Transaction=Pn,Eo.UndoManager=Le,xe.prototype.copy=function(){var t=new xe;return t.ml=this.ml,t.Wn=this.Wn,t.ll=this.ll,t.Zq=this.Zq,t.cn=this.cn,t.hl=this.hl,t.qm=this.qm,t.Uk=this.Uk,t.jk=this.jk,t},(_=xe.prototype).ob=function(t){t.classType===xe&&(this.mode=t)},_.toString=function(){return"Binding("+this.targetProperty+":"+this.sourceProperty+(-1!==this.ti?" "+this.ti:"")+" "+this.mode.name+")"},_.freeze=function(){return this._isFrozen=!0,this},_.ja=function(){return this._isFrozen=!1,this},_.px=function(t){return void 0===t&&(t=null),this.mode=Ey,this.backConverter=t,this},_.Fo=function(t){return void 0===t&&(t=""),this.sourceName=t,this.isToModel=!1,this},_.Kz=function(){return this.sourceName=null,this.isToModel=!0,this},_.pv=function(t,e,n){var s=this.hl;if(void 0===n||""===s||s===n){n=this.ml;var l=this.qm;if(null===l&&""===n)wi("Binding error: target property is the empty string: "+this.toString());else{var u=e;if(""!==s&&(u=Be(e,s)),void 0!==u)if(null===l)""!==n&&se(t,n,u);else try{""!==n?se(t,n,l(u,t)):l(u,t)}catch{}}}},_.Vo=function(t,e,n,s){if(this.Uk===Ey){var l=this.ml;if(void 0===n||l===n){n=this.hl;var u=this.jk,c=t;if(""!==l&&(c=Be(t,l)),void 0!==c&&!this.Vs.contains(t))try{this.Vs.add(t);var d=null!==s?s.diagram:null,p=null!==d?d.model:null;if(null===u){if(""!==n)null!==p?p.setDataProperty(e,n,c):se(e,n,c);else if(null!==p&&null!==s&&0<=s.itemIndex&&null!==s.panel&&Array.isArray(s.panel.itemArray)){var g=s.itemIndex,y=s.panel.itemArray;p.Xu(y,g),p.Qr(y,g,c)}}else try{if(""!==n){var w=u(c,e,p);null!==p?p.setDataProperty(e,n,w):se(e,n,w)}else{var C=u(c,e,p);if(void 0!==C&&null!==p&&null!==s&&0<=s.itemIndex&&null!==s.panel&&Array.isArray(s.panel.itemArray)){var D=s.itemIndex,M=s.panel.itemArray;p.Xu(M,D),p.Qr(M,D,C)}}}catch{}}finally{this.Vs.remove(t)}}}},St.Object.defineProperties(xe.prototype,{ti:{get:function(){return this.j},set:function(t){this._isFrozen&&Nt(this),this.j=t}},targetProperty:{get:function(){return this.ml},set:function(t){this._isFrozen&&Nt(this),this.ml=t}},sourceName:{get:function(){return this.Zq},set:function(t){this._isFrozen&&Nt(this),this.Zq=t,null!==t&&(this.cn=!1)}},isToModel:{get:function(){return this.cn},set:function(t){this._isFrozen&&Nt(this),this.cn=t}},sourceProperty:{get:function(){return this.hl},set:function(t){this._isFrozen&&Nt(this),this.hl=t}},converter:{get:function(){return this.qm},set:function(t){this._isFrozen&&Nt(this),this.qm=t}},backConverter:{get:function(){return this.jk},set:function(t){this._isFrozen&&Nt(this),this.jk=t}},mode:{get:function(){return this.Uk},set:function(t){this._isFrozen&&Nt(this),this.Uk=t}}}),xe.prototype.updateSource=xe.prototype.Vo,xe.prototype.updateTarget=xe.prototype.pv,xe.prototype.ofModel=xe.prototype.Kz,xe.prototype.ofObject=xe.prototype.Fo,xe.prototype.makeTwoWay=xe.prototype.px;var mD="Binding",DC=new K(xe,"OneWay",1),Ey=new K(xe,"TwoWay",2);function Pt(t,e,n){st.call(this),this.zv=',\n  "insertedLinkKeys": ',this.Ox=',\n  "modifiedLinkData": ',this.Bv=',\n  "removedLinkKeys": ',this.ed=[],this.Rf=new Q,this.rb=new xt,this.Bh="",this.Li=this.nk=this.Sk=null,this.Ze="from",this.$e="to",this.aj=this.$i="",this.Zi="category",this.ce="",this.Yk="isGroup",this.ye="group",this.tm=!1,void 0!==e&&(this.linkDataArray=e),void 0!==t&&(_n(t)?this.nodeDataArray=t:Object.assign(this,t)),n&&Object.assign(this,n)}function _C(t,e){for(var n=new Q,s=0;s<t.linkDataArray.length;s++){var l=t.linkDataArray[s];Dy(t,e,l,l,n)}return n}function Nr(t,e,n){if(null!==e&&""!==(t=n?t.Ze:t.$e)&&void 0!==(t=Be(e,t))){if(Xl(t))return t;Y((n?"FromKey":"ToKey")+" value for link data "+e+" is not a number or a string: "+t)}}function qf(t,e,n,s){if(null===n&&(n=void 0),null!==e){var l=s?t.Ze:t.$e;if(""!==l)if(n=t.Dl(n),t.Cc(e)){var u=Be(e,l);u!==n&&(Yo(t,u,e),se(e,l,n),null===t.dc(n)&&Ko(t,n,e),rn(t,s?"linkFromKey":"linkToKey",re,l,e,u,n),"string"==typeof l&&t.Ka(e,l))}else se(e,l,n)}}function td(t,e,n){return null===e||""===(t=n?t.$i:t.aj)||void 0===(e=Be(e,t))?"":e}function ed(t,e,n,s){if(null!==e){var l=s?t.$i:t.aj;if(""!==l)if(t.Cc(e)){var u=Be(e,l);void 0===u&&(u=""),u!==n&&(se(e,l,n),rn(t,s?"linkFromPortId":"linkToPortId",re,l,e,u,n),"string"==typeof l&&t.Ka(e,l))}else se(e,l,n)}}function TC(t,e,n){if(""!==t.linkKeyProperty){var s=t.uc(e);if(void 0!==s&&t.rb.I(s)===e)return;t.$r(e),void 0===(s=t.uc(e))&&Y("GraphLinksModel.makeLinkDataKeyUnique failed on "+e+". Data not added to model."),t.rb.add(s,e)}t.Rf.add(e),s=null,n&&t.ed.splice(s=t.ed.length,0,e),rn(t,"linkDataArray",un,"linkDataArray",t,null,e,null,s),sg(t,e)}function og(t,e,n){t.Rf.remove(e);var s=t.uc(e);if(void 0!==s&&t.rb.remove(s),s=null,n){if(0>(s=t.ed.indexOf(e)))return;t.ed.splice(s,1)}if(rn(t,"linkDataArray",Me,"linkDataArray",t,e,null,s,null),Yo(t,n=Nr(t,e,!0),e),Yo(t,n=Nr(t,e,!1),e),s=t.vf(e),Array.isArray(s))for(var l=s.length,u=0;u<l;u++)Yo(t,n=s[u],e)}function sg(t,e){var n=Nr(t,e,!0);n=t.Dl(n),null===t.dc(n)&&Ko(t,n,e),n=Nr(t,e,!1),n=t.Dl(n),null===t.dc(n)&&Ko(t,n,e);var s=t.vf(e);if(Array.isArray(s))for(var l=s.length,u=0;u<l;u++)null===t.dc(n=s[u])&&Ko(t,n,e)}function ag(t,e,n){t.Oo(n,t.Mr(e)),t.cv(n,t.$w(e)),t.gv(n,t.ex(e)),t.ls(n,t.vf(e)),t.dv(n,t.ax(e)),t.hv(n,t.gx(e))}xe.className="Binding",xe.parseEnum=function(t,e){return function(n){return null===(n=ua(t,n))?e:n}},xe.toString=vo,xe.OneWay=DC,xe.TwoWay=Ey,zt(Pt,st),Pt.constructGraphLinksModel=st.constructGraphLinksModel,Pt.prototype.cloneProtected=function(t){st.prototype.cloneProtected.call(this,t),t.Bh=this.Bh,t.Sk=this.Sk,t.nk=this.nk,t.Ze=this.Ze,t.$e=this.$e,t.$i=this.$i,t.aj=this.aj,t.Zi=this.Zi,t.ce=this.ce,t.Yk=this.Yk,t.ye=this.ye,t.tm=this.tm},(_=Pt.prototype).clear=function(){st.prototype.clear.call(this),this.ed=[],this.rb.clear(),this.Rf.clear()},_.toString=function(t){if(void 0===t&&(t=0),2<=t)return this.Qo();var e=(""!==this.name?this.name:"")+" GraphLinksModel";if(0<t){e+="\n node data:";var s,n=(t=this.nodeDataArray).length;for(s=0;s<n;s++){var l=t[s];e+=" "+this.ua(l)+":"+vo(l)}for(e+="\n link data:",n=(t=this.linkDataArray).length,s=0;s<n;s++)e+=" "+Nr(this,l=t[s],!0)+"--\x3e"+Nr(this,l,!1)}return e},_.uv=function(t,e){""===this.linkKeyProperty&&Y("GraphLinksModel.linkKeyProperty must not be an empty string for .toIncrementalData() to succeed.");var n=st.prototype.uv.call(this,t,e),s=this,l=new Q,u=new Q,c=new Q,d=this.kh;t.changes.each(function(y){y.model===s&&("linkDataArray"===y.modelChange?y.change===un?l.add(y.newValue):y.change===Me&&c.add(y.oldValue):s.Cc(y.object)?u.add(y.object):null!==y.object&&(null!==y.object&&d&&d.contains(y.object)?d.get(y.object).each(function(w){s.Cc(w)&&u.add(w)}):y.object instanceof st||s.lb(y.object)||_C(s,y.object).each(function(w){u.add(w)})))});var p=this.Xk;p.clear(),l.each(function(y){p.add(s.uc(y)),e||u.add(y)});var g=this.Zk;return g.clear(),c.each(function(y){g.add(s.uc(y)),e&&u.add(y)}),t=s.cloneDeep(u.Ea()),0<p.count&&(null===n&&(n={}),e?n.removedLinkKeys=p.Ea():n.insertedLinkKeys=p.Ea()),0<t.length&&(null===n&&(n={}),n.modifiedLinkData=t),0<g.count&&(null===n&&(n={}),e?n.insertedLinkKeys=g.Ea():n.removedLinkKeys=g.Ea()),g.clear(),p.clear(),n},_.am=function(){var t=st.prototype.am.call(this),e="";return"category"!==this.linkCategoryProperty&&"string"==typeof this.linkCategoryProperty&&(e+=',\n  "linkCategoryProperty": '+this.quote(this.linkCategoryProperty)),""!==this.linkKeyProperty&&"string"==typeof this.linkKeyProperty&&(e+=',\n  "linkKeyProperty": '+this.quote(this.linkKeyProperty)),"from"!==this.linkFromKeyProperty&&"string"==typeof this.linkFromKeyProperty&&(e+=',\n  "linkFromKeyProperty": '+this.quote(this.linkFromKeyProperty)),"to"!==this.linkToKeyProperty&&"string"==typeof this.linkToKeyProperty&&(e+=',\n  "linkToKeyProperty": '+this.quote(this.linkToKeyProperty)),""!==this.linkFromPortIdProperty&&"string"==typeof this.linkFromPortIdProperty&&(e+=',\n  "linkFromPortIdProperty": '+this.quote(this.linkFromPortIdProperty)),""!==this.linkToPortIdProperty&&"string"==typeof this.linkToPortIdProperty&&(e+=',\n  "linkToPortIdProperty": '+this.quote(this.linkToPortIdProperty)),""!==this.linkLabelKeysProperty&&"string"==typeof this.linkLabelKeysProperty&&(e+=',\n  "linkLabelKeysProperty": '+this.quote(this.linkLabelKeysProperty)),"isGroup"!==this.nodeIsGroupProperty&&"string"==typeof this.nodeIsGroupProperty&&(e+=',\n  "nodeIsGroupProperty": '+this.quote(this.nodeIsGroupProperty)),"group"!==this.nodeGroupKeyProperty&&"string"==typeof this.nodeGroupKeyProperty&&(e+=',\n  "nodeGroupKeyProperty": '+this.quote(this.nodeGroupKeyProperty)),t+e},_.Io=function(t){st.prototype.Io.call(this,t),t.linkKeyProperty&&(this.linkKeyProperty=t.linkKeyProperty),t.linkFromKeyProperty&&(this.linkFromKeyProperty=t.linkFromKeyProperty),t.linkToKeyProperty&&(this.linkToKeyProperty=t.linkToKeyProperty),t.linkFromPortIdProperty&&(this.linkFromPortIdProperty=t.linkFromPortIdProperty),t.linkToPortIdProperty&&(this.linkToPortIdProperty=t.linkToPortIdProperty),t.linkCategoryProperty&&(this.linkCategoryProperty=t.linkCategoryProperty),t.linkLabelKeysProperty&&(this.linkLabelKeysProperty=t.linkLabelKeysProperty),t.nodeIsGroupProperty&&(this.nodeIsGroupProperty=t.nodeIsGroupProperty),t.nodeGroupKeyProperty&&(this.nodeGroupKeyProperty=t.nodeGroupKeyProperty)},_.vv=function(){return st.prototype.vv.call(this)+',\n  "linkDataArray": '+ol(this,this.linkDataArray,!0)},_.Uu=function(t){st.prototype.Uu.call(this,t),t=t.linkDataArray,Array.isArray(t)&&(this.Ll(t),this.linkDataArray=t)},_.tv=function(t,e){""===this.linkKeyProperty&&Y("GraphLinksModel.linkKeyProperty must not be an empty string for .toIncrementalJson() to succeed.");var n=st.prototype.tv.call(this,t,e),s=this,l=new Q,u=new Q,c=new Q,d=this.kh;t.changes.each(function(y){y.model===s&&("linkDataArray"===y.modelChange?y.change===un?l.add(y.newValue):y.change===Me&&c.add(y.oldValue):s.Cc(y.object)?u.add(y.object):null!==y.object&&(null!==y.object&&d&&d.contains(y.object)?d.get(y.object).each(function(w){s.Cc(w)&&u.add(w)}):y.object instanceof st||s.lb(y.object)||_C(s,y.object).each(function(w){u.add(w)})))});var p=this.Xk;p.clear(),l.each(function(y){p.add(s.uc(y)),e||u.add(y)});var g=this.Zk;return g.clear(),c.each(function(y){g.add(s.uc(y)),e&&u.add(y)}),t=n,0<p.count&&(t+=(e?this.Bv:this.zv)+ol(this,p.Ea(),!0)),0<u.count&&(t+=this.Ox+ol(this,u.Ea(),!0)),0<g.count&&(t+=(e?this.zv:this.Bv)+ol(this,g.Ea(),!0)),g.clear(),p.clear(),t},_.Ho=function(t){(void 0!==t.linkCategoryProperty&&t.linkCategoryProperty!==this.linkCategoryProperty||void 0!==t.linkKeyProperty&&t.linkKeyProperty!==this.linkKeyProperty||void 0!==t.linkFromKeyProperty&&t.linkFromKeyProperty!==this.linkFromKeyProperty||void 0!==t.linkToKeyProperty&&t.linkToKeyProperty!==this.linkToKeyProperty||void 0!==t.linkFromPortIdProperty&&t.linkFromPortIdProperty!==this.linkFromPortIdProperty||void 0!==t.linkToPortIdProperty&&t.linkToPortIdProperty!==this.linkToPortIdProperty||void 0!==t.linkLabelKeysProperty&&t.linkLabelKeysProperty!==this.linkLabelKeysProperty||void 0!==t.nodeIsGroupProperty&&t.nodeIsGroupProperty!==this.nodeIsGroupProperty||void 0!==t.nodeGroupKeyProperty&&t.nodeGroupKeyProperty!==this.nodeGroupKeyProperty)&&Y("applyIncrementalJson cannot change Model properties"),st.prototype.Ho.call(this,t);var e=t.insertedLinkKeys;if(Array.isArray(e))for(var n=e.length,s=0;s<n;s++){var l=e[s],u=this.Zg(l);null===u&&(u=this.no({}),this.ks(u,l),this.Yh(u))}if(e=t.modifiedLinkData,Array.isArray(e))for(n=e.length,s=0;s<n;s++)if(u=this.uc(l=e[s]),null!==(u=this.Zg(u))){for(var c in l)"__gohashid"!==c&&c!==this.linkKeyProperty&&this.setDataProperty(u,c,l[c]);ag(this,l,u)}if(t=t.removedLinkKeys,Array.isArray(t))for(c=t.length,e=0;e<c;e++)null!==(n=this.Zg(t[e]))&&this.Jl(n)},Pt.prototype.changeState=function(t,e){if(null!==t&&t.model===this){if(t.change===re){var n=t.object,s=t.propertyName;if(s===this.linkKeyProperty&&this.Cc(n)){var l=t.I(e);return void 0!==(e=t.I(!e))&&this.rb.remove(e),void 0!==l&&this.rb.add(l,n),void se(n,s,l)}}else if(t.change===un){if(n=t.newParam,"linkDataArray"===t.modelChange)return void(Vt(t=t.newValue)&&"number"==typeof n&&(s=this.uc(t),e?(this.Rf.remove(t),this.ed[n]===t&&this.ed.splice(n,1),void 0!==s&&this.rb.remove(s)):(this.Rf.add(t),this.ed[n]!==t&&this.ed.splice(n,0,t),void 0!==s&&this.rb.add(s,t))));if("linkLabelKeys"===t.modelChange)return s=this.vf(t.object),void(Array.isArray(s)&&"number"==typeof n&&(e?(n=s.indexOf(t.newValue),0<=n&&s.splice(n,1)):0>s.indexOf(t.newValue)&&s.splice(n,0,t.newValue)))}else if(t.change===Me){if(n=t.oldParam,"linkDataArray"===t.modelChange)return void(Vt(t=t.oldValue)&&"number"==typeof n&&(s=this.uc(t),e?(this.Rf.add(t),this.ed[n]!==t&&this.ed.splice(n,0,t),void 0!==s&&this.rb.add(s,t)):(this.Rf.remove(t),this.ed[n]===t&&this.ed.splice(n,1),void 0!==s&&this.rb.remove(s))));if("linkLabelKeys"===t.modelChange)return s=this.vf(t.object),void(Array.isArray(s)&&"number"==typeof n&&(e?0>s.indexOf(t.newValue)&&s.splice(n,0,t.newValue):(n=s.indexOf(t.newValue),0<=n&&s.splice(n,1))))}st.prototype.changeState.call(this,t,e)}},(_=Pt.prototype).Dl=function(t){if(void 0!==t){var e=this.Li;if(null!==e){var n=this.dc(t);null===n&&(se(n=this.copyNodeData(e),this.nodeKeyProperty,t),this.lf(n))}return t}},_.$w=function(t){return Nr(this,t,!0)},_.cv=function(t,e){qf(this,t,e,!0)},_.ex=function(t){return Nr(this,t,!1)},_.gv=function(t,e){qf(this,t,e,!1)},_.ax=function(t){return td(this,t,!0)},_.dv=function(t,e){ed(this,t,e,!0)},_.gx=function(t){return td(this,t,!1)},_.hv=function(t,e){ed(this,t,e,!1)},_.vf=function(t){if(null===t)return Mw;var e=this.ce;return""===e||void 0===(t=Be(t,e))?Mw:t},_.ls=function(t,e){if(null!==t){var n=this.ce;if(""!==n)if(this.Cc(t)){var s=Be(t,n);if(void 0===s&&(s=Mw),s!==e){if(Array.isArray(s))for(var l=s.length,u=0;u<l;u++)Yo(this,s[u],t);for(se(t,n,e),l=e.length,u=0;u<l;u++){var c=e[u];null===this.dc(c)&&Ko(this,c,t)}rn(this,"linkLabelKeys",re,n,t,s,e),"string"==typeof n&&this.Ka(t,n)}}else se(t,n,e)}},_.hu=function(t,e){if(null!=e&&null!==t){var n=this.ce;if(""!==n){var s=Be(t,n);if(void 0===s)(n=[]).push(e),this.ls(t,n);else if(Array.isArray(s)){var l=s.indexOf(e);0<=l||(l=s.length,s.push(e),this.Cc(t)&&(null===this.dc(e)&&Ko(this,e,t),rn(this,"linkLabelKeys",un,n,t,null,e,null,l)))}else Y(n+" property is not an Array; cannot addLabelKeyForLinkData: "+t)}}},_.xx=function(t,e){if(null!=e&&null!==t){var n=this.ce;if(""!==n){var s=Be(t,n);if(Array.isArray(s)){var l=s.indexOf(e);0>l||(s.splice(l,1),this.Cc(t)&&(Yo(this,e,t),rn(this,"linkLabelKeys",Me,n,t,e,null,l,null)))}else void 0!==s&&Y(n+" property is not an Array; cannot removeLabelKeyforLinkData: "+t)}}},_.uc=function(t){if(null!==t){var e=this.Bh;if(""!==e&&void 0!==(e=Be(t,e))){if(Xl(e))return e;Y("Key value for link data "+t+" is not a number or a string: "+e)}}},_.ks=function(t,e){if(null!==t){var n=this.Bh;if(""!==n)if(this.Cc(t)){var s=Be(t,n);s!==e&&null===this.Zg(e)&&(se(t,n,e),void 0!==s&&this.rb.remove(s),this.rb.add(e,t),rn(this,"linkKey",re,n,t,s,e),"string"==typeof n&&this.Ka(t,n))}else se(t,n,e)}},_.Zg=function(t){return null===t&&Y("GraphLinksModel.findLinkDataForKey:key must not be null"),void 0!==t&&Xl(t)?this.rb.I(t):null},_.$r=function(t){if(null!==t){var e=this.Bh;if(""!==e){var n=this.uc(t);if(void 0===n||this.rb.contains(n)){var s=this.Sk;if(null!==s&&null!=(n=s(this,t))&&!this.rb.contains(n))return void se(t,e,n);if("string"==typeof n){for(s=2;this.rb.contains(n+s);)s++;se(t,e,n+s)}else if(void 0===n||"number"==typeof n){for(n=-this.rb.count-1;this.rb.contains(n);)n--;se(t,e,n)}}}}},_.Cc=function(t){return null!==t&&this.Rf.contains(t)},_.Yh=function(t){null!==t&&(Dh(t),this.Cc(t)||TC(this,t,!0))},_.ly=function(t){if(Array.isArray(t))for(var e=t.length,n=0;n<e;n++)this.Yh(t[n]);else for(t=t.iterator;t.next();)this.Yh(t.value)},_.Jl=function(t){null!==t&&og(this,t,!0)},_.Sz=function(t){if(Array.isArray(t))for(var e=t.length,n=0;n<e;n++)this.Jl(t[n]);else for(t=t.iterator;t.next();)this.Jl(t.value)},_.Gz=function(t){if(""===this.linkKeyProperty&&Y("GraphLinksModel.linkKeyProperty must not be an empty string for .mergeLinkDataArray() to succeed."),t!==this.linkDataArray&&_n(t)){var e=this.Zk;e.clear(),e.addAll(this.rb.iteratorKeys);var n=this.Xk;n.clear();for(var s=t.length,l=0;l<s;l++){var u=t[l],c=this.uc(u);if(void 0!==c){n.add(c);var d=this.Zg(c);d!==u&&(null!==d?(this.ho(d,u),ag(this,u,d)):(u=this.cloneDeep(u),this.ks(u,c),this.Yh(u)))}else c=this.cloneDeep(u),this.Yh(c),n.add(this.uc(c))}for(t=e.iterator;t.next();)n.contains(s=t.value)||(s=this.Zg(s))&&this.Jl(s);e.clear(),n.clear()}},_.no=function(t){if(null===t)return null;var e=this.nk;return Vt(t=null!==e?e(t,this):rg(this,t,!0))&&(En(t),""!==this.Ze&&se(t,this.Ze,void 0),""!==this.$e&&se(t,this.$e,void 0),""!==this.ce&&se(t,this.ce,[])),t},_.Ku=function(t){if(null===t)return!1;var e=this.Yk;return""!==e&&!!Be(t,e)},_.ah=function(t){if(null!==t){var e=this.ye;if(""!==e&&void 0!==(e=Be(t,e))){if(Xl(e))return e;Y("GroupKey value for node data "+t+" is not a number or a string: "+e)}}},_.Po=function(t,e){if(null===e&&(e=void 0),null!==t){var n=this.ye;if(""!==n)if(this.lb(t)){var s=Be(t,n);s!==e&&(Yo(this,s,t),se(t,n,e),null===this.dc(e)&&Ko(this,e,t),rn(this,"nodeGroupKey",re,n,t,s,e),"string"==typeof n&&this.Ka(t,n))}else se(t,n,e)}},Pt.prototype.copyNodeData=function(t){return null===t?null:(t=st.prototype.copyNodeData.call(this,t),this.Cj||""===this.ye||void 0===Be(t,this.ye)||se(t,this.ye,void 0),t)},Pt.prototype.setDataProperty=function(t,e,n){if(this.lb(t)){if(e===this.nodeKeyProperty)return void this.Sl(t,n);if(e===this.nodeCategoryProperty)return void this.Rl(t,n);if(e===this.nodeGroupKeyProperty)return void this.Po(t,n)}else if(this.Cc(t)){if(e===this.linkFromKeyProperty)return void qf(this,t,n,!0);if(e===this.linkToKeyProperty)return void qf(this,t,n,!1);if(e===this.linkFromPortIdProperty)return void ed(this,t,n,!0);if(e===this.linkToPortIdProperty)return void ed(this,t,n,!1);if(e===this.linkKeyProperty)return void this.ks(t,n);if(e===this.linkCategoryProperty)return void this.Oo(t,n);if(e===this.linkLabelKeysProperty)return void this.ls(t,n)}var s=Be(t,e);s!==n&&(se(t,e,n),this.fs(t,e,s,n))},(_=Pt.prototype).ho=function(t,e){if(e){var l,n=this.lb(t),s=this.Cc(t);for(l in e)"__gohashid"===l||n&&l===this.nodeKeyProperty||n&&l===this.nodeIsGroupProperty&&Be(t,l)===e[l]||s&&l===this.linkKeyProperty||this.setDataProperty(t,l,e[l])}},_.Mo=function(t,e){st.prototype.Mo.call(this,t,e);for(var n=this.kb.iterator;n.next();)this.Zu(n.value,t,e);for(n=this.Rf.iterator;n.next();){var s=n.value,l=t,u=e;if(Nr(this,s,!0)===l){var c=this.Ze;se(s,c,u),rn(this,"linkFromKey",re,c,s,l,u),"string"==typeof c&&this.Ka(s,c)}if(Nr(this,s,!1)===l&&(se(s,c=this.$e,u),rn(this,"linkToKey",re,c,s,l,u),"string"==typeof c&&this.Ka(s,c)),c=this.vf(s),Array.isArray(c))for(var d=c.length,p=this.ce,g=0;g<d;g++)c[g]===l&&(c[g]=u,rn(this,"linkLabelKeys",un,p,s,l,u,g,g))}},_.Zu=function(t,e,n){if(this.ah(t)===e){var s=this.ye;se(t,s,n),rn(this,"nodeGroupKey",re,s,t,e,n),"string"==typeof s&&this.Ka(t,s)}},_.ov=function(){st.prototype.ov.call(this);for(var t=this.linkDataArray,e=t.length,n=0;n<e;n++)sg(this,t[n])},_.Nl=function(t){st.prototype.Nl.call(this,t);var e=ig(this,t=this.ua(t));if(null!==e){var n=ce();for(e=e.iterator;e.next();){var s=e.value;if(this.lb(s)){if(this.ah(s)===t){var l=this.ye;rn(this,"nodeGroupKey",re,l,s,t,t),"string"==typeof l&&this.Ka(s,l),n.push(s)}}else if(Nr(this,s,!0)===t&&(rn(this,"linkFromKey",re,l=this.Ze,s,t,t),"string"==typeof l&&this.Ka(s,l),n.push(s)),Nr(this,s,!1)===t&&(rn(this,"linkToKey",re,l=this.$e,s,t,t),"string"==typeof l&&this.Ka(s,l),n.push(s)),l=this.vf(s),Array.isArray(l))for(var u=l.length,c=this.ce,d=0;d<u;d++)l[d]===t&&(rn(this,"linkLabelKeys",un,c,s,t,t,d,d),n.push(s))}for(e=0;e<n.length;e++)Yo(this,t,n[e]);It(n)}},_.Ml=function(t){st.prototype.Ml.call(this,t);var e=this.ah(t);null===this.dc(e)&&Ko(this,e,t)},_.To=function(t){st.prototype.To.call(this,t),Yo(this,this.ah(t),t)},_.Mr=function(t){if(null===t)return"";var e=this.Zi;return""===e||void 0===(e=Be(t,e))?"":"string"==typeof e?e:void Y("getCategoryForLinkData found a non-string category for "+t+": "+e)},Pt.prototype.getLinkCategoryForData=function(t){return this.Mr(t)},Pt.prototype.Oo=function(t,e){if(null!==t){var n=this.Zi;if(""!==n)if(this.Cc(t)){var s=Be(t,n);void 0===s&&(s=""),s!==e&&(se(t,n,e),rn(this,"linkCategory",re,n,t,s,e),"string"==typeof n&&this.Ka(t,n))}else se(t,n,e)}},Pt.prototype.setLinkCategoryForData=function(t,e){this.Oo(t,e)},(_=Pt.prototype).Tl=function(t,e){st.prototype.Tl.call(this,t,e),this.Po(e,this.ah(t))},_.Nj=function(){return!0},_.ki=function(){return!0},_.Vr=function(){return!0},_.Oj=function(){return!0},St.Object.defineProperties(Pt.prototype,{archetypeNodeData:{get:function(){return this.Li},set:function(t){var e=this.Li;e!==t&&(this.Li=t,this.g("archetypeNodeData",e,t))}},linkFromKeyProperty:{get:function(){return this.Ze},set:function(t){var e=this.Ze;e!==t&&(this.Ze=t,this.g("linkFromKeyProperty",e,t))}},linkToKeyProperty:{get:function(){return this.$e},set:function(t){var e=this.$e;e!==t&&(this.$e=t,this.g("linkToKeyProperty",e,t))}},linkFromPortIdProperty:{get:function(){return this.$i},set:function(t){var e=this.$i;e!==t&&(this.$i=t,this.g("linkFromPortIdProperty",e,t))}},linkToPortIdProperty:{get:function(){return this.aj},set:function(t){var e=this.aj;e!==t&&(this.aj=t,this.g("linkToPortIdProperty",e,t))}},linkLabelKeysProperty:{get:function(){return this.ce},set:function(t){var e=this.ce;e!==t&&(this.ce=t,this.g("linkLabelKeysProperty",e,t))}},linkDataArray:{get:function(){return this.ed},set:function(t){var e=this.ed;if(e!==t){this.rb.clear();for(var n=t.length,s=0;s<n;s++){var l=t[s];Vt(l)||Y("GraphLinksModel.linkDataArray must only contain Objects, not: "+l),Dh(l)}if(this.ed=t,""!==this.linkKeyProperty){for(s=new tt,l=0;l<n;l++){var u=t[l],c=this.uc(u);void 0===c||null!==this.rb.I(c)?s.add(u):this.rb.add(c,u)}for(s=s.iterator;s.next();)this.$r(l=s.value),void 0!==(u=this.uc(l))&&this.rb.add(u,l)}for(s=new Q,l=0;l<n;l++)s.add(t[l]);for(this.Rf=s,rn(this,"linkDataArray",re,"linkDataArray",this,e,t),e=0;e<n;e++)sg(this,t[e])}}},linkKeyProperty:{get:function(){return this.Bh},set:function(t){var e=this.Bh;if(e!==t){this.Bh=t,this.rb.clear();for(var n=this.linkDataArray.length,s=0;s<n;s++){var l=this.linkDataArray[s],u=this.uc(l);void 0===u&&(this.$r(l),u=this.uc(l)),void 0!==u&&this.rb.add(u,l)}this.g("linkKeyProperty",e,t)}}},makeUniqueLinkKeyFunction:{get:function(){return this.Sk},set:function(t){var e=this.Sk;e!==t&&(this.Sk=t,this.g("makeUniqueLinkKeyFunction",e,t))}},copyLinkDataFunction:{get:function(){return this.nk},set:function(t){var e=this.nk;e!==t&&(this.nk=t,this.g("copyLinkDataFunction",e,t))}},nodeIsGroupProperty:{get:function(){return this.Yk},set:function(t){var e=this.Yk;e!==t&&(this.Yk=t,this.g("nodeIsGroupProperty",e,t))}},nodeGroupKeyProperty:{get:function(){return this.ye},set:function(t){var e=this.ye;e!==t&&(this.ye=t,this.g("nodeGroupKeyProperty",e,t))}},Cj:{get:function(){return this.tm},set:function(t){this.tm!==t&&(this.tm=t)}},linkCategoryProperty:{get:function(){return this.Zi},set:function(t){var e=this.Zi;e!==t&&(this.Zi=t,this.g("linkCategoryProperty",e,t))}},type:{get:function(){return"GraphLinksModel"}}}),Pt.prototype.setCategoryForLinkData=Pt.prototype.Oo,Pt.prototype.getCategoryForLinkData=Pt.prototype.Mr,Pt.prototype.assignAllDataProperties=Pt.prototype.ho,Pt.prototype.setGroupKeyForNodeData=Pt.prototype.Po,Pt.prototype.getGroupKeyForNodeData=Pt.prototype.ah,Pt.prototype.isGroupForNodeData=Pt.prototype.Ku,Pt.prototype.copyLinkData=Pt.prototype.no,Pt.prototype.mergeLinkDataArray=Pt.prototype.Gz,Pt.prototype.removeLinkDataCollection=Pt.prototype.Sz,Pt.prototype.removeLinkData=Pt.prototype.Jl,Pt.prototype.addLinkDataCollection=Pt.prototype.ly,Pt.prototype.addLinkData=Pt.prototype.Yh,Pt.prototype.containsLinkData=Pt.prototype.Cc,Pt.prototype.makeLinkDataKeyUnique=Pt.prototype.$r,Pt.prototype.findLinkDataForKey=Pt.prototype.Zg,Pt.prototype.setKeyForLinkData=Pt.prototype.ks,Pt.prototype.getKeyForLinkData=Pt.prototype.uc,Pt.prototype.removeLabelKeyForLinkData=Pt.prototype.xx,Pt.prototype.addLabelKeyForLinkData=Pt.prototype.hu,Pt.prototype.setLabelKeysForLinkData=Pt.prototype.ls,Pt.prototype.getLabelKeysForLinkData=Pt.prototype.vf,Pt.prototype.setToPortIdForLinkData=Pt.prototype.hv,Pt.prototype.getToPortIdForLinkData=Pt.prototype.gx,Pt.prototype.setFromPortIdForLinkData=Pt.prototype.dv,Pt.prototype.getFromPortIdForLinkData=Pt.prototype.ax,Pt.prototype.setToKeyForLinkData=Pt.prototype.gv,Pt.prototype.getToKeyForLinkData=Pt.prototype.ex,Pt.prototype.setFromKeyForLinkData=Pt.prototype.cv,Pt.prototype.getFromKeyForLinkData=Pt.prototype.$w,Pt.prototype.clear=Pt.prototype.clear;var Mw=Object.freeze([]);function ai(t,e){st.call(this),this.ze="parent",this.vm=!1,this.ij="parentLinkCategory",void 0!==t&&(_n(t)?this.nodeDataArray=t:Object.assign(this,t)),e&&Object.assign(this,e)}function Se(t){Lt.call(this),this.Qv=this.Hm=this.hc=0,this.zp=360,this.Pv=Po,this.Ni=0,this.Dv=new A,this.mp=this.ee=0,this.wr=new cg,this.Is=this.hj=0,this.Zx=600,this.In=NaN,this.km=1,this.Un=0,this.jl=360,this.Nb=Po,this.L=Ri,this.fd=ad,this.Zc=wC,this.gf=6,this.un=ld,t&&Object.assign(this,t)}function nd(t,e,n,s,l){var u=t.zp,c=t.hc;t=t.ee,s=s*Math.PI/180,n=n*Math.PI/180;for(var d=e.length,p=0;p<d;p++){var g=s+(l===Ri?p*n/(360<=u?d:d-1):-p*n/d),y=e.K(p),w=c*Math.tan(g)/t;w=Math.sqrt((c*c+t*t*w*w)/(1+w*w)),y.centerX=w*Math.cos(g),y.centerY=w*Math.sin(g),y.actualAngle=180*g/Math.PI}}function id(t,e,n,s){var l=t.hc,u=t.ee,c=t.Ni;n=n*Math.PI/180;for(var d=e.length,p=0;p<d;p++){var g=e.K(p),y=e.K(p===d-1?0:p+1),w=u*Math.sin(n);g.centerX=l*Math.cos(n),g.centerY=w,g.actualAngle=180*n/Math.PI,isNaN(g.diameter)&&Ql(g,0),isNaN(y.diameter)&&Ql(y,0),g=od(t,l,u,s===Ri?n:-n,(g.diameter+y.diameter)/2+c),n+=s===Ri?g:-g}}function rd(t,e,n,s){var l=t.hc,u=t.ee,c=t.mp;n=n*Math.PI/180;for(var d=e.length,p=0;p<d;p++){var g=e.K(p);g.centerX=l*Math.cos(n),g.centerY=u*Math.sin(n),g.actualAngle=180*n/Math.PI,g=od(t,l,u,s===Ri?n:-n,c),n+=s===Ri?g:-g}}function Sw(t,e,n,s,l){var u=t.zp;if(t.hj=0,t.wr=new cg,360>n){for(u=s+(l===Ri?u:-u);0>u;)u+=360;180<(u%=360)&&(u-=360),u*=Math.PI/180,t.Is=u,sl(t,e,n,s,l)}else Py(t,e,n,s,l);t.wr.commit(e)}function Py(t,e,n,s,l){var u=t.hc,c=t.Ni,d=t.Hm,p=u*Math.cos(s*Math.PI/180),g=t.ee*Math.sin(s*Math.PI/180),y=e.Ea();if(3===y.length)y[0].centerX=u,y[0].centerY=0,y[1].centerX=y[0].centerX-y[0].width/2-y[1].width/2-c,y[1].y=y[0].y,y[2].centerX=(y[0].centerX+y[1].centerX)/2,y[2].y=y[0].y-y[2].height-c;else if(4===y.length)y[0].centerX=u,y[0].centerY=0,y[2].centerX=-y[0].centerX,y[2].centerY=y[0].centerY,y[1].centerX=0,y[1].y=Math.min(y[0].y,y[2].y)-y[1].height-c,y[3].centerX=0,y[3].y=Math.max(y[0].y+y[0].height+c,y[2].y+y[2].height+c);else{u=A.alloc();for(var w=0;w<y.length&&(y[w].centerX=p,y[w].centerY=g,!(w>=y.length-1));w++)lg(t,p,g,y,w,l,u)||ug(t,p,g,y,w,l,u),p=u.x,g=u.y;if(A.free(u),t.hj++,!(23<t.hj)){p=y[0].centerX,g=y[0].centerY,u=y[y.length-1].centerX,w=y[y.length-1].centerY;var C=Math.abs(p-u)-((y[0].width+y[y.length-1].width)/2+c),D=Math.abs(g-w)-((y[0].height+y[y.length-1].height)/2+c);c=0,1>Math.abs(D)?Math.abs(p-u)<(y[0].width+y[y.length-1].width)/2&&(c=0):c=0<D?D:1>Math.abs(C)?0:C,p=Math.abs(u)>Math.abs(w)?0<u!=g>w:0<w!=p<u,(p=l===Ri?p:!p)&&(c=-Math.abs(c),c=Math.min(c,-y[y.length-1].width),c=Math.min(c,-y[y.length-1].height)),t.wr.compare(c,y),1<Math.abs(c)&&(t.hc=8>t.hj?t.hc-c/(2*Math.PI):5>y.length&&10<c?t.hc/2:t.hc-(0<c?1.7:-2.3),t.ee=t.hc*d,Py(t,e,n,s,l))}}}function sl(t,e,n,s,l){for(var u=t.hc,c=t.ee,d=t.Hm,p=u*Math.cos(s*Math.PI/180),g=c*Math.sin(s*Math.PI/180),y=A.alloc(),w=e.Ea(),C=0;C<w.length&&(w[C].centerX=p,w[C].centerY=g,!(C>=w.length-1));C++)lg(t,p,g,w,C,l,y)||ug(t,p,g,w,C,l,y),p=y.x,g=y.y;if(A.free(y),t.hj++,!(23<t.hj)){if(p=Math.atan2(g,p),p=l===Ri?t.Is-p:p-t.Is,u=(p=Math.abs(p)<Math.abs(p-2*Math.PI)?p:p-2*Math.PI)*(u+c)/2,c=t.wr,Math.abs(u)<Math.abs(c.xl))for(c.xl=u,c.bk=[],c.cm=[],p=0;p<w.length;p++)c.bk[p]=w[p].bounds.x,c.cm[p]=w[p].bounds.y;1<Math.abs(u)&&(t.hc=8>t.hj?t.hc-u/(2*Math.PI):t.hc-(0<u?1.7:-2.3),t.ee=t.hc*d,sl(t,e,n,s,l))}}function lg(t,e,n,s,l,u,c){var d=t.hc,p=t.ee,g=0;t=(s[l].width+s[l+1].width)/2+t.Ni;var y=!1;if(0<=n!=(u===Ri)){if((u=e+t)>d){if((u=e-t)<-d)return c.x=u,c.y=g,!1;y=!0}}else if((u=e-t)<-d){if((u=e+t)>d)return c.x=u,c.y=g,!1;y=!0}return g=Math.sqrt(1-Math.min(1,u*u/(d*d)))*p,0>n!==y&&(g=-g),Math.abs(n-g)>(s[l].height+s[l+1].height)/2?(c.x=u,c.y=g,!1):(c.x=u,c.y=g,!0)}function ug(t,e,n,s,l,u,c){var d=t.hc,p=t.ee,g=0;if(t=(s[l].height+s[l+1].height)/2+t.Ni,s=!1,0<=e!=(u===Ri)){if((u=n-t)<-p){if((u=n+t)>p)return c.x=g,void(c.y=u);s=!0}}else if((u=n+t)>p){if((u=n-t)<-p)return c.x=g,void(c.y=u);s=!0}g=Math.sqrt(1-Math.min(1,u*u/(p*p)))*d,0>e!==s&&(g=-g),c.x=g,c.y=u}function ic(t,e,n,s,l){var u=t.Zx;if(.001>Math.abs(t.Hm-1))return void 0!==s&&void 0!==l?l*e:2*Math.PI*e;t=e>n?Math.sqrt(e*e-n*n)/e:Math.sqrt(n*n-e*e)/n;for(var c=0,d=void 0!==s&&void 0!==l?l/(u+1):Math.PI/(2*(u+1)),p=0,g=0;g<=u;g++){p=void 0!==s&&void 0!==l?s+g*l/u:g*Math.PI/(2*u);var y=Math.sin(p);c+=Math.sqrt(1-t*t*y*y)*d}return void 0!==s&&void 0!==l?(e>n?e:n)*c:4*(e>n?e:n)*c}function Ny(t,e,n,s,l){return e/(void 0!==s&&void 0!==l?ic(t,1,n,s,l):ic(t,1,n))}function od(t,e,n,s,l){if(.001>Math.abs(t.Hm-1))return l/e;var u=e>n?Math.sqrt(e*e-n*n)/e:Math.sqrt(n*n-e*e)/n,c=0;t=2*Math.PI/(700*t.network.vertexes.count),e>n&&(s+=Math.PI/2);for(var d=0;;d++){var p=Math.sin(s+d*t);if((c+=(e>n?e:n)*Math.sqrt(1-u*u*p*p)*t)>=l)return d*t}}Pt.className="GraphLinksModel",Eo.GraphLinksModel=Pt,st.constructGraphLinksModel=st.constructGraphLinksModel=function(){return new Pt},st.initDiagramModel=ww=function(){return new Pt},zt(ai,st),ai.constructGraphLinksModel=st.constructGraphLinksModel,ai.prototype.cloneProtected=function(t){st.prototype.cloneProtected.call(this,t),t.ze=this.ze,t.vm=this.vm,t.ij=this.ij},(_=ai.prototype).toString=function(t){if(void 0===t&&(t=0),2<=t)return this.Qo();var e=(""!==this.name?this.name:"")+" TreeModel";if(0<t){e+="\n node data:";for(var n=(t=this.nodeDataArray).length,s=0;s<n;s++){var l=t[s];e+=" "+this.ua(l)+":"+vo(l)}}return e},_.am=function(){var t=st.prototype.am.call(this),e="";return"parent"!==this.nodeParentKeyProperty&&"string"==typeof this.nodeParentKeyProperty&&(e+=',\n  "nodeParentKeyProperty": '+this.quote(this.nodeParentKeyProperty)),t+e},_.Io=function(t){st.prototype.Io.call(this,t),t.nodeParentKeyProperty&&(this.nodeParentKeyProperty=t.nodeParentKeyProperty)},_.Ho=function(t){void 0!==t.nodeParentKeyProperty&&t.nodeParentKeyProperty!==this.nodeParentKeyProperty&&Y("applyIncrementalJson cannot change Model properties"),st.prototype.Ho.call(this,t)},_.Dl=function(t){return t},_.bh=function(t){if(null!==t){var e=this.ze;if(""!==e&&void 0!==(e=Be(t,e))){if(Xl(e))return e;Y("ParentKey value for node data "+t+" is not a number or a string: "+e)}}},_.ie=function(t,e){if(null===e&&(e=void 0),null!==t){var n=this.ze;if(""!==n)if(e=this.Dl(e),this.lb(t)){var s=Be(t,n);s!==e&&(Yo(this,s,t),se(t,n,e),null===this.dc(e)&&Ko(this,e,t),rn(this,"nodeParentKey",re,n,t,s,e),"string"==typeof n&&this.Ka(t,n))}else se(t,n,e)}},_.Pr=function(t){if(null===t)return"";var e=this.ij;return""===e||void 0===(e=Be(t,e))?"":"string"==typeof e?e:(Y("getParentLinkCategoryForNodeData found a non-string category for "+t+": "+e),"")},ai.prototype.getLinkCategoryForData=function(t){return this.Pr(t)},ai.prototype.ms=function(t,e){if(null!==t){var n=this.ij;if(""!==n)if(this.lb(t)){var s=Be(t,n);void 0===s&&(s=""),s!==e&&(se(t,n,e),rn(this,"parentLinkCategory",re,n,t,s,e),"string"==typeof n&&this.Ka(t,n))}else se(t,n,e)}},ai.prototype.setLinkCategoryForData=function(t,e){this.ms(t,e)},ai.prototype.copyNodeData=function(t){return null===t?null:(t=st.prototype.copyNodeData.call(this,t),this.Dj||""===this.ze||void 0===Be(t,this.ze)||se(t,this.ze,void 0),t)},ai.prototype.setDataProperty=function(t,e,n){if(this.lb(t)){if(e===this.nodeKeyProperty)return void this.Sl(t,n);if(e===this.nodeCategoryProperty)return void this.Rl(t,n);if(e===this.nodeParentKeyProperty)return void this.ie(t,n)}var s=Be(t,e);s!==n&&(se(t,e,n),this.fs(t,e,s,n))},(_=ai.prototype).Mo=function(t,e){st.prototype.Mo.call(this,t,e);for(var n=this.kb.iterator;n.next();)this.Zu(n.value,t,e)},_.Zu=function(t,e,n){if(this.bh(t)===e){var s=this.ze;se(t,s,n),rn(this,"nodeParentKey",re,s,t,e,n),"string"==typeof s&&this.Ka(t,s)}},_.Nl=function(t){st.prototype.Nl.call(this,t);var e=ig(this,t=this.ua(t));if(null!==e){var n=ce();for(e=e.iterator;e.next();){var s=e.value;if(this.lb(s)&&this.bh(s)===t){var l=this.ze;rn(this,"nodeParentKey",re,l,s,t,t),"string"==typeof l&&this.Ka(s,l),n.push(s)}}for(e=0;e<n.length;e++)Yo(this,t,n[e]);It(n)}},_.Ml=function(t){st.prototype.Ml.call(this,t);var e=this.bh(t);e=this.Dl(e),null===this.dc(e)&&Ko(this,e,t)},_.To=function(t){st.prototype.To.call(this,t),Yo(this,this.bh(t),t)},_.Tl=function(t,e){st.prototype.Tl.call(this,t,e),this.ms(e,this.Pr(t)),this.ie(e,this.bh(t))},_.Bl=function(){return!0},_.Vr=function(){return!0},St.Object.defineProperties(ai.prototype,{nodeParentKeyProperty:{get:function(){return this.ze},set:function(t){var e=this.ze;e!==t&&(this.ze=t,this.g("nodeParentKeyProperty",e,t))}},Dj:{get:function(){return this.vm},set:function(t){this.vm!==t&&(this.vm=t)}},parentLinkCategoryProperty:{get:function(){return this.ij},set:function(t){var e=this.ij;e!==t&&(this.ij=t,this.g("parentLinkCategoryProperty",e,t))}},linkCategoryProperty:{get:function(){return this.parentLinkCategoryProperty},set:function(t){this.parentLinkCategoryProperty=t}},type:{get:function(){return"TreeModel"}}}),ai.prototype.setParentLinkCategoryForNodeData=ai.prototype.ms,ai.prototype.getParentLinkCategoryForNodeData=ai.prototype.Pr,ai.prototype.setParentKeyForNodeData=ai.prototype.ie,ai.prototype.getParentKeyForNodeData=ai.prototype.bh,ai.className="TreeModel",Eo.TreeModel=ai,zt(Se,Lt),Se.prototype.cloneProtected=function(t){Lt.prototype.cloneProtected.call(this,t),t.In=this.In,t.km=this.km,t.Un=this.Un,t.jl=this.jl,t.Nb=this.Nb,t.L=this.L,t.fd=this.fd,t.Zc=this.Zc,t.gf=this.gf,t.un=this.un},Se.prototype.ob=function(t){t.classType===Se?t===hg||t===fn||t===Iy||t===Ay||t===ad?this.sorting=t:t===rc||t===sd||t===Ri||t===Zl?this.direction=t:t===Xo||t===Jl||t===Po||t===No?this.arrangement=t:(t===oc||t===ld)&&(this.nodeDiameterFormula=t):Lt.prototype.ob.call(this,t)},Se.prototype.createNetwork=function(){return new ud(this)},Se.prototype.doLayout=function(t){if(null===this.network&&(this.network=this.makeNetwork(t)),this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin),1>=(t=this.network.vertexes).count)1===t.count&&((t=t.first()).centerX=0,t.centerY=0);else{var e=new tt;e.addAll(t.iterator),t=new tt;var l,u,n=new tt,s=this.sort(e),c=this.mp,d=this.arrangement,p=this.nodeDiameterFormula,g=this.radius;(!isFinite(g)||0>=g)&&(g=NaN);var y=this.aspectRatio;(!isFinite(y)||0>=y)&&(y=1);var w=this.startAngle;isFinite(w)||(w=0);var C=this.sweepAngle;if((!isFinite(C)||360<C||1>C)&&(C=360),e=this.spacing,isFinite(e)||(e=NaN),d===No&&p===oc?d=Po:d===No&&p!==oc&&(d=this.arrangement),(this.direction===rc||this.direction===sd)&&this.sorting!==ad){for(p=0;!(p>=s.length||(t.add(s.K(p)),p+1>=s.length));p+=2)n.add(s.K(p+1));this.direction===rc?(this.arrangement===No&&t.reverse(),(s=new tt).addAll(t),s.addAll(n)):(this.arrangement===No&&n.reverse(),(s=new tt).addAll(n),s.addAll(t))}p=s.length;for(var D=u=l=0;D<s.length;D++){var M=w+C*u*(this.direction===Ri?1:-1)/p,E=s.K(D).diameter;isNaN(E)&&(E=Ql(s.K(D),M)),360>C&&(0===D||D===s.length-1)&&(E/=2),l+=E,u++}if(isNaN(g)||d===No){if(isNaN(e)&&(e=6),d!==Po&&d!==No){for(u=-1/0,c=0;c<p;c++)D=s.K(c),l=s.K(c===p-1?0:c+1),isNaN(D.diameter)&&Ql(D,0),isNaN(l.diameter)&&Ql(l,0),u=Math.max(u,(D.diameter+l.diameter)/2);c=u+e,g=d===Xo?(u+e)/(2*Math.PI/p):Ny(this,c*(360<=C?p:p-1),y,w*Math.PI/180,C*Math.PI/180)}else g=Ny(this,l+(360<=C?p:p-1)*(d!==No?e:1.6*e),y,w*Math.PI/180,C*Math.PI/180);u=g*y}else if(D=ic(this,g,u=g*y,w*Math.PI/180,C*Math.PI/180),isNaN(e))(d===Po||d===No)&&(e=(D-l)/(360<=C?p:p-1));else if(d===Po||d===No)(D=(D-l)/(360<=C?p:p-1))<e?u=(g=Ny(this,l+e*(360<=C?p:p-1),y,w*Math.PI/180,C*Math.PI/180))*y:e=D;else{for(c=-1/0,l=0;l<p;l++)M=s.K(l),E=s.K(l===p-1?0:l+1),isNaN(M.diameter)&&Ql(M,0),isNaN(E.diameter)&&Ql(E,0),c=Math.max(c,(M.diameter+E.diameter)/2);(l=Ny(this,(c+=e)*(360<=C?p:p-1),y,w*Math.PI/180,C*Math.PI/180))>g?u=(g=l)*y:c=D/(360<=C?p:p-1)}if(this.Pv=d,this.hc=g,this.Hm=y,this.Qv=w,this.zp=C,this.Ni=e,this.ee=u,this.mp=c,e=s,s=this.Pv,d=this.hc,g=this.Qv,y=this.zp,w=this.Ni,C=this.ee,p=this.mp,this.direction!==rc&&this.direction!==sd||s!==No)if(this.direction===rc||this.direction===sd){switch(c=0,s){case Jl:c=180*od(this,d,C,g,p)/Math.PI;break;case Po:p=e=0,null!==(c=t.first())&&(e=Ql(c,Math.PI/2)),null!==(c=n.first())&&(p=Ql(c,Math.PI/2)),c=180*od(this,d,C,g,w+(e+p)/2)/Math.PI;break;case Xo:c=y/e.length}if(this.direction===rc){switch(s){case Jl:rd(this,t,g,Zl);break;case Po:id(this,t,g,Zl);break;case Xo:nd(this,t,y/2,g,Zl)}switch(s){case Jl:rd(this,n,g+c,Ri);break;case Po:id(this,n,g+c,Ri);break;case Xo:nd(this,n,y/2,g+c,Ri)}}else{switch(s){case Jl:rd(this,n,g,Zl);break;case Po:id(this,n,g,Zl);break;case Xo:nd(this,n,y/2,g,Zl)}switch(s){case Jl:rd(this,t,g+c,Ri);break;case Po:id(this,t,g+c,Ri);break;case Xo:nd(this,t,y/2,g+c,Ri)}}}else switch(s){case Jl:rd(this,e,g,this.direction);break;case Po:id(this,e,g,this.direction);break;case Xo:nd(this,e,y,g,this.direction);break;case No:Sw(this,e,y,g,this.direction)}else Sw(this,e,y,g-y/2,Ri)}this.updateParts(),this.network=null,this.isValidLayout=!0},Se.prototype.commitLayout=function(){this.commitNodes(),this.isRouting&&this.commitLinks()},Se.prototype.commitNodes=function(){var t=null!==this.group&&null!==this.group.placeholder&&this.group.isSubGraphExpanded,e=t?this.group.location.copy():null,n=this.actualCenter;t?n=new A(0,0):(n.x=this.arrangementOrigin.x+this.hc,n.y=this.arrangementOrigin.y+this.ee);for(var s=this.network.vertexes.iterator;s.next();){var l=s.value;l.x+=n.x,l.y+=n.y,l.commit()}t&&(this.group.Za(),t=this.group.position.copy(),n=this.group.location.copy(),e=e.je(n.je(t)),this.group.move(e),this.Dv=e.je(t))},Se.prototype.commitLinks=function(){for(var t=this.network.edges.iterator;t.next();)t.value.commit()},Se.prototype.sort=function(t){switch(this.sorting){case Iy:break;case Ay:t.reverse();break;case hg:t.sort(this.comparer);break;case fn:t.sort(this.comparer),t.reverse();break;case ad:return this.Vj(function EC(t){for(var e=[],n=0;n<t.length;n++)e.push(0);n=new tt;for(var s=0;s<t.length;s++){var l=-1,u=-1;if(0===s)for(var c=0;c<t.length;c++){var d=t.K(c).edgesCount;d>l&&(l=d,u=c)}else for(c=0;c<t.length;c++)(d=e[c])>l&&(l=d,u=c);for(n.add(t.K(u)),e[u]=-1,c=(u=t.K(u)).sourceEdges;c.next();)0>(l=t.indexOf(c.value.fromVertex))||0<=e[l]&&e[l]++;for(u=u.destinationEdges;u.next();)0>(l=t.indexOf(u.value.toVertex))||0<=e[l]&&e[l]++}return n}(t));default:Y("Invalid sorting type.")}return t},Se.prototype.Vj=function(t){for(var e=[],n=0;n<t.length;n++){var s=t.K(n);e[n]=[];for(var l,u=s.destinationEdges;u.next();)(l=t.indexOf(u.value.toVertex))!==n&&0>e[n].indexOf(l)&&e[n].push(l);for(s=s.sourceEdges;s.next();)(l=t.indexOf(s.value.fromVertex))!==n&&0>e[n].indexOf(l)&&e[n].push(l)}for(u=[],n=0;n<e.length;n++)u[n]=0;n=[];var c=[],d=[];s=[],l=new tt;for(var p=0,g=0;g<e.length;g++){var y=e[g].length;if(1===y)s.push(g);else if(0===y)l.add(t.K(g));else{if(0===p)n.push(g);else{for(var w=y=1/0,C=-1,D=[],M=0;M<n.length;M++)0>e[n[M]].indexOf(n[M===n.length-1?0:M+1])&&D.push(M===n.length-1?0:M+1);if(0===D.length)for(M=0;M<n.length;M++)D.push(M);for(M=0;M<D.length;M++){for(var E=D[M],I=e[g],P=0,k=0;k<c.length;k++){var b=u[c[k]],O=u[d[k]];if(b<O){var L=b;b=O}else L=O;if(L<E&&E<=b)for(O=0;O<I.length;O++){var H=I[O];0>n.indexOf(H)||L<u[H]&&u[H]<b||L===u[H]||b===u[H]||P++}else for(O=0;O<I.length;O++)0>n.indexOf(H=I[O])||L<u[H]&&u[H]<b&&L!==u[H]&&b!==u[H]&&P++}for(I=P,k=P=0;k<e[g].length;k++)0<=(L=n.indexOf(e[g][k]))&&(P+=(L=Math.abs(E-(L>=E?L+1:L)))<n.length+1-L?L:n.length+1-L);for(k=0;k<c.length;k++)(L=u[c[k]])>=E&&L++,(b=u[d[k]])>=E&&b++,L>b&&(O=b,b=L,L=O),b-L<(n.length+2)/2==(L<E&&E<=b)&&P++;(I<y||I===y&&P<w)&&(y=I,w=P,C=E)}for(n.splice(C,0,g),y=0;y<n.length;y++)u[n[y]]=y;for(y=0;y<e[g].length;y++)0<=n.indexOf(w=e[g][y])&&(c.push(g),d.push(w))}p++}}for(c=n.length;;){for(u=!0,d=0;d<s.length;d++)if(0<=(y=n.indexOf(g=e[p=s[d]][0]))){for(C=w=0;C<e[g].length;C++)0>(D=n.indexOf(e[g][C]))||D===y||(w+=D<y!=(M=D>y?D-y:y-D)>c-M?1:-1);n.splice(0>w?y:y+1,0,p),s.splice(d,1),d--}else u=!1;if(u)break;n.push(s[0]),s.splice(0,1)}for(e=0;e<n.length;e++)l.add(t.K(n[e]));return l},St.Object.defineProperties(Se.prototype,{radius:{get:function(){return this.In},set:function(t){this.In!==t&&(0<t||isNaN(t))&&(this.In=t,this.D())}},aspectRatio:{get:function(){return this.km},set:function(t){this.km!==t&&0<t&&(this.km=t,this.D())}},startAngle:{get:function(){return this.Un},set:function(t){this.Un!==t&&(this.Un=t,this.D())}},sweepAngle:{get:function(){return this.jl},set:function(t){this.jl!==t&&(this.jl=0<t&&360>=t?t:360,this.D())}},arrangement:{get:function(){return this.Nb},set:function(t){this.Nb===t||t!==No&&t!==Po&&t!==Jl&&t!==Xo||(this.Nb=t,this.D())}},direction:{get:function(){return this.L},set:function(t){this.L===t||t!==Ri&&t!==Zl&&t!==rc&&t!==sd||(this.L=t,this.D())}},sorting:{get:function(){return this.fd},set:function(t){this.fd===t||t!==Iy&&t!==Ay&&t!==hg&&!fn&&t!==ad||(this.fd=t,this.D())}},comparer:{get:function(){return this.Zc},set:function(t){this.Zc!==t&&(this.Zc=t,this.D())}},spacing:{get:function(){return this.gf},set:function(t){this.gf!==t&&(this.gf=t,this.D())}},nodeDiameterFormula:{get:function(){return this.un},set:function(t){this.un===t||t!==ld&&t!==oc||(this.un=t,this.D())}},actualXRadius:{get:function(){return this.hc}},actualYRadius:{get:function(){return this.ee}},actualSpacing:{get:function(){return this.Ni}},actualCenter:{get:function(){return this.Dv}}});var Po=new K(Se,"ConstantSpacing",0),Jl=new K(Se,"ConstantDistance",1),Xo=new K(Se,"ConstantAngle",2),No=new K(Se,"Packed",3),Ri=new K(Se,"Clockwise",4),Zl=new K(Se,"Counterclockwise",5),rc=new K(Se,"BidirectionalLeft",6),sd=new K(Se,"BidirectionalRight",7),Iy=new K(Se,"Forwards",8),Ay=new K(Se,"Reverse",9),hg=new K(Se,"Ascending",10),fn=new K(Se,"Descending",11),ad=new K(Se,"Optimized",12),ld=new K(Se,"Pythagorean",13),oc=new K(Se,"Circular",14);function cg(){this.xl=-1/0,this.cm=this.bk=null}function ud(t){Jt.call(this,t)}function fg(t){tn.call(this,t),this.u=this.Mi=NaN}function Ql(t,e){var n=t.network;if(null===n)return NaN;if(null===(n=n.layout))return NaN;if(n.arrangement===No)if(n.nodeDiameterFormula===oc)t.Mi=Math.max(t.width,t.height);else{if(n=Math.abs(Math.sin(e)),e=Math.abs(Math.cos(e)),0===n)return t.width;if(0===e)return t.height;t.Mi=Math.min(t.height/n,t.width/e)}else t.Mi=n.nodeDiameterFormula===oc?Math.max(t.width,t.height):Math.sqrt(t.width*t.width+t.height*t.height);return t.Mi}function ky(t){si.call(this,t)}function dn(t){Lt.call(this),this.Sg=null,this.gn=0,this.Td=new gt(100,100).freeze(),this.jm=!1,this.ff=!0,this.od=!1,this.Tk=100,this.Im=1,this.Pf=1e3,this.pn=10,this.Jn=Math,this.vk=.05,this.uk=50,this.sk=150,this.tk=0,this.Dm=10,this.Cm=5,t&&Object.assign(this,t)}function Ju(t,e,n){if(function GE(t,e){if(10<e||3>t.network.vertexes.count)return!1;for(t.Sg=t.network.vertexes.Ea(),(t=t.Sg).sort(function(n,s){return null===n||null===s||n===s?0:s.Nd-n.Nd}),e=t.length-1;0<=e&&1>=t[e].Nd;)e--;return 1<t.length-e}(t,e)){var s=t.Pf;t.Pf*=1+1/(e+1);var l=function dg(t,e){for(var n=t.network,s=new Ms(t),l=0;l<t.Sg.length;l++){var u=t.Sg[l];if(!(1<u.Nd))break;s.fg(u);var c=new Vr;c.ts=u.Nd,c.us=u.width,c.ss=u.height,c.wv=u.focus.x,c.xv=u.focus.y,null===u.Ke&&(u.Ke=new tt),u.Ke.add(c),u.av=u.Ke.count-1}for(u=n.edges.iterator;u.next();){var d=u.value;c=d.toVertex,(l=d.fromVertex).network===s&&c.network===s?s.ol(d):l.network===s?(null===(d=l.Bj)&&(d=new tt,l.Bj=d),d.add(c),l.Nd--,l.hh+=c.hh):c.network===s&&(null===(d=c.Bj)&&(d=new tt,c.Bj=d),d.add(l),c.Nd--,c.hh+=l.hh)}for(l=s.edges.iterator;l.next();)(u=l.value).length*=Math.max(1,R.sqrt((u.fromVertex.hh+u.toVertex.hh)/(4*e+1)));for(e=s.vertexes.iterator;e.next();){var p=(l=e.value).Bj;if(null!==p&&0<p.count&&!(0>=(c=l.Ke.K(l.Ke.count-1).ts-l.Nd))){for(var g=d=0,y=p.count-c;y<p.count;y++){var w=p.K(y),C=null;for(u=w.edges.iterator;u.next();){var D=u.value;if(D.bx(w)===l){C=D;break}}null!==C&&(g+=C.length,d+=w.width*w.height)}u=l.centerX,p=l.centerY,C=l.focus,1>(D=(y=l.width)*(w=l.height))&&(D=1),d=R.sqrt((d+D+g*g*4/(c*c))/D),l.bounds=new U(u-C.x-(c=(d-1)*y/2),p-C.y-(d=(d-1)*w/2),y+2*c,w+2*d),l.focus=new A(C.x+c,C.y+d)}}return t.network=s,n}(t,e),u=Math.max(0,Math.max(Math.min(t.network.vertexes.count,n*(e+1)/11),10));for(t.maxIterations+=u,Ju(t,e+1,n),_a(t,u),function yD(t,e){for(var n=t.network.vertexes.iterator;n.next();){var s=n.value;if(s.network=e,null!==s.Ke){var l=s.Ke.K(s.av);s.Nd=l.ts;var u=l.wv,c=l.xv;s.bounds=new U(s.centerX-u,s.centerY-c,l.us,l.ss),s.focus=new A(u,c),s.av--}}for(n=t.network.edges.iterator;n.next();)n.value.network=e;t.network=e}(t,l),(e=l.vertexes.Ea()).sort(function(c,d){return null===c||null===d||c===d?0:d.Nd-c.Nd}),n=0;n<e.length;n++)vD(t,e[n]);t.Pf=s}}function vD(t,e){var n=e.Bj;if(null!==n&&0!==n.count){var s=e.centerX,l=e.centerY,u=e.width,c=e.height;null!==e.Ke&&0<e.Ke.count&&(u=(c=e.Ke.K(0)).us,c=c.ss),u=R.sqrt(u*u+c*c)/2;for(var d=!1,p=c=0,g=0,y=e.vertexes.iterator;y.next();){var w=y.value;1>=w.Nd?p++:(d=!0,g++,c+=Math.atan2(e.centerY-w.centerY,e.centerX-w.centerX))}if(0!==p)for(0<g&&(c/=g),g=e=0,e=d?2*Math.PI/(p+1):2*Math.PI/p,p%2==0&&(g=e/2),1<n.count&&n.sort(function(D,M){return null===D||null===M||D===M?0:M.width*M.height-D.width*D.height}),d=p%2==0?0:1,n=n.iterator;n.next();)if(!(1<(p=n.value).Nd||t.isFixed(p))){for(y=null,w=p.edges.iterator;w.next();){y=w.value;break}var C=p.height;w=R.sqrt((w=p.width)*w+C*C)/2,y=u+y.length+w,w=c+(e*(d/2>>1)+g)*(d%2==0?1:-1),p.centerX=s+y*Math.cos(w),p.centerY=l+y*Math.sin(w),d++}}}function by(t,e,n,s,l,u,c){var d=9e19,p=-1,g=0;t:for(;g<e;g++){var y=t[g],w=y.x-n,C=y.y-s;if((w=w*w+C*C)<d){for(C=g-1;0<=C;C--)if(t[C].y>y.y&&t[C].x-y.x<l+c.width)continue t;for(C=g+1;C<e;C++)if(t[C].x>y.x&&t[C].y-y.y<u+c.height)continue t;p=g,d=w}}return p}function PC(t,e){var n=t.bounds,s=n.x;t=n.y;var l=n.width;n=n.height;var u=e.bounds,c=u.x;e=u.y;var d=u.width;return u=u.height,s+l<c?t>e+u?R.sqrt((n=s+l-c)*n+(t=t-e-u)*t):t+n<e?R.sqrt((s=s+l-c)*s+(t=t+n-e)*t):c-(s+l):s>c+d?t>e+u?R.sqrt((n=s-c-d)*n+(t=t-e-u)*t):t+n<e?R.sqrt((s=s-c-d)*s+(t=t+n-e)*t):s-(c+d):t>e+u?t-(e+u):t+n<e?e-(t+n):.1}function _a(t,e){for(t.Sg=null,e=t.gn+e;t.gn<e&&(t.gn++,pg(t)););t.Sg=null}function pg(t){null===t.Sg&&(t.Sg=t.network.vertexes.Ea());var e=t.Sg;if(0>=e.length)return!1;var n=e[0];n.forceX=0,n.forceY=0;for(var s=n.centerX,l=s,u=n=n.centerY,c=1;c<e.length;c++){var d=e[c];d.forceX=0,d.forceY=0;var p=d.centerX;d=d.centerY,s=Math.min(s,p),l=Math.max(l,p),n=Math.min(n,d),u=Math.max(u,d)}(l=l-s>u-n)?e.sort(function(E,I){return null===E||null===I||E===I?0:E.centerX-I.centerX}):e.sort(function(E,I){return null===E||null===I||E===I?0:E.centerY-I.centerY}),n=t.Pf;var g=s=d=0;for(u=0;u<e.length;u++){var y=(s=(c=e[u]).bounds).y+(d=c.focus).y;s=c.charge*t.electricalFieldX(p=s.x+d.x,y),g=c.charge*t.electricalFieldY(p,y),s+=c.mass*t.gravitationalFieldX(p,y),g+=c.mass*t.gravitationalFieldY(p,y),c.forceX+=s,c.forceY+=g;for(var w=u+1;w<e.length;w++){var C=e[w];if(C!==c){var D=(s=C.bounds).y+(d=C.focus).y;if(p-(g=s.x+d.x)>n||g-p>n){if(l)break}else if(y-D>n||D-y>n){if(!l)break}else{var M=PC(c,C);1>M?(null===(s=t.randomNumberGenerator)&&(t.randomNumberGenerator=s=new Io),M=s.random(),d=s.random(),s=p>g?(1+(s=Math.abs(C.bounds.right-c.bounds.x)))*M:p<g?-(1+(s=Math.abs(C.bounds.x-c.bounds.right)))*M:(1+(s=Math.max(C.width,c.width)))*M-s/2,g=y>D?(1+(g=Math.abs(C.bounds.bottom-c.bounds.y)))*d:p<g?-(1+(g=Math.abs(C.bounds.y-c.bounds.bottom)))*d:(1+(g=Math.max(C.height,c.height)))*d-g/2):(s=(g-p)/M*(d=-c.charge*C.charge/(M*M)),g=(D-y)/M*d),c.forceX+=s,c.forceY+=g,C.forceX-=s,C.forceY-=g}}}}for(l=t.network.edges.iterator;l.next();)s=(c=(n=(d=l.value).fromVertex).bounds).x+(p=n.focus).x,c=c.y+p.y,p=(y=(u=d.toVertex).bounds).x+(w=u.focus).x,y=y.y+w.y,1>(w=PC(n,u))?(null===(w=t.randomNumberGenerator)&&(t.randomNumberGenerator=w=new Io),d=w.random(),w=w.random(),s=(s>p?1:-1)*(1+(u.width>n.width?u.width:n.width))*d,g=(c>y?1:-1)*(1+(u.height>n.height?u.height:n.height))*w):(s=(p-s)/w*(d=d.stiffness*(w-d.length)),g=(y-c)/w*d),n.forceX+=s,n.forceY+=g,u.forceX-=s,u.forceY-=g;for(l=s=0;l<e.length;l++)t.isFixed(n=e[l])?t.moveFixedVertex(n):s=Math.max(s,t.moveVertex(n)||0);return s>t.epsilonDistance*t.epsilonDistance}function Vr(){this.xv=this.wv=this.ss=this.us=this.ts=0}function Ms(t){Jt.call(this,t)}function al(t){tn.call(this,t),this.ga=!1,this.Ga=this.u=NaN,this.hh=this.Nd=this.W=this.F=0,this.Ke=this.Bj=null,this.av=0}function Ir(t){si.call(this,t),this.j=this.m=NaN}function Io(){var t=0;void 0===t&&(t=42),this.seed=t,this.Kx=48271,this.Mx=2147483647,this.Q=44488.07041494893,this.Nx=3399,this.Lx=1/2147483647,this.random()}function jt(t){Lt.call(this),this.gc=this.be=25,this.L=0,this.rk=Jo,this.Ok=cd,this.Fk=jy,this.Xi=4,this.ek=Ee,this.Tf=15,this.ff=!0,this.jn=4,this.Ja=this.Dh=this.wa=-1,this.zc=this.Bg=0,this.Qa=this.Bd=this.Cd=this.ae=this.Hb=null,this.Cg=0,this.qn=this.fj=null,this.Lc=0,this.rn=null,this.Yc=new A,this.we=[],this.we.length=100,t&&Object.assign(this,t)}function Zu(t){var e=t.fromVertex.node||t.fromVertex.data;return t=t.toVertex.node||t.toVertex.data,null===e&&null===t?8:null===e||null===t?4:1}function Yn(t){null===t.fj&&(t.fj=[]);for(var e=0,n=t.network.vertexes.iterator;n.next();){var s=n.value;t.fj[e]=s.layer,e++,t.fj[e]=s.column,e++,t.fj[e]=s.index,e++}return t.fj}function Ti(t,e){var n=0;for(t=t.network.vertexes.iterator;t.next();){var s=t.value;s.layer=e[n],n++,s.column=e[n],n++,s.index=e[n],n++}}function sc(t,e,n){var s=Qs(t,e),l=t.Hb[e];(null===t.qn||t.qn.length<l*l)&&(t.qn=[]);for(var u=t.qn,c=0;c<l;c++){var C,d=0,p=s[c],g=p.near;if(null!==g&&g.layer===p.layer)if((p=g.index)>c)for(var y=c+1;y<p;y++){var w=s[y];w.near===g&&w.nf===g.nf||d++}else for(y=c-1;y>p;y--)(w=s[y]).near===g&&w.nf===g.nf||d++;if(0<=n)for(p=s[c].sourceEdgesArrayAccess,g=0;g<p.length;g++){var D=p[g];if(D.valid&&D.fromVertex.layer!==e)for(w=D.fromVertex.index,y=D.portToPos,D=D.portFromPos,C=g+1;C<p.length;C++){var M=p[C];if(M.valid&&M.fromVertex.layer!==e){var E=M.fromVertex.index,I=M.portToPos;M=M.portFromPos,y<I&&(w>E||w===E&&D>M)&&d++,I<y&&(E>w||E===w&&M>D)&&d++}}}if(0>=n)for(p=s[c].destinationEdgesArrayAccess,g=0;g<p.length;g++)if((D=p[g]).valid&&D.toVertex.layer!==e)for(w=D.toVertex.index,y=D.portToPos,D=D.portFromPos,C=g+1;C<p.length;C++)(M=p[C]).valid&&M.toVertex.layer!==e&&(E=M.toVertex.index,I=M.portToPos,D<(M=M.portFromPos)&&(w>E||w===E&&y>I)&&d++,M<D&&(E>w||E===w&&I>y)&&d++);for(u[c*l+c]=d,p=c+1;p<l;p++){var P=0,k=0;if(0<=n){d=s[c].sourceEdgesArrayAccess;var b=s[p].sourceEdgesArrayAccess;for(g=0;g<d.length;g++)if((D=d[g]).valid&&D.fromVertex.layer!==e)for(w=D.fromVertex.index,D=D.portFromPos,C=0;C<b.length;C++)(M=b[C]).valid&&M.fromVertex.layer!==e&&(E=M.fromVertex.index,M=M.portFromPos,(w<E||w===E&&D<M)&&k++,(E<w||E===w&&M<D)&&P++)}if(0>=n)for(d=s[c].destinationEdgesArrayAccess,b=s[p].destinationEdgesArrayAccess,g=0;g<d.length;g++)if((D=d[g]).valid&&D.toVertex.layer!==e)for(w=D.toVertex.index,y=D.portToPos,C=0;C<b.length;C++)(M=b[C]).valid&&M.toVertex.layer!==e&&(I=M.portToPos,(w<(E=M.toVertex.index)||w===E&&y<I)&&k++,(E<w||E===w&&I<y)&&P++);u[c*l+p]=P,u[p*l+c]=k}}return Ur(t,e,s),u}function ql(t){for(var e=0,n=0;n<=t.wa;n++){for(var s=t,l=n,u=Qs(s,l),c=s.Hb[l],d=0,p=0;p<c;p++){var g=u[p].destinationEdgesArrayAccess;if(null!==g)for(var y=0;y<g.length;y++){var w=g[y];w.valid&&w.toVertex.layer!==l&&(d+=(Math.abs(w.fromVertex.column+w.portFromColOffset-(w.toVertex.column+w.portToColOffset))+1)*Zu(w))}}Ur(s,l,u),e+=d}return e}function Qu(t,e,n){for(var s=Qs(t,e),l=t.Hb[e],u=[],c=0;c<l;c++){var d=s[c],p=null;0>=n&&(p=d.sourceEdgesArrayAccess);var g=null;0<=n&&(g=d.destinationEdgesArrayAccess);var y=0,w=0,C=d.near;if(null!==C&&C.layer===d.layer&&(y+=C.column-1,w++),null!==p)for(C=0;C<p.length;C++){var D=(d=p[C]).fromVertex;d.valid&&!d.rev&&D.layer!==e&&(y+=D.column,w++)}if(null!==g)for(p=0;p<g.length;p++)C=(d=g[p]).toVertex,d.valid&&!d.rev&&C.layer!==e&&(y+=C.column,w++);u[c]=0===w?-1:y/w}return Ur(t,e,s),u}function ac(t,e,n){for(var s=Qs(t,e),l=t.Hb[e],u=[],c=0;c<l;c++){var d=s[c],p=null;0>=n&&(p=d.sourceEdgesArrayAccess);var g=null;0<=n&&(g=d.destinationEdgesArrayAccess);var y=0,w=[],C=d.near;if(null!==C&&C.layer===d.layer&&(w[y]=C.column-1,y++),d=void 0,null!==p)for(C=0;C<p.length;C++){var D=(d=p[C]).fromVertex;d.valid&&!d.rev&&D.layer!==e&&(w[y]=D.column+d.portFromColOffset,y++)}if(null!==g)for(p=0;p<g.length;p++)C=(d=g[p]).toVertex,d.valid&&!d.rev&&C.layer!==e&&(w[y]=C.column+d.portToColOffset,y++);0===y?u[c]=-1:(w.sort(function(M,E){return M-E}),g=y>>1,u[c]=0!=(1&y)?w[g]:w[g-1]+w[g]>>1)}return Ur(t,e,s),u}function ll(t,e,n,s,l,u){if(e.component===s){if(e.component=n,l)for(var c=e.destinationEdges;c.next();){var d=c.value,p=d.toVertex,g=e.layer-p.layer;g===(d=t.linkMinLength(d))&&ll(t,p,n,s,l,u)}if(u)for(c=e.sourceEdges;c.next();)(g=(p=(d=c.value).fromVertex).layer-e.layer)===(d=t.linkMinLength(d))&&ll(t,p,n,s,l,u)}}function Oy(t,e,n,s,l,u){if(e.component===s){if(e.component=n,l)for(var c=e.destinationEdges;c.next();)Oy(t,c.value.toVertex,n,s,l,u);if(u)for(e=e.sourceEdges;e.next();)Oy(t,e.value.fromVertex,n,s,l,u)}}function NC(t){for(t=t.vertexes.iterator;t.next();){var e=t.value;if(e.valid)return e}return null}function Dw(t){for(t=t.vertexes.iterator;t.next();){var e=t.value;if(e.valid){for(var n=!0,s=e.destinationEdges;s.next();)if(s.value.toVertex.valid){n=!1;break}if(n)return e}}return null}function _w(t){for(t=t.vertexes.iterator;t.next();){var e=t.value;if(e.valid){for(var n=!0,s=e.sourceEdges;s.next();)if(s.value.fromVertex.valid){n=!1;break}if(n)return e}}return null}function Ly(t,e){e.gg=t.Cg,t.Cg++;for(var n=e.destinationEdges;n.next();){var s=n.value,l=s.toVertex;-1===l.gg&&(s.forest=!0,Ly(t,l))}e.finish=t.Cg,t.Cg++}function Tw(t){for(var e=t.network.vertexes.iterator;e.next();){var n=Ew(t,e.value);t.wa=Math.max(n,t.wa)}}function Ew(t,e){var n=0;if(-1===e.layer){for(var s=e.destinationEdges;s.next();){var l=s.value,u=l.toVertex;l=t.linkMinLength(l),n=Math.max(n,Ew(t,u)+l)}e.layer=n}else n=e.layer;return n}function Pw(t,e){var n=0;if(-1===e.layer){for(var s=e.sourceEdges;s.next();){var l=s.value,u=l.fromVertex;l=t.linkMinLength(l),n=Math.max(n,Pw(t,u)+l)}e.layer=n}else n=e.layer;return n}function Nw(t,e){if(!e.valid){e.valid=!0;for(var n=e.destinationEdges;n.next();)Nw(t,n.value.toVertex);for(n=t.network.vertexes.iterator;n.next();)n.value.component=-1;for(var s=e.sourceEdgesArrayAccess,l=s.length,u=0;u<l;u++){var c=s[u],d=c.fromVertex,p=c.toVertex;c=t.linkMinLength(c),d.layer-p.layer>c&&ll(t,d,0,-1,!0,!1)}for(ll(t,e,1,-1,!0,!0);0!==e.component;){for(u=0,s=1/0,d=0,p=null,c=t.network.vertexes.iterator;c.next();){var g=c.value;if(1===g.component){var y=0,w=!1,C=g.sourceEdgesArrayAccess;l=C.length;for(var D=0;D<l;D++){var M=C[D],E=M.fromVertex;y+=1,1!==E.component&&(u+=1,E=E.layer-g.layer,M=t.linkMinLength(M),s=Math.min(s,E-M))}for(l=(C=g.destinationEdgesArrayAccess).length,D=0;D<l;D++)--y,1!==(M=C[D].toVertex).component?--u:w=!0;(null===p||y<d)&&!w&&(p=g,d=y)}}if(0<u){for(n.reset();n.next();)1===(l=n.value).component&&(l.layer+=s);e.component=0}else p.component=0}for(n=t.network.vertexes.iterator;n.next();)n.value.component=-1;for(ll(t,e,1,-1,!0,!1);0!==e.component;){for(s=0,l=1/0,u=0,d=null,p=t.network.vertexes.iterator;p.next();)if(1===(c=p.value).component){for(g=0,y=!1,w=(C=c.sourceEdgesArrayAccess).length,D=0;D<w;D++)g+=1,1!==(M=C[D].fromVertex).component?s+=1:y=!0;for(w=(C=c.destinationEdgesArrayAccess).length,D=0;D<w;D++)--g,1!==(E=(M=C[D]).toVertex).component&&(--s,E=c.layer-E.layer,M=t.linkMinLength(M),l=Math.min(l,E-M));(null===d||g>u)&&!y&&(d=c,u=g)}if(0>s){for(n.reset();n.next();)1===(s=n.value).component&&(s.layer-=l);e.component=0}else d.component=0}}}function IC(t,e,n){return 90===t.L?n&&!e.rev||!n&&e.rev?270:90:180===t.L?n&&!e.rev||!n&&e.rev?0:180:270===t.L?n&&!e.rev||!n&&e.rev?90:270:n&&!e.rev||!n&&e.rev?180:0}function AC(t,e){var n=e.layer;for(e.index=t.Hb[n],t.Hb[n]++,e=e.destinationEdgesArrayAccess,n=!0;n;){n=!1;for(var s=0;s<e.length-1;s++){var l=e[s],u=e[s+1];l.portFromColOffset>u.portFromColOffset&&(n=!0,e[s]=u,e[s+1]=l)}}for(n=0;n<e.length;n++)(s=e[n]).valid&&-1===(s=s.toVertex).index&&AC(t,s)}function li(t,e){var n=e.layer;e.index=t.Hb[n],t.Hb[n]++,e=e.sourceEdgesArrayAccess;for(var s=!0;s;)for(s=!1,n=0;n<e.length-1;n++){var l=e[n],u=e[n+1];l.portToColOffset>u.portToColOffset&&(s=!0,e[n]=u,e[n+1]=l)}for(n=0;n<e.length;n++)(s=e[n]).valid&&-1===(s=s.fromVertex).index&&li(t,s)}function Fy(t,e,n){var s=Qs(t,e),l=t.Hb[e],u=ac(t,e,n),c=Qu(t,e,n);for(n=0;n<l;n++)-1===c[n]&&(c[n]=s[n].column),-1===u[n]&&(u[n]=s[n].column);for(var p,d=!0;d;)for(d=!1,n=0;n<l-1;n++)(u[n+1]<u[n]||u[n+1]===u[n]&&c[n+1]<c[n])&&(d=!0,p=u[n],u[n]=u[n+1],u[n+1]=p,p=c[n],c[n]=c[n+1],c[n+1]=p,p=s[n],s[n]=s[n+1],s[n+1]=p);for(n=u=0;n<l;n++)(p=s[n]).index=n,u+=t.nodeMinColumnSpace(p,!0),p.column=u,u+=1,u+=t.nodeMinColumnSpace(p,!1);Ur(t,e,s)}function Br(t,e,n){var s=Qs(t,e),l=t.Hb[e];n=sc(t,e,n);var u,c=[];for(u=0;u<l;u++)c[u]=-1;var d=[];for(u=0;u<l;u++)d[u]=-1;for(var p=!1,g=!0;g;)for(g=!1,u=0;u<l-1;u++){var y=n[s[u].index*l+s[u+1].index],w=n[s[u+1].index*l+s[u].index],C=0,D=0,M=s[u].column,E=s[u+1].column,I=t.nodeMinColumnSpace(s[u],!0),P=t.nodeMinColumnSpace(s[u],!1),k=t.nodeMinColumnSpace(s[u+1],!0),b=t.nodeMinColumnSpace(s[u+1],!1);I=M-I+k,P=E-P+b;var O=s[u].sourceEdges.iterator;for(O.reset();O.next();)if(b=(k=O.value).fromVertex,k.valid&&b.layer===e){for(k=0;s[k]!==b;)k++;k<u&&(C+=2*(u-k),D+=2*(u+1-k)),k===u+1&&(C+=1),k>u+1&&(C+=4*(k-u),D+=4*(k-(u+1)))}for((O=s[u].destinationEdges.iterator).reset();O.next();)if(b=(k=O.value).toVertex,k.valid&&b.layer===e){for(k=0;s[k]!==b;)k++;k===u+1&&(D+=1)}for((O=s[u+1].sourceEdges.iterator).reset();O.next();)if(b=(k=O.value).fromVertex,k.valid&&b.layer===e){for(k=0;s[k]!==b;)k++;k<u&&(C+=2*(u+1-k),D+=2*(u-k)),k===u&&(D+=1),k>u+1&&(C+=4*(k-(u+1)),D+=4*(k-u))}for((O=s[u+1].destinationEdges.iterator).reset();O.next();)if(b=(k=O.value).toVertex,k.valid&&b.layer===e){for(k=0;s[k]!==b;)k++;k===u&&(C+=1)}k=b=0;var L=d[s[u].index],H=c[s[u+1].index],J=d[s[u+1].index];-1!==(O=c[s[u].index])&&(b+=Math.abs(O-M),k+=Math.abs(O-P)),-1!==L&&(b+=Math.abs(L-M),k+=Math.abs(L-P)),-1!==H&&(b+=Math.abs(H-E),k+=Math.abs(H-I)),-1!==J&&(b+=Math.abs(J-E),k+=Math.abs(J-I)),(D<C-.5||D===C&&w<y-.5||D===C&&w===y&&k<b-.5)&&(g=p=!0,s[u].column=P,s[u+1].column=I,y=s[u],s[u]=s[u+1],s[u+1]=y)}for(u=0;u<l;u++)s[u].index=u;return Ur(t,e,s),p}function ae(t,e,n){for(var s=!1;Iw(t,e,n);)s=!0;return s}function Iw(t,e,n){var s,l=Qs(t,e),u=t.Hb[e],c=Qu(t,e,-1);if(0<n)for(s=0;s<u;s++)c[s]=-1;var d=Qu(t,e,1);if(0>n)for(s=0;s<u;s++)d[s]=-1;for(var p=!1,g=!0;g;)for(g=!1,s=0;s<u;s++){var D,y=l[s].column,w=t.nodeMinColumnSpace(l[s],!0),C=t.nodeMinColumnSpace(l[s],!1);D=0>s-1||y-l[s-1].column-1>w+t.nodeMinColumnSpace(l[s-1],!1)?y-1:y,w=s+1>=u||l[s+1].column-y-1>C+t.nodeMinColumnSpace(l[s+1],!0)?y+1:y;var M=C=0,E=0;if(0>=n)for(var I=l[s].sourceEdges.iterator;I.next();){var P=I.value,k=P.fromVertex;if(P.valid&&k.layer!==e){var b=Zu(P),O=P.portFromColOffset;P=P.portToColOffset,k=k.column,C+=(Math.abs(y+P-(k+O))+1)*b,M+=(Math.abs(D+P-(k+O))+1)*b,E+=(Math.abs(w+P-(k+O))+1)*b}}if(0<=n)for(I=l[s].destinationEdges.iterator;I.next();)k=(P=I.value).toVertex,P.valid&&k.layer!==e&&(b=Zu(P),O=P.portFromColOffset,P=P.portToColOffset,k=k.column,C+=(Math.abs(y+O-(k+P))+1)*b,M+=(Math.abs(D+O-(k+P))+1)*b,E+=(Math.abs(w+O-(k+P))+1)*b);P=O=b=0,k=d[l[s].index],-1!==(I=c[l[s].index])&&(b+=Math.abs(I-y),O+=Math.abs(I-D),P+=Math.abs(I-w)),-1!==k&&(b+=Math.abs(k-y),O+=Math.abs(k-D),P+=Math.abs(k-w)),M<C||M===C&&O<b?(g=p=!0,l[s].column=D):(E<C||E===C&&P<b)&&(g=p=!0,l[s].column=w)}return Ur(t,e,l),t.normalize(),p}function Aw(t,e,n){var s=Qs(t,e),l=t.Hb[e],u=ac(t,e,n),c=[];for(n=0;n<l;n++)c[n]=u[n];for(u=!0;u;)for(u=!1,n=0;n<l;n++){var d=s[n].column,p=t.nodeMinColumnSpace(s[n],!0),g=t.nodeMinColumnSpace(s[n],!1),y=0;if(-1===c[n])if(0===n&&n===l-1)y=d;else if(0===n){var w=s[n+1].column;y=w-d===g+t.nodeMinColumnSpace(s[n+1],!0)?d-1:d}else y=n===l-1?d-(w=s[n-1].column)===p+t.nodeMinColumnSpace(s[n-1],!1)?d+1:d:((p=(w=s[n-1].column)+t.nodeMinColumnSpace(s[n-1],!1)+p+1)+(g=(w=s[n+1].column)-t.nodeMinColumnSpace(s[n+1],!0)-g-1))/2|0;else 0===n&&n===l-1?y=c[n]:0===n?(g=(w=s[n+1].column)-t.nodeMinColumnSpace(s[n+1],!0)-g-1,y=Math.min(c[n],g)):n===l-1?(p=(w=s[n-1].column)+t.nodeMinColumnSpace(s[n-1],!1)+p+1,y=Math.max(c[n],p)):(p=(w=s[n-1].column)+t.nodeMinColumnSpace(s[n-1],!1)+p+1,g=(w=s[n+1].column)-t.nodeMinColumnSpace(s[n+1],!0)-g-1,p<c[n]&&c[n]<g?y=c[n]:p>=c[n]?y=p:g<=c[n]&&(y=g));y!==d&&(u=!0,s[n].column=y)}Ur(t,e,s),t.normalize()}function le(t,e){for(var n=!0,s=t.network.vertexes.iterator;s.next();){var l=s.value,u=t.nodeMinColumnSpace(l,!0),c=t.nodeMinColumnSpace(l,!1);if(l.column-u<=e&&l.column+c>=e){n=!1;break}}if(t=!1,n)for(s.reset();s.next();)(n=s.value).column>e&&(--n.column,t=!0);return t}function de(t,e){var s,n=e+1,l=[],u=[];for(s=0;s<=t.wa;s++)l[s]=!1,u[s]=!1;for(var c=t.network.vertexes.iterator;c.next();){var d=(s=c.value).column-t.nodeMinColumnSpace(s,!0),p=s.column+t.nodeMinColumnSpace(s,!1);d<=e&&p>=e&&(l[s.layer]=!0),d<=n&&p>=n&&(u[s.layer]=!0)}for(d=!0,n=!1,s=0;s<=t.wa;s++)d=d&&!(l[s]&&u[s]);if(d)for(c.reset();c.next();)(t=c.value).column>e&&(--t.column,n=!0);return n}function Ta(t,e){for(var n=0;n<=t.Ja;n++)for(;le(t,n););for(t.normalize(),n=0;n<t.Ja;n++)for(;de(t,n););var s;if(t.normalize(),0<e)for(n=0;n<=t.Ja;n++){var l=Yn(t),u=ql(t);for(s=u+1;u<s;){s=u,kC(t,n,1);var c=ql(t);c>u?Ti(t,l):c<u&&(u=c,l=Yn(t))}}if(0>e)for(n=t.Ja;0<=n;n--)for(l=Yn(t),s=(u=ql(t))+1;u<s;)s=u,kC(t,n,-1),(c=ql(t))>u?Ti(t,l):c<u&&(u=c,l=Yn(t));t.normalize()}function kC(t,e,n){t.Lc=0;for(var s=t.network.vertexes.iterator;s.next();)s.value.component=-1;if(0<n)for(s.reset();s.next();){var l=s.value;l.column-t.nodeMinColumnSpace(l,!0)<=e&&(l.component=t.Lc)}if(0>n)for(s.reset();s.next();)(l=s.value).column+t.nodeMinColumnSpace(l,!1)>=e&&(l.component=t.Lc);for(t.Lc++,s.reset();s.next();)-1===(e=s.value).component&&(Oy(t,e,t.Lc,-1,!0,!0),t.Lc++);var u;for(e=[],u=0;u<t.Lc*t.Lc;u++)e[u]=!1;for(l=[],u=0;u<(t.wa+1)*(t.Ja+1);u++)l[u]=-1;for(s.reset();s.next();)for(var c=(u=s.value).layer,d=Math.max(0,u.column-t.nodeMinColumnSpace(u,!0)),p=Math.min(t.Ja,u.column+t.nodeMinColumnSpace(u,!1));d<=p;d++)l[c*(t.Ja+1)+d]=u.component;for(u=0;u<=t.wa;u++){if(0<n)for(c=0;c<t.Ja;c++)-1!==l[u*(t.Ja+1)+c]&&-1!==l[u*(t.Ja+1)+c+1]&&l[u*(t.Ja+1)+c]!==l[u*(t.Ja+1)+c+1]&&(e[l[u*(t.Ja+1)+c]*t.Lc+l[u*(t.Ja+1)+c+1]]=!0);if(0>n)for(c=t.Ja;0<c;c--)-1!==l[u*(t.Ja+1)+c]&&-1!==l[u*(t.Ja+1)+c-1]&&l[u*(t.Ja+1)+c]!==l[u*(t.Ja+1)+c-1]&&(e[l[u*(t.Ja+1)+c]*t.Lc+l[u*(t.Ja+1)+c-1]]=!0)}for(l=[],u=0;u<t.Lc;u++)l[u]=!0;for((c=[]).push(0);0!==c.length;)if(p=c[c.length-1],c.pop(),l[p])for(l[p]=!1,u=0;u<t.Lc;u++)e[p*t.Lc+u]&&c.splice(0,0,u);if(0<n)for(s.reset();s.next();)l[(t=s.value).component]&&--t.column;if(0>n)for(s.reset();s.next();)l[(n=s.value).component]&&(n.column+=1)}function lc(t,e){return 270===t.L?e?Mr:Mi:90===t.L?e?Mi:Mr:180===t.L?e?Wi:Ci:e?Ci:Wi}function Qs(t,e){var n=t.Hb[e];if(n>=t.we.length){for(var s=[],l=0;l<t.we.length;l++)s[l]=t.we[l];t.we=s}for(null==t.we[n]?s=[]:(s=t.we[n],t.we[n]=null),t=t.rn[e],e=0;e<t.length;e++)s[(n=t[e]).index]=n;return s}function Ur(t,e,n){t.we[t.Hb[e]]=n}Se.className="CircularLayout",Se.ConstantSpacing=Po,Se.ConstantDistance=Jl,Se.ConstantAngle=Xo,Se.Packed=No,Se.Clockwise=Ri,Se.Counterclockwise=Zl,Se.BidirectionalLeft=rc,Se.BidirectionalRight=sd,Se.Forwards=Iy,Se.Reverse=Ay,Se.Ascending=hg,Se.Descending=fn,Se.Optimized=ad,Se.Pythagorean=ld,Se.Circular=oc,cg.prototype.compare=function(t,e){if(0<t&&0>this.xl||Math.abs(t)<Math.abs(this.xl)&&!(0>t&&0<this.xl))for(this.xl=t,this.bk=[],this.cm=[],t=0;t<e.length;t++)this.bk[t]=e[t].bounds.x,this.cm[t]=e[t].bounds.y},cg.prototype.commit=function(t){if(null!==this.bk&&null!==this.cm)for(var e=0;e<this.bk.length;e++){var n=t.K(e);n.x=this.bk[e],n.y=this.cm[e]}},cg.className="VertexArrangement",zt(ud,Jt),ud.prototype.createVertex=function(){return new fg(this)},ud.prototype.createEdge=function(){return new ky(this)},ud.className="CircularNetwork",zt(fg,tn),St.Object.defineProperties(fg.prototype,{diameter:{get:function(){return this.Mi},set:function(t){this.Mi!==t&&(this.Mi=t)}},actualAngle:{get:function(){return this.u},set:function(t){this.u!==t&&(this.u=t)}}}),fg.className="CircularVertex",zt(ky,si),ky.className="CircularEdge",zt(dn,Lt),dn.prototype.cloneProtected=function(t){Lt.prototype.cloneProtected.call(this,t),t.Td.assign(this.Td),t.jm=this.jm,t.ff=this.ff,t.od=this.od,t.Tk=this.Tk,t.Im=this.Im,t.Pf=this.Pf,t.pn=this.pn,t.Jn=this.Jn,t.vk=this.vk,t.uk=this.uk,t.sk=this.sk,t.tk=this.tk,t.Dm=this.Dm,t.Cm=this.Cm},dn.prototype.serializeLayoutProperties=function(t,e){Lt.prototype.serializeLayoutProperties.call(this,t,e),t.arrangementSpacing={width:this.arrangementSpacing.width,height:this.arrangementSpacing.height},t.arrangesToOrigin=this.arrangesToOrigin,t.setsPortSpots=this.setsPortSpots,t.comments=this.comments,t.maxIterations=this.maxIterations,t.epsilonDistance=this.epsilonDistance,t.infinityDistance=this.infinityDistance,t.moveLimit=this.moveLimit,t.defaultSpringStiffness=this.defaultSpringStiffness,t.defaultSpringLength=this.defaultSpringLength,t.defaultElectricalCharge=this.defaultElectricalCharge,t.defaultGravitationalMass=this.defaultGravitationalMass,t.defaultCommentSpringLength=this.defaultCommentSpringLength,t.defaultCommentElectricalCharge=this.defaultCommentElectricalCharge},dn.prototype.deserializeLayoutProperties=function(t,e,n,s,l){Lt.prototype.deserializeLayoutProperties.call(this,t,e,n,s,l),this.arrangementSpacing=new gt(t.arrangementSpacing.width,t.arrangementSpacing.height),this.arrangesToOrigin=t.arrangesToOrigin,this.setsPortSpots=t.setsPortSpots,this.comments=t.comments,this.maxIterations=t.maxIterations,this.epsilonDistance=t.epsilonDistance,this.infinityDistance=t.infinityDistance,this.moveLimit=t.moveLimit,this.defaultSpringStiffness=t.defaultSpringStiffness,this.defaultSpringLength=t.defaultSpringLength,this.defaultElectricalCharge=t.defaultElectricalCharge,this.defaultGravitationalMass=t.defaultGravitationalMass,this.defaultCommentSpringLength=t.defaultCommentSpringLength,this.defaultCommentElectricalCharge=t.defaultCommentElectricalCharge},dn.prototype.createNetwork=function(){return new Ms(this)},dn.prototype.doLayout=function(t){if(null===this.network&&(this.network=this.makeNetwork(t)),!this.qv()){if(t=this.maxIterations,0<this.network.vertexes.count){this.network.oo();for(var e=this.network.vertexes.iterator;e.next();){var n=e.value;n.charge=this.electricalCharge(n),n.mass=this.gravitationalMass(n)}for(e=this.network.edges.iterator;e.next();)(n=e.value).stiffness=this.springStiffness(n),n.length=this.springLength(n);if(this.ju(),this.gn=0,this.needsClusterLayout()){for(var s=(n=(e=this.network).Ix()).iterator;s.next();){this.network=s.value;for(var l=this.network.vertexes.iterator;l.next();){var u=l.value;u.Nd=u.vertexes.count,u.hh=1,u.Bj=null,u.Ke=null}Ju(this,0,t)}this.network=e;var c=s=n.iterator;s=this.arrangementSpacing;var d=c.count,p=!0;u=l=0;for(var g=ce(),y=0;y<d+e.vertexes.count+2;y++)g[y]=null;d=0,c.reset();for(var w=U.alloc();c.next();)if(this.computeBounds(y=c.value,w),p)p=!1,l=w.x+w.width/2,u=w.y+w.height/2,g[0]=new A(w.x+w.width+s.width,w.y),g[1]=new A(w.x,w.y+w.height+s.height),d=2;else{var C=by(g,d,l,u,w.width,w.height,s),D=g[C],M=new A(D.x+w.width+s.width,D.y),E=new A(D.x,D.y+w.height+s.height);for(C+1<d&&g.splice(C+1,0,null),g[C]=M,g[C+1]=E,d++,C=D.x-w.x,D=D.y-w.y,y=y.vertexes.iterator;y.next();)(M=y.value).centerX+=C,M.centerY+=D}for(U.free(w),y=e.vertexes.iterator;y.next();)C=(c=y.value).bounds,2>d?(l=C.x+C.width/2,u=C.y+C.height/2,g[0]=new A(C.x+C.width+s.width,C.y),g[1]=new A(C.x,C.y+C.height+s.height),d=2):(D=new A((w=g[p=by(g,d,l,u,C.width,C.height,s)]).x+C.width+s.width,w.y),C=new A(w.x,w.y+C.height+s.height),p+1<d&&g.splice(p+1,0,null),g[p]=D,g[p+1]=C,d++,c.centerX=w.x+c.width/2,c.centerY=w.y+c.height/2);for(It(g),s=n.iterator;s.next();){for(l=(n=s.value).vertexes.iterator;l.next();)e.fg(l.value);for(n=n.edges.iterator;n.next();)e.ol(n.value)}}_a(this,t),this.updateParts()}this.Tk=t,this.network=null,this.isValidLayout=!0}},dn.prototype.needsClusterLayout=function(){if(3>this.network.vertexes.count)return!1;for(var t=0,e=0,n=this.network.vertexes.first().bounds,s=this.network.vertexes.iterator;s.next();){if(s.value.bounds.Sc(n)&&2<++t)return!0;if(10<e)break;e++}return!1},dn.prototype.computeBounds=function(t,e){var n=!0;for(t=t.vertexes.iterator;t.next();){var s=t.value;n?(n=!1,e.set(s.bounds)):e.Xc(s.bounds)}return e},dn.prototype.ju=function(){if(this.comments)for(var t=this.network.vertexes.iterator;t.next();)this.addComments(t.value)},dn.prototype.addComments=function(t){var e=t.node;if(null!==e)for(e=e.wu();e.next();){var n=e.value;if("Comment"===n.category&&n.isVisible()){var s=this.network.ei(n);null===s&&(s=this.network.yj(n)),s.charge=this.defaultCommentElectricalCharge,n=null;for(var l=s.destinationEdges;l.next();){var u=l.value;if(u.toVertex===t){n=u;break}}if(null===n)for(l=s.sourceEdges;l.next();)if((u=l.value).fromVertex===t){n=u;break}null===n&&(n=this.network.Qj(t,s,null)),n.length=this.defaultCommentSpringLength}}},dn.prototype.moveVertex=function(t){var e=t.forceX,n=t.forceY,s=this.moveLimit;return e<-s?e=-s:e>s&&(e=s),n<-s?n=-s:n>s&&(n=s),t.centerX+=e,t.centerY+=n,e*e+n*n},dn.prototype.moveFixedVertex=function(){},dn.prototype.commitLayout=function(){this.ev(),this.commitNodes(),this.isRouting&&this.commitLinks()},dn.prototype.ev=function(){if(this.setsPortSpots)for(var t=this.network.edges.iterator;t.next();){var e=t.value.link;null!==e&&(e.fromSpot=Zn,e.toSpot=Zn)}},dn.prototype.commitNodes=function(){var t=0,e=0;if(this.arrangesToOrigin){var n=U.alloc();this.computeBounds(this.network,n),t=(e=this.arrangementOrigin).x-n.x,e=e.y-n.y,U.free(n)}n=U.alloc();for(var s=this.network.vertexes.iterator;s.next();){var l=s.value;(0!==t||0!==e)&&(n.assign(l.bounds),n.x+=t,n.y+=e,l.bounds=n),l.commit()}U.free(n)},dn.prototype.commitLinks=function(){for(var t=this.network.edges.iterator;t.next();)t.value.commit()},dn.prototype.springStiffness=function(t){return t=t.stiffness,isNaN(t)?this.vk:t},dn.prototype.springLength=function(t){return t=t.length,isNaN(t)?this.uk:t},dn.prototype.electricalCharge=function(t){return t=t.charge,isNaN(t)?this.sk:t},dn.prototype.electricalFieldX=function(){return 0},dn.prototype.electricalFieldY=function(){return 0},dn.prototype.gravitationalMass=function(t){return t=t.mass,isNaN(t)?this.tk:t},dn.prototype.gravitationalFieldX=function(){return 0},dn.prototype.gravitationalFieldY=function(){return 0},dn.prototype.isFixed=function(t){return t.isFixed},St.Object.defineProperties(dn.prototype,{currentIteration:{get:function(){return this.gn}},arrangementSpacing:{get:function(){return this.Td},set:function(t){this.Td.C(t)||(this.Td.assign(t),this.D())}},arrangesToOrigin:{get:function(){return this.jm},set:function(t){this.jm!==t&&(this.jm=t,this.D())}},setsPortSpots:{get:function(){return this.ff},set:function(t){this.ff!==t&&(this.ff=t,this.D())}},comments:{get:function(){return this.od},set:function(t){this.od!==t&&(this.od=t,this.D())}},maxIterations:{get:function(){return this.Tk},set:function(t){this.Tk!==t&&0<=t&&(this.Tk=t,this.D())}},epsilonDistance:{get:function(){return this.Im},set:function(t){this.Im!==t&&0<t&&(this.Im=t,this.D())}},infinityDistance:{get:function(){return this.Pf},set:function(t){this.Pf!==t&&1<t&&(this.Pf=t,this.D())}},moveLimit:{get:function(){return this.pn},set:function(t){this.pn!==t&&1<t&&(this.pn=t,this.D())}},randomNumberGenerator:{get:function(){return this.Jn},set:function(t){this.Jn!==t&&(null!==t&&"function"!=typeof t.random&&Y('ForceDirectedLayout.randomNumberGenerator must have a "random()" function on it: '+t),this.Jn=t)}},defaultSpringStiffness:{get:function(){return this.vk},set:function(t){this.vk!==t&&(this.vk=t,this.D())}},defaultSpringLength:{get:function(){return this.uk},set:function(t){this.uk!==t&&(this.uk=t,this.D())}},defaultElectricalCharge:{get:function(){return this.sk},set:function(t){this.sk!==t&&(this.sk=t,this.D())}},defaultGravitationalMass:{get:function(){return this.tk},set:function(t){this.tk!==t&&(this.tk=t,this.D())}},defaultCommentSpringLength:{get:function(){return this.Dm},set:function(t){this.Dm!==t&&(this.Dm=t,this.D())}},defaultCommentElectricalCharge:{get:function(){return this.Cm},set:function(t){this.Cm!==t&&(this.Cm=t,this.D())}}}),dn.className="ForceDirectedLayout",Vr.className="ForceDirectedSubnet",zt(Ms,Jt),Ms.prototype.createVertex=function(){return new al(this)},Ms.prototype.createEdge=function(){return new Ir(this)},Ms.className="ForceDirectedNetwork",zt(al,tn),al.prototype.serializeVertexProperties=function(t,e){tn.prototype.serializeVertexProperties.call(this,t,e),t.isFixed=this.isFixed,t.charge=this.charge,t.mass=this.mass},al.prototype.deserializeVertexProperties=function(t,e,n,s){tn.prototype.deserializeVertexProperties.call(this,t,e,n,s),this.isFixed=t.isFixed,this.charge=t.charge,this.mass=t.mass},St.Object.defineProperties(al.prototype,{isFixed:{get:function(){return this.ga},set:function(t){this.ga!==t&&(this.ga=t)}},charge:{get:function(){return this.u},set:function(t){this.u!==t&&(this.u=t)}},mass:{get:function(){return this.Ga},set:function(t){this.Ga!==t&&(this.Ga=t)}},forceX:{get:function(){return this.F},set:function(t){this.F!==t&&(this.F=t)}},forceY:{get:function(){return this.W},set:function(t){this.W!==t&&(this.W=t)}}}),al.className="ForceDirectedVertex",zt(Ir,si),Ir.prototype.serializeEdgeProperties=function(t,e){si.prototype.serializeEdgeProperties.call(this,t,e),t.stiffness=this.stiffness,t.length=this.length},Ir.prototype.deserializeEdgeProperties=function(t,e,n,s){si.prototype.deserializeEdgeProperties.call(this,t,e,n,s),this.stiffness=t.stiffness,this.length=t.length},St.Object.defineProperties(Ir.prototype,{stiffness:{get:function(){return this.m},set:function(t){this.m!==t&&(this.m=t)}},length:{get:function(){return this.j},set:function(t){this.j!==t&&(this.j=t)}}}),Ir.className="ForceDirectedEdge",Io.prototype.random=function(){var t=this.seed%this.Q*this.Kx-this.seed/this.Q*this.Nx;return this.seed=0<t?t:t+this.Mx,this.seed*this.Lx},Io.className="RandomNumberGenerator",zt(jt,Lt),jt.prototype.cloneProtected=function(t){Lt.prototype.cloneProtected.call(this,t),t.be=this.be,t.gc=this.gc,t.L=this.L,t.rk=this.rk,t.Ok=this.Ok,t.Fk=this.Fk,t.Xi=this.Xi,t.ek=this.ek,t.Tf=this.Tf,t.ff=this.ff,t.jn=this.jn},jt.prototype.serializeLayoutProperties=function(t,e){Lt.prototype.serializeLayoutProperties.call(this,t,e),t.layerSpacing=this.layerSpacing,t.columnSpacing=this.columnSpacing,t.direction=this.direction,t.cycleRemoveOption=this.cycleRemoveOption.name,t.layeringOption=this.layeringOption.name,t.initializeOption=this.initializeOption.name,t.iterations=this.iterations,t.aggressiveOption=this.aggressiveOption.name,t.packOption=this.packOption,t.setsPortSpots=this.setsPortSpots,t.linkSpacing=this.linkSpacing,t.wa=this.wa,t.Dh=this.Dh,t.Ja=this.Ja,t.Bg=this.Bg,t.zc=this.zc,t.Hb=this.Hb,t.Cg=this.Cg,t.Lc=this.Lc,t.Yc={x:this.Yc.x,y:this.Yc.y}},jt.prototype.deserializeLayoutProperties=function(t,e,n,s,l){Lt.prototype.deserializeLayoutProperties.call(this,t,e,n,s,l),this.layerSpacing=t.layerSpacing,this.columnSpacing=t.columnSpacing,this.direction=t.direction,this.cycleRemoveOption=ua(jt,t.cycleRemoveOption),this.layeringOption=ua(jt,t.layeringOption),this.initializeOption=ua(jt,t.initializeOption),this.iterations=t.iterations,this.aggressiveOption=ua(jt,t.aggressiveOption),this.packOption=t.packOption,this.setsPortSpots=t.setsPortSpots,this.linkSpacing=t.linkSpacing,this.wa=t.wa,this.Dh=t.Dh,this.Ja=t.Ja,this.Bg=t.Bg,this.zc=t.zc,this.Hb=t.Hb,this.Cg=t.Cg,this.Lc=t.Lc,this.Yc=new A(this.Yc.x,this.Yc.y),l&&!s&&l.edges.each(function(u){if(!u.link&&u.fromVertex&&u.toVertex&&(null===u.fromVertex.node||null===u.toVertex.node)){for(var c=u.fromVertex;null!==c&&null===c.node&&0<c.wd.count;){var d=c.wd.K(0);if(d.link){u.link=d.link;break}c=d.fromVertex}if(!u.link){for(d=u.toVertex;null!==d&&null===d.node&&0<d.Jd.count;){var p=d.Jd.K(0);if(p.link){u.link=p.link;break}d=p.toVertex}if(!u.link)for(d=d.wd.iterator;d.next();)if((p=d.value).link&&p.fromVertex===c){u.link=p.link;break}}}})},jt.prototype.ob=function(t){t.classType===jt?0===t.name.indexOf("Aggressive")?this.aggressiveOption=t:0===t.name.indexOf("Cycle")?this.cycleRemoveOption=t:0===t.name.indexOf("Init")?this.initializeOption=t:0===t.name.indexOf("Layer")?this.layeringOption=t:Y("Unknown enum value: "+t):Lt.prototype.ob.call(this,t)},jt.prototype.createNetwork=function(){return new hc(this)},jt.prototype.doLayout=function(t){for(null===this.network&&(this.network=this.makeNetwork(t)),this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin),this.Dh=-1,this.zc=this.Bg=0,this.rn=this.qn=this.fj=null,t=0;t<this.we.length;t++)this.we[t]=null;if(0<this.network.vertexes.count){if(this.network.oo(),this.qv())return;for(this.cycleRemoveOption!==hd&&this.removeCycles(),t=this.network.vertexes.iterator;t.next();)t.value.layer=-1;for(this.wa=-1,this.assignLayers(),t.reset();t.next();)this.wa=Math.max(this.wa,t.value.layer);this.cycleRemoveOption===hd&&this.removeCycles();for(var e=[],n=(t=this.network).edges.iterator;n.next();){var s=n.value;s.valid=!1,e.push(s)}for(n=0;n<e.length;n++){var l=(s=e[n]).fromVertex,u=s.toVertex;if(!(s.valid||(null===l.node&&null===l.data||null===u.node&&null===u.data)&&l.layer===u.layer)){var c=0,d=0,p=0,g=0;if(null!==s.link){if(null===(d=s.link))continue;var y=l.node;if(c=u.node,null===y||null===c)continue;var w=d.fromNode;p=d.toNode;var C=d.fromPort;if(d=d.toPort,s.rev){g=w;var D=C;w=p,C=d,p=g,d=D}var M=l.focus;g=u.focus;var E=s.rev?u.bounds:l.bounds;D=A.alloc(),y!==w?E.v()&&w.isVisible()?w.actualBounds.v()?(Qa(w,C,ht,D),D.x+=w.actualBounds.x-E.x,D.y+=w.actualBounds.y-E.y):(Qa(w,C,ht,D),D.v()||D.assign(M)):D.assign(M):E.v()?(Qa(w,C,ht,D),D.v()||D.assign(M)):D.assign(M),w=s.rev?l.bounds:u.bounds,y=A.alloc(),c!==p?w.v()&&p.isVisible()?p.actualBounds.v()?(Qa(p,d,ht,y),y.x+=p.actualBounds.x-w.x,y.y+=p.actualBounds.y-w.y):(Qa(p,d,ht,y),y.v()||y.assign(g)):y.assign(g):w.v()?(Qa(p,d,ht,y),y.v()||y.assign(g)):y.assign(g),90===this.L||270===this.L?(c=Math.round((D.x-M.x)/this.gc),p=D.x,d=Math.round((y.x-g.x)/this.gc),g=y.x):(c=Math.round((D.y-M.y)/this.gc),p=D.y,d=Math.round((y.y-g.y)/this.gc),g=y.y),A.free(D),A.free(y),s.portFromColOffset=c,s.portFromPos=p,s.portToColOffset=d,s.portToPos=g}else s.portFromColOffset=0,s.portFromPos=0,s.portToColOffset=0,s.portToPos=0;if(D=l.layer,y=u.layer,w=0,null!==(E=s.link)){var I=E.fromPort,P=E.toPort;if(null!==I&&null!==P){var k=E.fromNode;if(C=E.toNode,null!==k&&null!==C){var b=lc(this,!0),O=lc(this,!1),L=this.setsPortSpots?b:E.computeSpot(!0,I);M=this.setsPortSpots?O:E.computeSpot(!1,P);var H=E.isOrthogonal;L.Uc()&&L.xf(O)&&M.Uc()&&M.xf(b)?w=0:(b=E.getLinkPoint(k,I,L,!0,H,C,P,A.alloc()),O=E.getLinkDirection(k,I,b,L,!0,H,C,P),A.free(b),L.Wr()||O!==IC(this,s,!0)?this.setsPortSpots&&null!==k&&1===k.ports.count&&s.rev&&(w+=1):w+=1,L=E.getLinkPoint(C,P,M,!1,H,k,I,A.alloc()),E=E.getLinkDirection(C,P,L,M,!1,H,k,I),A.free(L),M.Wr()||E!==IC(this,s,!1)?this.setsPortSpots&&null!==C&&1===C.ports.count&&s.rev&&(w+=2):w+=2)}}}if(w=1===(C=w)||3===C,(C=2===C||3===C)&&((M=t.createVertex()).node=null,M.nf=1,M.layer=D,M.near=l,t.fg(M),(l=t.Qj(l,M,s.link)).valid=!1,l.rev=s.rev,l.portFromColOffset=c,l.portToColOffset=0,l.portFromPos=p,l.portToPos=0,l=M),E=1,w&&E--,D-y>E&&0<D){for(s.valid=!1,(M=t.createVertex()).node=null,M.nf=2,M.layer=D-1,t.fg(M),(l=t.Qj(l,M,s.link)).valid=!0,l.rev=s.rev,l.portFromColOffset=C?0:c,l.portToColOffset=0,l.portFromPos=C?0:p,l.portToPos=0,l=M,D--;D-y>E&&0<D;)(M=t.createVertex()).node=null,M.nf=3,M.layer=D-1,t.fg(M),(l=t.Qj(l,M,s.link)).valid=!0,l.rev=s.rev,l.portFromColOffset=0,l.portToColOffset=0,l.portFromPos=0,l.portToPos=0,l=M,D--;(l=t.Qj(M,u,s.link)).valid=!w,w&&(M.near=u),l.rev=s.rev,l.portFromColOffset=0,l.portToColOffset=d,l.portFromPos=0,l.portToPos=g}else s.valid=!0}}for(t=this.Hb=[],e=0;e<=this.wa;e++)t[e]=0;for(e=this.network.vertexes.iterator;e.next();)e.value.index=-1;for(this.initializeIndices(),this.Dh=-1,n=this.zc=this.Bg=0;n<=this.wa;n++)t[n]>t[this.zc]&&(this.Dh=t[n]-1,this.zc=n),t[n]<t[this.Bg]&&(this.Bg=n);for(this.rn=[],n=0;n<t.length;n++)this.rn[n]=[];for(e.reset();e.next();)this.rn[(t=e.value).layer][t.index]=t;for(this.Ja=-1,t=0;t<=this.wa;t++){for(e=Qs(this,t),n=0,s=this.Hb[t],u=0;u<s;u++)n+=this.nodeMinColumnSpace(l=e[u],!0),l.column=n,n+=1,n+=this.nodeMinColumnSpace(l,!1);this.Ja=Math.max(this.Ja,n-1),Ur(this,t,e)}this.reduceCrossings(),this.straightenAndPack(),this.updateParts()}this.network=null,this.isValidLayout=!0},jt.prototype.linkMinLength=function(){return 1},jt.prototype.nodeMinLayerSpace=function(t,e){return null===t.node&&null===t.data?0:90===this.L||270===this.L?e?t.focus.y+10:t.bounds.height-t.focus.y+10:e?t.focus.x+10:t.bounds.width-t.focus.x+10},jt.prototype.nodeMinColumnSpace=function(t,e){if(null===t.node&&null===t.data)return 0;var n=e?t.Uj:t.Tj;return null!==n?n:90===(n=this.L)||270===n?e?t.Uj=t.focus.x/this.gc+1|0:t.Tj=(t.bounds.width-t.focus.x)/this.gc+1|0:e?t.Uj=t.focus.y/this.gc+1|0:t.Tj=(t.bounds.height-t.focus.y)/this.gc+1|0},jt.prototype.countCrossings=function(){for(var t=0,e=0;e<=this.wa;e++)for(var n=sc(this,e,1),s=this.Hb[e],l=0;l<s;l++)for(var u=l;u<s;u++)t+=n[l*s+u];return t},jt.prototype.normalize=function(){var t=1/0;this.Ja=-1;for(var e=this.network.vertexes.iterator;e.next();){var n=e.value;t=Math.min(t,n.column-this.nodeMinColumnSpace(n,!0)),this.Ja=Math.max(this.Ja,n.column+this.nodeMinColumnSpace(n,!1))}for(e.reset();e.next();)e.value.column-=t;this.Ja-=t},jt.prototype.removeCycles=function(){for(var t=this.network.edges.iterator;t.next();)t.value.rev=!1;switch(this.rk){default:case uc:var e=0,n=(t=this.network).vertexes.count-1,s=[];s.length=n+1;for(var l=t.vertexes.iterator;l.next();)l.value.valid=!0;for(;null!==NC(t);){for(l=Dw(t);null!==l;)s[n]=l,n--,l.valid=!1,l=Dw(t);for(l=_w(t);null!==l;)s[e]=l,e++,l.valid=!1,l=_w(t);l=null;for(var u=0,c=this.network.vertexes.iterator;c.next();){var d=c.value;if(d.valid){for(var p=0,g=d.destinationEdges;g.next();)g.value.toVertex.valid&&p++;g=0;for(var y=d.sourceEdges;y.next();)y.value.fromVertex.valid&&g++;(null===l||u<p-g)&&(l=d,u=p-g)}}null!==l&&(s[e]=l,e++,l.valid=!1)}for(e=0;e<t.vertexes.count;e++)s[e].index=e;for(s=t.edges.iterator;s.next();)(e=s.value).fromVertex.index>e.toVertex.index&&(t.Ol(e),e.rev=!0);break;case Jo:for(s=this.network.vertexes.iterator;s.next();)(t=s.value).gg=-1,t.finish=-1;for(t=this.network.edges.iterator;t.next();)t.value.forest=!1;for(this.Cg=0,s.reset();s.next();)0===(e=s.value).sourceEdges.count&&Ly(this,e);for(s.reset();s.next();)-1===(e=s.value).gg&&Ly(this,e);for(t.reset();t.next();)(s=t.value).forest||(n=(e=s.fromVertex).finish,u=(l=s.toVertex).finish,l.gg<e.gg&&n<u&&(this.network.Ol(s),s.rev=!0));break;case hd:for(e=(t=this.network).vertexes.iterator,s=1/0;e.next();)s=Math.min(s,e.value.layer);if(1/0>s){if(0>s)for(e.reset();e.next();)e.value.layer-=s;for(s=[],e.reset();e.next();)void 0===(l=s[(n=e.value).layer])?s[n.layer]=[n]:l.push(n);for(n=e=0;n<s.length;n++)if((l=s[n])&&0!==l.length){if(0<n)for(u=0;u<l.length;u++)l[u].layer-=e}else e++;for(s=t.edges.iterator;s.next();)(e=s.value).fromVertex.layer<e.toVertex.layer&&(t.Ol(e),e.rev=!0)}}},jt.prototype.assignLayers=function(){switch(this.Ok){case Fe:Tw(this);break;case Ry:for(var t,e=this.network.vertexes.iterator;e.next();)t=Pw(this,e.value),this.wa=Math.max(t,this.wa);for(e.reset();e.next();)(t=e.value).layer=this.wa-t.layer;break;default:for(Tw(this),e=this.network.vertexes.iterator;e.next();)e.value.valid=!1;for(e.reset();e.next();)0===(t=e.value).sourceEdges.count&&Nw(this,t);for(t=1/0,e.reset();e.next();)t=Math.min(t,e.value.layer);for(this.wa=-1,e.reset();e.next();){var n=e.value;n.layer-=t,this.wa=Math.max(this.wa,n.layer)}}},jt.prototype.initializeIndices=function(){switch(this.Fk){default:case By:for(var t=this.network.vertexes.iterator;t.next();){var e=t.value,n=e.layer;e.index=this.Hb[n],this.Hb[n]++}break;case jy:for(t=this.network.vertexes.iterator,e=this.wa;0<=e;e--)for(t.reset();t.next();)(n=t.value).layer===e&&-1===n.index&&AC(this,n);break;case Vy:for(t=this.network.vertexes.iterator,e=0;e<=this.wa;e++)for(t.reset();t.next();)(n=t.value).layer===e&&-1===n.index&&li(this,n)}},jt.prototype.reduceCrossings=function(){var n,s,u,c,d,t=this.countCrossings(),e=Yn(this);for(n=0;n<this.Xi;n++){for(s=0;s<=this.wa;s++)Fy(this,s,1),Br(this,s,1);var l=this.countCrossings();for(l<t&&(t=l,e=Yn(this)),s=this.wa;0<=s;s--)Fy(this,s,-1),Br(this,s,-1);(l=this.countCrossings())<t&&(t=l,e=Yn(this))}for(Ti(this,e),n=0;n<this.Xi;n++){for(s=0;s<=this.wa;s++)Fy(this,s,0),Br(this,s,0);for((l=this.countCrossings())<t&&(t=l,e=Yn(this)),s=this.wa;0<=s;s--)Fy(this,s,0),Br(this,s,0);(l=this.countCrossings())<t&&(t=l,e=Yn(this))}switch(Ti(this,e),this.ek){case Uy:break;case kw:for(d=t+1;(s=this.countCrossings())<d;)for(d=s,n=this.wa;0<=n;n--)for(c=0;c<=n;c++){for(u=!0;u;)for(u=!1,s=n;s>=c;s--)u=Br(this,s,-1)||u;for((l=this.countCrossings())>=t?Ti(this,e):(t=l,e=Yn(this)),u=!0;u;)for(u=!1,s=n;s>=c;s--)u=Br(this,s,1)||u;for((l=this.countCrossings())>=t?Ti(this,e):(t=l,e=Yn(this)),u=!0;u;)for(u=!1,s=c;s<=n;s++)u=Br(this,s,1)||u;for(l>=t?Ti(this,e):(t=l,e=Yn(this)),u=!0;u;)for(u=!1,s=c;s<=n;s++)u=Br(this,s,-1)||u;for(l>=t?Ti(this,e):(t=l,e=Yn(this)),u=!0;u;)for(u=!1,s=n;s>=c;s--)u=Br(this,s,0)||u;for(l>=t?Ti(this,e):(t=l,e=Yn(this)),u=!0;u;)for(u=!1,s=c;s<=n;s++)u=Br(this,s,0)||u;l>=t?Ti(this,e):(t=l,e=Yn(this))}break;default:for(n=this.wa,c=0,d=t+1;(s=this.countCrossings())<d;){for(d=s,u=!0;u;)for(u=!1,s=n;s>=c;s--)u=Br(this,s,-1)||u;for((l=this.countCrossings())>=t?Ti(this,e):(t=l,e=Yn(this)),u=!0;u;)for(u=!1,s=n;s>=c;s--)u=Br(this,s,1)||u;for((l=this.countCrossings())>=t?Ti(this,e):(t=l,e=Yn(this)),u=!0;u;)for(u=!1,s=c;s<=n;s++)u=Br(this,s,1)||u;for(l>=t?Ti(this,e):(t=l,e=Yn(this)),u=!0;u;)for(u=!1,s=c;s<=n;s++)u=Br(this,s,-1)||u;for(l>=t?Ti(this,e):(t=l,e=Yn(this)),u=!0;u;)for(u=!1,s=n;s>=c;s--)u=Br(this,s,0)||u;for(l>=t?Ti(this,e):(t=l,e=Yn(this)),u=!0;u;)for(u=!1,s=c;s<=n;s++)u=Br(this,s,0)||u;l>=t?Ti(this,e):(t=l,e=Yn(this))}}Ti(this,e)},jt.prototype.straightenAndPack=function(){var t=0!=(1&this.Tf),e=0!=(this.Tf&gg);if(1e3<this.network.edges.count&&e&&(t=!1),t){var n=[];for(e=0;e<=this.wa;e++)n[e]=0;for(var s,l=this.network.vertexes.iterator;l.next();){var u=l.value;e=u.layer,s=u.column,u=this.nodeMinColumnSpace(u,!1),n[e]=Math.max(n[e],s+u)}for(l.reset();l.next();)(u=l.value).column=(8*(this.Ja-n[e=u.layer])>>1)+8*(s=u.column);this.Ja*=8}if(0!=(2&this.Tf))for(n=!0;n;){for(n=!1,e=this.zc+1;e<=this.wa;e++)n=ae(this,e,1)||n;for(e=this.zc-1;0<=e;e--)n=ae(this,e,-1)||n;n=ae(this,this.zc,0)||n}if(0!=(4&this.Tf)){for(e=this.zc+1;e<=this.wa;e++)Aw(this,e,1);for(e=this.zc-1;0<=e;e--)Aw(this,e,-1);Aw(this,this.zc,0)}if(t&&(Ta(this,-1),Ta(this,1)),0!=(2&this.Tf))for(n=!0;n;){for(n=!1,n=ae(this,this.zc,0)||n,e=this.zc+1;e<=this.wa;e++)n=ae(this,e,0)||n;for(e=this.zc-1;0<=e;e--)n=ae(this,e,0)||n}},jt.prototype.commitLayout=function(){if(this.setsPortSpots)for(var t=lc(this,!0),e=lc(this,!1),n=this.network.edges.iterator;n.next();){var s=n.value.link;null!==s&&(s.fromSpot=t,s.toSpot=e)}this.commitNodes(),this.nu(),this.isRouting&&this.commitLinks()},jt.prototype.commitNodes=function(){this.ae=[],this.Cd=[],this.Bd=[],this.Qa=[];for(var t=0;t<=this.wa;t++)this.ae[t]=0,this.Cd[t]=0,this.Bd[t]=0,this.Qa[t]=0;for(t=this.network.vertexes.iterator;t.next();){var e=t.value,n=e.layer;this.ae[n]=Math.max(this.ae[n],this.nodeMinLayerSpace(e,!0)),this.Cd[n]=Math.max(this.Cd[n],this.nodeMinLayerSpace(e,!1))}e=0,n=this.be;for(var s=0;s<=this.wa;s++){var l=n;0>=this.ae[s]+this.Cd[s]&&(l=0),0<s&&(e+=l/2),90===this.L||0===this.L?(this.Bd[s]=e+=this.Cd[s],e+=this.ae[s]):(this.Bd[s]=e+=this.ae[s],e+=this.Cd[s]),s<this.wa&&(e+=l/2),this.Qa[s]=e}for(n=e,e=this.arrangementOrigin,s=0;s<=this.wa;s++)270===this.L?this.Bd[s]=e.y+this.Bd[s]:90===this.L?(this.Bd[s]=e.y+n-this.Bd[s],this.Qa[s]=n-this.Qa[s]):180===this.L?this.Bd[s]=e.x+this.Bd[s]:(this.Bd[s]=e.x+n-this.Bd[s],this.Qa[s]=n-this.Qa[s]);for(t.reset(),n=s=1/0;t.next();){var u=(l=t.value).layer,c=0|l.column;if(270===this.L||90===this.L){var d=e.x+this.gc*c;u=this.Bd[u]}else d=this.Bd[u],u=e.y+this.gc*c;l.centerX=d,l.centerY=u,s=Math.min(l.x,s),n=Math.min(l.y,n)}for(this.Yc=new A(s=e.x-s,e=e.y-n),t.reset();t.next();)(n=t.value).x+=s,n.y+=e,n.commit()},jt.prototype.nu=function(){for(var t=0,e=this.be,n=0;n<=this.wa;n++)t+=this.ae[n],t+=this.Cd[n];t+=this.wa*e,e=[],n=this.gc*this.Ja;for(var s=this.maxLayer;0<=s;s--)e.push(270===this.L?0===s?new U(0,0,n,Math.abs(this.Qa[0])):new U(0,this.Qa[s-1],n,Math.abs(this.Qa[s-1]-this.Qa[s])):90===this.L?0===s?new U(0,this.Qa[0],n,Math.abs(this.Qa[0]-t)):new U(0,this.Qa[s],n,Math.abs(this.Qa[s-1]-this.Qa[s])):180===this.L?0===s?new U(0,0,Math.abs(this.Qa[0]),n):new U(this.Qa[s-1],0,Math.abs(this.Qa[s-1]-this.Qa[s]),n):0===s?new U(this.Qa[0],0,Math.abs(this.Qa[0]-t),n):new U(this.Qa[s],0,Math.abs(this.Qa[s-1]-this.Qa[s]),n));this.commitLayers(e,this.Yc)},jt.prototype.commitLayers=function(){},jt.prototype.commitLinks=function(){for(var e,t=this.network.edges.iterator;t.next();)null!==(e=t.value.link)&&(e.jh(),e.Aj(),e.pf());for(t.reset();t.next();)null!==(e=t.value.link)&&e.mg();for(t.reset();t.next();){var n=t.value;if(null!==(e=n.link)){e.jh();var s=e,l=s.fromNode,u=s.toNode,c=s.fromPort,d=s.toPort;if(null!==l){var p=l.findVisibleNode();null!==p&&p!==l&&(l=p,c=p.port)}null!==u&&null!==(p=u.findVisibleNode())&&p!==u&&(u=p,d=p.port);var g=e.computeSpot(!0,c);p=e.computeSpot(!1,d);var y=n.fromVertex,w=n.toVertex;if(n.valid){if(e.curve===Fi&&4===e.pointsCount)if(y.column===w.column)n=e.getLinkPoint(l,c,g,!0,!1,u,d),c=e.getLinkPoint(u,d,p,!1,!1,l,c),n.v()||n.set(l.actualBounds.center),c.v()||c.set(u.actualBounds.center),e.Aj(),e.mf(n.x,n.y),e.mf((2*n.x+c.x)/3,(2*n.y+c.y)/3),e.mf((n.x+2*c.x)/3,(n.y+2*c.y)/3),e.mf(c.x,c.y);else{var C=!1,D=!1;if(null!==c&&g===Oe&&(C=!0),null!==d&&p===Oe&&(D=!0),C||D){var M=e.i(0).x;if(n=e.i(0).y,y=e.i(3).x,s=e.i(3).y,C){if(90===this.L||270===this.L){C=M;var E=(n+s)/2}else C=(M+y)/2,E=n;e.M(1,C,E),(g=e.getLinkPoint(l,c,g,!0,!1,u,d)).v()||g.set(l.actualBounds.center),e.M(0,g.x,g.y)}D&&(90===this.L||270===this.L?(g=y,n=(n+s)/2):(g=(M+y)/2,n=s),e.M(2,g,n),(l=e.getLinkPoint(u,d,p,!1,!1,l,c)).v()||l.set(u.actualBounds.center),e.M(3,l.x,l.y))}}e.pf()}else if(y.layer===w.layer)e.pf();else{if(C=D=!1,E=this.be,M=e.firstPickIndex+1,e.isOrthogonal){C=!0;var I=e.pointsCount;4<I&&e.points.removeRange(2,I-3)}else if(e.curve===Fi)D=!0,4<(I=e.pointsCount)&&e.points.removeRange(2,I-3),4===I&&(M=2);else{var P=g===Oe,k=p===Oe;2<(I=e.pointsCount)&&P&&k?e.points.removeRange(1,I-2):3<I&&P&&!k?e.points.removeRange(1,I-3):3<I&&!P&&k?e.points.removeRange(2,I-2):4<I&&!P&&!k&&e.points.removeRange(2,I-3)}if(n.rev){for(;null!==w&&y!==w;){var b=I=null;for(P=w.sourceEdges.iterator;P.next()&&((k=P.value).link!==n.link||(b=k.toVertex,null!==(I=k.fromVertex).node)););if(null===I)break;if(I!==y){P=e.i(M-1).x,k=e.i(M-1).y;var O=I.centerX,L=I.centerY;if(C)180===this.L||0===this.L?M===e.firstPickIndex+1?(e.l(M++,P,k),e.l(M++,P,L)):(null!==b?b.centerY:k)!==L&&(e.l(M++,b=this.Qa[I.layer-1]+this.Yc.x,k),e.l(M++,b,L)):M===e.firstPickIndex+1?(e.l(M++,P,k),e.l(M++,O,k)):(null!==b?b.centerX:P)!==O&&(e.l(M++,P,b=this.Qa[I.layer-1]+this.Yc.y),e.l(M++,O,b));else if(M===e.firstPickIndex+1){b=Math.max(10,this.ae[w.layer]);var H=Math.max(10,this.Cd[w.layer]);if(D)180===this.L?O<=w.bounds.x?(e.l(M++,(w=w.bounds.x)-b,L),e.l(M++,w,L),e.l(M++,w+H,L)):(e.l(M++,O-b,L),e.l(M++,O,L),e.l(M++,O+H,L)):90===this.L?L>=w.bounds.bottom?(e.l(M++,O,(w=w.bounds.y+w.bounds.height)+H),e.l(M++,O,w),e.l(M++,O,w-b)):(e.l(M++,O,L+H),e.l(M++,O,L),e.l(M++,O,L-b)):270===this.L?L<=w.bounds.y?(e.l(M++,O,(w=w.bounds.y)-b),e.l(M++,O,w),e.l(M++,O,w+H)):(e.l(M++,O,L-b),e.l(M++,O,L),e.l(M++,O,L+H)):0===this.L&&(O>=w.bounds.right?(e.l(M++,(w=w.bounds.x+w.bounds.width)+H,L),e.l(M++,w,L),e.l(M++,w-b,L)):(e.l(M++,O+H,L),e.l(M++,O,L),e.l(M++,O-b,L)));else{e.l(M++,P,k);var J=0;180===this.L||0===this.L?((180===this.L?O>=w.bounds.right:O<=w.bounds.x)&&(J=(0===this.L?-b:H)/2),e.l(M++,P+J,L)):((270===this.L?L>=w.bounds.bottom:L<=w.bounds.y)&&(J=(90===this.L?-b:H)/2),e.l(M++,O,k+J)),e.l(M++,O,L)}}else b=Math.max(10,this.ae[I.layer]),H=Math.max(10,this.Cd[I.layer]),D?180===this.L?(e.l(M++,O-b-E,L),e.l(M++,Math.min(O-b+E/2,O),L),e.l(M++,O,L),e.l(M++,O,L),e.l(M++,Math.max(O+H-E/2,O),L),e.l(M++,O+H+E,L)):90===this.L?(e.l(M++,O,L+H+E),e.l(M++,O,Math.max(L+H-E/2,L)),e.l(M++,O,L),e.l(M++,O,L),e.l(M++,O,Math.min(L-b+E/2,L)),e.l(M++,O,L-b-E)):270===this.L?(e.l(M++,O,L-b-E),e.l(M++,O,Math.min(L-b+E/2,L)),e.l(M++,O,L),e.l(M++,O,L),e.l(M++,O,Math.max(L+H-E/2,L)),e.l(M++,O,L+H+E)):(e.l(M++,O+H+E,L),e.l(M++,Math.max(O+H-E/2,O),L),e.l(M++,O,L),e.l(M++,O,L),e.l(M++,Math.min(O-b+E/2,O),L),e.l(M++,O-b-E,L)):e.l(M++,O,L)}w=I}(null===d||g!==Oe||C)&&(P=e.i(M-1).x,k=e.i(M-1).y,O=e.i(M).x,L=e.i(M).y,C?(E=this.Cd[y.layer],180===this.L||0===this.L?((C=k)>=y.bounds.y&&C<=y.bounds.bottom&&(180===this.L?O>=y.bounds.x:O<=y.bounds.right)&&(C=C<y.bounds.y+y.bounds.height/2?y.bounds.y-this.gc/2:y.bounds.bottom+this.gc/2,e.l(M++,w=y.centerX+(180===this.L?-E:E),k),e.l(M++,w,C)),e.l(M++,O,C)):((C=P)>=y.bounds.x&&C<=y.bounds.right&&(270===this.L?L>=y.bounds.y:L<=y.bounds.bottom)&&(C=C<y.bounds.x+y.bounds.width/2?y.bounds.x-this.gc/2:y.bounds.right+this.gc/2,e.l(M++,P,w=y.centerY+(270===this.L?-E:E)),e.l(M++,C,w)),e.l(M++,C,L)),e.l(M++,O,L)):D?(b=Math.max(10,this.ae[y.layer]),H=Math.max(10,this.Cd[y.layer]),180===this.L&&O>=y.bounds.x?(e.M(M-2,w=y.bounds.x+y.bounds.width,k),e.M(M-1,w+H,k)):90===this.L&&L<=y.bounds.bottom?(e.M(M-2,P,w=y.bounds.y),e.M(M-1,P,w-b)):270===this.L&&L>=y.bounds.y?(e.M(M-2,P,w=y.bounds.y+y.bounds.height),e.M(M-1,P,w+H)):0===this.L&&O<=y.bounds.right&&(e.M(M-2,w=y.bounds.x,k),e.M(M-1,w-b,k))):(b=Math.max(10,this.ae[y.layer]),H=Math.max(10,this.Cd[y.layer]),C=0,180===this.L||0===this.L?((180===this.L?O<=y.bounds.x:O>=y.bounds.right)&&(C=(0===this.L?H:-b)/2),e.l(M++,O+C,k)):((270===this.L?L<=y.bounds.y:L>=y.bounds.bottom)&&(C=(90===this.L?H:-b)/2),e.l(M++,P,L+C)),e.l(M++,O,L)))}else{for(;null!==y&&y!==w;){for(b=I=null,y=y.destinationEdges.iterator;y.next()&&((P=y.value).link!==n.link||(null!==(b=P.fromVertex).node&&(b=null),null!==(I=P.toVertex).node)););if(null===I)break;I!==w&&(P=e.i(M-1).x,k=e.i(M-1).y,O=I.centerX,L=I.centerY,C?180===this.L||0===this.L?(null!==b?b.centerY:k)!==L&&(b=this.Qa[I.layer]+this.Yc.x,M===e.firstPickIndex+1&&(b=0===this.L?Math.max(b,P):Math.min(b,P)),e.l(M++,b,k),e.l(M++,b,L)):(null!==b?b.centerX:P)!==O&&(b=this.Qa[I.layer]+this.Yc.y,M===e.firstPickIndex+1&&(b=90===this.L?Math.max(b,k):Math.min(b,k)),e.l(M++,P,b),e.l(M++,O,b)):(b=Math.max(10,this.ae[I.layer]),H=Math.max(10,this.Cd[I.layer]),D?180===this.L?(e.l(M++,O+H+E,L),e.l(M++,Math.max(O+H-E/2,O),L),e.l(M++,O,L),e.l(M++,O,L),e.l(M++,Math.min(O-b+E/2,O),L),e.l(M++,O-b-E,L)):90===this.L?(e.l(M++,O,L-b-E),e.l(M++,O,Math.min(L-b+E/2,L)),e.l(M++,O,L),e.l(M++,O,L),e.l(M++,O,Math.max(L+H-E/2,L)),e.l(M++,O,L+H+E)):270===this.L?(e.l(M++,O,L+H+E),e.l(M++,O,Math.max(L+H-E/2,L)),e.l(M++,O,L),e.l(M++,O,L),e.l(M++,O,Math.min(L-b+E/2,L)),e.l(M++,O,L-b-E)):(e.l(M++,O-b-E,L),e.l(M++,Math.min(O-b+E/2,O),L),e.l(M++,O,L),e.l(M++,O,L),e.l(M++,Math.max(O+H-E/2,O),L),e.l(M++,O+H+E,L)):180===this.L?(e.l(M++,O+H,L),e.l(M++,O-b,L)):90===this.L?(e.l(M++,O,L-b),e.l(M++,O,L+H)):270===this.L?(e.l(M++,O,L+H),e.l(M++,O,L-b)):(e.l(M++,O-b,L),e.l(M++,O+H,L)))),y=I}C&&(P=e.i(M-1).x,k=e.i(M-1).y,O=e.i(M).x,L=e.i(M).y,180===this.L||0===this.L?k!==L&&(b=0===this.L?Math.min(Math.max((O+P)/2,this.Qa[w.layer]+this.Yc.x),O):Math.max(Math.min((O+P)/2,this.Qa[w.layer]+this.Yc.x),O),e.l(M++,b,k),e.l(M++,b,L)):P!==O&&(b=90===this.L?Math.min(Math.max((L+k)/2,this.Qa[w.layer]+this.Yc.y),L):Math.max(Math.min((L+k)/2,this.Qa[w.layer]+this.Yc.y),L),e.l(M++,P,b),e.l(M++,O,b)))}null!==s&&D&&(null!==c&&(g===Oe&&(g=e.i(0),s=e.i(2),g.C(s)||e.M(1,(g.x+s.x)/2,(g.y+s.y)/2)),(g=e.getLinkPoint(l,c,Oe,!0,!1,u,d)).v()||g.set(l.actualBounds.center),e.M(0,g.x,g.y)),null!==d&&(p===Oe&&(p=e.i(e.pointsCount-1),g=e.i(e.pointsCount-3),p.C(g)||e.M(e.pointsCount-2,(p.x+g.x)/2,(p.y+g.y)/2)),(l=e.getLinkPoint(u,d,Oe,!1,!1,l,c)).v()||l.set(u.actualBounds.center),e.M(e.pointsCount-1,l.x,l.y))),e.pf(),n.commit()}}}this.avoidOrthogonalOverlaps()},jt.prototype.avoidOrthogonalOverlaps=function(){if(!(0>=this.linkSpacing)){for(var t=new tt,e=this.network.edges.iterator;e.next();){var n=e.value.link;null!==n&&n.isOrthogonal&&!t.contains(n)&&t.add(n)}if(0<t.count)if(90===this.L||270===this.L){for(e=0,n=[],t=t.iterator;t.next();){var s=t.value;if(null!==s&&s.isOrthogonal)for(var l=2;l<s.pointsCount-3;l++){var u=s.i(l),c=s.i(l+1);if(this.B(u.y,c.y)&&!this.B(u.x,c.x)){var d=new Ao;d.layer=Math.floor(u.y/2);var p=s.i(0),g=s.i(s.pointsCount-1);if(d.first=p.x*p.x+p.y,d.fc=g.x*g.x+g.y,d.ld=Math.min(u.x,c.x),d.Bc=Math.max(u.x,c.x),d.index=l,d.link=s,l+2<s.pointsCount){p=s.i(l-1),g=s.i(l+2);var y=0;p.y<u.y?y=g.y<u.y?3:u.x<c.x?2:1:p.y>u.y&&(y=g.y>u.y?0:c.x<u.x?2:1),d.j=y}n.push(d)}}}if(1<n.length)for(n.sort(this.Cx),t=0;t<n.length;){for(u=n[t].layer,s=t+1;s<n.length&&n[s].layer===u;)s++;if(1<s-t)for(u=t;u<s;){for(c=n[u].Bc,l=t+1;l<s&&n[l].ld<c;)c=Math.max(c,n[l].Bc),l++;if(1<(c=l-u)){for(this.ri(n,this.js,u,u+c),y=1,d=n[u].fc,p=u;p<l;p++)(g=n[p]).fc!==d&&(y++,d=g.fc);this.ri(n,this.Bx,u,u+c);var w=1;for(d=n[u].first,p=u;p<l;p++)(g=n[p]).first!==d&&(w++,d=g.first);for(p=!0,g=w,y<w?(p=!1,g=y,d=n[u].fc,this.ri(n,this.js,u,u+c)):d=n[u].first,y=0,w=u;w<l;w++){var C=n[w];(p?C.first:C.fc)!==d&&(y++,d=p?C.first:C.fc);var D=C.link;u=D.i(C.index),c=D.i(C.index+1);var M=this.linkSpacing*(y-(g-1)/2);e++,D.jh(),D.M(C.index,u.x,u.y+M),D.M(C.index+1,c.x,c.y+M),D.pf()}}u=l}t=s}}else{for(e=0,n=[],t=t.iterator;t.next();)if(null!==(s=t.value)&&s.isOrthogonal)for(l=2;l<s.pointsCount-3;l++)u=s.i(l),c=s.i(l+1),this.B(u.x,c.x)&&!this.B(u.y,c.y)&&((d=new Ao).layer=Math.floor(u.x/2),p=s.i(0),g=s.i(s.pointsCount-1),d.first=p.x+p.y*p.y,d.fc=g.x+g.y*g.y,d.ld=Math.min(u.y,c.y),d.Bc=Math.max(u.y,c.y),d.index=l,d.link=s,l+2<s.pointsCount&&(p=s.i(l-1),g=s.i(l+2),y=0,p.x<u.x?y=g.x<u.x?3:u.y<c.y?2:1:p.x>u.x&&(y=g.x>u.x?0:c.y<u.y?2:1),d.j=y),n.push(d));if(1<n.length)for(n.sort(this.Cx),t=0;t<n.length;){for(u=n[t].layer,s=t+1;s<n.length&&n[s].layer===u;)s++;if(1<s-t)for(u=t;u<s;){for(c=n[u].Bc,l=t+1;l<s&&n[l].ld<c;)c=Math.max(c,n[l].Bc),l++;if(1<(c=l-u)){for(this.ri(n,this.js,u,u+c),y=1,d=n[u].fc,p=u;p<l;p++)(g=n[p]).fc!==d&&(y++,d=g.fc);for(this.ri(n,this.Bx,u,u+c),w=1,d=n[u].first,p=u;p<l;p++)(g=n[p]).first!==d&&(w++,d=g.first);for(p=!0,g=w,y<w?(p=!1,g=y,d=n[u].fc,this.ri(n,this.js,u,u+c)):d=n[u].first,y=0,w=u;w<l;w++)C=n[w],(p?C.first:C.fc)!==d&&(y++,d=p?C.first:C.fc),u=(D=C.link).i(C.index),c=D.i(C.index+1),M=this.linkSpacing*(y-(g-1)/2),e++,D.jh(),D.M(C.index,u.x+M,u.y),D.M(C.index+1,c.x+M,c.y),D.pf()}u=l}t=s}}}},(_=jt.prototype).Cx=function(t,e){return t instanceof Ao&&e instanceof Ao&&t!==e?t.layer<e.layer?-1:t.layer>e.layer?1:t.ld<e.ld?-1:t.ld>e.ld?1:t.Bc<e.Bc?-1:t.Bc>e.Bc?1:0:0},_.Bx=function(t,e){return t instanceof Ao&&e instanceof Ao&&t!==e?t.first<e.first?-1:t.first>e.first||t.j<e.j?1:t.j>e.j||t.ld<e.ld?-1:t.ld>e.ld?1:t.Bc<e.Bc?-1:t.Bc>e.Bc?1:0:0},_.js=function(t,e){return t instanceof Ao&&e instanceof Ao&&t!==e?t.fc<e.fc?-1:t.fc>e.fc||t.j<e.j?1:t.j>e.j||t.ld<e.ld?-1:t.ld>e.ld?1:t.Bc<e.Bc?-1:t.Bc>e.Bc?1:0:0},_.B=function(t,e){return-1<(t-=e)&&1>t},_.ri=function(t,e,n,s){var l=t.length,u=s-n;if(!(1>=u))if((0>n||n>=l-1)&&Y("not in range 0 <= from < length: "+n),2===u)0<e(s=t[n],l=t[n+1])&&(t[n]=l,t[n+1]=s);else if(0===n)if(s>=l)t.sort(e);else for((n=t.slice(0,s)).sort(e),e=0;e<s;e++)t[e]=n[e];else if(s>=l)for((s=t.slice(n)).sort(e),e=n;e<l;e++)t[e]=s[e-n];else for((l=t.slice(n,s)).sort(e),e=n;e<s;e++)t[e]=l[e-n]},St.Object.defineProperties(jt.prototype,{layerSpacing:{get:function(){return this.be},set:function(t){this.be!==t&&0<=t&&(this.be=t,this.D())}},columnSpacing:{get:function(){return this.gc},set:function(t){this.gc!==t&&0<t&&(this.gc=t,this.D())}},direction:{get:function(){return this.L},set:function(t){this.L!==t&&(0===t||90===t||180===t||270===t?(this.L=t,this.D()):Y("LayeredDigraphLayout.direction must be 0, 90, 180, or 270"))}},cycleRemoveOption:{get:function(){return this.rk},set:function(t){this.rk===t||t!==uc&&t!==Jo&&t!==hd||(this.rk=t,this.D())}},layeringOption:{get:function(){return this.Ok},set:function(t){this.Ok===t||t!==cd&&t!==Fe&&t!==Ry||(this.Ok=t,this.D())}},initializeOption:{get:function(){return this.Fk},set:function(t){this.Fk===t||t!==jy&&t!==Vy&&t!==By||(this.Fk=t,this.D())}},iterations:{get:function(){return this.Xi},set:function(t){this.Xi!==t&&0<=t&&(this.Xi=t,this.D())}},aggressiveOption:{get:function(){return this.ek},set:function(t){this.ek===t||t!==Uy&&t!==Ee&&t!==kw||(this.ek=t,this.D())}},packOption:{get:function(){return this.Tf},set:function(t){this.Tf!==t&&0<=t&&8>t&&(this.Tf=t,this.D())}},setsPortSpots:{get:function(){return this.ff},set:function(t){this.ff!==t&&(this.ff=t,this.D())}},linkSpacing:{get:function(){return this.jn},set:function(t){this.jn!==t&&0<=t&&(this.jn=t,this.D())}},maxLayer:{get:function(){return this.wa}},maxIndex:{get:function(){return this.Dh}},maxColumn:{get:function(){return this.Ja}},minIndexLayer:{get:function(){return this.Bg}},maxIndexLayer:{get:function(){return this.zc}}});var Jo=new K(jt,"CycleDepthFirst",0),uc=new K(jt,"CycleGreedy",1),hd=new K(jt,"CycleFromLayers",2),cd=new K(jt,"LayerOptimalLinkLength",0),Fe=new K(jt,"LayerLongestPathSink",1),Ry=new K(jt,"LayerLongestPathSource",2),jy=new K(jt,"InitDepthFirstOut",0),Vy=new K(jt,"InitDepthFirstIn",1),By=new K(jt,"InitNaive",2),Uy=new K(jt,"AggressiveNone",0),Ee=new K(jt,"AggressiveLess",1),kw=new K(jt,"AggressiveMore",2),gg=8;function Ao(){this.index=this.Bc=this.ld=this.fc=this.first=this.layer=0,this.link=null,this.j=0}function hc(t){Jt.call(this,t)}function tu(t){tn.call(this,t),this.Wa=this.rg=this.Ah=-1,this.u=NaN,this.F=null,this.valid=!1,this.finish=this.gg=NaN,this.nf=0,this.Tj=this.Uj=null}function qu(t){si.call(this,t),this.j=this.ga=this.Ga=!1,this.W=this.u=NaN,this.F=this.m=0}function Et(t){Lt.call(this),this.Qb=new Q,this.En=_s,this.qd=Ei,this.Yn=Ky,this.aq=Xy,this.Ev=[],this.od=!0,this.Nb=cl,this.Td=new gt(10,10).freeze();var e=new eh(this);this.V=new zr(e),this.Y=new zr(e),this.Xt=[],t&&Object.assign(this,t)}function bC(t){var e=new Q;for(t=t.iterator;t.next();){var n=t.value;n.initialized||e.add(n)}return e}function bw(t,e){var n=999999,s=null;for(e=e.iterator;e.next();){var l=e.value;switch(t.qd){case Ei:l.sourceEdges.count<n&&(n=l.sourceEdges.count,s=l);break;case Hr:l.destinationEdges.count<n&&(n=l.destinationEdges.count,s=l);break;default:Y("Unhandled path value "+t.qd.toString())}}return s}function Hy(t,e){if(null!==e){switch(t.qd){case Ei:if(0<e.destinationEdges.count){for(var n=new tt,s=e.destinationVertexes;s.next();){var l=s.value;Ow(t,e,l)&&n.add(l)}0<n.count&&(e.children=n.Ea())}break;case Hr:if(0<e.sourceEdges.count){for(n=new tt,s=e.sourceVertexes;s.next();)Ow(t,e,l=s.value)&&n.add(l);0<n.count&&(e.children=n.Ea())}break;default:Y("Unhandled path value"+t.qd.toString())}for(s=(n=e.children).length,l=0;l<s;l++){var u=n[l];u.initialized=!0,u.level=e.level+1,u.parent=e,t.Qb.remove(u)}for(e=0;e<s;e++)Hy(t,n[e])}}function Ow(t,e,n){if(n.initialized){if(null===e)var s=!1;else{for(s=e.parent;null!==s&&s!==n;)s=s.parent;s=s===n}if(s||n.level>e.level)return!1;t.removeChild(n.parent,n)}return!0}function Lw(t,e){if(null!==e){t.initializeTreeVertexValues(e),e.alignment===Ts&&t.sortTreeVertexChildren(e);for(var n=0,s=e.childrenCount,l=0,u=e.children,c=u.length,d=0;d<c;d++){var p=u[d];Lw(t,p),n+=p.descendantCount+1,s=Math.max(s,p.maxChildrenCount),l=Math.max(l,p.maxGenerationCount)}e.descendantCount=n,e.maxChildrenCount=s,e.maxGenerationCount=0<s?l+1:0}}function wD(t,e){if(null!==e){t.assignTreeVertexValues(e);for(var n=(e=e.children).length,s=0;s<n;s++)wD(t,e[s])}}function LC(t,e){if(null!==e){e.alignment!==Ts&&t.sortTreeVertexChildren(e);for(var n=(e=e.children).length,s=0;s<n;s++)LC(t,e[s])}}function eu(t){return t===ul||t===Ts||t===hl||t===qs}function fd(t){return t===ul||t===Ts}function Fw(t){var e=t.parent;if(null!==e){var n=e.alignment;if(eu(n)){if(fd(n)){for(e=e.children,n=0;n<e.length&&t!==e[n];)n++;return n%2==0}if(n===hl)return!0}}return!1}function qi(t,e){if(0===e.childrenCount){var n=!1,s=0;null!==e.parent&&(s=e.parent.angle,n=eu(n=e.parent.alignment));var l=Fw(e);e.S.h(0,0),e.Ca.h(e.width,e.height),null===e.parent||null===e.comments||(180!==s&&270!==s||n)&&!l?e.ka.h(0,0):180===s&&!n||(90===s||270===s)&&l?e.ka.h(e.width-2*e.focus.x,0):e.ka.h(0,e.height-2*e.focus.y)}else{n=90===(s=on(e))||270===s;for(var u=0,c=(l=e.children).length,d=0;d<c;d++){var p=l[d];u=Math.max(u,n?p.Ca.width:p.Ca.height)}var g=e.alignment,y=g===Zo,w=g===uo;d=eu(g);var C=Math.max(0,e.breadthLimit);p=dd(e);var D=e.nodeSpacing,M=Vi(e),E=y||w?0:M/2,I=e.rowSpacing,P=0;(y||w||e.Pl||e.Ql&&1===e.maxGenerationCount)&&(P=Math.max(0,e.rowIndent)),y=e.width;var k=e.height,b=0,O=0,L=0,H=0,J=0,nt=0,et=0,q=0,G=0;if(d&&!fd(g)&&135<s&&l.reverse(),fd(g))if(1<c)for(var Mt=0;Mt<c;Mt++){var pt=l[Mt],bt=pt.Ca;Mt%2==0&&Mt!==c-1&&(G=Math.max(G,(n?bt.width:bt.height)+nu(pt)-D))}else 1===c&&(G=n?l[0].Ca.width:l[0].Ca.height);if(d)switch(g){case ul:case Ts:G=(O=135>s?Rw(e,l,G,b,O):FC(e,l,G,b,O)).x,b=O.width,O=O.height;break;case hl:for(t=0;t<c;t++)E=(C=l[t]).Ca,L=0===et?0:I,n?(C.S.h(u-E.width,J+L),b=Math.max(b,E.width),O=Math.max(O,J+L+E.height),J+=L+E.height):(C.S.h(H+L,u-E.height),b=Math.max(b,H+L+E.width),O=Math.max(O,E.height),H+=L+E.width),et++;break;case qs:for(u=0;u<c;u++)C=(t=l[u]).Ca,E=0===et?0:I,n?(t.S.h(D/2+e.focus.x,J+E),b=Math.max(b,C.width),O=Math.max(O,J+E+C.height),J+=E+C.height):(t.S.h(H+E,D/2+e.focus.y),b=Math.max(b,H+E+C.width),O=Math.max(O,C.height),H+=E+C.width),et++}else for(Mt=0;Mt<c;Mt++){if(bt=(pt=l[Mt]).Ca,n){0<C&&0<et&&H+D+bt.width>C&&(H<u&&Ss(e,g,u-H,0,q,Mt-1),nt++,et=0,q=Mt,L=O,H=0,J=135<s?-O-I:O+I);var ue=0===et?E:D;$y(t,pt,0,J),pt.S.h(H+ue,J),b=Math.max(b,H+ue+bt.width),O=Math.max(O,L+(0===nt?0:I)+bt.height),H+=ue+bt.width}else 0<C&&0<et&&J+D+bt.height>C&&(J<u&&Ss(e,g,0,u-J,q,Mt-1),nt++,et=0,q=Mt,L=b,J=0,H=135<s?-b-I:b+I),ue=0===et?E:D,$y(t,pt,H,0),pt.S.h(H,J+ue),O=Math.max(O,J+ue+bt.height),b=Math.max(b,L+(0===nt?0:I)+bt.width),J+=ue+bt.height;et++}switch(0<nt&&(n?(O+=Math.max(0,p),H<b&&Ss(e,g,b-H,0,q,c-1),0<P&&(w||cc(e,P,0,0,c-1),b+=P)):(b+=Math.max(0,p),J<O&&Ss(e,g,0,O-J,q,c-1),0<P&&(w||cc(e,0,P,0,c-1),O+=P))),P=w=0,g){case gd:n?w+=b/2-e.focus.x-M/2:P+=O/2-e.focus.y-M/2;break;case pc:0<nt?n?w+=b/2-e.focus.x-M/2:P+=O/2-e.focus.y-M/2:n?w+=(g=l[0].S.x+l[0].ka.x)+(l[c-1].S.x+l[c-1].ka.x+2*l[c-1].focus.x-g)/2-e.focus.x-M/2:P+=(g=l[0].S.y+l[0].ka.y)+(l[c-1].S.y+l[c-1].ka.y+2*l[c-1].focus.y-g)/2-e.focus.y-M/2;break;case Zo:n?(w-=M,b+=M):(P-=M,O+=M);break;case uo:n?(w+=b-e.width+M,b+=M):(P+=O-e.height+M,O+=M);break;case ul:case Ts:n?w+=1<c?G+D/2-e.focus.x:l[0].focus.x-e.focus.x+l[0].ka.x:P+=1<c?G+D/2-e.focus.y:l[0].focus.y-e.focus.y+l[0].ka.y;break;case hl:n?w+=b+D/2-e.focus.x:P+=O+D/2-e.focus.y;break;case qs:break;default:Y("Unhandled alignment value "+g.toString())}for(M=0;M<c;M++)g=l[M],n?g.S.h(g.S.x+g.ka.x-w,g.S.y+(135<s?(d?-O:-g.Ca.height)+g.ka.y-p:k+p+g.ka.y)):g.S.h(g.S.x+(135<s?(d?-b:-g.Ca.width)+g.ka.x-p:y+p+g.ka.x),g.S.y+g.ka.y-P);n?(b=jw(e,b,w),0>w&&(w=0),135<s&&(P+=O+p),O=Math.max(Math.max(O,k),O+k+p)):(135<s&&(w+=b+p),b=Math.max(Math.max(b,y),b+y+p),O=zy(e,O,P),0>P&&(P=0)),e.ka.h(w,P),e.Ca.h(b,O)}}function Rw(t,e,n,s,l){var u=e.length;if(0===u)return new U(n,0,s,l);if(1===u)return new U(n,0,s=(t=e[0]).Ca.width,l=t.Ca.height);for(var c=t.nodeSpacing,d=t.rowSpacing,p=90===on(t),g=0,y=0,w=0,C=0;C<u;C++)if(!(C%2!=0||1<u&&C===u-1)){var D=e[C],M=D.Ca,E=0===g?0:d;if(p){var I=nu(D)-c;D.S.h(n-(M.width+I),w+E),s=Math.max(s,M.width+I),l=Math.max(l,w+E+M.height),w+=E+M.height}else I=nu(D)-c,D.S.h(y+E,n-(M.height+I)),l=Math.max(l,M.height+I),s=Math.max(s,y+E+M.width),y+=E+M.width;g++}for(g=0,D=y,C=w,p?(y=n+c,w=0):(y=0,w=n+c),M=0;M<u;M++)if(M%2!=0){I=(E=e[M]).Ca;var P=0===g?0:d;if(p){var k=nu(E)-c;E.S.h(y+k,w+P),s=Math.max(s,y+I.width+k),l=Math.max(l,w+P+I.height),w+=P+I.height}else k=nu(E)-c,E.S.h(y+P,w+k),s=Math.max(s,y+P+I.width),l=Math.max(l,w+I.height+k),y+=P+I.width;g++}return 1<u&&u%2==1&&(u=(e=e[u-1]).Ca,d=null===e.parent?0:e.parent.rowSpacing,p?(e.S.h(n+c/2-e.focus.x-e.ka.x,l+d),p=n+c/2-e.focus.x-e.ka.x,s=Math.max(s,p+u.width),0>p&&(s-=p),l=Math.max(l,Math.max(C,w)+d+u.height),0>e.S.x&&(n=mg(t,e.S.x,!1,n,c))):(e.S.h(s+d,n+c/2-e.focus.y-e.ka.y),s=Math.max(s,Math.max(D,y)+d+u.width),w=n+c/2-e.focus.y-e.ka.y,l=Math.max(l,w+u.height),0>w&&(l-=w),0>e.S.y&&(n=mg(t,e.S.y,!0,n,c)))),new U(n,0,s,l)}function FC(t,e,n,s,l){var u=e.length;if(0===u)return new U(n,0,s,l);if(1===u)return new U(n,0,s=(e=e[0]).Ca.width,l=e.Ca.height);for(var c=t.nodeSpacing,d=t.rowSpacing,p=270===on(t),g=0,y=0,w=0,C=0;C<u;C++)if(!(C%2!=0||1<u&&C===u-1)){var D=e[C],M=D.Ca,E=0===g?0:d;if(p){var I=nu(D)-c;D.S.h(n-(M.width+I),w-=E+M.height),s=Math.max(s,M.width+I),l=Math.max(l,Math.abs(w))}else I=nu(D)-c,D.S.h(y-=E+M.width,n-(M.height+I)),l=Math.max(l,M.height+I),s=Math.max(s,Math.abs(y));g++}for(g=0,D=y,C=w,p?(y=n+c,w=0):(y=0,w=n+c),M=0;M<u;M++)if(M%2!=0){I=(E=e[M]).Ca;var P=0===g?0:d;if(p){var k=nu(E)-c;E.S.h(y+k,w-=P+I.height),s=Math.max(s,y+I.width+k),l=Math.max(l,Math.abs(w))}else k=nu(E)-c,E.S.h(y-=P+I.width,w+k),l=Math.max(l,w+I.height+k),s=Math.max(s,Math.abs(y));g++}for(1<u&&u%2==1&&(g=(d=e[u-1]).Ca,M=null===d.parent?0:d.parent.rowSpacing,p?(d.S.h(n+c/2-d.focus.x-d.ka.x,-l-g.height-M),y=n+c/2-d.focus.x-d.ka.x,s=Math.max(s,y+g.width),0>y&&(s-=y),l=Math.max(l,Math.abs(Math.min(C,w))+M+g.height),0>d.S.x&&(n=mg(t,d.S.x,!1,n,c))):(d.S.h(-s-g.width-M,n+c/2-d.focus.y-d.ka.y),s=Math.max(s,Math.abs(Math.min(D,y))+M+g.width),w=n+c/2-d.focus.y-d.ka.y,l=Math.max(l,w+g.height),0>w&&(l-=w),0>d.S.y&&(n=mg(t,d.S.y,!0,n,c)))),t=0;t<u;t++)c=e[t],p?c.S.h(c.S.x,c.S.y+l):c.S.h(c.S.x+s,c.S.y);return new U(n,0,s,l)}function nu(t){return null===t.parent?0:t.parent.nodeSpacing}function mg(t,e,n,s,l){for(var u=(t=t.children).length,c=0;c<u;c++)n?t[c].S.h(t[c].S.x,t[c].S.y-e):t[c].S.h(t[c].S.x-e,t[c].S.y);return e=t[u-1],Math.max(s,n?e.ka.y+e.focus.y-l/2:e.ka.x+e.focus.x-l/2)}function jw(t,e,n){switch(t.alignment){case pc:case gd:return n+t.width>e&&(e=n+t.width),0>n&&(e-=n),e;case Zo:return t.width>e?t.width:e;case uo:return 2*t.focus.x>e?t.width:e+t.width-2*t.focus.x;case ul:case Ts:return Math.max(t.width,Math.max(e,n+t.width)-Math.min(0,n));case hl:return t.width-t.focus.x+t.nodeSpacing/2+e;case qs:return Math.max(t.width,t.focus.x+t.nodeSpacing/2+e);default:return e}}function zy(t,e,n){switch(t.alignment){case pc:case gd:return n+t.height>e&&(e=n+t.height),0>n&&(e-=n),e;case Zo:return t.height>e?t.height:e;case uo:return 2*t.focus.y>e?t.height:e+t.height-2*t.focus.y;case ul:case Ts:return Math.max(t.height,Math.max(e,n+t.height)-Math.min(0,n));case hl:return t.height-t.focus.y+t.nodeSpacing/2+e;case qs:return Math.max(t.height,t.focus.y+t.nodeSpacing/2+e);default:return e}}function Gy(t,e,n){switch(t){case gd:case pc:e/=2,n/=2;break;case Zo:n=e=0;break;case uo:break;default:Y("Unhandled alignment value "+t.toString())}return new A(e,n)}function Ss(t,e,n,s,l,u){cc(t,(e=Gy(e,n,s)).x,e.y,l,u)}function cc(t,e,n,s,l){if(0!==e||0!==n)for(t=t.children;s<=l;s++){var u=t[s].S;u.x+=e,u.y+=n}}function $y(t,e,n,s){var l=e.parent;switch(t.qd){case Ei:for(t=e.sourceEdges;t.next();)(e=t.value).fromVertex===l&&e.relativePoint.h(n,s);break;case Hr:for(t=e.destinationEdges;t.next();)(e=t.value).toVertex===l&&e.relativePoint.h(n,s);break;default:Y("Unhandled path value "+t.qd.toString())}}function yg(t,e,n){for(var s=0;s<t.length;s++){var l=t[s];l.x+=e,l.y+=n}}function RC(t,e,n,s,l,u,c,d){var p=on(e),g=90===p||270===p,y=e.nodeSpacing;e=s;var w=l;s=u;var C=c,D=n.Bo,M=n.No;c=n.Ca;var E=g?Math.max(C,c.height):Math.max(s,c.width);if((null===D||p!==on(n))&&(D=ji(t,2),M=ji(t,2),g?(D[0].h(0,0),D[1].h(0,c.height),M[0].h(c.width,0),M[1].h(M[0].x,D[1].y)):(D[0].h(0,0),D[1].h(c.width,0),M[0].h(0,c.height),M[1].h(D[1].x,M[0].y))),g){if(C=9999999,!(null===w||2>w.length||null===D||2>D.length))for(l=n=0;n<w.length&&l<D.length;){var I=D[l];p=I.x,g=I.y,p+=s;var P=u=w[n];n+1<w.length&&(P=w[n+1]);var k=I;I=k.x,k=k.y,l+1<D.length&&(I=(k=D[l+1]).x,k=k.y,I+=s);var b=C;u.y===g?b=p-u.x:u.y>g&&u.y<k?b=p+(u.y-g)/(k-g)*(I-p)-u.x:g>u.y&&g<P.y&&(b=p-(u.x+(g-u.y)/(P.y-u.y)*(P.x-u.x))),b<C&&(C=b),P.y<=u.y?n++:k<=g?l++:(P.y<=k&&n++,k<=P.y&&l++)}if(C=s-C,n=D,l=C+=y,null===e||2>e.length||null===n||2>n.length)s=null;else{for(y=ji(t,e.length+n.length),s=u=p=0;u<n.length&&n[u].y<e[0].y;)g=n[u++],y[s++].h(g.x+l,g.y);for(;p<e.length;)g=e[p++],y[s++].h(g.x,g.y);for(p=e[e.length-1].y;u<n.length&&n[u].y<=p;)u++;for(;u<n.length&&n[u].y>p;)g=n[u++],y[s++].h(g.x+l,g.y);for(n=ji(t,s),p=0;p<s;p++)n[p].assign(y[p]);Ds(t,y),s=n}if(u=M,p=C,null===w||2>w.length||null===u||2>u.length)l=null;else{for(y=ji(t,w.length+u.length),l=g=n=0;n<w.length&&w[n].y<u[0].y;)P=w[n++],y[l++].h(P.x,P.y);for(;g<u.length;)P=u[g++],y[l++].h(P.x+p,P.y);for(u=u[u.length-1].y;n<w.length&&w[n].y<=u;)n++;for(;n<w.length&&w[n].y>u;)p=w[n++],y[l++].h(p.x,p.y);for(u=ji(t,l),n=0;n<l;n++)u[n].assign(y[n]);Ds(t,y),l=u}return u=Math.max(0,C)+c.width,c=E,Ds(t,e),Ds(t,D),Ds(t,w),Ds(t,M),d[0]=s,d[1]=l,new U(C,0,u,c)}if(s=9999999,!(null===w||2>w.length||null===D||2>D.length))for(l=n=0;n<w.length&&l<D.length;)p=(I=D[l]).x,g=I.y,g+=C,P=u=w[n],n+1<w.length&&(P=w[n+1]),I=(k=I).x,k=k.y,l+1<D.length&&(I=(k=D[l+1]).x,k=k.y,k+=C),b=s,u.x===p?b=g-u.y:u.x>p&&u.x<I?b=g+(u.x-p)/(I-p)*(k-g)-u.y:p>u.x&&p<P.x&&(b=g-(u.y+(p-u.x)/(P.x-u.x)*(P.y-u.y))),b<s&&(s=b),P.x<=u.x?n++:I<=p?l++:(P.x<=I&&n++,I<=P.x&&l++);if(C-=s,n=D,l=C+=y,null===e||2>e.length||null===n||2>n.length)s=null;else{for(y=ji(t,e.length+n.length),s=u=p=0;u<n.length&&n[u].x<e[0].x;)g=n[u++],y[s++].h(g.x,g.y+l);for(;p<e.length;)g=e[p++],y[s++].h(g.x,g.y);for(p=e[e.length-1].x;u<n.length&&n[u].x<=p;)u++;for(;u<n.length&&n[u].x>p;)g=n[u++],y[s++].h(g.x,g.y+l);for(n=ji(t,s),p=0;p<s;p++)n[p].assign(y[p]);Ds(t,y),s=n}if(u=M,p=C,null===w||2>w.length||null===u||2>u.length)l=null;else{for(y=ji(t,w.length+u.length),l=g=n=0;n<w.length&&w[n].x<u[0].x;)P=w[n++],y[l++].h(P.x,P.y);for(;g<u.length;)P=u[g++],y[l++].h(P.x,P.y+p);for(u=u[u.length-1].x;n<w.length&&w[n].x<=u;)n++;for(;n<w.length&&w[n].x>u;)p=w[n++],y[l++].h(p.x,p.y);for(u=ji(t,l),n=0;n<l;n++)u[n].assign(y[n]);Ds(t,y),l=u}return u=E,c=Math.max(0,C)+c.height,Ds(t,e),Ds(t,D),Ds(t,w),Ds(t,M),d[0]=s,d[1]=l,new U(C,0,u,c)}function ji(t,e){if(void 0!==(t=t.Xt[e])&&void 0!==(t=t.pop()))return t;t=[];for(var n=0;n<e;n++)t[n]=new A;return t}function Ds(t,e){var n=e.length,s=t.Xt[n];void 0===s&&(t.Xt[n]=s=[]),s.push(e)}function Wy(t,e,n,s){if(null!==e){e.x=n,e.y=s;for(var l=(e=e.children).length,u=0;u<l;u++){var c=e[u];Wy(t,c,n+c.S.x,s+c.S.y)}}}function fc(t,e){if(null!==e){t.setPortSpots(e);for(var n=(e=e.children).length,s=0;s<n;s++)fc(t,e[s])}}function on(t){return 45>=(t=t.angle)?0:135>=t?90:225>=t?180:315>=t?270:0}function dd(t){var e=on(t);e=90===e||270===e;var n=t.layerSpacing;if(0<t.layerSpacingParentOverlap){var s=Math.min(1,t.layerSpacingParentOverlap);n-=e?t.height*s:t.width*s}return n<(e?-t.height:-t.width)&&(n=e?-t.height:-t.width),n}function Vi(t){var e=on(t),n=t.nodeIndent;if(0<t.nodeIndentPastParent){var s=Math.min(1,t.nodeIndentPastParent);n+=90===e||270===e?t.width*s:t.height*s}return Math.max(0,n)}jt.className="LayeredDigraphLayout",jt.CycleDepthFirst=Jo,jt.CycleGreedy=uc,jt.CycleFromLayers=hd,jt.LayerOptimalLinkLength=cd,jt.LayerLongestPathSink=Fe,jt.LayerLongestPathSource=Ry,jt.InitDepthFirstOut=jy,jt.InitDepthFirstIn=Vy,jt.InitNaive=By,jt.AggressiveNone=Uy,jt.AggressiveLess=Ee,jt.AggressiveMore=kw,jt.PackNone=0,jt.PackExpand=1,jt.PackStraighten=2,jt.PackMedian=4,jt.PackAll=15,Ao.className="SegInfo",zt(hc,Jt),hc.prototype.createVertex=function(){return new tu(this)},hc.prototype.createEdge=function(){return new qu(this)},hc.className="LayeredDigraphNetwork",zt(tu,tn),tu.prototype.serializeVertexProperties=function(t,e){tn.prototype.serializeVertexProperties.call(this,t,e),t.layer=this.layer,t.column=this.column,t.index=this.index,t.component=this.component,t.near=this.near?Cn(this.near):null,t.valid=this.valid,t.gg=this.gg,t.finish=this.finish,t.nf=this.nf,t.Uj=this.Uj,t.Tj=this.Tj},tu.prototype.deserializeVertexProperties=function(t,e,n,s){tn.prototype.deserializeVertexProperties.call(this,t,e,n,s),this.layer=t.layer,this.column=t.column,this.index=t.index,this.component=t.component,(e=e.get(t.near))&&(this.near=e),this.valid=t.valid,this.gg=t.gg,this.finish=t.finish,this.nf=t.nf,this.Uj=t.Uj,this.Tj=t.Tj},St.Object.defineProperties(tu.prototype,{layer:{get:function(){return this.Ah},set:function(t){this.Ah!==t&&(this.Ah=t)}},column:{get:function(){return this.rg},set:function(t){this.rg!==t&&(this.rg=t)}},index:{get:function(){return this.Wa},set:function(t){this.Wa!==t&&(this.Wa=t)}},component:{get:function(){return this.u},set:function(t){this.u!==t&&(this.u=t)}},near:{get:function(){return this.F},set:function(t){this.F!==t&&(this.F=t)}}}),tu.className="LayeredDigraphVertex",zt(qu,si),qu.prototype.serializeEdgeProperties=function(t,e){si.prototype.serializeEdgeProperties.call(this,t,e),t.valid=this.valid,t.rev=this.rev,t.forest=this.forest,t.portFromPos=this.portFromPos,t.portToPos=this.portToPos,t.portFromColOffset=this.portFromColOffset,t.portToColOffset=this.portToColOffset},qu.prototype.deserializeEdgeProperties=function(t,e,n,s){si.prototype.deserializeEdgeProperties.call(this,t,e,n,s),this.valid=t.valid,this.rev=t.rev,this.forest=t.forest,this.portFromPos=t.portFromPos,this.portToPos=t.portToPos,this.portFromColOffset=t.portFromColOffset,this.portToColOffset=t.portToColOffset},St.Object.defineProperties(qu.prototype,{fromVertex:{get:function(){return this.ad},set:function(t){this.ad!==t&&(this.ad=t)}},toVertex:{get:function(){return this.jd},set:function(t){this.jd!==t&&(this.jd=t)}},valid:{get:function(){return this.Ga},set:function(t){this.Ga!==t&&(this.Ga=t)}},rev:{get:function(){return this.ga},set:function(t){this.ga!==t&&(this.ga=t)}},forest:{get:function(){return this.j},set:function(t){this.j!==t&&(this.j=t)}},portFromPos:{get:function(){return this.u},set:function(t){this.u!==t&&(this.u=t)}},portToPos:{get:function(){return this.W},set:function(t){this.W!==t&&(this.W=t)}},portFromColOffset:{get:function(){return this.m},set:function(t){this.m!==t&&(this.m=t)}},portToColOffset:{get:function(){return this.F},set:function(t){this.F!==t&&(this.F=t)}}}),qu.className="LayeredDigraphEdge",zt(Et,Lt),Et.prototype.cloneProtected=function(t){Lt.prototype.cloneProtected.call(this,t),t.En=this.En,t.Yn=this.Yn,t.aq=this.aq,t.od=this.od,t.Nb=this.Nb,t.Td.assign(this.Td),t.V.copyInheritedPropertiesFrom(this.V),t.Y.copyInheritedPropertiesFrom(this.Y)},Et.prototype.ob=function(t){t.classType===Et?0===t.name.indexOf("Alignment")?this.alignment=t:0===t.name.indexOf("Arrangement")?this.arrangement=t:0===t.name.indexOf("Compaction")?this.compaction=t:0===t.name.indexOf("Path")?this.path=t:0===t.name.indexOf("Sorting")?this.sorting=t:0===t.name.indexOf("Style")?this.treeStyle=t:Y("Unknown enum value: "+t):Lt.prototype.ob.call(this,t)},Et.prototype.createNetwork=function(){return new eh(this)},Et.prototype.makeNetwork=function(t){function e(s){if(s instanceof Z)return!s.isLinkLabel&&"Comment"!==s.category;if(s instanceof z){var l=s.fromNode;return null!==l&&!l.isLinkLabel&&"Comment"!==l.category&&!(null===(s=s.toNode)||s.isLinkLabel||"Comment"===s.category)}return!1}var n=this.createNetwork();return t instanceof V?(n.eg(t.nodes,!0,e),n.eg(t.links,!0,e)):n.eg(t instanceof wt?t.memberParts:t.iterator,!1,e),n},Et.prototype.doLayout=function(t){null===this.network&&(this.network=this.makeNetwork(t)),this.arrangement!==Mg&&(this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin));var e=this.diagram;if(null===e&&t instanceof V&&(e=t),this.qd=this.path===_s&&null!==e?e.isTreePathToChildren?Ei:Hr:this.path===_s?Ei:this.path,0<this.network.vertexes.count){for(this.network.oo(),t=this.network.vertexes.iterator;t.next();)(e=t.value).initialized=!1,e.level=0,e.parent=null,e.children=[];if(0<this.Qb.count){for(t=new Q,e=this.Qb.iterator;e.next();){var n=e.value;n instanceof Z?null!==(n=this.network.ei(n))&&t.add(n):n instanceof zr&&t.add(n)}this.Qb=t}for(0===this.Qb.count&&this.findRoots(),t=this.Qb.copy().iterator;t.next();)(e=t.value).initialized||(e.initialized=!0,Hy(this,e));for(e=this.network.vertexes,t=null;0<(t=bC(e)).count;)null!==(e=bw(this,t))&&this.Qb.add(e),e.initialized=!0,Hy(this,e),e=t;for(t=this.Qb.iterator;t.next();)(e=t.value)instanceof zr&&Lw(this,e);for(t=this.Qb.iterator;t.next();)(e=t.value)instanceof zr&&wD(this,e);for(t=this.Qb.iterator;t.next();)(e=t.value)instanceof zr&&LC(this,e);if(this.ju(),this.layerStyle===Sg){for(t=[],e=this.network.vertexes.iterator;e.next();){var s=(n=e.value).parent;null===s&&(s=n),s=0===s.angle||180===s.angle;var l=t[n.level];void 0===l&&(l=0),t[n.level]=Math.max(l,s?n.width:n.height)}for(e=0;e<t.length;e++)void 0===t[e]&&(t[e]=0);for(this.Ev=t,e=this.network.vertexes.iterator;e.next();)null===(s=(n=e.value).parent)&&(s=n),0===s.angle||180===s.angle?(180===s.angle&&(n.focusX+=t[n.level]-n.width),n.width=t[n.level]):(270===s.angle&&(n.focusY+=t[n.level]-n.height),n.height=t[n.level])}else if(this.layerStyle===Jy)for(t=this.network.vertexes.iterator;t.next();){for(n=0===(e=t.value).angle||180===e.angle,s=-1,l=0;l<e.children.length;l++){var u=e.children[l];s=Math.max(s,n?u.width:u.height)}if(0<=s)for(l=0;l<e.children.length;l++)u=e.children[l],n?(180===e.angle&&(u.focusX+=s-u.width),u.width=s):(270===e.angle&&(u.focusY+=s-u.height),u.height=s)}for(t=this.Qb.iterator;t.next();)(e=t.value)instanceof zr&&this.layoutTree(e);this.arrangeTrees(),this.updateParts()}this.network=null,this.Qb=new Q,this.isValidLayout=!0},Et.prototype.findRoots=function(){for(var t=this.network.vertexes,e=t.iterator;e.next();){var n=e.value;switch(this.qd){case Ei:0===n.sourceEdges.count&&this.Qb.add(n);break;case Hr:0===n.destinationEdges.count&&this.Qb.add(n);break;default:Y("Unhandled path value "+this.qd.toString())}}0===this.Qb.count&&null!==(t=bw(this,t))&&this.Qb.add(t)},Et.prototype.removeChild=function(t,e){if(null!==t&&null!==e){for(var n=t.children,s=0,l=0;l<n.length;l++)n[l]===e&&s++;if(0<s){s=Array(n.length-s);for(var u=l=0;u<n.length;u++)n[u]!==e&&(s[l++]=n[u]);t.children=s}}},Et.prototype.initializeTreeVertexValues=function(t){if(t.copyInheritedPropertiesFrom(function OC(t,e){switch(t.Yn){default:case Ky:return null!==e.parent?e.parent:t.V;case md:return null===e.parent?t.V:null===e.parent.parent?t.Y:e.parent;case tr:return null!==e.parent?null!==e.parent.parent?e.parent.parent:t.Y:t.V;case Yy:var n=!0;if(0===e.childrenCount)n=!1;else for(var s=e.children,l=s.length,u=0;u<l;u++)if(0<s[u].childrenCount){n=!1;break}return n&&null!==e.parent?t.Y:null!==e.parent?e.parent:t.V}}(this,t)),null!==t.parent&&t.parent.alignment===Ts){for(var e=t.angle,n=t.parent.children,s=0;s<n.length&&t!==n[s];)s++;s%2==0?s!==n.length-1&&(e=90===e?180:180===e?270:270===e?180:270):e=90===e?0:180===e?90:270===e?0:90,t.angle=e}t.initialized=!0},Et.prototype.assignTreeVertexValues=function(){},Et.prototype.sortTreeVertexChildren=function(t){switch(t.sorting){case dc:break;case pd:t.children.reverse();break;case vg:t.children.sort(t.comparer);break;case wg:t.children.sort(t.comparer),t.children.reverse();break;default:Y("Unhandled sorting value "+t.sorting.toString())}},Et.prototype.ju=function(){if(this.comments)for(var t=this.network.vertexes.iterator;t.next();)this.addComments(t.value)},Et.prototype.addComments=function(t){var e=t.angle,n=t.parent,s=0,l=!1;null!==n&&(s=n.angle,l=eu(l=n.alignment)),e=90===e||270===e,s=90===s||270===s,n=0===t.childrenCount;var u=0,c=0,d=0,p=t.commentSpacing;if(null!==t.node)for(var g=t.node.wu();g.next();){var y=g.value;"Comment"===y.category&&y.canLayout()&&(null===t.comments&&(t.comments=[]),t.comments.push(y),y.Za(),y=y.measuredBounds,e&&!n||!l&&!s&&n||l&&s&&n?(u=Math.max(u,y.width),c+=y.height+Math.abs(d)):(u+=y.width+Math.abs(d),c=Math.max(c,y.height)),d=p)}null!==t.comments&&(e&&!n||!l&&!s&&n||l&&s&&n?(u+=Math.abs(t.commentMargin),c=Math.max(0,c-t.height)):(c+=Math.abs(t.commentMargin),u=Math.max(0,u-t.width)),l=U.allocAt(0,0,t.bounds.width+u,t.bounds.height+c),t.bounds=l,U.free(l))},Et.prototype.layoutComments=function(t){if(null!==t.comments){var e=t.node.measuredBounds,n=t.parent,s=t.angle,l=0,u=!1;null!==n&&(l=n.angle,u=eu(u=n.alignment)),s=90===s||270===s,n=90===l||270===l;for(var c=0===t.childrenCount,d=Fw(t),p=0,g=t.comments,y=g.length,w=A.alloc(),C=0;C<y;C++){var D=g[C],M=D.measuredBounds;if(s&&!c||!u&&!n&&c||u&&n&&c){if(135<l&&!u||n&&d)if(0<=t.commentMargin)for(w.h(t.bounds.x-t.commentMargin-M.width,t.bounds.y+p),D.move(w),D=D.Kd();D.next();){var E=D.value;E.fromSpot=Wi,E.toSpot=Ci}else for(w.h(t.bounds.x+2*t.focus.x-t.commentMargin,t.bounds.y+p),D.move(w),D=D.Kd();D.next();)(E=D.value).fromSpot=Ci,E.toSpot=Wi;else if(0<=t.commentMargin)for(w.h(t.bounds.x+2*t.focus.x+t.commentMargin,t.bounds.y+p),D.move(w),D=D.Kd();D.next();)(E=D.value).fromSpot=Ci,E.toSpot=Wi;else for(w.h(t.bounds.x+t.commentMargin-M.width,t.bounds.y+p),D.move(w),D=D.Kd();D.next();)(E=D.value).fromSpot=Wi,E.toSpot=Ci;p=0<=t.commentSpacing?p+(M.height+t.commentSpacing):p+(t.commentSpacing-M.height)}else{if(135<l&&!u||!n&&d)if(0<=t.commentMargin)for(w.h(t.bounds.x+p,t.bounds.y-t.commentMargin-M.height),D.move(w),D=D.Kd();D.next();)(E=D.value).fromSpot=Mr,E.toSpot=Mi;else for(w.h(t.bounds.x+p,t.bounds.y+2*t.focus.y-t.commentMargin),D.move(w),D=D.Kd();D.next();)(E=D.value).fromSpot=Mi,E.toSpot=Mr;else if(0<=t.commentMargin)for(w.h(t.bounds.x+p,t.bounds.y+2*t.focus.y+t.commentMargin),D.move(w),D=D.Kd();D.next();)(E=D.value).fromSpot=Mi,E.toSpot=Mr;else for(w.h(t.bounds.x+p,t.bounds.y+t.commentMargin-M.height),D.move(w),D=D.Kd();D.next();)(E=D.value).fromSpot=Mr,E.toSpot=Mi;p=0<=t.commentSpacing?p+(M.width+t.commentSpacing):p+(t.commentSpacing-M.width)}}if(A.free(w),e=p-t.commentSpacing-(s?e.height:e.width),this.qd===Ei)for(t=t.destinationEdges;t.next();)null===(l=t.value.link)||l.isAvoiding||(l.fromEndSegmentLength=0<e?e:NaN);else for(t=t.sourceEdges;t.next();)null===(l=t.value.link)||l.isAvoiding||(l.toEndSegmentLength=0<e?e:NaN)}},Et.prototype.layoutTree=function(t){if(null!==t){for(var e=t.children,n=e.length,s=0;s<n;s++)this.layoutTree(e[s]);switch(t.compaction){case xg:qi(this,t);break;case th:if(t.alignment===Ts)qi(this,t);else if(0===t.childrenCount)n=!1,e=0,null!==(s=t.parent)&&(e=s.angle,n=eu(n=s.alignment)),s=Fw(t),t.S.h(0,0),t.Ca.h(t.width,t.height),null===t.parent||null===t.comments||(180!==e&&270!==e||n)&&!s?t.ka.h(0,0):180===e&&!n||(90===e||270===e)&&s?t.ka.h(t.width-2*t.focus.x,0):t.ka.h(0,t.height-2*t.focus.y),t.Bo=null,t.No=null;else{var l=on(t);e=90===l||270===l;var u=0,c=t.children,d=c.length;for(n=0;n<d;n++)s=c[n],u=Math.max(u,e?s.Ca.width:s.Ca.height);var p=t.alignment,g=p===uo,y=eu(p),w=Math.max(0,t.breadthLimit);n=dd(t);var C=t.nodeSpacing,D=Vi(t),M=t.rowSpacing,E=0;(p===Zo||g||t.Pl||t.Ql&&1===t.maxGenerationCount)&&(E=Math.max(0,t.rowIndent)),s=t.width;var I=t.height,P=0,k=0,b=0,O=null,L=null,H=0,J=0,nt=0,et=0,q=0,G=0,Mt=0,pt=0;if(y&&!fd(p)&&135<l&&c.reverse(),fd(p))if(1<d)for(var bt=0;bt<d;bt++)bt%2==0&&bt!==d-1&&(pt=Math.max(pt,e?c[bt].Ca.width:c[bt].Ca.height));else 1===d&&(pt=e?c[0].Ca.width:c[0].Ca.height);if(y){switch(p){case ul:pt=(k=135>l?Rw(t,c,pt,P,k):FC(t,c,pt,P,k)).x,P=k.width,k=k.height;break;case hl:for(O=0;O<d;O++)w=(L=c[O]).Ca,b=0===G?0:M,e?(L.S.h(u-w.width,et+b),P=Math.max(P,w.width),k=Math.max(k,et+b+w.height),et+=b+w.height):(L.S.h(nt+b,u-w.height),P=Math.max(P,nt+b+w.width),k=Math.max(k,w.height),nt+=b+w.width),G++;break;case qs:for(O=0;O<d;O++)u=(L=c[O]).Ca,w=0===G?0:M,e?(L.S.h(C/2+t.focus.x,et+w),P=Math.max(P,u.width),k=Math.max(k,et+w+u.height),et+=w+u.height):(L.S.h(nt+w,C/2+t.focus.y),P=Math.max(P,nt+w+u.width),k=Math.max(k,u.height),nt+=w+u.width),G++}O=ji(this,2),L=ji(this,2),e?(O[0].h(0,0),O[1].h(0,k),L[0].h(P,0)):(O[0].h(0,0),O[1].h(P,0),L[0].h(0,k)),L[1].h(P,k)}else for(bt=0;bt<d;bt++){var ue=c[bt],Ce=ue.Ca;if(e){0<w&&0<G&&nt+C+Ce.width>w&&(nt<u&&Ss(t,p,u-nt,0,Mt,bt-1),q++,G=0,Mt=bt,b=k,nt=0,et=135<l?-k-M:k+M),$y(this,ue,0,et);var Sn=0;if(0===G)L=ue.No,H=Ce.width,J=Ce.height,(null===(O=ue.Bo)||null===L||l!==on(ue))&&(O=ji(this,2),L=ji(this,2),O[0].h(0,0),O[1].h(0,J),L[0].h(H,0),L[1].h(H,J));else{var ui=ce();Sn=(J=RC(this,t,ue,O,L,H,J,ui)).x,O=ui[0],L=ui[1],H=J.width,J=J.height,It(ui),nt<Ce.width&&0>Sn&&(cc(t,-Sn,0,Mt,bt-1),yg(O,-Sn,0),yg(L,-Sn,0),Sn=0)}ue.S.h(Sn,et),P=Math.max(P,H),k=Math.max(k,b+(0===q?0:M)+Ce.height),nt=H}else 0<w&&0<G&&et+C+Ce.height>w&&(et<u&&Ss(t,p,0,u-et,Mt,bt-1),q++,G=0,Mt=bt,b=P,et=0,nt=135<l?-P-M:P+M),$y(this,ue,nt,0),Sn=0,0===G?(L=ue.No,H=Ce.width,J=Ce.height,(null===(O=ue.Bo)||null===L||l!==on(ue))&&(O=ji(this,2),L=ji(this,2),O[0].h(0,0),O[1].h(H,0),L[0].h(0,J),L[1].h(H,J))):(Sn=(J=RC(this,t,ue,O,L,H,J,ui=ce())).x,O=ui[0],L=ui[1],H=J.width,J=J.height,It(ui),et<Ce.height&&0>Sn&&(cc(t,0,-Sn,Mt,bt-1),yg(O,0,-Sn),yg(L,0,-Sn),Sn=0)),ue.S.h(nt,Sn),k=Math.max(k,J),P=Math.max(P,b+(0===q?0:M)+Ce.width),et=J;G++}switch(0<q&&(e?(k+=Math.max(0,n),nt<P&&Ss(t,p,P-nt,0,Mt,d-1),0<E&&(g||cc(t,E,0,0,d-1),P+=E)):(P+=Math.max(0,n),et<k&&Ss(t,p,0,k-et,Mt,d-1),0<E&&(g||cc(t,0,E,0,d-1),k+=E))),E=g=0,p){case gd:e?g+=P/2-t.focus.x-D/2:E+=k/2-t.focus.y-D/2;break;case pc:0<q?e?g+=P/2-t.focus.x-D/2:E+=k/2-t.focus.y-D/2:e?g+=(pt=c[0].S.x+c[0].ka.x)+(c[d-1].S.x+c[d-1].ka.x+2*c[d-1].focus.x-pt)/2-t.focus.x-D/2:E+=(pt=c[0].S.y+c[0].ka.y)+(c[d-1].S.y+c[d-1].ka.y+2*c[d-1].focus.y-pt)/2-t.focus.y-D/2;break;case Zo:e?(g-=D,P+=D):(E-=D,k+=D);break;case uo:e?(g+=P-t.width+D,P+=D):(E+=k-t.height+D,k+=D);break;case ul:e?g+=1<d?pt+C/2-t.focus.x:c[0].focus.x-t.focus.x+c[0].ka.x:E+=1<d?pt+C/2-t.focus.y:c[0].focus.y-t.focus.y+c[0].ka.y;break;case hl:e?g+=P+C/2-t.focus.x:E+=k+C/2-t.focus.y;break;case qs:break;default:Y("Unhandled alignment value "+p.toString())}for(D=0;D<d;D++)pt=c[D],e?pt.S.h(pt.S.x+pt.ka.x-g,pt.S.y+(135<l?(y?-k:-pt.Ca.height)+pt.ka.y-n:I+n+pt.ka.y)):pt.S.h(pt.S.x+(135<l?(y?-P:-pt.Ca.width)+pt.ka.x-n:s+n+pt.ka.x),pt.S.y+pt.ka.y-E);if(d=c=0,y?e?(P=jw(t,P,g),0>g&&(g=0),135<l&&(E+=k+n),k+=I+n,p===qs&&(c+=C/2+t.focus.x),d+=I+n):(135<l&&(g+=P+n),P+=s+n,k=zy(t,k,E),0>E&&(E=0),p===qs&&(d+=C/2+t.focus.y),c+=s+n):e?(null===t.comments?s>P&&(c=(P=Gy(p,s-P,0)).x,d=P.y,P=s,g=0):P=jw(t,P,g),0>g&&(c-=g,g=0),135<l&&(E+=k+n),k=Math.max(Math.max(k,I),k+I+n),d+=I+n):(135<l&&(g+=P+n),P=Math.max(Math.max(P,s),P+s+n),null===t.comments?I>k&&(c=(k=Gy(p,0,I-k)).x,d=k.y,k=I,E=0):k=zy(t,k,E),0>E&&(d-=E,E=0),c+=s+n),0<q)l=ji(this,4),q=ji(this,4),e?(l[2].h(0,I+n),l[3].h(l[2].x,k),q[2].h(P,l[2].y),q[3].h(q[2].x,l[3].y)):(l[2].h(s+n,0),l[3].h(P,l[2].y),q[2].h(l[2].x,k),q[3].h(l[3].x,q[2].y));else{for(l=ji(this,O.length+2),q=ji(this,L.length+2),p=0;p<O.length;p++)l[p+2].h((y=O[p]).x+c,y.y+d);for(p=0;p<L.length;p++)q[p+2].h((y=L[p]).x+c,y.y+d)}e?(l[0].h(g,0),l[1].h(l[0].x,I),l[2].y<l[1].y&&(l[2].x>l[0].x?l[2].assign(l[1]):l[1].assign(l[2])),l[3].y<l[2].y&&(l[3].x>l[0].x?l[3].assign(l[2]):l[2].assign(l[3])),q[0].h(g+s,0),q[1].h(q[0].x,I),q[2].y<q[1].y&&(q[2].x<q[0].x?q[2].assign(q[1]):q[1].assign(q[2])),q[3].y<q[2].y&&(q[3].x<q[0].x?q[3].assign(q[2]):q[2].assign(q[3])),l[2].y-=n/2,q[2].y-=n/2):(l[0].h(0,E),l[1].h(s,l[0].y),l[2].x<l[1].x&&(l[2].y>l[0].y?l[2].assign(l[1]):l[1].assign(l[2])),l[3].x<l[2].x&&(l[3].y>l[0].y?l[3].assign(l[2]):l[2].assign(l[3])),q[0].h(0,E+I),q[1].h(s,q[0].y),q[2].x<q[1].x&&(q[2].y<q[0].y?q[2].assign(q[1]):q[1].assign(q[2])),q[3].x<q[2].x&&(q[3].y<q[0].y?q[3].assign(q[2]):q[2].assign(q[3])),l[2].x-=n/2,q[2].x-=n/2),Ds(this,O),Ds(this,L),t.Bo=l,t.No=q,t.ka.h(g,E),t.Ca.h(P,k)}break;default:Y("Unhandled compaction value "+t.compaction.toString())}}},Et.prototype.arrangeTrees=function(){if(this.Nb===Mg)for(var t=this.Qb.iterator;t.next();){var e=t.value;if(e instanceof zr){var n=e.node;if(null!==n){var s=n.position;n=s.x,s=s.y,isFinite(n)||(n=0),isFinite(s)||(s=0),Wy(this,e,n,s)}}}else{for(t=[],e=this.Qb.iterator;e.next();)(n=e.value)instanceof zr&&t.push(n);switch(this.sorting){case dc:break;case pd:t.reverse();break;case vg:t.sort(this.comparer);break;case wg:t.sort(this.comparer),t.reverse();break;default:Y("Unhandled sorting value "+this.sorting.toString())}for(e=(n=this.arrangementOrigin).x,n=n.y,s=0;s<t.length;s++){var l=t[s];switch(Wy(this,l,e+l.ka.x,n+l.ka.y),this.Nb){case cl:n+=l.Ca.height+this.Td.height;break;case Cg:e+=l.Ca.width+this.Td.width;break;default:Y("Unhandled arrangement value "+this.Nb.toString())}}}},Et.prototype.commitLayout=function(){this.ev(),this.commitNodes(),this.nu(),this.isRouting&&this.commitLinks()},Et.prototype.commitNodes=function(){for(var t=this.network.vertexes.iterator;t.next();)t.value.commit();for(t.reset();t.next();)this.layoutComments(t.value)},Et.prototype.nu=function(){if(this.layerStyle===Sg){for(var t=this.Ev,e=[],n=null,s=this.network.vertexes.iterator;s.next();){var l=s.value;null===n?n=l.bounds.copy():n.Xc(l.bounds);var u=e[l.level];u=void 0===u?dd(l):Math.max(u,dd(l)),e[l.level]=u}for(s=0;s<e.length;s++)void 0===e[s]&&(e[s]=0);if(90===this.angle||270===this.angle?(n.vc(this.nodeSpacing/2,this.layerSpacing),s=new A(-this.nodeSpacing/2,-this.layerSpacing/2)):(n.vc(this.layerSpacing,this.nodeSpacing/2),s=new A(-this.layerSpacing/2,-this.nodeSpacing/2)),l=[],n=90===this.angle||270===this.angle?n.width:n.height,u=0,180===this.angle||270===this.angle)for(var c=0;c<t.length;c++)u+=t[c]+e[c];for(c=0;c<t.length;c++){var d=t[c]+e[c];270===this.angle?l.push(new U(0,u-=d,n,d)):90===this.angle?(l.push(new U(0,u,n,d)),u+=d):180===this.angle?l.push(new U(u-=d,0,d,n)):(l.push(new U(u,0,d,n)),u+=d)}this.commitLayers(l,s)}},Et.prototype.commitLayers=function(){},Et.prototype.commitLinks=function(){for(var t=this.network.edges.iterator;t.next();)t.value.commit()},Et.prototype.ev=function(){for(var t=this.Qb.iterator;t.next();){var e=t.value;e instanceof zr&&fc(this,e)}},Et.prototype.setPortSpots=function(t){var e=t.alignment;if(eu(e)){var n=this.qd===Ei,s=on(t);switch(s){case 0:var l=Ci;break;case 90:l=Mi;break;case 180:l=Wi;break;default:l=Mr}var u=t.children,c=u.length;switch(e){case ul:case Ts:for(e=0;e<c;e++){var d=u[e];if(null!==(d=(n?d.sourceEdges:d.destinationEdges).first())&&null!==(d=d.link)){var p=90===s||270===s?Wi:Mr;if(1===c||e===c-1&&c%2==1)switch(s){case 0:p=Wi;break;case 90:p=Mr;break;case 180:p=Ci;break;default:p=Mi}else e%2==0&&(p=90===s||270===s?Ci:Mi);n?(t.setsPortSpot&&(d.fromSpot=l),t.setsChildPortSpot&&(d.toSpot=p)):(t.setsPortSpot&&(d.fromSpot=p),t.setsChildPortSpot&&(d.toSpot=l))}}break;case hl:for(s=90===s||270===s?Ci:Mi,u=n?t.destinationEdges:t.sourceEdges;u.next();)null!==(c=u.value.link)&&(n?(t.setsPortSpot&&(c.fromSpot=l),t.setsChildPortSpot&&(c.toSpot=s)):(t.setsPortSpot&&(c.fromSpot=s),t.setsChildPortSpot&&(c.toSpot=l)));break;case qs:for(s=90===s||270===s?Wi:Mr,u=n?t.destinationEdges:t.sourceEdges;u.next();)null!==(c=u.value.link)&&(n?(t.setsPortSpot&&(c.fromSpot=l),t.setsChildPortSpot&&(c.toSpot=s)):(t.setsPortSpot&&(c.fromSpot=s),t.setsChildPortSpot&&(c.toSpot=l)))}}else if(n=on(t),this.qd===Ei){for(l=t.destinationEdges;l.next();)if(null!==(s=l.value.link)){if(t.setsPortSpot)if(t.portSpot.Sb())switch(n){case 0:s.fromSpot=Ci;break;case 90:s.fromSpot=Mi;break;case 180:s.fromSpot=Wi;break;default:s.fromSpot=Mr}else s.fromSpot=t.portSpot;if(t.setsChildPortSpot)if(t.childPortSpot.Sb())switch(n){case 0:s.toSpot=Wi;break;case 90:s.toSpot=Mr;break;case 180:s.toSpot=Ci;break;default:s.toSpot=Mi}else s.toSpot=t.childPortSpot}}else for(l=t.sourceEdges;l.next();)if(null!==(s=l.value.link)){if(t.setsPortSpot)if(t.portSpot.Sb())switch(n){case 0:s.toSpot=Ci;break;case 90:s.toSpot=Mi;break;case 180:s.toSpot=Wi;break;default:s.toSpot=Mr}else s.toSpot=t.portSpot;if(t.setsChildPortSpot)if(t.childPortSpot.Sb())switch(n){case 0:s.fromSpot=Wi;break;case 90:s.fromSpot=Mr;break;case 180:s.fromSpot=Ci;break;default:s.fromSpot=Mi}else s.fromSpot=t.childPortSpot}},St.Object.defineProperties(Et.prototype,{roots:{get:function(){return this.Qb},set:function(t){this.Qb!==t&&(this.Qb=t,this.D())}},path:{get:function(){return this.En},set:function(t){this.En!==t&&(this.En=t,this.D())}},treeStyle:{get:function(){return this.Yn},set:function(t){this.Nb===t||t!==Ky&&t!==tr&&t!==Yy&&t!==md||(this.Yn=t,this.D())}},layerStyle:{get:function(){return this.aq},set:function(t){this.Nb===t||t!==Xy&&t!==Jy&&t!==Sg||(this.aq=t,this.D())}},comments:{get:function(){return this.od},set:function(t){this.od!==t&&(this.od=t,this.D())}},arrangement:{get:function(){return this.Nb},set:function(t){this.Nb===t||t!==cl&&t!==Cg&&t!==Mg||(this.Nb=t,this.D())}},arrangementSpacing:{get:function(){return this.Td},set:function(t){this.Td.C(t)||(this.Td.assign(t),this.D())}},rootDefaults:{get:function(){return this.V},set:function(t){this.V!==t&&(this.V=t,this.D())}},alternateDefaults:{get:function(){return this.Y},set:function(t){this.Y!==t&&(this.Y=t,this.D())}},sorting:{get:function(){return this.V.sorting},set:function(t){this.V.sorting===t||t!==dc&&t!==pd&&t!==vg&&!wg||(this.V.sorting=t,this.D())}},comparer:{get:function(){return this.V.comparer},set:function(t){this.V.comparer!==t&&(this.V.comparer=t,this.D())}},angle:{get:function(){return this.V.angle},set:function(t){this.V.angle!==t&&(0===t||90===t||180===t||270===t?(this.V.angle=t,this.D()):Y("TreeLayout.angle must be 0, 90, 180, or 270"))}},alignment:{get:function(){return this.V.alignment},set:function(t){this.V.alignment!==t&&(this.V.alignment=t,this.D())}},nodeIndent:{get:function(){return this.V.nodeIndent},set:function(t){this.V.nodeIndent!==t&&0<=t&&(this.V.nodeIndent=t,this.D())}},nodeIndentPastParent:{get:function(){return this.V.nodeIndentPastParent},set:function(t){this.V.nodeIndentPastParent!==t&&0<=t&&1>=t&&(this.V.nodeIndentPastParent=t,this.D())}},nodeSpacing:{get:function(){return this.V.nodeSpacing},set:function(t){this.V.nodeSpacing!==t&&(this.V.nodeSpacing=t,this.D())}},layerSpacing:{get:function(){return this.V.layerSpacing},set:function(t){this.V.layerSpacing!==t&&(this.V.layerSpacing=t,this.D())}},layerSpacingParentOverlap:{get:function(){return this.V.layerSpacingParentOverlap},set:function(t){this.V.layerSpacingParentOverlap!==t&&0<=t&&1>=t&&(this.V.layerSpacingParentOverlap=t,this.D())}},compaction:{get:function(){return this.V.compaction},set:function(t){this.V.compaction===t||t!==xg&&t!==th||(this.V.compaction=t,this.D())}},breadthLimit:{get:function(){return this.V.breadthLimit},set:function(t){this.V.breadthLimit!==t&&0<=t&&(this.V.breadthLimit=t,this.D())}},rowSpacing:{get:function(){return this.V.rowSpacing},set:function(t){this.V.rowSpacing!==t&&(this.V.rowSpacing=t,this.D())}},rowIndent:{get:function(){return this.V.rowIndent},set:function(t){this.V.rowIndent!==t&&0<=t&&(this.V.rowIndent=t,this.D())}},commentSpacing:{get:function(){return this.V.commentSpacing},set:function(t){this.V.commentSpacing!==t&&(this.V.commentSpacing=t,this.D())}},commentMargin:{get:function(){return this.V.commentMargin},set:function(t){this.V.commentMargin!==t&&(this.V.commentMargin=t,this.D())}},setsPortSpot:{get:function(){return this.V.setsPortSpot},set:function(t){this.V.setsPortSpot!==t&&(this.V.setsPortSpot=t,this.D())}},portSpot:{get:function(){return this.V.portSpot},set:function(t){this.V.portSpot.C(t)||(this.V.portSpot=t,this.D())}},setsChildPortSpot:{get:function(){return this.V.setsChildPortSpot},set:function(t){this.V.setsChildPortSpot!==t&&(this.V.setsChildPortSpot=t,this.D())}},childPortSpot:{get:function(){return this.V.childPortSpot},set:function(t){this.V.childPortSpot.C(t)||(this.V.childPortSpot=t,this.D())}},alternateSorting:{get:function(){return this.Y.sorting},set:function(t){this.Y.sorting===t||t!==dc&&t!==pd&&t!==vg&&!wg||(this.Y.sorting=t,this.D())}},alternateComparer:{get:function(){return this.Y.comparer},set:function(t){this.Y.comparer!==t&&(this.Y.comparer=t,this.D())}},alternateAngle:{get:function(){return this.Y.angle},set:function(t){this.Y.angle===t||0!==t&&90!==t&&180!==t&&270!==t||(this.Y.angle=t,this.D())}},alternateAlignment:{get:function(){return this.Y.alignment},set:function(t){this.Y.alignment!==t&&(this.Y.alignment=t,this.D())}},alternateNodeIndent:{get:function(){return this.Y.nodeIndent},set:function(t){this.Y.nodeIndent!==t&&0<=t&&(this.Y.nodeIndent=t,this.D())}},alternateNodeIndentPastParent:{get:function(){return this.Y.nodeIndentPastParent},set:function(t){this.Y.nodeIndentPastParent!==t&&0<=t&&1>=t&&(this.Y.nodeIndentPastParent=t,this.D())}},alternateNodeSpacing:{get:function(){return this.Y.nodeSpacing},set:function(t){this.Y.nodeSpacing!==t&&(this.Y.nodeSpacing=t,this.D())}},alternateLayerSpacing:{get:function(){return this.Y.layerSpacing},set:function(t){this.Y.layerSpacing!==t&&(this.Y.layerSpacing=t,this.D())}},alternateLayerSpacingParentOverlap:{get:function(){return this.Y.layerSpacingParentOverlap},set:function(t){this.Y.layerSpacingParentOverlap!==t&&0<=t&&1>=t&&(this.Y.layerSpacingParentOverlap=t,this.D())}},alternateCompaction:{get:function(){return this.Y.compaction},set:function(t){this.Y.compaction===t||t!==xg&&t!==th||(this.Y.compaction=t,this.D())}},alternateBreadthLimit:{get:function(){return this.Y.breadthLimit},set:function(t){this.Y.breadthLimit!==t&&0<=t&&(this.Y.breadthLimit=t,this.D())}},alternateRowSpacing:{get:function(){return this.Y.rowSpacing},set:function(t){this.Y.rowSpacing!==t&&(this.Y.rowSpacing=t,this.D())}},alternateRowIndent:{get:function(){return this.Y.rowIndent},set:function(t){this.Y.rowIndent!==t&&0<=t&&(this.Y.rowIndent=t,this.D())}},alternateCommentSpacing:{get:function(){return this.Y.commentSpacing},set:function(t){this.Y.commentSpacing!==t&&(this.Y.commentSpacing=t,this.D())}},alternateCommentMargin:{get:function(){return this.Y.commentMargin},set:function(t){this.Y.commentMargin!==t&&(this.Y.commentMargin=t,this.D())}},alternateSetsPortSpot:{get:function(){return this.Y.setsPortSpot},set:function(t){this.Y.setsPortSpot!==t&&(this.Y.setsPortSpot=t,this.D())}},alternatePortSpot:{get:function(){return this.Y.portSpot},set:function(t){this.Y.portSpot.C(t)||(this.Y.portSpot=t,this.D())}},alternateSetsChildPortSpot:{get:function(){return this.Y.setsChildPortSpot},set:function(t){this.Y.setsChildPortSpot!==t&&(this.Y.setsChildPortSpot=t,this.D())}},alternateChildPortSpot:{get:function(){return this.Y.childPortSpot},set:function(t){this.Y.childPortSpot.C(t)||(this.Y.childPortSpot=t,this.D())}}});var _s=new K(Et,"PathDefault",-1),Ei=new K(Et,"PathDestination",0),Hr=new K(Et,"PathSource",1),dc=new K(Et,"SortingForwards",10),pd=new K(Et,"SortingReverse",11),vg=new K(Et,"SortingAscending",12),wg=new K(Et,"SortingDescending",13),gd=new K(Et,"AlignmentCenterSubtrees",20),pc=new K(Et,"AlignmentCenterChildren",21),Zo=new K(Et,"AlignmentStart",22),uo=new K(Et,"AlignmentEnd",23),ul=new K(Et,"AlignmentBus",24),Ts=new K(Et,"AlignmentBusBranching",25),hl=new K(Et,"AlignmentTopLeftBus",26),qs=new K(Et,"AlignmentBottomRightBus",27),xg=new K(Et,"CompactionNone",30),th=new K(Et,"CompactionBlock",31),Ky=new K(Et,"StyleLayered",40),Yy=new K(Et,"StyleLastParents",41),tr=new K(Et,"StyleAlternating",42),md=new K(Et,"StyleRootOnly",43),cl=new K(Et,"ArrangementVertical",50),Cg=new K(Et,"ArrangementHorizontal",51),Mg=new K(Et,"ArrangementFixedRoots",52),Xy=new K(Et,"LayerIndividual",60),Jy=new K(Et,"LayerSiblings",61),Sg=new K(Et,"LayerUniform",62);function eh(t){Jt.call(this,t)}function zr(t){tn.call(this,t),this.W=!1,this.cb=null,this.u=[],this.hb=this.Ga=this.F=this.ga=0,this.od=null,this.S=new A(0,0),this.Ca=new gt(0,0),this.ka=new A(0,0),this.Ql=this.Pl=this.Xz=!1,this.No=this.Bo=null,this.fd=dc,this.Zc=wC,this.Gb=0,this.Fb=pc,this.uq=this.tq=0,this.vq=20,this.be=50,this.$p=0,this.kp=th,this.cp=0,this.Mq=25,this.jp=this.Lq=10,this.ip=20,this.Uq=!0,this.Cq=Zn,this.Tq=!0,this.gp=Zn}function gc(t){si.call(this,t),this.Ft=new A(0,0)}Et.className="TreeLayout",Et.PathDefault=_s,Et.PathDestination=Ei,Et.PathSource=Hr,Et.SortingForwards=dc,Et.SortingReverse=pd,Et.SortingAscending=vg,Et.SortingDescending=wg,Et.AlignmentCenterSubtrees=gd,Et.AlignmentCenterChildren=pc,Et.AlignmentStart=Zo,Et.AlignmentEnd=uo,Et.AlignmentBus=ul,Et.AlignmentBusBranching=Ts,Et.AlignmentTopLeftBus=hl,Et.AlignmentBottomRightBus=qs,Et.CompactionNone=xg,Et.CompactionBlock=th,Et.StyleLayered=Ky,Et.StyleLastParents=Yy,Et.StyleAlternating=tr,Et.StyleRootOnly=md,Et.ArrangementVertical=cl,Et.ArrangementHorizontal=Cg,Et.ArrangementFixedRoots=Mg,Et.LayerIndividual=Xy,Et.LayerSiblings=Jy,Et.LayerUniform=Sg,zt(eh,Jt),eh.prototype.createVertex=function(){return new zr(this)},eh.prototype.createEdge=function(){return new gc(this)},eh.className="TreeNetwork",zt(zr,tn),zr.prototype.copyInheritedPropertiesFrom=function(t){null!==t&&(this.fd=t.sorting,this.Zc=t.comparer,this.Gb=t.angle,this.Fb=t.alignment,this.tq=t.nodeIndent,this.uq=t.nodeIndentPastParent,this.vq=t.nodeSpacing,this.be=t.layerSpacing,this.$p=t.layerSpacingParentOverlap,this.kp=t.compaction,this.cp=t.breadthLimit,this.Mq=t.rowSpacing,this.Lq=t.rowIndent,this.jp=t.commentSpacing,this.ip=t.commentMargin,this.Uq=t.setsPortSpot,this.Cq=t.portSpot,this.Tq=t.setsChildPortSpot,this.gp=t.childPortSpot)},St.Object.defineProperties(zr.prototype,{initialized:{get:function(){return this.W},set:function(t){this.W!==t&&(this.W=t)}},parent:{get:function(){return this.cb},set:function(t){this.cb!==t&&(this.cb=t)}},children:{get:function(){return this.u},set:function(t){if(this.u!==t){if(null!==t)for(var e=t.length,n=0;n<e;n++);this.u=t}}},level:{get:function(){return this.ga},set:function(t){this.ga!==t&&(this.ga=t)}},descendantCount:{get:function(){return this.F},set:function(t){this.F!==t&&(this.F=t)}},maxChildrenCount:{get:function(){return this.Ga},set:function(t){this.Ga!==t&&(this.Ga=t)}},maxGenerationCount:{get:function(){return this.hb},set:function(t){this.hb!==t&&(this.hb=t)}},comments:{get:function(){return this.od},set:function(t){if(this.od!==t){if(null!==t)for(var e=t.length,n=0;n<e;n++);this.od=t}}},sorting:{get:function(){return this.fd},set:function(t){this.fd!==t&&(this.fd=t)}},comparer:{get:function(){return this.Zc},set:function(t){this.Zc!==t&&(this.Zc=t)}},angle:{get:function(){return this.Gb},set:function(t){this.Gb!==t&&(this.Gb=t)}},alignment:{get:function(){return this.Fb},set:function(t){this.Fb!==t&&(this.Fb=t)}},nodeIndent:{get:function(){return this.tq},set:function(t){this.tq!==t&&(this.tq=t)}},nodeIndentPastParent:{get:function(){return this.uq},set:function(t){this.uq!==t&&(this.uq=t)}},nodeSpacing:{get:function(){return this.vq},set:function(t){this.vq!==t&&(this.vq=t)}},layerSpacing:{get:function(){return this.be},set:function(t){this.be!==t&&(this.be=t)}},layerSpacingParentOverlap:{get:function(){return this.$p},set:function(t){this.$p!==t&&(this.$p=t)}},compaction:{get:function(){return this.kp},set:function(t){this.kp!==t&&(this.kp=t)}},breadthLimit:{get:function(){return this.cp},set:function(t){this.cp!==t&&(this.cp=t)}},rowSpacing:{get:function(){return this.Mq},set:function(t){this.Mq!==t&&(this.Mq=t)}},rowIndent:{get:function(){return this.Lq},set:function(t){this.Lq!==t&&(this.Lq=t)}},commentSpacing:{get:function(){return this.jp},set:function(t){this.jp!==t&&(this.jp=t)}},commentMargin:{get:function(){return this.ip},set:function(t){this.ip!==t&&(this.ip=t)}},setsPortSpot:{get:function(){return this.Uq},set:function(t){this.Uq!==t&&(this.Uq=t)}},portSpot:{get:function(){return this.Cq},set:function(t){this.Cq.C(t)||(this.Cq=t)}},setsChildPortSpot:{get:function(){return this.Tq},set:function(t){this.Tq!==t&&(this.Tq=t)}},childPortSpot:{get:function(){return this.gp},set:function(t){this.gp.C(t)||(this.gp=t)}},childrenCount:{get:function(){return this.children.length}},relativePosition:{get:function(){return this.S},set:function(t){this.S.set(t)}},subtreeSize:{get:function(){return this.Ca},set:function(t){this.Ca.set(t)}},subtreeOffset:{get:function(){return this.ka},set:function(t){this.ka.set(t)}}}),zr.className="TreeVertex",zt(gc,si),gc.prototype.commit=function(){var t=this.link;if(null!==t&&!t.isAvoiding){var e=this.network.layout,n=null,s=null;switch(e.qd){case Ei:n=this.fromVertex,s=this.toVertex;break;case Hr:n=this.toVertex,s=this.fromVertex;break;default:Y("Unhandled path value "+e.qd.toString())}if(null!==n&&null!==s)if(0!==(e=this.Ft).x||0!==e.y||n.Xz){s=n.bounds;var l=on(n),u=dd(n),c=n.rowSpacing;t.mg();var g,d=t.curve===Fi,p=t.isOrthogonal;if(t.jh(),p||d){for(g=2;4<t.pointsCount;)t.Yu(2);var y=t.i(1),w=t.i(2)}else{for(g=1;3<t.pointsCount;)t.Yu(1);y=t.i(0),w=t.i(t.pointsCount-1)}var C=t.i(t.pointsCount-1);0===l?(n.alignment===uo?(l=s.bottom+e.y,0===e.y&&y.y>C.y+n.rowIndent&&(l=Math.min(l,Math.max(y.y,l-Vi(n))))):n.alignment===Zo?(l=s.top+e.y,0===e.y&&y.y<C.y-n.rowIndent&&(l=Math.max(l,Math.min(y.y,l+Vi(n))))):l=n.Pl||n.Ql&&1===n.maxGenerationCount?s.top-n.ka.y+e.y:s.y+s.height/2+e.y,d?(t.l(g,y.x,l),g++,t.l(g,s.right+u,l),g++,t.l(g,s.right+u+(e.x-c)/3,l),g++,t.l(g,s.right+u+2*(e.x-c)/3,l),g++,t.l(g,s.right+u+(e.x-c),l),g++,t.l(g,w.x,l)):(p&&(t.l(g,s.right+u/2,y.y),g++),t.l(g,s.right+u/2,l),g++,t.l(g,s.right+u+e.x-(p?c/2:c),l),g++,p&&t.l(g,t.i(g-1).x,w.y))):90===l?(n.alignment===uo?(l=s.right+e.x,0===e.x&&y.x>C.x+n.rowIndent&&(l=Math.min(l,Math.max(y.x,l-Vi(n))))):n.alignment===Zo?(l=s.left+e.x,0===e.x&&y.x<C.x-n.rowIndent&&(l=Math.max(l,Math.min(y.x,l+Vi(n))))):l=n.Pl||n.Ql&&1===n.maxGenerationCount?s.left-n.ka.x+e.x:s.x+s.width/2+e.x,d?(t.l(g,l,y.y),g++,t.l(g,l,s.bottom+u),g++,t.l(g,l,s.bottom+u+(e.y-c)/3),g++,t.l(g,l,s.bottom+u+2*(e.y-c)/3),g++,t.l(g,l,s.bottom+u+(e.y-c)),g++,t.l(g,l,w.y)):(p&&(t.l(g,y.x,s.bottom+u/2),g++),t.l(g,l,s.bottom+u/2),g++,t.l(g,l,s.bottom+u+e.y-(p?c/2:c)),g++,p&&t.l(g,w.x,t.i(g-1).y))):180===l?(n.alignment===uo?(l=s.bottom+e.y,0===e.y&&y.y>C.y+n.rowIndent&&(l=Math.min(l,Math.max(y.y,l-Vi(n))))):n.alignment===Zo?(l=s.top+e.y,0===e.y&&y.y<C.y-n.rowIndent&&(l=Math.max(l,Math.min(y.y,l+Vi(n))))):l=n.Pl||n.Ql&&1===n.maxGenerationCount?s.top-n.ka.y+e.y:s.y+s.height/2+e.y,d?(t.l(g,y.x,l),g++,t.l(g,s.left-u,l),g++,t.l(g,s.left-u+(e.x+c)/3,l),g++,t.l(g,s.left-u+2*(e.x+c)/3,l),g++,t.l(g,s.left-u+(e.x+c),l),g++,t.l(g,w.x,l)):(p&&(t.l(g,s.left-u/2,y.y),g++),t.l(g,s.left-u/2,l),g++,t.l(g,s.left-u+e.x+(p?c/2:c),l),g++,p&&t.l(g,t.i(g-1).x,w.y))):270===l?(n.alignment===uo?(l=s.right+e.x,0===e.x&&y.x>C.x+n.rowIndent&&(l=Math.min(l,Math.max(y.x,l-Vi(n))))):n.alignment===Zo?(l=s.left+e.x,0===e.x&&y.x<C.x-n.rowIndent&&(l=Math.max(l,Math.min(y.x,l+Vi(n))))):l=n.Pl||n.Ql&&1===n.maxGenerationCount?s.left-n.ka.x+e.x:s.x+s.width/2+e.x,d?(t.l(g,l,y.y),g++,t.l(g,l,s.top-u),g++,t.l(g,l,s.top-u+(e.y+c)/3),g++,t.l(g,l,s.top-u+2*(e.y+c)/3),g++,t.l(g,l,s.top-u+(e.y+c)),g++,t.l(g,l,w.y)):(p&&(t.l(g,y.x,s.top-u/2),g++),t.l(g,l,s.top-u/2),g++,t.l(g,l,s.top-u+e.y+(p?c/2:c)),g++,p&&t.l(g,w.x,t.i(g-1).y))):Y("Invalid angle "+l),t.pf()}else t=this.link,(u=on(n))!==on(s)&&(c=dd(n),d=n.bounds,n=s.bounds,0===u&&n.left-d.right<c+1||90===u&&n.top-d.bottom<c+1||180===u&&d.left-n.right<c+1||270===u&&d.top-n.bottom<c+1||(t.mg(),n=t.curve===Fi,e=t.isOrthogonal,s=eu(this.fromVertex.alignment),t.jh(),0===u?(u=d.right+c/2,n?4===t.pointsCount&&(n=t.i(3).y,t.M(1,u-20,t.i(1).y),t.l(2,u-20,n),t.l(3,u,n),t.l(4,u+20,n),t.M(5,t.i(5).x,n)):e?s?t.M(3,t.i(2).x,t.i(4).y):6===t.pointsCount&&(t.M(2,u,t.i(2).y),t.M(3,u,t.i(3).y)):4===t.pointsCount?t.l(2,u,t.i(2).y):3===t.pointsCount?t.M(1,u,t.i(2).y):2===t.pointsCount&&t.l(1,u,t.i(1).y)):90===u?(u=d.bottom+c/2,n?4===t.pointsCount&&(n=t.i(3).x,t.M(1,t.i(1).x,u-20),t.l(2,n,u-20),t.l(3,n,u),t.l(4,n,u+20),t.M(5,n,t.i(5).y)):e?s?t.M(3,t.i(2).x,t.i(4).y):6===t.pointsCount&&(t.M(2,t.i(2).x,u),t.M(3,t.i(3).x,u)):4===t.pointsCount?t.l(2,t.i(2).x,u):3===t.pointsCount?t.M(1,t.i(2).x,u):2===t.pointsCount&&t.l(1,t.i(1).x,u)):180===u?(u=d.left-c/2,n?4===t.pointsCount&&(n=t.i(3).y,t.M(1,u+20,t.i(1).y),t.l(2,u+20,n),t.l(3,u,n),t.l(4,u-20,n),t.M(5,t.i(5).x,n)):e?s?t.M(3,t.i(2).x,t.i(4).y):6===t.pointsCount&&(t.M(2,u,t.i(2).y),t.M(3,u,t.i(3).y)):4===t.pointsCount?t.l(2,u,t.i(2).y):3===t.pointsCount?t.M(1,u,t.i(2).y):2===t.pointsCount&&t.l(1,u,t.i(1).y)):270===u&&(u=d.top-c/2,n?4===t.pointsCount&&(n=t.i(3).x,t.M(1,t.i(1).x,u+20),t.l(2,n,u+20),t.l(3,n,u),t.l(4,n,u-20),t.M(5,n,t.i(5).y)):e?s?t.M(3,t.i(2).x,t.i(4).y):6===t.pointsCount&&(t.M(2,t.i(2).x,u),t.M(3,t.i(3).x,u)):4===t.pointsCount?t.l(2,t.i(2).x,u):3===t.pointsCount?t.M(1,t.i(2).x,u):2===t.pointsCount&&t.l(1,t.i(1).x,u)),t.pf()))}},St.Object.defineProperties(gc.prototype,{fromVertex:{get:function(){return this.ad},set:function(t){this.ad!==t&&(this.ad=t)}},toVertex:{get:function(){return this.jd},set:function(t){this.jd!==t&&(this.jd=t)}},relativePoint:{get:function(){return this.Ft},set:function(t){this.Ft.set(t)}}}),gc.className="TreeEdge",Te.prototype.initializeStandardTools=function(){this.gb("Action",new So,this.mouseDownTools),this.gb("Relinking",new Yi,this.mouseDownTools),this.gb("LinkReshaping",new Xe,this.mouseDownTools),this.gb("Rotating",new zn,this.mouseDownTools),this.gb("Resizing",new ze,this.mouseDownTools),this.gb("Linking",new oe,this.mouseMoveTools),this.gb("Dragging",new Ie,this.mouseMoveTools),this.gb("DragSelecting",new Bs,this.mouseMoveTools),this.gb("Panning",new gs,this.mouseMoveTools),this.gb("ContextMenu",new Xi,this.mouseUpTools),this.gb("TextEditing",new fe,this.mouseUpTools),this.gb("ClickCreating",new no,this.mouseUpTools),this.gb("ClickSelecting",new Ah,this.mouseUpTools)},Go("Horizontal",new Np),Go("Spot",new Dm),Go("Table",new Gl),Go("Viewbox",new Em),Go("TableRow",new _m),Go("TableColumn",new Tm),Go("Graduated",new kp),Go("Grid",new Ap),kt.add("GraphLinksModel",nn),kt.add("TreeModel",dr),vy(dn,null),vy(jt,null);var Zy=mt.go,Vw={get licenseKey(){return V.licenseKey},set licenseKey(t){V.licenseKey=t},get version(){return V.version},Group:wt,EnumValue:K,List:tt,Set:Q,Map:xt,Point:A,Size:gt,Rect:U,Margin:Ht,Spot:ot,Geometry:X,PathFigure:Fn,PathSegment:Ft,InputEvent:ar,DiagramEvent:Jc,ChangedEvent:Ne,Model:st,GraphLinksModel:Pt,TreeModel:ai,Binding:xe,Transaction:Pn,UndoManager:Le,CommandHandler:Wt,Tool:Ot,DraggingTool:Ie,DraggingInfo:Rl,DraggingOptions:wf,LinkingBaseTool:Qn,LinkingTool:oe,RelinkingTool:Yi,LinkReshapingTool:Xe,ResizingTool:ze,RotatingTool:zn,ClickSelectingTool:Ah,ActionTool:So,ClickCreatingTool:no,HTMLInfo:za,ContextMenuTool:Xi,DragSelectingTool:Bs,PanningTool:gs,TextEditingTool:fe,ToolManager:Te,Animation:Nn,AnimationManager:_r,AnimationTrigger:ki,Layer:Gn,Diagram:V,Palette:xp,Overview:zs,Brush:Rt,GraphObject:lt,Panel:$,RowColumnDefinition:cn,Shape:Ct,TextBlock:Kt,Picture:Qi,Part:ut,Adornment:At,Node:Z,Link:z,Placeholder:Di,Layout:Lt,LayoutNetwork:Jt,LayoutVertex:tn,LayoutEdge:si,GridLayout:Vn,PanelLayout:$e,CircularLayout:Se,CircularNetwork:ud,CircularVertex:fg,CircularEdge:ky,ForceDirectedLayout:dn,ForceDirectedNetwork:Ms,ForceDirectedVertex:al,ForceDirectedEdge:Ir,LayeredDigraphLayout:jt,LayeredDigraphNetwork:hc,LayeredDigraphVertex:tu,LayeredDigraphEdge:qu,TreeLayout:Et,TreeNetwork:eh,TreeVertex:zr,TreeEdge:gc};"object"==typeof Zy&&Zy.version&&wi("WARNING: a `go` object on the root object is already defined.  "+("Debug"in Zy?"debug ":"")+"version: "+Zy.version+", replaced with version: "+Vw.version),V.prototype.go=Vw,mt.go=Vw,"object"==typeof Uc.exports&&(Uc.exports=typeof global<"u"?global.go:self.go)}(),typeof global<"u"?global:self;const _t=typeof global<"u"?global.go:self.go,Fx=_t.Map,Ch=_t.Size,Rx=_t.Margin,jx=_t.Spot,CS=_t.TreeModel,Dv=_t.Binding,DE=_t.Diagram,ES=_t.GraphObject,_E=_t.Panel,Gx=_t.RowColumnDefinition,TE=_t.Shape,$x=_t.TextBlock,Mh=_t.Node,aa=_t.TreeLayout}},Uc=>{Uc(Uc.s=48)}]);