"use strict";(self.webpackChunkmedieval_angular=self.webpackChunkmedieval_angular||[]).push([[179],{761:(dc,Hw,jy)=>{function Yn(r){return"function"==typeof r}function St(r){const o=r(a=>{Error.call(a),a.stack=(new Error).stack});return o.prototype=Object.create(Error.prototype),o.prototype.constructor=o,o}const Gw=St(r=>function(o){r(this),this.message=o?`${o.length} errors occurred during unsubscription:\n${o.map((a,c)=>`${c+1}) ${a.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=o});function zw(r,s){if(r){const o=r.indexOf(s);0<=o&&r.splice(o,1)}}class $s{constructor(s){this.initialTeardown=s,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let s;if(!this.closed){this.closed=!0;const{_parentage:o}=this;if(o)if(this._parentage=null,Array.isArray(o))for(const d of o)d.remove(this);else o.remove(this);const{initialTeardown:a}=this;if(Yn(a))try{a()}catch(d){s=d instanceof Gw?d.errors:[d]}const{_finalizers:c}=this;if(c){this._finalizers=null;for(const d of c)try{cM(d)}catch(y){s=s??[],y instanceof Gw?s=[...s,...y.errors]:s.push(y)}}if(s)throw new Gw(s)}}add(s){var o;if(s&&s!==this)if(this.closed)cM(s);else{if(s instanceof $s){if(s.closed||s._hasParent(this))return;s._addParent(this)}(this._finalizers=null!==(o=this._finalizers)&&void 0!==o?o:[]).push(s)}}_hasParent(s){const{_parentage:o}=this;return o===s||Array.isArray(o)&&o.includes(s)}_addParent(s){const{_parentage:o}=this;this._parentage=Array.isArray(o)?(o.push(s),o):o?[o,s]:s}_removeParent(s){const{_parentage:o}=this;o===s?this._parentage=null:Array.isArray(o)&&zw(o,s)}remove(s){const{_finalizers:o}=this;o&&zw(o,s),s instanceof $s&&s._removeParent(this)}}$s.EMPTY=(()=>{const r=new $s;return r.closed=!0,r})();const hM=$s.EMPTY;function $w(r){return r instanceof $s||r&&"closed"in r&&Yn(r.remove)&&Yn(r.add)&&Yn(r.unsubscribe)}function cM(r){Yn(r)?r():r.unsubscribe()}const Ju={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Vy={setTimeout(r,s,...o){const{delegate:a}=Vy;return a?.setTimeout?a.setTimeout(r,s,...o):setTimeout(r,s,...o)},clearTimeout(r){const{delegate:s}=Vy;return(s?.clearTimeout||clearTimeout)(r)},delegate:void 0};function Ww(r){Vy.setTimeout(()=>{const{onUnhandledError:s}=Ju;if(!s)throw r;s(r)})}function Yw(){}const j_=Kw("C",void 0,void 0);function Kw(r,s,o){return{kind:r,value:s,error:o}}let pc=null;function By(r){if(Ju.useDeprecatedSynchronousErrorHandling){const s=!pc;if(s&&(pc={errorThrown:!1,error:null}),r(),s){const{errorThrown:o,error:a}=pc;if(pc=null,o)throw a}}else r()}class Xw extends $s{constructor(s){super(),this.isStopped=!1,s?(this.destination=s,$w(s)&&s.add(this)):this.destination=z_}static create(s,o,a){return new ug(s,o,a)}next(s){this.isStopped?Jw(function B_(r){return Kw("N",r,void 0)}(s),this):this._next(s)}error(s){this.isStopped?Jw(function V_(r){return Kw("E",void 0,r)}(s),this):(this.isStopped=!0,this._error(s))}complete(){this.isStopped?Jw(j_,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(s){this.destination.next(s)}_error(s){try{this.destination.error(s)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const fM=Function.prototype.bind;function Uy(r,s){return fM.call(r,s)}class H_{constructor(s){this.partialObserver=s}next(s){const{partialObserver:o}=this;if(o.next)try{o.next(s)}catch(a){Hy(a)}}error(s){const{partialObserver:o}=this;if(o.error)try{o.error(s)}catch(a){Hy(a)}else Hy(s)}complete(){const{partialObserver:s}=this;if(s.complete)try{s.complete()}catch(o){Hy(o)}}}class ug extends Xw{constructor(s,o,a){let c;if(super(),Yn(s)||!s)c={next:s??void 0,error:o??void 0,complete:a??void 0};else{let d;this&&Ju.useDeprecatedNextContext?(d=Object.create(s),d.unsubscribe=()=>this.unsubscribe(),c={next:s.next&&Uy(s.next,d),error:s.error&&Uy(s.error,d),complete:s.complete&&Uy(s.complete,d)}):c=s}this.destination=new H_(c)}}function Hy(r){Ju.useDeprecatedSynchronousErrorHandling?function U_(r){Ju.useDeprecatedSynchronousErrorHandling&&pc&&(pc.errorThrown=!0,pc.error=r)}(r):Ww(r)}function Jw(r,s){const{onStoppedNotification:o}=Ju;o&&Vy.setTimeout(()=>o(r,s))}const z_={closed:!0,next:Yw,error:function G_(r){throw r},complete:Yw},Zw="function"==typeof Symbol&&Symbol.observable||"@@observable";function gc(r){return r}function dM(r){return 0===r.length?gc:1===r.length?r[0]:function(o){return r.reduce((a,c)=>c(a),o)}}let bi=(()=>{class r{constructor(o){o&&(this._subscribe=o)}lift(o){const a=new r;return a.source=this,a.operator=o,a}subscribe(o,a,c){const d=function Y_(r){return r&&r instanceof Xw||function W_(r){return r&&Yn(r.next)&&Yn(r.error)&&Yn(r.complete)}(r)&&$w(r)}(o)?o:new ug(o,a,c);return By(()=>{const{operator:y,source:w}=this;d.add(y?y.call(d,w):w?this._subscribe(d):this._trySubscribe(d))}),d}_trySubscribe(o){try{return this._subscribe(o)}catch(a){o.error(a)}}forEach(o,a){return new(a=pM(a))((c,d)=>{const y=new ug({next:w=>{try{o(w)}catch(C){d(C),y.unsubscribe()}},error:d,complete:c});this.subscribe(y)})}_subscribe(o){var a;return null===(a=this.source)||void 0===a?void 0:a.subscribe(o)}[Zw](){return this}pipe(...o){return dM(o)(this)}toPromise(o){return new(o=pM(o))((a,c)=>{let d;this.subscribe(y=>d=y,y=>c(y),()=>a(d))})}}return r.create=s=>new r(s),r})();function pM(r){var s;return null!==(s=r??Ju.Promise)&&void 0!==s?s:Promise}const K_=St(r=>function(){r(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let ia=(()=>{class r extends bi{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(o){const a=new gM(this,this);return a.operator=o,a}_throwIfClosed(){if(this.closed)throw new K_}next(o){By(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const a of this.currentObservers)a.next(o)}})}error(o){By(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=o;const{observers:a}=this;for(;a.length;)a.shift().error(o)}})}complete(){By(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:o}=this;for(;o.length;)o.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var o;return(null===(o=this.observers)||void 0===o?void 0:o.length)>0}_trySubscribe(o){return this._throwIfClosed(),super._trySubscribe(o)}_subscribe(o){return this._throwIfClosed(),this._checkFinalizedStatuses(o),this._innerSubscribe(o)}_innerSubscribe(o){const{hasError:a,isStopped:c,observers:d}=this;return a||c?hM:(this.currentObservers=null,d.push(o),new $s(()=>{this.currentObservers=null,zw(d,o)}))}_checkFinalizedStatuses(o){const{hasError:a,thrownError:c,isStopped:d}=this;a?o.error(c):d&&o.complete()}asObservable(){const o=new bi;return o.source=this,o}}return r.create=(s,o)=>new gM(s,o),r})();class gM extends ia{constructor(s,o){super(),this.destination=s,this.source=o}next(s){var o,a;null===(a=null===(o=this.destination)||void 0===o?void 0:o.next)||void 0===a||a.call(o,s)}error(s){var o,a;null===(a=null===(o=this.destination)||void 0===o?void 0:o.error)||void 0===a||a.call(o,s)}complete(){var s,o;null===(o=null===(s=this.destination)||void 0===s?void 0:s.complete)||void 0===o||o.call(s)}_subscribe(s){var o,a;return null!==(a=null===(o=this.source)||void 0===o?void 0:o.subscribe(s))&&void 0!==a?a:hM}}function mM(r){return Yn(r?.lift)}function _r(r){return s=>{if(mM(s))return s.lift(function(o){try{return r(o,this)}catch(a){this.error(a)}});throw new TypeError("Unable to lift unknown Observable type")}}function ar(r,s,o,a,c){return new X_(r,s,o,a,c)}class X_ extends Xw{constructor(s,o,a,c,d,y){super(s),this.onFinalize=d,this.shouldUnsubscribe=y,this._next=o?function(w){try{o(w)}catch(C){s.error(C)}}:super._next,this._error=c?function(w){try{c(w)}catch(C){s.error(C)}finally{this.unsubscribe()}}:super._error,this._complete=a?function(){try{a()}catch(w){s.error(w)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var s;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:o}=this;super.unsubscribe(),!o&&(null===(s=this.onFinalize)||void 0===s||s.call(this))}}}function ke(r,s){return _r((o,a)=>{let c=0;o.subscribe(ar(a,d=>{a.next(r.call(s,d,c++))}))})}function Zu(r){return this instanceof Zu?(this.v=r,this):new Zu(r)}function tT(r,s,o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var c,a=o.apply(r,s||[]),d=[];return c={},y("next"),y("throw"),y("return"),c[Symbol.asyncIterator]=function(){return this},c;function y(R){a[R]&&(c[R]=function(j){return new Promise(function(z,tt){d.push([R,j,z,tt])>1||w(R,j)})})}function w(R,j){try{!function C(R){R.value instanceof Zu?Promise.resolve(R.value.v).then(S,E):A(d[0][2],R)}(a[R](j))}catch(z){A(d[0][3],z)}}function S(R){w("next",R)}function E(R){w("throw",R)}function A(R,j){R(j),d.shift(),d.length&&w(d[0][0],d[0][1])}}function eT(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o,s=r[Symbol.asyncIterator];return s?s.call(r):(r=function tx(r){var s="function"==typeof Symbol&&Symbol.iterator,o=s&&r[s],a=0;if(o)return o.call(r);if(r&&"number"==typeof r.length)return{next:function(){return r&&a>=r.length&&(r=void 0),{value:r&&r[a++],done:!r}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")}(r),o={},a("next"),a("throw"),a("return"),o[Symbol.asyncIterator]=function(){return this},o);function a(d){o[d]=r[d]&&function(y){return new Promise(function(w,C){!function c(d,y,w,C){Promise.resolve(C).then(function(S){d({value:S,done:w})},y)}(w,C,(y=r[d](y)).done,y.value)})}}}const wM=r=>r&&"number"==typeof r.length&&"function"!=typeof r;function xM(r){return Yn(r?.then)}function CM(r){return Yn(r[Zw])}function MM(r){return Symbol.asyncIterator&&Yn(r?.[Symbol.asyncIterator])}function DM(r){return new TypeError(`You provided ${null!==r&&"object"==typeof r?"an invalid object":`'${r}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const SM=function iT(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function _M(r){return Yn(r?.[SM])}function TM(r){return tT(this,arguments,function*(){const o=r.getReader();try{for(;;){const{value:a,done:c}=yield Zu(o.read());if(c)return yield Zu(void 0);yield yield Zu(a)}}finally{o.releaseLock()}})}function EM(r){return Yn(r?.getReader)}function Ws(r){if(r instanceof bi)return r;if(null!=r){if(CM(r))return function rT(r){return new bi(s=>{const o=r[Zw]();if(Yn(o.subscribe))return o.subscribe(s);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(r);if(wM(r))return function oT(r){return new bi(s=>{for(let o=0;o<r.length&&!s.closed;o++)s.next(r[o]);s.complete()})}(r);if(xM(r))return function sT(r){return new bi(s=>{r.then(o=>{s.closed||(s.next(o),s.complete())},o=>s.error(o)).then(null,Ww)})}(r);if(MM(r))return _(r);if(_M(r))return function lT(r){return new bi(s=>{for(const o of r)if(s.next(o),s.closed)return;s.complete()})}(r);if(EM(r))return function IM(r){return _(TM(r))}(r)}throw DM(r)}function _(r){return new bi(s=>{(function ex(r,s){var o,a,c,d;return function vM(r,s,o,a){return new(o||(o=Promise))(function(d,y){function w(E){try{S(a.next(E))}catch(A){y(A)}}function C(E){try{S(a.throw(E))}catch(A){y(A)}}function S(E){E.done?d(E.value):function c(d){return d instanceof o?d:new o(function(y){y(d)})}(E.value).then(w,C)}S((a=a.apply(r,s||[])).next())})}(this,void 0,void 0,function*(){try{for(o=eT(r);!(a=yield o.next()).done;)if(s.next(a.value),s.closed)return}catch(y){c={error:y}}finally{try{a&&!a.done&&(d=o.return)&&(yield d.call(o))}finally{if(c)throw c.error}}s.complete()})})(r,s).catch(o=>s.error(o))})}function vl(r,s,o,a=0,c=!1){const d=s.schedule(function(){o(),c?r.add(this.schedule(null,a)):this.unsubscribe()},a);if(r.add(d),!c)return d}function Xi(r,s,o=1/0){return Yn(s)?Xi((a,c)=>ke((d,y)=>s(a,d,c,y))(Ws(r(a,c))),o):("number"==typeof s&&(o=s),_r((a,c)=>function NM(r,s,o,a,c,d,y,w){const C=[];let S=0,E=0,A=!1;const R=()=>{A&&!C.length&&!S&&s.complete()},j=tt=>S<a?z(tt):C.push(tt),z=tt=>{d&&s.next(tt),S++;let st=!1;Ws(o(tt,E++)).subscribe(ar(s,ht=>{c?.(ht),d?j(ht):s.next(ht)},()=>{st=!0},void 0,()=>{if(st)try{for(S--;C.length&&S<a;){const ht=C.shift();y?vl(s,y,()=>z(ht)):z(ht)}R()}catch(ht){s.error(ht)}}))};return r.subscribe(ar(s,j,()=>{A=!0,R()})),()=>{w?.()}}(a,c,r,o)))}function Ka(r=1/0){return Xi(gc,r)}const ra=new bi(r=>r.complete());function Mt(r){return r[r.length-1]}function ix(r){return Yn(Mt(r))?r.pop():void 0}function fd(r){return function Ht(r){return r&&Yn(r.schedule)}(Mt(r))?r.pop():void 0}function pt(r,s=0){return _r((o,a)=>{o.subscribe(ar(a,c=>vl(a,r,()=>a.next(c),s),()=>vl(a,r,()=>a.complete(),s),c=>vl(a,r,()=>a.error(c),s)))})}function Xa(r,s=0){return _r((o,a)=>{a.add(r.schedule(()=>o.subscribe(a),s))})}function It(r,s){if(!r)throw new Error("Iterable cannot be null");return new bi(o=>{vl(o,s,()=>{const a=r[Symbol.asyncIterator]();vl(o,s,()=>{a.next().then(c=>{c.done?o.complete():o.next(c.value)})},0,!0)})})}function jt(r,s){return s?function hi(r,s){if(null!=r){if(CM(r))return function Gy(r,s){return Ws(r).pipe(Xa(s),pt(s))}(r,s);if(wM(r))return function Zo(r,s){return new bi(o=>{let a=0;return s.schedule(function(){a===r.length?o.complete():(o.next(r[a++]),o.closed||this.schedule())})})}(r,s);if(xM(r))return function Ja(r,s){return Ws(r).pipe(Xa(s),pt(s))}(r,s);if(MM(r))return It(r,s);if(_M(r))return function Y(r,s){return new bi(o=>{let a;return vl(o,s,()=>{a=r[SM](),vl(o,s,()=>{let c,d;try{({value:c,done:d}=a.next())}catch(y){return void o.error(y)}d?o.complete():o.next(c)},0,!0)}),()=>Yn(a?.return)&&a.return()})}(r,s);if(EM(r))return function le(r,s){return It(TM(r),s)}(r,s)}throw DM(r)}(r,s):Ws(r)}function Za(r,s,...o){if(!0===s)return void r();if(!1===s)return;const a=new ug({next:()=>{a.unsubscribe(),r()}});return s(...o).subscribe(a)}function Ze(r){for(let s in r)if(r[s]===Ze)return s;throw Error("Could not find renamed property on target object.")}function oe(r,s){for(const o in s)s.hasOwnProperty(o)&&!r.hasOwnProperty(o)&&(r[o]=s[o])}function Nt(r){if("string"==typeof r)return r;if(Array.isArray(r))return"["+r.map(Nt).join(", ")+"]";if(null==r)return""+r;if(r.overriddenName)return`${r.overriddenName}`;if(r.name)return`${r.name}`;const s=r.toString();if(null==s)return""+s;const o=s.indexOf("\n");return-1===o?s:s.substring(0,o)}function Ys(r,s){return null==r||""===r?null===s?"":s:null==s||""===s?r:r+" "+s}const io=Ze({__forward_ref__:Ze});function vn(r){return r.__forward_ref__=vn,r.toString=function(){return Nt(this())},r}function Gt(r){return zt(r)?r():r}function zt(r){return"function"==typeof r&&r.hasOwnProperty(io)&&r.__forward_ref__===vn}class Tt extends Error{constructor(s,o){super(function Do(r,s){return`NG0${Math.abs(r)}${s?": "+s.trim():""}`}(s,o)),this.code=s}}function he(r){return"string"==typeof r?r:null==r?"":String(r)}function Qu(r,s){throw new Tt(-201,!1)}function Qt(r,s){null==r&&function qt(r,s,o,a){throw new Error(`ASSERTION ERROR: ${r}`+(null==a?"":` [Expected=> ${o} ${a} ${s} <=Actual]`))}(s,r,null,"!=")}function P(r){return{token:r.token,providedIn:r.providedIn||null,factory:r.factory,value:void 0}}function fi(r){return{providers:r.providers||[],imports:r.imports||[]}}function yc(r){return dd(r,Un)||dd(r,Cs)}function dd(r,s){return r.hasOwnProperty(s)?r[s]:null}function Wy(r){return r&&(r.hasOwnProperty(Kn)||r.hasOwnProperty(Yy))?r[Kn]:null}const Un=Ze({\u0275prov:Ze}),Kn=Ze({\u0275inj:Ze}),Cs=Ze({ngInjectableDef:Ze}),Yy=Ze({ngInjectorDef:Ze});var Jt=(()=>((Jt=Jt||{})[Jt.Default=0]="Default",Jt[Jt.Host=1]="Host",Jt[Jt.Self=2]="Self",Jt[Jt.SkipSelf=4]="SkipSelf",Jt[Jt.Optional=8]="Optional",Jt))();let dt;function ro(r){const s=dt;return dt=r,s}function cg(r,s,o){const a=yc(r);return a&&"root"==a.providedIn?void 0===a.value?a.value=a.factory():a.value:o&Jt.Optional?null:void 0!==s?s:void Qu(Nt(r))}function sa(r){return{toString:r}.toString()}var Qo=(()=>((Qo=Qo||{})[Qo.OnPush=0]="OnPush",Qo[Qo.Default=1]="Default",Qo))(),Xs=(()=>{return(r=Xs||(Xs={}))[r.Emulated=0]="Emulated",r[r.None=2]="None",r[r.ShadowDom=3]="ShadowDom",Xs;var r})();const Tn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),eh={},tn=[],wc=Ze({\u0275cmp:Ze}),xc=Ze({\u0275dir:Ze}),fg=Ze({\u0275pipe:Ze}),Xy=Ze({\u0275mod:Ze}),He=Ze({\u0275fac:Ze}),ur=Ze({__NG_ELEMENT_ID__:Ze});let lx=0;function _o(r){return sa(()=>{const o=!0===r.standalone,a={},c={type:r.type,providersResolver:null,decls:r.decls,vars:r.vars,factory:null,template:r.template||null,consts:r.consts||null,ngContentSelectors:r.ngContentSelectors,hostBindings:r.hostBindings||null,hostVars:r.hostVars||0,hostAttrs:r.hostAttrs||null,contentQueries:r.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:r.exportAs||null,onPush:r.changeDetection===Qo.OnPush,directiveDefs:null,pipeDefs:null,standalone:o,dependencies:o&&r.dependencies||null,getStandaloneInjector:null,selectors:r.selectors||tn,viewQuery:r.viewQuery||null,features:r.features||null,data:r.data||{},encapsulation:r.encapsulation||Xs.Emulated,id:"c"+lx++,styles:r.styles||tn,_:null,setInput:null,schemas:r.schemas||null,tView:null},d=r.dependencies,y=r.features;return c.inputs=nh(r.inputs,a),c.outputs=nh(r.outputs),y&&y.forEach(w=>w(c)),c.directiveDefs=d?()=>("function"==typeof d?d():d).map(dg).filter(Bt):null,c.pipeDefs=d?()=>("function"==typeof d?d():d).map(Oe).filter(Bt):null,c})}function dg(r){return it(r)||Ne(r)}function Bt(r){return null!==r}function Fi(r){return sa(()=>({type:r.type,bootstrap:r.bootstrap||tn,declarations:r.declarations||tn,imports:r.imports||tn,exports:r.exports||tn,transitiveCompileScopes:null,schemas:r.schemas||null,id:r.id||null}))}function nh(r,s){if(null==r)return eh;const o={};for(const a in r)if(r.hasOwnProperty(a)){let c=r[a],d=c;Array.isArray(c)&&(d=c[1],c=c[0]),o[c]=a,s&&(s[c]=d)}return o}const Kt=_o;function it(r){return r[wc]||null}function Ne(r){return r[xc]||null}function Oe(r){return r[fg]||null}function hr(r,s){const o=r[Xy]||null;if(!o&&!0===s)throw new Error(`Type ${Nt(r)} does not have '\u0275mod' property.`);return o}function fn(r){return Array.isArray(r)&&"object"==typeof r[1]}function ts(r){return Array.isArray(r)&&!0===r[1]}function gg(r){return 0!=(8&r.flags)}function md(r){return 2==(2&r.flags)}function Dt(r){return 1==(1&r.flags)}function Ds(r){return null!==r.template}function F(r){return 0!=(256&r[2])}function ee(r,s){return r.hasOwnProperty(He)?r[He]:null}class nn{constructor(s,o,a){this.previousValue=s,this.currentValue=o,this.firstChange=a}isFirstChange(){return this.firstChange}}function xe(){return xn}function xn(r){return r.type.prototype.ngOnChanges&&(r.setInput=gx),Pe}function Pe(){const r=mx(this),s=r?.current;if(s){const o=r.previous;if(o===eh)r.previous=s;else for(let a in s)o[a]=s[a];r.current=null,this.ngOnChanges(s)}}function gx(r,s,o,a){const c=mx(r)||function Ce(r,s){return r[kt]=s}(r,{previous:eh,current:null}),d=c.current||(c.current={}),y=c.previous,w=this.declaredInputs[o],C=y[w];d[w]=new nn(C&&C.currentValue,s,y===eh),r[a]=s}xe.ngInherit=!0;const kt="__ngSimpleChanges__";function mx(r){return r[kt]||null}function Ln(r){for(;Array.isArray(r);)r=r[0];return r}function yd(r,s){return Ln(s[r])}function Eo(r,s){return Ln(s[r.index])}function yg(r,s){return r.data[s]}function lo(r,s){const o=s[r];return fn(o)?o:o[0]}function vd(r){return 64==(64&r[2])}function ua(r,s){return null==s?null:r[s]}function nv(r){r[18]=0}function vg(r,s){r[5]+=s;let o=r,a=r[3];for(;null!==a&&(1===s&&1===o[5]||-1===s&&0===o[5]);)a[5]+=s,o=a,a=a[3]}const fe={lFrame:Tc(null),bindingsEnabled:!0};function Gn(){return fe.bindingsEnabled}function gt(){return fe.lFrame.lView}function Ge(){return fe.lFrame.tView}function ae(r){return fe.lFrame.contextLView=r,r[8]}function hn(r){return fe.lFrame.contextLView=null,r}function ji(){let r=rv();for(;null!==r&&64===r.type;)r=r.parent;return r}function rv(){return fe.lFrame.currentTNode}function Js(r,s){const o=fe.lFrame;o.currentTNode=r,o.isParent=s}function ze(){return fe.lFrame.isParent}function nu(){fe.lFrame.isParent=!1}function je(){const r=fe.lFrame;let s=r.bindingRootIndex;return-1===s&&(s=r.bindingRootIndex=r.tView.bindingStartIndex),s}function ao(){return fe.lFrame.bindingIndex++}function zr(r){const s=fe.lFrame,o=s.bindingIndex;return s.bindingIndex=s.bindingIndex+r,o}function Dl(r,s){const o=fe.lFrame;o.bindingIndex=o.bindingRootIndex=r,Bi(s)}function Bi(r){fe.lFrame.currentDirectiveIndex=r}function xg(){return fe.lFrame.currentQueryIndex}function Cg(r){fe.lFrame.currentQueryIndex=r}function Dx(r){const s=r[1];return 2===s.type?s.declTNode:1===s.type?r[6]:null}function Sx(r,s,o){if(o&Jt.SkipSelf){let c=s,d=r;for(;!(c=c.parent,null!==c||o&Jt.Host||(c=Dx(d),null===c||(d=d[15],10&c.type))););if(null===c)return!1;s=c,r=d}const a=fe.lFrame=Mg();return a.currentTNode=s,a.lView=r,!0}function iu(r){const s=Mg(),o=r[1];fe.lFrame=s,s.currentTNode=o.firstChild,s.lView=r,s.tView=o,s.contextLView=r,s.bindingIndex=o.bindingStartIndex,s.inI18n=!1}function Mg(){const r=fe.lFrame,s=null===r?null:r.child;return null===s?Tc(r):s}function Tc(r){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:r,child:null,inI18n:!1};return null!==r&&(r.child=s),s}function Ec(){const r=fe.lFrame;return fe.lFrame=r.parent,r.currentTNode=null,r.lView=null,r}const se=Ec;function sv(){const r=Ec();r.isParent=!0,r.tView=null,r.selectedIndex=-1,r.contextLView=null,r.elementDepthCount=0,r.currentDirectiveIndex=-1,r.currentNamespace=null,r.bindingRootIndex=-1,r.bindingIndex=-1,r.currentQueryIndex=0}function gr(){return fe.lFrame.selectedIndex}function Sl(r){fe.lFrame.selectedIndex=r}function zn(){const r=fe.lFrame;return yg(r.tView,r.selectedIndex)}function Ic(r,s){for(let o=s.directiveStart,a=s.directiveEnd;o<a;o++){const d=r.data[o].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:w,ngAfterViewInit:C,ngAfterViewChecked:S,ngOnDestroy:E}=d;y&&(r.contentHooks||(r.contentHooks=[])).push(-o,y),w&&((r.contentHooks||(r.contentHooks=[])).push(o,w),(r.contentCheckHooks||(r.contentCheckHooks=[])).push(o,w)),C&&(r.viewHooks||(r.viewHooks=[])).push(-o,C),S&&((r.viewHooks||(r.viewHooks=[])).push(o,S),(r.viewCheckHooks||(r.viewCheckHooks=[])).push(o,S)),null!=E&&(r.destroyHooks||(r.destroyHooks=[])).push(o,E)}}function ru(r,s,o){mr(r,s,3,o)}function Nc(r,s,o,a){(3&r[2])===o&&mr(r,s,o,a)}function ha(r,s){let o=r[2];(3&o)===s&&(o&=2047,o+=1,r[2]=o)}function mr(r,s,o,a){const d=a??-1,y=s.length-1;let w=0;for(let C=void 0!==a?65535&r[18]:0;C<y;C++)if("number"==typeof s[C+1]){if(w=s[C],null!=a&&w>=a)break}else s[C]<0&&(r[18]+=65536),(w<d||-1==d)&&(_l(r,o,s,C),r[18]=(4294901760&r[18])+C+2),C++}function _l(r,s,o,a){const c=o[a]<0,d=o[a+1],w=r[c?-o[a]:o[a]];if(c){if(r[2]>>11<r[18]>>16&&(3&r[2])===s){r[2]+=2048;try{d.call(w)}finally{}}}else try{d.call(w)}finally{}}class ou{constructor(s,o,a){this.factory=s,this.resolving=!1,this.canSeeViewProviders=o,this.injectImpl=a}}function Sd(r,s,o){let a=0;for(;a<o.length;){const c=o[a];if("number"==typeof c){if(0!==c)break;a++;const d=o[a++],y=o[a++],w=o[a++];r.setAttribute(s,y,w,d)}else{const d=c,y=o[++a];Td(d)?r.setProperty(s,d,y):r.setAttribute(s,d,y),a++}}return a}function _d(r){return 3===r||4===r||6===r}function Td(r){return 64===r.charCodeAt(0)}function lh(r,s){if(null!==s&&0!==s.length)if(null===r||0===r.length)r=s.slice();else{let o=-1;for(let a=0;a<s.length;a++){const c=s[a];"number"==typeof c?o=c:0===o||uv(r,o,c,null,-1===o||2===o?s[++a]:null)}}return r}function uv(r,s,o,a,c){let d=0,y=r.length;if(-1===s)y=-1;else for(;d<r.length;){const w=r[d++];if("number"==typeof w){if(w===s){y=-1;break}if(w>s){y=d-1;break}}}for(;d<r.length;){const w=r[d];if("number"==typeof w)break;if(w===o){if(null===a)return void(null!==c&&(r[d+1]=c));if(a===r[d+1])return void(r[d+2]=c)}d++,null!==a&&d++,null!==c&&d++}-1!==y&&(r.splice(y,0,s),d=y+1),r.splice(d++,0,o),null!==a&&r.splice(d++,0,a),null!==c&&r.splice(d++,0,c)}function hv(r){return-1!==r}function Cn(r){return 32767&r}function lu(r,s){let o=function Sg(r){return r>>16}(r),a=s;for(;o>0;)a=a[15],o--;return a}let au=!0;function Ed(r){const s=au;return au=r,s}let Px=0;const _i={};function Ac(r,s){const o=_g(r,s);if(-1!==o)return o;const a=s[1];a.firstCreatePass&&(r.injectorIndex=s.length,Id(a.data,r),Id(s,null),Id(a.blueprint,null));const c=Rn(r,s),d=r.injectorIndex;if(hv(c)){const y=Cn(c),w=lu(c,s),C=w[1].data;for(let S=0;S<8;S++)s[d+S]=w[y+S]|C[y+S]}return s[d+8]=c,d}function Id(r,s){r.push(0,0,0,0,0,0,0,0,s)}function _g(r,s){return-1===r.injectorIndex||r.parent&&r.parent.injectorIndex===r.injectorIndex||null===s[r.injectorIndex+8]?-1:r.injectorIndex}function Rn(r,s){if(r.parent&&-1!==r.parent.injectorIndex)return r.parent.injectorIndex;let o=0,a=null,c=s;for(;null!==c;){if(a=gv(c),null===a)return-1;if(o++,c=c[15],-1!==a.injectorIndex)return a.injectorIndex|o<<16}return-1}function ca(r,s,o){!function VM(r,s,o){let a;"string"==typeof o?a=o.charCodeAt(0)||0:o.hasOwnProperty(ur)&&(a=o[ur]),null==a&&(a=o[ur]=Px++);const c=255&a;s.data[r+(c>>5)]|=1<<c}(r,s,o)}function Ax(r,s,o){if(o&Jt.Optional||void 0!==r)return r;Qu()}function V(r,s,o,a){if(o&Jt.Optional&&void 0===a&&(a=null),0==(o&(Jt.Self|Jt.Host))){const c=r[9],d=ro(void 0);try{return c?c.get(s,a,o&Jt.Optional):cg(s,a,o&Jt.Optional)}finally{ro(d)}}return Ax(a,0,o)}function dv(r,s,o,a=Jt.Default,c){if(null!==r){if(1024&s[2]){const y=function UM(r,s,o,a,c){let d=r,y=s;for(;null!==d&&null!==y&&1024&y[2]&&!(256&y[2]);){const w=ah(d,y,o,a|Jt.Self,_i);if(w!==_i)return w;let C=d.parent;if(!C){const S=y[21];if(S){const E=S.get(o,_i,a);if(E!==_i)return E}C=gv(y),y=y[15]}d=C}return c}(r,s,o,a,_i);if(y!==_i)return y}const d=ah(r,s,o,a,_i);if(d!==_i)return d}return V(s,o,a,c)}function ah(r,s,o,a,c){const d=function BM(r){if("string"==typeof r)return r.charCodeAt(0)||0;const s=r.hasOwnProperty(ur)?r[ur]:void 0;return"number"==typeof s?s>=0?255&s:Ox:s}(o);if("function"==typeof d){if(!Sx(s,r,a))return a&Jt.Host?Ax(c,0,a):V(s,o,a,c);try{const y=d(a);if(null!=y||a&Jt.Optional)return y;Qu()}finally{se()}}else if("number"==typeof d){let y=null,w=_g(r,s),C=-1,S=a&Jt.Host?s[16][6]:null;for((-1===w||a&Jt.SkipSelf)&&(C=-1===w?Rn(r,s):s[w+8],-1!==C&&Pd(a,!1)?(y=s[1],w=Cn(C),s=lu(C,s)):w=-1);-1!==w;){const E=s[1];if(Oc(d,w,E.data)){const A=kx(w,s,o,y,a,S);if(A!==_i)return A}C=s[w+8],-1!==C&&Pd(a,s[1].data[w+8]===S)&&Oc(d,w,s)?(y=E,w=Cn(C),s=lu(C,s)):w=-1}}return c}function kx(r,s,o,a,c,d){const y=s[1],w=y.data[r+8],E=Nd(w,y,o,null==a?md(w)&&au:a!=y&&0!=(3&w.type),c&Jt.Host&&d===w);return null!==E?kc(s,y,E,w):_i}function Nd(r,s,o,a,c){const d=r.providerIndexes,y=s.data,w=1048575&d,C=r.directiveStart,E=d>>20,R=c?w+E:r.directiveEnd;for(let j=a?w:w+E;j<R;j++){const z=y[j];if(j<C&&o===z||j>=C&&z.type===o)return j}if(c){const j=y[C];if(j&&Ds(j)&&j.type===o)return C}return null}function kc(r,s,o,a){let c=r[o];const d=s.data;if(function Ix(r){return r instanceof ou}(c)){const y=c;y.resolving&&function Ks(r,s){const o=s?`. Dependency path: ${s.join(" > ")} > ${r}`:"";throw new Tt(-200,`Circular dependency in DI detected for ${r}${o}`)}(function W(r){return"function"==typeof r?r.name||r.toString():"object"==typeof r&&null!=r&&"function"==typeof r.type?r.type.name||r.type.toString():he(r)}(d[o]));const w=Ed(y.canSeeViewProviders);y.resolving=!0;const C=y.injectImpl?ro(y.injectImpl):null;Sx(r,a,Jt.Default);try{c=r[o]=y.factory(void 0,d,r,a),s.firstCreatePass&&o>=a.directiveStart&&function Dg(r,s,o){const{ngOnChanges:a,ngOnInit:c,ngDoCheck:d}=s.type.prototype;if(a){const y=xn(s);(o.preOrderHooks||(o.preOrderHooks=[])).push(r,y),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(r,y)}c&&(o.preOrderHooks||(o.preOrderHooks=[])).push(0-r,c),d&&((o.preOrderHooks||(o.preOrderHooks=[])).push(r,d),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(r,d))}(o,d[o],s)}finally{null!==C&&ro(C),Ed(w),y.resolving=!1,se()}}return c}function Oc(r,s,o){return!!(o[s+(r>>5)]&1<<r)}function Pd(r,s){return!(r&Jt.Self||r&Jt.Host&&s)}class uu{constructor(s,o){this._tNode=s,this._lView=o}get(s,o,a){return dv(this._tNode,this._lView,s,a,o)}}function Ox(){return new uu(ji(),gt())}function pv(r){return zt(r)?()=>{const s=pv(Gt(r));return s&&s()}:ee(r)}function gv(r){const s=r[1],o=s.type;return 2===o?s.declTNode:1===o?r[6]:null}const hu="__parameters__";function Lc(r,s,o){return sa(()=>{const a=function mv(r){return function(...o){if(r){const a=r(...o);for(const c in a)this[c]=a[c]}}}(s);function c(...d){if(this instanceof c)return a.apply(this,d),this;const y=new c(...d);return w.annotation=y,w;function w(C,S,E){const A=C.hasOwnProperty(hu)?C[hu]:Object.defineProperty(C,hu,{value:[]})[hu];for(;A.length<=E;)A.push(null);return(A[E]=A[E]||[]).push(y),C}}return o&&(c.prototype=Object.create(o.prototype)),c.prototype.ngMetadataName=r,c.annotationCls=c,c})}class Yt{constructor(s,o){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof o?this.__NG_ELEMENT_ID__=o:void 0!==o&&(this.\u0275prov=P({token:this,providedIn:o.providedIn||"root",factory:o.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function No(r,s){void 0===s&&(s=r);for(let o=0;o<r.length;o++){let a=r[o];Array.isArray(a)?(s===r&&(s=r.slice(0,o)),No(a,s)):s!==r&&s.push(a)}return s}function Qs(r,s){r.forEach(o=>Array.isArray(o)?Qs(o,s):s(o))}function Ig(r,s,o){s>=r.length?r.push(o):r.splice(s,0,o)}function rs(r,s){return s>=r.length-1?r.pop():r.splice(s,1)[0]}function fh(r,s){const o=[];for(let a=0;a<r;a++)o.push(s);return o}function Po(r,s,o){let a=dh(r,s);return a>=0?r[1|a]=o:(a=~a,function Pg(r,s,o,a){let c=r.length;if(c==s)r.push(o,a);else if(1===c)r.push(a,r[0]),r[0]=o;else{for(c--,r.push(r[c-1],r[c]);c>s;)r[c]=r[c-2],c--;r[s]=o,r[s+1]=a}}(r,a,s,o)),a}function Es(r,s){const o=dh(r,s);if(o>=0)return r[1|o]}function dh(r,s){return function xv(r,s,o){let a=0,c=r.length>>o;for(;c!==a;){const d=a+(c-a>>1),y=r[d<<o];if(s===y)return d<<o;y>s?c=d:a=d+1}return~(c<<o)}(r,s,1)}const Fc={},bd="__NG_DI_FLAG__",Fd="ngTempTokenPath",Rx=/\n/gm,Lg="__source";let Rc;function ph(r){const s=Rc;return Rc=r,s}function jx(r,s=Jt.Default){if(void 0===Rc)throw new Tt(-203,!1);return null===Rc?cg(r,void 0,s):Rc.get(r,s&Jt.Optional?null:void 0,s)}function Ut(r,s=Jt.Default){return(function th(){return dt}()||jx)(Gt(r),s)}function $e(r,s=Jt.Default){return"number"!=typeof s&&(s=0|(s.optional&&8)|(s.host&&1)|(s.self&&2)|(s.skipSelf&&4)),Ut(r,s)}function fu(r){const s=[];for(let o=0;o<r.length;o++){const a=Gt(r[o]);if(Array.isArray(a)){if(0===a.length)throw new Tt(900,!1);let c,d=Jt.Default;for(let y=0;y<a.length;y++){const w=a[y],C=Er(w);"number"==typeof C?-1===C?c=w.token:d|=C:c=w}s.push(Ut(c,d))}else s.push(Ut(a))}return s}function da(r,s){return r[bd]=s,r.prototype[bd]=s,r}function Er(r){return r[bd]}const Vc=da(Lc("Optional"),8),Bc=da(Lc("SkipSelf"),4);let gh;function ga(r){return r instanceof class Wc{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}?r.changingThisBreaksApplicationSecurity:r}const Yd=new Yt("ENVIRONMENT_INITIALIZER"),Hv=new Yt("INJECTOR",-1),xu=new Yt("INJECTOR_DEF_TYPES");class Vg{get(s,o=Fc){if(o===Fc){const a=new Error(`NullInjectorError: No provider for ${Nt(s)}!`);throw a.name="NullInjectorError",a}return o}}function Gv(...r){return{\u0275providers:Kd(0,r)}}function Kd(r,...s){const o=[],a=new Set;let c;return Qs(s,d=>{const y=d;Xd(y,o,[],a)&&(c||(c=[]),c.push(y))}),void 0!==c&&wh(c,o),o}function wh(r,s){for(let o=0;o<r.length;o++){const{providers:c}=r[o];Qs(c,d=>{s.push(d)})}}function Xd(r,s,o,a){if(!(r=Gt(r)))return!1;let c=null,d=Wy(r);const y=!d&&it(r);if(d||y){if(y&&!y.standalone)return!1;c=r}else{const C=r.ngModule;if(d=Wy(C),!d)return!1;c=C}const w=a.has(c);if(y){if(w)return!1;if(a.add(c),y.dependencies){const C="function"==typeof y.dependencies?y.dependencies():y.dependencies;for(const S of C)Xd(S,s,o,a)}}else{if(!d)return!1;{if(null!=d.imports&&!w){let S;a.add(c);try{Qs(d.imports,E=>{Xd(E,s,o,a)&&(S||(S=[]),S.push(E))})}finally{}void 0!==S&&wh(S,s)}if(!w){const S=ee(c)||(()=>new c);s.push({provide:c,useFactory:S,deps:tn},{provide:xu,useValue:c,multi:!0},{provide:Yd,useValue:()=>Ut(c),multi:!0})}const C=d.providers;null==C||w||Qs(C,E=>{s.push(E)})}}return c!==r&&void 0!==r.providers}const wr=Ze({provide:String,useValue:Ze});function Jn(r){return null!==r&&"object"==typeof r&&wr in r}function Yr(r){return"function"==typeof r}const Ui=new Yt("Set Injector scope."),xa={},Zc={};let Bg;function Be(){return void 0===Bg&&(Bg=new Vg),Bg}class rl{}class Jd extends rl{constructor(s,o,a,c){super(),this.parent=o,this.source=a,this.scopes=c,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,qc(s,y=>this.processProvider(y)),this.records.set(Hv,Ca(void 0,this)),c.has("environment")&&this.records.set(rl,Ca(void 0,this));const d=this.records.get(Ui);null!=d&&"string"==typeof d.value&&this.scopes.add(d.value),this.injectorDefTypes=new Set(this.get(xu.multi,tn,Jt.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const s of this._ngOnDestroyHooks)s.ngOnDestroy();for(const s of this._onDestroyHooks)s()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(s){this._onDestroyHooks.push(s)}runInContext(s){this.assertNotDestroyed();const o=ph(this),a=ro(void 0);try{return s()}finally{ph(o),ro(a)}}get(s,o=Fc,a=Jt.Default){this.assertNotDestroyed();const c=ph(this),d=ro(void 0);try{if(!(a&Jt.SkipSelf)){let w=this.records.get(s);if(void 0===w){const C=function zg(r){return"function"==typeof r||"object"==typeof r&&r instanceof Yt}(s)&&yc(s);w=C&&this.injectableDefInScope(C)?Ca(Qc(s),xa):null,this.records.set(s,w)}if(null!=w)return this.hydrate(s,w)}return(a&Jt.Self?Be():this.parent).get(s,o=a&Jt.Optional&&o===Fc?null:o)}catch(y){if("NullInjectorError"===y.name){if((y[Fd]=y[Fd]||[]).unshift(Nt(s)),c)throw y;return function jc(r,s,o,a){const c=r[Fd];throw s[Lg]&&c.unshift(s[Lg]),r.message=function bg(r,s,o,a=null){r=r&&"\n"===r.charAt(0)&&"\u0275"==r.charAt(1)?r.slice(2):r;let c=Nt(s);if(Array.isArray(s))c=s.map(Nt).join(" -> ");else if("object"==typeof s){let d=[];for(let y in s)if(s.hasOwnProperty(y)){let w=s[y];d.push(y+":"+("string"==typeof w?JSON.stringify(w):Nt(w)))}c=`{${d.join(", ")}}`}return`${o}${a?"("+a+")":""}[${c}]: ${r.replace(Rx,"\n  ")}`}("\n"+r.message,c,o,a),r.ngTokenPath=c,r[Fd]=null,r}(y,s,"R3InjectorError",this.source)}throw y}finally{ro(d),ph(c)}}resolveInjectorInitializers(){const s=ph(this),o=ro(void 0);try{const a=this.get(Yd.multi,tn,Jt.Self);for(const c of a)c()}finally{ph(s),ro(o)}}toString(){const s=[],o=this.records;for(const a of o.keys())s.push(Nt(a));return`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Tt(205,!1)}processProvider(s){let o=Yr(s=Gt(s))?s:Gt(s&&s.provide);const a=function zv(r){return Jn(r)?Ca(void 0,r.useValue):Ca(Zd(r),xa)}(s);if(Yr(s)||!0!==s.multi)this.records.get(o);else{let c=this.records.get(o);c||(c=Ca(void 0,xa,!0),c.factory=()=>fu(c.multi),this.records.set(o,c)),o=s,c.multi.push(s)}this.records.set(o,a)}hydrate(s,o){return o.value===xa&&(o.value=Zc,o.value=o.factory()),"object"==typeof o.value&&o.value&&function Gg(r){return null!==r&&"object"==typeof r&&"function"==typeof r.ngOnDestroy}(o.value)&&this._ngOnDestroyHooks.add(o.value),o.value}injectableDefInScope(s){if(!s.providedIn)return!1;const o=Gt(s.providedIn);return"string"==typeof o?"any"===o||this.scopes.has(o):this.injectorDefTypes.has(o)}}function Qc(r){const s=yc(r),o=null!==s?s.factory:ee(r);if(null!==o)return o;if(r instanceof Yt)throw new Tt(204,!1);if(r instanceof Function)return function Ug(r){const s=r.length;if(s>0)throw fh(s,"?"),new Tt(204,!1);const o=function ox(r){const s=r&&(r[Un]||r[Cs]);if(s){const o=function sx(r){if(r.hasOwnProperty("name"))return r.name;const s=(""+r).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(r);return console.warn(`DEPRECATED: DI is instantiating a token "${o}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${o}" class.`),s}return null}(r);return null!==o?()=>o.factory(r):()=>new r}(r);throw new Tt(204,!1)}function Zd(r,s,o){let a;if(Yr(r)){const c=Gt(r);return ee(c)||Qc(c)}if(Jn(r))a=()=>Gt(r.useValue);else if(function xh(r){return!(!r||!r.useFactory)}(r))a=()=>r.useFactory(...fu(r.deps||[]));else if(function ls(r){return!(!r||!r.useExisting)}(r))a=()=>Ut(Gt(r.useExisting));else{const c=Gt(r&&(r.useClass||r.provide));if(!function Hg(r){return!!r.deps}(r))return ee(c)||Qc(c);a=()=>new c(...fu(r.deps))}return a}function Ca(r,s,o=!1){return{factory:r,value:s,multi:o?[]:void 0}}function Qd(r){return!!r.\u0275providers}function qc(r,s){for(const o of r)Array.isArray(o)?qc(o,s):Qd(o)?qc(o.\u0275providers,s):s(o)}class $v{}class Wg{resolveComponentFactory(s){throw function qd(r){const s=Error(`No component factory found for ${Nt(r)}. Did you add it to @NgModule.entryComponents?`);return s.ngComponent=r,s}(s)}}let tf=(()=>{class r{}return r.NULL=new Wg,r})();function Wv(){return Kr(ji(),gt())}function Kr(r,s){return new Zn(Eo(r,s))}let Zn=(()=>{class r{constructor(o){this.nativeElement=o}}return r.__NG_ELEMENT_ID__=Wv,r})();function $x(r){return r instanceof Zn?r.nativeElement:r}class Yv{}let Pl=(()=>{class r{}return r.__NG_ELEMENT_ID__=()=>function Wx(){const r=gt(),o=lo(ji().index,r);return(fn(o)?o:r)[11]}(),r})(),Kv=(()=>{class r{}return r.\u0275prov=P({token:r,providedIn:"root",factory:()=>null}),r})();class Ch{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const Xv=new Ch("14.2.6"),tp={};function ef(r){return r.ngOriginalError}class Cu{constructor(){this._console=console}handleError(s){const o=this._findOriginalError(s);this._console.error("ERROR",s),o&&this._console.error("ORIGINAL ERROR",o)}_findOriginalError(s){let o=s&&ef(s);for(;o&&ef(o);)o=ef(o);return o||null}}const Al=new Map;let Qx=0;const np="__ngContext__";function Ei(r,s){fn(s)?(r[np]=s[20],function Ls(r){Al.set(r[20],r)}(s)):r[np]=s}function ol(r){return r instanceof Function?r():r}var Ir=(()=>((Ir=Ir||{})[Ir.Important=1]="Important",Ir[Ir.DashCase=2]="DashCase",Ir))();function ko(r,s){return undefined(r,s)}function uf(r){const s=r[3];return ts(s)?s[3]:s}function am(r){return n0(r[13])}function um(r){return n0(r[4])}function n0(r){for(;null!==r&&!ts(r);)r=r[4];return r}function sl(r,s,o,a,c){if(null!=a){let d,y=!1;ts(a)?d=a:fn(a)&&(y=!0,a=a[0]);const w=Ln(a);0===r&&null!==o?null==c?h0(s,o,w):Mu(s,o,w,c||null,!0):1===r&&null!==o?Mu(s,o,w,c||null,!0):2===r?function ym(r,s,o){const a=cf(r,s);a&&function f0(r,s,o,a){r.removeChild(s,o,a)}(r,a,s,o)}(s,w,y):3===r&&s.destroyNode(w),null!=d&&function h1(r,s,o,a,c){const d=o[7];d!==Ln(o)&&sl(s,r,a,d,c);for(let w=10;w<o.length;w++){const C=o[w];Oo(C[1],C,r,s,a,d)}}(s,r,d,o,c)}}function o0(r,s,o){return r.createElement(s,o)}function fm(r,s){const o=r[9],a=o.indexOf(s),c=s[3];512&s[2]&&(s[2]&=-513,vg(c,-1)),o.splice(a,1)}function l0(r,s){if(r.length<=10)return;const o=10+s,a=r[o];if(a){const c=a[17];null!==c&&c!==r&&fm(c,a),s>0&&(r[o-1][4]=a[4]);const d=rs(r,10+s);!function a1(r,s){Oo(r,s,s[11],2,null,null),s[0]=null,s[6]=null}(a[1],a);const y=d[19];null!==y&&y.detachView(d[1]),a[3]=null,a[4]=null,a[2]&=-65}return a}function sp(r,s){if(!(128&s[2])){const o=s[11];o.destroyNode&&Oo(r,s,o,3,null,null),function s0(r){let s=r[13];if(!s)return dm(r[1],r);for(;s;){let o=null;if(fn(s))o=s[13];else{const a=s[10];a&&(o=a)}if(!o){for(;s&&!s[4]&&s!==r;)fn(s)&&dm(s[1],s),s=s[3];null===s&&(s=r),fn(s)&&dm(s[1],s),o=s&&s[4]}s=o}}(s)}}function dm(r,s){if(!(128&s[2])){s[2]&=-65,s[2]|=128,function Sh(r,s){let o;if(null!=r&&null!=(o=r.destroyHooks))for(let a=0;a<o.length;a+=2){const c=s[o[a]];if(!(c instanceof ou)){const d=o[a+1];if(Array.isArray(d))for(let y=0;y<d.length;y+=2){const w=c[d[y]],C=d[y+1];try{C.call(w)}finally{}}else try{d.call(c)}finally{}}}}(r,s),function kl(r,s){const o=r.cleanup,a=s[7];let c=-1;if(null!==o)for(let d=0;d<o.length-1;d+=2)if("string"==typeof o[d]){const y=o[d+1],w="function"==typeof y?y(s):Ln(s[y]),C=a[c=o[d+2]],S=o[d+3];"boolean"==typeof S?w.removeEventListener(o[d],C,S):S>=0?a[c=S]():a[c=-S].unsubscribe(),d+=2}else{const y=a[c=o[d+1]];o[d].call(y)}if(null!==a){for(let d=c+1;d<a.length;d++)(0,a[d])();s[7]=null}}(r,s),1===s[1].type&&s[11].destroy();const o=s[17];if(null!==o&&ts(s[3])){o!==s[3]&&fm(o,s);const a=s[19];null!==a&&a.detachView(r)}!function qv(r){Al.delete(r[20])}(s)}}function a0(r,s,o){return function u0(r,s,o){let a=s;for(;null!==a&&40&a.type;)a=(s=a).parent;if(null===a)return o[0];if(2&a.flags){const c=r.data[a.directiveStart].encapsulation;if(c===Xs.None||c===Xs.Emulated)return null}return Eo(a,o)}(r,s.parent,o)}function Mu(r,s,o,a,c){r.insertBefore(s,o,a,c)}function h0(r,s,o){r.appendChild(s,o)}function c0(r,s,o,a,c){null!==a?Mu(r,s,o,a,c):h0(r,s,o)}function cf(r,s){return r.parentNode(s)}function Ol(r,s,o){return pm(r,s,o)}let pm=function lp(r,s,o){return 40&r.type?Eo(r,o):null};function ap(r,s,o,a){const c=a0(r,a,s),d=s[11],w=Ol(a.parent||s[6],a,s);if(null!=c)if(Array.isArray(o))for(let C=0;C<o.length;C++)c0(d,c,o[C],w,!1);else c0(d,c,o,w,!1)}function bs(r,s){if(null!==s){const o=s.type;if(3&o)return Eo(s,r);if(4&o)return Pt(-1,r[s.index]);if(8&o){const a=s.child;if(null!==a)return bs(r,a);{const c=r[s.index];return ts(c)?Pt(-1,c):Ln(c)}}if(32&o)return ko(s,r)()||Ln(r[s.index]);{const a=p0(r,s);return null!==a?Array.isArray(a)?a[0]:bs(uf(r[16]),a):bs(r,s.next)}}return null}function p0(r,s){return null!==s?r[16][6].projection[s.projection]:null}function Pt(r,s){const o=10+r+1;if(o<s.length){const a=s[o],c=a[1].firstChild;if(null!==c)return bs(a,c)}return s[7]}function J(r,s,o,a,c,d,y){for(;null!=o;){const w=a[o.index],C=o.type;if(y&&0===s&&(w&&Ei(Ln(w),a),o.flags|=4),64!=(64&o.flags))if(8&C)J(r,s,o.child,a,c,d,!1),sl(s,r,c,w,d);else if(32&C){const S=ko(o,a);let E;for(;E=S();)sl(s,r,c,E,d);sl(s,r,c,w,d)}else 16&C?g0(r,s,a,o,c,d):sl(s,r,c,w,d);o=y?o.projectionNext:o.next}}function Oo(r,s,o,a,c,d){J(o,a,r.firstChild,s,c,d,!1)}function g0(r,s,o,a,c,d){const y=o[16],C=y[6].projection[a.projection];if(Array.isArray(C))for(let S=0;S<C.length;S++)sl(s,r,c,C[S],d);else J(r,s,C,y[3],c,d,!0)}function m0(r,s,o){r.setAttribute(s,"style",o)}function ff(r,s,o){""===o?r.removeAttribute(s,"class"):r.setAttribute(s,"class",o)}function up(r,s,o){let a=r.length;for(;;){const c=r.indexOf(s,o);if(-1===c)return c;if(0===c||r.charCodeAt(c-1)<=32){const d=s.length;if(c+d===a||r.charCodeAt(c+d)<=32)return c}o=c+1}}const y0="ng-template";function c1(r,s,o){let a=0;for(;a<r.length;){let c=r[a++];if(o&&"class"===c){if(c=r[a],-1!==up(c.toLowerCase(),s,0))return!0}else if(1===c){for(;a<r.length&&"string"==typeof(c=r[a++]);)if(c.toLowerCase()===s)return!0;return!1}}return!1}function wm(r){return 4===r.type&&r.value!==y0}function f1(r,s,o){return s===(4!==r.type||o?r.value:y0)}function d1(r,s,o){let a=4;const c=r.attrs||[],d=function v0(r){for(let s=0;s<r.length;s++)if(_d(r[s]))return s;return r.length}(c);let y=!1;for(let w=0;w<s.length;w++){const C=s[w];if("number"!=typeof C){if(!y)if(4&a){if(a=2|1&a,""!==C&&!f1(r,C,o)||""===C&&1===s.length){if(Fs(a))return!1;y=!0}}else{const S=8&a?C:s[++w];if(8&a&&null!==r.attrs){if(!c1(r.attrs,S,o)){if(Fs(a))return!1;y=!0}continue}const A=p1(8&a?"class":C,c,wm(r),o);if(-1===A){if(Fs(a))return!1;y=!0;continue}if(""!==S){let R;R=A>d?"":c[A+1].toLowerCase();const j=8&a?R:null;if(j&&-1!==up(j,S,0)||2&a&&S!==R){if(Fs(a))return!1;y=!0}}}}else{if(!y&&!Fs(a)&&!Fs(C))return!1;if(y&&Fs(C))continue;y=!1,a=C|1&a}}return Fs(a)||y}function Fs(r){return 0==(1&r)}function p1(r,s,o,a){if(null===s)return-1;let c=0;if(a||!o){let d=!1;for(;c<s.length;){const y=s[c];if(y===r)return c;if(3===y||6===y)d=!0;else{if(1===y||2===y){let w=s[++c];for(;"string"==typeof w;)w=s[++c];continue}if(4===y)break;if(0===y){c+=4;continue}}c+=d?1:2}return-1}return function yt(r,s){let o=r.indexOf(4);if(o>-1)for(o++;o<r.length;){const a=r[o];if("number"==typeof a)return-1;if(a===s)return o;o++}return-1}(s,r)}function g1(r,s,o=!1){for(let a=0;a<s.length;a++)if(d1(r,s[a],o))return!0;return!1}function w0(r,s){t:for(let o=0;o<s.length;o++){const a=s[o];if(r.length===a.length){for(let c=0;c<r.length;c++)if(r[c]!==a[c])continue t;return!0}}return!1}function Cm(r,s){return r?":not("+s.trim()+")":s}function m1(r){let s=r[0],o=1,a=2,c="",d=!1;for(;o<r.length;){let y=r[o];if("string"==typeof y)if(2&a){const w=r[++o];c+="["+y+(w.length>0?'="'+w+'"':"")+"]"}else 8&a?c+="."+y:4&a&&(c+=" "+y);else""!==c&&!Fs(y)&&(s+=Cm(d,c),c=""),a=y,d=d||!Fs(a);o++}return""!==c&&(s+=Cm(d,c)),s}const H={};function ge(r){x0(Ge(),gt(),gr()+r,!1)}function x0(r,s,o,a){if(!a)if(3==(3&s[2])){const d=r.preOrderCheckHooks;null!==d&&ru(s,d,o)}else{const d=r.preOrderHooks;null!==d&&Nc(s,d,0,o)}Sl(o)}function Du(r,s=null,o=null,a){const c=Dm(r,s,o,a);return c.resolveInjectorInitializers(),c}function Dm(r,s=null,o=null,a,c=new Set){const d=[o||tn,Gv(r)];return a=a||("object"==typeof r?void 0:Nt(r)),new Jd(d,s||Be(),a||null,c)}let nr=(()=>{class r{static create(o,a){if(Array.isArray(o))return Du({name:""},a,o,"");{const c=o.name??"";return Du({name:c},o.parent,o.providers,c)}}}return r.THROW_IF_NOT_FOUND=Fc,r.NULL=new Vg,r.\u0275prov=P({token:r,providedIn:"any",factory:()=>Ut(Hv)}),r.__NG_ELEMENT_ID__=-1,r})();function ct(r,s=Jt.Default){const o=gt();return null===o?Ut(r,s):dv(ji(),o,Gt(r),s)}function Ih(){throw new Error("invalid")}function ho(r,s){return r<<17|s<<2}function Rs(r){return r>>17&32767}function yf(r){return 2|r}function Fl(r){return(131068&r)>>2}function Am(r,s){return-131069&r|s<<2}function Rl(r){return 1|r}function jm(r,s){const o=r.contentQueries;if(null!==o)for(let a=0;a<o.length;a+=2){const c=o[a],d=o[a+1];if(-1!==d){const y=r.data[d];Cg(c),y.contentQueries(2,s[d],d)}}}function Cf(r,s,o,a,c,d,y,w,C,S,E){const A=s.blueprint.slice();return A[0]=c,A[2]=76|a,(null!==E||r&&1024&r[2])&&(A[2]|=1024),nv(A),A[3]=A[15]=r,A[8]=o,A[10]=y||r&&r[10],A[11]=w||r&&r[11],A[12]=C||r&&r[12]||null,A[9]=S||r&&r[9]||null,A[6]=d,A[20]=function qx(){return Qx++}(),A[21]=E,A[16]=2==s.type?r[16]:A,A}function _a(r,s,o,a,c){let d=r.data[s];if(null===d)d=function Vm(r,s,o,a,c){const d=rv(),y=ze(),C=r.data[s]=function Hm(r,s,o,a,c,d){return{type:o,index:a,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:c,attrs:d,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?d:d&&d.parent,o,s,a,c);return null===r.firstChild&&(r.firstChild=C),null!==d&&(y?null==d.child&&null!==C.parent&&(d.child=C):null===d.next&&(d.next=C)),C}(r,s,o,a,c),function Ts(){return fe.lFrame.inI18n}()&&(d.flags|=64);else if(64&d.type){d.type=o,d.value=a,d.attrs=c;const y=function Vi(){const r=fe.lFrame,s=r.currentTNode;return r.isParent?s:s.parent}();d.injectorIndex=null===y?-1:y.injectorIndex}return Js(d,!0),d}function Ah(r,s,o,a){if(0===o)return-1;const c=s.length;for(let d=0;d<o;d++)s.push(a),r.blueprint.push(a),r.data.push(null);return c}function Bm(r,s,o){iu(s);try{const a=r.viewQuery;null!==a&&ti(1,a,o);const c=r.template;null!==c&&k0(r,s,c,1,o),r.firstCreatePass&&(r.firstCreatePass=!1),r.staticContentQueries&&jm(r,s),r.staticViewQueries&&ti(2,r.viewQuery,o);const d=r.components;null!==d&&function A0(r,s){for(let o=0;o<s.length;o++)Tf(r,s[o])}(s,d)}catch(a){throw r.firstCreatePass&&(r.incompleteFirstPass=!0,r.firstCreatePass=!1),a}finally{s[2]&=-5,sv()}}function Qe(r,s,o,a){const c=s[2];if(128!=(128&c)){iu(s);try{nv(s),function sh(r){return fe.lFrame.bindingIndex=r}(r.bindingStartIndex),null!==o&&k0(r,s,o,2,a);const y=3==(3&c);if(y){const S=r.preOrderCheckHooks;null!==S&&ru(s,S,null)}else{const S=r.preOrderHooks;null!==S&&Nc(s,S,0,null),ha(s,0)}if(function xr(r){for(let s=am(r);null!==s;s=um(s)){if(!s[2])continue;const o=s[9];for(let a=0;a<o.length;a++){const c=o[a],d=c[3];0==(512&c[2])&&vg(d,1),c[2]|=512}}}(s),function L1(r){for(let s=am(r);null!==s;s=um(s))for(let o=10;o<s.length;o++){const a=s[o],c=a[1];vd(a)&&Qe(c,a,c.template,a[8])}}(s),null!==r.contentQueries&&jm(r,s),y){const S=r.contentCheckHooks;null!==S&&ru(s,S)}else{const S=r.contentHooks;null!==S&&Nc(s,S,1),ha(s,1)}!function P1(r,s){const o=r.hostBindingOpCodes;if(null!==o)try{for(let a=0;a<o.length;a++){const c=o[a];if(c<0)Sl(~c);else{const d=c,y=o[++a],w=o[++a];Dl(y,d),w(2,s[d])}}}finally{Sl(-1)}}(r,s);const w=r.components;null!==w&&function A1(r,s){for(let o=0;o<s.length;o++)Sf(r,s[o])}(s,w);const C=r.viewQuery;if(null!==C&&ti(2,C,a),y){const S=r.viewCheckHooks;null!==S&&ru(s,S)}else{const S=r.viewHooks;null!==S&&Nc(s,S,2),ha(s,2)}!0===r.firstUpdatePass&&(r.firstUpdatePass=!1),s[2]&=-41,512&s[2]&&(s[2]&=-513,vg(s[3],-1))}finally{sv()}}}function k0(r,s,o,a,c){const d=gr(),y=2&a;try{Sl(-1),y&&s.length>22&&x0(r,s,22,!1),o(a,c)}finally{Sl(d)}}function O0(r,s,o){if(gg(s)){const c=s.directiveEnd;for(let d=s.directiveStart;d<c;d++){const y=r.data[d];y.contentQueries&&y.contentQueries(1,o[d],d)}}}function Um(r,s,o){!Gn()||(function bo(r,s,o,a){const c=o.directiveStart,d=o.directiveEnd;r.firstCreatePass||Ac(o,s),Ei(a,s);const y=o.initialInputs;for(let w=c;w<d;w++){const C=r.data[w],S=Ds(C);S&&fo(s,o,C);const E=kc(s,r,w,o);Ei(E,s),null!==y&&lD(0,w-c,E,C,0,y),S&&(lo(o.index,s)[8]=E)}}(r,s,o,Eo(o,s)),128==(128&o.flags)&&function Dp(r,s,o){const a=o.directiveStart,c=o.directiveEnd,d=o.index,y=function Io(){return fe.lFrame.currentDirectiveIndex}();try{Sl(d);for(let w=a;w<c;w++){const C=r.data[w],S=s[w];Bi(w),(null!==C.hostBindings||0!==C.hostVars||null!==C.hostAttrs)&&Sp(C,S)}}finally{Sl(-1),Bi(y)}}(r,s,o))}function ir(r,s,o=Eo){const a=s.localNames;if(null!==a){let c=s.index+1;for(let d=0;d<a.length;d+=2){const y=a[d+1],w=-1===y?o(s,r):r[y];r[c++]=w}}}function Mp(r){const s=r.tView;return null===s||s.incompleteFirstPass?r.tView=rt(1,null,r.template,r.decls,r.vars,r.directiveDefs,r.pipeDefs,r.viewQuery,r.schemas,r.consts):s}function rt(r,s,o,a,c,d,y,w,C,S){const E=22+a,A=E+c,R=function Mf(r,s){const o=[];for(let a=0;a<s;a++)o.push(a<r?null:H);return o}(E,A),j="function"==typeof S?S():S;return R[1]={type:r,blueprint:R,template:o,queries:null,viewQuery:w,declTNode:s,data:R.slice().fill(null,E),bindingStartIndex:E,expandoStartIndex:A,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof d?d():d,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:C,consts:j,incompleteFirstPass:!1}}function L0(r,s,o,a){const c=Ef(s);null===o?c.push(a):(c.push(o),r.firstCreatePass&&If(r).push(a,c.length-1))}function Vl(r,s,o){for(let a in r)if(r.hasOwnProperty(a)){const c=r[a];(o=null===o?{}:o).hasOwnProperty(a)?o[a].push(s,c):o[a]=[s,c]}return o}function b0(r,s){const a=s.directiveEnd,c=r.data,d=s.attrs,y=[];let w=null,C=null;for(let S=s.directiveStart;S<a;S++){const E=c[S],A=E.inputs,R=null===d||wm(s)?null:O1(A,d);y.push(R),w=Vl(A,S,w),C=Vl(E.outputs,S,C)}null!==w&&(w.hasOwnProperty("class")&&(s.flags|=16),w.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=y,s.inputs=w,s.outputs=C}function oi(r,s){const o=lo(s,r);16&o[2]||(o[2]|=32)}function Gm(r,s,o,a){let c=!1;if(Gn()){const d=function R0(r,s,o){const a=r.directiveRegistry;let c=null;if(a)for(let d=0;d<a.length;d++){const y=a[d];g1(o,y.selectors,!1)&&(c||(c=[]),ca(Ac(o,s),r,y.type),Ds(y)?(Df(r,o),c.unshift(y)):c.push(y))}return c}(r,s,o),y=null===a?null:{"":-1};if(null!==d){c=!0,ne(o,r.data.length,d.length);for(let E=0;E<d.length;E++){const A=d[E];A.providersResolver&&A.providersResolver(A)}let w=!1,C=!1,S=Ah(r,s,d.length,null);for(let E=0;E<d.length;E++){const A=d[E];o.mergedAttrs=lh(o.mergedAttrs,A.hostAttrs),V0(r,o,s,S,A),be(S,A,y),null!==A.contentQueries&&(o.flags|=8),(null!==A.hostBindings||null!==A.hostAttrs||0!==A.hostVars)&&(o.flags|=128);const R=A.type.prototype;!w&&(R.ngOnChanges||R.ngOnInit||R.ngDoCheck)&&((r.preOrderHooks||(r.preOrderHooks=[])).push(o.index),w=!0),!C&&(R.ngOnChanges||R.ngDoCheck)&&((r.preOrderCheckHooks||(r.preOrderCheckHooks=[])).push(o.index),C=!0),S++}b0(r,o)}y&&function j0(r,s,o){if(s){const a=r.localNames=[];for(let c=0;c<s.length;c+=2){const d=o[s[c+1]];if(null==d)throw new Tt(-301,!1);a.push(s[c],d)}}}(o,a,y)}return o.mergedAttrs=lh(o.mergedAttrs,o.attrs),c}function F0(r,s,o,a,c,d){const y=d.hostBindings;if(y){let w=r.hostBindingOpCodes;null===w&&(w=r.hostBindingOpCodes=[]);const C=~s.index;(function Lo(r){let s=r.length;for(;s>0;){const o=r[--s];if("number"==typeof o&&o<0)return o}return 0})(w)!=C&&w.push(C),w.push(a,c,y)}}function Sp(r,s){null!==r.hostBindings&&r.hostBindings(1,s)}function Df(r,s){s.flags|=2,(r.components||(r.components=[])).push(s.index)}function be(r,s,o){if(o){if(s.exportAs)for(let a=0;a<s.exportAs.length;a++)o[s.exportAs[a]]=r;Ds(s)&&(o[""]=r)}}function ne(r,s,o){r.flags|=1,r.directiveStart=s,r.directiveEnd=s+o,r.providerIndexes=s}function V0(r,s,o,a,c){r.data[a]=c;const d=c.factory||(c.factory=ee(c.type)),y=new ou(d,Ds(c),ct);r.blueprint[a]=y,o[a]=y,F0(r,s,0,a,Ah(r,o,c.hostVars,H),c)}function fo(r,s,o){const a=Eo(s,r),c=Mp(o),d=r[10],y=_p(r,Cf(r,c,null,o.onPush?32:16,a,s,d,d.createRenderer(a,o),null,null,null));r[s.index]=y}function de(r,s,o,a,c,d){const y=Eo(r,s);!function zm(r,s,o,a,c,d,y){if(null==d)r.removeAttribute(s,c,o);else{const w=null==y?he(d):y(d,a||"",c);r.setAttribute(s,c,w,o)}}(s[11],y,d,r.value,o,a,c)}function lD(r,s,o,a,c,d){const y=d[s];if(null!==y){const w=a.setInput;for(let C=0;C<y.length;){const S=y[C++],E=y[C++],A=y[C++];null!==w?a.setInput(o,A,S,E):o[E]=A}}}function O1(r,s){let o=null,a=0;for(;a<s.length;){const c=s[a];if(0!==c)if(5!==c){if("number"==typeof c)break;r.hasOwnProperty(c)&&(null===o&&(o=[]),o.push(c,r[c],s[a+1])),a+=2}else a+=2;else a+=4}return o}function Et(r,s,o,a){return new Array(r,!0,!1,s,null,0,a,o,null,null)}function Sf(r,s){const o=lo(s,r);if(vd(o)){const a=o[1];48&o[2]?Qe(a,o,a.template,o[8]):o[5]>0&&_f(o)}}function _f(r){for(let a=am(r);null!==a;a=um(a))for(let c=10;c<a.length;c++){const d=a[c];if(vd(d))if(512&d[2]){const y=d[1];Qe(y,d,y.template,d[8])}else d[5]>0&&_f(d)}const o=r[1].components;if(null!==o)for(let a=0;a<o.length;a++){const c=lo(o[a],r);vd(c)&&c[5]>0&&_f(c)}}function Tf(r,s){const o=lo(s,r),a=o[1];(function b1(r,s){for(let o=s.length;o<r.blueprint.length;o++)s.push(r.blueprint[o])})(a,o),Bm(a,o,o[8])}function _p(r,s){return r[13]?r[14][4]=s:r[13]=s,r[14]=s,s}function Tp(r){for(;r;){r[2]|=32;const s=uf(r);if(F(r)&&!s)return r;r=s}return null}function Ep(r,s,o,a=!0){const c=s[10];c.begin&&c.begin();try{Qe(r,s,r.template,o)}catch(y){throw a&&U0(s,y),y}finally{c.end&&c.end()}}function ti(r,s,o){Cg(0),s(r,o)}function Ef(r){return r[7]||(r[7]=[])}function If(r){return r.cleanup||(r.cleanup=[])}function U0(r,s){const o=r[9],a=o?o.get(Cu,null):null;a&&a.handleError(s)}function Wm(r,s,o,a,c){for(let d=0;d<o.length;){const y=o[d++],w=o[d++],C=s[y],S=r.data[y];null!==S.setInput?S.setInput(C,c,a,w):C[w]=c}}function Bl(r,s,o){const a=yd(s,r);!function ll(r,s,o){r.setValue(s,o)}(r[11],a,o)}function Ip(r,s,o){let a=o?r.styles:null,c=o?r.classes:null,d=0;if(null!==s)for(let y=0;y<s.length;y++){const w=s[y];"number"==typeof w?d=w:1==d?c=Ys(c,w):2==d&&(a=Ys(a,w+": "+s[++y]+";"))}o?r.styles=a:r.stylesWithoutHost=a,o?r.classes=c:r.classesWithoutHost=c}function Np(r,s,o,a,c=!1){for(;null!==o;){const d=s[o.index];if(null!==d&&a.push(Ln(d)),ts(d))for(let w=10;w<d.length;w++){const C=d[w],S=C[1].firstChild;null!==S&&Np(C[1],C,S,a)}const y=o.type;if(8&y)Np(r,s,o.child,a);else if(32&y){const w=ko(o,s);let C;for(;C=w();)a.push(C)}else if(16&y){const w=p0(s,o);if(Array.isArray(w))a.push(...w);else{const C=uf(s[16]);Np(C[1],C,w,a,!0)}}o=c?o.projectionNext:o.next}return a}class kh{constructor(s,o){this._lView=s,this._cdRefInjectingView=o,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,o=s[1];return Np(o,s,o.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(ts(s)){const o=s[8],a=o?o.indexOf(this):-1;a>-1&&(l0(s,a),rs(o,a))}this._attachedToViewContainer=!1}sp(this._lView[1],this._lView)}onDestroy(s){L0(this._lView[1],this._lView,null,s)}markForCheck(){Tp(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){Ep(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Tt(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Qn(r,s){Oo(r,s,s[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new Tt(902,!1);this._appRef=s}}class Ym extends kh{constructor(s){super(s),this._view=s}detectChanges(){const s=this._view;Ep(s[1],s,s[8],!1)}checkNoChanges(){}get context(){return null}}class Pf extends tf{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const o=it(s);return new Fo(o,this.ngModule)}}function F1(r){const s=[];for(let o in r)r.hasOwnProperty(o)&&s.push({propName:r[o],templateName:o});return s}class Ea{constructor(s,o){this.injector=s,this.parentInjector=o}get(s,o,a){const c=this.injector.get(s,tp,a);return c!==tp||o===tp?c:this.parentInjector.get(s,o,a)}}class Fo extends $v{constructor(s,o){super(),this.componentDef=s,this.ngModule=o,this.componentType=s.type,this.selector=function y1(r){return r.map(m1).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!o}get inputs(){return F1(this.componentDef.inputs)}get outputs(){return F1(this.componentDef.outputs)}create(s,o,a,c){let d=(c=c||this.ngModule)instanceof rl?c:c?.injector;d&&null!==this.componentDef.getStandaloneInjector&&(d=this.componentDef.getStandaloneInjector(d)||d);const y=d?new Ea(s,d):s,w=y.get(Yv,null);if(null===w)throw new Tt(407,!1);const C=y.get(Kv,null),S=w.createRenderer(null,this.componentDef),E=this.componentDef.selectors[0][0]||"div",A=a?function k1(r,s,o){return r.selectRootElement(s,o===Xs.ShadowDom)}(S,a,this.componentDef.encapsulation):o0(w.createRenderer(null,this.componentDef),E,function po(r){const s=r.toLowerCase();return"svg"===s?"svg":"math"===s?"math":null}(E)),R=this.componentDef.onPush?288:272,j=rt(0,null,null,1,0,null,null,null,null,null),z=Cf(null,j,null,R,null,null,w,S,C,y,null);let tt,st;iu(z);try{const ht=function Af(r,s,o,a,c,d){const y=o[1];o[22]=r;const C=_a(y,22,2,"#host",null),S=C.mergedAttrs=s.hostAttrs;null!==S&&(Ip(C,S,!0),null!==r&&(Sd(c,r,S),null!==C.classes&&ff(c,r,C.classes),null!==C.styles&&m0(c,r,C.styles)));const E=a.createRenderer(r,s),A=Cf(o,Mp(s),null,s.onPush?32:16,o[22],C,a,E,d||null,null,null);return y.firstCreatePass&&(ca(Ac(C,o),y,s.type),Df(y,C),ne(C,o.length,1)),_p(o,A),o[22]=A}(A,this.componentDef,z,w,S);if(A)if(a)Sd(S,A,["ng-version",Xv.full]);else{const{attrs:Ct,classes:at}=function mi(r){const s=[],o=[];let a=1,c=2;for(;a<r.length;){let d=r[a];if("string"==typeof d)2===c?""!==d&&s.push(d,r[++a]):8===c&&o.push(d);else{if(!Fs(c))break;c=d}a++}return{attrs:s,classes:o}}(this.componentDef.selectors[0]);Ct&&Sd(S,A,Ct),at&&at.length>0&&ff(S,A,at.join(" "))}if(st=yg(j,22),void 0!==o){const Ct=st.projection=[];for(let at=0;at<this.ngContentSelectors.length;at++){const Rt=o[at];Ct.push(null!=Rt?Array.from(Rt):null)}}tt=function Km(r,s,o,a){const c=o[1],d=function Ta(r,s,o){const a=ji();r.firstCreatePass&&(o.providersResolver&&o.providersResolver(o),V0(r,a,s,Ah(r,s,1,null),o),b0(r,a));const c=kc(s,r,a.directiveStart,a);Ei(c,s);const d=Eo(a,s);return d&&Ei(d,s),c}(c,o,s);if(r[8]=o[8]=d,null!==a)for(const w of a)w(d,s);if(s.contentQueries){const w=ji();s.contentQueries(1,d,w.directiveStart)}const y=ji();return!c.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||(Sl(y.index),F0(o[1],y,0,y.directiveStart,y.directiveEnd,s),Sp(s,d)),d}(ht,this.componentDef,z,[Xm]),Bm(j,z,null)}finally{sv()}return new Ia(this.componentType,tt,Kr(st,z),z,st)}}class Ia extends class $g{}{constructor(s,o,a,c,d){super(),this.location=a,this._rootLView=c,this._tNode=d,this.instance=o,this.hostView=this.changeDetectorRef=new Ym(c),this.componentType=s}setInput(s,o){const a=this._tNode.inputs;let c;if(null!==a&&(c=a[s])){const d=this._rootLView;Wm(d[1],d,c,s,o),oi(d,this._tNode.index)}}get injector(){return new uu(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}function Xm(){const r=ji();Ic(gt()[1],r)}function sn(r){let s=function Pp(r){return Object.getPrototypeOf(r.prototype).constructor}(r.type),o=!0;const a=[r];for(;s;){let c;if(Ds(r))c=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new Tt(903,!1);c=s.\u0275dir}if(c){if(o){a.push(c);const y=r;y.inputs=Of(r.inputs),y.declaredInputs=Of(r.declaredInputs),y.outputs=Of(r.outputs);const w=c.hostBindings;w&&Lf(r,w);const C=c.viewQuery,S=c.contentQueries;if(C&&Lh(r,C),S&&Ap(r,S),oe(r.inputs,c.inputs),oe(r.declaredInputs,c.declaredInputs),oe(r.outputs,c.outputs),Ds(c)&&c.data.animation){const E=r.data;E.animation=(E.animation||[]).concat(c.data.animation)}}const d=c.features;if(d)for(let y=0;y<d.length;y++){const w=d[y];w&&w.ngInherit&&w(r),w===sn&&(o=!1)}}s=Object.getPrototypeOf(s)}!function kf(r){let s=0,o=null;for(let a=r.length-1;a>=0;a--){const c=r[a];c.hostVars=s+=c.hostVars,c.hostAttrs=lh(c.hostAttrs,o=lh(o,c.hostAttrs))}}(a)}function Of(r){return r===eh?{}:r===tn?[]:r}function Lh(r,s){const o=r.viewQuery;r.viewQuery=o?(a,c)=>{s(a,c),o(a,c)}:s}function Ap(r,s){const o=r.contentQueries;r.contentQueries=o?(a,c,d)=>{s(a,c,d),o(a,c,d)}:s}function Lf(r,s){const o=r.hostBindings;r.hostBindings=o?(a,c)=>{s(a,c),o(a,c)}:s}let ln=null;function Tu(){if(!ln){const r=Tn.Symbol;if(r&&r.iterator)ln=r.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let o=0;o<s.length;++o){const a=s[o];"entries"!==a&&"size"!==a&&Map.prototype[a]===Map.prototype.entries&&(ln=a)}}}return ln}function Op(r){return!!Zm(r)&&(Array.isArray(r)||!(r instanceof Map)&&Tu()in r)}function Zm(r){return null!==r&&("function"==typeof r||"object"==typeof r)}function cl(r,s,o){return r[s]=o}function Nr(r,s,o){return!Object.is(r[s],o)&&(r[s]=o,!0)}function us(r,s,o,a){const c=Nr(r,s,o);return Nr(r,s+1,a)||c}function Ro(r,s,o,a){const c=gt();return Nr(c,ao(),s)&&(Ge(),de(zn(),c,r,s,o,a)),Ro}function Bn(r,s,o,a,c,d){const w=us(r,function Fn(){return fe.lFrame.bindingIndex}(),o,c);return zr(2),w?s+he(o)+a+he(c)+d:H}function wi(r,s,o,a,c,d,y,w){const C=gt(),S=Ge(),E=r+22,A=S.firstCreatePass?function B1(r,s,o,a,c,d,y,w,C){const S=s.consts,E=_a(s,r,4,y||null,ua(S,w));Gm(s,o,E,ua(S,C)),Ic(s,E);const A=E.tViews=rt(2,E,a,c,d,s.directiveRegistry,s.pipeRegistry,null,s.schemas,S);return null!==s.queries&&(s.queries.template(s,E),A.queries=s.queries.embeddedTView(E)),E}(E,S,C,s,o,a,c,d,y):S.data[E];Js(A,!1);const R=C[11].createComment("");ap(S,C,R,A),Ei(R,C),_p(C,C[E]=Et(R,C,R,A)),Dt(A)&&Um(S,C,A),null!=y&&ir(C,A,w)}function Se(r,s,o){const a=gt();return Nr(a,ao(),s)&&function co(r,s,o,a,c,d,y,w){const C=Eo(s,o);let E,S=s.inputs;!w&&null!=S&&(E=S[a])?(Wm(r,o,E,a,c),md(s)&&oi(o,s.index)):3&s.type&&(a=function yi(r){return"class"===r?"className":"for"===r?"htmlFor":"formaction"===r?"formAction":"innerHtml"===r?"innerHTML":"readonly"===r?"readOnly":"tabindex"===r?"tabIndex":r}(a),c=null!=y?y(c,s.value||"",a):c,d.setProperty(C,a,c))}(Ge(),zn(),a,r,s,a[11],o,!1),Se}function K0(r,s,o,a,c){const y=c?"class":"style";Wm(r,o,s.inputs[y],y,a)}function ye(r,s,o,a){const c=gt(),d=Ge(),y=22+r,w=c[11],C=c[y]=o0(w,s,function Md(){return fe.lFrame.currentNamespace}()),S=d.firstCreatePass?function X0(r,s,o,a,c,d,y){const w=s.consts,S=_a(s,r,2,c,ua(w,d));return Gm(s,o,S,ua(w,y)),null!==S.attrs&&Ip(S,S.attrs,!1),null!==S.mergedAttrs&&Ip(S,S.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,S),S}(y,d,c,0,s,o,a):d.data[y];Js(S,!0);const E=S.mergedAttrs;null!==E&&Sd(w,C,E);const A=S.classes;null!==A&&ff(w,C,A);const R=S.styles;return null!==R&&m0(w,C,R),64!=(64&S.flags)&&ap(d,c,C,S),0===function Cx(){return fe.lFrame.elementDepthCount}()&&Ei(C,c),function bn(){fe.lFrame.elementDepthCount++}(),Dt(S)&&(Um(d,c,S),O0(d,S,c)),null!==a&&ir(c,S),ye}function _e(){let r=ji();ze()?nu():(r=r.parent,Js(r,!1));const s=r;!function eu(){fe.lFrame.elementDepthCount--}();const o=Ge();return o.firstCreatePass&&(Ic(o,r),gg(r)&&o.queries.elementEnd(r)),null!=s.classesWithoutHost&&function Pc(r){return 0!=(16&r.flags)}(s)&&K0(o,s,gt(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function Nx(r){return 0!=(32&r.flags)}(s)&&K0(o,s,gt(),s.stylesWithoutHost,!1),_e}function Nu(r,s,o,a){return ye(r,s,o,a),_e(),Nu}function bf(r,s,o){const a=gt(),c=Ge(),d=r+22,y=c.firstCreatePass?function U1(r,s,o,a,c){const d=s.consts,y=ua(d,a),w=_a(s,r,8,"ng-container",y);return null!==y&&Ip(w,y,!0),Gm(s,o,w,ua(d,c)),null!==s.queries&&s.queries.elementStart(s,w),w}(d,c,a,s,o):c.data[d];Js(y,!0);const w=a[d]=a[11].createComment("");return ap(c,a,w,y),Ei(w,a),Dt(y)&&(Um(c,a,y),O0(c,y,a)),null!=o&&ir(a,y),bf}function fl(){let r=ji();const s=Ge();return ze()?nu():(r=r.parent,Js(r,!1)),s.firstCreatePass&&(Ic(s,r),gg(r)&&s.queries.elementEnd(r)),fl}function yo(r,s,o){return bf(r,s,o),fl(),yo}function jo(){return gt()}function Rh(r){return!!r&&"function"==typeof r.then}const Rf=function Ff(r){return!!r&&"function"==typeof r.subscribe};function Je(r,s,o,a){const c=gt(),d=Ge(),y=ji();return function iy(r,s,o,a,c,d,y,w){const C=Dt(a),E=r.firstCreatePass&&If(r),A=s[8],R=Ef(s);let j=!0;if(3&a.type||w){const st=Eo(a,s),ht=w?w(st):st,Ct=R.length,at=w?Ye=>w(Ln(Ye[a.index])):a.index;let Rt=null;if(!w&&C&&(Rt=function ny(r,s,o,a){const c=r.cleanup;if(null!=c)for(let d=0;d<c.length-1;d+=2){const y=c[d];if(y===o&&c[d+1]===a){const w=s[7],C=c[d+2];return w.length>C?w[C]:null}"string"==typeof y&&(d+=2)}return null}(r,s,c,a.index)),null!==Rt)(Rt.__ngLastListenerFn__||Rt).__ngNextListenerFn__=d,Rt.__ngLastListenerFn__=d,j=!1;else{d=oy(a,s,A,d,!1);const Ye=o.listen(ht,c,d);R.push(d,Ye),E&&E.push(c,at,Ct,Ct+1)}}else d=oy(a,s,A,d,!1);const z=a.outputs;let tt;if(j&&null!==z&&(tt=z[c])){const st=tt.length;if(st)for(let ht=0;ht<st;ht+=2){const Mi=s[tt[ht]][tt[ht+1]].subscribe(d),ag=R.length;R.push(d,Mi),E&&E.push(c,a.index,ag,-(ag+1))}}}(d,c,c[11],y,r,s,0,a),Je}function ry(r,s,o,a){try{return!1!==o(a)}catch(c){return U0(r,c),!1}}function oy(r,s,o,a,c){return function d(y){if(y===Function)return a;Tp(2&r.flags?lo(r.index,s):s);let C=ry(s,0,a,y),S=d.__ngNextListenerFn__;for(;S;)C=ry(s,0,S,y)&&C,S=S.__ngNextListenerFn__;return c&&!1===C&&(y.preventDefault(),y.returnValue=!1),C}}function Ae(r=1){return function _x(r){return(fe.lFrame.contextLView=function Tx(r,s){for(;r>0;)s=s[15],r--;return s}(r,fe.lFrame.contextLView))[8]}(r)}function J0(r,s){let o=null;const a=function xm(r){const s=r.attrs;if(null!=s){const o=s.indexOf(5);if(0==(1&o))return s[o+1]}return null}(r);for(let c=0;c<s.length;c++){const d=s[c];if("*"!==d){if(null===a?g1(r,d,!0):w0(a,d))return c}else o=c}return o}function sy(r){const s=gt()[16][6];if(!s.projection){const a=s.projection=fh(r?r.length:1,null),c=a.slice();let d=s.child;for(;null!==d;){const y=r?J0(d,r):0;null!==y&&(c[y]?c[y].projectionNext=d:a[y]=d,c[y]=d),d=d.next}}}function Vo(r,s=0,o){const a=gt(),c=Ge(),d=_a(c,22+r,16,null,o||null);null===d.projection&&(d.projection=s),nu(),64!=(64&d.flags)&&function u1(r,s,o){g0(s[11],0,s,o,a0(r,o,s),Ol(o.parent||s[6],o,s))}(c,a,d)}function jf(r,s,o,a,c){const d=r[o+1],y=null===s;let w=a?Rs(d):Fl(d),C=!1;for(;0!==w&&(!1===C||y);){const E=r[w+1];tw(r[w],s)&&(C=!0,r[w+1]=a?Rl(E):yf(E)),w=a?Rs(E):Fl(E)}C&&(r[o+1]=a?yf(d):Rl(d))}function tw(r,s){return null===r||null==s||(Array.isArray(r)?r[1]:r)===s||!(!Array.isArray(r)||"string"!=typeof s)&&dh(r,s)>=0}const zi={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function ew(r){return r.substring(zi.key,zi.keyEnd)}function $1(r){return r.substring(zi.value,zi.valueEnd)}function bp(r,s){const o=zi.textEnd;return o===s?-1:(s=zi.keyEnd=function Vh(r,s,o){for(;s<o&&r.charCodeAt(s)>32;)s++;return s}(r,zi.key=s,o),hs(r,s,o))}function ay(r,s){const o=zi.textEnd;let a=zi.key=hs(r,s,o);return o===a?-1:(a=zi.keyEnd=function hy(r,s,o){let a;for(;s<o&&(45===(a=r.charCodeAt(s))||95===a||(-33&a)>=65&&(-33&a)<=90||a>=48&&a<=57);)s++;return s}(r,a,o),a=Fp(r,a,o),a=zi.value=hs(r,a,o),a=zi.valueEnd=function W1(r,s,o){let a=-1,c=-1,d=-1,y=s,w=y;for(;y<o;){const C=r.charCodeAt(y++);if(59===C)return w;34===C||39===C?w=y=Ai(r,C,y,o):s===y-4&&85===d&&82===c&&76===a&&40===C?w=y=Ai(r,41,y,o):C>32&&(w=y),d=c,c=a,a=-33&C}return w}(r,a,o),Fp(r,a,o))}function uy(r){zi.key=0,zi.keyEnd=0,zi.value=0,zi.valueEnd=0,zi.textEnd=r.length}function hs(r,s,o){for(;s<o&&r.charCodeAt(s)<=32;)s++;return s}function Fp(r,s,o,a){return(s=hs(r,s,o))<o&&s++,s}function Ai(r,s,o,a){let c=-1,d=o;for(;d<a;){const y=r.charCodeAt(d++);if(y==s&&92!==c)return d;c=92==y&&92===c?0:y}throw new Error}function Bh(r,s){return function xi(r,s,o,a){const c=gt(),d=Ge(),y=zr(2);d.firstUpdatePass&&Bf(d,r,y,a),s!==H&&Nr(c,y,s)&&js(d,d.data[gr()],c,c[11],r,c[y+1]=function fy(r,s){return null==r||("string"==typeof s?r+=s:"object"==typeof r&&(r=Nt(ga(r)))),r}(s,o),a,y)}(r,s,null,!0),Bh}function an(r){Ar(ds,Vf,r,!1)}function Vf(r,s){for(let o=function nw(r){return uy(r),ay(r,hs(r,0,zi.textEnd))}(s);o>=0;o=ay(s,o))ds(r,ew(s),$1(s))}function Pr(r){Ar(Po,fs,r,!0)}function fs(r,s){for(let o=function Oa(r){return uy(r),bp(r,hs(r,0,zi.textEnd))}(s);o>=0;o=bp(s,o))Po(r,ew(s),!0)}function Ar(r,s,o,a){const c=Ge(),d=zr(2);c.firstUpdatePass&&Bf(c,null,d,a);const y=gt();if(o!==H&&Nr(y,d,o)){const w=c.data[gr()];if(dy(w,a)&&!Uh(c,d)){let C=a?w.classesWithoutHost:w.stylesWithoutHost;null!==C&&(o=Ys(C,o||"")),K0(c,w,y,o,a)}else!function zl(r,s,o,a,c,d,y,w){c===H&&(c=tn);let C=0,S=0,E=0<c.length?c[0]:null,A=0<d.length?d[0]:null;for(;null!==E||null!==A;){const R=C<c.length?c[C+1]:void 0,j=S<d.length?d[S+1]:void 0;let tt,z=null;E===A?(C+=2,S+=2,R!==j&&(z=A,tt=j)):null===A||null!==E&&E<A?(C+=2,z=E):(S+=2,z=A,tt=j),null!==z&&js(r,s,o,a,z,tt,y,w),E=C<c.length?c[C]:null,A=S<d.length?d[S]:null}}(c,w,y,y[11],y[d+1],y[d+1]=function Gl(r,s,o){if(null==o||""===o)return tn;const a=[],c=ga(o);if(Array.isArray(c))for(let d=0;d<c.length;d++)r(a,c[d],!0);else if("object"==typeof c)for(const d in c)c.hasOwnProperty(d)&&r(a,d,c[d]);else"string"==typeof c&&s(a,c);return a}(r,s,o),a,d)}}function Uh(r,s){return s>=r.expandoStartIndex}function Bf(r,s,o,a){const c=r.data;if(null===c[o+1]){const d=c[gr()],y=Uh(r,o);dy(d,a)&&null===s&&!y&&(s=!1),s=function Rp(r,s,o,a){const c=function ov(r){const s=fe.lFrame.currentDirectiveIndex;return-1===s?null:r[s]}(r);let d=a?s.residualClasses:s.residualStyles;if(null===c)0===(a?s.classBindings:s.styleBindings)&&(o=Qr(o=Bo(null,r,s,o,a),s.attrs,a),d=null);else{const y=s.directiveStylingLast;if(-1===y||r[y]!==c)if(o=Bo(c,r,s,o,a),null===d){let C=function jp(r,s,o){const a=o?s.classBindings:s.styleBindings;if(0!==Fl(a))return r[Rs(a)]}(r,s,a);void 0!==C&&Array.isArray(C)&&(C=Bo(null,r,s,C[1],a),C=Qr(C,s.attrs,a),function Uf(r,s,o,a){r[Rs(o?s.classBindings:s.styleBindings)]=a}(r,s,a,C))}else d=function Hh(r,s,o){let a;const c=s.directiveEnd;for(let d=1+s.directiveStylingLast;d<c;d++)a=Qr(a,r[d].hostAttrs,o);return Qr(a,s.attrs,o)}(r,s,a)}return void 0!==d&&(a?s.residualClasses=d:s.residualStyles=d),o}(c,d,s,a),function z1(r,s,o,a,c,d){let y=d?s.classBindings:s.styleBindings,w=Rs(y),C=Fl(y);r[a]=o;let E,S=!1;if(Array.isArray(o)){const A=o;E=A[1],(null===E||dh(A,E)>0)&&(S=!0)}else E=o;if(c)if(0!==C){const R=Rs(r[w+1]);r[a+1]=ho(R,w),0!==R&&(r[R+1]=Am(r[R+1],a)),r[w+1]=function Pm(r,s){return 131071&r|s<<17}(r[w+1],a)}else r[a+1]=ho(w,0),0!==w&&(r[w+1]=Am(r[w+1],a)),w=a;else r[a+1]=ho(C,0),0===w?w=a:r[C+1]=Am(r[C+1],a),C=a;S&&(r[a+1]=yf(r[a+1])),jf(r,E,a,!0),jf(r,E,a,!1),function ka(r,s,o,a,c){const d=c?r.residualClasses:r.residualStyles;null!=d&&"string"==typeof s&&dh(d,s)>=0&&(o[a+1]=Rl(o[a+1]))}(s,E,r,a,d),y=ho(w,C),d?s.classBindings=y:s.styleBindings=y}(c,d,s,o,y,a)}}function Bo(r,s,o,a,c){let d=null;const y=o.directiveEnd;let w=o.directiveStylingLast;for(-1===w?w=o.directiveStart:w++;w<y&&(d=s[w],a=Qr(a,d.hostAttrs,c),d!==r);)w++;return null!==r&&(o.directiveStylingLast=w),a}function Qr(r,s,o){const a=o?1:2;let c=-1;if(null!==s)for(let d=0;d<s.length;d++){const y=s[d];"number"==typeof y?c=y:c===a&&(Array.isArray(r)||(r=void 0===r?[]:["",r]),Po(r,y,!!o||s[++d]))}return void 0===r?null:r}function ds(r,s,o){Po(r,s,ga(o))}function js(r,s,o,a,c,d,y,w){if(!(3&s.type))return;const C=r.data,S=C[w+1];Au(function ul(r){return 1==(1&r)}(S)?Vp(C,s,o,c,Fl(S),y):void 0)||(Au(d)||function as(r){return 2==(2&r)}(S)&&(d=Vp(C,null,o,c,w,y)),function er(r,s,o,a,c){if(s)c?r.addClass(o,a):r.removeClass(o,a);else{let d=-1===a.indexOf("-")?void 0:Ir.DashCase;null==c?r.removeStyle(o,a,d):("string"==typeof c&&c.endsWith("!important")&&(c=c.slice(0,-10),d|=Ir.Important),r.setStyle(o,a,c,d))}}(a,y,yd(gr(),o),c,d))}function Vp(r,s,o,a,c,d){const y=null===s;let w;for(;c>0;){const C=r[c],S=Array.isArray(C),E=S?C[1]:C,A=null===E;let R=o[c+1];R===H&&(R=A?tn:void 0);let j=A?Es(R,a):E===a?R:void 0;if(S&&!Au(j)&&(j=Es(C,a)),Au(j)&&(w=j,y))return w;const z=r[c+1];c=y?Rs(z):Fl(z)}if(null!==s){let C=d?s.residualClasses:s.residualStyles;null!=C&&(w=Es(C,a))}return w}function Au(r){return void 0!==r}function dy(r,s){return 0!=(r.flags&(s?16:32))}function rr(r,s=""){const o=gt(),a=Ge(),c=r+22,d=a.firstCreatePass?_a(a,c,1,s,null):a.data[c],y=o[c]=function r0(r,s){return r.createText(s)}(o[11],s);ap(a,o,y,d),Js(d,!1)}function $l(r,s,o){const a=gt(),c=function Eu(r,s,o,a){return Nr(r,ao(),o)?s+he(o)+a:H}(a,r,s,o);return c!==H&&Bl(a,gr(),c),$l}function Bp(r,s,o,a,c){const d=gt(),y=Bn(d,r,s,o,a,c);return y!==H&&Bl(d,gr(),y),Bp}const li="en-US";let zh=li;function Wp(r,s,o,a,c){if(r=Gt(r),Array.isArray(r))for(let d=0;d<r.length;d++)Wp(r[d],s,o,a,c);else{const d=Ge(),y=gt();let w=Yr(r)?r:Gt(r.provide),C=Zd(r);const S=ji(),E=1048575&S.providerIndexes,A=S.directiveStart,R=S.providerIndexes>>20;if(Yr(r)||!r.multi){const j=new ou(C,c,ct),z=Ua(w,s,c?E:E+R,A);-1===z?(ca(Ac(S,y),d,w),Xf(d,r,s.length),s.push(w),S.directiveStart++,S.directiveEnd++,c&&(S.providerIndexes+=1048576),o.push(j),y.push(j)):(o[z]=j,y[z]=j)}else{const j=Ua(w,s,E+R,A),z=Ua(w,s,E,E+R),tt=j>=0&&o[j],st=z>=0&&o[z];if(c&&!st||!c&&!tt){ca(Ac(S,y),d,w);const ht=function Yp(r,s,o,a,c){const d=new ou(r,o,ct);return d.multi=[],d.index=s,d.componentProviders=0,Gu(d,c,a&&!o),d}(c?Y1:Dy,o.length,c,a,C);!c&&st&&(o[z].providerFactory=ht),Xf(d,r,s.length,0),s.push(w),S.directiveStart++,S.directiveEnd++,c&&(S.providerIndexes+=1048576),o.push(ht),y.push(ht)}else Xf(d,r,j>-1?j:z,Gu(o[c?z:j],C,!c&&a));!c&&a&&st&&o[z].componentProviders++}}}function Xf(r,s,o,a){const c=Yr(s),d=function il(r){return!!r.useClass}(s);if(c||d){const C=(d?Gt(s.useClass):s).prototype.ngOnDestroy;if(C){const S=r.destroyHooks||(r.destroyHooks=[]);if(!c&&s.multi){const E=S.indexOf(o);-1===E?S.push(o,[a,C]):S[E+1].push(a,C)}else S.push(o,C)}}}function Gu(r,s,o){return o&&r.componentProviders++,r.multi.push(s)-1}function Ua(r,s,o,a){for(let c=o;c<a;c++)if(s[c]===r)return c;return-1}function Dy(r,s,o,a){return Qh(this.multi,[])}function Y1(r,s,o,a){const c=this.multi;let d;if(this.providerFactory){const y=this.providerFactory.componentProviders,w=kc(o,o[1],this.providerFactory.index,a);d=w.slice(0,y),Qh(c,d);for(let C=y;C<w.length;C++)d.push(w[C])}else d=[],Qh(c,d);return d}function Qh(r,s){for(let o=0;o<r.length;o++)s.push((0,r[o])());return s}function Dn(r,s=[]){return o=>{o.providersResolver=(a,c)=>function $p(r,s,o){const a=Ge();if(a.firstCreatePass){const c=Ds(r);Wp(o,a.data,a.blueprint,c,!0),Wp(s,a.data,a.blueprint,c,!1)}}(a,c?c(r):r,s)}}class qh{}class Kp{}class Xp extends qh{constructor(s,o){super(),this._parent=o,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Pf(this);const a=hr(s);this._bootstrapComponents=ol(a.bootstrap),this._r3Injector=Dm(s,o,[{provide:qh,useValue:this},{provide:tf,useValue:this.componentFactoryResolver}],Nt(s),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(s)}get injector(){return this._r3Injector}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(o=>o()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class Jp extends Kp{constructor(s){super(),this.moduleType=s}create(s){return new Xp(this.moduleType,s)}}class Zp extends qh{constructor(s,o,a){super(),this.componentFactoryResolver=new Pf(this),this.instance=null;const c=new Jd([...s,{provide:qh,useValue:this},{provide:tf,useValue:this.componentFactoryResolver}],o||Be(),a,new Set(["environment"]));this.injector=c,c.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(s){this.injector.onDestroy(s)}}function Jf(r,s,o=null){return new Zp(r,s,o).injector}let ow=(()=>{class r{constructor(o){this._injector=o,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(o){if(!o.standalone)return null;if(!this.cachedInjectors.has(o.id)){const a=Kd(0,o.type),c=a.length>0?Jf([a],this._injector,`Standalone[${o.type.name}]`):null;this.cachedInjectors.set(o.id,c)}return this.cachedInjectors.get(o.id)}ngOnDestroy(){try{for(const o of this.cachedInjectors.values())null!==o&&o.destroy()}finally{this.cachedInjectors.clear()}}}return r.\u0275prov=P({token:r,providedIn:"environment",factory:()=>new r(Ut(rl))}),r})();function vT(r){r.getStandaloneInjector=s=>s.get(ow).getOrCreateStandaloneInjector(r)}function xo(r,s,o){const a=je()+r,c=gt();return c[a]===H?cl(c,a,o?s.call(o):s()):function Lp(r,s){return r[s]}(c,a)}function _T(r,s,o,a,c,d){return function IT(r,s,o,a,c,d,y,w){const C=s+o;return function Ul(r,s,o,a,c){const d=us(r,s,o,a);return Nr(r,s+2,c)||d}(r,C,c,d,y)?cl(r,C+3,w?a.call(w,c,d,y):a(c,d,y)):function sw(r,s){const o=r[s];return o===H?void 0:o}(r,C+3)}(gt(),je(),r,s,o,a,c,d)}function fD(r){return s=>{setTimeout(r,void 0,s)}}const Wn=class hk extends ia{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,o,a){let c=s,d=o||(()=>null),y=a;if(s&&"object"==typeof s){const C=s;c=C.next?.bind(C),d=C.error?.bind(C),y=C.complete?.bind(C)}this.__isAsync&&(d=fD(d),c&&(c=fD(c)),y&&(y=fD(y)));const w=super.subscribe({next:c,error:d,complete:y});return s instanceof $s&&s.add(w),w}};function ck(){return this._results[Tu()]()}class dD{constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const o=Tu(),a=dD.prototype;a[o]||(a[o]=ck)}get changes(){return this._changes||(this._changes=new Wn)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,o){return this._results.reduce(s,o)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,o){const a=this;a.dirty=!1;const c=No(s);(this._changesDetected=!function kd(r,s,o){if(r.length!==s.length)return!1;for(let a=0;a<r.length;a++){let c=r[a],d=s[a];if(o&&(c=o(c),d=o(d)),d!==c)return!1}return!0}(a._results,c,o))&&(a._results=c,a.length=c.length,a.last=c[this.length-1],a.first=c[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let zu=(()=>{class r{}return r.__NG_ELEMENT_ID__=pk,r})();const fk=zu,dk=class extends fk{constructor(s,o,a){super(),this._declarationLView=s,this._declarationTContainer=o,this.elementRef=a}createEmbeddedView(s,o){const a=this._declarationTContainer.tViews,c=Cf(this._declarationLView,a,s,16,null,a.declTNode,null,null,null,null,o||null);c[17]=this._declarationLView[this._declarationTContainer.index];const y=this._declarationLView[19];return null!==y&&(c[19]=y.createEmbeddedView(a)),Bm(a,c,s),new kh(c)}};function pk(){return K1(ji(),gt())}function K1(r,s){return 4&r.type?new dk(s,r,Kr(r,s)):null}let Ha=(()=>{class r{}return r.__NG_ELEMENT_ID__=gk,r})();function gk(){return OT(ji(),gt())}const mk=Ha,AT=class extends mk{constructor(s,o,a){super(),this._lContainer=s,this._hostTNode=o,this._hostLView=a}get element(){return Kr(this._hostTNode,this._hostLView)}get injector(){return new uu(this._hostTNode,this._hostLView)}get parentInjector(){const s=Rn(this._hostTNode,this._hostLView);if(hv(s)){const o=lu(s,this._hostLView),a=Cn(s);return new uu(o[1].data[a+8],o)}return new uu(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const o=kT(this._lContainer);return null!==o&&o[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,o,a){let c,d;"number"==typeof a?c=a:null!=a&&(c=a.index,d=a.injector);const y=s.createEmbeddedView(o||{},d);return this.insert(y,c),y}createComponent(s,o,a,c,d){const y=s&&!function is(r){return"function"==typeof r}(s);let w;if(y)w=o;else{const A=o||{};w=A.index,a=A.injector,c=A.projectableNodes,d=A.environmentInjector||A.ngModuleRef}const C=y?s:new Fo(it(s)),S=a||this.parentInjector;if(!d&&null==C.ngModule){const R=(y?S:this.parentInjector).get(rl,null);R&&(d=R)}const E=C.create(S,c,void 0,d);return this.insert(E.hostView,w),E}insert(s,o){const a=s._lView,c=a[1];if(function wx(r){return ts(r[3])}(a)){const E=this.indexOf(s);if(-1!==E)this.detach(E);else{const A=a[3],R=new AT(A,A[6],A[3]);R.detach(R.indexOf(s))}}const d=this._adjustIndex(o),y=this._lContainer;!function lt(r,s,o,a){const c=10+a,d=o.length;a>0&&(o[c-1][4]=s),a<d-10?(s[4]=o[c],Ig(o,10+a,s)):(o.push(s),s[4]=null),s[3]=o;const y=s[17];null!==y&&o!==y&&function Ii(r,s){const o=r[9];s[16]!==s[3][3][16]&&(r[2]=!0),null===o?r[9]=[s]:o.push(s)}(y,s);const w=s[19];null!==w&&w.insertView(r),s[2]|=64}(c,a,y,d);const w=Pt(d,y),C=a[11],S=cf(C,y[7]);return null!==S&&function cm(r,s,o,a,c,d){a[0]=c,a[6]=s,Oo(r,a,o,1,c,d)}(c,y[6],C,a,S,w),s.attachToViewContainerRef(),Ig(pD(y),d,s),s}move(s,o){return this.insert(s,o)}indexOf(s){const o=kT(this._lContainer);return null!==o?o.indexOf(s):-1}remove(s){const o=this._adjustIndex(s,-1),a=l0(this._lContainer,o);a&&(rs(pD(this._lContainer),o),sp(a[1],a))}detach(s){const o=this._adjustIndex(s,-1),a=l0(this._lContainer,o);return a&&null!=rs(pD(this._lContainer),o)?new kh(a):null}_adjustIndex(s,o=0){return s??this.length+o}};function kT(r){return r[8]}function pD(r){return r[8]||(r[8]=[])}function OT(r,s){let o;const a=s[r.index];if(ts(a))o=a;else{let c;if(8&r.type)c=Ln(a);else{const d=s[11];c=d.createComment("");const y=Eo(r,s);Mu(d,cf(d,y),c,function d0(r,s){return r.nextSibling(s)}(d,y),!1)}s[r.index]=o=Et(a,s,c,r),_p(s,o)}return new AT(o,r,s)}class gD{constructor(s){this.queryList=s,this.matches=null}clone(){return new gD(this.queryList)}setDirty(){this.queryList.setDirty()}}class mD{constructor(s=[]){this.queries=s}createEmbeddedView(s){const o=s.queries;if(null!==o){const a=null!==s.contentQueries?s.contentQueries[0]:o.length,c=[];for(let d=0;d<a;d++){const y=o.getByIndex(d);c.push(this.queries[y.indexInDeclarationView].clone())}return new mD(c)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let o=0;o<this.queries.length;o++)null!==jT(s,o).matches&&this.queries[o].setDirty()}}class LT{constructor(s,o,a=null){this.predicate=s,this.flags=o,this.read=a}}class yD{constructor(s=[]){this.queries=s}elementStart(s,o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementStart(s,o)}elementEnd(s){for(let o=0;o<this.queries.length;o++)this.queries[o].elementEnd(s)}embeddedTView(s){let o=null;for(let a=0;a<this.length;a++){const c=null!==o?o.length:0,d=this.getByIndex(a).embeddedTView(s,c);d&&(d.indexInDeclarationView=a,null!==o?o.push(d):o=[d])}return null!==o?new yD(o):null}template(s,o){for(let a=0;a<this.queries.length;a++)this.queries[a].template(s,o)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class vD{constructor(s,o=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=o}elementStart(s,o){this.isApplyingToNode(o)&&this.matchTNode(s,o)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,o){this.elementStart(s,o)}embeddedTView(s,o){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,o),new vD(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const o=this._declarationNodeIndex;let a=s.parent;for(;null!==a&&8&a.type&&a.index!==o;)a=a.parent;return o===(null!==a?a.index:-1)}return this._appliesToNextNode}matchTNode(s,o){const a=this.metadata.predicate;if(Array.isArray(a))for(let c=0;c<a.length;c++){const d=a[c];this.matchTNodeWithReadOption(s,o,wk(o,d)),this.matchTNodeWithReadOption(s,o,Nd(o,s,d,!1,!1))}else a===zu?4&o.type&&this.matchTNodeWithReadOption(s,o,-1):this.matchTNodeWithReadOption(s,o,Nd(o,s,a,!1,!1))}matchTNodeWithReadOption(s,o,a){if(null!==a){const c=this.metadata.read;if(null!==c)if(c===Zn||c===Ha||c===zu&&4&o.type)this.addMatch(o.index,-2);else{const d=Nd(o,s,c,!1,!1);null!==d&&this.addMatch(o.index,d)}else this.addMatch(o.index,a)}}addMatch(s,o){null===this.matches?this.matches=[s,o]:this.matches.push(s,o)}}function wk(r,s){const o=r.localNames;if(null!==o)for(let a=0;a<o.length;a+=2)if(o[a]===s)return o[a+1];return null}function Ck(r,s,o,a){return-1===o?function xk(r,s){return 11&r.type?Kr(r,s):4&r.type?K1(r,s):null}(s,r):-2===o?function Mk(r,s,o){return o===Zn?Kr(s,r):o===zu?K1(s,r):o===Ha?OT(s,r):void 0}(r,s,a):kc(r,r[1],o,s)}function bT(r,s,o,a){const c=s[19].queries[a];if(null===c.matches){const d=r.data,y=o.matches,w=[];for(let C=0;C<y.length;C+=2){const S=y[C];w.push(S<0?null:Ck(s,d[S],y[C+1],o.metadata.read))}c.matches=w}return c.matches}function wD(r,s,o,a){const c=r.queries.getByIndex(o),d=c.matches;if(null!==d){const y=bT(r,s,c,o);for(let w=0;w<d.length;w+=2){const C=d[w];if(C>0)a.push(y[w/2]);else{const S=d[w+1],E=s[-C];for(let A=10;A<E.length;A++){const R=E[A];R[17]===R[3]&&wD(R[1],R,S,a)}if(null!==E[9]){const A=E[9];for(let R=0;R<A.length;R++){const j=A[R];wD(j[1],j,S,a)}}}}}return a}function tc(r){const s=gt(),o=Ge(),a=xg();Cg(a+1);const c=jT(o,a);if(r.dirty&&function ev(r){return 4==(4&r[2])}(s)===(2==(2&c.metadata.flags))){if(null===c.matches)r.reset([]);else{const d=c.crossesNgTemplate?wD(o,s,a,[]):bT(o,s,c,a);r.reset(d,$x),r.notifyOnChanges()}return!0}return!1}function X1(r,s,o){const a=Ge();a.firstCreatePass&&(RT(a,new LT(r,s,o),-1),2==(2&s)&&(a.staticViewQueries=!0)),FT(a,gt(),s)}function _y(r,s,o,a){const c=Ge();if(c.firstCreatePass){const d=ji();RT(c,new LT(s,o,a),d.index),function Sk(r,s){const o=r.contentQueries||(r.contentQueries=[]);s!==(o.length?o[o.length-1]:-1)&&o.push(r.queries.length-1,s)}(c,r),2==(2&o)&&(c.staticContentQueries=!0)}FT(c,gt(),o)}function ec(){return function Dk(r,s){return r[19].queries[s].queryList}(gt(),xg())}function FT(r,s,o){const a=new dD(4==(4&o));L0(r,s,a,a.destroy),null===s[19]&&(s[19]=new mD),s[19].queries.push(new gD(a))}function RT(r,s,o){null===r.queries&&(r.queries=new yD),r.queries.track(new vD(s,o))}function jT(r,s){return r.queries.getByIndex(s)}function Z1(...r){}const Q1=new Yt("Application Initializer");let q1=(()=>{class r{constructor(o){this.appInits=o,this.resolve=Z1,this.reject=Z1,this.initialized=!1,this.done=!1,this.donePromise=new Promise((a,c)=>{this.resolve=a,this.reject=c})}runInitializers(){if(this.initialized)return;const o=[],a=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let c=0;c<this.appInits.length;c++){const d=this.appInits[c]();if(Rh(d))o.push(d);else if(Rf(d)){const y=new Promise((w,C)=>{d.subscribe({complete:w,error:C})});o.push(y)}}Promise.all(o).then(()=>{a()}).catch(c=>{this.reject(c)}),0===o.length&&a(),this.initialized=!0}}return r.\u0275fac=function(o){return new(o||r)(Ut(Q1,8))},r.\u0275prov=P({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const uw=new Yt("AppId",{providedIn:"root",factory:function iE(){return`${SD()}${SD()}${SD()}`}});function SD(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const rE=new Yt("Platform Initializer"),_D=new Yt("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),oE=new Yt("appBootstrapListener");let $k=(()=>{class r{log(o){console.log(o)}warn(o){console.warn(o)}}return r.\u0275fac=function(o){return new(o||r)},r.\u0275prov=P({token:r,factory:r.\u0275fac,providedIn:"platform"}),r})();const nc=new Yt("LocaleId",{providedIn:"root",factory:()=>$e(nc,Jt.Optional|Jt.SkipSelf)||function Wk(){return typeof $localize<"u"&&$localize.locale||li}()});class Kk{constructor(s,o){this.ngModuleFactory=s,this.componentFactories=o}}let TD=(()=>{class r{compileModuleSync(o){return new Jp(o)}compileModuleAsync(o){return Promise.resolve(this.compileModuleSync(o))}compileModuleAndAllComponentsSync(o){const a=this.compileModuleSync(o),d=ol(hr(o).declarations).reduce((y,w)=>{const C=it(w);return C&&y.push(new Fo(C)),y},[]);return new Kk(a,d)}compileModuleAndAllComponentsAsync(o){return Promise.resolve(this.compileModuleAndAllComponentsSync(o))}clearCache(){}clearCacheFor(o){}getModuleId(o){}}return r.\u0275fac=function(o){return new(o||r)},r.\u0275prov=P({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const Zk=(()=>Promise.resolve(0))();function ED(r){typeof Zone>"u"?Zk.then(()=>{r&&r.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",r)}class br{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:o=!1,shouldCoalesceRunChangeDetection:a=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Wn(!1),this.onMicrotaskEmpty=new Wn(!1),this.onStable=new Wn(!1),this.onError=new Wn(!1),typeof Zone>"u")throw new Tt(908,!1);Zone.assertZonePatched();const c=this;if(c._nesting=0,c._outer=c._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const d=Zone.AsyncStackTaggingZoneSpec;c._inner=c._inner.fork(new d("Angular"))}Zone.TaskTrackingZoneSpec&&(c._inner=c._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(c._inner=c._inner.fork(Zone.longStackTraceZoneSpec)),c.shouldCoalesceEventChangeDetection=!a&&o,c.shouldCoalesceRunChangeDetection=a,c.lastRequestAnimationFrameId=-1,c.nativeRequestAnimationFrame=function Qk(){let r=Tn.requestAnimationFrame,s=Tn.cancelAnimationFrame;if(typeof Zone<"u"&&r&&s){const o=r[Zone.__symbol__("OriginalDelegate")];o&&(r=o);const a=s[Zone.__symbol__("OriginalDelegate")];a&&(s=a)}return{nativeRequestAnimationFrame:r,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function eO(r){const s=()=>{!function tO(r){r.isCheckStableRunning||-1!==r.lastRequestAnimationFrameId||(r.lastRequestAnimationFrameId=r.nativeRequestAnimationFrame.call(Tn,()=>{r.fakeTopEventTask||(r.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{r.lastRequestAnimationFrameId=-1,ND(r),r.isCheckStableRunning=!0,ID(r),r.isCheckStableRunning=!1},void 0,()=>{},()=>{})),r.fakeTopEventTask.invoke()}),ND(r))}(r)};r._inner=r._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(o,a,c,d,y,w)=>{try{return aE(r),o.invokeTask(c,d,y,w)}finally{(r.shouldCoalesceEventChangeDetection&&"eventTask"===d.type||r.shouldCoalesceRunChangeDetection)&&s(),uE(r)}},onInvoke:(o,a,c,d,y,w,C)=>{try{return aE(r),o.invoke(c,d,y,w,C)}finally{r.shouldCoalesceRunChangeDetection&&s(),uE(r)}},onHasTask:(o,a,c,d)=>{o.hasTask(c,d),a===c&&("microTask"==d.change?(r._hasPendingMicrotasks=d.microTask,ND(r),ID(r)):"macroTask"==d.change&&(r.hasPendingMacrotasks=d.macroTask))},onHandleError:(o,a,c,d)=>(o.handleError(c,d),r.runOutsideAngular(()=>r.onError.emit(d)),!1)})}(c)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!br.isInAngularZone())throw new Tt(909,!1)}static assertNotInAngularZone(){if(br.isInAngularZone())throw new Tt(909,!1)}run(s,o,a){return this._inner.run(s,o,a)}runTask(s,o,a,c){const d=this._inner,y=d.scheduleEventTask("NgZoneEvent: "+c,s,qk,Z1,Z1);try{return d.runTask(y,o,a)}finally{d.cancelTask(y)}}runGuarded(s,o,a){return this._inner.runGuarded(s,o,a)}runOutsideAngular(s){return this._outer.run(s)}}const qk={};function ID(r){if(0==r._nesting&&!r.hasPendingMicrotasks&&!r.isStable)try{r._nesting++,r.onMicrotaskEmpty.emit(null)}finally{if(r._nesting--,!r.hasPendingMicrotasks)try{r.runOutsideAngular(()=>r.onStable.emit(null))}finally{r.isStable=!0}}}function ND(r){r.hasPendingMicrotasks=!!(r._hasPendingMicrotasks||(r.shouldCoalesceEventChangeDetection||r.shouldCoalesceRunChangeDetection)&&-1!==r.lastRequestAnimationFrameId)}function aE(r){r._nesting++,r.isStable&&(r.isStable=!1,r.onUnstable.emit(null))}function uE(r){r._nesting--,ID(r)}class nO{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Wn,this.onMicrotaskEmpty=new Wn,this.onStable=new Wn,this.onError=new Wn}run(s,o,a){return s.apply(o,a)}runGuarded(s,o,a){return s.apply(o,a)}runOutsideAngular(s){return s()}runTask(s,o,a,c){return s.apply(o,a)}}const hE=new Yt(""),tC=new Yt("");let kD,PD=(()=>{class r{constructor(o,a,c){this._ngZone=o,this.registry=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,kD||(function iO(r){kD=r}(c),c.addToWindow(a)),this._watchAngularEvents(),o.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{br.assertNotInAngularZone(),ED(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())ED(()=>{for(;0!==this._callbacks.length;){let o=this._callbacks.pop();clearTimeout(o.timeoutId),o.doneCb(this._didWork)}this._didWork=!1});else{let o=this.getPendingTasks();this._callbacks=this._callbacks.filter(a=>!a.updateCb||!a.updateCb(o)||(clearTimeout(a.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(o=>({source:o.source,creationLocation:o.creationLocation,data:o.data})):[]}addCallback(o,a,c){let d=-1;a&&a>0&&(d=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==d),o(this._didWork,this.getPendingTasks())},a)),this._callbacks.push({doneCb:o,timeoutId:d,updateCb:c})}whenStable(o,a,c){if(c&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(o,a,c),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(o){this.registry.registerApplication(o,this)}unregisterApplication(o){this.registry.unregisterApplication(o)}findProviders(o,a,c){return[]}}return r.\u0275fac=function(o){return new(o||r)(Ut(br),Ut(AD),Ut(tC))},r.\u0275prov=P({token:r,factory:r.\u0275fac}),r})(),AD=(()=>{class r{constructor(){this._applications=new Map}registerApplication(o,a){this._applications.set(o,a)}unregisterApplication(o){this._applications.delete(o)}unregisterAllApplications(){this._applications.clear()}getTestability(o){return this._applications.get(o)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(o,a=!0){return kD?.findTestabilityInTree(this,o,a)??null}}return r.\u0275fac=function(o){return new(o||r)},r.\u0275prov=P({token:r,factory:r.\u0275fac,providedIn:"platform"}),r})(),Zf=null;const cE=new Yt("AllowMultipleToken"),OD=new Yt("PlatformDestroyListeners");class fE{constructor(s,o){this.name=s,this.token=o}}function pE(r,s,o=[]){const a=`Platform: ${s}`,c=new Yt(a);return(d=[])=>{let y=LD();if(!y||y.injector.get(cE,!1)){const w=[...o,...d,{provide:c,useValue:!0}];r?r(w):function sO(r){if(Zf&&!Zf.get(cE,!1))throw new Tt(400,!1);Zf=r;const s=r.get(mE);(function dE(r){const s=r.get(rE,null);s&&s.forEach(o=>o())})(r)}(function gE(r=[],s){return nr.create({name:s,providers:[{provide:Ui,useValue:"platform"},{provide:OD,useValue:new Set([()=>Zf=null])},...r]})}(w,a))}return function aO(r){const s=LD();if(!s)throw new Tt(401,!1);return s}()}}function LD(){return Zf?.get(mE)??null}let mE=(()=>{class r{constructor(o){this._injector=o,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(o,a){const c=function vE(r,s){let o;return o="noop"===r?new nO:("zone.js"===r?void 0:r)||new br(s),o}(a?.ngZone,function yE(r){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!r||!r.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!r||!r.ngZoneRunCoalescing)||!1}}(a)),d=[{provide:br,useValue:c}];return c.run(()=>{const y=nr.create({providers:d,parent:this.injector,name:o.moduleType.name}),w=o.create(y),C=w.injector.get(Cu,null);if(!C)throw new Tt(402,!1);return c.runOutsideAngular(()=>{const S=c.onError.subscribe({next:E=>{C.handleError(E)}});w.onDestroy(()=>{nC(this._modules,w),S.unsubscribe()})}),function wE(r,s,o){try{const a=o();return Rh(a)?a.catch(c=>{throw s.runOutsideAngular(()=>r.handleError(c)),c}):a}catch(a){throw s.runOutsideAngular(()=>r.handleError(a)),a}}(C,c,()=>{const S=w.injector.get(q1);return S.runInitializers(),S.donePromise.then(()=>(function $i(r){Qt(r,"Expected localeId to be defined"),"string"==typeof r&&(zh=r.toLowerCase().replace(/_/g,"-"))}(w.injector.get(nc,li)||li),this._moduleDoBootstrap(w),w))})})}bootstrapModule(o,a=[]){const c=xE({},a);return function rO(r,s,o){const a=new Jp(o);return Promise.resolve(a)}(0,0,o).then(d=>this.bootstrapModuleFactory(d,c))}_moduleDoBootstrap(o){const a=o.injector.get(eC);if(o._bootstrapComponents.length>0)o._bootstrapComponents.forEach(c=>a.bootstrap(c));else{if(!o.instance.ngDoBootstrap)throw new Tt(403,!1);o.instance.ngDoBootstrap(a)}this._modules.push(o)}onDestroy(o){this._destroyListeners.push(o)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Tt(404,!1);this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a());const o=this._injector.get(OD,null);o&&(o.forEach(a=>a()),o.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return r.\u0275fac=function(o){return new(o||r)(Ut(nr))},r.\u0275prov=P({token:r,factory:r.\u0275fac,providedIn:"platform"}),r})();function xE(r,s){return Array.isArray(s)?s.reduce(xE,r):{...r,...s}}let eC=(()=>{class r{constructor(o,a,c){this._zone=o,this._injector=a,this._exceptionHandler=c,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const d=new bi(w=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{w.next(this._stable),w.complete()})}),y=new bi(w=>{let C;this._zone.runOutsideAngular(()=>{C=this._zone.onStable.subscribe(()=>{br.assertNotInAngularZone(),ED(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,w.next(!0))})})});const S=this._zone.onUnstable.subscribe(()=>{br.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{w.next(!1)}))});return()=>{C.unsubscribe(),S.unsubscribe()}});this.isStable=function yn(...r){const s=fd(r),o=function rx(r,s){return"number"==typeof Mt(r)?r.pop():s}(r,1/0),a=r;return a.length?1===a.length?Ws(a[0]):Ka(o)(jt(a,s)):ra}(d,y.pipe(function mc(r={}){const{connector:s=(()=>new ia),resetOnError:o=!0,resetOnComplete:a=!0,resetOnRefCountZero:c=!0}=r;return d=>{let y,w,C,S=0,E=!1,A=!1;const R=()=>{w?.unsubscribe(),w=void 0},j=()=>{R(),y=C=void 0,E=A=!1},z=()=>{const tt=y;j(),tt?.unsubscribe()};return _r((tt,st)=>{S++,!A&&!E&&R();const ht=C=C??s();st.add(()=>{S--,0===S&&!A&&!E&&(w=Za(z,c))}),ht.subscribe(st),!y&&S>0&&(y=new ug({next:Ct=>ht.next(Ct),error:Ct=>{A=!0,R(),w=Za(j,o,Ct),ht.error(Ct)},complete:()=>{E=!0,R(),w=Za(j,a),ht.complete()}}),Ws(tt).subscribe(y))})(d)}}()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(o,a){const c=o instanceof $v;if(!this._injector.get(q1).done)throw!c&&function Br(r){const s=it(r)||Ne(r)||Oe(r);return null!==s&&s.standalone}(o),new Tt(405,false);let y;y=c?o:this._injector.get(tf).resolveComponentFactory(o),this.componentTypes.push(y.componentType);const w=function oO(r){return r.isBoundToModule}(y)?void 0:this._injector.get(qh),S=y.create(nr.NULL,[],a||y.selector,w),E=S.location.nativeElement,A=S.injector.get(hE,null);return A?.registerApplication(E),S.onDestroy(()=>{this.detachView(S.hostView),nC(this.components,S),A?.unregisterApplication(E)}),this._loadComponent(S),S}tick(){if(this._runningTick)throw new Tt(101,!1);try{this._runningTick=!0;for(let o of this._views)o.detectChanges()}catch(o){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(o))}finally{this._runningTick=!1}}attachView(o){const a=o;this._views.push(a),a.attachToAppRef(this)}detachView(o){const a=o;nC(this._views,a),a.detachFromAppRef()}_loadComponent(o){this.attachView(o.hostView),this.tick(),this.components.push(o),this._injector.get(oE,[]).concat(this._bootstrapListeners).forEach(c=>c(o))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(o=>o()),this._views.slice().forEach(o=>o.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(o){return this._destroyListeners.push(o),()=>nC(this._destroyListeners,o)}destroy(){if(this._destroyed)throw new Tt(406,!1);const o=this._injector;o.destroy&&!o.destroyed&&o.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return r.\u0275fac=function(o){return new(o||r)(Ut(br),Ut(rl),Ut(Cu))},r.\u0275prov=P({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();function nC(r,s){const o=r.indexOf(s);o>-1&&r.splice(o,1)}let ME=!0,Iy=(()=>{class r{}return r.__NG_ELEMENT_ID__=cO,r})();function cO(r){return function fO(r,s,o){if(md(r)&&!o){const a=lo(r.index,s);return new kh(a,a)}return 47&r.type?new kh(s[16],s):null}(ji(),gt(),16==(16&r))}class EE{constructor(){}supports(s){return Op(s)}create(s){return new vO(s)}}const yO=(r,s)=>s;class vO{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||yO}forEachItem(s){let o;for(o=this._itHead;null!==o;o=o._next)s(o)}forEachOperation(s){let o=this._itHead,a=this._removalsHead,c=0,d=null;for(;o||a;){const y=!a||o&&o.currentIndex<NE(a,c,d)?o:a,w=NE(y,c,d),C=y.currentIndex;if(y===a)c--,a=a._nextRemoved;else if(o=o._next,null==y.previousIndex)c++;else{d||(d=[]);const S=w-c,E=C-c;if(S!=E){for(let R=0;R<S;R++){const j=R<d.length?d[R]:d[R]=0,z=j+R;E<=z&&z<S&&(d[R]=j+1)}d[y.previousIndex]=E-S}}w!==C&&s(y,w,C)}}forEachPreviousItem(s){let o;for(o=this._previousItHead;null!==o;o=o._nextPrevious)s(o)}forEachAddedItem(s){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)s(o)}forEachMovedItem(s){let o;for(o=this._movesHead;null!==o;o=o._nextMoved)s(o)}forEachRemovedItem(s){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)s(o)}forEachIdentityChange(s){let o;for(o=this._identityChangesHead;null!==o;o=o._nextIdentityChange)s(o)}diff(s){if(null==s&&(s=[]),!Op(s))throw new Tt(900,!1);return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let c,d,y,o=this._itHead,a=!1;if(Array.isArray(s)){this.length=s.length;for(let w=0;w<this.length;w++)d=s[w],y=this._trackByFn(w,d),null!==o&&Object.is(o.trackById,y)?(a&&(o=this._verifyReinsertion(o,d,y,w)),Object.is(o.item,d)||this._addIdentityChange(o,d)):(o=this._mismatch(o,d,y,w),a=!0),o=o._next}else c=0,function uD(r,s){if(Array.isArray(r))for(let o=0;o<r.length;o++)s(r[o]);else{const o=r[Tu()]();let a;for(;!(a=o.next()).done;)s(a.value)}}(s,w=>{y=this._trackByFn(c,w),null!==o&&Object.is(o.trackById,y)?(a&&(o=this._verifyReinsertion(o,w,y,c)),Object.is(o.item,w)||this._addIdentityChange(o,w)):(o=this._mismatch(o,w,y,c),a=!0),o=o._next,c++}),this.length=c;return this._truncate(o),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,o,a,c){let d;return null===s?d=this._itTail:(d=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null))?(Object.is(s.item,o)||this._addIdentityChange(s,o),this._reinsertAfter(s,d,c)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(a,c))?(Object.is(s.item,o)||this._addIdentityChange(s,o),this._moveAfter(s,d,c)):s=this._addAfter(new wO(o,a),d,c),s}_verifyReinsertion(s,o,a,c){let d=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null);return null!==d?s=this._reinsertAfter(d,s._prev,c):s.currentIndex!=c&&(s.currentIndex=c,this._addToMoves(s,c)),s}_truncate(s){for(;null!==s;){const o=s._next;this._addToRemovals(this._unlink(s)),s=o}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,o,a){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const c=s._prevRemoved,d=s._nextRemoved;return null===c?this._removalsHead=d:c._nextRemoved=d,null===d?this._removalsTail=c:d._prevRemoved=c,this._insertAfter(s,o,a),this._addToMoves(s,a),s}_moveAfter(s,o,a){return this._unlink(s),this._insertAfter(s,o,a),this._addToMoves(s,a),s}_addAfter(s,o,a){return this._insertAfter(s,o,a),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,o,a){const c=null===o?this._itHead:o._next;return s._next=c,s._prev=o,null===c?this._itTail=s:c._prev=s,null===o?this._itHead=s:o._next=s,null===this._linkedRecords&&(this._linkedRecords=new IE),this._linkedRecords.put(s),s.currentIndex=a,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const o=s._prev,a=s._next;return null===o?this._itHead=a:o._next=a,null===a?this._itTail=o:a._prev=o,s}_addToMoves(s,o){return s.previousIndex===o||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new IE),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,o){return s.item=o,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class wO{constructor(s,o){this.item=s,this.trackById=o,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class xO{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,o){let a;for(a=this._head;null!==a;a=a._nextDup)if((null===o||o<=a.currentIndex)&&Object.is(a.trackById,s))return a;return null}remove(s){const o=s._prevDup,a=s._nextDup;return null===o?this._head=a:o._nextDup=a,null===a?this._tail=o:a._prevDup=o,null===this._head}}class IE{constructor(){this.map=new Map}put(s){const o=s.trackById;let a=this.map.get(o);a||(a=new xO,this.map.set(o,a)),a.add(s)}get(s,o){const c=this.map.get(s);return c?c.get(s,o):null}remove(s){const o=s.trackById;return this.map.get(o).remove(s)&&this.map.delete(o),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function NE(r,s,o){const a=r.previousIndex;if(null===a)return a;let c=0;return o&&a<o.length&&(c=o[a]),a+s+c}class PE{constructor(){}supports(s){return s instanceof Map||Zm(s)}create(){return new CO}}class CO{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let o;for(o=this._mapHead;null!==o;o=o._next)s(o)}forEachPreviousItem(s){let o;for(o=this._previousMapHead;null!==o;o=o._nextPrevious)s(o)}forEachChangedItem(s){let o;for(o=this._changesHead;null!==o;o=o._nextChanged)s(o)}forEachAddedItem(s){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)s(o)}forEachRemovedItem(s){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)s(o)}diff(s){if(s){if(!(s instanceof Map||Zm(s)))throw new Tt(900,!1)}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let o=this._mapHead;if(this._appendAfter=null,this._forEach(s,(a,c)=>{if(o&&o.key===c)this._maybeAddToChanges(o,a),this._appendAfter=o,o=o._next;else{const d=this._getOrCreateRecordForKey(c,a);o=this._insertBeforeOrAppend(o,d)}}),o){o._prev&&(o._prev._next=null),this._removalsHead=o;for(let a=o;null!==a;a=a._nextRemoved)a===this._mapHead&&(this._mapHead=null),this._records.delete(a.key),a._nextRemoved=a._next,a.previousValue=a.currentValue,a.currentValue=null,a._prev=null,a._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,o){if(s){const a=s._prev;return o._next=s,o._prev=a,s._prev=o,a&&(a._next=o),s===this._mapHead&&(this._mapHead=o),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=o,o._prev=this._appendAfter):this._mapHead=o,this._appendAfter=o,null}_getOrCreateRecordForKey(s,o){if(this._records.has(s)){const c=this._records.get(s);this._maybeAddToChanges(c,o);const d=c._prev,y=c._next;return d&&(d._next=y),y&&(y._prev=d),c._next=null,c._prev=null,c}const a=new MO(s);return this._records.set(s,a),a.currentValue=o,this._addToAdditions(a),a}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,o){Object.is(o,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=o,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,o){s instanceof Map?s.forEach(o):Object.keys(s).forEach(a=>o(s[a],a))}}class MO{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function AE(){return new oC([new EE])}let oC=(()=>{class r{constructor(o){this.factories=o}static create(o,a){if(null!=a){const c=a.factories.slice();o=o.concat(c)}return new r(o)}static extend(o){return{provide:r,useFactory:a=>r.create(o,a||AE()),deps:[[r,new Bc,new Vc]]}}find(o){const a=this.factories.find(c=>c.supports(o));if(null!=a)return a;throw new Tt(901,!1)}}return r.\u0275prov=P({token:r,providedIn:"root",factory:AE}),r})();function kE(){return new hw([new PE])}let hw=(()=>{class r{constructor(o){this.factories=o}static create(o,a){if(a){const c=a.factories.slice();o=o.concat(c)}return new r(o)}static extend(o){return{provide:r,useFactory:a=>r.create(o,a||kE()),deps:[[r,new Bc,new Vc]]}}find(o){const a=this.factories.find(c=>c.supports(o));if(a)return a;throw new Tt(901,!1)}}return r.\u0275prov=P({token:r,providedIn:"root",factory:kE}),r})();const _O=pE(null,"core",[]);let TO=(()=>{class r{constructor(o){}}return r.\u0275fac=function(o){return new(o||r)(Ut(eC))},r.\u0275mod=Fi({type:r}),r.\u0275inj=fi({}),r})();let sC=null;function $u(){return sC}const ws=new Yt("DocumentToken");let VD=(()=>{class r{historyGo(o){throw new Error("Not implemented")}}return r.\u0275fac=function(o){return new(o||r)},r.\u0275prov=P({token:r,factory:function(){return function PO(){return Ut(OE)}()},providedIn:"platform"}),r})();const AO=new Yt("Location Initialized");let OE=(()=>{class r extends VD{constructor(o){super(),this._doc=o,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return $u().getBaseHref(this._doc)}onPopState(o){const a=$u().getGlobalEventTarget(this._doc,"window");return a.addEventListener("popstate",o,!1),()=>a.removeEventListener("popstate",o)}onHashChange(o){const a=$u().getGlobalEventTarget(this._doc,"window");return a.addEventListener("hashchange",o,!1),()=>a.removeEventListener("hashchange",o)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(o){this.location.pathname=o}pushState(o,a,c){LE()?this._history.pushState(o,a,c):this.location.hash=c}replaceState(o,a,c){LE()?this._history.replaceState(o,a,c):this.location.hash=c}forward(){this._history.forward()}back(){this._history.back()}historyGo(o=0){this._history.go(o)}getState(){return this._history.state}}return r.\u0275fac=function(o){return new(o||r)(Ut(ws))},r.\u0275prov=P({token:r,factory:function(){return function kO(){return new OE(Ut(ws))}()},providedIn:"platform"}),r})();function LE(){return!!window.history.pushState}function BD(r,s){if(0==r.length)return s;if(0==s.length)return r;let o=0;return r.endsWith("/")&&o++,s.startsWith("/")&&o++,2==o?r+s.substring(1):1==o?r+s:r+"/"+s}function bE(r){const s=r.match(/#|\?|$/),o=s&&s.index||r.length;return r.slice(0,o-("/"===r[o-1]?1:0))+r.slice(o)}function oc(r){return r&&"?"!==r[0]?"?"+r:r}let qp=(()=>{class r{historyGo(o){throw new Error("Not implemented")}}return r.\u0275fac=function(o){return new(o||r)},r.\u0275prov=P({token:r,factory:function(){return $e(RE)},providedIn:"root"}),r})();const FE=new Yt("appBaseHref");let RE=(()=>{class r extends qp{constructor(o,a){super(),this._platformLocation=o,this._removeListenerFns=[],this._baseHref=a??this._platformLocation.getBaseHrefFromDOM()??$e(ws).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(o){this._removeListenerFns.push(this._platformLocation.onPopState(o),this._platformLocation.onHashChange(o))}getBaseHref(){return this._baseHref}prepareExternalUrl(o){return BD(this._baseHref,o)}path(o=!1){const a=this._platformLocation.pathname+oc(this._platformLocation.search),c=this._platformLocation.hash;return c&&o?`${a}${c}`:a}pushState(o,a,c,d){const y=this.prepareExternalUrl(c+oc(d));this._platformLocation.pushState(o,a,y)}replaceState(o,a,c,d){const y=this.prepareExternalUrl(c+oc(d));this._platformLocation.replaceState(o,a,y)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(o=0){this._platformLocation.historyGo?.(o)}}return r.\u0275fac=function(o){return new(o||r)(Ut(VD),Ut(FE,8))},r.\u0275prov=P({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),OO=(()=>{class r extends qp{constructor(o,a){super(),this._platformLocation=o,this._baseHref="",this._removeListenerFns=[],null!=a&&(this._baseHref=a)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(o){this._removeListenerFns.push(this._platformLocation.onPopState(o),this._platformLocation.onHashChange(o))}getBaseHref(){return this._baseHref}path(o=!1){let a=this._platformLocation.hash;return null==a&&(a="#"),a.length>0?a.substring(1):a}prepareExternalUrl(o){const a=BD(this._baseHref,o);return a.length>0?"#"+a:a}pushState(o,a,c,d){let y=this.prepareExternalUrl(c+oc(d));0==y.length&&(y=this._platformLocation.pathname),this._platformLocation.pushState(o,a,y)}replaceState(o,a,c,d){let y=this.prepareExternalUrl(c+oc(d));0==y.length&&(y=this._platformLocation.pathname),this._platformLocation.replaceState(o,a,y)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(o=0){this._platformLocation.historyGo?.(o)}}return r.\u0275fac=function(o){return new(o||r)(Ut(VD),Ut(FE,8))},r.\u0275prov=P({token:r,factory:r.\u0275fac}),r})(),UD=(()=>{class r{constructor(o){this._subject=new Wn,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=o;const a=this._locationStrategy.getBaseHref();this._baseHref=bE(jE(a)),this._locationStrategy.onPopState(c=>{this._subject.emit({url:this.path(!0),pop:!0,state:c.state,type:c.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(o=!1){return this.normalize(this._locationStrategy.path(o))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(o,a=""){return this.path()==this.normalize(o+oc(a))}normalize(o){return r.stripTrailingSlash(function bO(r,s){return r&&s.startsWith(r)?s.substring(r.length):s}(this._baseHref,jE(o)))}prepareExternalUrl(o){return o&&"/"!==o[0]&&(o="/"+o),this._locationStrategy.prepareExternalUrl(o)}go(o,a="",c=null){this._locationStrategy.pushState(c,"",o,a),this._notifyUrlChangeListeners(this.prepareExternalUrl(o+oc(a)),c)}replaceState(o,a="",c=null){this._locationStrategy.replaceState(c,"",o,a),this._notifyUrlChangeListeners(this.prepareExternalUrl(o+oc(a)),c)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(o=0){this._locationStrategy.historyGo?.(o)}onUrlChange(o){return this._urlChangeListeners.push(o),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(a=>{this._notifyUrlChangeListeners(a.url,a.state)})),()=>{const a=this._urlChangeListeners.indexOf(o);this._urlChangeListeners.splice(a,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(o="",a){this._urlChangeListeners.forEach(c=>c(o,a))}subscribe(o,a,c){return this._subject.subscribe({next:o,error:a,complete:c})}}return r.normalizeQueryParams=oc,r.joinWithSlash=BD,r.stripTrailingSlash=bE,r.\u0275fac=function(o){return new(o||r)(Ut(qp))},r.\u0275prov=P({token:r,factory:function(){return function LO(){return new UD(Ut(qp))}()},providedIn:"root"}),r})();function jE(r){return r.replace(/\/index.html$/,"")}function YE(r,s){s=encodeURIComponent(s);for(const o of r.split(";")){const a=o.indexOf("="),[c,d]=-1==a?[o,""]:[o.slice(0,a),o.slice(a+1)];if(c.trim()===s)return decodeURIComponent(d)}return null}let ZD=(()=>{class r{constructor(o,a,c,d){this._iterableDiffers=o,this._keyValueDiffers=a,this._ngEl=c,this._renderer=d,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(o){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof o?o.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(o){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof o?o.split(/\s+/):o,this._rawClass&&(Op(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const o=this._iterableDiffer.diff(this._rawClass);o&&this._applyIterableChanges(o)}else if(this._keyValueDiffer){const o=this._keyValueDiffer.diff(this._rawClass);o&&this._applyKeyValueChanges(o)}}_applyKeyValueChanges(o){o.forEachAddedItem(a=>this._toggleClass(a.key,a.currentValue)),o.forEachChangedItem(a=>this._toggleClass(a.key,a.currentValue)),o.forEachRemovedItem(a=>{a.previousValue&&this._toggleClass(a.key,!1)})}_applyIterableChanges(o){o.forEachAddedItem(a=>{if("string"!=typeof a.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${Nt(a.item)}`);this._toggleClass(a.item,!0)}),o.forEachRemovedItem(a=>this._toggleClass(a.item,!1))}_applyClasses(o){o&&(Array.isArray(o)||o instanceof Set?o.forEach(a=>this._toggleClass(a,!0)):Object.keys(o).forEach(a=>this._toggleClass(a,!!o[a])))}_removeClasses(o){o&&(Array.isArray(o)||o instanceof Set?o.forEach(a=>this._toggleClass(a,!1)):Object.keys(o).forEach(a=>this._toggleClass(a,!1)))}_toggleClass(o,a){(o=o.trim())&&o.split(/\s+/g).forEach(c=>{a?this._renderer.addClass(this._ngEl.nativeElement,c):this._renderer.removeClass(this._ngEl.nativeElement,c)})}}return r.\u0275fac=function(o){return new(o||r)(ct(oC),ct(hw),ct(Zn),ct(Pl))},r.\u0275dir=Kt({type:r,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),r})();class wL{constructor(s,o,a,c){this.$implicit=s,this.ngForOf=o,this.index=a,this.count=c}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let QD=(()=>{class r{constructor(o,a,c){this._viewContainer=o,this._template=a,this._differs=c,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(o){this._ngForOf=o,this._ngForOfDirty=!0}set ngForTrackBy(o){this._trackByFn=o}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(o){o&&(this._template=o)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const o=this._ngForOf;!this._differ&&o&&(this._differ=this._differs.find(o).create(this.ngForTrackBy))}if(this._differ){const o=this._differ.diff(this._ngForOf);o&&this._applyChanges(o)}}_applyChanges(o){const a=this._viewContainer;o.forEachOperation((c,d,y)=>{if(null==c.previousIndex)a.createEmbeddedView(this._template,new wL(c.item,this._ngForOf,-1,-1),null===y?void 0:y);else if(null==y)a.remove(null===d?void 0:d);else if(null!==d){const w=a.get(d);a.move(w,y),JE(w,c)}});for(let c=0,d=a.length;c<d;c++){const w=a.get(c).context;w.index=c,w.count=d,w.ngForOf=this._ngForOf}o.forEachIdentityChange(c=>{JE(a.get(c.currentIndex),c)})}static ngTemplateContextGuard(o,a){return!0}}return r.\u0275fac=function(o){return new(o||r)(ct(Ha),ct(zu),ct(oC))},r.\u0275dir=Kt({type:r,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),r})();function JE(r,s){r.context.$implicit=s.item}let mC=(()=>{class r{constructor(o,a){this._viewContainer=o,this._context=new CL,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=a}set ngIf(o){this._context.$implicit=this._context.ngIf=o,this._updateView()}set ngIfThen(o){ZE("ngIfThen",o),this._thenTemplateRef=o,this._thenViewRef=null,this._updateView()}set ngIfElse(o){ZE("ngIfElse",o),this._elseTemplateRef=o,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(o,a){return!0}}return r.\u0275fac=function(o){return new(o||r)(ct(Ha),ct(zu))},r.\u0275dir=Kt({type:r,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),r})();class CL{constructor(){this.$implicit=null,this.ngIf=null}}function ZE(r,s){if(s&&!s.createEmbeddedView)throw new Error(`${r} must be a TemplateRef, but received '${Nt(s)}'.`)}let eS=(()=>{class r{constructor(o,a,c){this._ngEl=o,this._differs=a,this._renderer=c,this._ngStyle=null,this._differ=null}set ngStyle(o){this._ngStyle=o,!this._differ&&o&&(this._differ=this._differs.find(o).create())}ngDoCheck(){if(this._differ){const o=this._differ.diff(this._ngStyle);o&&this._applyChanges(o)}}_setStyle(o,a){const[c,d]=o.split("."),y=-1===c.indexOf("-")?void 0:Ir.DashCase;null!=a?this._renderer.setStyle(this._ngEl.nativeElement,c,d?`${a}${d}`:a,y):this._renderer.removeStyle(this._ngEl.nativeElement,c,y)}_applyChanges(o){o.forEachRemovedItem(a=>this._setStyle(a.key,null)),o.forEachAddedItem(a=>this._setStyle(a.key,a.currentValue)),o.forEachChangedItem(a=>this._setStyle(a.key,a.currentValue))}}return r.\u0275fac=function(o){return new(o||r)(ct(Zn),ct(hw),ct(Pl))},r.\u0275dir=Kt({type:r,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),r})(),qE=(()=>{class r{constructor(o){this._viewContainerRef=o,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(o){if(o.ngTemplateOutlet||o.ngTemplateOutletInjector){const a=this._viewContainerRef;if(this._viewRef&&a.remove(a.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:c,ngTemplateOutletContext:d,ngTemplateOutletInjector:y}=this;this._viewRef=a.createEmbeddedView(c,d,y?{injector:y}:void 0)}else this._viewRef=null}else this._viewRef&&o.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return r.\u0275fac=function(o){return new(o||r)(ct(Ha))},r.\u0275dir=Kt({type:r,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[xe]}),r})(),tg=(()=>{class r{}return r.\u0275fac=function(o){return new(o||r)},r.\u0275mod=Fi({type:r}),r.\u0275inj=fi({}),r})();let XL=(()=>{class r{}return r.\u0275prov=P({token:r,providedIn:"root",factory:()=>new JL(Ut(ws),window)}),r})();class JL{constructor(s,o){this.document=s,this.window=o,this.offset=()=>[0,0]}setOffset(s){this.offset=Array.isArray(s)?()=>s:s}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(s){this.supportsScrolling()&&this.window.scrollTo(s[0],s[1])}scrollToAnchor(s){if(!this.supportsScrolling())return;const o=function ZL(r,s){const o=r.getElementById(s)||r.getElementsByName(s)[0];if(o)return o;if("function"==typeof r.createTreeWalker&&r.body&&(r.body.createShadowRoot||r.body.attachShadow)){const a=r.createTreeWalker(r.body,NodeFilter.SHOW_ELEMENT);let c=a.currentNode;for(;c;){const d=c.shadowRoot;if(d){const y=d.getElementById(s)||d.querySelector(`[name="${s}"]`);if(y)return y}c=a.nextNode()}}return null}(this.document,s);o&&(this.scrollToElement(o),o.focus())}setHistoryScrollRestoration(s){if(this.supportScrollRestoration()){const o=this.window.history;o&&o.scrollRestoration&&(o.scrollRestoration=s)}}scrollToElement(s){const o=s.getBoundingClientRect(),a=o.left+this.window.pageXOffset,c=o.top+this.window.pageYOffset,d=this.offset();this.window.scrollTo(a-d[0],c-d[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const s=nI(this.window.history)||nI(Object.getPrototypeOf(this.window.history));return!(!s||!s.writable&&!s.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function nI(r){return Object.getOwnPropertyDescriptor(r,"scrollRestoration")}class iI{}class sS extends class gb extends class NO{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function IO(r){sC||(sC=r)}(new sS)}onAndCancel(s,o,a){return s.addEventListener(o,a,!1),()=>{s.removeEventListener(o,a,!1)}}dispatchEvent(s,o){s.dispatchEvent(o)}remove(s){s.parentNode&&s.parentNode.removeChild(s)}createElement(s,o){return(o=o||this.getDefaultDocument()).createElement(s)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(s){return s.nodeType===Node.ELEMENT_NODE}isShadowRoot(s){return s instanceof DocumentFragment}getGlobalEventTarget(s,o){return"window"===o?window:"document"===o?s:"body"===o?s.body:null}getBaseHref(s){const o=function mb(){return pw=pw||document.querySelector("base"),pw?pw.getAttribute("href"):null}();return null==o?null:function yb(r){vC=vC||document.createElement("a"),vC.setAttribute("href",r);const s=vC.pathname;return"/"===s.charAt(0)?s:`/${s}`}(o)}resetBaseElement(){pw=null}getUserAgent(){return window.navigator.userAgent}getCookie(s){return YE(document.cookie,s)}}let vC,pw=null;const lI=new Yt("TRANSITION_ID"),wb=[{provide:Q1,useFactory:function vb(r,s,o){return()=>{o.get(q1).donePromise.then(()=>{const a=$u(),c=s.querySelectorAll(`style[ng-transition="${r}"]`);for(let d=0;d<c.length;d++)a.remove(c[d])})}},deps:[lI,ws,nr],multi:!0}];let Cb=(()=>{class r{build(){return new XMLHttpRequest}}return r.\u0275fac=function(o){return new(o||r)},r.\u0275prov=P({token:r,factory:r.\u0275fac}),r})();const wC=new Yt("EventManagerPlugins");let xC=(()=>{class r{constructor(o,a){this._zone=a,this._eventNameToPlugin=new Map,o.forEach(c=>c.manager=this),this._plugins=o.slice().reverse()}addEventListener(o,a,c){return this._findPluginFor(a).addEventListener(o,a,c)}addGlobalEventListener(o,a,c){return this._findPluginFor(a).addGlobalEventListener(o,a,c)}getZone(){return this._zone}_findPluginFor(o){const a=this._eventNameToPlugin.get(o);if(a)return a;const c=this._plugins;for(let d=0;d<c.length;d++){const y=c[d];if(y.supports(o))return this._eventNameToPlugin.set(o,y),y}throw new Error(`No event manager plugin found for event ${o}`)}}return r.\u0275fac=function(o){return new(o||r)(Ut(wC),Ut(br))},r.\u0275prov=P({token:r,factory:r.\u0275fac}),r})();class aI{constructor(s){this._doc=s}addGlobalEventListener(s,o,a){const c=$u().getGlobalEventTarget(this._doc,s);if(!c)throw new Error(`Unsupported event target ${c} for event ${o}`);return this.addEventListener(c,o,a)}}let uI=(()=>{class r{constructor(){this._stylesSet=new Set}addStyles(o){const a=new Set;o.forEach(c=>{this._stylesSet.has(c)||(this._stylesSet.add(c),a.add(c))}),this.onStylesAdded(a)}onStylesAdded(o){}getAllStyles(){return Array.from(this._stylesSet)}}return r.\u0275fac=function(o){return new(o||r)},r.\u0275prov=P({token:r,factory:r.\u0275fac}),r})(),gw=(()=>{class r extends uI{constructor(o){super(),this._doc=o,this._hostNodes=new Map,this._hostNodes.set(o.head,[])}_addStylesToHost(o,a,c){o.forEach(d=>{const y=this._doc.createElement("style");y.textContent=d,c.push(a.appendChild(y))})}addHost(o){const a=[];this._addStylesToHost(this._stylesSet,o,a),this._hostNodes.set(o,a)}removeHost(o){const a=this._hostNodes.get(o);a&&a.forEach(hI),this._hostNodes.delete(o)}onStylesAdded(o){this._hostNodes.forEach((a,c)=>{this._addStylesToHost(o,c,a)})}ngOnDestroy(){this._hostNodes.forEach(o=>o.forEach(hI))}}return r.\u0275fac=function(o){return new(o||r)(Ut(ws))},r.\u0275prov=P({token:r,factory:r.\u0275fac}),r})();function hI(r){$u().remove(r)}const lS={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},aS=/%COMP%/g;function CC(r,s,o){for(let a=0;a<s.length;a++){let c=s[a];Array.isArray(c)?CC(r,c,o):(c=c.replace(aS,r),o.push(c))}return o}function dI(r){return s=>{if("__ngUnwrap__"===s)return r;!1===r(s)&&(s.preventDefault(),s.returnValue=!1)}}let uS=(()=>{class r{constructor(o,a,c){this.eventManager=o,this.sharedStylesHost=a,this.appId=c,this.rendererByCompId=new Map,this.defaultRenderer=new hS(o)}createRenderer(o,a){if(!o||!a)return this.defaultRenderer;switch(a.encapsulation){case Xs.Emulated:{let c=this.rendererByCompId.get(a.id);return c||(c=new Eb(this.eventManager,this.sharedStylesHost,a,this.appId),this.rendererByCompId.set(a.id,c)),c.applyToHost(o),c}case 1:case Xs.ShadowDom:return new Ib(this.eventManager,this.sharedStylesHost,o,a);default:if(!this.rendererByCompId.has(a.id)){const c=CC(a.id,a.styles,[]);this.sharedStylesHost.addStyles(c),this.rendererByCompId.set(a.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return r.\u0275fac=function(o){return new(o||r)(Ut(xC),Ut(gw),Ut(uw))},r.\u0275prov=P({token:r,factory:r.\u0275fac}),r})();class hS{constructor(s){this.eventManager=s,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(s,o){return o?document.createElementNS(lS[o]||o,s):document.createElement(s)}createComment(s){return document.createComment(s)}createText(s){return document.createTextNode(s)}appendChild(s,o){(gI(s)?s.content:s).appendChild(o)}insertBefore(s,o,a){s&&(gI(s)?s.content:s).insertBefore(o,a)}removeChild(s,o){s&&s.removeChild(o)}selectRootElement(s,o){let a="string"==typeof s?document.querySelector(s):s;if(!a)throw new Error(`The selector "${s}" did not match any elements`);return o||(a.textContent=""),a}parentNode(s){return s.parentNode}nextSibling(s){return s.nextSibling}setAttribute(s,o,a,c){if(c){o=c+":"+o;const d=lS[c];d?s.setAttributeNS(d,o,a):s.setAttribute(o,a)}else s.setAttribute(o,a)}removeAttribute(s,o,a){if(a){const c=lS[a];c?s.removeAttributeNS(c,o):s.removeAttribute(`${a}:${o}`)}else s.removeAttribute(o)}addClass(s,o){s.classList.add(o)}removeClass(s,o){s.classList.remove(o)}setStyle(s,o,a,c){c&(Ir.DashCase|Ir.Important)?s.style.setProperty(o,a,c&Ir.Important?"important":""):s.style[o]=a}removeStyle(s,o,a){a&Ir.DashCase?s.style.removeProperty(o):s.style[o]=""}setProperty(s,o,a){s[o]=a}setValue(s,o){s.nodeValue=o}listen(s,o,a){return"string"==typeof s?this.eventManager.addGlobalEventListener(s,o,dI(a)):this.eventManager.addEventListener(s,o,dI(a))}}function gI(r){return"TEMPLATE"===r.tagName&&void 0!==r.content}class Eb extends hS{constructor(s,o,a,c){super(s),this.component=a;const d=CC(c+"-"+a.id,a.styles,[]);o.addStyles(d),this.contentAttr=function Sb(r){return"_ngcontent-%COMP%".replace(aS,r)}(c+"-"+a.id),this.hostAttr=function _b(r){return"_nghost-%COMP%".replace(aS,r)}(c+"-"+a.id)}applyToHost(s){super.setAttribute(s,this.hostAttr,"")}createElement(s,o){const a=super.createElement(s,o);return super.setAttribute(a,this.contentAttr,""),a}}class Ib extends hS{constructor(s,o,a,c){super(s),this.sharedStylesHost=o,this.hostEl=a,this.shadowRoot=a.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const d=CC(c.id,c.styles,[]);for(let y=0;y<d.length;y++){const w=document.createElement("style");w.textContent=d[y],this.shadowRoot.appendChild(w)}}nodeOrShadowRoot(s){return s===this.hostEl?this.shadowRoot:s}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(s,o){return super.appendChild(this.nodeOrShadowRoot(s),o)}insertBefore(s,o,a){return super.insertBefore(this.nodeOrShadowRoot(s),o,a)}removeChild(s,o){return super.removeChild(this.nodeOrShadowRoot(s),o)}parentNode(s){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(s)))}}let Nb=(()=>{class r extends aI{constructor(o){super(o)}supports(o){return!0}addEventListener(o,a,c){return o.addEventListener(a,c,!1),()=>this.removeEventListener(o,a,c)}removeEventListener(o,a,c){return o.removeEventListener(a,c)}}return r.\u0275fac=function(o){return new(o||r)(Ut(ws))},r.\u0275prov=P({token:r,factory:r.\u0275fac}),r})();const mI=["alt","control","meta","shift"],Pb={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ab={alt:r=>r.altKey,control:r=>r.ctrlKey,meta:r=>r.metaKey,shift:r=>r.shiftKey};let kb=(()=>{class r extends aI{constructor(o){super(o)}supports(o){return null!=r.parseEventName(o)}addEventListener(o,a,c){const d=r.parseEventName(a),y=r.eventCallback(d.fullKey,c,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>$u().onAndCancel(o,d.domEventName,y))}static parseEventName(o){const a=o.toLowerCase().split("."),c=a.shift();if(0===a.length||"keydown"!==c&&"keyup"!==c)return null;const d=r._normalizeKey(a.pop());let y="",w=a.indexOf("code");if(w>-1&&(a.splice(w,1),y="code."),mI.forEach(S=>{const E=a.indexOf(S);E>-1&&(a.splice(E,1),y+=S+".")}),y+=d,0!=a.length||0===d.length)return null;const C={};return C.domEventName=c,C.fullKey=y,C}static matchEventFullKeyCode(o,a){let c=Pb[o.key]||o.key,d="";return a.indexOf("code.")>-1&&(c=o.code,d="code."),!(null==c||!c)&&(c=c.toLowerCase()," "===c?c="space":"."===c&&(c="dot"),mI.forEach(y=>{y!==c&&(0,Ab[y])(o)&&(d+=y+".")}),d+=c,d===a)}static eventCallback(o,a,c){return d=>{r.matchEventFullKeyCode(d,o)&&c.runGuarded(()=>a(d))}}static _normalizeKey(o){return"esc"===o?"escape":o}}return r.\u0275fac=function(o){return new(o||r)(Ut(ws))},r.\u0275prov=P({token:r,factory:r.\u0275fac}),r})();const Fb=pE(_O,"browser",[{provide:_D,useValue:"browser"},{provide:rE,useValue:function Ob(){sS.makeCurrent()},multi:!0},{provide:ws,useFactory:function bb(){return function mh(r){gh=r}(document),document},deps:[]}]),wI=new Yt(""),xI=[{provide:tC,useClass:class xb{addToWindow(s){Tn.getAngularTestability=(a,c=!0)=>{const d=s.findTestabilityInTree(a,c);if(null==d)throw new Error("Could not find testability for element.");return d},Tn.getAllAngularTestabilities=()=>s.getAllTestabilities(),Tn.getAllAngularRootElements=()=>s.getAllRootElements(),Tn.frameworkStabilizers||(Tn.frameworkStabilizers=[]),Tn.frameworkStabilizers.push(a=>{const c=Tn.getAllAngularTestabilities();let d=c.length,y=!1;const w=function(C){y=y||C,d--,0==d&&a(y)};c.forEach(function(C){C.whenStable(w)})})}findTestabilityInTree(s,o,a){return null==o?null:s.getTestability(o)??(a?$u().isShadowRoot(o)?this.findTestabilityInTree(s,o.host,!0):this.findTestabilityInTree(s,o.parentElement,!0):null)}},deps:[]},{provide:hE,useClass:PD,deps:[br,AD,tC]},{provide:PD,useClass:PD,deps:[br,AD,tC]}],CI=[{provide:Ui,useValue:"root"},{provide:Cu,useFactory:function Lb(){return new Cu},deps:[]},{provide:wC,useClass:Nb,multi:!0,deps:[ws,br,_D]},{provide:wC,useClass:kb,multi:!0,deps:[ws]},{provide:uS,useClass:uS,deps:[xC,gw,uw]},{provide:Yv,useExisting:uS},{provide:uI,useExisting:gw},{provide:gw,useClass:gw,deps:[ws]},{provide:xC,useClass:xC,deps:[wC,br]},{provide:iI,useClass:Cb,deps:[]},[]];let Rb=(()=>{class r{constructor(o){}static withServerTransition(o){return{ngModule:r,providers:[{provide:uw,useValue:o.appId},{provide:lI,useExisting:uw},wb]}}}return r.\u0275fac=function(o){return new(o||r)(Ut(wI,12))},r.\u0275mod=Fi({type:r}),r.\u0275inj=fi({providers:[...CI,...xI],imports:[tg,TO]}),r})(),MI=(()=>{class r{constructor(o){this._doc=o}getTitle(){return this._doc.title}setTitle(o){this._doc.title=o||""}}return r.\u0275fac=function(o){return new(o||r)(Ut(ws))},r.\u0275prov=P({token:r,factory:function(o){let a=null;return a=o?new o:function Vb(){return new MI(Ut(ws))}(),a},providedIn:"root"}),r})();function te(...r){return jt(r,fd(r))}typeof window<"u"&&window;class Wa extends ia{constructor(s){super(),this._value=s}get value(){return this.getValue()}_subscribe(s){const o=super._subscribe(s);return!o.closed&&s.next(this._value),o}getValue(){const{hasError:s,thrownError:o,_value:a}=this;if(s)throw o;return this._throwIfClosed(),a}next(s){super.next(this._value=s)}}const MC=St(r=>function(){r(this),this.name="EmptyError",this.message="no elements in sequence"}),{isArray:Yb}=Array,{getPrototypeOf:Kb,prototype:Xb,keys:Jb}=Object;function _I(r){if(1===r.length){const s=r[0];if(Yb(s))return{args:s,keys:null};if(function Zb(r){return r&&"object"==typeof r&&Kb(r)===Xb}(s)){const o=Jb(s);return{args:o.map(a=>s[a]),keys:o}}}return{args:r,keys:null}}const{isArray:Qb}=Array;function TI(r){return ke(s=>function qb(r,s){return Qb(s)?r(...s):r(s)}(r,s))}function EI(r,s){return r.reduce((o,a,c)=>(o[a]=s[c],o),{})}function II(...r){const s=fd(r),o=ix(r),{args:a,keys:c}=_I(r);if(0===a.length)return jt([],s);const d=new bi(function tF(r,s,o=gc){return a=>{NI(s,()=>{const{length:c}=r,d=new Array(c);let y=c,w=c;for(let C=0;C<c;C++)NI(s,()=>{const S=jt(r[C],s);let E=!1;S.subscribe(ar(a,A=>{d[C]=A,E||(E=!0,w--),w||a.next(o(d.slice()))},()=>{--y||a.complete()}))},a)},a)}}(a,s,c?y=>EI(c,y):gc));return o?d.pipe(TI(o)):d}function NI(r,s,o){r?vl(o,r,s):s()}function dS(...r){return function eF(){return Ka(1)}()(jt(r,fd(r)))}function PI(r){return new bi(s=>{Ws(r()).subscribe(s)})}function mw(r,s){const o=Yn(r)?r:()=>r,a=c=>c.error(o());return new bi(s?c=>s.schedule(a,0,c):a)}function pS(){return _r((r,s)=>{let o=null;r._refCount++;const a=ar(s,void 0,void 0,void 0,()=>{if(!r||r._refCount<=0||0<--r._refCount)return void(o=null);const c=r._connection,d=o;o=null,c&&(!d||c===d)&&c.unsubscribe(),s.unsubscribe()});r.subscribe(a),a.closed||(o=r.connect())})}class AI extends bi{constructor(s,o){super(),this.source=s,this.subjectFactory=o,this._subject=null,this._refCount=0,this._connection=null,mM(s)&&(this.lift=s.lift)}_subscribe(s){return this.getSubject().subscribe(s)}getSubject(){const s=this._subject;return(!s||s.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:s}=this;this._subject=this._connection=null,s?.unsubscribe()}connect(){let s=this._connection;if(!s){s=this._connection=new $s;const o=this.getSubject();s.add(this.source.subscribe(ar(o,void 0,()=>{this._teardown(),o.complete()},a=>{this._teardown(),o.error(a)},()=>this._teardown()))),s.closed&&(this._connection=null,s=$s.EMPTY)}return s}refCount(){return pS()(this)}}function Wu(r,s){return _r((o,a)=>{let c=null,d=0,y=!1;const w=()=>y&&!c&&a.complete();o.subscribe(ar(a,C=>{c?.unsubscribe();let S=0;const E=d++;Ws(r(C,E)).subscribe(c=ar(a,A=>a.next(s?s(C,A,E,S++):A),()=>{c=null,w()}))},()=>{y=!0,w()}))})}function yw(r){return r<=0?()=>ra:_r((s,o)=>{let a=0;s.subscribe(ar(o,c=>{++a<=r&&(o.next(c),r<=a&&o.complete())}))})}function lc(r,s){return _r((o,a)=>{let c=0;o.subscribe(ar(a,d=>r.call(s,d,c++)&&a.next(d)))})}function DC(r){return _r((s,o)=>{let a=!1;s.subscribe(ar(o,c=>{a=!0,o.next(c)},()=>{a||o.next(r),o.complete()}))})}function kI(r=iF){return _r((s,o)=>{let a=!1;s.subscribe(ar(o,c=>{a=!0,o.next(c)},()=>a?o.complete():o.error(r())))})}function iF(){return new MC}function qf(r,s){const o=arguments.length>=2;return a=>a.pipe(r?lc((c,d)=>r(c,d,a)):gc,yw(1),o?DC(s):kI(()=>new MC))}function td(r,s){return Yn(s)?Xi(r,s,1):Xi(r,1)}function Xo(r,s,o){const a=Yn(r)||s||o?{next:r,error:s,complete:o}:r;return a?_r((c,d)=>{var y;null===(y=a.subscribe)||void 0===y||y.call(a);let w=!0;c.subscribe(ar(d,C=>{var S;null===(S=a.next)||void 0===S||S.call(a,C),d.next(C)},()=>{var C;w=!1,null===(C=a.complete)||void 0===C||C.call(a),d.complete()},C=>{var S;w=!1,null===(S=a.error)||void 0===S||S.call(a,C),d.error(C)},()=>{var C,S;w&&(null===(C=a.unsubscribe)||void 0===C||C.call(a)),null===(S=a.finalize)||void 0===S||S.call(a)}))}):gc}function ed(r){return _r((s,o)=>{let d,a=null,c=!1;a=s.subscribe(ar(o,void 0,void 0,y=>{d=Ws(r(y,ed(r)(s))),a?(a.unsubscribe(),a=null,d.subscribe(o)):c=!0})),c&&(a.unsubscribe(),a=null,d.subscribe(o))})}function rF(r,s,o,a,c){return(d,y)=>{let w=o,C=s,S=0;d.subscribe(ar(y,E=>{const A=S++;C=w?r(C,E,A):(w=!0,E),a&&y.next(C)},c&&(()=>{w&&y.next(C),y.complete()})))}}function OI(r,s){return _r(rF(r,s,arguments.length>=2,!0))}function gS(r){return r<=0?()=>ra:_r((s,o)=>{let a=[];s.subscribe(ar(o,c=>{a.push(c),r<a.length&&a.shift()},()=>{for(const c of a)o.next(c);o.complete()},void 0,()=>{a=null}))})}function LI(r,s){const o=arguments.length>=2;return a=>a.pipe(r?lc((c,d)=>r(c,d,a)):gc,gS(1),o?DC(s):kI(()=>new MC))}function mS(r){return _r((s,o)=>{try{s.subscribe(o)}finally{o.add(r)}})}const Re="primary",vw=Symbol("RouteTitle");class lF{constructor(s){this.params=s||{}}has(s){return Object.prototype.hasOwnProperty.call(this.params,s)}get(s){if(this.has(s)){const o=this.params[s];return Array.isArray(o)?o[0]:o}return null}getAll(s){if(this.has(s)){const o=this.params[s];return Array.isArray(o)?o:[o]}return[]}get keys(){return Object.keys(this.params)}}function Ny(r){return new lF(r)}function aF(r,s,o){const a=o.path.split("/");if(a.length>r.length||"full"===o.pathMatch&&(s.hasChildren()||a.length<r.length))return null;const c={};for(let d=0;d<a.length;d++){const y=a[d],w=r[d];if(y.startsWith(":"))c[y.substring(1)]=w;else if(y!==w.path)return null}return{consumed:r.slice(0,a.length),posParams:c}}function Yu(r,s){const o=r?Object.keys(r):void 0,a=s?Object.keys(s):void 0;if(!o||!a||o.length!=a.length)return!1;let c;for(let d=0;d<o.length;d++)if(c=o[d],!bI(r[c],s[c]))return!1;return!0}function bI(r,s){if(Array.isArray(r)&&Array.isArray(s)){if(r.length!==s.length)return!1;const o=[...r].sort(),a=[...s].sort();return o.every((c,d)=>a[d]===c)}return r===s}function FI(r){return Array.prototype.concat.apply([],r)}function RI(r){return r.length>0?r[r.length-1]:null}function Co(r,s){for(const o in r)r.hasOwnProperty(o)&&s(r[o],o)}function nd(r){return Rf(r)?r:Rh(r)?jt(Promise.resolve(r)):te(r)}const cF={exact:function BI(r,s,o){if(!ng(r.segments,s.segments)||!SC(r.segments,s.segments,o)||r.numberOfChildren!==s.numberOfChildren)return!1;for(const a in s.children)if(!r.children[a]||!BI(r.children[a],s.children[a],o))return!1;return!0},subset:UI},jI={exact:function fF(r,s){return Yu(r,s)},subset:function dF(r,s){return Object.keys(s).length<=Object.keys(r).length&&Object.keys(s).every(o=>bI(r[o],s[o]))},ignored:()=>!0};function VI(r,s,o){return cF[o.paths](r.root,s.root,o.matrixParams)&&jI[o.queryParams](r.queryParams,s.queryParams)&&!("exact"===o.fragment&&r.fragment!==s.fragment)}function UI(r,s,o){return HI(r,s,s.segments,o)}function HI(r,s,o,a){if(r.segments.length>o.length){const c=r.segments.slice(0,o.length);return!(!ng(c,o)||s.hasChildren()||!SC(c,o,a))}if(r.segments.length===o.length){if(!ng(r.segments,o)||!SC(r.segments,o,a))return!1;for(const c in s.children)if(!r.children[c]||!UI(r.children[c],s.children[c],a))return!1;return!0}{const c=o.slice(0,r.segments.length),d=o.slice(r.segments.length);return!!(ng(r.segments,c)&&SC(r.segments,c,a)&&r.children[Re])&&HI(r.children[Re],s,d,a)}}function SC(r,s,o){return s.every((a,c)=>jI[o](r[c].parameters,a.parameters))}class eg{constructor(s,o,a){this.root=s,this.queryParams=o,this.fragment=a}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ny(this.queryParams)),this._queryParamMap}toString(){return mF.serialize(this)}}class Ue{constructor(s,o){this.segments=s,this.children=o,this.parent=null,Co(o,(a,c)=>a.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return _C(this)}}class ww{constructor(s,o){this.path=s,this.parameters=o}get parameterMap(){return this._parameterMap||(this._parameterMap=Ny(this.parameters)),this._parameterMap}toString(){return WI(this)}}function ng(r,s){return r.length===s.length&&r.every((o,a)=>o.path===s[a].path)}let GI=(()=>{class r{}return r.\u0275fac=function(o){return new(o||r)},r.\u0275prov=P({token:r,factory:function(){return new vS},providedIn:"root"}),r})();class vS{parse(s){const o=new _F(s);return new eg(o.parseRootSegment(),o.parseQueryParams(),o.parseFragment())}serialize(s){const o=`/${xw(s.root,!0)}`,a=function wF(r){const s=Object.keys(r).map(o=>{const a=r[o];return Array.isArray(a)?a.map(c=>`${TC(o)}=${TC(c)}`).join("&"):`${TC(o)}=${TC(a)}`}).filter(o=>!!o);return s.length?`?${s.join("&")}`:""}(s.queryParams);return`${o}${a}${"string"==typeof s.fragment?`#${function yF(r){return encodeURI(r)}(s.fragment)}`:""}`}}const mF=new vS;function _C(r){return r.segments.map(s=>WI(s)).join("/")}function xw(r,s){if(!r.hasChildren())return _C(r);if(s){const o=r.children[Re]?xw(r.children[Re],!1):"",a=[];return Co(r.children,(c,d)=>{d!==Re&&a.push(`${d}:${xw(c,!1)}`)}),a.length>0?`${o}(${a.join("//")})`:o}{const o=function gF(r,s){let o=[];return Co(r.children,(a,c)=>{c===Re&&(o=o.concat(s(a,c)))}),Co(r.children,(a,c)=>{c!==Re&&(o=o.concat(s(a,c)))}),o}(r,(a,c)=>c===Re?[xw(r.children[Re],!1)]:[`${c}:${xw(a,!1)}`]);return 1===Object.keys(r.children).length&&null!=r.children[Re]?`${_C(r)}/${o[0]}`:`${_C(r)}/(${o.join("//")})`}}function zI(r){return encodeURIComponent(r).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function TC(r){return zI(r).replace(/%3B/gi,";")}function wS(r){return zI(r).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function EC(r){return decodeURIComponent(r)}function $I(r){return EC(r.replace(/\+/g,"%20"))}function WI(r){return`${wS(r.path)}${function vF(r){return Object.keys(r).map(s=>`;${wS(s)}=${wS(r[s])}`).join("")}(r.parameters)}`}const xF=/^[^\/()?;=#]+/;function IC(r){const s=r.match(xF);return s?s[0]:""}const CF=/^[^=?&#]+/,DF=/^[^&#]+/;class _F{constructor(s){this.url=s,this.remaining=s}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ue([],{}):new Ue([],this.parseChildren())}parseQueryParams(){const s={};if(this.consumeOptional("?"))do{this.parseQueryParam(s)}while(this.consumeOptional("&"));return s}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const s=[];for(this.peekStartsWith("(")||s.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),s.push(this.parseSegment());let o={};this.peekStartsWith("/(")&&(this.capture("/"),o=this.parseParens(!0));let a={};return this.peekStartsWith("(")&&(a=this.parseParens(!1)),(s.length>0||Object.keys(o).length>0)&&(a[Re]=new Ue(s,o)),a}parseSegment(){const s=IC(this.remaining);if(""===s&&this.peekStartsWith(";"))throw new Tt(4009,!1);return this.capture(s),new ww(EC(s),this.parseMatrixParams())}parseMatrixParams(){const s={};for(;this.consumeOptional(";");)this.parseParam(s);return s}parseParam(s){const o=IC(this.remaining);if(!o)return;this.capture(o);let a="";if(this.consumeOptional("=")){const c=IC(this.remaining);c&&(a=c,this.capture(a))}s[EC(o)]=EC(a)}parseQueryParam(s){const o=function MF(r){const s=r.match(CF);return s?s[0]:""}(this.remaining);if(!o)return;this.capture(o);let a="";if(this.consumeOptional("=")){const y=function SF(r){const s=r.match(DF);return s?s[0]:""}(this.remaining);y&&(a=y,this.capture(a))}const c=$I(o),d=$I(a);if(s.hasOwnProperty(c)){let y=s[c];Array.isArray(y)||(y=[y],s[c]=y),y.push(d)}else s[c]=d}parseParens(s){const o={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const a=IC(this.remaining),c=this.remaining[a.length];if("/"!==c&&")"!==c&&";"!==c)throw new Tt(4010,!1);let d;a.indexOf(":")>-1?(d=a.slice(0,a.indexOf(":")),this.capture(d),this.capture(":")):s&&(d=Re);const y=this.parseChildren();o[d]=1===Object.keys(y).length?y[Re]:new Ue([],y),this.consumeOptional("//")}return o}peekStartsWith(s){return this.remaining.startsWith(s)}consumeOptional(s){return!!this.peekStartsWith(s)&&(this.remaining=this.remaining.substring(s.length),!0)}capture(s){if(!this.consumeOptional(s))throw new Tt(4011,!1)}}function xS(r){return r.segments.length>0?new Ue([],{[Re]:r}):r}function NC(r){const s={};for(const a of Object.keys(r.children)){const d=NC(r.children[a]);(d.segments.length>0||d.hasChildren())&&(s[a]=d)}return function TF(r){if(1===r.numberOfChildren&&r.children[Re]){const s=r.children[Re];return new Ue(r.segments.concat(s.segments),s.children)}return r}(new Ue(r.segments,s))}function ig(r){return r instanceof eg}function NF(r,s,o,a,c){if(0===o.length)return Py(s.root,s.root,s.root,a,c);const d=function XI(r){if("string"==typeof r[0]&&1===r.length&&"/"===r[0])return new KI(!0,0,r);let s=0,o=!1;const a=r.reduce((c,d,y)=>{if("object"==typeof d&&null!=d){if(d.outlets){const w={};return Co(d.outlets,(C,S)=>{w[S]="string"==typeof C?C.split("/"):C}),[...c,{outlets:w}]}if(d.segmentPath)return[...c,d.segmentPath]}return"string"!=typeof d?[...c,d]:0===y?(d.split("/").forEach((w,C)=>{0==C&&"."===w||(0==C&&""===w?o=!0:".."===w?s++:""!=w&&c.push(w))}),c):[...c,d]},[]);return new KI(o,s,a)}(o);return d.toRoot()?Py(s.root,s.root,new Ue([],{}),a,c):function y(C){const S=function AF(r,s,o,a){if(r.isAbsolute)return new Ay(s.root,!0,0);if(-1===a)return new Ay(o,o===s.root,0);return function JI(r,s,o){let a=r,c=s,d=o;for(;d>c;){if(d-=c,a=a.parent,!a)throw new Tt(4005,!1);c=a.segments.length}return new Ay(a,!1,c-d)}(o,a+(Cw(r.commands[0])?0:1),r.numberOfDoubleDots)}(d,s,r.snapshot?._urlSegment,C),E=S.processChildren?Dw(S.segmentGroup,S.index,d.commands):MS(S.segmentGroup,S.index,d.commands);return Py(s.root,S.segmentGroup,E,a,c)}(r.snapshot?._lastPathIndex)}function Cw(r){return"object"==typeof r&&null!=r&&!r.outlets&&!r.segmentPath}function Mw(r){return"object"==typeof r&&null!=r&&r.outlets}function Py(r,s,o,a,c){let y,d={};a&&Co(a,(C,S)=>{d[S]=Array.isArray(C)?C.map(E=>`${E}`):`${C}`}),y=r===s?o:YI(r,s,o);const w=xS(NC(y));return new eg(w,d,c)}function YI(r,s,o){const a={};return Co(r.children,(c,d)=>{a[d]=c===s?o:YI(c,s,o)}),new Ue(r.segments,a)}class KI{constructor(s,o,a){if(this.isAbsolute=s,this.numberOfDoubleDots=o,this.commands=a,s&&a.length>0&&Cw(a[0]))throw new Tt(4003,!1);const c=a.find(Mw);if(c&&c!==RI(a))throw new Tt(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Ay{constructor(s,o,a){this.segmentGroup=s,this.processChildren=o,this.index=a}}function MS(r,s,o){if(r||(r=new Ue([],{})),0===r.segments.length&&r.hasChildren())return Dw(r,s,o);const a=function OF(r,s,o){let a=0,c=s;const d={match:!1,pathIndex:0,commandIndex:0};for(;c<r.segments.length;){if(a>=o.length)return d;const y=r.segments[c],w=o[a];if(Mw(w))break;const C=`${w}`,S=a<o.length-1?o[a+1]:null;if(c>0&&void 0===C)break;if(C&&S&&"object"==typeof S&&void 0===S.outlets){if(!QI(C,S,y))return d;a+=2}else{if(!QI(C,{},y))return d;a++}c++}return{match:!0,pathIndex:c,commandIndex:a}}(r,s,o),c=o.slice(a.commandIndex);if(a.match&&a.pathIndex<r.segments.length){const d=new Ue(r.segments.slice(0,a.pathIndex),{});return d.children[Re]=new Ue(r.segments.slice(a.pathIndex),r.children),Dw(d,0,c)}return a.match&&0===c.length?new Ue(r.segments,{}):a.match&&!r.hasChildren()?DS(r,s,o):a.match?Dw(r,0,c):DS(r,s,o)}function Dw(r,s,o){if(0===o.length)return new Ue(r.segments,{});{const a=function kF(r){return Mw(r[0])?r[0].outlets:{[Re]:r}}(o),c={};return Co(a,(d,y)=>{"string"==typeof d&&(d=[d]),null!==d&&(c[y]=MS(r.children[y],s,d))}),Co(r.children,(d,y)=>{void 0===a[y]&&(c[y]=d)}),new Ue(r.segments,c)}}function DS(r,s,o){const a=r.segments.slice(0,s);let c=0;for(;c<o.length;){const d=o[c];if(Mw(d)){const C=LF(d.outlets);return new Ue(a,C)}if(0===c&&Cw(o[0])){a.push(new ww(r.segments[s].path,ZI(o[0]))),c++;continue}const y=Mw(d)?d.outlets[Re]:`${d}`,w=c<o.length-1?o[c+1]:null;y&&w&&Cw(w)?(a.push(new ww(y,ZI(w))),c+=2):(a.push(new ww(y,{})),c++)}return new Ue(a,{})}function LF(r){const s={};return Co(r,(o,a)=>{"string"==typeof o&&(o=[o]),null!==o&&(s[a]=DS(new Ue([],{}),0,o))}),s}function ZI(r){const s={};return Co(r,(o,a)=>s[a]=`${o}`),s}function QI(r,s,o){return r==o.path&&Yu(s,o.parameters)}class ac{constructor(s,o){this.id=s,this.url=o}}class SS extends ac{constructor(s,o,a="imperative",c=null){super(s,o),this.type=0,this.navigationTrigger=a,this.restoredState=c}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class rg extends ac{constructor(s,o,a){super(s,o),this.urlAfterRedirects=a,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class PC extends ac{constructor(s,o,a,c){super(s,o),this.reason=a,this.code=c,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class qI extends ac{constructor(s,o,a,c){super(s,o),this.error=a,this.target=c,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class bF extends ac{constructor(s,o,a,c){super(s,o),this.urlAfterRedirects=a,this.state=c,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class FF extends ac{constructor(s,o,a,c){super(s,o),this.urlAfterRedirects=a,this.state=c,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class RF extends ac{constructor(s,o,a,c,d){super(s,o),this.urlAfterRedirects=a,this.state=c,this.shouldActivate=d,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class jF extends ac{constructor(s,o,a,c){super(s,o),this.urlAfterRedirects=a,this.state=c,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class VF extends ac{constructor(s,o,a,c){super(s,o),this.urlAfterRedirects=a,this.state=c,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class BF{constructor(s){this.route=s,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class UF{constructor(s){this.route=s,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class HF{constructor(s){this.snapshot=s,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class GF{constructor(s){this.snapshot=s,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class zF{constructor(s){this.snapshot=s,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class $F{constructor(s){this.snapshot=s,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class tN{constructor(s,o,a){this.routerEvent=s,this.position=o,this.anchor=a,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class eN{constructor(s){this._root=s}get root(){return this._root.value}parent(s){const o=this.pathFromRoot(s);return o.length>1?o[o.length-2]:null}children(s){const o=_S(s,this._root);return o?o.children.map(a=>a.value):[]}firstChild(s){const o=_S(s,this._root);return o&&o.children.length>0?o.children[0].value:null}siblings(s){const o=TS(s,this._root);return o.length<2?[]:o[o.length-2].children.map(c=>c.value).filter(c=>c!==s)}pathFromRoot(s){return TS(s,this._root).map(o=>o.value)}}function _S(r,s){if(r===s.value)return s;for(const o of s.children){const a=_S(r,o);if(a)return a}return null}function TS(r,s){if(r===s.value)return[s];for(const o of s.children){const a=TS(r,o);if(a.length)return a.unshift(s),a}return[]}class uc{constructor(s,o){this.value=s,this.children=o}toString(){return`TreeNode(${this.value})`}}function ky(r){const s={};return r&&r.children.forEach(o=>s[o.value.outlet]=o),s}class nN extends eN{constructor(s,o){super(s),this.snapshot=o,ES(this,s)}toString(){return this.snapshot.toString()}}function iN(r,s){const o=function YF(r,s){const y=new AC([],{},{},"",{},Re,s,null,r.root,-1,{});return new oN("",new uc(y,[]))}(r,s),a=new Wa([new ww("",{})]),c=new Wa({}),d=new Wa({}),y=new Wa({}),w=new Wa(""),C=new og(a,c,y,w,d,Re,s,o.root);return C.snapshot=o.root,new nN(new uc(C,[]),o)}class og{constructor(s,o,a,c,d,y,w,C){this.url=s,this.params=o,this.queryParams=a,this.fragment=c,this.data=d,this.outlet=y,this.component=w,this.title=this.data?.pipe(ke(S=>S[vw]))??te(void 0),this._futureSnapshot=C}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(ke(s=>Ny(s)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(ke(s=>Ny(s)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function rN(r,s="emptyOnly"){const o=r.pathFromRoot;let a=0;if("always"!==s)for(a=o.length-1;a>=1;){const c=o[a],d=o[a-1];if(c.routeConfig&&""===c.routeConfig.path)a--;else{if(d.component)break;a--}}return function KF(r){return r.reduce((s,o)=>({params:{...s.params,...o.params},data:{...s.data,...o.data},resolve:{...o.data,...s.resolve,...o.routeConfig?.data,...o._resolvedData}}),{params:{},data:{},resolve:{}})}(o.slice(a))}class AC{constructor(s,o,a,c,d,y,w,C,S,E,A,R){this.url=s,this.params=o,this.queryParams=a,this.fragment=c,this.data=d,this.outlet=y,this.component=w,this.title=this.data?.[vw],this.routeConfig=C,this._urlSegment=S,this._lastPathIndex=E,this._correctedLastPathIndex=R??E,this._resolve=A}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Ny(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ny(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(a=>a.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class oN extends eN{constructor(s,o){super(o),this.url=s,ES(this,o)}toString(){return sN(this._root)}}function ES(r,s){s.value._routerState=r,s.children.forEach(o=>ES(r,o))}function sN(r){const s=r.children.length>0?` { ${r.children.map(sN).join(", ")} } `:"";return`${r.value}${s}`}function IS(r){if(r.snapshot){const s=r.snapshot,o=r._futureSnapshot;r.snapshot=o,Yu(s.queryParams,o.queryParams)||r.queryParams.next(o.queryParams),s.fragment!==o.fragment&&r.fragment.next(o.fragment),Yu(s.params,o.params)||r.params.next(o.params),function uF(r,s){if(r.length!==s.length)return!1;for(let o=0;o<r.length;++o)if(!Yu(r[o],s[o]))return!1;return!0}(s.url,o.url)||r.url.next(o.url),Yu(s.data,o.data)||r.data.next(o.data)}else r.snapshot=r._futureSnapshot,r.data.next(r._futureSnapshot.data)}function NS(r,s){const o=Yu(r.params,s.params)&&function pF(r,s){return ng(r,s)&&r.every((o,a)=>Yu(o.parameters,s[a].parameters))}(r.url,s.url);return o&&!(!r.parent!=!s.parent)&&(!r.parent||NS(r.parent,s.parent))}function Sw(r,s,o){if(o&&r.shouldReuseRoute(s.value,o.value.snapshot)){const a=o.value;a._futureSnapshot=s.value;const c=function JF(r,s,o){return s.children.map(a=>{for(const c of o.children)if(r.shouldReuseRoute(a.value,c.value.snapshot))return Sw(r,a,c);return Sw(r,a)})}(r,s,o);return new uc(a,c)}{if(r.shouldAttach(s.value)){const d=r.retrieve(s.value);if(null!==d){const y=d.route;return y.value._futureSnapshot=s.value,y.children=s.children.map(w=>Sw(r,w)),y}}const a=function ZF(r){return new og(new Wa(r.url),new Wa(r.params),new Wa(r.queryParams),new Wa(r.fragment),new Wa(r.data),r.outlet,r.component,r)}(s.value),c=s.children.map(d=>Sw(r,d));return new uc(a,c)}}const PS="ngNavigationCancelingError";function lN(r,s){const{redirectTo:o,navigationBehaviorOptions:a}=ig(s)?{redirectTo:s,navigationBehaviorOptions:void 0}:s,c=aN(!1,0,s);return c.url=o,c.navigationBehaviorOptions=a,c}function aN(r,s,o){const a=new Error("NavigationCancelingError: "+(r||""));return a[PS]=!0,a.cancellationCode=s,o&&(a.url=o),a}function uN(r){return hN(r)&&ig(r.url)}function hN(r){return r&&r[PS]}class QF{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new _w,this.attachRef=null}}let _w=(()=>{class r{constructor(){this.contexts=new Map}onChildOutletCreated(o,a){const c=this.getOrCreateContext(o);c.outlet=a,this.contexts.set(o,c)}onChildOutletDestroyed(o){const a=this.getContext(o);a&&(a.outlet=null,a.attachRef=null)}onOutletDeactivated(){const o=this.contexts;return this.contexts=new Map,o}onOutletReAttached(o){this.contexts=o}getOrCreateContext(o){let a=this.getContext(o);return a||(a=new QF,this.contexts.set(o,a)),a}getContext(o){return this.contexts.get(o)||null}}return r.\u0275fac=function(o){return new(o||r)},r.\u0275prov=P({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const kC=!1;let cN=(()=>{class r{constructor(o,a,c,d,y){this.parentContexts=o,this.location=a,this.changeDetector=d,this.environmentInjector=y,this.activated=null,this._activatedRoute=null,this.activateEvents=new Wn,this.deactivateEvents=new Wn,this.attachEvents=new Wn,this.detachEvents=new Wn,this.name=c||Re,o.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const o=this.parentContexts.getContext(this.name);o&&o.route&&(o.attachRef?this.attach(o.attachRef,o.route):this.activateWith(o.route,o.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Tt(4012,kC);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Tt(4012,kC);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Tt(4012,kC);this.location.detach();const o=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(o.instance),o}attach(o,a){this.activated=o,this._activatedRoute=a,this.location.insert(o.hostView),this.attachEvents.emit(o.instance)}deactivate(){if(this.activated){const o=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(o)}}activateWith(o,a){if(this.isActivated)throw new Tt(4013,kC);this._activatedRoute=o;const c=this.location,y=o._futureSnapshot.component,w=this.parentContexts.getOrCreateContext(this.name).children,C=new qF(o,w,c.injector);if(a&&function t2(r){return!!r.resolveComponentFactory}(a)){const S=a.resolveComponentFactory(y);this.activated=c.createComponent(S,c.length,C)}else this.activated=c.createComponent(y,{index:c.length,injector:C,environmentInjector:a??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return r.\u0275fac=function(o){return new(o||r)(ct(_w),ct(Ha),function yr(r){return function Tg(r,s){if("class"===s)return r.classes;if("style"===s)return r.styles;const o=r.attrs;if(o){const a=o.length;let c=0;for(;c<a;){const d=o[c];if(_d(d))break;if(0===d)c+=2;else if("number"==typeof d)for(c++;c<a&&"string"==typeof o[c];)c++;else{if(d===s)return o[c+1];c+=2}}}return null}(ji(),r)}("name"),ct(Iy),ct(rl))},r.\u0275dir=Kt({type:r,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),r})();class qF{constructor(s,o,a){this.route=s,this.childContexts=o,this.parent=a}get(s,o){return s===og?this.route:s===_w?this.childContexts:this.parent.get(s,o)}}let AS=(()=>{class r{}return r.\u0275fac=function(o){return new(o||r)},r.\u0275cmp=_o({type:r,selectors:[["ng-component"]],standalone:!0,features:[vT],decls:1,vars:0,template:function(o,a){1&o&&Nu(0,"router-outlet")},dependencies:[cN],encapsulation:2}),r})();function fN(r,s){return r.providers&&!r._injector&&(r._injector=Jf(r.providers,s,`Route: ${r.path}`)),r._injector??s}function OS(r){const s=r.children&&r.children.map(OS),o=s?{...r,children:s}:{...r};return!o.component&&!o.loadComponent&&(s||o.loadChildren)&&o.outlet&&o.outlet!==Re&&(o.component=AS),o}function na(r){return r.outlet||Re}function dN(r,s){const o=r.filter(a=>na(a)===s);return o.push(...r.filter(a=>na(a)!==s)),o}function Tw(r){if(!r)return null;if(r.routeConfig?._injector)return r.routeConfig._injector;for(let s=r.parent;s;s=s.parent){const o=s.routeConfig;if(o?._loadedInjector)return o._loadedInjector;if(o?._injector)return o._injector}return null}class s2{constructor(s,o,a,c){this.routeReuseStrategy=s,this.futureState=o,this.currState=a,this.forwardEvent=c}activate(s){const o=this.futureState._root,a=this.currState?this.currState._root:null;this.deactivateChildRoutes(o,a,s),IS(this.futureState.root),this.activateChildRoutes(o,a,s)}deactivateChildRoutes(s,o,a){const c=ky(o);s.children.forEach(d=>{const y=d.value.outlet;this.deactivateRoutes(d,c[y],a),delete c[y]}),Co(c,(d,y)=>{this.deactivateRouteAndItsChildren(d,a)})}deactivateRoutes(s,o,a){const c=s.value,d=o?o.value:null;if(c===d)if(c.component){const y=a.getContext(c.outlet);y&&this.deactivateChildRoutes(s,o,y.children)}else this.deactivateChildRoutes(s,o,a);else d&&this.deactivateRouteAndItsChildren(o,a)}deactivateRouteAndItsChildren(s,o){s.value.component&&this.routeReuseStrategy.shouldDetach(s.value.snapshot)?this.detachAndStoreRouteSubtree(s,o):this.deactivateRouteAndOutlet(s,o)}detachAndStoreRouteSubtree(s,o){const a=o.getContext(s.value.outlet),c=a&&s.value.component?a.children:o,d=ky(s);for(const y of Object.keys(d))this.deactivateRouteAndItsChildren(d[y],c);if(a&&a.outlet){const y=a.outlet.detach(),w=a.children.onOutletDeactivated();this.routeReuseStrategy.store(s.value.snapshot,{componentRef:y,route:s,contexts:w})}}deactivateRouteAndOutlet(s,o){const a=o.getContext(s.value.outlet),c=a&&s.value.component?a.children:o,d=ky(s);for(const y of Object.keys(d))this.deactivateRouteAndItsChildren(d[y],c);a&&a.outlet&&(a.outlet.deactivate(),a.children.onOutletDeactivated(),a.attachRef=null,a.resolver=null,a.route=null)}activateChildRoutes(s,o,a){const c=ky(o);s.children.forEach(d=>{this.activateRoutes(d,c[d.value.outlet],a),this.forwardEvent(new $F(d.value.snapshot))}),s.children.length&&this.forwardEvent(new GF(s.value.snapshot))}activateRoutes(s,o,a){const c=s.value,d=o?o.value:null;if(IS(c),c===d)if(c.component){const y=a.getOrCreateContext(c.outlet);this.activateChildRoutes(s,o,y.children)}else this.activateChildRoutes(s,o,a);else if(c.component){const y=a.getOrCreateContext(c.outlet);if(this.routeReuseStrategy.shouldAttach(c.snapshot)){const w=this.routeReuseStrategy.retrieve(c.snapshot);this.routeReuseStrategy.store(c.snapshot,null),y.children.onOutletReAttached(w.contexts),y.attachRef=w.componentRef,y.route=w.route.value,y.outlet&&y.outlet.attach(w.componentRef,w.route.value),IS(w.route.value),this.activateChildRoutes(s,null,y.children)}else{const w=Tw(c.snapshot),C=w?.get(tf)??null;y.attachRef=null,y.route=c,y.resolver=C,y.injector=w,y.outlet&&y.outlet.activateWith(c,y.injector),this.activateChildRoutes(s,null,y.children)}}else this.activateChildRoutes(s,null,a)}}class pN{constructor(s){this.path=s,this.route=this.path[this.path.length-1]}}class OC{constructor(s,o){this.component=s,this.route=o}}function l2(r,s,o){const a=r._root;return Ew(a,s?s._root:null,o,[a.value])}function Oy(r,s){const o=Symbol(),a=s.get(r,o);return a===o?"function"!=typeof r||function $y(r){return null!==yc(r)}(r)?s.get(r):r:a}function Ew(r,s,o,a,c={canDeactivateChecks:[],canActivateChecks:[]}){const d=ky(s);return r.children.forEach(y=>{(function u2(r,s,o,a,c={canDeactivateChecks:[],canActivateChecks:[]}){const d=r.value,y=s?s.value:null,w=o?o.getContext(r.value.outlet):null;if(y&&d.routeConfig===y.routeConfig){const C=function h2(r,s,o){if("function"==typeof o)return o(r,s);switch(o){case"pathParamsChange":return!ng(r.url,s.url);case"pathParamsOrQueryParamsChange":return!ng(r.url,s.url)||!Yu(r.queryParams,s.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!NS(r,s)||!Yu(r.queryParams,s.queryParams);default:return!NS(r,s)}}(y,d,d.routeConfig.runGuardsAndResolvers);C?c.canActivateChecks.push(new pN(a)):(d.data=y.data,d._resolvedData=y._resolvedData),Ew(r,s,d.component?w?w.children:null:o,a,c),C&&w&&w.outlet&&w.outlet.isActivated&&c.canDeactivateChecks.push(new OC(w.outlet.component,y))}else y&&Iw(s,w,c),c.canActivateChecks.push(new pN(a)),Ew(r,null,d.component?w?w.children:null:o,a,c)})(y,d[y.value.outlet],o,a.concat([y.value]),c),delete d[y.value.outlet]}),Co(d,(y,w)=>Iw(y,o.getContext(w),c)),c}function Iw(r,s,o){const a=ky(r),c=r.value;Co(a,(d,y)=>{Iw(d,c.component?s?s.children.getContext(y):null:s,o)}),o.canDeactivateChecks.push(new OC(c.component&&s&&s.outlet&&s.outlet.isActivated?s.outlet.component:null,c))}function Nw(r){return"function"==typeof r}function LS(r){return r instanceof MC||"EmptyError"===r?.name}const LC=Symbol("INITIAL_VALUE");function Ly(){return Wu(r=>II(r.map(s=>s.pipe(yw(1),function nF(...r){const s=fd(r);return _r((o,a)=>{(s?dS(r,o,s):dS(r,o)).subscribe(a)})}(LC)))).pipe(ke(s=>{for(const o of s)if(!0!==o){if(o===LC)return LC;if(!1===o||o instanceof eg)return o}return!0}),lc(s=>s!==LC),yw(1)))}function gN(r){return function $_(...r){return dM(r)}(Xo(s=>{if(ig(s))throw lN(0,s)}),ke(s=>!0===s))}const bS={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function mN(r,s,o,a,c){const d=FS(r,s,o);return d.matched?function E2(r,s,o,a){const c=s.canMatch;return c&&0!==c.length?te(c.map(y=>{const w=Oy(y,r);return nd(function m2(r){return r&&Nw(r.canMatch)}(w)?w.canMatch(s,o):r.runInContext(()=>w(s,o)))})).pipe(Ly(),gN()):te(!0)}(a=fN(s,a),s,o).pipe(ke(y=>!0===y?d:{...bS})):te(d)}function FS(r,s,o){if(""===s.path)return"full"===s.pathMatch&&(r.hasChildren()||o.length>0)?{...bS}:{matched:!0,consumedSegments:[],remainingSegments:o,parameters:{},positionalParamSegments:{}};const c=(s.matcher||aF)(o,r,s);if(!c)return{...bS};const d={};Co(c.posParams,(w,C)=>{d[C]=w.path});const y=c.consumed.length>0?{...d,...c.consumed[c.consumed.length-1].parameters}:d;return{matched:!0,consumedSegments:c.consumed,remainingSegments:o.slice(c.consumed.length),parameters:y,positionalParamSegments:c.posParams??{}}}function bC(r,s,o,a,c="corrected"){if(o.length>0&&function P2(r,s,o){return o.some(a=>FC(r,s,a)&&na(a)!==Re)}(r,o,a)){const y=new Ue(s,function N2(r,s,o,a){const c={};c[Re]=a,a._sourceSegment=r,a._segmentIndexShift=s.length;for(const d of o)if(""===d.path&&na(d)!==Re){const y=new Ue([],{});y._sourceSegment=r,y._segmentIndexShift=s.length,c[na(d)]=y}return c}(r,s,a,new Ue(o,r.children)));return y._sourceSegment=r,y._segmentIndexShift=s.length,{segmentGroup:y,slicedSegments:[]}}if(0===o.length&&function A2(r,s,o){return o.some(a=>FC(r,s,a))}(r,o,a)){const y=new Ue(r.segments,function I2(r,s,o,a,c,d){const y={};for(const w of a)if(FC(r,o,w)&&!c[na(w)]){const C=new Ue([],{});C._sourceSegment=r,C._segmentIndexShift="legacy"===d?r.segments.length:s.length,y[na(w)]=C}return{...c,...y}}(r,s,o,a,r.children,c));return y._sourceSegment=r,y._segmentIndexShift=s.length,{segmentGroup:y,slicedSegments:o}}const d=new Ue(r.segments,r.children);return d._sourceSegment=r,d._segmentIndexShift=s.length,{segmentGroup:d,slicedSegments:o}}function FC(r,s,o){return(!(r.hasChildren()||s.length>0)||"full"!==o.pathMatch)&&""===o.path}function yN(r,s,o,a){return!!(na(r)===a||a!==Re&&FC(s,o,r))&&("**"===r.path||FS(s,r,o).matched)}function vN(r,s,o){return 0===s.length&&!r.children[o]}const RC=!1;class jC{constructor(s){this.segmentGroup=s||null}}class wN{constructor(s){this.urlTree=s}}function Pw(r){return mw(new jC(r))}function xN(r){return mw(new wN(r))}class b2{constructor(s,o,a,c,d){this.injector=s,this.configLoader=o,this.urlSerializer=a,this.urlTree=c,this.config=d,this.allowRedirects=!0}apply(){const s=bC(this.urlTree.root,[],[],this.config).segmentGroup,o=new Ue(s.segments,s.children);return this.expandSegmentGroup(this.injector,this.config,o,Re).pipe(ke(d=>this.createUrlTree(NC(d),this.urlTree.queryParams,this.urlTree.fragment))).pipe(ed(d=>{if(d instanceof wN)return this.allowRedirects=!1,this.match(d.urlTree);throw d instanceof jC?this.noMatchError(d):d}))}match(s){return this.expandSegmentGroup(this.injector,this.config,s.root,Re).pipe(ke(c=>this.createUrlTree(NC(c),s.queryParams,s.fragment))).pipe(ed(c=>{throw c instanceof jC?this.noMatchError(c):c}))}noMatchError(s){return new Tt(4002,RC)}createUrlTree(s,o,a){const c=xS(s);return new eg(c,o,a)}expandSegmentGroup(s,o,a,c){return 0===a.segments.length&&a.hasChildren()?this.expandChildren(s,o,a).pipe(ke(d=>new Ue([],d))):this.expandSegment(s,a,o,a.segments,c,!0)}expandChildren(s,o,a){const c=[];for(const d of Object.keys(a.children))"primary"===d?c.unshift(d):c.push(d);return jt(c).pipe(td(d=>{const y=a.children[d],w=dN(o,d);return this.expandSegmentGroup(s,w,y,d).pipe(ke(C=>({segment:C,outlet:d})))}),OI((d,y)=>(d[y.outlet]=y.segment,d),{}),LI())}expandSegment(s,o,a,c,d,y){return jt(a).pipe(td(w=>this.expandSegmentAgainstRoute(s,o,a,w,c,d,y).pipe(ed(S=>{if(S instanceof jC)return te(null);throw S}))),qf(w=>!!w),ed((w,C)=>{if(LS(w))return vN(o,c,d)?te(new Ue([],{})):Pw(o);throw w}))}expandSegmentAgainstRoute(s,o,a,c,d,y,w){return yN(c,o,d,y)?void 0===c.redirectTo?this.matchSegmentAgainstRoute(s,o,c,d,y):w&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(s,o,a,c,d,y):Pw(o):Pw(o)}expandSegmentAgainstRouteUsingRedirect(s,o,a,c,d,y){return"**"===c.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(s,a,c,y):this.expandRegularSegmentAgainstRouteUsingRedirect(s,o,a,c,d,y)}expandWildCardWithParamsAgainstRouteUsingRedirect(s,o,a,c){const d=this.applyRedirectCommands([],a.redirectTo,{});return a.redirectTo.startsWith("/")?xN(d):this.lineralizeSegments(a,d).pipe(Xi(y=>{const w=new Ue(y,{});return this.expandSegment(s,w,o,y,c,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(s,o,a,c,d,y){const{matched:w,consumedSegments:C,remainingSegments:S,positionalParamSegments:E}=FS(o,c,d);if(!w)return Pw(o);const A=this.applyRedirectCommands(C,c.redirectTo,E);return c.redirectTo.startsWith("/")?xN(A):this.lineralizeSegments(c,A).pipe(Xi(R=>this.expandSegment(s,o,a,R.concat(S),y,!1)))}matchSegmentAgainstRoute(s,o,a,c,d){return"**"===a.path?(s=fN(a,s),a.loadChildren?(a._loadedRoutes?te({routes:a._loadedRoutes,injector:a._loadedInjector}):this.configLoader.loadChildren(s,a)).pipe(ke(w=>(a._loadedRoutes=w.routes,a._loadedInjector=w.injector,new Ue(c,{})))):te(new Ue(c,{}))):mN(o,a,c,s).pipe(Wu(({matched:y,consumedSegments:w,remainingSegments:C})=>y?this.getChildConfig(s=a._injector??s,a,c).pipe(Xi(E=>{const A=E.injector??s,R=E.routes,{segmentGroup:j,slicedSegments:z}=bC(o,w,C,R),tt=new Ue(j.segments,j.children);if(0===z.length&&tt.hasChildren())return this.expandChildren(A,R,tt).pipe(ke(at=>new Ue(w,at)));if(0===R.length&&0===z.length)return te(new Ue(w,{}));const st=na(a)===d;return this.expandSegment(A,tt,R,z,st?Re:d,!0).pipe(ke(Ct=>new Ue(w.concat(Ct.segments),Ct.children)))})):Pw(o)))}getChildConfig(s,o,a){return o.children?te({routes:o.children,injector:s}):o.loadChildren?void 0!==o._loadedRoutes?te({routes:o._loadedRoutes,injector:o._loadedInjector}):function T2(r,s,o,a){const c=s.canLoad;return void 0===c||0===c.length?te(!0):te(c.map(y=>{const w=Oy(y,r);return nd(function f2(r){return r&&Nw(r.canLoad)}(w)?w.canLoad(s,o):r.runInContext(()=>w(s,o)))})).pipe(Ly(),gN())}(s,o,a).pipe(Xi(c=>c?this.configLoader.loadChildren(s,o).pipe(Xo(d=>{o._loadedRoutes=d.routes,o._loadedInjector=d.injector})):function O2(r){return mw(aN(RC,3))}())):te({routes:[],injector:s})}lineralizeSegments(s,o){let a=[],c=o.root;for(;;){if(a=a.concat(c.segments),0===c.numberOfChildren)return te(a);if(c.numberOfChildren>1||!c.children[Re])return mw(new Tt(4e3,RC));c=c.children[Re]}}applyRedirectCommands(s,o,a){return this.applyRedirectCreateUrlTree(o,this.urlSerializer.parse(o),s,a)}applyRedirectCreateUrlTree(s,o,a,c){const d=this.createSegmentGroup(s,o.root,a,c);return new eg(d,this.createQueryParams(o.queryParams,this.urlTree.queryParams),o.fragment)}createQueryParams(s,o){const a={};return Co(s,(c,d)=>{if("string"==typeof c&&c.startsWith(":")){const w=c.substring(1);a[d]=o[w]}else a[d]=c}),a}createSegmentGroup(s,o,a,c){const d=this.createSegments(s,o.segments,a,c);let y={};return Co(o.children,(w,C)=>{y[C]=this.createSegmentGroup(s,w,a,c)}),new Ue(d,y)}createSegments(s,o,a,c){return o.map(d=>d.path.startsWith(":")?this.findPosParam(s,d,c):this.findOrReturn(d,a))}findPosParam(s,o,a){const c=a[o.path.substring(1)];if(!c)throw new Tt(4001,RC);return c}findOrReturn(s,o){let a=0;for(const c of o){if(c.path===s.path)return o.splice(a),c;a++}return s}}class R2{}class B2{constructor(s,o,a,c,d,y,w,C){this.injector=s,this.rootComponentType=o,this.config=a,this.urlTree=c,this.url=d,this.paramsInheritanceStrategy=y,this.relativeLinkResolution=w,this.urlSerializer=C}recognize(){const s=bC(this.urlTree.root,[],[],this.config.filter(o=>void 0===o.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,s,Re).pipe(ke(o=>{if(null===o)return null;const a=new AC([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Re,this.rootComponentType,null,this.urlTree.root,-1,{}),c=new uc(a,o),d=new oN(this.url,c);return this.inheritParamsAndData(d._root),d}))}inheritParamsAndData(s){const o=s.value,a=rN(o,this.paramsInheritanceStrategy);o.params=Object.freeze(a.params),o.data=Object.freeze(a.data),s.children.forEach(c=>this.inheritParamsAndData(c))}processSegmentGroup(s,o,a,c){return 0===a.segments.length&&a.hasChildren()?this.processChildren(s,o,a):this.processSegment(s,o,a,a.segments,c)}processChildren(s,o,a){return jt(Object.keys(a.children)).pipe(td(c=>{const d=a.children[c],y=dN(o,c);return this.processSegmentGroup(s,y,d,c)}),OI((c,d)=>c&&d?(c.push(...d),c):null),function oF(r,s=!1){return _r((o,a)=>{let c=0;o.subscribe(ar(a,d=>{const y=r(d,c++);(y||s)&&a.next(d),!y&&a.complete()}))})}(c=>null!==c),DC(null),LI(),ke(c=>{if(null===c)return null;const d=CN(c);return function U2(r){r.sort((s,o)=>s.value.outlet===Re?-1:o.value.outlet===Re?1:s.value.outlet.localeCompare(o.value.outlet))}(d),d}))}processSegment(s,o,a,c,d){return jt(o).pipe(td(y=>this.processSegmentAgainstRoute(y._injector??s,y,a,c,d)),qf(y=>!!y),ed(y=>{if(LS(y))return vN(a,c,d)?te([]):te(null);throw y}))}processSegmentAgainstRoute(s,o,a,c,d){if(o.redirectTo||!yN(o,a,c,d))return te(null);let y;if("**"===o.path){const w=c.length>0?RI(c).parameters:{},C=DN(a)+c.length;y=te({snapshot:new AC(c,w,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,_N(o),na(o),o.component??o._loadedComponent??null,o,MN(a),C,TN(o),C),consumedSegments:[],remainingSegments:[]})}else y=mN(a,o,c,s).pipe(ke(({matched:w,consumedSegments:C,remainingSegments:S,parameters:E})=>{if(!w)return null;const A=DN(a)+C.length;return{snapshot:new AC(C,E,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,_N(o),na(o),o.component??o._loadedComponent??null,o,MN(a),A,TN(o),A),consumedSegments:C,remainingSegments:S}}));return y.pipe(Wu(w=>{if(null===w)return te(null);const{snapshot:C,consumedSegments:S,remainingSegments:E}=w;s=o._injector??s;const A=o._loadedInjector??s,R=function H2(r){return r.children?r.children:r.loadChildren?r._loadedRoutes:[]}(o),{segmentGroup:j,slicedSegments:z}=bC(a,S,E,R.filter(st=>void 0===st.redirectTo),this.relativeLinkResolution);if(0===z.length&&j.hasChildren())return this.processChildren(A,R,j).pipe(ke(st=>null===st?null:[new uc(C,st)]));if(0===R.length&&0===z.length)return te([new uc(C,[])]);const tt=na(o)===d;return this.processSegment(A,R,j,z,tt?Re:d).pipe(ke(st=>null===st?null:[new uc(C,st)]))}))}}function G2(r){const s=r.value.routeConfig;return s&&""===s.path&&void 0===s.redirectTo}function CN(r){const s=[],o=new Set;for(const a of r){if(!G2(a)){s.push(a);continue}const c=s.find(d=>a.value.routeConfig===d.value.routeConfig);void 0!==c?(c.children.push(...a.children),o.add(c)):s.push(a)}for(const a of o){const c=CN(a.children);s.push(new uc(a.value,c))}return s.filter(a=>!o.has(a))}function MN(r){let s=r;for(;s._sourceSegment;)s=s._sourceSegment;return s}function DN(r){let s=r,o=s._segmentIndexShift??0;for(;s._sourceSegment;)s=s._sourceSegment,o+=s._segmentIndexShift??0;return o-1}function _N(r){return r.data||{}}function TN(r){return r.resolve||{}}function EN(r){return"string"==typeof r.title||null===r.title}function RS(r){return Wu(s=>{const o=r(s);return o?jt(o).pipe(ke(()=>s)):te(s)})}let IN=(()=>{class r{buildTitle(o){let a,c=o.root;for(;void 0!==c;)a=this.getResolvedTitleForRoute(c)??a,c=c.children.find(d=>d.outlet===Re);return a}getResolvedTitleForRoute(o){return o.data[vw]}}return r.\u0275fac=function(o){return new(o||r)},r.\u0275prov=P({token:r,factory:function(){return $e(NN)},providedIn:"root"}),r})(),NN=(()=>{class r extends IN{constructor(o){super(),this.title=o}updateTitle(o){const a=this.buildTitle(o);void 0!==a&&this.title.setTitle(a)}}return r.\u0275fac=function(o){return new(o||r)(Ut(MI))},r.\u0275prov=P({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();class Z2{}class q2 extends class Q2{shouldDetach(s){return!1}store(s,o){}shouldAttach(s){return!1}retrieve(s){return null}shouldReuseRoute(s,o){return s.routeConfig===o.routeConfig}}{}const BC=new Yt("",{providedIn:"root",factory:()=>({})}),jS=new Yt("ROUTES");let VS=(()=>{class r{constructor(o,a){this.injector=o,this.compiler=a,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(o){if(this.componentLoaders.get(o))return this.componentLoaders.get(o);if(o._loadedComponent)return te(o._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(o);const a=nd(o.loadComponent()).pipe(Xo(d=>{this.onLoadEndListener&&this.onLoadEndListener(o),o._loadedComponent=d}),mS(()=>{this.componentLoaders.delete(o)})),c=new AI(a,()=>new ia).pipe(pS());return this.componentLoaders.set(o,c),c}loadChildren(o,a){if(this.childrenLoaders.get(a))return this.childrenLoaders.get(a);if(a._loadedRoutes)return te({routes:a._loadedRoutes,injector:a._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(a);const d=this.loadModuleFactoryOrRoutes(a.loadChildren).pipe(ke(w=>{this.onLoadEndListener&&this.onLoadEndListener(a);let C,S,E=!1;Array.isArray(w)?S=w:(C=w.create(o).injector,S=FI(C.get(jS,[],Jt.Self|Jt.Optional)));return{routes:S.map(OS),injector:C}}),mS(()=>{this.childrenLoaders.delete(a)})),y=new AI(d,()=>new ia).pipe(pS());return this.childrenLoaders.set(a,y),y}loadModuleFactoryOrRoutes(o){return nd(o()).pipe(Xi(a=>a instanceof Kp||Array.isArray(a)?te(a):jt(this.compiler.compileModuleAsync(a))))}}return r.\u0275fac=function(o){return new(o||r)(Ut(nr),Ut(TD))},r.\u0275prov=P({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();class eR{}class nR{shouldProcessUrl(s){return!0}extract(s){return s}merge(s,o){return s}}function iR(r){throw r}function rR(r,s,o){return s.parse("/")}const oR={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},sR={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function AN(){const r=$e(GI),s=$e(_w),o=$e(UD),a=$e(nr),c=$e(TD),d=$e(jS,{optional:!0})??[],y=$e(BC,{optional:!0})??{},w=$e(NN),C=$e(IN,{optional:!0}),S=$e(eR,{optional:!0}),E=$e(Z2,{optional:!0}),A=new Mo(null,r,s,o,a,c,FI(d));return S&&(A.urlHandlingStrategy=S),E&&(A.routeReuseStrategy=E),A.titleStrategy=C??w,function lR(r,s){r.errorHandler&&(s.errorHandler=r.errorHandler),r.malformedUriErrorHandler&&(s.malformedUriErrorHandler=r.malformedUriErrorHandler),r.onSameUrlNavigation&&(s.onSameUrlNavigation=r.onSameUrlNavigation),r.paramsInheritanceStrategy&&(s.paramsInheritanceStrategy=r.paramsInheritanceStrategy),r.relativeLinkResolution&&(s.relativeLinkResolution=r.relativeLinkResolution),r.urlUpdateStrategy&&(s.urlUpdateStrategy=r.urlUpdateStrategy),r.canceledNavigationResolution&&(s.canceledNavigationResolution=r.canceledNavigationResolution)}(y,A),A}let Mo=(()=>{class r{constructor(o,a,c,d,y,w,C){this.rootComponentType=o,this.urlSerializer=a,this.rootContexts=c,this.location=d,this.config=C,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new ia,this.errorHandler=iR,this.malformedUriErrorHandler=rR,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>te(void 0),this.urlHandlingStrategy=new nR,this.routeReuseStrategy=new q2,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=y.get(VS),this.configLoader.onLoadEndListener=R=>this.triggerEvent(new UF(R)),this.configLoader.onLoadStartListener=R=>this.triggerEvent(new BF(R)),this.ngModule=y.get(qh),this.console=y.get($k);const A=y.get(br);this.isNgZoneEnabled=A instanceof br&&br.isInAngularZone(),this.resetConfig(C),this.currentUrlTree=function hF(){return new eg(new Ue([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=iN(this.currentUrlTree,this.rootComponentType),this.transitions=new Wa({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(o){const a=this.events;return o.pipe(lc(c=>0!==c.id),ke(c=>({...c,extractedUrl:this.urlHandlingStrategy.extract(c.rawUrl)})),Wu(c=>{let d=!1,y=!1;return te(c).pipe(Xo(w=>{this.currentNavigation={id:w.id,initialUrl:w.rawUrl,extractedUrl:w.extractedUrl,trigger:w.source,extras:w.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Wu(w=>{const C=this.browserUrlTree.toString(),S=!this.navigated||w.extractedUrl.toString()!==C||C!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||S)&&this.urlHandlingStrategy.shouldProcessUrl(w.rawUrl))return kN(w.source)&&(this.browserUrlTree=w.extractedUrl),te(w).pipe(Wu(A=>{const R=this.transitions.getValue();return a.next(new SS(A.id,this.serializeUrl(A.extractedUrl),A.source,A.restoredState)),R!==this.transitions.getValue()?ra:Promise.resolve(A)}),function F2(r,s,o,a){return Wu(c=>function L2(r,s,o,a,c){return new b2(r,s,o,a,c).apply()}(r,s,o,c.extractedUrl,a).pipe(ke(d=>({...c,urlAfterRedirects:d}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),Xo(A=>{this.currentNavigation={...this.currentNavigation,finalUrl:A.urlAfterRedirects},c.urlAfterRedirects=A.urlAfterRedirects}),function $2(r,s,o,a,c,d){return Xi(y=>function V2(r,s,o,a,c,d,y="emptyOnly",w="legacy"){return new B2(r,s,o,a,c,y,w,d).recognize().pipe(Wu(C=>null===C?function j2(r){return new bi(s=>s.error(r))}(new R2):te(C)))}(r,s,o,y.urlAfterRedirects,a.serialize(y.urlAfterRedirects),a,c,d).pipe(ke(w=>({...y,targetSnapshot:w}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),Xo(A=>{if(c.targetSnapshot=A.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!A.extras.skipLocationChange){const j=this.urlHandlingStrategy.merge(A.urlAfterRedirects,A.rawUrl);this.setBrowserUrl(j,A)}this.browserUrlTree=A.urlAfterRedirects}const R=new bF(A.id,this.serializeUrl(A.extractedUrl),this.serializeUrl(A.urlAfterRedirects),A.targetSnapshot);a.next(R)}));if(S&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:R,extractedUrl:j,source:z,restoredState:tt,extras:st}=w,ht=new SS(R,this.serializeUrl(j),z,tt);a.next(ht);const Ct=iN(j,this.rootComponentType).snapshot;return te(c={...w,targetSnapshot:Ct,urlAfterRedirects:j,extras:{...st,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=w.rawUrl,w.resolve(null),ra}),Xo(w=>{const C=new FF(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(C)}),ke(w=>c={...w,guards:l2(w.targetSnapshot,w.currentSnapshot,this.rootContexts)}),function v2(r,s){return Xi(o=>{const{targetSnapshot:a,currentSnapshot:c,guards:{canActivateChecks:d,canDeactivateChecks:y}}=o;return 0===y.length&&0===d.length?te({...o,guardsResult:!0}):function w2(r,s,o,a){return jt(r).pipe(Xi(c=>function _2(r,s,o,a,c){const d=s&&s.routeConfig?s.routeConfig.canDeactivate:null;return d&&0!==d.length?te(d.map(w=>{const C=Tw(s)??c,S=Oy(w,C);return nd(function g2(r){return r&&Nw(r.canDeactivate)}(S)?S.canDeactivate(r,s,o,a):C.runInContext(()=>S(r,s,o,a))).pipe(qf())})).pipe(Ly()):te(!0)}(c.component,c.route,o,s,a)),qf(c=>!0!==c,!0))}(y,a,c,r).pipe(Xi(w=>w&&function c2(r){return"boolean"==typeof r}(w)?function x2(r,s,o,a){return jt(s).pipe(td(c=>dS(function M2(r,s){return null!==r&&s&&s(new HF(r)),te(!0)}(c.route.parent,a),function C2(r,s){return null!==r&&s&&s(new zF(r)),te(!0)}(c.route,a),function S2(r,s,o){const a=s[s.length-1],d=s.slice(0,s.length-1).reverse().map(y=>function a2(r){const s=r.routeConfig?r.routeConfig.canActivateChild:null;return s&&0!==s.length?{node:r,guards:s}:null}(y)).filter(y=>null!==y).map(y=>PI(()=>te(y.guards.map(C=>{const S=Tw(y.node)??o,E=Oy(C,S);return nd(function p2(r){return r&&Nw(r.canActivateChild)}(E)?E.canActivateChild(a,r):S.runInContext(()=>E(a,r))).pipe(qf())})).pipe(Ly())));return te(d).pipe(Ly())}(r,c.path,o),function D2(r,s,o){const a=s.routeConfig?s.routeConfig.canActivate:null;if(!a||0===a.length)return te(!0);const c=a.map(d=>PI(()=>{const y=Tw(s)??o,w=Oy(d,y);return nd(function d2(r){return r&&Nw(r.canActivate)}(w)?w.canActivate(s,r):y.runInContext(()=>w(s,r))).pipe(qf())}));return te(c).pipe(Ly())}(r,c.route,o))),qf(c=>!0!==c,!0))}(a,d,r,s):te(w)),ke(w=>({...o,guardsResult:w})))})}(this.ngModule.injector,w=>this.triggerEvent(w)),Xo(w=>{if(c.guardsResult=w.guardsResult,ig(w.guardsResult))throw lN(0,w.guardsResult);const C=new RF(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot,!!w.guardsResult);this.triggerEvent(C)}),lc(w=>!!w.guardsResult||(this.restoreHistory(w),this.cancelNavigationTransition(w,"",3),!1)),RS(w=>{if(w.guards.canActivateChecks.length)return te(w).pipe(Xo(C=>{const S=new jF(C.id,this.serializeUrl(C.extractedUrl),this.serializeUrl(C.urlAfterRedirects),C.targetSnapshot);this.triggerEvent(S)}),Wu(C=>{let S=!1;return te(C).pipe(function W2(r,s){return Xi(o=>{const{targetSnapshot:a,guards:{canActivateChecks:c}}=o;if(!c.length)return te(o);let d=0;return jt(c).pipe(td(y=>function Y2(r,s,o,a){const c=r.routeConfig,d=r._resolve;return void 0!==c?.title&&!EN(c)&&(d[vw]=c.title),function K2(r,s,o,a){const c=function X2(r){return[...Object.keys(r),...Object.getOwnPropertySymbols(r)]}(r);if(0===c.length)return te({});const d={};return jt(c).pipe(Xi(y=>function J2(r,s,o,a){const c=Tw(s)??a,d=Oy(r,c);return nd(d.resolve?d.resolve(s,o):c.runInContext(()=>d(s,o)))}(r[y],s,o,a).pipe(qf(),Xo(w=>{d[y]=w}))),gS(1),function sF(r){return ke(()=>r)}(d),ed(y=>LS(y)?ra:mw(y)))}(d,r,s,a).pipe(ke(y=>(r._resolvedData=y,r.data=rN(r,o).resolve,c&&EN(c)&&(r.data[vw]=c.title),null)))}(y.route,a,r,s)),Xo(()=>d++),gS(1),Xi(y=>d===c.length?te(o):ra))})}(this.paramsInheritanceStrategy,this.ngModule.injector),Xo({next:()=>S=!0,complete:()=>{S||(this.restoreHistory(C),this.cancelNavigationTransition(C,"",2))}}))}),Xo(C=>{const S=new VF(C.id,this.serializeUrl(C.extractedUrl),this.serializeUrl(C.urlAfterRedirects),C.targetSnapshot);this.triggerEvent(S)}))}),RS(w=>{const C=S=>{const E=[];S.routeConfig?.loadComponent&&!S.routeConfig._loadedComponent&&E.push(this.configLoader.loadComponent(S.routeConfig).pipe(Xo(A=>{S.component=A}),ke(()=>{})));for(const A of S.children)E.push(...C(A));return E};return II(C(w.targetSnapshot.root)).pipe(DC(),yw(1))}),RS(()=>this.afterPreactivation()),ke(w=>{const C=function XF(r,s,o){const a=Sw(r,s._root,o?o._root:void 0);return new nN(a,s)}(this.routeReuseStrategy,w.targetSnapshot,w.currentRouterState);return c={...w,targetRouterState:C}}),Xo(w=>{this.currentUrlTree=w.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(w.urlAfterRedirects,w.rawUrl),this.routerState=w.targetRouterState,"deferred"===this.urlUpdateStrategy&&(w.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,w),this.browserUrlTree=w.urlAfterRedirects)}),((r,s,o)=>ke(a=>(new s2(s,a.targetRouterState,a.currentRouterState,o).activate(r),a)))(this.rootContexts,this.routeReuseStrategy,w=>this.triggerEvent(w)),Xo({next(){d=!0},complete(){d=!0}}),mS(()=>{d||y||this.cancelNavigationTransition(c,"",1),this.currentNavigation?.id===c.id&&(this.currentNavigation=null)}),ed(w=>{if(y=!0,hN(w)){uN(w)||(this.navigated=!0,this.restoreHistory(c,!0));const C=new PC(c.id,this.serializeUrl(c.extractedUrl),w.message,w.cancellationCode);if(a.next(C),uN(w)){const S=this.urlHandlingStrategy.merge(w.url,this.rawUrlTree),E={skipLocationChange:c.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||kN(c.source)};this.scheduleNavigation(S,"imperative",null,E,{resolve:c.resolve,reject:c.reject,promise:c.promise})}else c.resolve(!1)}else{this.restoreHistory(c,!0);const C=new qI(c.id,this.serializeUrl(c.extractedUrl),w,c.targetSnapshot??void 0);a.next(C);try{c.resolve(this.errorHandler(w))}catch(S){c.reject(S)}}return ra}))}))}resetRootComponentType(o){this.rootComponentType=o,this.routerState.root.component=this.rootComponentType}setTransition(o){this.transitions.next({...this.transitions.value,...o})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(o=>{const a="popstate"===o.type?"popstate":"hashchange";"popstate"===a&&setTimeout(()=>{const c={replaceUrl:!0},d=o.state?.navigationId?o.state:null;if(d){const w={...d};delete w.navigationId,delete w.\u0275routerPageId,0!==Object.keys(w).length&&(c.state=w)}const y=this.parseUrl(o.url);this.scheduleNavigation(y,a,d,c)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(o){this.events.next(o)}resetConfig(o){this.config=o.map(OS),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(o,a={}){const{relativeTo:c,queryParams:d,fragment:y,queryParamsHandling:w,preserveFragment:C}=a,S=c||this.routerState.root,E=C?this.currentUrlTree.fragment:y;let A=null;switch(w){case"merge":A={...this.currentUrlTree.queryParams,...d};break;case"preserve":A=this.currentUrlTree.queryParams;break;default:A=d||null}return null!==A&&(A=this.removeEmptyProps(A)),NF(S,this.currentUrlTree,o,A,E??null)}navigateByUrl(o,a={skipLocationChange:!1}){const c=ig(o)?o:this.parseUrl(o),d=this.urlHandlingStrategy.merge(c,this.rawUrlTree);return this.scheduleNavigation(d,"imperative",null,a)}navigate(o,a={skipLocationChange:!1}){return function aR(r){for(let s=0;s<r.length;s++){if(null==r[s])throw new Tt(4008,false)}}(o),this.navigateByUrl(this.createUrlTree(o,a),a)}serializeUrl(o){return this.urlSerializer.serialize(o)}parseUrl(o){let a;try{a=this.urlSerializer.parse(o)}catch(c){a=this.malformedUriErrorHandler(c,this.urlSerializer,o)}return a}isActive(o,a){let c;if(c=!0===a?{...oR}:!1===a?{...sR}:a,ig(o))return VI(this.currentUrlTree,o,c);const d=this.parseUrl(o);return VI(this.currentUrlTree,d,c)}removeEmptyProps(o){return Object.keys(o).reduce((a,c)=>{const d=o[c];return null!=d&&(a[c]=d),a},{})}processNavigations(){this.navigations.subscribe(o=>{this.navigated=!0,this.lastSuccessfulId=o.id,this.currentPageId=o.targetPageId,this.events.next(new rg(o.id,this.serializeUrl(o.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),o.resolve(!0)},o=>{this.console.warn(`Unhandled Navigation Error: ${o}`)})}scheduleNavigation(o,a,c,d,y){if(this.disposed)return Promise.resolve(!1);let w,C,S;y?(w=y.resolve,C=y.reject,S=y.promise):S=new Promise((R,j)=>{w=R,C=j});const E=++this.navigationId;let A;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(c=this.location.getState()),A=c&&c.\u0275routerPageId?c.\u0275routerPageId:d.replaceUrl||d.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):A=0,this.setTransition({id:E,targetPageId:A,source:a,restoredState:c,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:o,extras:d,resolve:w,reject:C,promise:S,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),S.catch(R=>Promise.reject(R))}setBrowserUrl(o,a){const c=this.urlSerializer.serialize(o),d={...a.extras.state,...this.generateNgRouterState(a.id,a.targetPageId)};this.location.isCurrentPathEqualTo(c)||a.extras.replaceUrl?this.location.replaceState(c,"",d):this.location.go(c,"",d)}restoreHistory(o,a=!1){if("computed"===this.canceledNavigationResolution){const c=this.currentPageId-o.targetPageId;"popstate"!==o.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===c?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===c&&(this.resetState(o),this.browserUrlTree=o.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(c)}else"replace"===this.canceledNavigationResolution&&(a&&this.resetState(o),this.resetUrlToCurrentUrlTree())}resetState(o){this.routerState=o.currentRouterState,this.currentUrlTree=o.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,o.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(o,a,c){const d=new PC(o.id,this.serializeUrl(o.extractedUrl),a,c);this.triggerEvent(d),o.resolve(!1)}generateNgRouterState(o,a){return"computed"===this.canceledNavigationResolution?{navigationId:o,\u0275routerPageId:a}:{navigationId:o}}}return r.\u0275fac=function(o){Ih()},r.\u0275prov=P({token:r,factory:function(){return AN()},providedIn:"root"}),r})();function kN(r){return"imperative"!==r}class ON{}let cR=(()=>{class r{constructor(o,a,c,d,y){this.router=o,this.injector=c,this.preloadingStrategy=d,this.loader=y}setUpPreloading(){this.subscription=this.router.events.pipe(lc(o=>o instanceof rg),td(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(o,a){const c=[];for(const d of a){d.providers&&!d._injector&&(d._injector=Jf(d.providers,o,`Route: ${d.path}`));const y=d._injector??o,w=d._loadedInjector??y;d.loadChildren&&!d._loadedRoutes&&void 0===d.canLoad||d.loadComponent&&!d._loadedComponent?c.push(this.preloadConfig(y,d)):(d.children||d._loadedRoutes)&&c.push(this.processRoutes(w,d.children??d._loadedRoutes))}return jt(c).pipe(Ka())}preloadConfig(o,a){return this.preloadingStrategy.preload(a,()=>{let c;c=a.loadChildren&&void 0===a.canLoad?this.loader.loadChildren(o,a):te(null);const d=c.pipe(Xi(y=>null===y?te(void 0):(a._loadedRoutes=y.routes,a._loadedInjector=y.injector,this.processRoutes(y.injector??o,y.routes))));return a.loadComponent&&!a._loadedComponent?jt([d,this.loader.loadComponent(a)]).pipe(Ka()):d})}}return r.\u0275fac=function(o){return new(o||r)(Ut(Mo),Ut(TD),Ut(rl),Ut(ON),Ut(VS))},r.\u0275prov=P({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const HS=new Yt("");let LN=(()=>{class r{constructor(o,a,c={}){this.router=o,this.viewportScroller=a,this.options=c,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},c.scrollPositionRestoration=c.scrollPositionRestoration||"disabled",c.anchorScrolling=c.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(o=>{o instanceof SS?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=o.navigationTrigger,this.restoredId=o.restoredState?o.restoredState.navigationId:0):o instanceof rg&&(this.lastId=o.id,this.scheduleScrollEvent(o,this.router.parseUrl(o.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(o=>{o instanceof tN&&(o.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(o.position):o.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(o.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(o,a){this.router.triggerEvent(new tN(o,"popstate"===this.lastSource?this.store[this.restoredId]:null,a))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return r.\u0275fac=function(o){Ih()},r.\u0275prov=P({token:r,factory:r.\u0275fac}),r})();function by(r,s){return{\u0275kind:r,\u0275providers:s}}function GS(r){return[{provide:jS,multi:!0,useValue:r}]}function FN(){const r=$e(nr);return s=>{const o=r.get(eC);if(s!==o.components[0])return;const a=r.get(Mo),c=r.get(RN);1===r.get(zS)&&a.initialNavigation(),r.get(jN,null,Jt.Optional)?.setUpPreloading(),r.get(HS,null,Jt.Optional)?.init(),a.resetRootComponentType(o.componentTypes[0]),c.next(),c.complete()}}const RN=new Yt("",{factory:()=>new ia}),zS=new Yt("",{providedIn:"root",factory:()=>1});const jN=new Yt("");function gR(r){return by(0,[{provide:jN,useExisting:cR},{provide:ON,useExisting:r}])}const VN=new Yt("ROUTER_FORROOT_GUARD"),mR=[UD,{provide:GI,useClass:vS},{provide:Mo,useFactory:AN},_w,{provide:og,useFactory:function bN(r){return r.routerState.root},deps:[Mo]},VS];function yR(){return new fE("Router",Mo)}let BN=(()=>{class r{constructor(o){}static forRoot(o,a){return{ngModule:r,providers:[mR,[],GS(o),{provide:VN,useFactory:CR,deps:[[Mo,new Vc,new Bc]]},{provide:BC,useValue:a||{}},a?.useHash?{provide:qp,useClass:OO}:{provide:qp,useClass:RE},{provide:HS,useFactory:()=>{const r=$e(Mo),s=$e(XL),o=$e(BC);return o.scrollOffset&&s.setOffset(o.scrollOffset),new LN(r,s,o)}},a?.preloadingStrategy?gR(a.preloadingStrategy).\u0275providers:[],{provide:fE,multi:!0,useFactory:yR},a?.initialNavigation?MR(a):[],[{provide:UN,useFactory:FN},{provide:oE,multi:!0,useExisting:UN}]]}}static forChild(o){return{ngModule:r,providers:[GS(o)]}}}return r.\u0275fac=function(o){return new(o||r)(Ut(VN,8))},r.\u0275mod=Fi({type:r}),r.\u0275inj=fi({imports:[AS]}),r})();function CR(r){return"guarded"}function MR(r){return["disabled"===r.initialNavigation?by(3,[{provide:Q1,multi:!0,useFactory:()=>{const s=$e(Mo);return()=>{s.setUpLocationChangeListener()}}},{provide:zS,useValue:2}]).\u0275providers:[],"enabledBlocking"===r.initialNavigation?by(2,[{provide:zS,useValue:0},{provide:Q1,multi:!0,deps:[nr],useFactory:s=>{const o=s.get(AO,Promise.resolve());let a=!1;return()=>o.then(()=>new Promise(d=>{const y=s.get(Mo),w=s.get(RN);(function c(d){s.get(Mo).events.pipe(lc(w=>w instanceof rg||w instanceof PC||w instanceof qI),ke(w=>w instanceof rg||w instanceof PC&&(0===w.code||1===w.code)&&null),lc(w=>null!==w),yw(1)).subscribe(()=>{d()})})(()=>{d(!0),a=!0}),y.afterPreactivation=()=>(d(!0),a||w.closed?te(void 0):w),y.initialNavigation()}))}}]).\u0275providers:[]]}const UN=new Yt(""),SR=[];let _R=(()=>{class r{}return r.\u0275fac=function(o){return new(o||r)},r.\u0275mod=Fi({type:r}),r.\u0275inj=fi({imports:[BN.forRoot(SR),BN]}),r})();var Ki=jy(813);class HN{constructor(s,o){this.alive=!0,this.children=0,this.key=s,this.name=o,this.age=0,this.fertile=!1}}class GN{}class zN{}class hc{constructor(s){this.normalizedNames=new Map,this.lazyUpdate=null,s?this.lazyInit="string"==typeof s?()=>{this.headers=new Map,s.split("\n").forEach(o=>{const a=o.indexOf(":");if(a>0){const c=o.slice(0,a),d=c.toLowerCase(),y=o.slice(a+1).trim();this.maybeSetNormalizedName(c,d),this.headers.has(d)?this.headers.get(d).push(y):this.headers.set(d,[y])}})}:()=>{this.headers=new Map,Object.keys(s).forEach(o=>{let a=s[o];const c=o.toLowerCase();"string"==typeof a&&(a=[a]),a.length>0&&(this.headers.set(c,a),this.maybeSetNormalizedName(o,c))})}:this.headers=new Map}has(s){return this.init(),this.headers.has(s.toLowerCase())}get(s){this.init();const o=this.headers.get(s.toLowerCase());return o&&o.length>0?o[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(s){return this.init(),this.headers.get(s.toLowerCase())||null}append(s,o){return this.clone({name:s,value:o,op:"a"})}set(s,o){return this.clone({name:s,value:o,op:"s"})}delete(s,o){return this.clone({name:s,value:o,op:"d"})}maybeSetNormalizedName(s,o){this.normalizedNames.has(o)||this.normalizedNames.set(o,s)}init(){this.lazyInit&&(this.lazyInit instanceof hc?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(s=>this.applyUpdate(s)),this.lazyUpdate=null))}copyFrom(s){s.init(),Array.from(s.headers.keys()).forEach(o=>{this.headers.set(o,s.headers.get(o)),this.normalizedNames.set(o,s.normalizedNames.get(o))})}clone(s){const o=new hc;return o.lazyInit=this.lazyInit&&this.lazyInit instanceof hc?this.lazyInit:this,o.lazyUpdate=(this.lazyUpdate||[]).concat([s]),o}applyUpdate(s){const o=s.name.toLowerCase();switch(s.op){case"a":case"s":let a=s.value;if("string"==typeof a&&(a=[a]),0===a.length)return;this.maybeSetNormalizedName(s.name,o);const c=("a"===s.op?this.headers.get(o):void 0)||[];c.push(...a),this.headers.set(o,c);break;case"d":const d=s.value;if(d){let y=this.headers.get(o);if(!y)return;y=y.filter(w=>-1===d.indexOf(w)),0===y.length?(this.headers.delete(o),this.normalizedNames.delete(o)):this.headers.set(o,y)}else this.headers.delete(o),this.normalizedNames.delete(o)}}forEach(s){this.init(),Array.from(this.normalizedNames.keys()).forEach(o=>s(this.normalizedNames.get(o),this.headers.get(o)))}}class TR{encodeKey(s){return $N(s)}encodeValue(s){return $N(s)}decodeKey(s){return decodeURIComponent(s)}decodeValue(s){return decodeURIComponent(s)}}const IR=/%(\d[a-f0-9])/gi,NR={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function $N(r){return encodeURIComponent(r).replace(IR,(s,o)=>NR[o]??s)}function zC(r){return`${r}`}class id{constructor(s={}){if(this.updates=null,this.cloneFrom=null,this.encoder=s.encoder||new TR,s.fromString){if(s.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function ER(r,s){const o=new Map;return r.length>0&&r.replace(/^\?/,"").split("&").forEach(c=>{const d=c.indexOf("="),[y,w]=-1==d?[s.decodeKey(c),""]:[s.decodeKey(c.slice(0,d)),s.decodeValue(c.slice(d+1))],C=o.get(y)||[];C.push(w),o.set(y,C)}),o}(s.fromString,this.encoder)}else s.fromObject?(this.map=new Map,Object.keys(s.fromObject).forEach(o=>{const a=s.fromObject[o],c=Array.isArray(a)?a.map(zC):[zC(a)];this.map.set(o,c)})):this.map=null}has(s){return this.init(),this.map.has(s)}get(s){this.init();const o=this.map.get(s);return o?o[0]:null}getAll(s){return this.init(),this.map.get(s)||null}keys(){return this.init(),Array.from(this.map.keys())}append(s,o){return this.clone({param:s,value:o,op:"a"})}appendAll(s){const o=[];return Object.keys(s).forEach(a=>{const c=s[a];Array.isArray(c)?c.forEach(d=>{o.push({param:a,value:d,op:"a"})}):o.push({param:a,value:c,op:"a"})}),this.clone(o)}set(s,o){return this.clone({param:s,value:o,op:"s"})}delete(s,o){return this.clone({param:s,value:o,op:"d"})}toString(){return this.init(),this.keys().map(s=>{const o=this.encoder.encodeKey(s);return this.map.get(s).map(a=>o+"="+this.encoder.encodeValue(a)).join("&")}).filter(s=>""!==s).join("&")}clone(s){const o=new id({encoder:this.encoder});return o.cloneFrom=this.cloneFrom||this,o.updates=(this.updates||[]).concat(s),o}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(s=>this.map.set(s,this.cloneFrom.map.get(s))),this.updates.forEach(s=>{switch(s.op){case"a":case"s":const o=("a"===s.op?this.map.get(s.param):void 0)||[];o.push(zC(s.value)),this.map.set(s.param,o);break;case"d":if(void 0===s.value){this.map.delete(s.param);break}{let a=this.map.get(s.param)||[];const c=a.indexOf(zC(s.value));-1!==c&&a.splice(c,1),a.length>0?this.map.set(s.param,a):this.map.delete(s.param)}}}),this.cloneFrom=this.updates=null)}}class PR{constructor(){this.map=new Map}set(s,o){return this.map.set(s,o),this}get(s){return this.map.has(s)||this.map.set(s,s.defaultValue()),this.map.get(s)}delete(s){return this.map.delete(s),this}has(s){return this.map.has(s)}keys(){return this.map.keys()}}function WN(r){return typeof ArrayBuffer<"u"&&r instanceof ArrayBuffer}function YN(r){return typeof Blob<"u"&&r instanceof Blob}function KN(r){return typeof FormData<"u"&&r instanceof FormData}class Aw{constructor(s,o,a,c){let d;if(this.url=o,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=s.toUpperCase(),function AR(r){switch(r){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||c?(this.body=void 0!==a?a:null,d=c):d=a,d&&(this.reportProgress=!!d.reportProgress,this.withCredentials=!!d.withCredentials,d.responseType&&(this.responseType=d.responseType),d.headers&&(this.headers=d.headers),d.context&&(this.context=d.context),d.params&&(this.params=d.params)),this.headers||(this.headers=new hc),this.context||(this.context=new PR),this.params){const y=this.params.toString();if(0===y.length)this.urlWithParams=o;else{const w=o.indexOf("?");this.urlWithParams=o+(-1===w?"?":w<o.length-1?"&":"")+y}}else this.params=new id,this.urlWithParams=o}serializeBody(){return null===this.body?null:WN(this.body)||YN(this.body)||KN(this.body)||function kR(r){return typeof URLSearchParams<"u"&&r instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof id?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||KN(this.body)?null:YN(this.body)?this.body.type||null:WN(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof id?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(s={}){const o=s.method||this.method,a=s.url||this.url,c=s.responseType||this.responseType,d=void 0!==s.body?s.body:this.body,y=void 0!==s.withCredentials?s.withCredentials:this.withCredentials,w=void 0!==s.reportProgress?s.reportProgress:this.reportProgress;let C=s.headers||this.headers,S=s.params||this.params;const E=s.context??this.context;return void 0!==s.setHeaders&&(C=Object.keys(s.setHeaders).reduce((A,R)=>A.set(R,s.setHeaders[R]),C)),s.setParams&&(S=Object.keys(s.setParams).reduce((A,R)=>A.set(R,s.setParams[R]),S)),new Aw(o,a,d,{params:S,headers:C,context:E,reportProgress:w,responseType:c,withCredentials:y})}}var Sr=(()=>((Sr=Sr||{})[Sr.Sent=0]="Sent",Sr[Sr.UploadProgress=1]="UploadProgress",Sr[Sr.ResponseHeader=2]="ResponseHeader",Sr[Sr.DownloadProgress=3]="DownloadProgress",Sr[Sr.Response=4]="Response",Sr[Sr.User=5]="User",Sr))();class $S{constructor(s,o=200,a="OK"){this.headers=s.headers||new hc,this.status=void 0!==s.status?s.status:o,this.statusText=s.statusText||a,this.url=s.url||null,this.ok=this.status>=200&&this.status<300}}class WS extends $S{constructor(s={}){super(s),this.type=Sr.ResponseHeader}clone(s={}){return new WS({headers:s.headers||this.headers,status:void 0!==s.status?s.status:this.status,statusText:s.statusText||this.statusText,url:s.url||this.url||void 0})}}class $C extends $S{constructor(s={}){super(s),this.type=Sr.Response,this.body=void 0!==s.body?s.body:null}clone(s={}){return new $C({body:void 0!==s.body?s.body:this.body,headers:s.headers||this.headers,status:void 0!==s.status?s.status:this.status,statusText:s.statusText||this.statusText,url:s.url||this.url||void 0})}}class XN extends $S{constructor(s){super(s,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${s.url||"(unknown url)"}`:`Http failure response for ${s.url||"(unknown url)"}: ${s.status} ${s.statusText}`,this.error=s.error||null}}function YS(r,s){return{body:s,headers:r.headers,context:r.context,observe:r.observe,params:r.params,reportProgress:r.reportProgress,responseType:r.responseType,withCredentials:r.withCredentials}}let JN=(()=>{class r{constructor(o){this.handler=o}request(o,a,c={}){let d;if(o instanceof Aw)d=o;else{let C,S;C=c.headers instanceof hc?c.headers:new hc(c.headers),c.params&&(S=c.params instanceof id?c.params:new id({fromObject:c.params})),d=new Aw(o,a,void 0!==c.body?c.body:null,{headers:C,context:c.context,params:S,reportProgress:c.reportProgress,responseType:c.responseType||"json",withCredentials:c.withCredentials})}const y=te(d).pipe(td(C=>this.handler.handle(C)));if(o instanceof Aw||"events"===c.observe)return y;const w=y.pipe(lc(C=>C instanceof $C));switch(c.observe||"body"){case"body":switch(d.responseType){case"arraybuffer":return w.pipe(ke(C=>{if(null!==C.body&&!(C.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return C.body}));case"blob":return w.pipe(ke(C=>{if(null!==C.body&&!(C.body instanceof Blob))throw new Error("Response is not a Blob.");return C.body}));case"text":return w.pipe(ke(C=>{if(null!==C.body&&"string"!=typeof C.body)throw new Error("Response is not a string.");return C.body}));default:return w.pipe(ke(C=>C.body))}case"response":return w;default:throw new Error(`Unreachable: unhandled observe type ${c.observe}}`)}}delete(o,a={}){return this.request("DELETE",o,a)}get(o,a={}){return this.request("GET",o,a)}head(o,a={}){return this.request("HEAD",o,a)}jsonp(o,a){return this.request("JSONP",o,{params:(new id).append(a,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(o,a={}){return this.request("OPTIONS",o,a)}patch(o,a,c={}){return this.request("PATCH",o,YS(c,a))}post(o,a,c={}){return this.request("POST",o,YS(c,a))}put(o,a,c={}){return this.request("PUT",o,YS(c,a))}}return r.\u0275fac=function(o){return new(o||r)(Ut(GN))},r.\u0275prov=P({token:r,factory:r.\u0275fac}),r})();class ZN{constructor(s,o){this.next=s,this.interceptor=o}handle(s){return this.interceptor.intercept(s,this.next)}}const QN=new Yt("HTTP_INTERCEPTORS");let OR=(()=>{class r{intercept(o,a){return a.handle(o)}}return r.\u0275fac=function(o){return new(o||r)},r.\u0275prov=P({token:r,factory:r.\u0275fac}),r})();const LR=/^\)\]\}',?\n/;let qN=(()=>{class r{constructor(o){this.xhrFactory=o}handle(o){if("JSONP"===o.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new bi(a=>{const c=this.xhrFactory.build();if(c.open(o.method,o.urlWithParams),o.withCredentials&&(c.withCredentials=!0),o.headers.forEach((j,z)=>c.setRequestHeader(j,z.join(","))),o.headers.has("Accept")||c.setRequestHeader("Accept","application/json, text/plain, */*"),!o.headers.has("Content-Type")){const j=o.detectContentTypeHeader();null!==j&&c.setRequestHeader("Content-Type",j)}if(o.responseType){const j=o.responseType.toLowerCase();c.responseType="json"!==j?j:"text"}const d=o.serializeBody();let y=null;const w=()=>{if(null!==y)return y;const j=c.statusText||"OK",z=new hc(c.getAllResponseHeaders()),tt=function bR(r){return"responseURL"in r&&r.responseURL?r.responseURL:/^X-Request-URL:/m.test(r.getAllResponseHeaders())?r.getResponseHeader("X-Request-URL"):null}(c)||o.url;return y=new WS({headers:z,status:c.status,statusText:j,url:tt}),y},C=()=>{let{headers:j,status:z,statusText:tt,url:st}=w(),ht=null;204!==z&&(ht=typeof c.response>"u"?c.responseText:c.response),0===z&&(z=ht?200:0);let Ct=z>=200&&z<300;if("json"===o.responseType&&"string"==typeof ht){const at=ht;ht=ht.replace(LR,"");try{ht=""!==ht?JSON.parse(ht):null}catch(Rt){ht=at,Ct&&(Ct=!1,ht={error:Rt,text:ht})}}Ct?(a.next(new $C({body:ht,headers:j,status:z,statusText:tt,url:st||void 0})),a.complete()):a.error(new XN({error:ht,headers:j,status:z,statusText:tt,url:st||void 0}))},S=j=>{const{url:z}=w(),tt=new XN({error:j,status:c.status||0,statusText:c.statusText||"Unknown Error",url:z||void 0});a.error(tt)};let E=!1;const A=j=>{E||(a.next(w()),E=!0);let z={type:Sr.DownloadProgress,loaded:j.loaded};j.lengthComputable&&(z.total=j.total),"text"===o.responseType&&!!c.responseText&&(z.partialText=c.responseText),a.next(z)},R=j=>{let z={type:Sr.UploadProgress,loaded:j.loaded};j.lengthComputable&&(z.total=j.total),a.next(z)};return c.addEventListener("load",C),c.addEventListener("error",S),c.addEventListener("timeout",S),c.addEventListener("abort",S),o.reportProgress&&(c.addEventListener("progress",A),null!==d&&c.upload&&c.upload.addEventListener("progress",R)),c.send(d),a.next({type:Sr.Sent}),()=>{c.removeEventListener("error",S),c.removeEventListener("abort",S),c.removeEventListener("load",C),c.removeEventListener("timeout",S),o.reportProgress&&(c.removeEventListener("progress",A),null!==d&&c.upload&&c.upload.removeEventListener("progress",R)),c.readyState!==c.DONE&&c.abort()}})}}return r.\u0275fac=function(o){return new(o||r)(Ut(iI))},r.\u0275prov=P({token:r,factory:r.\u0275fac}),r})();const KS=new Yt("XSRF_COOKIE_NAME"),XS=new Yt("XSRF_HEADER_NAME");class tP{}let FR=(()=>{class r{constructor(o,a,c){this.doc=o,this.platform=a,this.cookieName=c,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const o=this.doc.cookie||"";return o!==this.lastCookieString&&(this.parseCount++,this.lastToken=YE(o,this.cookieName),this.lastCookieString=o),this.lastToken}}return r.\u0275fac=function(o){return new(o||r)(Ut(ws),Ut(_D),Ut(KS))},r.\u0275prov=P({token:r,factory:r.\u0275fac}),r})(),JS=(()=>{class r{constructor(o,a){this.tokenService=o,this.headerName=a}intercept(o,a){const c=o.url.toLowerCase();if("GET"===o.method||"HEAD"===o.method||c.startsWith("http://")||c.startsWith("https://"))return a.handle(o);const d=this.tokenService.getToken();return null!==d&&!o.headers.has(this.headerName)&&(o=o.clone({headers:o.headers.set(this.headerName,d)})),a.handle(o)}}return r.\u0275fac=function(o){return new(o||r)(Ut(tP),Ut(XS))},r.\u0275prov=P({token:r,factory:r.\u0275fac}),r})(),RR=(()=>{class r{constructor(o,a){this.backend=o,this.injector=a,this.chain=null}handle(o){if(null===this.chain){const a=this.injector.get(QN,[]);this.chain=a.reduceRight((c,d)=>new ZN(c,d),this.backend)}return this.chain.handle(o)}}return r.\u0275fac=function(o){return new(o||r)(Ut(zN),Ut(nr))},r.\u0275prov=P({token:r,factory:r.\u0275fac}),r})(),jR=(()=>{class r{static disable(){return{ngModule:r,providers:[{provide:JS,useClass:OR}]}}static withOptions(o={}){return{ngModule:r,providers:[o.cookieName?{provide:KS,useValue:o.cookieName}:[],o.headerName?{provide:XS,useValue:o.headerName}:[]]}}}return r.\u0275fac=function(o){return new(o||r)},r.\u0275mod=Fi({type:r}),r.\u0275inj=fi({providers:[JS,{provide:QN,useExisting:JS,multi:!0},{provide:tP,useClass:FR},{provide:KS,useValue:"XSRF-TOKEN"},{provide:XS,useValue:"X-XSRF-TOKEN"}]}),r})(),VR=(()=>{class r{}return r.\u0275fac=function(o){return new(o||r)},r.\u0275mod=Fi({type:r}),r.\u0275inj=fi({providers:[JN,{provide:GN,useClass:RR},qN,{provide:zN,useExisting:qN}],imports:[jR.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]}),r})(),eP=(()=>{class r{constructor(){this.messages=[]}add(o){this.messages.push(o),this.messages.length>7&&this.messages.shift()}clear(){this.messages=[]}}return r.\u0275fac=function(o){return new(o||r)},r.\u0275prov=P({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),rd=(()=>{class r{static addClass(o,a){o.classList?o.classList.add(a):o.className+=" "+a}static addMultipleClasses(o,a){if(o.classList){let c=a.trim().split(" ");for(let d=0;d<c.length;d++)o.classList.add(c[d])}else{let c=a.split(" ");for(let d=0;d<c.length;d++)o.className+=" "+c[d]}}static removeClass(o,a){o.classList?o.classList.remove(a):o.className=o.className.replace(new RegExp("(^|\\b)"+a.split(" ").join("|")+"(\\b|$)","gi")," ")}static hasClass(o,a){return o.classList?o.classList.contains(a):new RegExp("(^| )"+a+"( |$)","gi").test(o.className)}static siblings(o){return Array.prototype.filter.call(o.parentNode.children,function(a){return a!==o})}static find(o,a){return Array.from(o.querySelectorAll(a))}static findSingle(o,a){return o?o.querySelector(a):null}static index(o){let a=o.parentNode.childNodes,c=0;for(var d=0;d<a.length;d++){if(a[d]==o)return c;1==a[d].nodeType&&c++}return-1}static indexWithinGroup(o,a){let c=o.parentNode?o.parentNode.childNodes:[],d=0;for(var y=0;y<c.length;y++){if(c[y]==o)return d;c[y].attributes&&c[y].attributes[a]&&1==c[y].nodeType&&d++}return-1}static relativePosition(o,a){let c=o.offsetParent?{width:o.offsetWidth,height:o.offsetHeight}:this.getHiddenElementDimensions(o);const d=a.offsetHeight,y=a.getBoundingClientRect(),w=this.getViewport();let C,S;y.top+d+c.height>w.height?(C=-1*c.height,o.style.transformOrigin="bottom",y.top+C<0&&(C=-1*y.top)):(C=d,o.style.transformOrigin="top"),S=c.width>w.width?-1*y.left:y.left+c.width>w.width?-1*(y.left+c.width-w.width):0,o.style.top=C+"px",o.style.left=S+"px"}static absolutePosition(o,a){let j,z,c=o.offsetParent?{width:o.offsetWidth,height:o.offsetHeight}:this.getHiddenElementDimensions(o),d=c.height,y=c.width,w=a.offsetHeight,C=a.offsetWidth,S=a.getBoundingClientRect(),E=this.getWindowScrollTop(),A=this.getWindowScrollLeft(),R=this.getViewport();S.top+w+d>R.height?(j=S.top+E-d,o.style.transformOrigin="bottom",j<0&&(j=E)):(j=w+S.top+E,o.style.transformOrigin="top"),z=S.left+y>R.width?Math.max(0,S.left+A+C-y):S.left+A,o.style.top=j+"px",o.style.left=z+"px"}static getParents(o,a=[]){return null===o.parentNode?a:this.getParents(o.parentNode,a.concat([o.parentNode]))}static getScrollableParents(o){let a=[];if(o){let c=this.getParents(o);const d=/(auto|scroll)/,y=w=>{let C=window.getComputedStyle(w,null);return d.test(C.getPropertyValue("overflow"))||d.test(C.getPropertyValue("overflowX"))||d.test(C.getPropertyValue("overflowY"))};for(let w of c){let C=1===w.nodeType&&w.dataset.scrollselectors;if(C){let S=C.split(",");for(let E of S){let A=this.findSingle(w,E);A&&y(A)&&a.push(A)}}9!==w.nodeType&&y(w)&&a.push(w)}}return a}static getHiddenElementOuterHeight(o){o.style.visibility="hidden",o.style.display="block";let a=o.offsetHeight;return o.style.display="none",o.style.visibility="visible",a}static getHiddenElementOuterWidth(o){o.style.visibility="hidden",o.style.display="block";let a=o.offsetWidth;return o.style.display="none",o.style.visibility="visible",a}static getHiddenElementDimensions(o){let a={};return o.style.visibility="hidden",o.style.display="block",a.width=o.offsetWidth,a.height=o.offsetHeight,o.style.display="none",o.style.visibility="visible",a}static scrollInView(o,a){let c=getComputedStyle(o).getPropertyValue("borderTopWidth"),d=c?parseFloat(c):0,y=getComputedStyle(o).getPropertyValue("paddingTop"),w=y?parseFloat(y):0,C=o.getBoundingClientRect(),E=a.getBoundingClientRect().top+document.body.scrollTop-(C.top+document.body.scrollTop)-d-w,A=o.scrollTop,R=o.clientHeight,j=this.getOuterHeight(a);E<0?o.scrollTop=A+E:E+j>R&&(o.scrollTop=A+E-R+j)}static fadeIn(o,a){o.style.opacity=0;let c=+new Date,d=0,y=function(){d=+o.style.opacity.replace(",",".")+((new Date).getTime()-c)/a,o.style.opacity=d,c=+new Date,+d<1&&(window.requestAnimationFrame&&requestAnimationFrame(y)||setTimeout(y,16))};y()}static fadeOut(o,a){var c=1,w=50/a;let C=setInterval(()=>{(c-=w)<=0&&(c=0,clearInterval(C)),o.style.opacity=c},50)}static getWindowScrollTop(){let o=document.documentElement;return(window.pageYOffset||o.scrollTop)-(o.clientTop||0)}static getWindowScrollLeft(){let o=document.documentElement;return(window.pageXOffset||o.scrollLeft)-(o.clientLeft||0)}static matches(o,a){var c=Element.prototype;return(c.matches||c.webkitMatchesSelector||c.mozMatchesSelector||c.msMatchesSelector||function(y){return-1!==[].indexOf.call(document.querySelectorAll(y),this)}).call(o,a)}static getOuterWidth(o,a){let c=o.offsetWidth;if(a){let d=getComputedStyle(o);c+=parseFloat(d.marginLeft)+parseFloat(d.marginRight)}return c}static getHorizontalPadding(o){let a=getComputedStyle(o);return parseFloat(a.paddingLeft)+parseFloat(a.paddingRight)}static getHorizontalMargin(o){let a=getComputedStyle(o);return parseFloat(a.marginLeft)+parseFloat(a.marginRight)}static innerWidth(o){let a=o.offsetWidth,c=getComputedStyle(o);return a+=parseFloat(c.paddingLeft)+parseFloat(c.paddingRight),a}static width(o){let a=o.offsetWidth,c=getComputedStyle(o);return a-=parseFloat(c.paddingLeft)+parseFloat(c.paddingRight),a}static getInnerHeight(o){let a=o.offsetHeight,c=getComputedStyle(o);return a+=parseFloat(c.paddingTop)+parseFloat(c.paddingBottom),a}static getOuterHeight(o,a){let c=o.offsetHeight;if(a){let d=getComputedStyle(o);c+=parseFloat(d.marginTop)+parseFloat(d.marginBottom)}return c}static getHeight(o){let a=o.offsetHeight,c=getComputedStyle(o);return a-=parseFloat(c.paddingTop)+parseFloat(c.paddingBottom)+parseFloat(c.borderTopWidth)+parseFloat(c.borderBottomWidth),a}static getWidth(o){let a=o.offsetWidth,c=getComputedStyle(o);return a-=parseFloat(c.paddingLeft)+parseFloat(c.paddingRight)+parseFloat(c.borderLeftWidth)+parseFloat(c.borderRightWidth),a}static getViewport(){let o=window,a=document,c=a.documentElement,d=a.getElementsByTagName("body")[0];return{width:o.innerWidth||c.clientWidth||d.clientWidth,height:o.innerHeight||c.clientHeight||d.clientHeight}}static getOffset(o){var a=o.getBoundingClientRect();return{top:a.top+(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0),left:a.left+(window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0)}}static replaceElementWith(o,a){let c=o.parentNode;if(!c)throw"Can't replace element";return c.replaceChild(a,o)}static getUserAgent(){return navigator.userAgent}static isIE(){var o=window.navigator.userAgent;return o.indexOf("MSIE ")>0||(o.indexOf("Trident/")>0?(o.indexOf("rv:"),!0):o.indexOf("Edge/")>0)}static isIOS(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}static isAndroid(){return/(android)/i.test(navigator.userAgent)}static isTouchDevice(){return"ontouchstart"in window||navigator.maxTouchPoints>0}static appendChild(o,a){if(this.isElement(a))a.appendChild(o);else{if(!a.el||!a.el.nativeElement)throw"Cannot append "+a+" to "+o;a.el.nativeElement.appendChild(o)}}static removeChild(o,a){if(this.isElement(a))a.removeChild(o);else{if(!a.el||!a.el.nativeElement)throw"Cannot remove "+o+" from "+a;a.el.nativeElement.removeChild(o)}}static removeElement(o){"remove"in Element.prototype?o.remove():o.parentNode.removeChild(o)}static isElement(o){return"object"==typeof HTMLElement?o instanceof HTMLElement:o&&"object"==typeof o&&null!==o&&1===o.nodeType&&"string"==typeof o.nodeName}static calculateScrollbarWidth(o){if(o){let a=getComputedStyle(o);return o.offsetWidth-o.clientWidth-parseFloat(a.borderLeftWidth)-parseFloat(a.borderRightWidth)}{if(null!==this.calculatedScrollbarWidth)return this.calculatedScrollbarWidth;let a=document.createElement("div");a.className="p-scrollbar-measure",document.body.appendChild(a);let c=a.offsetWidth-a.clientWidth;return document.body.removeChild(a),this.calculatedScrollbarWidth=c,c}}static calculateScrollbarHeight(){if(null!==this.calculatedScrollbarHeight)return this.calculatedScrollbarHeight;let o=document.createElement("div");o.className="p-scrollbar-measure",document.body.appendChild(o);let a=o.offsetHeight-o.clientHeight;return document.body.removeChild(o),this.calculatedScrollbarWidth=a,a}static invokeElementMethod(o,a,c){o[a].apply(o,c)}static clearSelection(){if(window.getSelection)window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().rangeCount>0&&window.getSelection().getRangeAt(0).getClientRects().length>0&&window.getSelection().removeAllRanges();else if(document.selection&&document.selection.empty)try{document.selection.empty()}catch{}}static getBrowser(){if(!this.browser){let o=this.resolveUserAgent();this.browser={},o.browser&&(this.browser[o.browser]=!0,this.browser.version=o.version),this.browser.chrome?this.browser.webkit=!0:this.browser.webkit&&(this.browser.safari=!0)}return this.browser}static resolveUserAgent(){let o=navigator.userAgent.toLowerCase(),a=/(chrome)[ \/]([\w.]+)/.exec(o)||/(webkit)[ \/]([\w.]+)/.exec(o)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(o)||/(msie) ([\w.]+)/.exec(o)||o.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(o)||[];return{browser:a[1]||"",version:a[2]||"0"}}static isInteger(o){return Number.isInteger?Number.isInteger(o):"number"==typeof o&&isFinite(o)&&Math.floor(o)===o}static isHidden(o){return null===o.offsetParent}static getFocusableElements(o){let a=r.find(o,'button:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                [href][clientHeight][clientWidth]:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                input:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]), select:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                textarea:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]), [tabIndex]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                [contenteditable]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]):not(.p-disabled)'),c=[];for(let d of a)"none"!=getComputedStyle(d).display&&"hidden"!=getComputedStyle(d).visibility&&c.push(d);return c}static generateZIndex(){return this.zindex=this.zindex||999,++this.zindex}}return r.zindex=1e3,r.calculatedScrollbarWidth=null,r.calculatedScrollbarHeight=null,r})(),BR=(()=>{class r{}return r.\u0275fac=function(o){return new(o||r)},r.\u0275mod=Fi({type:r}),r.\u0275inj=fi({imports:[tg]}),r})(),ZS=(()=>{class r{constructor(o){this.el=o,this.iconPos="left",this.loadingIcon="pi pi-spinner pi-spin",this._loading=!1}ngAfterViewInit(){this._initialStyleClass=this.el.nativeElement.className,rd.addMultipleClasses(this.el.nativeElement,this.getStyleClass()),(this.icon||this.loading)&&this.createIconEl();let o=document.createElement("span");this.icon&&!this.label&&o.setAttribute("aria-hidden","true"),o.className="p-button-label",this.label?o.appendChild(document.createTextNode(this.label)):o.innerHTML="&nbsp;",this.el.nativeElement.appendChild(o),this.initialized=!0}getStyleClass(){let o="p-button p-component";return this.icon&&!this.label&&(o+=" p-button-icon-only"),this.loading&&(o+=" p-disabled p-button-loading",!this.icon&&this.label&&(o+=" p-button-loading-label-only")),o}setStyleClass(){let o=this.getStyleClass();this.el.nativeElement.className=o+" "+this._initialStyleClass}createIconEl(){let o=document.createElement("span");o.className="p-button-icon",o.setAttribute("aria-hidden","true");let a=this.label?"p-button-icon-"+this.iconPos:null;a&&rd.addClass(o,a);let c=this.getIconClass();c&&rd.addMultipleClasses(o,c);let d=rd.findSingle(this.el.nativeElement,".p-button-label");d?this.el.nativeElement.insertBefore(o,d):this.el.nativeElement.appendChild(o)}getIconClass(){return this.loading?"p-button-loading-icon "+this.loadingIcon:this._icon}setIconClass(){let o=rd.findSingle(this.el.nativeElement,".p-button-icon");o?o.className=this.iconPos?"p-button-icon p-button-icon-"+this.iconPos+" "+this.getIconClass():"p-button-icon "+this.getIconClass():this.createIconEl()}removeIconElement(){let o=rd.findSingle(this.el.nativeElement,".p-button-icon");this.el.nativeElement.removeChild(o)}get label(){return this._label}set label(o){this._label=o,this.initialized&&(rd.findSingle(this.el.nativeElement,".p-button-label").textContent=this._label||"&nbsp;",(this.loading||this.icon)&&this.setIconClass(),this.setStyleClass())}get icon(){return this._icon}set icon(o){this._icon=o,this.initialized&&(this.setIconClass(),this.setStyleClass())}get loading(){return this._loading}set loading(o){this._loading=o,this.initialized&&(this.loading||this.icon?this.setIconClass():this.removeIconElement(),this.setStyleClass())}ngOnDestroy(){this.initialized=!1}}return r.\u0275fac=function(o){return new(o||r)(ct(Zn))},r.\u0275dir=Kt({type:r,selectors:[["","pButton",""]],hostAttrs:[1,"p-element"],inputs:{iconPos:"iconPos",loadingIcon:"loadingIcon",label:"label",icon:"icon",loading:"loading"}}),r})(),nP=(()=>{class r{}return r.\u0275fac=function(o){return new(o||r)},r.\u0275mod=Fi({type:r}),r.\u0275inj=fi({imports:[tg,BR]}),r})();const iP=["*"];let HR=(()=>{class r{}return r.\u0275fac=function(o){return new(o||r)},r.\u0275cmp=_o({type:r,selectors:[["p-header"]],ngContentSelectors:iP,decls:1,vars:0,template:function(o,a){1&o&&(sy(),Vo(0))},encapsulation:2}),r})(),GR=(()=>{class r{}return r.\u0275fac=function(o){return new(o||r)},r.\u0275cmp=_o({type:r,selectors:[["p-footer"]],ngContentSelectors:iP,decls:1,vars:0,template:function(o,a){1&o&&(sy(),Vo(0))},encapsulation:2}),r})(),zR=(()=>{class r{constructor(o){this.template=o}getType(){return this.name}}return r.\u0275fac=function(o){return new(o||r)(ct(zu))},r.\u0275dir=Kt({type:r,selectors:[["","pTemplate",""]],inputs:{type:"type",name:["pTemplate","name"]}}),r})(),$R=(()=>{class r{}return r.\u0275fac=function(o){return new(o||r)},r.\u0275mod=Fi({type:r}),r.\u0275inj=fi({imports:[tg]}),r})();function WR(r,s){1&r&&yo(0)}function YR(r,s){if(1&r&&(ye(0,"div",8),Vo(1,1),wi(2,WR,1,0,"ng-container",6),_e()),2&r){const o=Ae();ge(2),Se("ngTemplateOutlet",o.headerTemplate)}}function KR(r,s){1&r&&yo(0)}function XR(r,s){if(1&r&&(ye(0,"div",9),rr(1),wi(2,KR,1,0,"ng-container",6),_e()),2&r){const o=Ae();ge(1),$l(" ",o.header," "),ge(1),Se("ngTemplateOutlet",o.titleTemplate)}}function JR(r,s){1&r&&yo(0)}function ZR(r,s){if(1&r&&(ye(0,"div",10),rr(1),wi(2,JR,1,0,"ng-container",6),_e()),2&r){const o=Ae();ge(1),$l(" ",o.subheader," "),ge(1),Se("ngTemplateOutlet",o.subtitleTemplate)}}function QR(r,s){1&r&&yo(0)}function qR(r,s){1&r&&yo(0)}function tj(r,s){if(1&r&&(ye(0,"div",11),Vo(1,2),wi(2,qR,1,0,"ng-container",6),_e()),2&r){const o=Ae();ge(2),Se("ngTemplateOutlet",o.footerTemplate)}}const ej=["*",[["p-header"]],[["p-footer"]]],nj=["*","p-header","p-footer"];let rP=(()=>{class r{constructor(o){this.el=o}ngAfterContentInit(){this.templates.forEach(o=>{switch(o.getType()){case"header":this.headerTemplate=o.template;break;case"title":this.titleTemplate=o.template;break;case"subtitle":this.subtitleTemplate=o.template;break;case"content":default:this.contentTemplate=o.template;break;case"footer":this.footerTemplate=o.template}})}getBlockableElement(){return this.el.nativeElement.children[0]}}return r.\u0275fac=function(o){return new(o||r)(ct(Zn))},r.\u0275cmp=_o({type:r,selectors:[["p-card"]],contentQueries:function(o,a,c){if(1&o&&(_y(c,HR,5),_y(c,GR,5),_y(c,zR,4)),2&o){let d;tc(d=ec())&&(a.headerFacet=d.first),tc(d=ec())&&(a.footerFacet=d.first),tc(d=ec())&&(a.templates=d)}},hostAttrs:[1,"p-element"],inputs:{header:"header",subheader:"subheader",style:"style",styleClass:"styleClass"},ngContentSelectors:nj,decls:9,vars:9,consts:[[3,"ngClass","ngStyle"],["class","p-card-header",4,"ngIf"],[1,"p-card-body"],["class","p-card-title",4,"ngIf"],["class","p-card-subtitle",4,"ngIf"],[1,"p-card-content"],[4,"ngTemplateOutlet"],["class","p-card-footer",4,"ngIf"],[1,"p-card-header"],[1,"p-card-title"],[1,"p-card-subtitle"],[1,"p-card-footer"]],template:function(o,a){1&o&&(sy(ej),ye(0,"div",0),wi(1,YR,3,1,"div",1),ye(2,"div",2),wi(3,XR,3,2,"div",3),wi(4,ZR,3,2,"div",4),ye(5,"div",5),Vo(6),wi(7,QR,1,0,"ng-container",6),_e(),wi(8,tj,3,1,"div",7),_e()()),2&o&&(Pr(a.styleClass),Se("ngClass","p-card p-component")("ngStyle",a.style),ge(1),Se("ngIf",a.headerFacet||a.headerTemplate),ge(2),Se("ngIf",a.header||a.titleTemplate),ge(1),Se("ngIf",a.subheader||a.subtitleTemplate),ge(3),Se("ngTemplateOutlet",a.contentTemplate),ge(1),Se("ngIf",a.footerFacet||a.footerTemplate))},dependencies:[ZD,mC,qE,eS],styles:[".p-card-header img{width:100%}\n"],encapsulation:2,changeDetection:0}),r})(),ij=(()=>{class r{}return r.\u0275fac=function(o){return new(o||r)},r.\u0275mod=Fi({type:r}),r.\u0275inj=fi({imports:[tg,$R]}),r})();const rj=["myDiagram"],oj=["myPalette"],od=Ki.bx.make;let sj=(()=>{class r{constructor(){this.myDiagramComponent=null,this.myPaletteComponent=null}ngAfterViewInit(){this.diagram=od(Ki.S0,"myDiagramDiv",{layout:od(Ki.FF,{isOngoing:!0,treeStyle:Ki.FF.StyleLastParents,arrangement:Ki.FF.ArrangementHorizontal,layerSpacing:35}),"undoManager.isEnabled":!0}),this.diagram.nodeTemplate=od(Ki.NB,"Auto",new Ki.KX("text","name"),new Ki.KX("layerName","isSelected",function(o){return o?"Foreground":""}).ofObject(),od(Ki.bn,"RoundedRectangle",{name:"SHAPE",fill:"green",stroke:"white"},new Ki.KX("fill","color")),od(Ki.s_,"Horizontal",od(Ki.s_,"Table",{maxSize:new Ki.$u(150,999),margin:new Ki.Zt(6,10,0,3),defaultAlignment:Ki.z6.Left},od(Ki.jE,{column:2,width:4}),od(Ki.al,{font:"bold 17pt arial",stroke:"white"},{row:0,column:0,columnSpan:5,font:"bold 17pt arial",editable:!1,isMultiline:!1,minSize:new Ki.$u(10,16)},new Ki.KX("text","name").makeTwoWay())))),this.diagram.model=this.model}}return r.\u0275fac=function(o){return new(o||r)},r.\u0275cmp=_o({type:r,selectors:[["app-tree"]],viewQuery:function(o,a){if(1&o&&(X1(rj,7),X1(oj,7)),2&o){let c;tc(c=ec())&&(a.myDiagramComponent=c.first),tc(c=ec())&&(a.myPaletteComponent=c.first)}},inputs:{model:"model"},decls:2,vars:0,consts:[[1,"diagram-container"],["id","myDiagramDiv"]],template:function(o,a){1&o&&(ye(0,"div",0),Nu(1,"div",1),_e())},styles:["#myDiagramDiv{width:900px;height:400px;border:1px solid black;background-color:#696969}.diagram-container{display:flex;justify-content:center}\n"],encapsulation:2}),r})();function lj(r,s){if(1&r&&(ye(0,"div",1),rr(1),_e()),2&r){const o=s.$implicit;ge(1),$l(" ",o," ")}}let aj=(()=>{class r{constructor(o){this.messageService=o}ngOnInit(){}}return r.\u0275fac=function(o){return new(o||r)(ct(eP))},r.\u0275cmp=_o({type:r,selectors:[["app-messages"]],decls:2,vars:1,consts:[["class","messages",4,"ngFor","ngForOf"],[1,"messages"]],template:function(o,a){1&o&&(ye(0,"div"),wi(1,lj,2,1,"div",0),_e()),2&o&&(ge(1),Se("ngForOf",a.messageService.messages))},dependencies:[QD],styles:["h2[_ngcontent-%COMP%]{color:#a80000;font-family:Arial,Helvetica,sans-serif;font-weight:lighter}.clear[_ngcontent-%COMP%]{color:#333;background-color:#eee;margin-bottom:12px;padding:1rem;border-radius:4px;font-size:1rem}.clear[_ngcontent-%COMP%]:hover{color:#fff;background-color:#42545c}.messages[_ngcontent-%COMP%]{font-family:Arial,Helvetica,sans-serif}"]}),r})(),oP=(()=>{class r{constructor(o,a){this._renderer=o,this._elementRef=a,this.onChange=c=>{},this.onTouched=()=>{}}setProperty(o,a){this._renderer.setProperty(this._elementRef.nativeElement,o,a)}registerOnTouched(o){this.onTouched=o}registerOnChange(o){this.onChange=o}setDisabledState(o){this.setProperty("disabled",o)}}return r.\u0275fac=function(o){return new(o||r)(ct(Pl),ct(Zn))},r.\u0275dir=Kt({type:r}),r})(),sg=(()=>{class r extends oP{}return r.\u0275fac=function(){let s;return function(a){return(s||(s=function Tr(r){return sa(()=>{const s=r.prototype.constructor,o=s[He]||pv(s),a=Object.prototype;let c=Object.getPrototypeOf(r.prototype).constructor;for(;c&&c!==a;){const d=c[He]||pv(c);if(d&&d!==o)return d;c=Object.getPrototypeOf(c)}return d=>new d})}(r)))(a||r)}}(),r.\u0275dir=Kt({type:r,features:[sn]}),r})();const Ya=new Yt("NgValueAccessor"),cj={provide:Ya,useExisting:vn(()=>WC),multi:!0},dj=new Yt("CompositionEventMode");let WC=(()=>{class r extends oP{constructor(o,a,c){super(o,a),this._compositionMode=c,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function fj(){const r=$u()?$u().getUserAgent():"";return/android (\d+)/.test(r.toLowerCase())}())}writeValue(o){this.setProperty("value",o??"")}_handleInput(o){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(o)}_compositionStart(){this._composing=!0}_compositionEnd(o){this._composing=!1,this._compositionMode&&this.onChange(o)}}return r.\u0275fac=function(o){return new(o||r)(ct(Pl),ct(Zn),ct(dj,8))},r.\u0275dir=Kt({type:r,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(o,a){1&o&&Je("input",function(d){return a._handleInput(d.target.value)})("blur",function(){return a.onTouched()})("compositionstart",function(){return a._compositionStart()})("compositionend",function(d){return a._compositionEnd(d.target.value)})},features:[Dn([cj]),sn]}),r})();const Jo=new Yt("NgValidators"),ld=new Yt("NgAsyncValidators");function mP(r){return null!=r}function yP(r){return Rh(r)?jt(r):r}function vP(r){let s={};return r.forEach(o=>{s=null!=o?{...s,...o}:s}),0===Object.keys(s).length?null:s}function wP(r,s){return s.map(o=>o(r))}function xP(r){return r.map(s=>function mj(r){return!r.validate}(s)?s:o=>s.validate(o))}function QS(r){return null!=r?function CP(r){if(!r)return null;const s=r.filter(mP);return 0==s.length?null:function(o){return vP(wP(o,s))}}(xP(r)):null}function qS(r){return null!=r?function MP(r){if(!r)return null;const s=r.filter(mP);return 0==s.length?null:function(o){return function uj(...r){const s=ix(r),{args:o,keys:a}=_I(r),c=new bi(d=>{const{length:y}=o;if(!y)return void d.complete();const w=new Array(y);let C=y,S=y;for(let E=0;E<y;E++){let A=!1;Ws(o[E]).subscribe(ar(d,R=>{A||(A=!0,S--),w[E]=R},()=>C--,void 0,()=>{(!C||!A)&&(S||d.next(a?EI(a,w):w),d.complete())}))}});return s?c.pipe(TI(s)):c}(wP(o,s).map(yP)).pipe(ke(vP))}}(xP(r)):null}function DP(r,s){return null===r?[s]:Array.isArray(r)?[...r,s]:[r,s]}function t_(r){return r?Array.isArray(r)?r:[r]:[]}function KC(r,s){return Array.isArray(r)?r.includes(s):r===s}function TP(r,s){const o=t_(s);return t_(r).forEach(c=>{KC(o,c)||o.push(c)}),o}function EP(r,s){return t_(s).filter(o=>!KC(r,o))}class IP{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(s){this._rawValidators=s||[],this._composedValidatorFn=QS(this._rawValidators)}_setAsyncValidators(s){this._rawAsyncValidators=s||[],this._composedAsyncValidatorFn=qS(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(s){this._onDestroyCallbacks.push(s)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(s=>s()),this._onDestroyCallbacks=[]}reset(s){this.control&&this.control.reset(s)}hasError(s,o){return!!this.control&&this.control.hasError(s,o)}getError(s,o){return this.control?this.control.getError(s,o):null}}class xs extends IP{get formDirective(){return null}get path(){return null}}class ad extends IP{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}let PP=(()=>{class r extends class NP{constructor(s){this._cd=s}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}{constructor(o){super(o)}}return r.\u0275fac=function(o){return new(o||r)(ct(ad,2))},r.\u0275dir=Kt({type:r,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(o,a){2&o&&Bh("ng-untouched",a.isUntouched)("ng-touched",a.isTouched)("ng-pristine",a.isPristine)("ng-dirty",a.isDirty)("ng-valid",a.isValid)("ng-invalid",a.isInvalid)("ng-pending",a.isPending)},features:[sn]}),r})();const kw="VALID",JC="INVALID",Fy="PENDING",Ow="DISABLED";function kP(r){return Array.isArray(r)?QS(r):r||null}function OP(r){return Array.isArray(r)?qS(r):r||null}function ZC(r){return null!=r&&!Array.isArray(r)&&"object"==typeof r}function Lw(r,s){(function l_(r,s){const o=function SP(r){return r._rawValidators}(r);null!==s.validator?r.setValidators(DP(o,s.validator)):"function"==typeof o&&r.setValidators([o]);const a=function _P(r){return r._rawAsyncValidators}(r);null!==s.asyncValidator?r.setAsyncValidators(DP(a,s.asyncValidator)):"function"==typeof a&&r.setAsyncValidators([a]);const c=()=>r.updateValueAndValidity();tM(s._rawValidators,c),tM(s._rawAsyncValidators,c)})(r,s),s.valueAccessor.writeValue(r.value),r.disabled&&s.valueAccessor.setDisabledState?.(!0),function Tj(r,s){s.valueAccessor.registerOnChange(o=>{r._pendingValue=o,r._pendingChange=!0,r._pendingDirty=!0,"change"===r.updateOn&&RP(r,s)})}(r,s),function Ij(r,s){const o=(a,c)=>{s.valueAccessor.writeValue(a),c&&s.viewToModelUpdate(a)};r.registerOnChange(o),s._registerOnDestroy(()=>{r._unregisterOnChange(o)})}(r,s),function Ej(r,s){s.valueAccessor.registerOnTouched(()=>{r._pendingTouched=!0,"blur"===r.updateOn&&r._pendingChange&&RP(r,s),"submit"!==r.updateOn&&r.markAsTouched()})}(r,s),function _j(r,s){if(s.valueAccessor.setDisabledState){const o=a=>{s.valueAccessor.setDisabledState(a)};r.registerOnDisabledChange(o),s._registerOnDestroy(()=>{r._unregisterOnDisabledChange(o)})}}(r,s)}function tM(r,s){r.forEach(o=>{o.registerOnValidatorChange&&o.registerOnValidatorChange(s)})}function RP(r,s){r._pendingDirty&&r.markAsDirty(),r.setValue(r._pendingValue,{emitModelToViewChange:!1}),s.viewToModelUpdate(r._pendingValue),r._pendingChange=!1}function UP(r,s){const o=r.indexOf(s);o>-1&&r.splice(o,1)}function HP(r){return"object"==typeof r&&null!==r&&2===Object.keys(r).length&&"value"in r&&"disabled"in r}const Fj={provide:ad,useExisting:vn(()=>nM)},WP=(()=>Promise.resolve())();let nM=(()=>{class r extends ad{constructor(o,a,c,d,y){super(),this._changeDetectorRef=y,this.control=new class extends class FP{constructor(s,o){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=s,this._rawAsyncValidators=o,this._composedValidatorFn=kP(this._rawValidators),this._composedAsyncValidatorFn=OP(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(s){this._rawValidators=this._composedValidatorFn=s}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(s){this._rawAsyncValidators=this._composedAsyncValidatorFn=s}get parent(){return this._parent}get valid(){return this.status===kw}get invalid(){return this.status===JC}get pending(){return this.status==Fy}get disabled(){return this.status===Ow}get enabled(){return this.status!==Ow}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(s){this._rawValidators=s,this._composedValidatorFn=kP(s)}setAsyncValidators(s){this._rawAsyncValidators=s,this._composedAsyncValidatorFn=OP(s)}addValidators(s){this.setValidators(TP(s,this._rawValidators))}addAsyncValidators(s){this.setAsyncValidators(TP(s,this._rawAsyncValidators))}removeValidators(s){this.setValidators(EP(s,this._rawValidators))}removeAsyncValidators(s){this.setAsyncValidators(EP(s,this._rawAsyncValidators))}hasValidator(s){return KC(this._rawValidators,s)}hasAsyncValidator(s){return KC(this._rawAsyncValidators,s)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(s={}){this.touched=!0,this._parent&&!s.onlySelf&&this._parent.markAsTouched(s)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(s=>s.markAllAsTouched())}markAsUntouched(s={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(o=>{o.markAsUntouched({onlySelf:!0})}),this._parent&&!s.onlySelf&&this._parent._updateTouched(s)}markAsDirty(s={}){this.pristine=!1,this._parent&&!s.onlySelf&&this._parent.markAsDirty(s)}markAsPristine(s={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(o=>{o.markAsPristine({onlySelf:!0})}),this._parent&&!s.onlySelf&&this._parent._updatePristine(s)}markAsPending(s={}){this.status=Fy,!1!==s.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!s.onlySelf&&this._parent.markAsPending(s)}disable(s={}){const o=this._parentMarkedDirty(s.onlySelf);this.status=Ow,this.errors=null,this._forEachChild(a=>{a.disable({...s,onlySelf:!0})}),this._updateValue(),!1!==s.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...s,skipPristineCheck:o}),this._onDisabledChange.forEach(a=>a(!0))}enable(s={}){const o=this._parentMarkedDirty(s.onlySelf);this.status=kw,this._forEachChild(a=>{a.enable({...s,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:s.emitEvent}),this._updateAncestors({...s,skipPristineCheck:o}),this._onDisabledChange.forEach(a=>a(!1))}_updateAncestors(s){this._parent&&!s.onlySelf&&(this._parent.updateValueAndValidity(s),s.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(s){this._parent=s}getRawValue(){return this.value}updateValueAndValidity(s={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===kw||this.status===Fy)&&this._runAsyncValidator(s.emitEvent)),!1!==s.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!s.onlySelf&&this._parent.updateValueAndValidity(s)}_updateTreeValidity(s={emitEvent:!0}){this._forEachChild(o=>o._updateTreeValidity(s)),this.updateValueAndValidity({onlySelf:!0,emitEvent:s.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ow:kw}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(s){if(this.asyncValidator){this.status=Fy,this._hasOwnPendingAsyncValidator=!0;const o=yP(this.asyncValidator(this));this._asyncValidationSubscription=o.subscribe(a=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(a,{emitEvent:s})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(s,o={}){this.errors=s,this._updateControlsErrors(!1!==o.emitEvent)}get(s){let o=s;return null==o||(Array.isArray(o)||(o=o.split(".")),0===o.length)?null:o.reduce((a,c)=>a&&a._find(c),this)}getError(s,o){const a=o?this.get(o):this;return a&&a.errors?a.errors[s]:null}hasError(s,o){return!!this.getError(s,o)}get root(){let s=this;for(;s._parent;)s=s._parent;return s}_updateControlsErrors(s){this.status=this._calculateStatus(),s&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(s)}_initObservables(){this.valueChanges=new Wn,this.statusChanges=new Wn}_calculateStatus(){return this._allControlsDisabled()?Ow:this.errors?JC:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Fy)?Fy:this._anyControlsHaveStatus(JC)?JC:kw}_anyControlsHaveStatus(s){return this._anyControls(o=>o.status===s)}_anyControlsDirty(){return this._anyControls(s=>s.dirty)}_anyControlsTouched(){return this._anyControls(s=>s.touched)}_updatePristine(s={}){this.pristine=!this._anyControlsDirty(),this._parent&&!s.onlySelf&&this._parent._updatePristine(s)}_updateTouched(s={}){this.touched=this._anyControlsTouched(),this._parent&&!s.onlySelf&&this._parent._updateTouched(s)}_registerOnCollectionChange(s){this._onCollectionChange=s}_setUpdateStrategy(s){ZC(s)&&null!=s.updateOn&&(this._updateOn=s.updateOn)}_parentMarkedDirty(s){return!s&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(s){return null}}{constructor(s=null,o,a){super(function r_(r){return(ZC(r)?r.validators:r)||null}(o),function o_(r,s){return(ZC(s)?s.asyncValidators:r)||null}(a,o)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(s),this._setUpdateStrategy(o),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),ZC(o)&&(o.nonNullable||o.initialValueIsDefault)&&(this.defaultValue=HP(s)?s.value:s)}setValue(s,o={}){this.value=this._pendingValue=s,this._onChange.length&&!1!==o.emitModelToViewChange&&this._onChange.forEach(a=>a(this.value,!1!==o.emitViewToModelChange)),this.updateValueAndValidity(o)}patchValue(s,o={}){this.setValue(s,o)}reset(s=this.defaultValue,o={}){this._applyFormState(s),this.markAsPristine(o),this.markAsUntouched(o),this.setValue(this.value,o),this._pendingChange=!1}_updateValue(){}_anyControls(s){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(s){this._onChange.push(s)}_unregisterOnChange(s){UP(this._onChange,s)}registerOnDisabledChange(s){this._onDisabledChange.push(s)}_unregisterOnDisabledChange(s){UP(this._onDisabledChange,s)}_forEachChild(s){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(s){HP(s)?(this.value=this._pendingValue=s.value,s.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=s}},this._registered=!1,this.update=new Wn,this._parent=o,this._setValidators(a),this._setAsyncValidators(c),this.valueAccessor=function u_(r,s){if(!s)return null;let o,a,c;return Array.isArray(s),s.forEach(d=>{d.constructor===WC?o=d:function Aj(r){return Object.getPrototypeOf(r.constructor)===sg}(d)?a=d:c=d}),c||a||o||null}(0,d)}ngOnChanges(o){if(this._checkForErrors(),!this._registered||"name"in o){if(this._registered&&(this._checkName(),this.formDirective)){const a=o.name.previousValue;this.formDirective.removeControl({name:a,path:this._getPath(a)})}this._setUpControl()}"isDisabled"in o&&this._updateDisabled(o),function a_(r,s){if(!r.hasOwnProperty("model"))return!1;const o=r.model;return!!o.isFirstChange()||!Object.is(s,o.currentValue)}(o,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(o){this.viewModel=o,this.update.emit(o)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Lw(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(o){WP.then(()=>{this.control.setValue(o,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(o){const a=o.isDisabled.currentValue,c=0!==a&&function rc(r){return"boolean"==typeof r?r:null!=r&&"false"!==r}(a);WP.then(()=>{c&&!this.control.disabled?this.control.disable():!c&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(o){return this._parent?function QC(r,s){return[...s.path,r]}(o,this._parent):[o]}}return r.\u0275fac=function(o){return new(o||r)(ct(xs,9),ct(Jo,10),ct(ld,10),ct(Ya,10),ct(Iy,8))},r.\u0275dir=Kt({type:r,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Dn([Fj]),sn,xe]}),r})(),KP=(()=>{class r{}return r.\u0275fac=function(o){return new(o||r)},r.\u0275mod=Fi({type:r}),r.\u0275inj=fi({}),r})(),lV=(()=>{class r{}return r.\u0275fac=function(o){return new(o||r)},r.\u0275mod=Fi({type:r}),r.\u0275inj=fi({imports:[KP]}),r})(),aV=(()=>{class r{}return r.\u0275fac=function(o){return new(o||r)},r.\u0275mod=Fi({type:r}),r.\u0275inj=fi({imports:[lV]}),r})(),fA=(()=>{class r{constructor(o,a,c){this.el=o,this.ngModel=a,this.cd=c}ngAfterViewInit(){this.updateFilledState(),this.cd.detectChanges()}ngDoCheck(){this.updateFilledState()}onInput(o){this.updateFilledState()}updateFilledState(){this.filled=this.el.nativeElement.value&&this.el.nativeElement.value.length||this.ngModel&&this.ngModel.model}}return r.\u0275fac=function(o){return new(o||r)(ct(Zn),ct(nM,8),ct(Iy))},r.\u0275dir=Kt({type:r,selectors:[["","pInputText",""]],hostAttrs:[1,"p-inputtext","p-component","p-element"],hostVars:2,hostBindings:function(o,a){1&o&&Je("input",function(d){return a.onInput(d)}),2&o&&Bh("p-filled",a.filled)}}),r})(),dA=(()=>{class r{}return r.\u0275fac=function(o){return new(o||r)},r.\u0275mod=Fi({type:r}),r.\u0275inj=fi({imports:[tg]}),r})();const hV=["input"];function cV(r,s){if(1&r){const o=jo();ye(0,"i",6),Je("click",function(){return ae(o),hn(Ae().clear())}),_e()}}const pA=function(){return{"p-inputnumber-button p-inputnumber-button-up":!0}},gA=function(){return{"p-inputnumber-button p-inputnumber-button-down":!0}};function fV(r,s){if(1&r){const o=jo();ye(0,"span",7)(1,"button",8),Je("mousedown",function(c){return ae(o),hn(Ae().onUpButtonMouseDown(c))})("mouseup",function(){return ae(o),hn(Ae().onUpButtonMouseUp())})("mouseleave",function(){return ae(o),hn(Ae().onUpButtonMouseLeave())})("keydown",function(c){return ae(o),hn(Ae().onUpButtonKeyDown(c))})("keyup",function(){return ae(o),hn(Ae().onUpButtonKeyUp())}),_e(),ye(2,"button",8),Je("mousedown",function(c){return ae(o),hn(Ae().onDownButtonMouseDown(c))})("mouseup",function(){return ae(o),hn(Ae().onDownButtonMouseUp())})("mouseleave",function(){return ae(o),hn(Ae().onDownButtonMouseLeave())})("keydown",function(c){return ae(o),hn(Ae().onDownButtonKeyDown(c))})("keyup",function(){return ae(o),hn(Ae().onDownButtonKeyUp())}),_e()()}if(2&r){const o=Ae();ge(1),Pr(o.incrementButtonClass),Se("ngClass",xo(10,pA))("icon",o.incrementButtonIcon)("disabled",o.disabled),ge(1),Pr(o.decrementButtonClass),Se("ngClass",xo(11,gA))("icon",o.decrementButtonIcon)("disabled",o.disabled)}}function dV(r,s){if(1&r){const o=jo();ye(0,"button",8),Je("mousedown",function(c){return ae(o),hn(Ae().onUpButtonMouseDown(c))})("mouseup",function(){return ae(o),hn(Ae().onUpButtonMouseUp())})("mouseleave",function(){return ae(o),hn(Ae().onUpButtonMouseLeave())})("keydown",function(c){return ae(o),hn(Ae().onUpButtonKeyDown(c))})("keyup",function(){return ae(o),hn(Ae().onUpButtonKeyUp())}),_e()}if(2&r){const o=Ae();Pr(o.incrementButtonClass),Se("ngClass",xo(5,pA))("icon",o.incrementButtonIcon)("disabled",o.disabled)}}function pV(r,s){if(1&r){const o=jo();ye(0,"button",8),Je("mousedown",function(c){return ae(o),hn(Ae().onDownButtonMouseDown(c))})("mouseup",function(){return ae(o),hn(Ae().onDownButtonMouseUp())})("mouseleave",function(){return ae(o),hn(Ae().onDownButtonMouseLeave())})("keydown",function(c){return ae(o),hn(Ae().onDownButtonKeyDown(c))})("keyup",function(){return ae(o),hn(Ae().onDownButtonKeyUp())}),_e()}if(2&r){const o=Ae();Pr(o.decrementButtonClass),Se("ngClass",xo(5,gA))("icon",o.decrementButtonIcon)("disabled",o.disabled)}}const gV=function(r,s,o){return{"p-inputnumber p-component":!0,"p-inputnumber-buttons-stacked":r,"p-inputnumber-buttons-horizontal":s,"p-inputnumber-buttons-vertical":o}},mV={provide:Ya,useExisting:vn(()=>mA),multi:!0};let mA=(()=>{class r{constructor(o,a){this.el=o,this.cd=a,this.showButtons=!1,this.format=!0,this.buttonLayout="stacked",this.incrementButtonIcon="pi pi-angle-up",this.decrementButtonIcon="pi pi-angle-down",this.readonly=!1,this.step=1,this.allowEmpty=!0,this.mode="decimal",this.useGrouping=!0,this.showClear=!1,this.onInput=new Wn,this.onFocus=new Wn,this.onBlur=new Wn,this.onKeyDown=new Wn,this.onClear=new Wn,this.onModelChange=()=>{},this.onModelTouched=()=>{},this.groupChar="",this.prefixChar="",this.suffixChar=""}get disabled(){return this._disabled}set disabled(o){o&&(this.focused=!1),this._disabled=o,this.timer&&this.clearTimer()}ngOnChanges(o){["locale","localeMatcher","mode","currency","currencyDisplay","useGrouping","minFractionDigits","maxFractionDigits","prefix","suffix"].some(c=>!!o[c])&&this.updateConstructParser()}ngOnInit(){this.constructParser(),this.initialized=!0}getOptions(){return{localeMatcher:this.localeMatcher,style:this.mode,currency:this.currency,currencyDisplay:this.currencyDisplay,useGrouping:this.useGrouping,minimumFractionDigits:this.minFractionDigits,maximumFractionDigits:this.maxFractionDigits}}constructParser(){this.numberFormat=new Intl.NumberFormat(this.locale,this.getOptions());const o=[...new Intl.NumberFormat(this.locale,{useGrouping:!1}).format(9876543210)].reverse(),a=new Map(o.map((c,d)=>[c,d]));this._numeral=new RegExp(`[${o.join("")}]`,"g"),this._group=this.getGroupingExpression(),this._minusSign=this.getMinusSignExpression(),this._currency=this.getCurrencyExpression(),this._decimal=this.getDecimalExpression(),this._suffix=this.getSuffixExpression(),this._prefix=this.getPrefixExpression(),this._index=c=>a.get(c)}updateConstructParser(){this.initialized&&this.constructParser()}escapeRegExp(o){return o.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}getDecimalExpression(){const o=new Intl.NumberFormat(this.locale,{...this.getOptions(),useGrouping:!1});return new RegExp(`[${o.format(1.1).replace(this._currency,"").trim().replace(this._numeral,"")}]`,"g")}getGroupingExpression(){const o=new Intl.NumberFormat(this.locale,{useGrouping:!0});return this.groupChar=o.format(1e6).trim().replace(this._numeral,"").charAt(0),new RegExp(`[${this.groupChar}]`,"g")}getMinusSignExpression(){const o=new Intl.NumberFormat(this.locale,{useGrouping:!1});return new RegExp(`[${o.format(-1).trim().replace(this._numeral,"")}]`,"g")}getCurrencyExpression(){if(this.currency){const o=new Intl.NumberFormat(this.locale,{style:"currency",currency:this.currency,currencyDisplay:this.currencyDisplay,minimumFractionDigits:0,maximumFractionDigits:0});return new RegExp(`[${o.format(1).replace(/\s/g,"").replace(this._numeral,"").replace(this._group,"")}]`,"g")}return new RegExp("[]","g")}getPrefixExpression(){if(this.prefix)this.prefixChar=this.prefix;else{const o=new Intl.NumberFormat(this.locale,{style:this.mode,currency:this.currency,currencyDisplay:this.currencyDisplay});this.prefixChar=o.format(1).split("1")[0]}return new RegExp(`${this.escapeRegExp(this.prefixChar||"")}`,"g")}getSuffixExpression(){if(this.suffix)this.suffixChar=this.suffix;else{const o=new Intl.NumberFormat(this.locale,{style:this.mode,currency:this.currency,currencyDisplay:this.currencyDisplay,minimumFractionDigits:0,maximumFractionDigits:0});this.suffixChar=o.format(1).split("1")[1]}return new RegExp(`${this.escapeRegExp(this.suffixChar||"")}`,"g")}formatValue(o){if(null!=o){if("-"===o)return o;if(this.format){let c=new Intl.NumberFormat(this.locale,this.getOptions()).format(o);return this.prefix&&(c=this.prefix+c),this.suffix&&(c+=this.suffix),c}return o.toString()}return""}parseValue(o){let a=o.replace(this._suffix,"").replace(this._prefix,"").trim().replace(/\s/g,"").replace(this._currency,"").replace(this._group,"").replace(this._minusSign,"-").replace(this._decimal,".").replace(this._numeral,this._index);if(a){if("-"===a)return a;let c=+a;return isNaN(c)?null:c}return null}repeat(o,a,c){if(this.readonly)return;let d=a||500;this.clearTimer(),this.timer=setTimeout(()=>{this.repeat(o,40,c)},d),this.spin(o,c)}spin(o,a){let c=this.step*a,d=this.parseValue(this.input.nativeElement.value)||0,y=this.validateValue(d+c);this.maxlength&&this.maxlength<this.formatValue(y).length||(this.updateInput(y,null,"spin",null),this.updateModel(o,y),this.handleOnInput(o,d,y))}clear(){this.value=null,this.onModelChange(this.value),this.onClear.emit()}onUpButtonMouseDown(o){this.input.nativeElement.focus(),this.repeat(o,null,1),o.preventDefault()}onUpButtonMouseUp(){this.clearTimer()}onUpButtonMouseLeave(){this.clearTimer()}onUpButtonKeyDown(o){(32===o.keyCode||13===o.keyCode)&&this.repeat(o,null,1)}onUpButtonKeyUp(){this.clearTimer()}onDownButtonMouseDown(o){this.input.nativeElement.focus(),this.repeat(o,null,-1),o.preventDefault()}onDownButtonMouseUp(){this.clearTimer()}onDownButtonMouseLeave(){this.clearTimer()}onDownButtonKeyUp(){this.clearTimer()}onDownButtonKeyDown(o){(32===o.keyCode||13===o.keyCode)&&this.repeat(o,null,-1)}onUserInput(o){this.readonly||(this.isSpecialChar&&(o.target.value=this.lastValue),this.isSpecialChar=!1)}onInputKeyDown(o){if(this.readonly)return;if(this.lastValue=o.target.value,o.shiftKey||o.altKey)return void(this.isSpecialChar=!0);let a=o.target.selectionStart,c=o.target.selectionEnd,d=o.target.value,y=null;switch(o.altKey&&o.preventDefault(),o.which){case 38:this.spin(o,1),o.preventDefault();break;case 40:this.spin(o,-1),o.preventDefault();break;case 37:this.isNumeralChar(d.charAt(a-1))||o.preventDefault();break;case 39:this.isNumeralChar(d.charAt(a))||o.preventDefault();break;case 13:y=this.validateValue(this.parseValue(this.input.nativeElement.value)),this.input.nativeElement.value=this.formatValue(y),this.input.nativeElement.setAttribute("aria-valuenow",y),this.updateModel(o,y);break;case 8:if(o.preventDefault(),a===c){const w=d.charAt(a-1),{decimalCharIndex:C,decimalCharIndexWithoutPrefix:S}=this.getDecimalCharIndexes(d);if(this.isNumeralChar(w)){const E=this.getDecimalLength(d);if(this._group.test(w))this._group.lastIndex=0,y=d.slice(0,a-2)+d.slice(a-1);else if(this._decimal.test(w))this._decimal.lastIndex=0,E?this.input.nativeElement.setSelectionRange(a-1,a-1):y=d.slice(0,a-1)+d.slice(a);else if(C>0&&a>C){const A=this.isDecimalMode()&&(this.minFractionDigits||0)<E?"":"0";y=d.slice(0,a-1)+A+d.slice(a)}else 1===S?(y=d.slice(0,a-1)+"0"+d.slice(a),y=this.parseValue(y)>0?y:""):y=d.slice(0,a-1)+d.slice(a)}this.updateValue(o,y,null,"delete-single")}else y=this.deleteRange(d,a,c),this.updateValue(o,y,null,"delete-range");break;case 46:if(o.preventDefault(),a===c){const w=d.charAt(a),{decimalCharIndex:C,decimalCharIndexWithoutPrefix:S}=this.getDecimalCharIndexes(d);if(this.isNumeralChar(w)){const E=this.getDecimalLength(d);if(this._group.test(w))this._group.lastIndex=0,y=d.slice(0,a)+d.slice(a+2);else if(this._decimal.test(w))this._decimal.lastIndex=0,E?this.input.nativeElement.setSelectionRange(a+1,a+1):y=d.slice(0,a)+d.slice(a+1);else if(C>0&&a>C){const A=this.isDecimalMode()&&(this.minFractionDigits||0)<E?"":"0";y=d.slice(0,a)+A+d.slice(a+1)}else 1===S?(y=d.slice(0,a)+"0"+d.slice(a+1),y=this.parseValue(y)>0?y:""):y=d.slice(0,a)+d.slice(a+1)}this.updateValue(o,y,null,"delete-back-single")}else y=this.deleteRange(d,a,c),this.updateValue(o,y,null,"delete-range")}this.onKeyDown.emit(o)}onInputKeyPress(o){if(this.readonly)return;let a=o.which||o.keyCode,c=String.fromCharCode(a);const d=this.isDecimalSign(c),y=this.isMinusSign(c);13!=a&&o.preventDefault(),(48<=a&&a<=57||y||d)&&this.insert(o,c,{isDecimalSign:d,isMinusSign:y})}onPaste(o){if(!this.disabled&&!this.readonly){o.preventDefault();let a=(o.clipboardData||window.clipboardData).getData("Text");if(a){let c=this.parseValue(a);null!=c&&this.insert(o,c.toString())}}}allowMinusSign(){return null==this.min||this.min<0}isMinusSign(o){return!(!this._minusSign.test(o)&&"-"!==o||(this._minusSign.lastIndex=0,0))}isDecimalSign(o){return!!this._decimal.test(o)&&(this._decimal.lastIndex=0,!0)}isDecimalMode(){return"decimal"===this.mode}getDecimalCharIndexes(o){let a=o.search(this._decimal);this._decimal.lastIndex=0;const d=o.replace(this._prefix,"").trim().replace(/\s/g,"").replace(this._currency,"").search(this._decimal);return this._decimal.lastIndex=0,{decimalCharIndex:a,decimalCharIndexWithoutPrefix:d}}getCharIndexes(o){const a=o.search(this._decimal);this._decimal.lastIndex=0;const c=o.search(this._minusSign);this._minusSign.lastIndex=0;const d=o.search(this._suffix);this._suffix.lastIndex=0;const y=o.search(this._currency);return this._currency.lastIndex=0,{decimalCharIndex:a,minusCharIndex:c,suffixCharIndex:d,currencyCharIndex:y}}insert(o,a,c={isDecimalSign:!1,isMinusSign:!1}){const d=a.search(this._minusSign);if(this._minusSign.lastIndex=0,!this.allowMinusSign()&&-1!==d)return;let y=this.input.nativeElement.selectionStart,w=this.input.nativeElement.selectionEnd,C=this.input.nativeElement.value.trim();const{decimalCharIndex:S,minusCharIndex:E,suffixCharIndex:A,currencyCharIndex:R}=this.getCharIndexes(C);let j;if(c.isMinusSign)0===y&&(j=C,(-1===E||0!==w)&&(j=this.insertText(C,a,0,w)),this.updateValue(o,j,a,"insert"));else if(c.isDecimalSign)S>0&&y===S?this.updateValue(o,C,a,"insert"):(S>y&&S<w||-1===S&&this.maxFractionDigits)&&(j=this.insertText(C,a,y,w),this.updateValue(o,j,a,"insert"));else{const z=this.numberFormat.resolvedOptions().maximumFractionDigits,tt=y!==w?"range-insert":"insert";if(S>0&&y>S){if(y+a.length-(S+1)<=z){const st=R>=y?R-1:A>=y?A:C.length;j=C.slice(0,y)+a+C.slice(y+a.length,st)+C.slice(st),this.updateValue(o,j,a,tt)}}else j=this.insertText(C,a,y,w),this.updateValue(o,j,a,tt)}}insertText(o,a,c,d){if(2===("."===a?a:a.split(".")).length){const w=o.slice(c,d).search(this._decimal);return this._decimal.lastIndex=0,w>0?o.slice(0,c)+this.formatValue(a)+o.slice(d):o||this.formatValue(a)}return d-c===o.length?this.formatValue(a):0===c?a+o.slice(d):d===o.length?o.slice(0,c)+a:o.slice(0,c)+a+o.slice(d)}deleteRange(o,a,c){let d;return d=c-a===o.length?"":0===a?o.slice(c):c===o.length?o.slice(0,a):o.slice(0,a)+o.slice(c),d}initCursor(){let o=this.input.nativeElement.selectionStart,a=this.input.nativeElement.value,c=a.length,d=null,y=(this.prefixChar||"").length;a=a.replace(this._prefix,""),o-=y;let w=a.charAt(o);if(this.isNumeralChar(w))return o+y;let C=o-1;for(;C>=0;){if(w=a.charAt(C),this.isNumeralChar(w)){d=C+y;break}C--}if(null!==d)this.input.nativeElement.setSelectionRange(d+1,d+1);else{for(C=o;C<c;){if(w=a.charAt(C),this.isNumeralChar(w)){d=C+y;break}C++}null!==d&&this.input.nativeElement.setSelectionRange(d,d)}return d||0}onInputClick(){this.readonly||this.initCursor()}isNumeralChar(o){return!(1!==o.length||!(this._numeral.test(o)||this._decimal.test(o)||this._group.test(o)||this._minusSign.test(o))||(this.resetRegex(),0))}resetRegex(){this._numeral.lastIndex=0,this._decimal.lastIndex=0,this._group.lastIndex=0,this._minusSign.lastIndex=0}updateValue(o,a,c,d){let y=this.input.nativeElement.value,w=null;null!=a&&(w=this.parseValue(a),w=w||this.allowEmpty?w:0,this.updateInput(w,c,d,a),this.handleOnInput(o,y,w))}handleOnInput(o,a,c){this.isValueChanged(a,c)&&this.onInput.emit({originalEvent:o,value:c})}isValueChanged(o,a){return null===a&&null!==o||null!=a&&a!==("string"==typeof o?this.parseValue(o):o)}validateValue(o){return"-"===o||null==o?null:null!=this.min&&o<this.min?this.min:null!=this.max&&o>this.max?this.max:o}updateInput(o,a,c,d){a=a||"";let y=this.input.nativeElement.value,w=this.formatValue(o),C=y.length;if(w!==d&&(w=this.concatValues(w,d)),0===C){this.input.nativeElement.value=w,this.input.nativeElement.setSelectionRange(0,0);const E=this.initCursor()+a.length;this.input.nativeElement.setSelectionRange(E,E)}else{let S=this.input.nativeElement.selectionStart,E=this.input.nativeElement.selectionEnd;if(this.maxlength&&this.maxlength<w.length)return;this.input.nativeElement.value=w;let A=w.length;if("range-insert"===c){const R=this.parseValue((y||"").slice(0,S)),z=(null!==R?R.toString():"").split("").join(`(${this.groupChar})?`),tt=new RegExp(z,"g");tt.test(w);const st=a.split("").join(`(${this.groupChar})?`),ht=new RegExp(st,"g");ht.test(w.slice(tt.lastIndex)),E=tt.lastIndex+ht.lastIndex,this.input.nativeElement.setSelectionRange(E,E)}else if(A===C)"insert"===c||"delete-back-single"===c?this.input.nativeElement.setSelectionRange(E+1,E+1):"delete-single"===c?this.input.nativeElement.setSelectionRange(E-1,E-1):("delete-range"===c||"spin"===c)&&this.input.nativeElement.setSelectionRange(E,E);else if("delete-back-single"===c){let R=y.charAt(E-1),j=y.charAt(E),z=C-A,tt=this._group.test(j);tt&&1===z?E+=1:!tt&&this.isNumeralChar(R)&&(E+=-1*z+1),this._group.lastIndex=0,this.input.nativeElement.setSelectionRange(E,E)}else if("-"===y&&"insert"===c){this.input.nativeElement.setSelectionRange(0,0);const j=this.initCursor()+a.length+1;this.input.nativeElement.setSelectionRange(j,j)}else E+=A-C,this.input.nativeElement.setSelectionRange(E,E)}this.input.nativeElement.setAttribute("aria-valuenow",o)}concatValues(o,a){if(o&&a){let c=a.search(this._decimal);return this._decimal.lastIndex=0,-1!==c?o.split(this._decimal)[0]+a.slice(c):o}return o}getDecimalLength(o){if(o){const a=o.split(this._decimal);if(2===a.length)return a[1].replace(this._suffix,"").trim().replace(/\s/g,"").replace(this._currency,"").length}return 0}onInputFocus(o){this.focused=!0,this.onFocus.emit(o)}onInputBlur(o){this.focused=!1;let a=this.validateValue(this.parseValue(this.input.nativeElement.value));this.input.nativeElement.value=this.formatValue(a),this.input.nativeElement.setAttribute("aria-valuenow",a),this.updateModel(o,a),this.onBlur.emit(o)}formattedValue(){return this.formatValue(this.value||this.allowEmpty?this.value:0)}updateModel(o,a){this.value!==a&&(this.value=a,this.onModelChange(a)),this.onModelTouched()}writeValue(o){this.value=o,this.cd.markForCheck()}registerOnChange(o){this.onModelChange=o}registerOnTouched(o){this.onModelTouched=o}setDisabledState(o){this.disabled=o,this.cd.markForCheck()}get filled(){return null!=this.value&&this.value.toString().length>0}clearTimer(){this.timer&&clearInterval(this.timer)}getFormatter(){return this.numberFormat}}return r.\u0275fac=function(o){return new(o||r)(ct(Zn),ct(Iy))},r.\u0275cmp=_o({type:r,selectors:[["p-inputNumber"]],viewQuery:function(o,a){if(1&o&&X1(hV,5),2&o){let c;tc(c=ec())&&(a.input=c.first)}},hostAttrs:[1,"p-element","p-inputwrapper"],hostVars:6,hostBindings:function(o,a){2&o&&Bh("p-inputwrapper-filled",a.filled)("p-inputwrapper-focus",a.focused)("p-inputnumber-clearable",a.showClear&&"vertical"!=a.buttonLayout)},inputs:{showButtons:"showButtons",format:"format",buttonLayout:"buttonLayout",inputId:"inputId",styleClass:"styleClass",style:"style",placeholder:"placeholder",size:"size",maxlength:"maxlength",tabindex:"tabindex",title:"title",ariaLabel:"ariaLabel",ariaRequired:"ariaRequired",name:"name",required:"required",autocomplete:"autocomplete",min:"min",max:"max",incrementButtonClass:"incrementButtonClass",decrementButtonClass:"decrementButtonClass",incrementButtonIcon:"incrementButtonIcon",decrementButtonIcon:"decrementButtonIcon",readonly:"readonly",step:"step",allowEmpty:"allowEmpty",locale:"locale",localeMatcher:"localeMatcher",mode:"mode",currency:"currency",currencyDisplay:"currencyDisplay",useGrouping:"useGrouping",minFractionDigits:"minFractionDigits",maxFractionDigits:"maxFractionDigits",prefix:"prefix",suffix:"suffix",inputStyle:"inputStyle",inputStyleClass:"inputStyleClass",showClear:"showClear",disabled:"disabled"},outputs:{onInput:"onInput",onFocus:"onFocus",onBlur:"onBlur",onKeyDown:"onKeyDown",onClear:"onClear"},features:[Dn([mV]),xe],decls:7,vars:32,consts:[[3,"ngClass","ngStyle"],["pInputText","","inputmode","decimal",3,"ngClass","ngStyle","value","disabled","readonly","input","keydown","keypress","paste","click","focus","blur"],["input",""],["class","p-inputnumber-clear-icon pi pi-times",3,"click",4,"ngIf"],["class","p-inputnumber-button-group",4,"ngIf"],["type","button","pButton","",3,"ngClass","class","icon","disabled","mousedown","mouseup","mouseleave","keydown","keyup",4,"ngIf"],[1,"p-inputnumber-clear-icon","pi","pi-times",3,"click"],[1,"p-inputnumber-button-group"],["type","button","pButton","",3,"ngClass","icon","disabled","mousedown","mouseup","mouseleave","keydown","keyup"]],template:function(o,a){1&o&&(ye(0,"span",0)(1,"input",1,2),Je("input",function(d){return a.onUserInput(d)})("keydown",function(d){return a.onInputKeyDown(d)})("keypress",function(d){return a.onInputKeyPress(d)})("paste",function(d){return a.onPaste(d)})("click",function(){return a.onInputClick()})("focus",function(d){return a.onInputFocus(d)})("blur",function(d){return a.onInputBlur(d)}),_e(),wi(3,cV,1,0,"i",3),wi(4,fV,3,12,"span",4),wi(5,dV,1,6,"button",5),wi(6,pV,1,6,"button",5),_e()),2&o&&(Pr(a.styleClass),Se("ngClass",_T(28,gV,a.showButtons&&"stacked"===a.buttonLayout,a.showButtons&&"horizontal"===a.buttonLayout,a.showButtons&&"vertical"===a.buttonLayout))("ngStyle",a.style),ge(1),Pr(a.inputStyleClass),Se("ngClass","p-inputnumber-input")("ngStyle",a.inputStyle)("value",a.formattedValue())("disabled",a.disabled)("readonly",a.readonly),Ro("placeholder",a.placeholder)("title",a.title)("id",a.inputId)("size",a.size)("name",a.name)("autocomplete",a.autocomplete)("maxlength",a.maxlength)("tabindex",a.tabindex)("aria-label",a.ariaLabel)("aria-required",a.ariaRequired)("required",a.required)("min",a.min)("max",a.max),ge(2),Se("ngIf","vertical"!=a.buttonLayout&&a.showClear&&a.value),ge(1),Se("ngIf",a.showButtons&&"stacked"===a.buttonLayout),ge(1),Se("ngIf",a.showButtons&&"stacked"!==a.buttonLayout),ge(1),Se("ngIf",a.showButtons&&"stacked"!==a.buttonLayout))},dependencies:[ZD,mC,eS,fA,ZS],styles:["p-inputnumber,.p-inputnumber{display:inline-flex}.p-inputnumber-button{display:flex;align-items:center;justify-content:center;flex:0 0 auto}.p-inputnumber-buttons-stacked .p-button.p-inputnumber-button .p-button-label,.p-inputnumber-buttons-horizontal .p-button.p-inputnumber-button .p-button-label{display:none}.p-inputnumber-buttons-stacked .p-button.p-inputnumber-button-up{border-top-left-radius:0;border-bottom-left-radius:0;border-bottom-right-radius:0;padding:0}.p-inputnumber-buttons-stacked .p-inputnumber-input{border-top-right-radius:0;border-bottom-right-radius:0}.p-inputnumber-buttons-stacked .p-button.p-inputnumber-button-down{border-top-left-radius:0;border-top-right-radius:0;border-bottom-left-radius:0;padding:0}.p-inputnumber-buttons-stacked .p-inputnumber-button-group{display:flex;flex-direction:column}.p-inputnumber-buttons-stacked .p-inputnumber-button-group .p-button.p-inputnumber-button{flex:1 1 auto}.p-inputnumber-buttons-horizontal .p-button.p-inputnumber-button-up{order:3;border-top-left-radius:0;border-bottom-left-radius:0}.p-inputnumber-buttons-horizontal .p-inputnumber-input{order:2;border-radius:0}.p-inputnumber-buttons-horizontal .p-button.p-inputnumber-button-down{order:1;border-top-right-radius:0;border-bottom-right-radius:0}.p-inputnumber-buttons-vertical{flex-direction:column}.p-inputnumber-buttons-vertical .p-button.p-inputnumber-button-up{order:1;border-bottom-left-radius:0;border-bottom-right-radius:0;width:100%}.p-inputnumber-buttons-vertical .p-inputnumber-input{order:2;border-radius:0;text-align:center}.p-inputnumber-buttons-vertical .p-button.p-inputnumber-button-down{order:3;border-top-left-radius:0;border-top-right-radius:0;width:100%}.p-inputnumber-input{flex:1 1 auto}.p-fluid p-inputnumber,.p-fluid .p-inputnumber{width:100%}.p-fluid .p-inputnumber .p-inputnumber-input{width:1%}.p-fluid .p-inputnumber-buttons-vertical .p-inputnumber-input{width:100%}.p-inputnumber-clear-icon{position:absolute;top:50%;margin-top:-.5rem;cursor:pointer}.p-inputnumber-clearable{position:relative}\n"],encapsulation:2,changeDetection:0}),r})(),yV=(()=>{class r{}return r.\u0275fac=function(o){return new(o||r)},r.\u0275mod=Fi({type:r}),r.\u0275inj=fi({imports:[tg,dA,nP]}),r})();const vV=function(){return{width:"28rem",height:"17.5rem","margin-right":"5px","margin-top":"5px"}},ud=function(){return{width:"8rem"}};let wV=(()=>{class r{constructor(){this.maxAge=0,this.maxNumChildren=0,this.adultAge=0,this.elderlyAge=0,this.playersToAddInput="",this.deadPlayers=[],this.livingPlayers=[]}ngOnInit(){}addPlayers(){if(!this.playersToAddInput)return;const o=this.playersToAddInput.split(",");for(let a=0;a<o.length;a++)o[a]=o[a].trim(),!this.deadPlayers.includes(o[a])&&!this.livingPlayers.includes(o[a])&&this.deadPlayers.push(o[a]);this.playersToAddInput=""}}return r.\u0275fac=function(o){return new(o||r)},r.\u0275cmp=_o({type:r,selectors:[["app-config"]],inputs:{maxAge:"maxAge",maxNumChildren:"maxNumChildren",adultAge:"adultAge",elderlyAge:"elderlyAge",playersToAddInput:"playersToAddInput",deadPlayers:"deadPlayers",livingPlayers:"livingPlayers"},decls:25,vars:32,consts:[["header","Config"],[1,"inputs-flex"],[1,"field","col-12","md:col-3"],["for","vertical",2,"display","block"],["buttonLayout","horizontal","spinnerMode","vertical","decrementButtonClass","p-button-secondary","incrementButtonClass","p-button-secondary","incrementButtonIcon","pi pi-plus","decrementButtonIcon","pi pi-minus",3,"inputStyle","ngModel","showButtons","ngModelChange"],["buttonLayout","horizontal","spinnerMode","horizonatl","decrementButtonClass","p-button-secondary","incrementButtonClass","p-button-secondary","incrementButtonIcon","pi pi-plus","decrementButtonIcon","pi pi-minus",3,"inputStyle","ngModel","showButtons","ngModelChange"],[1,"p-float-label","p-input-filled",2,"display","flex","margin-top","40px"],["id","float-input","type","text","pInputText","",3,"ngModel","ngModelChange"],["for","float-input"],["pButton","",3,"click"]],template:function(o,a){1&o&&(ye(0,"p-card",0)(1,"div",1)(2,"span",2)(3,"label",3),rr(4,"Max Kids"),_e(),ye(5,"p-inputNumber",4),Je("ngModelChange",function(d){return a.maxNumChildren=d}),_e()(),ye(6,"span",2)(7,"label",3),rr(8,"Adult Age"),_e(),ye(9,"p-inputNumber",5),Je("ngModelChange",function(d){return a.adultAge=d}),_e()()(),ye(10,"div",1)(11,"span",2)(12,"label",3),rr(13,"Old Age"),_e(),ye(14,"p-inputNumber",4),Je("ngModelChange",function(d){return a.elderlyAge=d}),_e()(),ye(15,"span",2)(16,"label",3),rr(17,"Max Age"),_e(),ye(18,"p-inputNumber",5),Je("ngModelChange",function(d){return a.maxAge=d}),_e()()(),ye(19,"span",6)(20,"input",7),Je("ngModelChange",function(d){return a.playersToAddInput=d}),_e(),ye(21,"label",8),rr(22,"Player Name(s)"),_e(),ye(23,"button",9),Je("click",function(){return a.addPlayers()}),rr(24,"Add Player(s)"),_e()()()),2&o&&(an(xo(23,vV)),ge(5),an(xo(24,ud)),Se("inputStyle",xo(25,ud))("ngModel",a.maxNumChildren)("showButtons",!1),ge(4),an(xo(26,ud)),Se("inputStyle",xo(27,ud))("ngModel",a.adultAge)("showButtons",!1),ge(5),an(xo(28,ud)),Se("inputStyle",xo(29,ud))("ngModel",a.elderlyAge)("showButtons",!1),ge(4),an(xo(30,ud)),Se("inputStyle",xo(31,ud))("ngModel",a.maxAge)("showButtons",!1),ge(2),Se("ngModel",a.playersToAddInput))},dependencies:[WC,PP,nM,ZS,fA,mA,rP],styles:[".configs[_ngcontent-%COMP%]{font-family:Arial,Helvetica,sans-serif}.config-number-input[_ngcontent-%COMP%]{width:4rem!important}.inputs-flex[_ngcontent-%COMP%]{display:flex;justify-content:space-between}"]}),r})();function xV(r,s){if(1&r){const o=jo();ye(0,"div")(1,"button",13),Je("click",function(){const d=ae(o).$implicit;return hn(Ae().alivifyPlayer(d))}),rr(2),_e()()}if(2&r){const o=s.$implicit;ge(2),$l(" ",o," ")}}function CV(r,s){if(1&r){const o=jo();ye(0,"button",14),Je("click",function(){return ae(o),hn(Ae().pauseButton())}),rr(1," CREATE FIRST PERSON "),_e()}}function MV(r,s){if(1&r){const o=jo();ye(0,"button",14),Je("click",function(){return ae(o),hn(Ae().pauseButton())}),rr(1," RESUME "),_e()}}function DV(r,s){if(1&r){const o=jo();ye(0,"button",14),Je("click",function(){return ae(o),hn(Ae().pauseButton())}),rr(1," PAUSE "),_e()}}function SV(r,s){if(1&r){const o=jo();ye(0,"div",15)(1,"button",16),Je("click",function(){const d=ae(o).$implicit;return hn(Ae().killPlayer(d.name))}),rr(2),_e()()}if(2&r){const o=s.$implicit;ge(2),Bp(" ",o.name,", age: ",o.age," ")}}function _V(r,s){if(1&r){const o=jo();ye(0,"button",17),Je("click",function(){return ae(o),hn(Ae().addPlayersByCSV())}),rr(1," add players by CSV\n"),_e()}}const TV=function(){return{"margin-right":"5px",width:"100%"}},EV=function(){return{width:"28rem",height:"17.5rem","margin-top":"5px",position:"relative"}},IV=function(){return{"margin-left":"5px",width:"max-content"}};let NV=(()=>{class r{constructor(o,a){this.http=o,this.messages=a,this.title="medieval-angular",this.model=new Ki.rv([]),this.deadPlayers=[],this.livingPlayers=[],this.people=[],this.playersAddedByCSV=!1,this.paused=!1,this.protosAnthropos=null,this.eligableProgenitors=[],this.livingPeople=[],this.personKey=1,this.playersToAddInput="",this.maxAge=10,this.maxNumChildren=2,this.adultAge=3,this.elderlyAge=7}addPlayersByCSV(){this.http.get("assets/player_list.csv",{responseType:"text"}).subscribe(o=>this.deadPlayers=o.split(",")),this.playersAddedByCSV=!0}alivifyPlayer(o){if(!this.protosAnthropos)return this.messages.add(o+" created ex nihilo; may they not eat any forbidden fruits..."),this.people=[],this.protosAnthropos=new HN(this.personKey++,o),this.addNode(this.protosAnthropos.key,this.protosAnthropos.name,0),this.people.push(this.protosAnthropos),this.deadPlayers=this.deadPlayers.filter(a=>a!==o),this.livingPlayers.push(o),void this.livingPeople.push(this.protosAnthropos);if(this.eligableProgenitors.length){let a=this.eligableProgenitors.pop(),c=new HN(this.personKey++,o);a.children++,this.messages.add(c.name+" has been born to "+a.name),this.people.push(c),this.livingPeople.push(c),this.deadPlayers=this.deadPlayers.filter(d=>d!==o),this.livingPlayers.push(o),this.addNode(c.key,c.name,a.key)}else this.messages.add("no more eligable progenitors this round")}killPlayer(o){this.livingPlayers=this.livingPlayers.filter(c=>c!==o),this.deadPlayers.push(o);let a=this.getPersonByName(o);if(a){a.alive=!1;const c=this.model.findNodeDataForKey(a.key);this.model.startTransaction(),this.model.set(c,"color","red"),this.model.commitTransaction()}this.livingPeople=this.livingPeople.filter(c=>c.name!==o)}updateFerility(){this.people.forEach(o=>{o.fertile=!!(this.adultAge<=o.age&&o.age<this.elderlyAge&&o.alive&&o.children<this.maxNumChildren)})}pauseButton(){if(this.paused)this.paused=!this.paused;else{for(let o=0;o<this.livingPeople.length;o++){const a=this.livingPeople[o];if(a.age>=this.maxAge)return void this.messages.add(a.name+"'s time has come. Kill them to proceed.")}this.people.forEach(o=>{o.age++}),this.updateFerility(),this.eligableProgenitors=[],this.people.forEach(o=>{o.fertile&&this.eligableProgenitors.push(o)}),this.eligableProgenitors.sort(()=>Math.random()-.5),this.paused=!this.paused}}getPersonByName(o){for(let a=0;a<this.livingPeople.length;a++)if(this.livingPeople[a].name===o)return this.livingPeople[a];return null}addNode(o,a,c){this.model.startTransaction(),this.model.addNodeData({key:o,name:a,parent:c,color:"green"}),this.model.commitTransaction()}addPlayers(){if(!this.playersToAddInput)return;const o=this.playersToAddInput.split(",");for(let a=0;a<o.length;a++)o[a]=o[a].trim(),!this.deadPlayers.includes(o[a])&&!this.livingPlayers.includes(o[a])&&this.deadPlayers.push(o[a]);this.playersToAddInput=""}}return r.\u0275fac=function(o){return new(o||r)(ct(JN),ct(eP))},r.\u0275cmp=_o({type:r,selectors:[["app-root"]],decls:18,vars:23,consts:[["id","players",1,"players-container"],["header","Dead Players"],[4,"ngFor","ngForOf"],[1,"middle-container"],[3,"model"],[1,"chronicle-and-config"],[3,"maxAge","maxNumChildren","adultAge","elderlyAge","playersToAddInput","deadPlayers","livingPlayers"],["header","Chronicle"],[2,"display","flex","justify-content","center"],["pButton","","class","iterate-button",3,"click",4,"ngIf"],["header","Living Players"],["class","living-players-buttons",4,"ngFor","ngForOf"],["pButton","",3,"click",4,"ngIf"],["pButton","",1,"p-button-danger",3,"click"],["pButton","",1,"iterate-button",3,"click"],[1,"living-players-buttons"],["pButton","",1,"p-button-success",3,"click"],["pButton","",3,"click"]],template:function(o,a){1&o&&(ye(0,"title"),rr(1,"Medieval"),_e(),ye(2,"div",0)(3,"p-card",1),wi(4,xV,3,1,"div",2),_e(),ye(5,"div",3),Nu(6,"app-tree",4),ye(7,"div",5),Nu(8,"app-config",6),ye(9,"p-card",7),Nu(10,"app-messages"),ye(11,"div",8),wi(12,CV,2,0,"button",9),wi(13,MV,2,0,"button",9),wi(14,DV,2,0,"button",9),_e()()()(),ye(15,"p-card",10),wi(16,SV,3,2,"div",11),_e()(),wi(17,_V,2,0,"button",12)),2&o&&(ge(3),an(xo(20,TV)),ge(1),Se("ngForOf",a.deadPlayers),ge(2),Se("model",a.model),ge(2),Se("maxAge",a.maxAge)("maxNumChildren",a.maxNumChildren)("adultAge",a.adultAge)("elderlyAge",a.elderlyAge)("playersToAddInput",a.playersToAddInput)("deadPlayers",a.deadPlayers)("livingPlayers",a.livingPlayers),ge(1),an(xo(21,EV)),ge(3),Se("ngIf",!a.protosAnthropos),ge(1),Se("ngIf",a.paused&&a.protosAnthropos),ge(1),Se("ngIf",!a.paused&&a.protosAnthropos),ge(1),an(xo(22,IV)),ge(1),Se("ngForOf",a.livingPeople),ge(1),Se("ngIf",!a.playersAddedByCSV&&!a.protosAnthropos))},dependencies:[QD,mC,ZS,rP,sj,aj,wV],styles:['@import"//db.onlinewebfonts.com/c/f3258385782c4c96aa24fe8b5d5f9782?family=Old+English+Text+MT";.players-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.item-header[_ngcontent-%COMP%]{text-align:center;font-size:25px;font-weight:700;font-family:Arial,Helvetica,sans-serif}.phase-text[_ngcontent-%COMP%]{font-size:40px;font-weight:700}.button-7-alive[_ngcontent-%COMP%]{background-color:green;border:1px solid transparent;border-radius:3px;box-shadow:#fff6 0 1px inset;box-sizing:border-box;color:#fff;cursor:pointer;display:inline-block;font-family:Arial,Helvetica,sans-serif;font-size:17px;font-weight:400;line-height:1.15385;margin:2;outline:none;padding:8px;position:relative;text-align:center;text-decoration:none;user-select:none;-webkit-user-select:none;touch-action:manipulation;vertical-align:baseline;white-space:nowrap}.button-7-alive[_ngcontent-%COMP%]:hover, .button-7[_ngcontent-%COMP%]:focus{background-color:red}.button-7-alive[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 4px #0095ff26}.button-7-alive[_ngcontent-%COMP%]:active{background-color:red;box-shadow:none}.button-7-dead[_ngcontent-%COMP%]{background-color:red;border:1px solid transparent;border-radius:3px;box-shadow:#fff6 0 1px inset;box-sizing:border-box;color:#fff;cursor:pointer;display:inline-block;font-family:Arial,Helvetica,sans-serif;font-size:17px;font-weight:400;line-height:1.15385;margin:2;outline:none;padding:8px;position:relative;text-align:center;text-decoration:none;user-select:none;-webkit-user-select:none;touch-action:manipulation;vertical-align:baseline;white-space:nowrap}.button-7-dead[_ngcontent-%COMP%]:hover, .button-7[_ngcontent-%COMP%]:focus{background-color:green}.button-7-dead[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 4px #0095ff26}.button-7-dead[_ngcontent-%COMP%]:active{background-color:green;box-shadow:none}.button-7[_ngcontent-%COMP%]{background-color:#00f;border:1px solid transparent;border-radius:3px;box-shadow:#fff6 0 1px inset;box-sizing:border-box;color:#fff;cursor:pointer;display:inline-block;font-family:Arial,Helvetica,sans-serif;font-weight:400;line-height:1.15385;margin:2;outline:none;padding:8px;position:relative;text-align:center;text-decoration:none;user-select:none;-webkit-user-select:none;touch-action:manipulation;vertical-align:baseline;white-space:nowrap}.button-7[_ngcontent-%COMP%]:hover, .button-7[_ngcontent-%COMP%]:focus{background-color:#00008b}.button-7[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 4px #0095ff26}.button-7[_ngcontent-%COMP%]:active{background-color:#00f;box-shadow:none}.living-players-buttons[_ngcontent-%COMP%]{display:flex;justify-content:right}.middle-container[_ngcontent-%COMP%]{text-align:center;width:-moz-fit-content;width:fit-content}.chronicle-and-config[_ngcontent-%COMP%]{display:flex;justify-content:center}h2[_ngcontent-%COMP%]{color:#a80000;font-family:Arial,Helvetica,sans-serif;font-weight:lighter}.configs[_ngcontent-%COMP%]{font-family:Arial,Helvetica,sans-serif}.alive[_ngcontent-%COMP%]{color:green}.dead[_ngcontent-%COMP%]{color:red}.iterate-button[_ngcontent-%COMP%]{position:absolute;bottom:0;margin-bottom:15px}']}),r})();function Rr(r){for(var s=arguments.length,o=Array(s>1?s-1:0),a=1;a<s;a++)o[a-1]=arguments[a];throw Error("[Immer] minified error nr: "+r+(o.length?" "+o.map(function(y){return"'"+y+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function cc(r){return!!r&&!!r[Te]}function Ku(r){return!!r&&(function(s){if(!s||"object"!=typeof s)return!1;var o=Object.getPrototypeOf(s);if(null===o)return!0;var a=Object.hasOwnProperty.call(o,"constructor")&&o.constructor;return a===Object||"function"==typeof a&&Function.toString.call(a)===jV}(r)||Array.isArray(r)||!!r[Vw]||!!r.constructor[Vw]||rM(r)||oM(r))}function fc(r,s,o){void 0===o&&(o=!1),0===hd(r)?(o?Object.keys:Ry)(r).forEach(function(a){o&&"symbol"==typeof a||s(a,r[a],r)}):r.forEach(function(a,c){return s(c,a,r)})}function hd(r){var s=r[Te];return s?s.i>3?s.i-4:s.i:Array.isArray(r)?1:rM(r)?2:oM(r)?3:0}function cd(r,s){return 2===hd(r)?r.has(s):Object.prototype.hasOwnProperty.call(r,s)}function yA(r,s,o){var a=hd(r);2===a?r.set(s,o):3===a?(r.delete(s),r.add(o)):r[s]=o}function rM(r){return FV&&r instanceof Map}function oM(r){return RV&&r instanceof Set}function jr(r){return r.o||r.t}function y_(r){if(Array.isArray(r))return Array.prototype.slice.call(r);var s=_A(r);delete s[Te];for(var o=Ry(s),a=0;a<o.length;a++){var c=o[a],d=s[c];!1===d.writable&&(d.writable=!0,d.configurable=!0),(d.get||d.set)&&(s[c]={configurable:!0,writable:!0,enumerable:d.enumerable,value:r[c]})}return Object.create(Object.getPrototypeOf(r),s)}function v_(r,s){return void 0===s&&(s=!1),w_(r)||cc(r)||!Ku(r)||(hd(r)>1&&(r.set=r.add=r.clear=r.delete=PV),Object.freeze(r),s&&fc(r,function(o,a){return v_(a,!0)},!0)),r}function PV(){Rr(2)}function w_(r){return null==r||"object"!=typeof r||Object.isFrozen(r)}function Xu(r){var s=I_[r];return s||Rr(18,r),s}function Fw(){return jw}function C_(r,s){s&&(Xu("Patches"),r.u=[],r.s=[],r.v=s)}function sM(r){M_(r),r.p.forEach(AV),r.p=null}function M_(r){r===jw&&(jw=r.l)}function wA(r){return jw={p:[],l:jw,h:r,m:!0,_:0}}function AV(r){var s=r[Te];0===s.i||1===s.i?s.j():s.O=!0}function D_(r,s){s._=s.p.length;var o=s.p[0],a=void 0!==r&&r!==o;return s.h.g||Xu("ES5").S(s,r,a),a?(o[Te].P&&(sM(s),Rr(4)),Ku(r)&&(r=lM(s,r),s.l||aM(s,r)),s.u&&Xu("Patches").M(o[Te].t,r,s.u,s.s)):r=lM(s,o,[]),sM(s),s.u&&s.v(s.u,s.s),r!==E_?r:void 0}function lM(r,s,o){if(w_(s))return s;var a=s[Te];if(!a)return fc(s,function(d,y){return xA(r,a,s,d,y,o)},!0),s;if(a.A!==r)return s;if(!a.P)return aM(r,a.t,!0),a.t;if(!a.I){a.I=!0,a.A._--;var c=4===a.i||5===a.i?a.o=y_(a.k):a.o;fc(3===a.i?new Set(c):c,function(d,y){return xA(r,a,c,d,y,o)}),aM(r,c,!1),o&&r.u&&Xu("Patches").R(a,o,r.u,r.s)}return a.o}function xA(r,s,o,a,c,d){if(cc(c)){var y=lM(r,c,d&&s&&3!==s.i&&!cd(s.D,a)?d.concat(a):void 0);if(yA(o,a,y),!cc(y))return;r.m=!1}if(Ku(c)&&!w_(c)){if(!r.h.F&&r._<1)return;lM(r,c),s&&s.A.l||aM(r,c)}}function aM(r,s,o){void 0===o&&(o=!1),r.h.F&&r.m&&v_(s,o)}function S_(r,s){var o=r[Te];return(o?jr(o):r)[s]}function CA(r,s){if(s in r)for(var o=Object.getPrototypeOf(r);o;){var a=Object.getOwnPropertyDescriptor(o,s);if(a)return a;o=Object.getPrototypeOf(o)}}function zs(r){r.P||(r.P=!0,r.l&&zs(r.l))}function __(r){r.o||(r.o=y_(r.t))}function Rw(r,s,o){var a=rM(s)?Xu("MapSet").N(s,o):oM(s)?Xu("MapSet").T(s,o):r.g?function(c,d){var y=Array.isArray(c),w={i:y?1:0,A:d?d.A:Fw(),P:!1,I:!1,D:{},l:d,t:c,k:null,o:null,j:null,C:!1},C=w,S=Bw;y&&(C=[w],S=Uw);var E=Proxy.revocable(C,S),A=E.revoke,R=E.proxy;return w.k=R,w.j=A,R}(s,o):Xu("ES5").J(s,o);return(o?o.A:Fw()).p.push(a),a}function MA(r,s){switch(s){case 2:return new Map(r);case 3:return Array.from(r)}return y_(r)}var DA,jw,T_=typeof Symbol<"u"&&"symbol"==typeof Symbol("x"),FV=typeof Map<"u",RV=typeof Set<"u",SA=typeof Proxy<"u"&&void 0!==Proxy.revocable&&typeof Reflect<"u",E_=T_?Symbol.for("immer-nothing"):((DA={})["immer-nothing"]=!0,DA),Vw=T_?Symbol.for("immer-draftable"):"__$immer_draftable",Te=T_?Symbol.for("immer-state"):"__$immer_state",jV=(typeof Symbol<"u"&&Symbol,""+Object.prototype.constructor),Ry=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(r){return Object.getOwnPropertyNames(r).concat(Object.getOwnPropertySymbols(r))}:Object.getOwnPropertyNames,_A=Object.getOwnPropertyDescriptors||function(r){var s={};return Ry(r).forEach(function(o){s[o]=Object.getOwnPropertyDescriptor(r,o)}),s},I_={},Bw={get:function(r,s){if(s===Te)return r;var c,w,C,o=jr(r);if(!cd(o,s))return c=r,(C=CA(o,s))?"value"in C?C.value:null===(w=C.get)||void 0===w?void 0:w.call(c.k):void 0;var a=o[s];return r.I||!Ku(a)?a:a===S_(r.t,s)?(__(r),r.o[s]=Rw(r.A.h,a,r)):a},has:function(r,s){return s in jr(r)},ownKeys:function(r){return Reflect.ownKeys(jr(r))},set:function(r,s,o){var a=CA(jr(r),s);if(a?.set)return a.set.call(r.k,o),!0;if(!r.P){var c=S_(jr(r),s),d=c?.[Te];if(d&&d.t===o)return r.o[s]=o,r.D[s]=!1,!0;if(function vA(r,s){return r===s?0!==r||1/r==1/s:r!=r&&s!=s}(o,c)&&(void 0!==o||cd(r.t,s)))return!0;__(r),zs(r)}return r.o[s]===o&&"number"!=typeof o&&(void 0!==o||s in r.o)||(r.o[s]=o,r.D[s]=!0,!0)},deleteProperty:function(r,s){return void 0!==S_(r.t,s)||s in r.t?(r.D[s]=!1,__(r),zs(r)):delete r.D[s],r.o&&delete r.o[s],!0},getOwnPropertyDescriptor:function(r,s){var o=jr(r),a=Reflect.getOwnPropertyDescriptor(o,s);return a&&{writable:!0,configurable:1!==r.i||"length"!==s,enumerable:a.enumerable,value:o[s]}},defineProperty:function(){Rr(11)},getPrototypeOf:function(r){return Object.getPrototypeOf(r.t)},setPrototypeOf:function(){Rr(12)}},Uw={};fc(Bw,function(r,s){Uw[r]=function(){return arguments[0]=arguments[0][0],s.apply(this,arguments)}}),Uw.deleteProperty=function(r,s){return Uw.set.call(this,r,s,void 0)},Uw.set=function(r,s,o){return Bw.set.call(this,r[0],s,o,r[0])};var yl=new(function(){function r(o){var a=this;this.g=SA,this.F=!0,this.produce=function(c,d,y){if("function"==typeof c&&"function"!=typeof d){var w=d;d=c;var C=a;return function(tt){var st=this;void 0===tt&&(tt=w);for(var ht=arguments.length,Ct=Array(ht>1?ht-1:0),at=1;at<ht;at++)Ct[at-1]=arguments[at];return C.produce(tt,function(Rt){var Ye;return(Ye=d).call.apply(Ye,[st,Rt].concat(Ct))})}}var S;if("function"!=typeof d&&Rr(6),void 0!==y&&"function"!=typeof y&&Rr(7),Ku(c)){var E=wA(a),A=Rw(a,c,void 0),R=!0;try{S=d(A),R=!1}finally{R?sM(E):M_(E)}return typeof Promise<"u"&&S instanceof Promise?S.then(function(tt){return C_(E,y),D_(tt,E)},function(tt){throw sM(E),tt}):(C_(E,y),D_(S,E))}if(!c||"object"!=typeof c){if(void 0===(S=d(c))&&(S=c),S===E_&&(S=void 0),a.F&&v_(S,!0),y){var j=[],z=[];Xu("Patches").M(c,S,j,z),y(j,z)}return S}Rr(21,c)},this.produceWithPatches=function(c,d){if("function"==typeof c)return function(S){for(var E=arguments.length,A=Array(E>1?E-1:0),R=1;R<E;R++)A[R-1]=arguments[R];return a.produceWithPatches(S,function(j){return c.apply(void 0,[j].concat(A))})};var y,w,C=a.produce(c,d,function(S,E){y=S,w=E});return typeof Promise<"u"&&C instanceof Promise?C.then(function(S){return[S,y,w]}):[C,y,w]},"boolean"==typeof o?.useProxies&&this.setUseProxies(o.useProxies),"boolean"==typeof o?.autoFreeze&&this.setAutoFreeze(o.autoFreeze)}var s=r.prototype;return s.createDraft=function(o){Ku(o)||Rr(8),cc(o)&&(o=function kV(r){return cc(r)||Rr(22,r),function s(o){if(!Ku(o))return o;var a,c=o[Te],d=hd(o);if(c){if(!c.P&&(c.i<4||!Xu("ES5").K(c)))return c.t;c.I=!0,a=MA(o,d),c.I=!1}else a=MA(o,d);return fc(a,function(y,w){c&&function iM(r,s){return 2===hd(r)?r.get(s):r[s]}(c.t,y)===w||yA(a,y,s(w))}),3===d?new Set(a):a}(r)}(o));var a=wA(this),c=Rw(this,o,void 0);return c[Te].C=!0,M_(a),c},s.finishDraft=function(o,a){var d=(o&&o[Te]).A;return C_(d,a),D_(void 0,d)},s.setAutoFreeze=function(o){this.F=o},s.setUseProxies=function(o){o&&!SA&&Rr(20),this.g=o},s.applyPatches=function(o,a){var c;for(c=a.length-1;c>=0;c--){var d=a[c];if(0===d.path.length&&"replace"===d.op){o=d.value;break}}c>-1&&(a=a.slice(c+1));var y=Xu("Patches").$;return cc(o)?y(o,a):this.produce(o,function(w){return y(w,a)})},r}()),BV=yl.produce;yl.produceWithPatches.bind(yl),yl.setAutoFreeze.bind(yl),yl.setUseProxies.bind(yl),yl.applyPatches.bind(yl),yl.createDraft.bind(yl),yl.finishDraft.bind(yl);const TA=BV;let UV=(()=>{class r{static syncNodeData(o,a,c){if(!o||!o.modifiedNodeData&&!o.insertedNodeKeys&&!o.removedNodeKeys)return a;const d=new Ki.D5,y=new Map;return a.forEach((C,S)=>{const E=c?c.getKeyForNodeData(C):C.key;y.set(E,S)}),TA(a,C=>{if(o.modifiedNodeData&&o.modifiedNodeData.forEach(S=>{const E=c?c.getKeyForNodeData(S):S.key;d.set(E,S);const A=y.get(E);void 0!==A&&A>=0&&(C[A]=S)}),o.insertedNodeKeys&&o.insertedNodeKeys.forEach(S=>{const E=d.get(S);E&&!y.has(S)&&C.push(E)}),o.removedNodeKeys){const S=o.removedNodeKeys.map(E=>y.get(E)).sort();for(let E=S.length-1;E>=0;E--)C.splice(S[E],1)}})}static syncLinkData(o,a,c){if(!o||!o.modifiedLinkData&&!o.insertedLinkKeys&&!o.removedLinkKeys)return a;const d=new Ki.D5,y=new Map;return a.forEach((w,C)=>{const S=c?c.getKeyForLinkData(w):w.key;y.set(S,C)}),TA(a,w=>{if(o.modifiedLinkData&&o.modifiedLinkData.forEach(C=>{const S=c?c.getKeyForLinkData(C):C.key;d.set(S,C);const E=y.get(S);void 0!==E&&E>=0&&(w[E]=C)}),o.insertedLinkKeys&&o.insertedLinkKeys.forEach(C=>{const S=d.get(C);S&&!y.has(C)&&w.push(S)}),o.removedLinkKeys){const C=o.removedLinkKeys.map(S=>y.get(S)).sort();for(let S=C.length-1;S>=0;S--)w.splice(C[S],1)}})}static syncModelData(o,a){return o&&o.modelData?o.modelData?o.modelData:void 0:a}}return r.\u0275fac=function(o){return new(o||r)},r.\u0275prov=P({token:r,factory:r.\u0275fac}),r})(),HV=(()=>{class r{}return r.\u0275fac=function(o){return new(o||r)},r.\u0275mod=Fi({type:r}),r.\u0275inj=fi({providers:[UV]}),r})(),GV=(()=>{class r{}return r.\u0275fac=function(o){return new(o||r)},r.\u0275mod=Fi({type:r,bootstrap:[NV]}),r.\u0275inj=fi({imports:[Rb,_R,VR,HV,aV,nP,dA,yV,ij]}),r})();(function hO(){ME=!1})(),Fb().bootstrapModule(GV).catch(r=>console.error(r))},813:(dc,Hw,jy)=>{jy.d(Hw,{$u:()=>Ju,D5:()=>$w,FF:()=>Ws,KX:()=>Uy,NB:()=>Zu,S0:()=>J_,Zt:()=>Ww,al:()=>tx,bn:()=>Q_,bx:()=>vM,jE:()=>qw,rv:()=>fM,s_:()=>Z_,z6:()=>Yw}),dc=jy.hmd(dc),function(){var _;function IM(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function ex(t){var e=typeof Symbol<"u"&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:IM(t)}}function vl(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}var Xi,NM="function"==typeof Object.create?Object.create:function(t){function e(){}return e.prototype=t,new e};if("function"==typeof Object.setPrototypeOf)Xi=Object.setPrototypeOf;else{var Ka;t:{var PM={};try{PM.__proto__={a:!0},Ka=PM.a;break t}catch{}Ka=!1}Xi=Ka?function(t,e){if(t.__proto__=e,t.__proto__!==e)throw new TypeError(t+" is not extensible");return t}:null}var nx=Xi;function Ht(t,e){if(t.prototype=NM(e.prototype),t.prototype.constructor=t,nx)nx(t,e);else for(var n in e)if("prototype"!=n)if(Object.defineProperties){var i=Object.getOwnPropertyDescriptor(e,n);i&&Object.defineProperty(t,n,i)}else t[n]=e[n];t.zA=e.prototype}var Mt=typeof global<"u"&&null!=global?global:self,ix="function"==typeof Object.assign?Object.assign:function(t,e){for(var n=1;n<arguments.length;n++){var i=arguments[n];if(i)for(var l in i)Object.prototype.hasOwnProperty.call(i,l)&&(t[l]=i[l])}return t},fd="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)};function rx(t,e){if(e){var n=Mt;t=t.split(".");for(var i=0;i<t.length-1;i++){var l=t[i];l in n||(n[l]={}),n=n[l]}(e=e(i=n[t=t[t.length-1]]))!=i&&null!=e&&fd(n,t,{writable:!0,value:e})}}rx("Object.assign",function(t){return t||ix}),rx("Array.prototype.fill",function(t){return t||function(e,n,i){var l=this.length||0;for(0>n&&(n=Math.max(0,l+n)),(null==i||i>l)&&(i=l),0>(i=Number(i))&&(i=Math.max(0,l+i)),n=Number(n||0);n<i;n++)this[n]=e;return this}});var pt="object"==typeof globalThis&&globalThis||"object"==typeof global&&global.global===global&&global||"object"==typeof self&&self.self===self&&self||{};function Xa(){}function Gy(t,e){var n=-1;return function(){var i=this,l=arguments;-1!==n&&pt.clearTimeout(n),n=Ja(function(){n=-1,t.apply(i,l)},e)}}function Ja(t,e){return pt.setTimeout(t,e)}function Zo(t){return pt.document.createElement(t)}function Y(t){throw Error(t)}function It(t,e){t="The object is frozen, so its properties cannot be set: "+t.toString(),void 0!==e&&(t+="  to value: "+e),Y(t)}function le(t,e,n,i){n=null===n?"*":"string"==typeof n?n:"function"==typeof n&&"string"==typeof n.className?n.className:"",void 0!==i&&(n+="."+i),Y(n+" is not in the range "+e+": "+t)}function hi(t){pt.console&&pt.console.log(t)}function jt(t){return"object"==typeof t&&null!==t}function yn(t){return Array.isArray(t)||pt.NodeList&&t instanceof pt.NodeList||pt.HTMLCollection&&t instanceof pt.HTMLCollection}function mc(t){return Array.prototype.slice.call(t)}function Za(t,e,n){Array.isArray(t)?e>=t.length?t.push(n):t.splice(e,0,n):Y("Cannot insert an object into an HTMLCollection or NodeList: "+n+" at "+e)}function Ze(t,e){Array.isArray(t)?e>=t.length?t.pop():t.splice(e,1):Y("Cannot remove an object from an HTMLCollection or NodeList at "+e)}function oe(){var t=he.pop();return void 0===t?[]:t}function Nt(t){t.length=0,he.push(t)}function Ys(t){if("function"==typeof t){if(t.className)return t.className;if(t.name)return t.name;var e=t.toString();if(""!==(e=e.substring(9,e.indexOf("(")).trim()))return t._className=e}else if(jt(t)&&t.constructor)return Ys(t.constructor);return typeof t}function io(t){var e=t;return jt(t)&&(t.text?e=t.text:t.name?e=t.name:void 0!==t.key?e=t.key:void 0!==t.id?e=t.id:t.constructor===Object&&(t.Text?e=t.Text:t.Name?e=t.Name:void 0!==t.Key?e=t.Key:void 0!==t.Id?e=t.Id:void 0!==t.ID&&(e=t.ID))),void 0===e?"undefined":null===e?"null":e.toString()}function vn(t,e){if(t.hasOwnProperty(e))return!0;for(t=Object.getPrototypeOf(t);t&&t!==Function;){if(t.hasOwnProperty(e))return!0;var n=t.lA;if(n&&n[e])return!0;t=Object.getPrototypeOf(t)}return!1}function Gt(t,e,n){Object.defineProperty(Ce.prototype,t,{get:e,set:n})}function zt(t){for(var e=[],n=0;256>n;n++)e["0123456789abcdef".charAt(n>>4)+"0123456789abcdef".charAt(15&n)]=String.fromCharCode(n);t.length%2&&(t="0"+t),n=[];for(var i=0,l=0;l<t.length;l+=2)n[i++]=e[t.substr(l,2)];for(t=""===(t=n.join(""))?"0":t,e=[],n=0;256>n;n++)e[n]=n;for(n=i=0;256>n;n++)l=e[n],e[n]=e[i=(i+e[n]+119)%256],e[i]=l;i=n=0;for(var u="",h=0;h<t.length;h++)l=e[n=(n+1)%256],e[n]=e[i=(i+e[n])%256],e[i]=l,u+=String.fromCharCode(t.charCodeAt(h)^e[(e[n]+e[i])%256]);return u}void 0===pt.requestAnimationFrame&&(pt.requestAnimationFrame=void 0===pt.setImmediate?function(t){pt.setTimeout(t,0)}:pt.setImmediate);var AM=void 0!==pt.navigator&&0<pt.navigator.userAgent.indexOf("Trident/7"),Tt=void 0!==pt.navigator&&0<pt.navigator.userAgent.indexOf("Edge/"),Do=void 0!==pt.navigator&&void 0!==pt.navigator.platform&&null!==pt.navigator.platform.match(/(iPhone|iPod|iPad|Mac)/i),he=[];function W(t,e,n){wn(this),this.j=t,this.va=e,this.m=n}function Ks(t,e){return null==e||""===e?null:t[e]}function zy(){this.Jv=[]}function Vr(){}Object.freeze([]),Xa.className="Util",Xa.Dx="32ab5ff3b26f42dc0ed90f21462913b5",Xa.adym="gojs.net",Xa.vfo="28e644fdb260",Xa.className="Util",W.prototype.toString=function(){return"EnumValue."+this.va},Mt.Object.defineProperties(W.prototype,{classType:{get:function(){return this.j}},name:{get:function(){return this.va}},value:{get:function(){return this.m}}}),W.className="EnumValue",zy.prototype.toString=function(){return this.Jv.join("")},zy.prototype.add=function(t){""!==t&&this.Jv.push(t)},zy.className="StringBuilder",Vr.className="PropertyCollection";var So,Qu={nA:!1,sA:!1,pA:!1,rA:!1,xA:!1,vA:!1,Rw:!1,oA:null,trace:function(t){pt.console&&pt.console.log(t)},qA:function(t,e,n,i){t.strokeStyle="red",t.fillStyle="red",t.font="8px sans-serif",t.beginPath(),t.moveTo(-10,0),t.lineTo(10,0),t.moveTo(0,-10),t.lineTo(0,10),t.stroke(),t.setTransform(1,0,0,1,0,0),t.scale(n,n),t.transform(e.m11,e.m12,e.m21,e.m22,e.dx,e.dy),t.lineWidth=2,t.beginPath(),t.moveTo(i.left,i.top+20),t.lineTo(i.left,i.top),t.lineTo(i.left+20,i.top),t.moveTo(i.right,i.bottom-20),t.lineTo(i.right,i.bottom),t.lineTo(i.right-20,i.bottom),t.stroke(),t.fillText("DB: "+Math.round(i.x)+", "+Math.round(i.y)+", "+Math.round(i.width)+", "+Math.round(i.height),i.left,i.top-5)},mA:function(t){var n,e={};for(n in t){if(e.x=n,"licenseKey"!==e.x){var i=t[e.x];if(void 0!==i.prototype){e.Gl=Object.getOwnPropertyNames(i.prototype);for(var l={Lj:0};l.Lj<e.Gl.length;(l={Lj:l.Lj}).Lj++){var u=Object.getOwnPropertyDescriptor(i.prototype,e.Gl[l.Lj]);void 0!==u.get&&void 0===u.set&&Object.defineProperty(i.prototype,e.Gl[l.Lj],{set:function(h,f){return function(){throw Error("Property "+h.Gl[f.Lj]+" of "+h.x+" is read-only.")}}(e,l)})}}}e={Gl:e.Gl,x:e.x}}}};function Ke(){}function Sn(t){this.key=-1,this.value=t}function _n(t){this.xb=t,this.cf=null,t.Pa=null,this.na=t.Ia,this.Wa=-1}function cn(t){this.xb=t,t.yg=null,this.na=t.Ia,this.Wa=t.s.length}function q(t){wn(this),this._isFrozen=!1,this.s=[],this.Ia=0,this.yg=this.Pa=null,"string"==typeof t&&Y("Error: Since 2.0 List/Map/Set constructors no longer take an argument that enforces type."),void 0!==t&&this.addAll(t)}function Di(t){this.Xf=t,t.Pa=null,this.na=t.Ia,this.ra=null}function Z(t){wn(this),this._isFrozen=!1,this.Pb={},this.Ob=0,this.Pa=null,this.Ia=0,this.Ye=this.ea=null,"string"==typeof t&&Y("Error: Since 2.0 List/Map/Set constructors no longer take an argument that enforces type."),void 0!==t&&this.addAll(t)}function wn(t){t.__gohashid=oa++}function qu(t){var e=t.__gohashid;return void 0===e&&(e=oa++,t.__gohashid=e),e}function pn(t){return t.__gohashid}Ke.prototype.reset=function(){},Ke.prototype.next=function(){return!1},Ke.prototype.ud=function(){return!1},Ke.prototype.first=function(){return null},Ke.prototype.any=function(){return!1},Ke.prototype.all=function(){return!0},Ke.prototype.each=function(){return this},Ke.prototype.map=function(){return this},Ke.prototype.filter=function(){return this},Ke.prototype.Xd=function(){},Ke.prototype.toString=function(){return"EmptyIterator"},Mt.Object.defineProperties(Ke.prototype,{iterator:{get:function(){return this}},count:{get:function(){return 0}}}),Ke.prototype.first=Ke.prototype.first,Ke.prototype.hasNext=Ke.prototype.ud,Ke.prototype.next=Ke.prototype.next,Ke.prototype.reset=Ke.prototype.reset,Ke.className="EmptyIterator",So=new Ke,Sn.prototype.reset=function(){this.key=-1},Sn.prototype.next=function(){return-1===this.key&&(this.key=0,!0)},Sn.prototype.ud=function(){return this.next()},Sn.prototype.first=function(){return this.key=0,this.value},Sn.prototype.any=function(t){return this.key=-1,t(this.value)},Sn.prototype.all=function(t){return this.key=-1,t(this.value)},Sn.prototype.each=function(t){return this.key=-1,t(this.value),this},Sn.prototype.map=function(t){return new Sn(t(this.value))},Sn.prototype.filter=function(t){return t(this.value)?new Sn(this.value):So},Sn.prototype.Xd=function(){this.value=null},Sn.prototype.toString=function(){return"SingletonIterator("+this.value+")"},Mt.Object.defineProperties(Sn.prototype,{iterator:{get:function(){return this}},count:{get:function(){return 1}}}),Sn.prototype.first=Sn.prototype.first,Sn.prototype.hasNext=Sn.prototype.ud,Sn.prototype.next=Sn.prototype.next,Sn.prototype.reset=Sn.prototype.reset,Sn.className="SingletonIterator",_n.prototype.reset=function(){var t=this.xb;t.Pa=null,this.na=t.Ia,this.Wa=-1},_n.prototype.next=function(){var t=this.xb;if(t.Ia!==this.na&&0>this.key)return!1;var e=(t=t.s).length,n=++this.Wa,i=this.cf;if(null!==i)for(;n<e;){var l=t[n];if(i(l))return this.key=this.Wa=n,this.value=l,!0;n++}else{if(n<e)return this.key=n,this.value=t[n],!0;this.Xd()}return!1},_n.prototype.ud=function(){return this.next()},_n.prototype.first=function(){var t=this.xb;this.na=t.Ia,this.Wa=0;var e=(t=t.s).length,n=this.cf;if(null!==n){for(var i=0;i<e;){var l=t[i];if(n(l))return this.key=this.Wa=i,this.value=l;i++}return null}return 0<e?(t=t[0],this.key=0,this.value=t):null},_n.prototype.any=function(t){var e=this.xb;e.Pa=null,this.Wa=-1;for(var n=(e=e.s).length,i=this.cf,l=0;l<n;l++){var u=e[l];if((null===i||i(u))&&t(u))return!0}return!1},_n.prototype.all=function(t){var e=this.xb;e.Pa=null,this.Wa=-1;for(var n=(e=e.s).length,i=this.cf,l=0;l<n;l++){var u=e[l];if((null===i||i(u))&&!t(u))return!1}return!0},_n.prototype.each=function(t){var e=this.xb;e.Pa=null,this.Wa=-1;for(var n=(e=e.s).length,i=this.cf,l=0;l<n;l++){var u=e[l];(null===i||i(u))&&t(u)}return this},_n.prototype.map=function(t){var e=this.xb;e.Pa=null,this.Wa=-1;for(var n=[],i=(e=e.s).length,l=this.cf,u=0;u<i;u++){var h=e[u];(null===l||l(h))&&n.push(t(h))}return(t=new q).s=n,t.sb(),t.iterator},_n.prototype.filter=function(t){var e=this.xb;e.Pa=null,this.Wa=-1;for(var n=[],i=(e=e.s).length,l=this.cf,u=0;u<i;u++){var h=e[u];(null===l||l(h))&&t(h)&&n.push(h)}return(t=new q).s=n,t.sb(),t.iterator},_n.prototype.Xd=function(){this.key=-1,this.value=null,this.na=-1,this.cf=null,this.xb.Pa=this},_n.prototype.toString=function(){return"ListIterator@"+this.Wa+"/"+this.xb.count},Mt.Object.defineProperties(_n.prototype,{iterator:{get:function(){return this}},predicate:{get:function(){return this.cf},set:function(t){this.cf=t}},count:{get:function(){var t=this.cf;if(null!==t){for(var e=0,n=this.xb.s,i=n.length,l=0;l<i;l++)t(n[l])&&e++;return e}return this.xb.s.length}}}),_n.prototype.first=_n.prototype.first,_n.prototype.hasNext=_n.prototype.ud,_n.prototype.next=_n.prototype.next,_n.prototype.reset=_n.prototype.reset,_n.className="ListIterator",cn.prototype.reset=function(){var t=this.xb;t.yg=null,this.na=t.Ia,this.Wa=t.s.length},cn.prototype.next=function(){var t=this.xb;if(t.Ia!==this.na&&0>this.key)return!1;var e=--this.Wa;return 0<=e?(this.key=e,this.value=t.s[e],!0):(this.Xd(),!1)},cn.prototype.ud=function(){return this.next()},cn.prototype.first=function(){var t=this.xb;this.na=t.Ia;var e=t.s;return this.Wa=t=e.length-1,0<=t?(e=e[t],this.key=t,this.value=e):null},cn.prototype.any=function(t){var e=this.xb;e.yg=null;var n=(e=e.s).length;for(this.Wa=n,--n;0<=n;n--)if(t(e[n]))return!0;return!1},cn.prototype.all=function(t){var e=this.xb;e.yg=null;var n=(e=e.s).length;for(this.Wa=n,--n;0<=n;n--)if(!t(e[n]))return!1;return!0},cn.prototype.each=function(t){var e=this.xb;e.yg=null;var n=(e=e.s).length;for(this.Wa=n,--n;0<=n;n--)t(e[n]);return this},cn.prototype.map=function(t){var e=this.xb;e.yg=null;var n=[],i=(e=e.s).length;for(this.Wa=i,--i;0<=i;i--)n.push(t(e[i]));return(t=new q).s=n,t.sb(),t.iterator},cn.prototype.filter=function(t){var e=this.xb;e.yg=null;var n=[],i=(e=e.s).length;for(this.Wa=i,--i;0<=i;i--){var l=e[i];t(l)&&n.push(l)}return(t=new q).s=n,t.sb(),t.iterator},cn.prototype.Xd=function(){this.key=-1,this.value=null,this.na=-1,this.xb.yg=this},cn.prototype.toString=function(){return"ListIteratorBackwards("+this.Wa+"/"+this.xb.count+")"},Mt.Object.defineProperties(cn.prototype,{iterator:{get:function(){return this}},count:{get:function(){return this.xb.s.length}}}),cn.prototype.first=cn.prototype.first,cn.prototype.hasNext=cn.prototype.ud,cn.prototype.next=cn.prototype.next,cn.prototype.reset=cn.prototype.reset,cn.className="ListIteratorBackwards",(_=q.prototype).sb=function(){var t=this.Ia;999999999<++t&&(t=0),this.Ia=t},_.freeze=function(){return this._isFrozen=!0,this},_.ja=function(){return this._isFrozen=!1,this},_.toString=function(){return"List()#"+pn(this)},_.add=function(t){return null===t||(this._isFrozen&&It(this,t),this.s.push(t),this.sb()),this},_.push=function(t){this.add(t)},_.addAll=function(t){if(null===t)return this;this._isFrozen&&It(this);var e=this.s;if(yn(t))for(var n=t.length,i=0;i<n;i++)e.push(t[i]);else for(t=t.iterator;t.next();)e.push(t.value);return this.sb(),this},_.clear=function(){this._isFrozen&&It(this),this.s.length=0,this.sb()},_.contains=function(t){return null!==t&&-1!==this.s.indexOf(t)},_.has=function(t){return this.contains(t)},_.indexOf=function(t){return null===t?-1:this.s.indexOf(t)},_.K=function(t){var e=this.s;return(0>t||t>=e.length)&&le(t,"0 <= i < length",q,"elt:i"),e[t]},_.get=function(t){return this.K(t)},_.Vc=function(t,e){var n=this.s;(0>t||t>=n.length)&&le(t,"0 <= i < length",q,"setElt:i"),this._isFrozen&&It(this,t),n[t]=e},_.set=function(t,e){this.Vc(t,e)},_.first=function(){var t=this.s;return 0===t.length?null:t[0]},_.fc=function(){var t=this.s,e=t.length;return 0<e?t[e-1]:null},_.pop=function(){this._isFrozen&&It(this);var t=this.s;return 0<t.length?t.pop():null},q.prototype.any=function(t){for(var e=this.s,n=e.length,i=0;i<n;i++)if(t(e[i]))return!0;return!1},q.prototype.all=function(t){for(var e=this.s,n=e.length,i=0;i<n;i++)if(!t(e[i]))return!1;return!0},q.prototype.each=function(t){for(var e=this.s,n=e.length,i=0;i<n;i++)t(e[i]);return this},q.prototype.map=function(t){for(var e=new q,n=[],i=this.s,l=i.length,u=0;u<l;u++)n.push(t(i[u]));return e.s=n,e.sb(),e},q.prototype.filter=function(t){for(var e=new q,n=[],i=this.s,l=i.length,u=0;u<l;u++){var h=i[u];t(h)&&n.push(h)}return e.s=n,e.sb(),e},(_=q.prototype).Cb=function(t,e){0>t&&le(t,">= 0",q,"insertAt:i"),this._isFrozen&&It(this,t);var n=this.s;t>=n.length?n.push(e):n.splice(t,0,e),this.sb()},_.remove=function(t){if(null===t)return!1;this._isFrozen&&It(this,t);var e=this.s;return-1!==(t=e.indexOf(t))&&(t===e.length-1?e.pop():e.splice(t,1),this.sb(),!0)},_.delete=function(t){return this.remove(t)},_.mb=function(t){var e=this.s;(0>t||t>=e.length)&&le(t,"0 <= i < length",q,"removeAt:i"),this._isFrozen&&It(this,t),t===e.length-1?e.pop():e.splice(t,1),this.sb()},_.removeRange=function(t,e){var n=this.s,i=n.length;if(0>t)t=0;else if(t>=i)return this;if(0>e)return this;if(e>=i&&(e=i-1),t>e)return this;this._isFrozen&&It(this);for(var l=t,u=e+1;u<i;)n[l++]=n[u++];return n.length=i-(e-t+1),this.sb(),this},q.prototype.copy=function(){var t=new q,e=this.s;return 0<e.length&&(t.s=Array.prototype.slice.call(e)),t},(_=q.prototype).Ea=function(){for(var t=this.s,e=this.count,n=Array(e),i=0;i<e;i++)n[i]=t[i];return n},_.lv=function(){for(var t=new Z,e=this.s,n=this.count,i=0;i<n;i++)t.add(e[i]);return t},_.sort=function(t){return this._isFrozen&&It(this),this.s.sort(t),this.sb(),this},_.ri=function(t,e,n){var i=this.s,l=i.length;void 0===e&&(e=0),void 0===n&&(n=l),this._isFrozen&&It(this);var u=n-e;if(1>=u)return this;if((0>e||e>=l-1)&&le(e,"0 <= from < length",q,"sortRange:from"),2===u)return 0<t(n=i[e],l=i[e+1])&&(i[e]=l,i[e+1]=n,this.sb()),this;if(0===e)if(n>=l)i.sort(t);else for((e=i.slice(0,n)).sort(t),t=0;t<n;t++)i[t]=e[t];else if(n>=l)for((n=i.slice(e)).sort(t),t=e;t<l;t++)i[t]=n[t-e];else for((l=i.slice(e,n)).sort(t),t=e;t<n;t++)i[t]=l[t-e];return this.sb(),this},_.reverse=function(){return this._isFrozen&&It(this),this.s.reverse(),this.sb(),this},Mt.Object.defineProperties(q.prototype,{_dataArray:{get:function(){return this.s}},count:{get:function(){return this.s.length}},size:{get:function(){return this.s.length}},length:{get:function(){return this.s.length}},iterator:{get:function(){if(0>=this.s.length)return So;var t=this.Pa;return null!==t?(t.reset(),t):new _n(this)}},iteratorBackwards:{get:function(){if(0>=this.s.length)return So;var t=this.yg;return null!==t?(t.reset(),t):new cn(this)}}}),q.prototype.reverse=q.prototype.reverse,q.prototype.sortRange=q.prototype.ri,q.prototype.sort=q.prototype.sort,q.prototype.toSet=q.prototype.lv,q.prototype.toArray=q.prototype.Ea,q.prototype.removeRange=q.prototype.removeRange,q.prototype.removeAt=q.prototype.mb,q.prototype.delete=q.prototype.delete,q.prototype.remove=q.prototype.remove,q.prototype.insertAt=q.prototype.Cb,q.prototype.pop=q.prototype.pop,q.prototype.last=q.prototype.fc,q.prototype.first=q.prototype.first,q.prototype.set=q.prototype.set,q.prototype.setElt=q.prototype.Vc,q.prototype.get=q.prototype.get,q.prototype.elt=q.prototype.K,q.prototype.indexOf=q.prototype.indexOf,q.prototype.has=q.prototype.has,q.prototype.contains=q.prototype.contains,q.prototype.clear=q.prototype.clear,q.prototype.addAll=q.prototype.addAll,q.prototype.push=q.prototype.push,q.prototype.add=q.prototype.add,q.prototype.thaw=q.prototype.ja,q.prototype.freeze=q.prototype.freeze,q.className="List",Di.prototype.reset=function(){var t=this.Xf;t.Pa=null,this.na=t.Ia,this.ra=null},Di.prototype.next=function(){var t=this.Xf;if(t.Ia!==this.na&&null===this.key)return!1;var e=this.ra;return null!==(e=null===e?t.ea:e.ta)?(this.ra=e,this.value=e.value,this.key=e.key,!0):(this.Xd(),!1)},Di.prototype.ud=function(){return this.next()},Di.prototype.first=function(){var t=this.Xf;if(this.na=t.Ia,null!==(t=t.ea)){this.ra=t;var e=t.value;return this.key=t.key,this.value=e}return null},Di.prototype.any=function(t){var e=this.Xf;for(this.ra=e.Pa=null,e=e.ea;null!==e;){if(t(e.value))return!0;e=e.ta}return!1},Di.prototype.all=function(t){var e=this.Xf;for(this.ra=e.Pa=null,e=e.ea;null!==e;){if(!t(e.value))return!1;e=e.ta}return!0},Di.prototype.each=function(t){var e=this.Xf;for(this.ra=e.Pa=null,e=e.ea;null!==e;)t(e.value),e=e.ta;return this},Di.prototype.map=function(t){var e=this.Xf;e.Pa=null;var n=new q;for(e=e.ea;null!==e;)n.add(t(e.value)),e=e.ta;return n.iterator},Di.prototype.filter=function(t){var e=this.Xf;e.Pa=null;var n=new q;for(e=e.ea;null!==e;){var i=e.value;t(i)&&n.add(i),e=e.ta}return n.iterator},Di.prototype.Xd=function(){this.value=this.key=null,this.na=-1,this.Xf.Pa=this},Di.prototype.toString=function(){return null!==this.ra?"SetIterator@"+this.ra.value:"SetIterator"},Mt.Object.defineProperties(Di.prototype,{iterator:{get:function(){return this}},count:{get:function(){return this.Xf.Ob}}}),Di.prototype.first=Di.prototype.first,Di.prototype.hasNext=Di.prototype.ud,Di.prototype.next=Di.prototype.next,Di.prototype.reset=Di.prototype.reset,Di.className="SetIterator",(_=Z.prototype).sb=function(){var t=this.Ia;999999999<++t&&(t=0),this.Ia=t},_.freeze=function(){return this._isFrozen=!0,this},_.ja=function(){return this._isFrozen=!1,this},_.toString=function(){return"Set()#"+pn(this)},_.add=function(t){if(null===t)return this;this._isFrozen&&It(this,t);var e=t;return jt(t)&&(e=qu(t)),void 0===this.Pb[e]&&(this.Ob++,t=new hg(t,t),this.Pb[e]=t,null===(e=this.Ye)?this.ea=t:(t.al=e,e.ta=t),this.Ye=t,this.sb()),this},_.addAll=function(t){if(null===t)return this;if(this._isFrozen&&It(this),yn(t))for(var e=t.length,n=0;n<e;n++)this.add(t[n]);else for(t=t.iterator;t.next();)this.add(t.value);return this},_.contains=function(t){if(null===t)return!1;var e=t;return(!jt(t)||void 0!==(e=pn(t)))&&void 0!==this.Pb[e]},_.has=function(t){return this.contains(t)},_.zy=function(t){if(null===t)return!0;for(t=t.iterator;t.next();)if(!this.contains(t.value))return!1;return!0},_.Ay=function(t){if(null===t)return!0;for(t=t.iterator;t.next();)if(this.contains(t.value))return!0;return!1},_.first=function(){var t=this.ea;return null===t?null:t.value},Z.prototype.any=function(t){for(var e=this.ea;null!==e;){if(t(e.value))return!0;e=e.ta}return!1},Z.prototype.all=function(t){for(var e=this.ea;null!==e;){if(!t(e.value))return!1;e=e.ta}return!0},Z.prototype.each=function(t){for(var e=this.ea;null!==e;)t(e.value),e=e.ta;return this},Z.prototype.map=function(t){for(var e=new Z,n=this.ea;null!==n;)e.add(t(n.value)),n=n.ta;return e},Z.prototype.filter=function(t){for(var e=new Z,n=this.ea;null!==n;){var i=n.value;t(i)&&e.add(i),n=n.ta}return e},(_=Z.prototype).remove=function(t){if(null===t)return!1;this._isFrozen&&It(this,t);var e=t;if(jt(t)&&void 0===(e=pn(t))||void 0===(t=this.Pb[e]))return!1;var n=t.ta,i=t.al;return null!==n&&(n.al=i),null!==i&&(i.ta=n),this.ea===t&&(this.ea=n),this.Ye===t&&(this.Ye=i),delete this.Pb[e],this.Ob--,this.sb(),!0},_.delete=function(t){return this.remove(t)},_.Ko=function(t){if(null===t)return this;if(this._isFrozen&&It(this),yn(t))for(var e=t.length,n=0;n<e;n++)this.remove(t[n]);else for(t=t.iterator;t.next();)this.remove(t.value);return this},_.Wz=function(t){if(null===t||0===this.count)return this;this._isFrozen&&It(this);var e=new Z;e.addAll(t),t=[];for(var n=this.iterator;n.next();){var i=n.value;e.contains(i)||t.push(i)}return this.Ko(t),this},_.clear=function(){this._isFrozen&&It(this),this.Pb={},this.Ob=0,null!==this.Pa&&this.Pa.reset(),this.Ye=this.ea=null,this.sb()},Z.prototype.copy=function(){var n,t=new Z,e=this.Pb;for(n in e)t.add(e[n].value);return t},Z.prototype.Ea=function(){var i,t=Array(this.Ob),e=this.Pb,n=0;for(i in e)t[n]=e[i].value,n++;return t},Z.prototype.kv=function(){var n,t=new q,e=this.Pb;for(n in e)t.add(e[n].value);return t},Mt.Object.defineProperties(Z.prototype,{count:{get:function(){return this.Ob}},size:{get:function(){return this.Ob}},iterator:{get:function(){if(0>=this.Ob)return So;var t=this.Pa;return null!==t?(t.reset(),t):new Di(this)}}}),Z.prototype.toList=Z.prototype.kv,Z.prototype.toArray=Z.prototype.Ea,Z.prototype.clear=Z.prototype.clear,Z.prototype.retainAll=Z.prototype.Wz,Z.prototype.removeAll=Z.prototype.Ko,Z.prototype.delete=Z.prototype.delete,Z.prototype.remove=Z.prototype.remove,Z.prototype.first=Z.prototype.first,Z.prototype.containsAny=Z.prototype.Ay,Z.prototype.containsAll=Z.prototype.zy,Z.prototype.has=Z.prototype.has,Z.prototype.contains=Z.prototype.contains,Z.prototype.addAll=Z.prototype.addAll,Z.prototype.add=Z.prototype.add,Z.prototype.thaw=Z.prototype.ja,Z.prototype.freeze=Z.prototype.freeze;var wl,fi,yc,$y,dd,oa=1;function ci(t){this.la=t,this.na=t.Ia,this.ra=null}function Qt(t){Z.call(this),wn(this),this._isFrozen=!0,this.la=t}function qt(t){this.la=t,t.Xe=null,this.na=t.Ia,this.ra=null}function hg(t,e){this.key=t,this.value=e,this.al=this.ta=null}function Si(t){this.la=t,t.Pa=null,this.na=t.Ia,this.ra=null}function vt(t){wn(this),this._isFrozen=!1,this.Pb={},this.Ob=0,this.Xe=this.Pa=null,this.Ia=0,this.Ye=this.ea=null,"string"==typeof t&&Y("Error: Since 2.0 List/Map/Set constructors no longer take an argument that enforces type."),void 0!==t&&this.addAll(t)}function P(t,e){void 0===t?this.y=this.x=0:"number"==typeof t&&"number"==typeof e?(this.x=t,this.y=e):Y("Invalid arguments to Point constructor: "+t+", "+e),this._isFrozen=!1}function ox(t){if("string"==typeof t){t=t.split(" ");for(var e=0,n=0;""===t[e];)e++;var i=t[e++];i&&(n=parseFloat(i));for(var l=0;""===t[e];)e++;return(i=t[e++])&&(l=parseFloat(i)),new P(n,l)}return new P}function sx(t){return t.x.toString()+" "+t.y.toString()}function Wy(t,e){if(0===t)return 0<e?90:0>e?270:0;if(0===e)return 0<t?0:180;if(isNaN(t)||isNaN(e))return 0;var n=180*Math.atan(Math.abs(e/t))/Math.PI;return 0>t?n=0>e?n+180:180-n:0>e&&(n=360-n),n}function Un(t,e){return e.Ld(t),t}function Kn(t,e,n,i,l,u){var h=l-n,f=u-i,p=h*h+f*f,g=-(n-=t)*h-(i-=e)*f;return 0>=g||g>=p?(h=l-t,f=u-e,Math.min(n*n+i*i,h*h+f*f)):(t=h*i-f*n)*t/p}function Cs(t,e,n,i){return(t=n-t)*t+(e=i-e)*e}function Yy(t,e,n,i){return e=i-e,0==(t=n-t)?0<e?90:0>e?270:0:0===e?0<t?0:180:isNaN(t)||isNaN(e)?0:(i=180*Math.atan(Math.abs(e/t))/Math.PI,0>t?i=0>e?i+180:180-i:0>e&&(i=360-i),i)}Z.className="Set",Z.uniqueHash=wn,Z.hashIdUnique=qu,Z.hashId=pn,ci.prototype.reset=function(){this.na=this.la.Ia,this.ra=null},ci.prototype.next=function(){var t=this.la;if(t.Ia!==this.na&&null===this.key)return!1;var e=this.ra;return null!==(e=null===e?t.ea:e.ta)?(this.ra=e,this.value=this.key=t=e.key,!0):(this.Xd(),!1)},ci.prototype.ud=function(){return this.next()},ci.prototype.first=function(){var t=this.la;return this.na=t.Ia,null!==(t=t.ea)?(this.ra=t,this.value=this.key=t=t.key):null},ci.prototype.any=function(t){var e=this.la;for(this.ra=null,e=e.ea;null!==e;){if(t(e.key))return!0;e=e.ta}return!1},ci.prototype.all=function(t){var e=this.la;for(this.ra=null,e=e.ea;null!==e;){if(!t(e.key))return!1;e=e.ta}return!0},ci.prototype.each=function(t){var e=this.la;for(this.ra=null,e=e.ea;null!==e;)t(e.key),e=e.ta;return this},ci.prototype.map=function(t){var e=this.la;this.ra=null;var n=new q;for(e=e.ea;null!==e;)n.add(t(e.key)),e=e.ta;return n.iterator},ci.prototype.filter=function(t){var e=this.la;this.ra=null;var n=new q;for(e=e.ea;null!==e;){var i=e.key;t(i)&&n.add(i),e=e.ta}return n.iterator},ci.prototype.Xd=function(){this.value=this.key=null,this.na=-1},ci.prototype.toString=function(){return null!==this.ra?"MapKeySetIterator@"+this.ra.value:"MapKeySetIterator"},Mt.Object.defineProperties(ci.prototype,{iterator:{get:function(){return this}},count:{get:function(){return this.la.Ob}}}),ci.prototype.first=ci.prototype.first,ci.prototype.hasNext=ci.prototype.ud,ci.prototype.next=ci.prototype.next,ci.prototype.reset=ci.prototype.reset,ci.className="MapKeySetIterator",Ht(Qt,Z),(_=Qt.prototype).freeze=function(){return this},_.ja=function(){return this},_.toString=function(){return"MapKeySet("+this.la.toString()+")"},_.add=function(){Y("This Set is read-only: "+this.toString())},_.contains=function(t){return this.la.contains(t)},_.has=function(t){return this.contains(t)},_.remove=function(){Y("This Set is read-only: "+this.toString())},_.delete=function(t){return this.remove(t)},_.clear=function(){Y("This Set is read-only: "+this.toString())},_.first=function(){var t=this.la.ea;return null!==t?t.key:null},Qt.prototype.any=function(t){for(var e=this.la.ea;null!==e;){if(t(e.key))return!0;e=e.ta}return!1},Qt.prototype.all=function(t){for(var e=this.la.ea;null!==e;){if(!t(e.key))return!1;e=e.ta}return!0},Qt.prototype.each=function(t){for(var e=this.la.ea;null!==e;)t(e.key),e=e.ta;return this},Qt.prototype.map=function(t){for(var e=new Z,n=this.la.ea;null!==n;)e.add(t(n.key)),n=n.ta;return e},Qt.prototype.filter=function(t){for(var e=new Z,n=this.la.ea;null!==n;){var i=n.key;t(i)&&e.add(i),n=n.ta}return e},Qt.prototype.copy=function(){return new Qt(this.la)},Qt.prototype.lv=function(){var n,t=new Z,e=this.la.Pb;for(n in e)t.add(e[n].key);return t},Qt.prototype.Ea=function(){var i,t=this.la.Pb,e=Array(this.la.Ob),n=0;for(i in t)e[n]=t[i].key,n++;return e},Qt.prototype.kv=function(){var n,t=new q,e=this.la.Pb;for(n in e)t.add(e[n].key);return t},Mt.Object.defineProperties(Qt.prototype,{count:{get:function(){return this.la.Ob}},size:{get:function(){return this.la.Ob}},iterator:{get:function(){return 0>=this.la.Ob?So:new ci(this.la)}}}),Qt.prototype.toList=Qt.prototype.kv,Qt.prototype.toArray=Qt.prototype.Ea,Qt.prototype.toSet=Qt.prototype.lv,Qt.prototype.first=Qt.prototype.first,Qt.prototype.clear=Qt.prototype.clear,Qt.prototype.delete=Qt.prototype.delete,Qt.prototype.remove=Qt.prototype.remove,Qt.prototype.has=Qt.prototype.has,Qt.prototype.contains=Qt.prototype.contains,Qt.prototype.add=Qt.prototype.add,Qt.prototype.thaw=Qt.prototype.ja,Qt.prototype.freeze=Qt.prototype.freeze,Qt.className="MapKeySet",qt.prototype.reset=function(){var t=this.la;t.Xe=null,this.na=t.Ia,this.ra=null},qt.prototype.next=function(){var t=this.la;if(t.Ia!==this.na&&null===this.key)return!1;var e=this.ra;return null!==(e=null===e?t.ea:e.ta)?(this.ra=e,this.value=e.value,this.key=e.key,!0):(this.Xd(),!1)},qt.prototype.ud=function(){return this.next()},qt.prototype.first=function(){var t=this.la;if(this.na=t.Ia,null!==(t=t.ea)){this.ra=t;var e=t.value;return this.key=t.key,this.value=e}return null},qt.prototype.any=function(t){var e=this.la;for(this.ra=e.Xe=null,e=e.ea;null!==e;){if(t(e.value))return!0;e=e.ta}return!1},qt.prototype.all=function(t){var e=this.la;for(this.ra=e.Xe=null,e=e.ea;null!==e;){if(!t(e.value))return!1;e=e.ta}return!0},qt.prototype.each=function(t){var e=this.la;for(this.ra=e.Xe=null,e=e.ea;null!==e;)t(e.value),e=e.ta;return this},qt.prototype.map=function(t){var e=this.la;this.ra=e.Xe=null;var n=new q;for(e=e.ea;null!==e;)n.add(t(e.value)),e=e.ta;return n.iterator},qt.prototype.filter=function(t){var e=this.la;this.ra=e.Xe=null;var n=new q;for(e=e.ea;null!==e;){var i=e.value;t(i)&&n.add(i),e=e.ta}return n.iterator},qt.prototype.Xd=function(){this.value=this.key=null,this.na=-1,this.la.Xe=this},qt.prototype.toString=function(){return null!==this.ra?"MapValueSetIterator@"+this.ra.value:"MapValueSetIterator"},Mt.Object.defineProperties(qt.prototype,{iterator:{get:function(){return this}},count:{get:function(){return this.la.Ob}}}),qt.prototype.first=qt.prototype.first,qt.prototype.hasNext=qt.prototype.ud,qt.prototype.next=qt.prototype.next,qt.prototype.reset=qt.prototype.reset,qt.className="MapValueSetIterator",hg.prototype.toString=function(){return"{"+this.key+":"+this.value+"}"},hg.className="KeyValuePair",Si.prototype.reset=function(){var t=this.la;t.Pa=null,this.na=t.Ia,this.ra=null},Si.prototype.next=function(){var t=this.la;if(t.Ia!==this.na&&null===this.key)return!1;var e=this.ra;return null!==(e=null===e?t.ea:e.ta)?(this.ra=e,this.key=e.key,this.value=e.value,!0):(this.Xd(),!1)},Si.prototype.ud=function(){return this.next()},Si.prototype.first=function(){var t=this.la;return this.na=t.Ia,null!==(t=t.ea)?(this.ra=t,this.key=t.key,this.value=t.value,t):null},Si.prototype.any=function(t){var e=this.la;for(this.ra=e.Pa=null,e=e.ea;null!==e;){if(t(e))return!0;e=e.ta}return!1},Si.prototype.all=function(t){var e=this.la;for(this.ra=e.Pa=null,e=e.ea;null!==e;){if(!t(e))return!1;e=e.ta}return!0},Si.prototype.each=function(t){var e=this.la;for(this.ra=e.Pa=null,e=e.ea;null!==e;)t(e),e=e.ta;return this},Si.prototype.map=function(t){var e=this.la;this.ra=e.Pa=null;var n=new q;for(e=e.ea;null!==e;)n.add(t(e)),e=e.ta;return n.iterator},Si.prototype.filter=function(t){var e=this.la;this.ra=e.Pa=null;var n=new q;for(e=e.ea;null!==e;)t(e)&&n.add(e),e=e.ta;return n.iterator},Si.prototype.Xd=function(){this.value=this.key=null,this.na=-1,this.la.Pa=this},Si.prototype.toString=function(){return null!==this.ra?"MapIterator@"+this.ra:"MapIterator"},Mt.Object.defineProperties(Si.prototype,{iterator:{get:function(){return this}},count:{get:function(){return this.la.Ob}}}),Si.prototype.first=Si.prototype.first,Si.prototype.hasNext=Si.prototype.ud,Si.prototype.next=Si.prototype.next,Si.prototype.reset=Si.prototype.reset,Si.className="MapIterator",(_=vt.prototype).sb=function(){var t=this.Ia;999999999<++t&&(t=0),this.Ia=t},_.freeze=function(){return this._isFrozen=!0,this},_.ja=function(){return this._isFrozen=!1,this},_.toString=function(){return"Map()#"+pn(this)},_.add=function(t,e){this._isFrozen&&It(this,t);var n=t;jt(t)&&(n=qu(t));var i=this.Pb[n];return void 0===i?(this.Ob++,t=new hg(t,e),this.Pb[n]=t,null===(n=this.Ye)?this.ea=t:(t.al=n,n.ta=t),this.Ye=t,this.sb()):i.value=e,this},_.set=function(t,e){return this.add(t,e)},_.addAll=function(t){if(null===t)return this;if(yn(t))for(var e=t.length,n=0;n<e;n++){var i=t[n];this.add(i.key,i.value)}else if(t instanceof vt)for(t=t.iterator;t.next();)this.add(t.key,t.value);else for(t=t.iterator;t.next();)this.add((e=t.value).key,e.value);return this},_.first=function(){return this.ea},vt.prototype.any=function(t){for(var e=this.ea;null!==e;){if(t(e))return!0;e=e.ta}return!1},vt.prototype.all=function(t){for(var e=this.ea;null!==e;){if(!t(e))return!1;e=e.ta}return!0},vt.prototype.each=function(t){for(var e=this.ea;null!==e;)t(e),e=e.ta;return this},vt.prototype.map=function(t){for(var e=new vt,n=this.ea;null!==n;)e.add(n.key,t(n)),n=n.ta;return e},vt.prototype.filter=function(t){for(var e=new vt,n=this.ea;null!==n;)t(n)&&e.add(n.key,n.value),n=n.ta;return e},(_=vt.prototype).contains=function(t){var e=t;return(!jt(t)||void 0!==(e=pn(t)))&&void 0!==this.Pb[e]},_.has=function(t){return this.contains(t)},_.I=function(t){var e=t;return jt(t)&&void 0===(e=pn(t))||void 0===(t=this.Pb[e])?null:t.value},_.get=function(t){return this.I(t)},_.remove=function(t){if(null===t)return!1;this._isFrozen&&It(this,t);var e=t;if(jt(t)&&void 0===(e=pn(t))||void 0===(t=this.Pb[e]))return!1;var n=t.ta,i=t.al;return null!==n&&(n.al=i),null!==i&&(i.ta=n),this.ea===t&&(this.ea=n),this.Ye===t&&(this.Ye=i),delete this.Pb[e],this.Ob--,this.sb(),!0},_.delete=function(t){return this.remove(t)},_.clear=function(){this._isFrozen&&It(this),this.Pb={},this.Ob=0,null!==this.Pa&&this.Pa.reset(),null!==this.Xe&&this.Xe.reset(),this.Ye=this.ea=null,this.sb()},vt.prototype.copy=function(){var n,t=new vt,e=this.Pb;for(n in e){var i=e[n];t.add(i.key,i.value)}return t},vt.prototype.Ea=function(){var i,t=this.Pb,e=Array(this.Ob),n=0;for(i in t){var l=t[i];e[n]=new hg(l.key,l.value),n++}return e},vt.prototype.Cf=function(){return new Qt(this)},Mt.Object.defineProperties(vt.prototype,{count:{get:function(){return this.Ob}},size:{get:function(){return this.Ob}},iterator:{get:function(){if(0>=this.count)return So;var t=this.Pa;return null!==t?(t.reset(),t):new Si(this)}},iteratorKeys:{get:function(){return 0>=this.count?So:new ci(this)}},iteratorValues:{get:function(){if(0>=this.count)return So;var t=this.Xe;return null!==t?(t.reset(),t):new qt(this)}}}),vt.prototype.toKeySet=vt.prototype.Cf,vt.prototype.toArray=vt.prototype.Ea,vt.prototype.clear=vt.prototype.clear,vt.prototype.delete=vt.prototype.delete,vt.prototype.remove=vt.prototype.remove,vt.prototype.get=vt.prototype.get,vt.prototype.getValue=vt.prototype.I,vt.prototype.has=vt.prototype.has,vt.prototype.contains=vt.prototype.contains,vt.prototype.first=vt.prototype.first,vt.prototype.addAll=vt.prototype.addAll,vt.prototype.set=vt.prototype.set,vt.prototype.add=vt.prototype.add,vt.prototype.thaw=vt.prototype.ja,vt.prototype.freeze=vt.prototype.freeze,vt.className="Map",P.prototype.assign=function(t){return this.x=t.x,this.y=t.y,this},P.prototype.h=function(t,e){return this.x=t,this.y=e,this},P.prototype.kg=function(t,e){return this.x=t,this.y=e,this},P.prototype.set=function(t){return this.x=t.x,this.y=t.y,this},P.prototype.copy=function(){var t=new P;return t.x=this.x,t.y=this.y,t},(_=P.prototype).ha=function(){return this._isFrozen=!0,Object.freeze(this),this},_.J=function(){return this._isFrozen||Object.isFrozen(this)?this:this.copy().freeze()},_.freeze=function(){return this._isFrozen=!0,this},_.ja=function(){return Object.isFrozen(this)&&Y("cannot thaw constant: "+this),this._isFrozen=!1,this},_.toString=function(){return"Point("+this.x+","+this.y+")"},_.C=function(t){return t instanceof P&&this.x===t.x&&this.y===t.y},_.bi=function(t,e){return this.x===t&&this.y===e},_.$a=function(t){return F.B(this.x,t.x)&&F.B(this.y,t.y)},_.add=function(t){return this.x+=t.x,this.y+=t.y,this},_.je=function(t){return this.x-=t.x,this.y-=t.y,this},_.offset=function(t,e){return this.x+=t,this.y+=e,this},P.prototype.rotate=function(t){if(0===t)return this;var e=this.x,n=this.y;if(0===e&&0===n)return this;if(360<=t?t-=360:0>t&&(t+=360),90===t){t=0;var i=1}else 180===t?(t=-1,i=0):270===t?(t=0,i=-1):(i=t*Math.PI/180,t=Math.cos(i),i=Math.sin(i));return this.x=t*e-i*n,this.y=i*e+t*n,this},(_=P.prototype).scale=function(t,e){return this.x*=t,this.y*=e,this},_.rf=function(t){var e=t.x-this.x;return e*e+(t=t.y-this.y)*t},_.td=function(t,e){return(t-=this.x)*t+(e-=this.y)*e},_.normalize=function(){var t=this.x,e=this.y,n=Math.sqrt(t*t+e*e);return 0<n&&(this.x=t/n,this.y=e/n),this},_.Ya=function(t){return Wy(t.x-this.x,t.y-this.y)},_.direction=function(t,e){return Wy(t-this.x,e-this.y)},_.yy=function(t,e){return F.sl(t.x,t.y,e.x,e.y,this.x,this.y)},_.Mz=function(t,e,n,i){return F.fh(t,e,n,i,this.x,this.y,this),this},_.Nz=function(t,e){return F.fh(t.x,t.y,e.x,e.y,this.x,this.y,this),this},_.aA=function(t,e,n,i){return F.so(this.x,this.y,t,e,n,i,this),this},_.bA=function(t,e){return F.so(this.x,this.y,t.x,t.y,e.width,e.height,this),this},_.oi=function(t,e){return this.x=t.x+e.x*t.width+e.offsetX,this.y=t.y+e.y*t.height+e.offsetY,this},_.pi=function(t,e,n,i,l){return this.x=t+l.x*n+l.offsetX,this.y=e+l.y*i+l.offsetY,this},_.transform=function(t){return t.Fa(this),this},_.v=function(){return isFinite(this.x)&&isFinite(this.y)},P.alloc=function(){var t=Jt.pop();return void 0===t?new P:t},P.allocAt=function(t,e){var n=Jt.pop();return void 0===n?new P(t,e):(n.x=t,n.y=e,n)},P.free=function(t){Jt.push(t)},P.prototype.isReal=P.prototype.v,P.prototype.setSpot=P.prototype.pi,P.prototype.setRectSpot=P.prototype.oi,P.prototype.snapToGridPoint=P.prototype.bA,P.prototype.snapToGrid=P.prototype.aA,P.prototype.projectOntoLineSegmentPoint=P.prototype.Nz,P.prototype.projectOntoLineSegment=P.prototype.Mz,P.intersectingLineSegments=function(t,e,n,i,l,u,h,f){return F.zl(t,e,n,i,l,u,h,f)},P.prototype.compareWithLineSegmentPoint=P.prototype.yy,P.compareWithLineSegment=function(t,e,n,i,l,u){return F.sl(t,e,n,i,l,u)},P.prototype.direction=P.prototype.direction,P.prototype.directionPoint=P.prototype.Ya,P.prototype.normalize=P.prototype.normalize,P.prototype.distanceSquared=P.prototype.td,P.prototype.distanceSquaredPoint=P.prototype.rf,P.prototype.scale=P.prototype.scale,P.prototype.rotate=P.prototype.rotate,P.prototype.offset=P.prototype.offset,P.prototype.subtract=P.prototype.je,P.prototype.add=P.prototype.add,P.prototype.equalsApprox=P.prototype.$a,P.prototype.equalTo=P.prototype.bi,P.prototype.equals=P.prototype.C,P.prototype.set=P.prototype.set,P.prototype.setTo=P.prototype.kg;var th,ro,cg,vc,sa,Qo,Ky,Jt=[];function dt(t,e){void 0===t?this.height=this.width=0:"number"==typeof t&&(0<=t||isNaN(t))&&"number"==typeof e&&(0<=e||isNaN(e))?(this.width=t,this.height=e):Y("Invalid arguments to Size constructor: "+t+", "+e),this._isFrozen=!1}function kM(t){if("string"==typeof t){t=t.split(" ");for(var e=0,n=0;""===t[e];)e++;var i=t[e++];i&&(n=parseFloat(i));for(var l=0;""===t[e];)e++;return(i=t[e++])&&(l=parseFloat(i)),new dt(n,l)}return new dt}function Xs(t){return t.width.toString()+" "+t.height.toString()}P.className="Point",P.parse=ox,P.stringify=sx,P.distanceLineSegmentSquared=Kn,P.distanceSquared=Cs,P.direction=Yy,P.Origin=wl=new P(0,0).ha(),P.InfiniteTopLeft=fi=new P(-1/0,-1/0).ha(),P.InfiniteBottomRight=yc=new P(1/0,1/0).ha(),P.SixPoint=$y=new P(6,6).ha(),P.NoPoint=dd=new P(NaN,NaN).ha(),P.parse=ox,P.stringify=sx,P.distanceLineSegmentSquared=Kn,P.distanceSquared=Cs,P.direction=Yy,dt.prototype.assign=function(t){return this.width=t.width,this.height=t.height,this},dt.prototype.h=function(t,e){return this.width=t,this.height=e,this},dt.prototype.kg=function(t,e){return this.width=t,this.height=e,this},dt.prototype.set=function(t){return this.width=t.width,this.height=t.height,this},dt.prototype.copy=function(){var t=new dt;return t.width=this.width,t.height=this.height,t},(_=dt.prototype).ha=function(){return this._isFrozen=!0,Object.freeze(this),this},_.J=function(){return this._isFrozen||Object.isFrozen(this)?this:this.copy().freeze()},_.freeze=function(){return this._isFrozen=!0,this},_.ja=function(){return Object.isFrozen(this)&&Y("cannot thaw constant: "+this),this._isFrozen=!1,this},_.toString=function(){return"Size("+this.width+","+this.height+")"},_.C=function(t){return t instanceof dt&&this.width===t.width&&this.height===t.height},_.bi=function(t,e){return this.width===t&&this.height===e},_.$a=function(t){return F.B(this.width,t.width)&&F.B(this.height,t.height)},_.vc=function(t,e){return this.width=0<=(t=this.width+t)?t:0,this.height=0<=(e=this.height+e)?e:0,this},_.v=function(){return isFinite(this.width)&&isFinite(this.height)},dt.alloc=function(){var t=Tn.pop();return void 0===t?new dt:t},dt.free=function(t){Tn.push(t)},dt.prototype.isReal=dt.prototype.v,dt.prototype.inflate=dt.prototype.vc,dt.prototype.equalsApprox=dt.prototype.$a,dt.prototype.equalTo=dt.prototype.bi,dt.prototype.equals=dt.prototype.C,dt.prototype.set=dt.prototype.set,dt.prototype.setTo=dt.prototype.kg;var Tn=[];function B(t,e,n,i){void 0===t?this.height=this.width=this.y=this.x=0:"number"==typeof t&&"number"==typeof e&&"number"==typeof n&&(0<=n||isNaN(n))&&"number"==typeof i&&(0<=i||isNaN(i))?(this.x=t,this.y=e,this.width=n,this.height=i):t instanceof P?(n=t.x,t=t.y,e instanceof P?(i=e.x,e=e.y,this.x=Math.min(n,i),this.y=Math.min(t,e),this.width=Math.abs(n-i),this.height=Math.abs(t-e)):e instanceof dt?(this.x=n,this.y=t,this.width=e.width,this.height=e.height):Y("Incorrect second argument supplied to Rect constructor "+e)):Y("Invalid arguments to Rect constructor: "+t+", "+e+", "+n+", "+i),this._isFrozen=!1}function xl(t,e,n){t.width=e,t.height=n}function eh(t){if("string"==typeof t){t=t.split(" ");for(var e=0,n=0;""===t[e];)e++;var i=t[e++];i&&(n=parseFloat(i));for(var l=0;""===t[e];)e++;(i=t[e++])&&(l=parseFloat(i));for(var u=0;""===t[e];)e++;(i=t[e++])&&(u=parseFloat(i));for(var h=0;""===t[e];)e++;return(i=t[e++])&&(h=parseFloat(i)),new B(n,l,u,h)}return new B}function tn(t){return t.x.toString()+" "+t.y.toString()+" "+t.width.toString()+" "+t.height.toString()}function wc(t,e){return F.ca(t.x,e.x)&&F.ca(t.y,e.y)&&F.ca(t.width,e.width)&&F.ca(t.height,e.height)}function xc(t,e,n,i,l){var u=t.width;return n+l<=-u?(t.x+=u/2,t.width=0):(t.x-=l,t.width+=n+l),e+i<=-(n=t.height)?(t.y+=n/2,t.height=0):(t.y-=e,t.height+=e+i),t}function fg(t,e,n,i,l){var u=Math.max(t.x,e),h=Math.max(t.y,n);return e=Math.min(t.x+t.width,e+i),n=Math.min(t.y+t.height,n+l),t.x=u,t.y=h,t.width=Math.max(0,e-u),t.height=Math.max(0,n-h),t}function Xy(t,e){var n=t.width,i=t.x,l=e.x-10;return!(i>e.width+10+10+l||l>n+i||(n=t.height,(t=t.y)>e.height+10+10+(i=e.y-10)||i>n+t))}function He(t,e,n,i,l){var u=Math.min(t.x,e),h=Math.min(t.y,n);return e=Math.max(t.x+t.width,e+i),n=Math.max(t.y+t.height,n+l),t.x=u,t.y=h,t.width=e-u,t.height=n-h,t}function ur(t,e,n,i,l,u,h,f){return void 0===h&&(h=0),void 0===f&&(f=0),t<=l&&l+h<=t+n&&e<=u&&u+f<=e+i}function lx(t,e,n,i,l,u,h,f){return!(t>h+l||l>n+t||e>f+u||u>i+e)}dt.className="Size",dt.parse=kM,dt.stringify=Xs,dt.ZeroSize=th=new dt(0,0).ha(),dt.OneSize=ro=new dt(1,1).ha(),dt.SixSize=cg=new dt(6,6).ha(),dt.EightSize=vc=new dt(8,8).ha(),dt.TenSize=sa=new dt(10,10).ha(),dt.InfiniteSize=Qo=new dt(1/0,1/0).ha(),dt.NoSize=Ky=new dt(NaN,NaN).ha(),dt.parse=kM,dt.stringify=Xs,(_=B.prototype).assign=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},_.h=function(t,e,n,i){return this.x=t,this.y=e,this.width=n,this.height=i,this},_.kg=function(t,e,n,i){return this.x=t,this.y=e,this.width=n,this.height=i,this},_.set=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},_.Wc=function(t){return this.x=t.x,this.y=t.y,this},_.$z=function(t){return this.width=t.width,this.height=t.height,this},B.prototype.copy=function(){var t=new B;return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},(_=B.prototype).ha=function(){return this._isFrozen=!0,Object.freeze(this),this},_.J=function(){return this._isFrozen||Object.isFrozen(this)?this:this.copy().freeze()},_.freeze=function(){return this._isFrozen=!0,this},_.ja=function(){return Object.isFrozen(this)&&Y("cannot thaw constant: "+this),this._isFrozen=!1,this},_.toString=function(){return"Rect("+this.x+","+this.y+","+this.width+","+this.height+")"},_.C=function(t){return t instanceof B&&this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height},_.bi=function(t,e,n,i){return this.x===t&&this.y===e&&this.width===n&&this.height===i},_.$a=function(t){return F.B(this.x,t.x)&&F.B(this.y,t.y)&&F.B(this.width,t.width)&&F.B(this.height,t.height)},_.ba=function(t){return this.x<=t.x&&this.x+this.width>=t.x&&this.y<=t.y&&this.y+this.height>=t.y},_.Ee=function(t){return this.x<=t.x&&t.x+t.width<=this.x+this.width&&this.y<=t.y&&t.y+t.height<=this.y+this.height},_.contains=function(t,e,n,i){return void 0===n&&(n=0),void 0===i&&(i=0),this.x<=t&&t+n<=this.x+this.width&&this.y<=e&&e+i<=this.y+this.height},_.offset=function(t,e){return this.x+=t,this.y+=e,this},_.vc=function(t,e){return xc(this,e,t,e,t)},_.fo=function(t){return xc(this,t.top,t.right,t.bottom,t.left)},_.jv=function(t){return xc(this,-t.top,-t.right,-t.bottom,-t.left)},_.oz=function(t,e,n,i){return xc(this,t,e,n,i)},_.ix=function(t){return fg(this,t.x,t.y,t.width,t.height)},_.Gu=function(t,e,n,i){return fg(this,t,e,n,i)},_.Sc=function(t){return this.Hu(t.x,t.y,t.width,t.height)},_.Hu=function(t,e,n,i){var l=this.width,u=this.x;return!(l!==1/0&&n!==1/0&&(l+=u,n+=t,isNaN(n)||isNaN(l)||u>n||t>l)||(n=this.y,(t=this.height)!==1/0&&i!==1/0&&(t+=n,i+=e,isNaN(i)||isNaN(t)||n>i||e>t)))},_.Me=function(t){return He(this,t.x,t.y,0,0)},_.Xc=function(t){return He(this,t.x,t.y,t.width,t.height)},_.nv=function(t,e,n,i){return void 0===n&&(n=0),void 0===i&&(i=0),He(this,t,e,n,i)},_.pi=function(t,e,n){return this.x=t-n.offsetX-n.x*this.width,this.y=e-n.offsetY-n.y*this.height,this},_.v=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},_.vz=function(){return 0===this.width&&0===this.height},B.alloc=function(){var t=dg.pop();return void 0===t?new B:t},B.allocAt=function(t,e,n,i){var l=dg.pop();return void 0===l?new B(t,e,n,i):l.h(t,e,n,i)},B.free=function(t){dg.push(t)},Mt.Object.defineProperties(B.prototype,{left:{get:function(){return this.x},set:function(t){this.x=t}},top:{get:function(){return this.y},set:function(t){this.y=t}},right:{get:function(){return this.x+this.width},set:function(t){this.x+=t-(this.x+this.width)}},bottom:{get:function(){return this.y+this.height},set:function(t){this.y+=t-(this.y+this.height)}},position:{get:function(){return new P(this.x,this.y)},set:function(t){this.x=t.x,this.y=t.y}},size:{get:function(){return new dt(this.width,this.height)},set:function(t){this.width=t.width,this.height=t.height}},center:{get:function(){return new P(this.x+this.width/2,this.y+this.height/2)},set:function(t){this.x=t.x-this.width/2,this.y=t.y-this.height/2}},centerX:{get:function(){return this.x+this.width/2},set:function(t){this.x=t-this.width/2}},centerY:{get:function(){return this.y+this.height/2},set:function(t){this.y=t-this.height/2}}}),B.prototype.isEmpty=B.prototype.vz,B.prototype.isReal=B.prototype.v,B.intersectsLineSegment=function(t,e,n,i,l,u,h,f){return F.jx(t,e,n,i,l,u,h,f)},B.prototype.setSpot=B.prototype.pi,B.prototype.union=B.prototype.nv,B.prototype.unionRect=B.prototype.Xc,B.prototype.unionPoint=B.prototype.Me,B.prototype.intersects=B.prototype.Hu,B.prototype.intersectsRect=B.prototype.Sc,B.prototype.intersect=B.prototype.Gu,B.prototype.intersectRect=B.prototype.ix,B.prototype.grow=B.prototype.oz,B.prototype.subtractMargin=B.prototype.jv,B.prototype.addMargin=B.prototype.fo,B.prototype.inflate=B.prototype.vc,B.prototype.offset=B.prototype.offset,B.prototype.contains=B.prototype.contains,B.prototype.containsRect=B.prototype.Ee,B.prototype.containsPoint=B.prototype.ba,B.prototype.equalsApprox=B.prototype.$a,B.prototype.equalTo=B.prototype.bi,B.prototype.equals=B.prototype.C,B.prototype.setSize=B.prototype.$z,B.prototype.setPoint=B.prototype.Wc,B.prototype.set=B.prototype.set,B.prototype.setTo=B.prototype.kg;var _o,ax,dg=[];function Bt(t,e,n,i){void 0===t?this.left=this.bottom=this.right=this.top=0:void 0===e?this.left=this.bottom=this.right=this.top=t:void 0===n?(this.top=t,this.right=e,this.bottom=t,this.left=e):void 0!==i?(this.top=t,this.right=e,this.bottom=n,this.left=i):Y("Invalid arguments to Margin constructor: "+t+", "+e+", "+n+", "+i),this._isFrozen=!1}function Fi(t){if("string"==typeof t){t=t.split(" ");for(var e=0,n=NaN;""===t[e];)e++;var i=t[e++];if(i&&(n=parseFloat(i)),isNaN(n))return new Bt;for(var l=NaN;""===t[e];)e++;if((i=t[e++])&&(l=parseFloat(i)),isNaN(l))return new Bt(n);for(var u=NaN;""===t[e];)e++;if((i=t[e++])&&(u=parseFloat(i)),isNaN(u))return new Bt(n,l);for(var h=NaN;""===t[e];)e++;return(i=t[e++])&&(h=parseFloat(i)),isNaN(h)?new Bt(n,l):new Bt(n,l,u,h)}return new Bt}function ux(t){return t.top.toString()+" "+t.right.toString()+" "+t.bottom.toString()+" "+t.left.toString()}B.className="Rect",B.parse=eh,B.stringify=tn,B.contains=ur,B.intersects=lx,B.ZeroRect=_o=new B(0,0,0,0).ha(),B.NoRect=ax=new B(NaN,NaN,NaN,NaN).ha(),B.parse=eh,B.stringify=tn,B.contains=ur,B.intersects=lx,Bt.prototype.assign=function(t){return this.top=t.top,this.right=t.right,this.bottom=t.bottom,this.left=t.left,this},Bt.prototype.kg=function(t,e,n,i){return this.top=t,this.right=e,this.bottom=n,this.left=i,this},Bt.prototype.set=function(t){return this.top=t.top,this.right=t.right,this.bottom=t.bottom,this.left=t.left,this},Bt.prototype.copy=function(){var t=new Bt;return t.top=this.top,t.right=this.right,t.bottom=this.bottom,t.left=this.left,t},(_=Bt.prototype).ha=function(){return this._isFrozen=!0,Object.freeze(this),this},_.J=function(){return this._isFrozen||Object.isFrozen(this)?this:this.copy().freeze()},_.freeze=function(){return this._isFrozen=!0,this},_.ja=function(){return Object.isFrozen(this)&&Y("cannot thaw constant: "+this),this._isFrozen=!1,this},_.toString=function(){return"Margin("+this.top+","+this.right+","+this.bottom+","+this.left+")"},_.C=function(t){return t instanceof Bt&&this.top===t.top&&this.right===t.right&&this.bottom===t.bottom&&this.left===t.left},_.bi=function(t,e,n,i){return this.top===t&&this.right===e&&this.bottom===n&&this.left===i},_.$a=function(t){return F.B(this.top,t.top)&&F.B(this.right,t.right)&&F.B(this.bottom,t.bottom)&&F.B(this.left,t.left)},_.v=function(){return isFinite(this.top)&&isFinite(this.right)&&isFinite(this.bottom)&&isFinite(this.left)},Bt.alloc=function(){var t=oo.pop();return void 0===t?new Bt:t},Bt.free=function(t){oo.push(t)},Bt.prototype.isReal=Bt.prototype.v,Bt.prototype.equalsApprox=Bt.prototype.$a,Bt.prototype.equalTo=Bt.prototype.bi,Bt.prototype.equals=Bt.prototype.C,Bt.prototype.set=Bt.prototype.set,Bt.prototype.setTo=Bt.prototype.kg;var nh,Kt,Ne,Oe,Br,hr,Ur,ut,ce,gn,Ji,cr,ii,Ms,En,Cl,ih,ve,Cc,Qa,pd,la,fr,rh,qa,qo,tu,Hn,In,hx,pg,gd,dr,Ri,di,pi,pr,Jy,oo=[];function it(t,e,n,i){void 0===t?this.offsetY=this.offsetX=this.y=this.x=0:(void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=0),this.x=t,this.y=e,this.offsetX=n,this.offsetY=i),this._isFrozen=!1}function fn(t,e){return t.x=NaN,t.y=NaN,t.offsetX=e,t}function ts(t){if("string"==typeof t){if("None"===(t=t.trim()))return Ne;if("TopLeft"===t)return Oe;if("Top"===t||"TopCenter"===t||"MiddleTop"===t)return Br;if("TopRight"===t)return hr;if("Left"===t||"LeftCenter"===t||"MiddleLeft"===t)return Ur;if("Center"===t)return ut;if("Right"===t||"RightCenter"===t||"MiddleRight"===t)return ce;if("BottomLeft"===t)return gn;if("Bottom"===t||"BottomCenter"===t||"MiddleBottom"===t)return Ji;if("BottomRight"===t)return cr;if("TopSide"===t)return ii;if("LeftSide"===t)return Ms;if("RightSide"===t)return En;if("BottomSide"===t)return Cl;if("TopBottomSides"===t)return ih;if("LeftRightSides"===t)return ve;if("TopLeftSides"===t)return Cc;if("TopRightSides"===t)return Qa;if("BottomLeftSides"===t)return pd;if("BottomRightSides"===t)return la;if("NotTopSide"===t)return fr;if("NotLeftSide"===t)return rh;if("NotRightSide"===t)return qa;if("NotBottomSide"===t)return qo;if("AllSides"===t)return tu;if("Default"===t)return Hn;t=t.split(" ");for(var e=0,n=0;""===t[e];)e++;var i=t[e++];void 0!==i&&0<i.length&&(n=parseFloat(i));for(var l=0;""===t[e];)e++;void 0!==(i=t[e++])&&0<i.length&&(l=parseFloat(i));for(var u=0;""===t[e];)e++;void 0!==(i=t[e++])&&0<i.length&&(u=parseFloat(i));for(var h=0;""===t[e];)e++;return void 0!==(i=t[e++])&&0<i.length&&(h=parseFloat(i)),new it(n,l,u,h)}return new it}function gg(t){return t.pb()?t.x.toString()+" "+t.y.toString()+" "+t.offsetX.toString()+" "+t.offsetY.toString():t.toString()}Bt.className="Margin",Bt.parse=Fi,Bt.stringify=ux,Bt.ZeroMargin=nh=new Bt(0,0,0,0).ha(),Bt.TwoMargin=Kt=new Bt(2,2,2,2).ha(),Bt.parse=Fi,Bt.stringify=ux,it.prototype.assign=function(t){return this.x=t.x,this.y=t.y,this.offsetX=t.offsetX,this.offsetY=t.offsetY,this},it.prototype.kg=function(t,e,n,i){return this.x=t,this.y=e,this.offsetX=n,this.offsetY=i,this},it.prototype.set=function(t){return this.x=t.x,this.y=t.y,this.offsetX=t.offsetX,this.offsetY=t.offsetY,this},it.prototype.copy=function(){var t=new it;return t.x=this.x,t.y=this.y,t.offsetX=this.offsetX,t.offsetY=this.offsetY,t},(_=it.prototype).ha=function(){return this._isFrozen=!0,Object.freeze(this),this},_.J=function(){return this._isFrozen||Object.isFrozen(this)?this:this.copy().freeze()},_.freeze=function(){return this._isFrozen=!0,this},_.ja=function(){return Object.isFrozen(this)&&Y("cannot thaw constant: "+this),this._isFrozen=!1,this},_.toString=function(){return this.pb()?0===this.offsetX&&0===this.offsetY?"Spot("+this.x+","+this.y+")":"Spot("+this.x+","+this.y+","+this.offsetX+","+this.offsetY+")":this.C(Ne)?"None":this.C(Oe)?"TopLeft":this.C(Br)?"Top":this.C(hr)?"TopRight":this.C(Ur)?"Left":this.C(ut)?"Center":this.C(ce)?"Right":this.C(gn)?"BottomLeft":this.C(Ji)?"Bottom":this.C(cr)?"BottomRight":this.C(ii)?"TopSide":this.C(Ms)?"LeftSide":this.C(En)?"RightSide":this.C(Cl)?"BottomSide":this.C(ih)?"TopBottomSides":this.C(ve)?"LeftRightSides":this.C(Cc)?"TopLeftSides":this.C(Qa)?"TopRightSides":this.C(pd)?"BottomLeftSides":this.C(la)?"BottomRightSides":this.C(fr)?"NotTopSide":this.C(rh)?"NotLeftSide":this.C(qa)?"NotRightSide":this.C(qo)?"NotBottomSide":this.C(tu)?"AllSides":this.C(Hn)?"Default":"None"},_.C=function(t){return t instanceof it&&(this.x===t.x||isNaN(this.x)&&isNaN(t.x))&&(this.y===t.y||isNaN(this.y)&&isNaN(t.y))&&this.offsetX===t.offsetX&&this.offsetY===t.offsetY},_.Qu=function(){return new it(.5-(this.x-.5),.5-(this.y-.5),-this.offsetX,-this.offsetY)},_.xf=function(t){if(!this.Uc())return!1;if(!t.Uc())if(t.C(In))t=Ms;else if(t.C(hx))t=En;else if(t.C(pg))t=ii;else{if(!t.C(gd))return!1;t=Cl}return(this.offsetY&(t=t.offsetY))===t},_.pb=function(){return!isNaN(this.x)&&!isNaN(this.y)},_.Fc=function(){return isNaN(this.x)||isNaN(this.y)},_.Uc=function(){return isNaN(this.x)&&isNaN(this.y)&&1===this.offsetX&&0!==this.offsetY},_.Wr=function(){return isNaN(this.x)&&isNaN(this.y)&&0===this.offsetX&&0===this.offsetY},_.Sb=function(){return isNaN(this.x)&&isNaN(this.y)&&-1===this.offsetX&&0===this.offsetY},it.alloc=function(){var t=md.pop();return void 0===t?new it:t},it.free=function(t){md.push(t)},it.prototype.isDefault=it.prototype.Sb,it.prototype.isNone=it.prototype.Wr,it.prototype.isSide=it.prototype.Uc,it.prototype.isNoSpot=it.prototype.Fc,it.prototype.isSpot=it.prototype.pb,it.prototype.includesSide=it.prototype.xf,it.prototype.opposite=it.prototype.Qu,it.prototype.equals=it.prototype.C,it.prototype.set=it.prototype.set,it.prototype.setTo=it.prototype.kg;var md=[];function Dt(){this.m11=1,this.m21=this.m12=0,this.m22=1,this.dy=this.dx=0}it.className="Spot",it.parse=ts,it.stringify=gg,it.None=Ne=fn(new it(0,0,0,0),0).ha(),it.Default=Hn=fn(new it(0,0,-1,0),-1).ha(),it.TopLeft=Oe=new it(0,0,0,0).ha(),it.TopCenter=Br=new it(.5,0,0,0).ha(),it.TopRight=hr=new it(1,0,0,0).ha(),it.LeftCenter=Ur=new it(0,.5,0,0).ha(),it.Center=ut=new it(.5,.5,0,0).ha(),it.RightCenter=ce=new it(1,.5,0,0).ha(),it.BottomLeft=gn=new it(0,1,0,0).ha(),it.BottomCenter=Ji=new it(.5,1,0,0).ha(),it.BottomRight=cr=new it(1,1,0,0).ha(),it.MiddleTop=dr=Br,it.MiddleLeft=Ri=Ur,it.MiddleRight=di=ce,it.MiddleBottom=pi=Ji,it.Top=pg=Br,it.Left=In=Ur,it.Right=hx=ce,it.Bottom=gd=Ji,it.TopSide=ii=fn(new it(0,0,1,1),1).ha(),it.LeftSide=Ms=fn(new it(0,0,1,2),1).ha(),it.RightSide=En=fn(new it(0,0,1,4),1).ha(),it.BottomSide=Cl=fn(new it(0,0,1,8),1).ha(),it.TopBottomSides=ih=fn(new it(0,0,1,9),1).ha(),it.LeftRightSides=ve=fn(new it(0,0,1,6),1).ha(),it.TopLeftSides=Cc=fn(new it(0,0,1,3),1).ha(),it.TopRightSides=Qa=fn(new it(0,0,1,5),1).ha(),it.BottomLeftSides=pd=fn(new it(0,0,1,10),1).ha(),it.BottomRightSides=la=fn(new it(0,0,1,12),1).ha(),it.NotTopSide=fr=fn(new it(0,0,1,14),1).ha(),it.NotLeftSide=rh=fn(new it(0,0,1,13),1).ha(),it.NotRightSide=qa=fn(new it(0,0,1,11),1).ha(),it.NotBottomSide=qo=fn(new it(0,0,1,7),1).ha(),it.AllSides=tu=fn(new it(0,0,1,15),1).ha(),pr=new it(.156,.156).ha(),Jy=new it(.844,.844).ha(),it.parse=ts,it.stringify=gg,Dt.prototype.set=function(t){return this.m11=t.m11,this.m12=t.m12,this.m21=t.m21,this.m22=t.m22,this.dx=t.dx,this.dy=t.dy,this},Dt.prototype.setTransform=function(t,e,n,i,l,u){return this.m11=t,this.m12=e,this.m21=n,this.m22=i,this.dx=l,this.dy=u,this},Dt.prototype.copy=function(){var t=new Dt;return t.m11=this.m11,t.m12=this.m12,t.m21=this.m21,t.m22=this.m22,t.dx=this.dx,t.dy=this.dy,t},Dt.prototype.toString=function(){return"Transform("+this.m11+","+this.m12+","+this.m21+","+this.m22+","+this.dx+","+this.dy+")"},Dt.prototype.C=function(t){return this.m11===t.m11&&this.m12===t.m12&&this.m21===t.m21&&this.m22===t.m22&&this.dx===t.dx&&this.dy===t.dy},Dt.prototype.Ur=function(){return 0===this.dx&&0===this.dy&&1===this.m11&&0===this.m12&&0===this.m21&&1===this.m22},Dt.prototype.reset=function(){return this.m11=1,this.m21=this.m12=0,this.m22=1,this.dy=this.dx=0,this},Dt.prototype.multiply=function(t){var e=this.m11*t.m11+this.m21*t.m12,n=this.m12*t.m11+this.m22*t.m12,i=this.m11*t.m21+this.m21*t.m22,l=this.m12*t.m21+this.m22*t.m22;return this.dx=this.m11*t.dx+this.m21*t.dy+this.dx,this.dy=this.m12*t.dx+this.m22*t.dy+this.dy,this.m11=e,this.m12=n,this.m21=i,this.m22=l,this},Dt.prototype.Ou=function(t){var e=1/(t.m11*t.m22-t.m12*t.m21),n=t.m22*e,i=-t.m12*e,l=-t.m21*e,u=t.m11*e,h=e*(t.m21*t.dy-t.m22*t.dx);return t=e*(t.m12*t.dx-t.m11*t.dy),e=this.m11*n+this.m21*i,n=this.m12*n+this.m22*i,i=this.m11*l+this.m21*u,l=this.m12*l+this.m22*u,this.dx=this.m11*h+this.m21*t+this.dx,this.dy=this.m12*h+this.m22*t+this.dy,this.m11=e,this.m12=n,this.m21=i,this.m22=l,this},Dt.prototype.Tr=function(){var t=1/(this.m11*this.m22-this.m12*this.m21),e=-this.m12*t,n=-this.m21*t,i=this.m11*t,l=t*(this.m21*this.dy-this.m22*this.dx),u=t*(this.m12*this.dx-this.m11*this.dy);return this.m11=this.m22*t,this.m12=e,this.m21=n,this.m22=i,this.dx=l,this.dy=u,this},Dt.prototype.rotate=function(t,e,n){if(360<=t?t-=360:0>t&&(t+=360),0===t)return this;if(this.translate(e,n),90===t){t=0;var i=1}else 180===t?(t=-1,i=0):270===t?(t=0,i=-1):(i=t*Math.PI/180,t=Math.cos(i),i=Math.sin(i));var l=this.m12*t+this.m22*i,u=this.m11*-i+this.m21*t,h=this.m12*-i+this.m22*t;return this.m11=this.m11*t+this.m21*i,this.m12=l,this.m21=u,this.m22=h,this.translate(-e,-n),this},(_=Dt.prototype).translate=function(t,e){return this.dx+=this.m11*t+this.m21*e,this.dy+=this.m12*t+this.m22*e,this},_.scale=function(t,e){return void 0===e&&(e=t),this.m11*=t,this.m12*=t,this.m21*=e,this.m22*=e,this},_.Fa=function(t){var e=t.x,n=t.y;return t.h(e*this.m11+n*this.m21+this.dx,e*this.m12+n*this.m22+this.dy)},_.Ld=function(t){var e=1/(this.m11*this.m22-this.m12*this.m21),n=t.x,i=t.y;return t.h(n*this.m22*e+i*-this.m21*e+e*(this.m21*this.dy-this.m22*this.dx),n*-this.m12*e+i*this.m11*e+e*(this.m12*this.dx-this.m11*this.dy))},_.Fw=function(t){var e=1/(this.m11*this.m22-this.m12*this.m21),n=1.25*t.x,i=1.2*t.y;return t.h(n*this.m22*e+i*-this.m21*e+e*(this.m21*this.dy-this.m22*this.dx),n*-this.m12*e+i*this.m11*e+e*(this.m12*this.dx-this.m11*this.dy))},_.So=function(t){var e=t.x,n=t.y,i=e+t.width,l=n+t.height,u=this.m11,h=this.m12,f=this.m21,p=this.m22,g=this.dx,m=this.dy,v=e*u+n*f+g,x=e*h+n*p+m,D=i*u+n*f+g,M=i*h+n*p+m;return n=e*u+l*f+g,e=e*h+l*p+m,u=i*u+l*f+g,i=i*h+l*p+m,l=Math.min(v,D),v=Math.max(v,D),D=Math.min(x,M),x=Math.max(x,M),l=Math.min(l,n),v=Math.max(v,n),D=Math.min(D,e),x=Math.max(x,e),l=Math.min(l,u),v=Math.max(v,u),D=Math.min(D,i),x=Math.max(x,i),t.h(l,D,v-l,x-D),t},Dt.alloc=function(){var t=Ds.pop();return void 0===t?new Dt:t},Dt.free=function(t){Ds.push(t)},Dt.prototype.transformRect=Dt.prototype.So,Dt.prototype.transformPoint=Dt.prototype.Fa,Dt.prototype.scale=Dt.prototype.scale,Dt.prototype.translate=Dt.prototype.translate,Dt.prototype.rotate=Dt.prototype.rotate,Dt.prototype.invert=Dt.prototype.Tr,Dt.prototype.multiplyInverted=Dt.prototype.Ou,Dt.prototype.multiply=Dt.prototype.multiply,Dt.prototype.reset=Dt.prototype.reset,Dt.prototype.isIdentity=Dt.prototype.Ur,Dt.prototype.equals=Dt.prototype.C,Dt.prototype.setTransform=Dt.prototype.setTransform,Dt.prototype.set=Dt.prototype.set;var Ds=[];Dt.className="Transform",Dt.xF="54a702f3e53909c447824c6706603faf4c";var F={jA:"7da71ca0ad381e90",ng:(Math.sqrt(2)-1)/3*4,yv:null,sqrt:function(t){if(0>=t)return 0;var e=F.yv;if(null===e){e=[];for(var n=0;2e3>=n;n++)e[n]=Math.sqrt(n);F.yv=e}return 1>t?2e3>=(n=1/t)?1/e[0|n]:Math.sqrt(t):2e3>=t?e[0|t]:Math.sqrt(t)},B:function(t,e){return.5>(t-=e)&&-.5<t},ca:function(t,e){return 5e-8>(t-=e)&&-5e-8<t},Tb:function(t,e,n,i,l,u,h){if(0>=l&&(l=1e-6),t<n)var f=t,p=n;else f=n,p=t;if(e<i)var g=e,m=i;else g=i,m=e;if(t===n)return g<=h&&h<=m&&t-l<=u&&u<=t+l;if(e===i)return f<=u&&u<=p&&e-l<=h&&h<=e+l;if(p+=l,(f-=l)<=u&&u<=p&&(m+=l,(g-=l)<=h&&h<=m))if(p-f>m-g){if(!(t-n>l||n-t>l))return!0;if((u=(i-e)/(n-t)*(u-t)+e)-l<=h&&h<=u+l)return!0}else{if(!(e-i>l||i-e>l))return!0;if((h=(n-t)/(i-e)*(h-e)+t)-l<=u&&u<=h+l)return!0}return!1},Br:function(t,e,n,i,l,u,h,f,p,g,m,v){if(F.Tb(t,e,h,f,v,n,i)&&F.Tb(t,e,h,f,v,l,u))return F.Tb(t,e,h,f,v,g,m);var x=(t+n)/2,D=(e+i)/2,M=(n+l)/2,T=(i+u)/2,N=((i=(x+M)/2)+(M=(M+(l=(l+h)/2))/2))/2,I=((n=(D+T)/2)+(T=(T+(u=(u+f)/2))/2))/2;return F.Br(t,e,x,D,i,n,N,I,p,g,m,v)||F.Br(N,I,M,T,l,u,h,f,p,g,m,v)},Gw:function(t,e,n,i,l,u,h,f,p){var g=(n+l)/2,m=(i+u)/2;return p.h((((t+n)/2+g)/2+(g+(l+h)/2)/2)/2,(((e+i)/2+m)/2+(m+(u+f)/2)/2)/2),p},ty:function(t,e,n,i,l,u,h,f){var p=(n+l)/2,g=(i+u)/2;return Yy(((t+n)/2+p)/2,((e+i)/2+g)/2,(p+(l+h)/2)/2,(g+(u+f)/2)/2)},ql:function(t,e,n,i,l,u,h,f,p,g){if(F.Tb(t,e,h,f,p,n,i)&&F.Tb(t,e,h,f,p,l,u))He(g,t,e,0,0),He(g,h,f,0,0);else{var m=(t+n)/2,v=(e+i)/2,x=(n+l)/2,D=(i+u)/2,M=((i=(m+x)/2)+(x=(x+(l=(l+h)/2))/2))/2,T=((n=(v+D)/2)+(D=(D+(u=(u+f)/2))/2))/2;F.ql(t,e,m,v,i,n,M,T,p,g),F.ql(M,T,x,D,l,u,h,f,p,g)}return g},De:function(t,e,n,i,l,u,h,f,p,g){if(F.Tb(t,e,h,f,p,n,i)&&F.Tb(t,e,h,f,p,l,u))0===g.length&&(g.push(t),g.push(e)),g.push(h),g.push(f);else{var m=(t+n)/2,v=(e+i)/2,x=(n+l)/2,D=(i+u)/2,M=((i=(m+x)/2)+(x=(x+(l=(l+h)/2))/2))/2,T=((n=(v+D)/2)+(D=(D+(u=(u+f)/2))/2))/2;F.De(t,e,m,v,i,n,M,T,p,g),F.De(M,T,x,D,l,u,h,f,p,g)}return g},Tu:function(t,e,n,i,l,u,h,f,p,g){if(F.Tb(t,e,l,u,g,n,i))return F.Tb(t,e,l,u,g,f,p);var m=(t+n)/2,v=(e+i)/2,x=(m+(n=(n+l)/2))/2,D=(v+(i=(i+u)/2))/2;return F.Tu(t,e,m,v,x,D,h,f,p,g)||F.Tu(x,D,n,i,l,u,h,f,p,g)},yA:function(t,e,n,i,l,u,h){return h.h(((t+n)/2+(n+l)/2)/2,((e+i)/2+(i+u)/2)/2),h},Su:function(t,e,n,i,l,u,h,f){if(F.Tb(t,e,l,u,h,n,i))He(f,t,e,0,0),He(f,l,u,0,0);else{var p=(t+n)/2,g=(e+i)/2,m=(p+(n=(n+l)/2))/2,v=(g+(i=(i+u)/2))/2;F.Su(t,e,p,g,m,v,h,f),F.Su(m,v,n,i,l,u,h,f)}return f},Go:function(t,e,n,i,l,u,h,f){if(F.Tb(t,e,l,u,h,n,i))0===f.length&&(f.push(t),f.push(e)),f.push(l),f.push(u);else{var p=(t+n)/2,g=(e+i)/2,m=(p+(n=(n+l)/2))/2,v=(g+(i=(i+u)/2))/2;F.Go(t,e,p,g,m,v,h,f),F.Go(m,v,n,i,l,u,h,f)}return f},io:function(t,e,n,i,l,u,h,f,p,g,m,v,x,D){if(F.Tb(t,e,h,f,x,n,i)&&F.Tb(t,e,h,f,x,l,u))return!(!F.zl(t,e,h,f,p,g,m,v)||(x=(t-h)*(g-v)-(e-f)*(p-m),0===x)||(D.h(((t*f-e*h)*(p-m)-(t-h)*(p*v-g*m))/x,((t*f-e*h)*(g-v)-(e-f)*(p*v-g*m))/x),0));var M=(t+n)/2,T=(e+i)/2,N=(n+l)/2,I=(i+u)/2,k=((i=(M+N)/2)+(N=(N+(l=(l+h)/2))/2))/2,O=((n=(T+I)/2)+(I=(I+(u=(u+f)/2))/2))/2,L=1/0,b=!1,U=0,X=0;return F.io(t,e,M,T,i,n,k,O,p,g,m,v,x,D)&&(t=(D.x-p)*(D.x-p)+(D.y-g)*(D.y-g))<L&&(L=t,b=!0,U=D.x,X=D.y),F.io(k,O,N,I,l,u,h,f,p,g,m,v,x,D)&&(D.x-p)*(D.x-p)+(D.y-g)*(D.y-g)<L&&(b=!0,U=D.x,X=D.y),b&&(D.x=U,D.y=X),b},jo:function(t,e,n,i,l,u,h,f,p,g,m,v,x){var D=0;if(F.Tb(t,e,h,f,x,n,i)&&F.Tb(t,e,h,f,x,l,u)){if(0==(x=(t-h)*(g-v)-(e-f)*(p-m)))return D;var M=((t*f-e*h)*(p-m)-(t-h)*(p*v-g*m))/x,T=((t*f-e*h)*(g-v)-(e-f)*(p*v-g*m))/x;if(M>=m)return D;if((p>m?p-m:m-p)<(g>v?g-v:v-g)){if(e<f?(p=e,t=f):(p=f,t=e),T<p||T>t)return D}else if(t<h?(p=t,t=h):p=h,M<p||M>t)return D;0<x?D++:0>x&&D--}else{T=(e+i)/2;var N=(n+l)/2,I=(i+u)/2,k=((i=((M=(t+n)/2)+N)/2)+(N=(N+(l=(l+h)/2))/2))/2,O=((n=(T+I)/2)+(I=(I+(u=(u+f)/2))/2))/2;D+=F.jo(t,e,M,T,i,n,k,O,p,g,m,v,x),D+=F.jo(k,O,N,I,l,u,h,f,p,g,m,v,x)}return D},fh:function(t,e,n,i,l,u,h){return F.ca(t,n)?(e<i?(n=e,e=i):n=i,u<n?(h.h(t,n),!1):u>e?(h.h(t,e),!1):(h.h(t,u),!0)):F.ca(e,i)?(t<n?(i=t,t=n):i=n,l<i?(h.h(i,e),!1):l>t?(h.h(t,e),!1):(h.h(l,e),!0)):-5e-6>(l=((t-l)*(t-n)+(e-u)*(e-i))/((n-t)*(n-t)+(i-e)*(i-e)))?(h.h(t,e),!1):1.000005<l?(h.h(n,i),!1):(h.h(t+l*(n-t),e+l*(i-e)),!0)},Je:function(t,e,n,i,l,u,h,f,p){return F.B(t,n)&&F.B(e,i)?(p.h(t,e),!1):F.ca(l,h)?F.ca(t,n)?(F.fh(t,e,n,i,l,u,p),!1):F.fh(t,e,n,i,l,(i-e)/(n-t)*(l-t)+e,p):(f=(f-u)/(h-l),F.ca(t,n)?(n=f*(t-l)+u,e<i?(l=e,e=i):l=i,n<l?(p.h(t,l),!1):n>e?(p.h(t,e),!1):(p.h(t,n),!0)):F.ca(f,h=(i-e)/(n-t))?(F.fh(t,e,n,i,l,u,p),!1):(l=(h*t-f*l+u-e)/(h-f),F.ca(h,0)?(t<n?(i=t,t=n):i=n,l<i?(p.h(i,e),!1):l>t?(p.h(t,e),!1):(p.h(l,e),!0)):F.fh(t,e,n,i,l,h*(l-t)+e,p)))},wA:function(t,e,n,i,l){return F.Je(n.x,n.y,i.x,i.y,t.x,t.y,e.x,e.y,l)},uA:function(t,e,n,i,l,u,h,f,p,g){function m(N,I){var k=(N-t)*(N-t)+(I-e)*(I-e);k<v&&(v=k,p.h(N,I))}var v=1/0;m(p.x,p.y);var x=0,D=0,M=0,T=0;if(l<h?(x=l,D=h):(x=h,D=l),u<f?(M=l,T=h):(M=h,T=l),x=(D-x)/2+g,g=(T-M)/2+g,l=(l+h)/2,u=(u+f)/2,0===x||0===g)return p;if(.5>(n>t?n-t:t-n)){if(0>(x=1-(n-l)*(n-l)/(x*x)))return p;i=-g*(x=Math.sqrt(x))+u,m(n,g*x+u),m(n,i)}else{if(0>(x=(f=2*(n=(i-e)/(n-t))*(e-n*t)/(g*g)-2*n*u/(g*g)-2*l/(x*x))*f-4*(i=1/(x*x)+n*n/(g*g))*(2*n*t*u/(g*g)-2*e*u/(g*g)+u*u/(g*g)+l*l/(x*x)-1+(e-n*t)*(e-n*t)/(g*g))))return p;m(g=(-f+(x=Math.sqrt(x)))/(2*i),n*g-n*t+e),m(x=(-f-x)/(2*i),n*x-n*t+e)}return p},wf:function(t,e,n,i,l,u,h,f,p){var g=1e21,m=t,v=e;if(F.Je(t,e,t,i,l,u,h,f,p)){var x=(p.x-l)*(p.x-l)+(p.y-u)*(p.y-u);x<g&&(g=x,m=p.x,v=p.y)}return F.Je(n,e,n,i,l,u,h,f,p)&&(x=(p.x-l)*(p.x-l)+(p.y-u)*(p.y-u))<g&&(g=x,m=p.x,v=p.y),F.Je(t,e,n,e,l,u,h,f,p)&&(e=(p.x-l)*(p.x-l)+(p.y-u)*(p.y-u))<g&&(g=e,m=p.x,v=p.y),F.Je(t,i,n,i,l,u,h,f,p)&&(t=(p.x-l)*(p.x-l)+(p.y-u)*(p.y-u))<g&&(g=t,m=p.x,v=p.y),p.h(m,v),1e21>g},tA:function(t,e,n,i,l,u,h,f,p){return h=l-h,l=0==(n=t-n)||0===h?0===n?(e=(u-f)/h)*(f=t)+(u-e*l):(u=(e-i)/n)*(f=l)+(e-u*t):(i=(e-i)/n)*(f=(u-(f=(u-f)/h)*l-(t=e-i*t))/(i-f))+t,p.h(f,l),p},Rr:function(t,e,n){return F.jx(t.x,t.y,t.width,t.height,e.x,e.y,n.x,n.y)},jx:function(t,e,n,i,l,u,h,f){var p=t+n,g=e+i;return l===h?(u<f?(h=u,u=f):h=f,t<=l&&l<=p&&h<=g&&u>=e):u===f?(l<h?(f=l,l=h):f=h,e<=u&&u<=g&&f<=p&&l>=t):!!(ur(t,e,n,i,l,u)||ur(t,e,n,i,h,f)||F.zl(t,e,p,e,l,u,h,f)||F.zl(p,e,p,g,l,u,h,f)||F.zl(p,g,t,g,l,u,h,f)||F.zl(t,g,t,e,l,u,h,f))},zl:function(t,e,n,i,l,u,h,f){return 0>=F.sl(t,e,n,i,l,u)*F.sl(t,e,n,i,h,f)&&0>=F.sl(l,u,h,f,t,e)*F.sl(l,u,h,f,n,i)},sl:function(t,e,n,i,l,u){return n-=t,0==(u=(t=l-t)*(i-=e)-(e=u-e)*n)&&0<(u=t*n+e*i)&&0>(u=(t-n)*n+(e-i)*i)&&(u=0),u},Eo:function(t){return 0>t&&(t+=360),360<=t&&(t-=360),t},Mw:function(t,e,n,i,l,u){var h=Math.PI;u||(i*=h/180,l*=h/180);var f=i>l?-1:1;u=[];var p=h/2,g=i;if(1e-5>(i=Math.min(2*h,Math.abs(l-i))))return p=g+f*Math.min(i,p),f=t+n*Math.cos(g),g=e+n*Math.sin(g),t+=n*Math.cos(p),e+=n*Math.sin(p),u.push([f,g,n=(f+t)/2,p=(g+e)/2,n,p,t,e]),u;for(;1e-5<i;)l=g+f*Math.min(i,p),u.push(F.Cy(n,g,l,t,e)),i-=Math.abs(l-g),g=l;return u},Cy:function(t,e,n,i,l){var u=(n-e)/2,h=t*Math.cos(u),f=t*Math.sin(u),p=-f,g=h*h+p*p,m=g+h*h+p*f;return f=h-(g=4/3*(Math.sqrt(2*g*m)-m)/(h*f-p*h))*p,p=-(h=p+g*h),g=u+e,u=Math.cos(g),g=Math.sin(g),[i+t*Math.cos(e),l+t*Math.sin(e),i+f*u-h*g,l+f*g+h*u,i+f*u-p*g,l+f*g+p*u,i+t*Math.cos(n),l+t*Math.sin(n)]},so:function(t,e,n,i,l,u,h){var f=n=Math.floor((t-n)/l)*l+n;return n+l-t<l/2&&(f=n+l),t=i=Math.floor((e-i)/u)*u+i,i+u-e<u/2&&(t=i+u),h.h(f,t),h},Xw:function(t,e){var i,n=Math.max(t,e);t=Math.min(t,e);do{e=n%t,n=i=t,t=e}while(0<e);return i},Hy:function(t,e,n,i){var l=0>n,u=0>i;if(t<e)var h=1,f=0;else h=0,f=1;var p=0===h?t:e,g=0===h?n:i;return(0===h?l:u)&&(g=-g),n=0===(h=f)?n:i,(0===h?l:u)&&(n=-n),F.Iy(p,0===h?t:e,g,n,0,0)},Iy:function(t,e,n,i,l,u){if(0<i)if(0<n){l=t*t,t*=n;var h=e*i,f=-(u=e*e)+h,p=-u+Math.sqrt(t*t+h*h);e=f;for(var g=0;9999999999>g&&(e=.5*(f+p))!==f&&e!==p;++g){var m=t/(e+l),v=h/(e+u);if(0<(m=m*m+v*v-1))f=e;else{if(!(0>m))break;p=e}}n=l*n/(e+l)-n,i=u*i/(e+u)-i,n=Math.sqrt(n*n+i*i)}else n=Math.abs(i-e);else(u=t*n)<(i=t*t-e*e)?(i=u/i,u=e*Math.sqrt(Math.abs(1-i*i)),n=t*i-n,n=Math.sqrt(n*n+u*u)):n=Math.abs(n-t);return n},Oe:new Vr,dm:new Vr,Df:new Vr,Ef:0,em:100};function K(t){wn(this),this.o=2,void 0===t&&(t=K.m),this.qa=t,this.yc=this.xc=this.hd=this.gd=0,t===K.m?this.Yd=new q:(null===K.W&&(K.W=(new q).freeze()),this.Yd=K.W),this.Ep=this.Yd.Ia,this.lp=(new B).freeze(),this.gm=this.gk=null,this.hm=NaN,this.Yf=Oe,this.Zf=cr,this.Gk=this.Hk=NaN,this.Kf=Ve}function cx(t,e){return t.type===K.j&&e.type===K.m&&!!(1===e.figures.count&&(e=e.figures.K(0),1===e.segments.count&&F.B(t.startX,e.startX)&&F.B(t.startY,e.startY)&&(e=e.segments.K(0),e.type===we&&F.B(t.endX,e.endX)&&F.B(t.endY,e.endY))))}function fx(t,e,n){switch(t.type){case K.j:case K.u:case K.F:n?e.h(t.gd,t.hd,0,0):He(e,t.gd,t.hd,0,0),He(e,t.xc,t.yc,0,0);break;case K.m:var i=t.figures;t=i.s,i=i.length;for(var l=0;l<i;l++){var u=t[l];n&&0===l?e.h(u.startX,u.startY,0,0):He(e,u.startX,u.startY,0,0);for(var h=u.segments.s,f=h.length,p=u.startX,g=u.startY,m=0;m<f;m++){var v=h[m];switch(v.type){case we:case To:He(e,p=v.endX,g=v.endY,0,0);break;case Hr:F.ql(p,g,v.point1X,v.point1Y,v.point2X,v.point2Y,v.endX,v.endY,.5,e),p=v.endX,g=v.endY;break;case Ss:F.Su(p,g,v.point1X,v.point1Y,v.endX,v.endY,.5,e),p=v.endX,g=v.endY;break;case en:case so:var x=v.type===en?Ml(v,u):oh(v,u,p,g),D=x.length;if(0===D){He(e,p=v.type===en?v.centerX:v.endX,g=v.type===en?v.centerY:v.endY,0,0);break}v=null;for(var M=0;M<D;M++)F.ql((v=x[M])[0],v[1],v[2],v[3],v[4],v[5],v[6],v[7],.5,e);null!==v&&(p=v[6],g=v[7]);break;default:Y("Unknown Segment type: "+v.type)}}}break;default:Y("Unknown Geometry type: "+t.type)}}function dx(t,e,n,i,l){var u=e.x;e=e.y;for(var p,g,m,v,h=t.bounds.x-20,f=0,x=t.figures.s,D=x.length,M=0;M<D;M++){var T=x[M];if(T.isFilled){if(i&&T.ba(u,e,n))return!0;for(var N=T.segments,I=p=T.startX,k=g=T.startY,O=N.s,L=0;L<=N.length;L++){var b=void 0;if(L!==N.length){var U=(b=O[L]).type;t=b.endX,v=b.endY}else U=we,t=I,v=k;switch(U){case To:if(I=Zy(u,e,h,e,p,g,I,k),isNaN(I))return!0;f+=I,I=t,k=v;break;case we:if(p=Zy(u,e,h,e,p,g,t,v),isNaN(p))return!0;f+=p;break;case Hr:f+=m=F.jo(p,g,b.point1X,b.point1Y,b.point2X,b.point2Y,t,v,h,e,u,e,.5);break;case Ss:f+=m=F.jo(p,g,(p+2*b.point1X)/3,(g+2*b.point1Y)/3,(2*b.point1X+t)/3,(2*b.point1Y+v)/3,t,v,h,e,u,e,.5);break;case en:case so:var X=(U=b.type===en?Ml(b,T):oh(b,T,p,g)).length;if(0===X){if(p=Zy(u,e,h,e,p,g,b.type===en?b.centerX:b.endX,b.type===en?b.centerY:b.endY),isNaN(p))return!0;f+=p;break}b=null;for(var nt=0;nt<X;nt++){if(b=U[nt],0===nt){if(m=Zy(u,e,h,e,p,g,b[0],b[1]),isNaN(m))return!0;f+=m}f+=m=F.jo(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],h,e,u,e,.5)}null!==b&&(t=b[6],v=b[7]);break;default:Y("Unknown Segment type: "+b.type)}p=t,g=v}if(0!==f)return!0;f=0}else if(T.ba(u,e,l?n:n+2))return!0}return 0!==f}function Zy(t,e,n,i,l,u,h,f){if(F.Tb(l,u,h,f,.05,t,e))return NaN;var p=(t-n)*(u-f);if(0===p)return 0;var g=((t*i-e*n)*(l-h)-(t-n)*(l*f-u*h))/p;if(e=(t*i-e*n)*(u-f)/p,g>=t)return 0;if((l>h?l-h:h-l)<(u>f?u-f:f-u)){if(u<f){if(e<u||e>f)return 0}else if(e<f||e>u)return 0}else if(l<h){if(g<l||g>h)return 0}else if(g<h||g>l)return 0;return 0<p?1:-1}function OM(t,e,n,i){for(var l=(t=t.figures.s).length,u=0;u<l;u++)if(t[u].ba(e,n,i))return!0;return!1}function LM(t){if(null===t.gk){var e=t.gk=[],n=t.gm=[],i=[],l=[];if(t.type===K.j)i.push(t.startX),i.push(t.startY),i.push(t.endX),i.push(t.endY),e.push(i),l.push(Math.sqrt((t.startX-t.endX)*(t.startX-t.endX)+(t.startY-t.endY)*(t.startY-t.endY))),n.push(l);else if(t.type===K.u)i.push(t.startX),i.push(t.startY),i.push(t.endX),i.push(t.startY),i.push(t.endX),i.push(t.endY),i.push(t.startX),i.push(t.endY),i.push(t.startX),i.push(t.startY),e.push(i),l.push(Math.abs(t.startX-t.endX)),l.push(Math.abs(t.startY-t.endY)),l.push(Math.abs(t.startX-t.endX)),l.push(Math.abs(t.startY-t.endY)),n.push(l);else if(t.type===K.F){var u=new Nn;u.startX=t.endX,u.startY=(t.startY+t.endY)/2;var h=new Lt(en);if(h.startAngle=0,h.sweepAngle=360,h.centerX=(t.startX+t.endX)/2,h.centerY=(t.startY+t.endY)/2,h.radiusX=Math.abs(t.startX-t.endX)/2,h.radiusY=Math.abs(t.startY-t.endY)/2,u.add(h),0===(l=(t=Ml(h,u)).length))i.push(h.centerX),i.push(h.centerY);else{h=u.startX,u=u.startY;for(var f=0;f<l;f++){var p=t[f];F.De(h,u,p[2],p[3],p[4],p[5],p[6],p[7],.5,i),h=p[6],u=p[7]}}e.push(i),n.push(px(i))}else for(t=t.figures.iterator;t.next();){(i=[]).push((l=t.value).startX),i.push(l.startY),f=h=l.startX,p=u=l.startY;for(var g=l.segments.s,m=g.length,v=0;v<m;v++){var x=g[v];switch(x.type){case To:4<=i.length&&(e.push(i),n.push(px(i))),(i=[]).push(x.endX),i.push(x.endY),f=h=x.endX,p=u=x.endY;break;case we:i.push(x.endX),i.push(x.endY),h=x.endX,u=x.endY;break;case Hr:F.De(h,u,x.point1X,x.point1Y,x.point2X,x.point2Y,x.endX,x.endY,.5,i),h=x.endX,u=x.endY;break;case Ss:F.Go(h,u,x.point1X,x.point1Y,x.endX,x.endY,.5,i),h=x.endX,u=x.endY;break;case en:var D=Ml(x,l),M=D.length;if(0===M){i.push(x.centerX),i.push(x.centerY),h=x.centerX,u=x.centerY;break}for(var T=0;T<M;T++){var N=D[T];F.De(h,u,N[2],N[3],N[4],N[5],N[6],N[7],.5,i),h=N[6],u=N[7]}break;case so:if(D=oh(x,l,h,u),T=x.endX,N=x.endY,0===(M=D.length)){i.push(T),i.push(N),h=T,u=N;break}for(T=0;T<M;T++)F.De(h,u,(N=D[T])[2],N[3],N[4],N[5],N[6],N[7],.5,i),h=N[6],u=N[7];break;default:Y("Segment not of valid type: "+x.type)}x.isClosed&&(i.push(f),i.push(p))}4<=i.length&&(e.push(i),n.push(px(i)))}}}function px(t){for(var e=[],n=0,i=0,l=t.length,u=0;u<l;u+=2){var h=t[u],f=t[u+1];0!==u&&e.push(Math.sqrt(Cs(n,i,h,f))),n=h,i=f}return e}function Nn(t,e,n,i){wn(this),void 0===n&&(n=!0),void 0===i&&(i=!0),this.o=2|(n?4:0)|(i?8:0),this.gd=void 0!==t?t:0,this.hd=void 0!==e?e:0,this.el=new q,this.Pq=this.el.Ia,this.Kv=null}function Lt(t,e,n,i,l,u,h,f){wn(this),void 0===t&&(t=we),this.qa=t,this.o=2,this.xc=void 0!==e?e:0,this.yc=void 0!==n?n:0,void 0===i&&(i=0),void 0===l&&(l=0),void 0===u&&(u=0),void 0===h&&(h=0),t===so?(0>(t=u%360)&&(t+=360),this.Be=t,this.Oh=0,this.Ph=Math.max(i,0),this.Gg=Math.max(l,0),"boolean"==typeof h?h&&(this.isLargeArc=!0):"number"==typeof h&&h&&(this.isLargeArc=!0),f&&(this.isClockwiseArc=!0)):(this.Be=i,this.Oh=l,t===en&&(u=Math.max(u,0)),this.Ph=u,"number"==typeof h?(t===en&&(h=Math.max(h,0)),this.Gg=h):this.Gg=0),this.Ud=null}function Ml(t,e){if(null!==t.Ud&&!1===e._isInvalidBounds)return t.Ud;var n=t.radiusX,i=t.radiusY;if(void 0===i&&(i=n),0===n||0===i)return t.Ud=[],t.Ud;e=t.Be;var l=t.Oh,u=F.Mw(0,0,n<i?n:i,t.startAngle,t.startAngle+t.sweepAngle,!1);if(n!==i){var h=Dt.alloc();h.reset(),n<i?h.scale(1,i/n):h.scale(n/i,1),K.Ga(u,h),Dt.free(h)}for(n=u.length,i=0;i<n;i++)(h=u[i])[0]+=e,h[1]+=l,h[2]+=e,h[3]+=l,h[4]+=e,h[5]+=l,h[6]+=e,h[7]+=l;return t.Ud=u,t.Ud}function oh(t,e,n,i){function l(T,N,I,k){return(T*k<N*I?-1:1)*Math.acos((T*I+N*k)/(Math.sqrt(T*T+N*N)*Math.sqrt(I*I+k*k)))}if(null!==t.Ud&&!1===e._isInvalidBounds)return t.Ud;if(0===t.radiusX||0===t.radiusY)return t.Ud=[],t.Ud;var u=t.Gg;0===(e=t.Ph)&&(e=1e-4),0===u&&(u=1e-4);var h=Math.PI/180*t.Be,f=t.isLargeArc,p=t.isClockwiseArc,g=t.xc,m=t.yc,v=Math.cos(h),x=Math.sin(h),D=v*(n-g)/2+x*(i-m)/2,M=D*D/(e*e)+(h=-x*(n-g)/2+v*(i-m)/2)*h/(u*u);return 1<M&&(e*=Math.sqrt(M),u*=Math.sqrt(M)),M=(f===p?-1:1)*Math.sqrt((e*e*u*u-e*e*h*h-u*u*D*D)/(e*e*h*h+u*u*D*D)),isNaN(M)&&(M=0),f=M*e*h/u,M=M*-u*D/e,isNaN(f)&&(f=0),isNaN(M)&&(M=0),n=(n+g)/2+v*f-x*M,i=(i+m)/2+x*f+v*M,m=l(1,0,(D-f)/e,(h-M)/u),h=l(v=(D-f)/e,g=(h-M)/u,D=(-D-f)/e,f=(-h-M)/u),-1>=(D=(v*D+g*f)/(Math.sqrt(v*v+g*g)*Math.sqrt(D*D+f*f)))?h=Math.PI:1<=D&&(h=0),!p&&0<h&&(h-=2*Math.PI),p&&0>h&&(h+=2*Math.PI),p=e>u?1:e/u,D=e>u?u/e:1,e=F.Mw(0,0,e>u?e:u,m,m+h,!0),(u=Dt.alloc()).reset(),u.translate(n,i),u.rotate(t.Be,0,0),u.scale(p,D),K.Ga(e,u),Dt.free(u),t.Ud=e,t.Ud}F.za=F.jA,K.prototype.copy=function(){var t=new K;if(t.o=-2&this.o,t.qa=this.qa,t.gd=this.gd,t.hd=this.hd,t.xc=this.xc,t.yc=this.yc,this.qa===K.m){for(var e=this.Yd.s,n=t.Yd,i=0;i<e.length;i++)n.add(e[i].copy());t.Yd=n}else t.Yd=this.Yd;return t.Ep=this.Ep,t.lp.assign(this.lp),t.gk=this.gk,t.gm=this.gm,t.hm=this.hm,t.Yf=this.Yf.J(),t.Zf=this.Zf.J(),t.Hk=this.Hk,t.Gk=this.Gk,t.Kf=this.Kf,t},K.prototype.ha=function(){return this.freeze(),Object.freeze(this),this},K.prototype.freeze=function(){if(this._isFrozen=!0,this.type!==K.m)return this;var t=this.figures;t.freeze();for(var e=(t=t.s).length,n=0;n<e;n++)t[n].freeze();return this},K.prototype.ja=function(){if(Object.isFrozen(this)&&Y("cannot thaw constant: "+this),this._isFrozen=!1,this.type!==K.m)return this;var t=this.figures;t.ja();for(var e=(t=t.s).length,n=0;n<e;n++)t[n].ja();return this},K.prototype.$a=function(t){if(!(t instanceof K))return!1;if(this.type!==t.type)return this.type===K.j&&t.type===K.m?cx(this,t):t.type===K.j&&this.type===K.m&&cx(t,this);if(this.type===K.m){var e=this.figures.s,n=e.length;if(n!==(t=t.figures.s).length)return!1;for(var i=0;i<n;i++)if(!e[i].$a(t[i]))return!1;return!0}return F.B(this.startX,t.startX)&&F.B(this.startY,t.startY)&&F.B(this.endX,t.endX)&&F.B(this.endY,t.endY)},K.ga=function(t){return t.toString()},K.prototype.ob=function(t){t.classType===K&&(this.type=t)},K.prototype.toString=function(t){switch(void 0===t&&(t=-1),this.type){case K.j:return 0>t?"M"+this.startX.toString()+" "+this.startY.toString()+"L"+this.endX.toString()+" "+this.endY.toString():"M"+this.startX.toFixed(t)+" "+this.startY.toFixed(t)+"L"+this.endX.toFixed(t)+" "+this.endY.toFixed(t);case K.u:var e=new B(this.startX,this.startY,0,0);return e.nv(this.endX,this.endY,0,0),0>t?"M"+e.x.toString()+" "+e.y.toString()+"H"+e.right.toString()+"V"+e.bottom.toString()+"H"+e.left.toString()+"z":"M"+e.x.toFixed(t)+" "+e.y.toFixed(t)+"H"+e.right.toFixed(t)+"V"+e.bottom.toFixed(t)+"H"+e.left.toFixed(t)+"z";case K.F:if((e=new B(this.startX,this.startY,0,0)).nv(this.endX,this.endY,0,0),0>t)return"M"+(t=e.left.toString()+" "+(e.y+e.height/2).toString())+"A"+(e.width/2).toString()+" "+(e.height/2).toString()+" 0 0 1 "+e.right.toString()+" "+(e.y+e.height/2).toString()+"A"+(e.width/2).toString()+" "+(e.height/2).toString()+" 0 0 1 "+t;var n=e.left.toFixed(t)+" "+(e.y+e.height/2).toFixed(t);return"M"+n+"A"+(e.width/2).toFixed(t)+" "+(e.height/2).toFixed(t)+" 0 0 1 "+e.right.toFixed(t)+" "+(e.y+e.height/2).toFixed(t)+"A"+(e.width/2).toFixed(t)+" "+(e.height/2).toFixed(t)+" 0 0 1 "+n;case K.m:e="";for(var i=(n=this.figures.s).length,l=0;l<i;l++){var u=n[l];0<l&&(e+=" x "),u.isFilled&&(e+="F "),e+=u.toString(t)}return e;default:return this.type.toString()}},K.hb=function(t){for(var e=(t=t.split(/[Xx]/)).length,n="",i=0;i<e;i++){var l=t[i];n=null!==l.match(/[Ff]/)?0===i?n+l:n+"X"+(" "===l[0]?"":" ")+l:n+(0===i?"":"X ")+"F"+(" "===l[0]?"":" ")+l}return n},K.parse=function(t,e){function n(){return T>=L-1||null!==g[T+1].match(b)}function i(){return T++,g[T]}function l(G){var xt=parseFloat(i()),ft=parseFloat(i());N===N.toLowerCase()&&(xt=O.x+xt,ft=O.y+ft),G.h(xt,ft)}function u(){return l(O),O}function h(){return l(k),k}function f(){var G=I.toLowerCase();return"c"!==G&&"s"!==G&&"q"!==G&&"t"!==G?O:new P(2*O.x-k.x,2*O.y-k.y)}void 0===e&&(e=!1);var p=/([UuBbMmZzLlHhVvCcSsQqTtAaFfXx])([UuBbMmZzLlHhVvCcSsQqTtAaFfXx])/gm,g=(t=(t=(t=(t=(t=(t=(t=(t=t.replace(/,/gm," ")).replace(p,"$1 $2")).replace(p,"$1 $2")).replace(/([UuBbMmZzLlHhVvCcSsQqTtAaFfXx])([^s])/gm,"$1 $2")).replace(/([^s])([UuBbMmZzLlHhVvCcSsQqTtAaFfXx])/gm,"$1 $2")).replace(/([0-9])([+\-])/gm,"$1 $2")).replace(/[\s\r\t\n]+/gm," ")).replace(/^\s+|\s+$/g,"")).split(" ");for(t=0;t<g.length;t++){var m=g[t];if(null!==m.match(/(\.[0-9]*)(\.)/gm)){p=oe();for(var v="",x=!1,D=0;D<m.length;D++){var M=m[D];"."!==M||x?"."===M?(p.push(v),v="."):v+=M:(x=!0,v+=M)}for(p.push(v),g.splice(t,1),m=0;m<p.length;m++)g.splice(t+m,0,p[m]);t+=p.length-1,Nt(p)}}var T=-1,N="",I="";p=new P(0,0);var k=new P(0,0),O=new P(0,0),L=g.length;t=a1(null),v=m=!1,x=!0,D=null;for(var b=/[UuBbMmZzLlHhVvCcSsQqTtAaFfXx]/;!(T>=L-1);)if(I=N,""!==(N=i()))switch(N.toUpperCase()){case"X":x=!0,v=m=!1;break;case"M":for(D=u(),null===t.pc||!0===x?(sl(t,D.x,D.y,m,!v),x=!1):t.moveTo(D.x,D.y),p.assign(O);!n();)D=u(),t.lineTo(D.x,D.y);break;case"L":for(;!n();)D=u(),t.lineTo(D.x,D.y);break;case"H":for(;!n();)O=new P((N===N.toLowerCase()?O.x:0)+parseFloat(i()),O.y),t.lineTo(O.x,O.y);break;case"V":for(;!n();)O=new P(O.x,(N===N.toLowerCase()?O.y:0)+parseFloat(i())),t.lineTo(O.x,O.y);break;case"C":for(;!n();){l(D=new P),M=h();var U=u();ll(t,D.x,D.y,M.x,M.y,U.x,U.y)}break;case"S":for(;!n();)D=f(),M=h(),U=u(),ll(t,D.x,D.y,M.x,M.y,U.x,U.y);break;case"Q":for(;!n();)D=h(),M=u(),hm(t,D.x,D.y,M.x,M.y);break;case"T":for(;!n();)k=D=f(),M=u(),hm(t,D.x,D.y,M.x,M.y);break;case"B":for(;!n();){D=parseFloat(i()),M=parseFloat(i()),U=parseFloat(i());var X=parseFloat(i()),nt=parseFloat(i()),et=nt,Q=!1;n()||(et=parseFloat(i()),n()||(Q=0!==parseFloat(i()))),N===N.toLowerCase()&&(U+=O.x,X+=O.y),t.arcTo(D,M,U,X,nt,et,Q)}break;case"A":for(;!n();)D=Math.abs(parseFloat(i())),M=Math.abs(parseFloat(i())),U=parseFloat(i()),nt=X=!1,Q=et=0,1===(et=i()).length?(X=!!parseFloat(et),nt=!!parseFloat(i()),et=parseFloat(i())):2===et.length?(X=!!parseFloat(et[0]),nt=!!parseFloat(et[1]),et=parseFloat(i())):(X=!!parseFloat(et[0]),nt=!!parseFloat(et[1]),et=parseFloat(et.slice(2))),Q=parseFloat(i()),N===N.toLowerCase()&&(et=O.x+et,Q=O.y+Q),O.h(et,Q),o0(t,D,M,U,X,nt,et,Q);break;case"Z":r0(t),O.assign(p);break;case"F":for(D="",M=1;g[T+M];)if(null!==g[T+M].match(/[Uu]/))M++;else{if(null!==g[T+M].match(b)){D=g[T+M];break}M++}D.match(/[Mm]/)?m=!0:0<t.pc.segments.length&&(t.pc.isFilled=!0);break;case"U":for(D="",M=1;g[T+M];)if(null!==g[T+M].match(/[Ff]/))M++;else{if(null!==g[T+M].match(b)){D=g[T+M];break}M++}D.match(/[Mm]/)?v=!0:t.Xl(!1)}if(p=t.Lr,cm=t,e)for(e=p.figures.iterator;e.next();)e.value.isFilled=!0;return p},K.Ga=function(t,e){for(var n=t.length,i=P.alloc(),l=0;l<n;l++){var u=t[l];i.x=u[0],i.y=u[1],e.Fa(i),u[0]=i.x,u[1]=i.y,i.x=u[2],i.y=u[3],e.Fa(i),u[2]=i.x,u[3]=i.y,i.x=u[4],i.y=u[5],e.Fa(i),u[4]=i.x,u[5]=i.y,i.x=u[6],i.y=u[7],e.Fa(i),u[6]=i.x,u[7]=i.y}P.free(i)},K.prototype.Lu=function(){if(this._isInvalidBounds)return!0;if(this.type===K.m){if(this.Ep!==this.figures.Ia)return!0;for(var t=this.figures.s,e=t.length,n=0;n<e;n++)if(t[n].Lu())return!0}return!1},K.prototype.computeBounds=function(){if(this._isInvalidBounds=!1,this.gm=this.gk=null,this.hm=NaN,this.type===K.m){this.Ep=this.figures.Ia;for(var t=this.figures.s,e=t.length,n=0;n<e;n++){var i=t[n];i._isInvalidBounds=!1;var l=i.segments;i.Pq=l.Ia,l=(i=l.s).length;for(var u=0;u<l;u++){var h=i[u];h._isInvalidBounds=!1,h.Ud=null}}}(t=this.lp).ja(),isNaN(this.Hk)||isNaN(this.Gk)?t.h(0,0,0,0):t.h(0,0,this.Hk,this.Gk),fx(this,t,!1),He(t,0,0,0,0),t.freeze()},K.prototype.Lw=function(){var t=new B;return fx(this,t,!0),t},K.prototype.normalize=function(){this._isFrozen&&It(this);var t=this.Lw();return this.offset(-t.x,-t.y),new P(-t.x,-t.y)},K.prototype.offset=function(t,e){return this._isFrozen&&It(this),this.transform(1,0,0,1,t,e),this},K.prototype.scale=function(t,e){return this._isFrozen&&It(this),this.transform(t,0,0,e,0,0),this},K.prototype.rotate=function(t,e,n){this._isFrozen&&It(this),void 0===e&&(e=0),void 0===n&&(n=0);var i=Dt.alloc();return i.reset(),i.rotate(t,e,n),this.transform(i.m11,i.m12,i.m21,i.m22,i.dx,i.dy),Dt.free(i),this},(_=K.prototype).transform=function(t,e,n,i,l,u){switch(this.type){case K.j:case K.u:case K.F:var h=this.gd,f=this.hd;this.gd=h*t+f*n+l,this.hd=h*e+f*i+u,this.xc=(h=this.xc)*t+(f=this.yc)*n+l,this.yc=h*e+f*i+u;break;case K.m:for(var p=this.figures.s,g=p.length,m=0;m<g;m++){var v=p[m];v.startX=(h=v.startX)*t+(f=v.startY)*n+l,v.startY=h*e+f*i+u;for(var x=(v=v.segments.s).length,D=0;D<x;D++){var M=v[D];switch(M.type){case we:case To:M.endX=(h=M.endX)*t+(f=M.endY)*n+l,M.endY=h*e+f*i+u;break;case Hr:M.point1X=(h=M.point1X)*t+(f=M.point1Y)*n+l,M.point1Y=h*e+f*i+u,M.point2X=(h=M.point2X)*t+(f=M.point2Y)*n+l,M.point2Y=h*e+f*i+u,M.endX=(h=M.endX)*t+(f=M.endY)*n+l,M.endY=h*e+f*i+u;break;case Ss:M.point1X=(h=M.point1X)*t+(f=M.point1Y)*n+l,M.point1Y=h*e+f*i+u,M.endX=(h=M.endX)*t+(f=M.endY)*n+l,M.endY=h*e+f*i+u;break;case en:M.centerX=(h=M.centerX)*t+(f=M.centerY)*n+l,M.centerY=h*e+f*i+u,0!==e&&(0>(h=180*Math.atan2(e,t)/Math.PI)&&(h+=360),M.startAngle+=h),0>t&&(M.startAngle=180-M.startAngle,M.sweepAngle=-M.sweepAngle),0>i&&(M.startAngle=-M.startAngle,M.sweepAngle=-M.sweepAngle),M.radiusX*=Math.sqrt(t*t+n*n),void 0!==M.radiusY&&(M.radiusY*=Math.sqrt(e*e+i*i));break;case so:if(M.endX=(h=M.endX)*t+(f=M.endY)*n+l,M.endY=h*e+f*i+u,0===M.radiusX||0===M.radiusY)break;0!==e&&(0>(h=180*Math.atan2(e,t)/Math.PI)&&(h+=360),M.xAxisRotation+=h),0>t&&(M.xAxisRotation=180-M.xAxisRotation,M.isClockwiseArc=!M.isClockwiseArc),0>i&&(M.xAxisRotation=-M.xAxisRotation,M.isClockwiseArc=!M.isClockwiseArc),M.radiusX*=Math.sqrt(t*t+n*n),M.radiusY*=Math.sqrt(e*e+i*i);break;default:Y("Unknown Segment type: "+M.type)}}}}return this._isInvalidBounds=!0,this},_.ba=function(t,e){void 0===e&&(e=0);var n=this.gd,i=this.hd,l=this.xc,u=this.yc;switch(this.type){case K.j:return F.Tb(n,i,l,u,e,t.x,t.y);case K.u:var h=B.allocAt(Math.min(n,l)-e,Math.min(i,u)-e,Math.abs(l-n)+2*e,Math.abs(u-i)+2*e);return t=h.ba(t),B.free(h),t;case K.F:h=Math.min(n,l)-e;var f=Math.min(i,u)-e;return n=(Math.abs(l-n)+2*e)/2,e=(Math.abs(u-i)+2*e)/2,!(0>=n||0>=e)&&1>=(h=t.x-(h+n))*h/(n*n)+(f=t.y-(f+e))*f/(e*e);case K.m:return dx(this,t,e,!0,!1);default:return!1}},_.Bu=function(t,e){if(0>t?t=0:1<t&&(t=1),void 0===e&&(e=new P),this.type===K.j)return e.h(this.startX+t*(this.endX-this.startX),this.startY+t*(this.endY-this.startY)),e;for(var n=this.flattenedSegments,i=this.flattenedLengths,l=n.length,u=this.flattenedTotalLength*t,h=0,f=0;f<l;f++){var p=i[f],g=p.length;for(t=0;t<g;t++){var m=p[t];if(h+m>=u)return i=u-h,e.h((f=(n=n[f])[2*t])+(n[2*t+2]-f)*(i=0===m?0:i/m),(l=n[2*t+1])+(n[2*t+3]-l)*i),e;h+=m}}return e},_.Yw=function(t){if(0>t?t=0:1<t&&(t=1),this.type===K.j)return 180*Math.atan2(this.endY-this.startY,this.endX-this.startX)/Math.PI;for(var e=this.flattenedSegments,n=this.flattenedLengths,i=e.length,l=this.flattenedTotalLength*t,u=0,h=0;h<i;h++){var f=n[h],p=f.length;for(t=0;t<p;t++){var g=f[t];if(u+g>=l)return e=(l=e[h])[2*t],n=l[2*t+1],i=l[2*t+2],t=l[2*t+3],1>Math.abs(i-e)&&1>Math.abs(t-n)?0:1>Math.abs(i-e)?0<=t-n?90:270:1>Math.abs(t-n)?0<=i-e?0:180:180*Math.atan2(t-n,i-e)/Math.PI;u+=g}}return NaN},_.Cu=function(t,e){if(0>t?t=0:1<t&&(t=1),void 0===e&&(e=[]),e.length=3,this.type===K.j)return e[0]=this.startX+t*(this.endX-this.startX),e[1]=this.startY+t*(this.endY-this.startY),e[2]=180*Math.atan2(this.endY-this.startY,this.endX-this.startX)/Math.PI,e;for(var n=this.flattenedSegments,i=this.flattenedLengths,l=n.length,u=this.flattenedTotalLength*t,h=0,f=0;f<l;f++){var p=i[f],g=p.length;for(t=0;t<g;t++){var m=p[t];if(h+m>=u)return i=u-h,i=0===m?0:i/m,n=(m=n[f])[2*t],f=m[2*t+1],l=m[2*t+2],t=m[2*t+3],e[0]=n+(l-n)*i,e[1]=f+(t-f)*i,e[2]=1>Math.abs(l-n)&&1>Math.abs(t-f)?0:1>Math.abs(l-n)?0<=t-f?90:270:1>Math.abs(t-f)?0<=l-n?0:180:180*Math.atan2(t-f,l-n)/Math.PI,e;h+=m}}return e},_.Zw=function(t){if(this.type===K.j){var e=this.startX,n=this.startY,i=this.endX,l=this.endY;if(e!==i||n!==l){var u=t.x;if(t=t.y,e===i){if(n<l){var h=n;i=l}else h=l,i=n;return t<=h?h===n?0:1:t>=i?i===n?0:1:Math.abs(t-n)/(i-h)}if(n===l)return e<i?h=e:(h=i,i=e),u<=h?h===e?0:1:u>=i?i===e?0:1:Math.abs(u-e)/(i-h);h=(i-e)*(i-e)+(l-n)*(l-n);var f=P.alloc();return F.fh(e,n,i,l,u,t,f),t=f.x,u=f.y,P.free(f),Math.sqrt(((t-e)*(t-e)+(u-n)*(u-n))/h)}}else{if(this.type!==K.u){e=this.flattenedSegments,n=this.flattenedLengths,u=this.flattenedTotalLength,i=P.alloc(),l=1/0,f=h=0,p=e.length;for(var m=g=0,v=0;v<p;v++)for(var x=e[v],D=n[v],M=x.length,T=0;T<M;T+=2){var N=x[T],I=x[T+1];if(0!==T){F.fh(g,m,N,I,t.x,t.y,i);var k=(i.x-t.x)*(i.x-t.x)+(i.y-t.y)*(i.y-t.y);k<l&&(l=k,h=f,h+=Math.sqrt((i.x-g)*(i.x-g)+(i.y-m)*(i.y-m))),f+=D[(T-2)/2]}g=N,m=I}return P.free(i),0>(t=h/u)?0:1<t?1:t}f=this.startY;var p=this.endX;if(l=this.endY,(h=this.startX)!==p||f!==l){u=2*(e=p-h)+2*(n=l-f),i=t.x,t=t.y,i=Math.min(Math.max(i,h),p),t=Math.min(Math.max(t,f),l),h=Math.abs(i-h),p=Math.abs(i-p),f=Math.abs(t-f),l=Math.abs(t-l);var g=Math.min(h,p,f,l);if(g===f)return i/u;if(g===p)return(e+t)/u;if(g===l)return(2*e+n-i)/u;if(g===h)return(2*e+2*n-t)/u}}return 0},_.add=function(t){return this.Yd.add(t),this},_.Yl=function(t,e,n,i,l,u,h,f){return this._isFrozen&&It(this),this.Yf=new it(t,e,l,u).freeze(),this.Zf=new it(n,i,h,f).freeze(),this},Mt.Object.defineProperties(K.prototype,{_isFrozen:{get:function(){return 0!=(1&this.o)},set:function(t){this.o=t?1|this.o:-2&this.o}},_isInvalidBounds:{get:function(){return 0!=(2&this.o)},set:function(t){this.o=t?2|this.o:-3&this.o}},flattenedSegments:{get:function(){return LM(this),this.gk}},flattenedLengths:{get:function(){return LM(this),this.gm}},flattenedTotalLength:{get:function(){var t=this.hm;if(isNaN(t)){if(this.type===K.j){t=Math.abs(this.endX-this.startX);var e=Math.abs(this.endY-this.startY);t=Math.sqrt(t*t+e*e)}else if(this.type===K.u)t=2*Math.abs(this.endX-this.startX)+2*Math.abs(this.endY-this.startY);else for(var n=(e=this.flattenedLengths).length,i=t=0;i<n;i++)for(var l=e[i],u=l.length,h=0;h<u;h++)t+=l[h];this.hm=t}return t}},type:{get:function(){return this.qa},set:function(t){this.qa!==t&&(this._isFrozen&&It(this,t),this.qa=t,t===K.m?this.Yd=new q:(null===K.W&&(K.W=(new q).freeze()),this.Yd=K.W),this._isInvalidBounds=!0)}},startX:{get:function(){return this.gd},set:function(t){this.gd!==t&&(this._isFrozen&&It(this,t),this.gd=t,this._isInvalidBounds=!0)}},startY:{get:function(){return this.hd},set:function(t){this.hd!==t&&(this._isFrozen&&It(this,t),this.hd=t,this._isInvalidBounds=!0)}},endX:{get:function(){return this.xc},set:function(t){this.xc!==t&&(this._isFrozen&&It(this,t),this.xc=t,this._isInvalidBounds=!0)}},endY:{get:function(){return this.yc},set:function(t){this.yc!==t&&(this._isFrozen&&It(this,t),this.yc=t,this._isInvalidBounds=!0)}},figures:{get:function(){return this.Yd},set:function(t){this.Yd!==t&&(this._isFrozen&&It(this,t),this.Yd=t,this._isInvalidBounds=!0)}},spot1:{get:function(){return this.Yf},set:function(t){this._isFrozen&&It(this,t),this.Yf=t.J()}},spot2:{get:function(){return this.Zf},set:function(t){this._isFrozen&&It(this,t),this.Zf=t.J()}},defaultStretch:{get:function(){return this.Kf},set:function(t){this._isFrozen&&It(this,t),this.Kf=t}},bounds:{get:function(){return this.Lu()&&this.computeBounds(),this.lp}}}),K.prototype.setSpots=K.prototype.Yl,K.prototype.add=K.prototype.add,K.prototype.getFractionForPoint=K.prototype.Zw,K.prototype.getPointAndAngleAlongPath=K.prototype.Cu,K.prototype.getAngleAlongPath=K.prototype.Yw,K.prototype.getPointAlongPath=K.prototype.Bu,K.prototype.containsPoint=K.prototype.ba,K.prototype.transform=K.prototype.transform,K.prototype.rotate=K.prototype.rotate,K.prototype.scale=K.prototype.scale,K.prototype.offset=K.prototype.offset,K.prototype.normalize=K.prototype.normalize,K.prototype.computeBoundsWithoutOrigin=K.prototype.Lw,K.prototype.equalsApprox=K.prototype.$a,K.className="Geometry",K.j=new W(K,"Line",0),K.u=new W(K,"Rectangle",1),K.F=new W(K,"Ellipse",2),K.m=new W(K,"Path",3),K.W=null,K.cb="UuBbMmZzLlHhVvCcSsQqTtAaFfXx",K.className="Geometry",K.stringify=K.ga,K.fillPath=K.hb,K.parse=K.parse,K.Line=K.j,K.Rectangle=K.u,K.Ellipse=K.F,K.Path=K.m,Nn.prototype.copy=function(){var t=new Nn;t.o=-2&this.o,t.gd=this.gd,t.hd=this.hd;for(var e=this.el.s,n=e.length,i=t.el,l=0;l<n;l++){var u=e[l].copy();i.add(u)}return t.Pq=this.Pq,t.Kv=this.Kv,t},(_=Nn.prototype).$a=function(t){if(!(t instanceof Nn&&F.B(this.startX,t.startX)&&F.B(this.startY,t.startY)))return!1;var e=this.segments.s,n=e.length;if(n!==(t=t.segments.s).length)return!1;for(var i=0;i<n;i++)if(!e[i].$a(t[i]))return!1;return!0},_.toString=function(t){void 0===t&&(t=-1);for(var e=0>t?"M"+this.startX.toString()+" "+this.startY.toString():"M"+this.startX.toFixed(t)+" "+this.startY.toFixed(t),n=this.segments.s,i=n.length,l=0;l<i;l++)e+=" "+n[l].toString(t);return e},_.freeze=function(){this._isFrozen=!0;var t=this.segments;t.freeze();var e=t.s;t=t.length;for(var n=0;n<t;n++)e[n].freeze();return this},_.ja=function(){this._isFrozen=!1;var t=this.segments;t.ja();for(var e=(t=t.s).length,n=0;n<e;n++)t[n].ja();return this},_.Lu=function(){if(this._isInvalidBounds)return!0;var t=this.segments;if(this.Pq!==t.Ia)return!0;for(var e=(t=t.s).length,n=0;n<e;n++)if(t[n]._isInvalidBounds)return!0;return!1},_.add=function(t){return this.el.add(t),this},_.ba=function(t,e,n){for(var i=this.startX,l=this.startY,u=i,h=l,f=this.segments.s,p=f.length,g=0;g<p;g++){var m=f[g];switch(m.type){case To:u=m.endX,h=m.endY,i=m.endX,l=m.endY;break;case we:if(F.Tb(i,l,m.endX,m.endY,n,t,e))return!0;i=m.endX,l=m.endY;break;case Hr:if(F.Br(i,l,m.point1X,m.point1Y,m.point2X,m.point2Y,m.endX,m.endY,.5,t,e,n))return!0;i=m.endX,l=m.endY;break;case Ss:if(F.Tu(i,l,m.point1X,m.point1Y,m.endX,m.endY,.5,t,e,n))return!0;i=m.endX,l=m.endY;break;case en:case so:var v=m.type===en?Ml(m,this):oh(m,this,i,l),x=v.length,D=m.type===en?m.centerX:m.endX,M=m.type===en?m.centerY:m.endY;if(0===x){if(F.Tb(i,l,D,M,n,t,e))return!0;i=D,l=M;break}for(D=null,M=0;M<x;M++)if(D=v[M],0===M&&F.Tb(i,l,D[0],D[1],n,t,e)||F.Br(D[0],D[1],D[2],D[3],D[4],D[5],D[6],D[7],.5,t,e,n))return!0;null!==D&&(i=D[6],l=D[7]);break;default:Y("Unknown Segment type: "+m.type)}if(m.isClosed&&(i!==u||l!==h)&&F.Tb(i,l,u,h,n,t,e))return!0}return!1},Mt.Object.defineProperties(Nn.prototype,{_isFrozen:{get:function(){return 0!=(1&this.o)},set:function(t){this.o=t?1|this.o:-2&this.o}},_isInvalidBounds:{get:function(){return 0!=(2&this.o)},set:function(t){this.o=t?2|this.o:-3&this.o}},isFilled:{get:function(){return 0!=(4&this.o)},set:function(t){this._isFrozen&&It(this,t),this.o=t?4|this.o:-5&this.o}},isShadowed:{get:function(){return 0!=(8&this.o)},set:function(t){this._isFrozen&&It(this,t),this.o=t?8|this.o:-9&this.o}},startX:{get:function(){return this.gd},set:function(t){this._isFrozen&&It(this,t),this.gd=t,this._isInvalidBounds=!0}},startY:{get:function(){return this.hd},set:function(t){this._isFrozen&&It(this,t),this.hd=t,this._isInvalidBounds=!0}},segments:{get:function(){return this.el},set:function(t){this._isFrozen&&It(this,t),this.el=t,this._isInvalidBounds=!0}}}),Nn.prototype.add=Nn.prototype.add,Nn.prototype.equalsApprox=Nn.prototype.$a,Nn.className="PathFigure",Lt.prototype.copy=function(){var t=new Lt;return t.qa=this.qa,t.o=-2&this.o,t.xc=this.xc,t.yc=this.yc,t.Be=this.Be,t.Oh=this.Oh,t.Ph=this.Ph,t.Gg=this.Gg,t},(_=Lt.prototype).$a=function(t){if(!(t instanceof Lt)||this.type!==t.type||this.isClosed!==t.isClosed)return!1;switch(this.type){case To:case we:return F.B(this.endX,t.endX)&&F.B(this.endY,t.endY);case Hr:return F.B(this.endX,t.endX)&&F.B(this.endY,t.endY)&&F.B(this.point1X,t.point1X)&&F.B(this.point1Y,t.point1Y)&&F.B(this.point2X,t.point2X)&&F.B(this.point2Y,t.point2Y);case Ss:return F.B(this.endX,t.endX)&&F.B(this.endY,t.endY)&&F.B(this.point1X,t.point1X)&&F.B(this.point1Y,t.point1Y);case en:return F.B(this.startAngle,t.startAngle)&&F.B(this.sweepAngle,t.sweepAngle)&&F.B(this.centerX,t.centerX)&&F.B(this.centerY,t.centerY)&&F.B(this.radiusX,t.radiusX)&&F.B(this.radiusY,t.radiusY);case so:return this.isClockwiseArc===t.isClockwiseArc&&this.isLargeArc===t.isLargeArc&&F.B(this.xAxisRotation,t.xAxisRotation)&&F.B(this.endX,t.endX)&&F.B(this.endY,t.endY)&&F.B(this.radiusX,t.radiusX)&&F.B(this.radiusY,t.radiusY);default:return!1}},_.ob=function(t){t.classType===Lt&&(this.type=t)},_.toString=function(t){switch(void 0===t&&(t=-1),this.type){case To:t=0>t?"M"+this.endX.toString()+" "+this.endY.toString():"M"+this.endX.toFixed(t)+" "+this.endY.toFixed(t);break;case we:t=0>t?"L"+this.endX.toString()+" "+this.endY.toString():"L"+this.endX.toFixed(t)+" "+this.endY.toFixed(t);break;case Hr:t=0>t?"C"+this.point1X.toString()+" "+this.point1Y.toString()+" "+this.point2X.toString()+" "+this.point2Y.toString()+" "+this.endX.toString()+" "+this.endY.toString():"C"+this.point1X.toFixed(t)+" "+this.point1Y.toFixed(t)+" "+this.point2X.toFixed(t)+" "+this.point2Y.toFixed(t)+" "+this.endX.toFixed(t)+" "+this.endY.toFixed(t);break;case Ss:t=0>t?"Q"+this.point1X.toString()+" "+this.point1Y.toString()+" "+this.endX.toString()+" "+this.endY.toString():"Q"+this.point1X.toFixed(t)+" "+this.point1Y.toFixed(t)+" "+this.endX.toFixed(t)+" "+this.endY.toFixed(t);break;case en:t=0>t?"B"+this.startAngle.toString()+" "+this.sweepAngle.toString()+" "+this.centerX.toString()+" "+this.centerY.toString()+" "+this.radiusX.toString()+" "+this.radiusY.toString():"B"+this.startAngle.toFixed(t)+" "+this.sweepAngle.toFixed(t)+" "+this.centerX.toFixed(t)+" "+this.centerY.toFixed(t)+" "+this.radiusX.toFixed(t)+" "+this.radiusY.toFixed(t);break;case so:t=0>t?"A"+this.radiusX.toString()+" "+this.radiusY.toString()+" "+this.xAxisRotation.toString()+" "+(this.isLargeArc?1:0)+" "+(this.isClockwiseArc?1:0)+" "+this.endX.toString()+" "+this.endY.toString():"A"+this.radiusX.toFixed(t)+" "+this.radiusY.toFixed(t)+" "+this.xAxisRotation.toFixed(t)+" "+(this.isLargeArc?1:0)+" "+(this.isClockwiseArc?1:0)+" "+this.endX.toFixed(t)+" "+this.endY.toFixed(t);break;default:t=this.type.toString()}return t+(this.isClosed?"z":"")},_.freeze=function(){return this._isFrozen=!0,this},_.ja=function(){return this._isFrozen=!1,this},_.close=function(){return this.isClosed=!0,this},Mt.Object.defineProperties(Lt.prototype,{_isFrozen:{get:function(){return 0!=(1&this.o)},set:function(t){this.o=t?1|this.o:-2&this.o}},_isInvalidBounds:{get:function(){return 0!=(2&this.o)},set:function(t){this.o=t?2|this.o:-3&this.o}},isClosed:{get:function(){return 0!=(8&this.o)},set:function(t){this.isClosed!==t&&(this.o=t?8|this.o:-9&this.o,this._isInvalidBounds=!0)}},type:{get:function(){return this.qa},set:function(t){this._isFrozen&&It(this,t),this.qa=t,this._isInvalidBounds=!0}},endX:{get:function(){return this.xc},set:function(t){this._isFrozen&&It(this,t),this.xc=t,this._isInvalidBounds=!0}},endY:{get:function(){return this.yc},set:function(t){this._isFrozen&&It(this,t),this.yc=t,this._isInvalidBounds=!0}},point1X:{get:function(){return this.Be},set:function(t){this._isFrozen&&It(this,t),this.Be=t,this._isInvalidBounds=!0}},point1Y:{get:function(){return this.Oh},set:function(t){this._isFrozen&&It(this,t),this.Oh=t,this._isInvalidBounds=!0}},point2X:{get:function(){return this.Ph},set:function(t){this._isFrozen&&It(this,t),this.Ph=t,this._isInvalidBounds=!0}},point2Y:{get:function(){return this.Gg},set:function(t){this._isFrozen&&It(this,t),this.Gg=t,this._isInvalidBounds=!0}},centerX:{get:function(){return this.Be},set:function(t){this._isFrozen&&It(this,t),this.Be=t,this._isInvalidBounds=!0}},centerY:{get:function(){return this.Oh},set:function(t){this._isFrozen&&It(this,t),this.Oh=t,this._isInvalidBounds=!0}},radiusX:{get:function(){return this.Ph},set:function(t){0>t&&le(t,">= zero",Lt,"radiusX"),this._isFrozen&&It(this,t),this.Ph=t,this._isInvalidBounds=!0}},radiusY:{get:function(){return this.Gg},set:function(t){0>t&&le(t,">= zero",Lt,"radiusY"),this._isFrozen&&It(this,t),this.Gg=t,this._isInvalidBounds=!0}},startAngle:{get:function(){return this.xc},set:function(t){this._isFrozen&&It(this,t),0>(t%=360)&&(t+=360),this.xc=t,this._isInvalidBounds=!0}},sweepAngle:{get:function(){return this.yc},set:function(t){this._isFrozen&&It(this,t),360<t&&(t=360),-360>t&&(t=-360),this.yc=t,this._isInvalidBounds=!0}},isClockwiseArc:{get:function(){return 0!=(4&this.o)},set:function(t){this._isFrozen&&It(this,t),this.o=t?4|this.o:-5&this.o,this._isInvalidBounds=!0}},isLargeArc:{get:function(){return 0!=(16&this.o)},set:function(t){this._isFrozen&&It(this,t),this.o=t?16|this.o:-17&this.o,this._isInvalidBounds=!0}},xAxisRotation:{get:function(){return this.Be},set:function(t){this._isFrozen&&It(this,t),0>(t%=360)&&(t+=360),this.Be=t,this._isInvalidBounds=!0}}}),Lt.prototype.equalsApprox=Lt.prototype.$a;var To=new W(Lt,"Move",0),we=new W(Lt,"Line",1),Hr=new W(Lt,"Bezier",2),Ss=new W(Lt,"QuadraticBezier",3),en=new W(Lt,"Arc",4),so=new W(Lt,"SvgArc",4);function Zi(){this.H=null,this.cu=new P(0,0).freeze(),this.Os=new P(0,0).freeze(),this.ep=this.qq=0,this.fp=1,this.yh="",this.vr=this.xp=!1,this.vp=this.hp=0,this.og=this.Pp=this.Vp=!1,this.Cp=null,this.qr=0,this.sd=this.lr=null}function Mc(){this.H=null,this.va="",this.zq=this.hr=null}function Me(){this.nm=ee,this.df=this.pq="",this.sn=this.tn=this.yn=this.zn=this.xn=this.H=this.ac=null}Lt.className="PathSegment",Lt.Move=To,Lt.Line=we,Lt.Bezier=Hr,Lt.QuadraticBezier=Ss,Lt.Arc=en,Lt.SvgArc=so,Zi.prototype.copy=function(){var t=new Zi;return this.clone(t)},Zi.prototype.clone=function(t){return t.H=this.H,t.cu.assign(this.viewPoint),t.Os.assign(this.documentPoint),t.qq=this.qq,t.ep=this.ep,t.fp=this.fp,t.yh=this.yh,t.xp=this.xp,t.vr=this.vr,t.hp=this.hp,t.vp=this.vp,t.Vp=this.Vp,t.Pp=this.Pp,t.og=this.og,t.Cp=this.Cp,t.qr=this.qr,t.lr=this.lr,t.sd=this.sd,t},Zi.prototype.toString=function(){var t="^";return 0!==this.modifiers&&(t+="M:"+this.modifiers),0!==this.button&&(t+="B:"+this.button),""!==this.key&&(t+="K:"+this.key),0!==this.clickCount&&(t+="C:"+this.clickCount),0!==this.delta&&(t+="D:"+this.delta),this.handled&&(t+="h"),this.bubbles&&(t+="b"),null!==this.documentPoint&&(t+="@"+this.documentPoint.toString()),t},Zi.prototype.vo=function(t,e){var n=this.diagram;return null===n||HM(n,this.event,t,e),e},Zi.prototype.iz=function(t,e){var n=this.diagram;return null===n||(HM(n,this.event,t,e),e.assign(n.rs(e))),e},Mt.Object.defineProperties(Zi.prototype,{diagram:{get:function(){return this.H},set:function(t){this.H=t}},viewPoint:{get:function(){return this.cu},set:function(t){this.cu.assign(t)}},documentPoint:{get:function(){return this.Os},set:function(t){this.Os.assign(t)}},modifiers:{get:function(){return this.qq},set:function(t){this.qq=t}},button:{get:function(){return this.ep},set:function(t){if(this.ep=t,null===this.event)switch(t){case 0:this.buttons=1;break;case 1:this.buttons=4;break;case 2:this.buttons=2}}},buttons:{get:function(){return this.fp},set:function(t){this.fp=t}},key:{get:function(){return this.yh},set:function(t){this.yh=t}},down:{get:function(){return this.xp},set:function(t){this.xp=t}},up:{get:function(){return this.vr},set:function(t){this.vr=t}},clickCount:{get:function(){return this.hp},set:function(t){this.hp=t}},delta:{get:function(){return this.vp},set:function(t){this.vp=t}},isMultiTouch:{get:function(){return this.Vp},set:function(t){this.Vp=t}},handled:{get:function(){return this.Pp},set:function(t){this.Pp=t}},bubbles:{get:function(){return this.og},set:function(t){this.og=t}},event:{get:function(){return this.Cp},set:function(t){this.Cp=t}},isTouchEvent:{get:function(){var t=pt.TouchEvent,e=this.event;return!!(t&&e instanceof t)||(t=pt.PointerEvent)&&e instanceof t&&("touch"===e.pointerType||"pen"===e.pointerType)}},timestamp:{get:function(){return this.qr},set:function(t){this.qr=t}},targetDiagram:{get:function(){return this.lr},set:function(t){this.lr=t}},targetObject:{get:function(){return this.sd},set:function(t){this.sd=t}},control:{get:function(){return 0!=(1&this.modifiers)},set:function(t){this.modifiers=t?1|this.modifiers:-2&this.modifiers}},shift:{get:function(){return 0!=(4&this.modifiers)},set:function(t){this.modifiers=t?4|this.modifiers:-5&this.modifiers}},alt:{get:function(){return 0!=(2&this.modifiers)},set:function(t){this.modifiers=t?2|this.modifiers:-3&this.modifiers}},meta:{get:function(){return 0!=(8&this.modifiers)},set:function(t){this.modifiers=t?8|this.modifiers:-9&this.modifiers}},left:{get:function(){var t=this.event;return null===t||"mousedown"!==t.type&&"mouseup"!==t.type&&"pointerdown"!==t.type&&"pointerup"!==t.type?0!=(1&this.buttons):0===this.button},set:function(t){this.buttons=t?1|this.buttons:-2&this.buttons}},right:{get:function(){var t=this.event;return null===t||"mousedown"!==t.type&&"mouseup"!==t.type&&"pointerdown"!==t.type&&"pointerup"!==t.type?0!=(2&this.buttons):2===this.button},set:function(t){this.buttons=t?2|this.buttons:-3&this.buttons}},middle:{get:function(){var t=this.event;return null===t||"mousedown"!==t.type&&"mouseup"!==t.type&&"pointerdown"!==t.type&&"pointerup"!==t.type?0!=(4&this.buttons):1===this.button},set:function(t){this.buttons=t?4|this.buttons:-5&this.buttons}}}),Zi.prototype.getMultiTouchDocumentPoint=Zi.prototype.iz,Zi.prototype.getMultiTouchViewPoint=Zi.prototype.vo,Zi.className="InputEvent",Mc.prototype.copy=function(){var t=new Mc;return t.H=this.H,t.va=this.va,t.hr=this.hr,t.zq=this.zq,t},Mc.prototype.toString=function(){var t="*"+this.name;return null!==this.subject&&(t+=":"+this.subject.toString()),null!==this.parameter&&(t+="("+this.parameter.toString()+")"),t},Mt.Object.defineProperties(Mc.prototype,{diagram:{get:function(){return this.H},set:function(t){this.H=t}},name:{get:function(){return this.va},set:function(t){this.va=t}},subject:{get:function(){return this.hr},set:function(t){this.hr=t}},parameter:{get:function(){return this.zq},set:function(t){this.zq=t}}}),Mc.className="DiagramEvent",Me.prototype.clear=function(){this.sn=this.tn=this.yn=this.zn=this.xn=this.H=this.ac=null},Me.prototype.copy=function(){var t=new Me;t.nm=this.nm,t.pq=this.pq,t.df=this.df,t.ac=this.ac,t.H=this.H,t.xn=this.xn;var e=this.zn;return t.zn=jt(e)&&"function"==typeof e.J?e.J():e,t.yn=jt(e=this.yn)&&"function"==typeof e.J?e.J():e,t.tn=jt(e=this.tn)&&"function"==typeof e.J?e.J():e,t.sn=jt(e=this.sn)&&"function"==typeof e.J?e.J():e,t},Me.prototype.ob=function(t){t.classType===Me&&(this.change=t)},Me.prototype.toString=function(){var t="";return t=this.change===es?t+"* ":this.change===ee?t+(null!==this.model?"!m":"!d"):t+(null!==this.model?"!m":"!d")+this.change,this.propertyName&&"string"==typeof this.propertyName&&(t+=" "+this.propertyName),this.modelChange&&this.modelChange!==this.propertyName&&(t+=" "+this.modelChange),t+=": ",this.change===es?null!==this.oldValue&&(t+=" "+this.oldValue):(null!==this.object&&(t+=io(this.object)),null!==this.oldValue&&(t+="  old: "+io(this.oldValue)),null!==this.oldParam&&(t+=" "+this.oldParam),null!==this.newValue&&(t+="  new: "+io(this.newValue)),null!==this.newParam&&(t+=" "+this.newParam)),t},Me.prototype.I=function(t){return t?this.oldValue:this.newValue},Me.prototype.kz=function(t){return t?this.oldParam:this.newParam},Me.prototype.canUndo=function(){return null!==this.model||null!==this.diagram},Me.prototype.undo=function(){this.canUndo()&&(null!==this.model?this.model.changeState(this,!0):null!==this.diagram&&this.diagram.changeState(this,!0))},Me.prototype.canRedo=function(){return null!==this.model||null!==this.diagram},Me.prototype.redo=function(){this.canRedo()&&(null!==this.model?this.model.changeState(this,!1):null!==this.diagram&&this.diagram.changeState(this,!1))},Mt.Object.defineProperties(Me.prototype,{model:{get:function(){return this.ac},set:function(t){this.ac=t}},diagram:{get:function(){return this.H},set:function(t){this.H=t}},change:{get:function(){return this.nm},set:function(t){this.nm=t}},modelChange:{get:function(){return this.pq},set:function(t){this.pq=t}},propertyName:{get:function(){return this.df},set:function(t){this.df=t}},isTransactionFinished:{get:function(){return this.nm===es&&("CommittedTransaction"===this.df||"FinishedUndo"===this.df||"FinishedRedo"===this.df)}},object:{get:function(){return this.xn},set:function(t){this.xn=t}},oldValue:{get:function(){return this.zn},set:function(t){this.zn=t}},oldParam:{get:function(){return this.yn},set:function(t){this.yn=t}},newValue:{get:function(){return this.tn},set:function(t){this.tn=t}},newParam:{get:function(){return this.sn},set:function(t){this.sn=t}}}),Me.prototype.redo=Me.prototype.redo,Me.prototype.canRedo=Me.prototype.canRedo,Me.prototype.undo=Me.prototype.undo,Me.prototype.canUndo=Me.prototype.canUndo,Me.prototype.getParam=Me.prototype.kz,Me.prototype.getValue=Me.prototype.I,Me.prototype.clear=Me.prototype.clear;var es=new W(Me,"Transaction",-1),ee=new W(Me,"Property",0),nn=new W(Me,"Insert",1),xe=new W(Me,"Remove",2);function xn(){this.m=(new q).freeze(),this.va="",this.j=!1}function Pe(){this.ut=new Z,this.Ad=!1,this.u=(new q).freeze(),this.se=-1,this.m=999,this.ue=!1,this.qp=null,this.Vh=0,this.j=!1,this.xe=(new q).freeze(),this.Wk=new q,this.Ws=!0,this.ft=this.Tp=this.it=this.ht=!1}function gx(t,e,n){if(t.isUndoingRedoing)return!1;t.checksTransactionLevel&&1>t.transactionLevel&&hi("Ending transaction without having started a transaction: "+n);var i=1===t.transactionLevel,l=t.currentTransaction;i&&e&&(t.isInternalTransaction||t.Kb("CommittingTransaction",n,l));var u=0;if(0<t.transactionLevel&&(t.Vh--,t.isEnabled)){var h=t.xe.count;0<h&&(""===n&&(n=t.xe.K(0)),t.xe.ja(),t.xe.mb(h-1),t.xe.freeze()),0<(h=t.Wk.count)&&(u=t.Wk.K(h-1),t.Wk.mb(h-1))}if(i){if(e){if(t.Tp=!1,null===l&&""!==n&&(l=t.currentTransaction),t.isEnabled&&null!==l){for(l.isComplete||(l.isComplete=!0,l.name=n),(e=t.history).ja(),i=e.count-1;i>t.historyIndex;i--)null!==(u=e.K(i))&&u.clear(),e.mb(i),t.Tp=!0;0<=(i=t.maxHistoryLength)&&(0===i?e.clear():e.count>=i&&(null!==(u=e.K(0))&&u.clear(),e.mb(0),t.se--)),0===i||0!==e.count&&e.get(e.count-1)===l||(e.add(l),t.se++),e.freeze()}t.isInternalTransaction||t.Kb("CommittedTransaction",n,l)}else{t.ue=!0;try{t.isEnabled&&null!==l&&(l.isComplete=!0,l.undo())}finally{t.isInternalTransaction||t.Kb("RolledBackTransaction",n,l),t.ue=!1}null!==l&&l.clear()}return t.qp=null,t.isPendingClear&&t.clear(),t.isPendingClear=!1,t.isPendingUnmodified=!1,!0}if(t.isEnabled&&!e&&null!==l){for(t=u,l=(n=l.changes).count-1;l>=t;l--)null!==(e=n.K(l))&&e.undo(),n.ja(),n.mb(l);n.freeze()}return!1}function kt(){wn(this),this.H=ah,this.va="",this.Ad=!0,this.hb=!1,this.xi=null,this.gy=new Zi,this.yr=-1}function Ce(){kt.call(this),this.name="ToolManager",this.cb=new q,this.nb=new q,this.Db=new q,this.F=this.W=850,this.m=new dt(2,2).ha(),this.Ga=5e3,this.ga=Dc,this.u=yx,this.pp=this.j=null,this.uj=-1}function mg(t,e){t.standardMouseOver(),t.isBeyondDragSize()&&t.standardWaitAfter(t.isActive?t.holdDelay:t.hoverDelay,e.lastInput)}Me.className="ChangedEvent",Me.Transaction=es,Me.Property=ee,Me.Insert=nn,Me.Remove=xe,xn.prototype.toString=function(t){var e="Transaction: "+this.name+" "+this.changes.count.toString()+(this.isComplete?"":", incomplete");if(void 0!==t&&0<t){t=this.changes.count;for(var n=0;n<t;n++){var i=this.changes.K(n);null!==i&&(e+="\n  "+i.toString())}}return e},xn.prototype.clear=function(){var t=this.changes;t.ja();for(var e=t.count-1;0<=e;e--){var n=t.K(e);null!==n&&n.clear()}t.clear(),t.freeze()},xn.prototype.canUndo=function(){return this.isComplete},xn.prototype.undo=function(){if(this.canUndo())for(var t=this.changes.count-1;0<=t;t--){var e=this.changes.K(t);null!==e&&e.undo()}},xn.prototype.canRedo=function(){return this.isComplete},xn.prototype.redo=function(){if(this.canRedo())for(var t=this.changes.count,e=0;e<t;e++){var n=this.changes.K(e);null!==n&&n.redo()}},xn.prototype.Vj=function(){if(this.isComplete){var t=this.changes;t.ja();for(var e=new vt,n=0;n<t.count;n++){var i=t.K(n);if(null!==i&&i.change===ee&&i.object){var l=e.get(i.object);l||(l=new vt,e.set(i.object,l));var u=l.get(i.propertyName);null===u?l.set(i.propertyName,-1):(0<u&&t.Vc(u,null),l.set(i.propertyName,n))}}for(n=e=0;n<t.count;n++)null!==(i=t.K(n))&&(n>e&&t.Vc(e,i),e++);for(;t.length>e;)t.pop();t.freeze()}},Mt.Object.defineProperties(xn.prototype,{changes:{get:function(){return this.m}},name:{get:function(){return this.va},set:function(t){this.va=t}},isComplete:{get:function(){return this.j},set:function(t){this.j=t}}}),xn.prototype.optimize=xn.prototype.Vj,xn.prototype.redo=xn.prototype.redo,xn.prototype.canRedo=xn.prototype.canRedo,xn.prototype.undo=xn.prototype.undo,xn.prototype.canUndo=xn.prototype.canUndo,xn.prototype.clear=xn.prototype.clear,xn.className="Transaction",Pe.prototype.toString=function(t){var e="UndoManager "+this.historyIndex+"<"+this.history.count+"<="+this.maxHistoryLength;e+="[";for(var n=this.nestedTransactionNames.count,i=0;i<n;i++)0<i&&(e+=" "),e+=this.nestedTransactionNames.K(i);if(e+="]",void 0!==t&&0<t)for(n=this.history.count,i=0;i<n;i++)e+="\n "+this.history.K(i).toString(t-1);return e},Pe.prototype.clear=function(){var t=this.history;t.ja();for(var e=t.count-1;0<=e;e--){var n=t.K(e);null!==n&&n.clear()}t.clear(),this.se=-1,t.freeze(),this.ue=!1,this.qp=null,this.Vh=0,this.xe.ja(),this.xe.clear(),this.xe.freeze(),this.Wk.clear(),this.ft=this.Tp=this.it=this.ht=!1},Pe.prototype.copyProperties=function(t){this.isEnabled=t.isEnabled,this.maxHistoryLength=t.maxHistoryLength,this.checksTransactionLevel=t.checksTransactionLevel},(_=Pe.prototype).Bw=function(t){this.ut.add(t)},_.yx=function(t){this.ut.remove(t)},_.Da=function(t){if(void 0===t&&(t=""),null===t&&(t=""),this.isUndoingRedoing)return!1;!0===this.Ws&&(this.Ws=!1,this.Vh++,this.isInternalTransaction||this.Kb("StartingFirstTransaction",t,this.currentTransaction),0<this.Vh&&this.Vh--),this.isEnabled&&(this.xe.ja(),this.xe.add(t),this.xe.freeze(),this.Wk.add(null===this.currentTransaction?0:this.currentTransaction.changes.count)),this.Vh++;var e=1===this.transactionLevel;return e&&(this.isInternalTransaction||this.Kb("StartedTransaction",t,this.currentTransaction)),e},_.eb=function(t){return void 0===t&&(t=""),gx(this,!0,t)},_.Bf=function(){return gx(this,!1,"")},Pe.prototype.canUndo=function(){if(!this.isEnabled||0<this.transactionLevel)return!1;var t=this.transactionToUndo;return!(null===t||!t.canUndo())},Pe.prototype.undo=function(){if(this.canUndo()){var t=this.transactionToUndo;try{this.ue=!0,this.Kb("StartingUndo","Undo",t),this.se--,t.undo()}catch(e){hi("undo error: "+e.toString())}finally{this.Kb("FinishedUndo","Undo",t),this.ue=!1}}},Pe.prototype.canRedo=function(){if(!this.isEnabled||0<this.transactionLevel)return!1;var t=this.transactionToRedo;return!(null===t||!t.canRedo())},Pe.prototype.redo=function(){if(this.canRedo()){var t=this.transactionToRedo;try{this.ue=!0,this.Kb("StartingRedo","Redo",t),this.se++,t.redo()}catch(e){hi("redo error: "+e.toString())}finally{this.Kb("FinishedRedo","Redo",t),this.ue=!1}}},Pe.prototype.Kb=function(t,e,n){void 0===n&&(n=null);var i=new Me;for(i.change=es,i.propertyName=t,i.object=n,i.oldValue=e,t=this.models;t.next();)i.model=e=t.value,e.Cr(i)},Pe.prototype.Fu=function(t){if(this.isEnabled&&!this.isUndoingRedoing&&!this.skipsEvent(t)){var e=this.currentTransaction;null===e&&(this.qp=e=new xn);var n=t.copy();(e=e.changes).ja(),e.add(n),e.freeze(),this.checksTransactionLevel&&0>=this.transactionLevel&&!this.Ws&&(null!==(t=t.diagram)&&!1===t.ji||hi("Change not within a transaction: "+n.toString()))}},Pe.prototype.skipsEvent=function(t){if(null===t||0>t.change.value)return!0;if(null===(t=t.object))return!1;if(void 0!==t.layer){if(null!==(t=t.layer)&&t.isTemporary)return!0}else if(t.isTemporary)return!0;return!1},Mt.Object.defineProperties(Pe.prototype,{models:{get:function(){return this.ut.iterator}},isEnabled:{get:function(){return this.Ad},set:function(t){this.Ad=t}},transactionToUndo:{get:function(){return 0<=this.historyIndex&&this.historyIndex<=this.history.count-1?this.history.K(this.historyIndex):null}},transactionToRedo:{get:function(){return this.historyIndex<this.history.count-1?this.history.K(this.historyIndex+1):null}},isUndoingRedoing:{get:function(){return this.ue}},history:{get:function(){return this.u}},maxHistoryLength:{get:function(){return this.m},set:function(t){this.m=t}},historyIndex:{get:function(){return this.se}},currentTransaction:{get:function(){return this.qp}},transactionLevel:{get:function(){return this.Vh}},isInTransaction:{get:function(){return 0<this.Vh}},checksTransactionLevel:{get:function(){return this.j},set:function(t){this.j=t}},nestedTransactionNames:{get:function(){return this.xe}},isPendingClear:{get:function(){return this.ht},set:function(t){this.ht=t}},isPendingUnmodified:{get:function(){return this.it},set:function(t){this.it=t}},isInternalTransaction:{get:function(){return this.ft},set:function(t){this.ft=t}},isJustDiscarded:{get:function(){return this.Tp}}}),Pe.prototype.handleChanged=Pe.prototype.Fu,Pe.prototype.redo=Pe.prototype.redo,Pe.prototype.undo=Pe.prototype.undo,Pe.prototype.canUndo=Pe.prototype.canUndo,Pe.prototype.rollbackTransaction=Pe.prototype.Bf,Pe.prototype.commitTransaction=Pe.prototype.eb,Pe.prototype.startTransaction=Pe.prototype.Da,Pe.prototype.removeModel=Pe.prototype.yx,Pe.prototype.addModel=Pe.prototype.Bw,Pe.prototype.clear=Pe.prototype.clear,Pe.className="UndoManager",kt.prototype.toString=function(){return""!==this.name?this.name+" Tool":Ys(this.constructor)},kt.prototype.updateAdornments=function(){},kt.prototype.canStart=function(){return this.isEnabled},kt.prototype.doStart=function(){},kt.prototype.doActivate=function(){this.isActive=!0},kt.prototype.doDeactivate=function(){this.isActive=!1},kt.prototype.doStop=function(){},kt.prototype.doCancel=function(){this.transactionResult=null,this.stopTool()},kt.prototype.stopTool=function(){var t=this.diagram;t.currentTool===this&&(t.currentTool=null,t.currentCursor="")},kt.prototype.doMouseDown=function(){!this.isActive&&this.canStart()&&this.doActivate()},kt.prototype.doMouseMove=function(){},kt.prototype.doMouseUp=function(){this.stopTool()},kt.prototype.doMouseWheel=function(){},kt.prototype.canStartMultiTouch=function(){return!0},kt.prototype.standardPinchZoomStart=function(){var t=this.diagram,e=t.lastInput,n=e.vo(0,P.allocAt(NaN,NaN)),i=e.vo(1,P.allocAt(NaN,NaN));if(n.v()&&i.v()&&(this.doCancel(),t.yl("hasGestureZoom"))){t.fw=t.scale;var l=i.x-n.x,u=i.y-n.y;t.nw=Math.sqrt(l*l+u*u),e.bubbles=!1}P.free(n),P.free(i)},kt.prototype.standardPinchZoomMove=function(){var t=this.diagram,e=t.lastInput,n=e.vo(0,P.allocAt(NaN,NaN)),i=e.vo(1,P.allocAt(NaN,NaN));if(n.v()&&i.v()&&(this.doCancel(),t.yl("hasGestureZoom"))){var l=i.x-n.x,u=i.y-n.y;u=Math.sqrt(l*l+u*u)/t.nw,l=new P((Math.min(i.x,n.x)+Math.max(i.x,n.x))/2,(Math.min(i.y,n.y)+Math.max(i.y,n.y))/2);var h=t.commandHandler;if((u*=t.fw)!==t.scale&&h.canResetZoom(u)){var f=t.zoomPoint;t.zoomPoint=l,h.resetZoom(u),t.zoomPoint=f}e.bubbles=!1}P.free(n),P.free(i)},kt.prototype.doKeyDown=function(){"Esc"===this.diagram.lastInput.key&&this.doCancel()},kt.prototype.doKeyUp=function(){},kt.prototype.Da=function(t){return void 0===t&&(t=this.name),this.transactionResult=null,this.diagram.Da(t)},kt.prototype.stopTransaction=function(){var t=this.diagram;return null===this.transactionResult?t.Bf():t.eb(this.transactionResult)},kt.prototype.standardMouseSelect=function(){var t=this.diagram;if(t.allowSelect){var e=t.lastInput,n=t.wl(e.documentPoint,!1);if(null!==n){if(Do?e.meta:e.control){for(t.P("ChangingSelection",t.selection),e=n;null!==e&&!e.canSelect();)e=e.containingGroup;null!==e&&(e.isSelected=!e.isSelected),t.P("ChangedSelection",t.selection)}else if(e.shift){if(!n.isSelected){for(t.P("ChangingSelection",t.selection),e=n;null!==e&&!e.canSelect();)e=e.containingGroup;null!==e&&(e.isSelected=!0),t.P("ChangedSelection",t.selection)}}else if(!n.isSelected){for(e=n;null!==e&&!e.canSelect();)e=e.containingGroup;null!==e&&t.select(e)}}else!e.left||(Do?e.meta:e.control)||e.shift||t.clearSelection()}},kt.prototype.standardMouseClick=function(t,e){void 0===t&&(t=null),void 0===e&&(e=function(l){return!l.layer.isTemporary});var n=this.diagram,i=n.lastInput;return t=n.ec(i.documentPoint,t,e),i.targetObject=t,function mx(t,e,n){if(e.handled=!1,null===t||t.yf()){var i=0;e.left?i=1===e.clickCount?1:2===e.clickCount?2:1:e.right&&1===e.clickCount&&(i=3);var l="ObjectSingleClicked";if(null!==t){switch(i){case 1:l="ObjectSingleClicked";break;case 2:l="ObjectDoubleClicked";break;case 3:l="ObjectContextClicked"}0!==i&&n.P(l,t)}else{switch(i){case 1:l="BackgroundSingleClicked";break;case 2:l="BackgroundDoubleClicked";break;case 3:l="BackgroundContextClicked"}0!==i&&n.P(l)}if(null!==t)for(;null!==t;){switch(n=null,i){case 1:n=t.click;break;case 2:n=t.doubleClick?t.doubleClick:t.click;break;case 3:n=t.contextClick}if(null!==n&&(n(e,t),e.handled))break;t=t.panel}else{switch(t=null,i){case 1:t=n.click;break;case 2:t=n.doubleClick?n.doubleClick:n.click;break;case 3:t=n.contextClick}null!==t&&t(e)}}}(t,i,n),i.handled},kt.prototype.standardMouseOver=function(){var t=this.diagram,e=t.lastInput;if(!0!==t.animationManager.zb){var n=t.skipsUndoManager;t.skipsUndoManager=!0;var i=t.viewportBounds.ba(e.documentPoint)?t.ec(e.documentPoint,null,null):null;e.targetObject=i;var l=!1;if(i!==t.qk){var u=t.qk,h=u;for(t.qk=i,this.doCurrentObjectChanged(u,i),e.handled=!1;null!==u;){var f=u.mouseLeave;if(null!==f&&(i===u||null!==i&&i.jg(u)||(f(e,u,i),l=!0,e.handled)))break;u=u.panel}for(u=h,e.handled=!1;null!==i&&(null===(h=i.mouseEnter)||!(u===i||null!==u&&u.jg(i)||(h(e,i,u),l=!0,e.handled)));)i=i.panel;i=t.qk}if(null!==i){for(u=i,h="";null!==u&&""===(h=u.cursor);)u=u.panel;for(t.currentCursor=h,e.handled=!1,u=i;null!==u&&(null===(i=u.mouseOver)||(i(e,u),l=!0,!e.handled));)u=u.panel}else t.currentCursor="",null!==(i=t.mouseOver)&&(i(e),l=!0);l&&t.Mb(),t.skipsUndoManager=n}},kt.prototype.doCurrentObjectChanged=function(){},kt.prototype.standardMouseWheel=function(){var t=this.diagram,e=t.lastInput,n=e.delta;if(0!==n&&t.documentBounds.v()){var i=t.commandHandler,l=t.toolManager.mouseWheelBehavior;if(null!==i&&(l===Gr&&!e.shift||l===Dc&&e.control))(0<n?i.canIncreaseZoom():i.canDecreaseZoom())&&(l=t.zoomPoint,t.zoomPoint=e.viewPoint,0<n?i.increaseZoom():i.decreaseZoom(),t.zoomPoint=l),e.bubbles=!1;else if(l===Gr&&e.shift||l===Dc&&!e.control){i=t.position.copy();var u=0<n?n:-n,h=e.event,f=h.deltaMode;if(l=h.deltaX,h=h.deltaY,(AM||Tt)&&(f=1,0<l&&(l=3),0>l&&(l=-3),0<h&&(h=3),0>h&&(h=-3)),void 0===f||void 0===l||void 0===h||0===l&&0===h||e.shift)!e.shift&&t.allowVerticalScroll?t.scroll("pixel",0<n?"up":"down",u=3*u*t.scrollVerticalLineChange):e.shift&&t.allowHorizontalScroll&&t.scroll("pixel",0<n?"left":"right",u=3*u*t.scrollHorizontalLineChange);else{switch(f){case 0:default:n="pixel";break;case 1:n="line";break;case 2:n="page"}0!==l&&t.allowHorizontalScroll&&(0<(l*=t.scrollHorizontalLineChange/16)?t.scroll(n,"left",-l):t.scroll(n,"right",l)),0!==h&&t.allowVerticalScroll&&(0<(h*=t.scrollVerticalLineChange/16)?t.scroll(n,"up",-h):t.scroll(n,"down",h))}t.position.C(i)||(e.bubbles=!1)}}},kt.prototype.standardWaitAfter=function(t,e){void 0===e&&(e=this.diagram.lastInput),this.cancelWaitAfter();var n=this,i=e.clone(this.gy);this.yr=Ja(function(){n.doWaitAfter(i)},t)},kt.prototype.cancelWaitAfter=function(){-1!==this.yr&&pt.clearTimeout(this.yr),this.yr=-1},kt.prototype.doWaitAfter=function(){},kt.prototype.findToolHandleAt=function(t,e){return null===(t=this.diagram.ec(t,function(n){for(;null!==n&&!(n.panel instanceof Pt);)n=n.panel;return n}))?null:t.part.category===e?t:null},kt.prototype.isBeyondDragSize=function(t,e){var n=this.diagram;void 0===t&&(t=n.firstInput.viewPoint),void 0===e&&(e=n.lastInput.viewPoint);var i=n.toolManager.dragSize,l=i.width;return i=i.height,n.firstInput.isTouchEvent&&(l+=6,i+=6),Math.abs(e.x-t.x)>l||Math.abs(e.y-t.y)>i},Mt.Object.defineProperties(kt.prototype,{diagram:{get:function(){return this.H},set:function(t){t instanceof V&&(this.H=t)}},name:{get:function(){return this.va},set:function(t){this.va=t}},isEnabled:{get:function(){return this.Ad},set:function(t){this.Ad=t}},isActive:{get:function(){return this.hb},set:function(t){this.hb=t}},transactionResult:{get:function(){return this.xi},set:function(t){this.xi=t}}}),kt.prototype.startTransaction=kt.prototype.Da,kt.className="Tool",Ht(Ce,kt),Ce.prototype.initializeStandardTools=function(){},Ce.prototype.updateAdornments=function(t){var e=this.currentToolTip;if(e instanceof Pt&&this.pp===t){var n=e.adornedObject;(null!==t?n.part===t:null===n)?this.showToolTip(e,n):this.hideToolTip()}},Ce.prototype.doMouseDown=function(){var t=this.diagram,e=t.lastInput;if(e.isTouchEvent&&this.gestureBehavior===Sc&&(e.bubbles=!1),e.isMultiTouch){if(this.cancelWaitAfter(),this.gestureBehavior===qy)return void(e.bubbles=!0);if(this.gestureBehavior===Sc)return;if(t.currentTool.canStartMultiTouch())return void t.currentTool.standardPinchZoomStart()}for(var n=this.mouseDownTools.length,i=0;i<n;i++){var l=this.mouseDownTools.K(i);if(l.diagram=this.diagram,l.canStart())return t.doFocus(),t.currentTool=l,void(t.currentTool===l&&(l.isActive||l.doActivate(),l.doMouseDown()))}1===t.lastInput.button&&(this.mouseWheelBehavior===Dc?this.mouseWheelBehavior=Gr:this.mouseWheelBehavior===Gr&&(this.mouseWheelBehavior=Dc)),this.doActivate(),this.standardWaitAfter(this.holdDelay,e)},Ce.prototype.doMouseMove=function(){var t=this.diagram,e=t.lastInput;if(e.isMultiTouch){if(this.gestureBehavior===qy)return void(e.bubbles=!0);if(this.gestureBehavior===Sc)return;if(t.currentTool.canStartMultiTouch())return void t.currentTool.standardPinchZoomMove()}if(this.isActive)for(var n=this.mouseMoveTools.length,i=0;i<n;i++){var l=this.mouseMoveTools.K(i);if(l.diagram=this.diagram,l.canStart())return t.doFocus(),t.currentTool=l,void(t.currentTool===l&&(l.isActive||l.doActivate(),l.doMouseMove()))}mg(this,t),null===(t=e.event)||"pointermove"!==t.type&&t.cancelable||(e.bubbles=!0)},Ce.prototype.doCurrentObjectChanged=function(t,e){null===(t=this.currentToolTip)||null!==e&&t instanceof Pt&&(e===t||e.jg(t))||this.hideToolTip()},Ce.prototype.doWaitAfter=function(t){var e=this.diagram;e.Ha&&(this.doMouseHover(),this.isActive||this.doToolTip(),t.isTouchEvent&&!e.lastInput.handled&&((t=t.copy()).button=2,t.buttons=2,e.lastInput=t,e.Wt=!0,e.doMouseUp()))},Ce.prototype.doMouseHover=function(){var t=this.diagram,e=t.lastInput;null===e.targetObject&&(e.targetObject=t.ec(e.documentPoint,null,null));var n=e.targetObject;if(null!==n)for(e.handled=!1;null!==n&&(null===(t=this.isActive?n.mouseHold:n.mouseHover)||(t(e,n),!e.handled));)n=n.panel;else null!==(n=this.isActive?t.mouseHold:t.mouseHover)&&n(e)},Ce.prototype.doToolTip=function(){var t=this.diagram,e=t.lastInput;if(null===e.targetObject&&(e.targetObject=t.ec(e.documentPoint,null,null)),null!==(e=e.targetObject)){if(!((t=this.currentToolTip)instanceof Pt)||e!==t&&!e.jg(t)){for(;null!==e;){if(null!==(t=e.toolTip))return void this.showToolTip(t,e);e=e.panel}this.hideToolTip()}}else null!==(e=t.toolTip)?this.showToolTip(e,null):this.hideToolTip()},Ce.prototype.showToolTip=function(t,e){var n=this.diagram;if(t!==this.currentToolTip&&this.hideToolTip(),t instanceof Pt){t.layerName="Tool",t.selectable=!1,t.scale=1/n.scale,t.category="ToolTip",null!==t.placeholder&&(t.placeholder.scale=n.scale);var i=t.diagram;null!==i&&i!==n&&i.remove(t),n.add(t),null!==e?t.adornedObject=e:t.data=n.model,t.Za(),this.positionToolTip(t,e)}else t instanceof Dl&&t!==this.currentToolTip&&t.show(e,n,this);if(this.currentToolTip=t,-1!==this.uj&&(pt.clearTimeout(this.uj),this.uj=-1),0<(t=this.toolTipDuration)&&t!==1/0){var l=this;this.uj=Ja(function(){l.hideToolTip()},t)}},Ce.prototype.positionToolTip=function(t){if(null===t.placeholder){var e=this.diagram,n=e.lastInput.documentPoint.copy(),i=t.measuredBounds,l=e.viewportBounds;e.lastInput.isTouchEvent&&(n.x-=i.width),n.x+i.width>l.right&&(n.x-=i.width+5/e.scale),n.x<l.x&&(n.x=l.x),n.y=n.y+20/e.scale+i.height>l.bottom?n.y-(i.height+5/e.scale):n.y+20/e.scale,n.y<l.y&&(n.y=l.y),t.position=n}},Ce.prototype.hideToolTip=function(){-1!==this.uj&&(pt.clearTimeout(this.uj),this.uj=-1);var t=this.diagram,e=this.currentToolTip;null!==e&&(e instanceof Pt?(t.remove(e),null!==this.pp&&this.pp.Af(e.category),e.data=null,e.adornedObject=null):e instanceof Dl&&null!==e.hide&&e.hide(t,this),this.currentToolTip=null)},Ce.prototype.doMouseUp=function(){this.cancelWaitAfter();var t=this.diagram;if(this.isActive)for(var e=this.mouseUpTools.length,n=0;n<e;n++){var i=this.mouseUpTools.K(n);if(i.diagram=this.diagram,i.canStart())return t.doFocus(),t.currentTool=i,void(t.currentTool===i&&(i.isActive||i.doActivate(),i.doMouseUp()))}t.doFocus(),this.doDeactivate()},Ce.prototype.doMouseWheel=function(){this.standardMouseWheel()},Ce.prototype.doKeyDown=function(){var t=this.diagram;null!==t.commandHandler&&t.commandHandler.doKeyDown()},Ce.prototype.doKeyUp=function(){var t=this.diagram;null!==t.commandHandler&&t.commandHandler.doKeyUp()},Ce.prototype.findTool=function(t){for(var e=this.mouseDownTools.length,n=0;n<e;n++){var i=this.mouseDownTools.K(n);if(i.name===t)return i}for(e=this.mouseMoveTools.length,n=0;n<e;n++)if((i=this.mouseMoveTools.K(n)).name===t)return i;for(e=this.mouseUpTools.length,n=0;n<e;n++)if((i=this.mouseUpTools.K(n)).name===t)return i;return null},Ce.prototype.replaceTool=function(t,e){null!==e&&(e.diagram=this.diagram);for(var n=this.mouseDownTools.length,i=0;i<n;i++){var l=this.mouseDownTools.K(i);if(l.name===t)return null!==e?this.mouseDownTools.Vc(i,e):this.mouseDownTools.mb(i),l}for(n=this.mouseMoveTools.length,i=0;i<n;i++)if((l=this.mouseMoveTools.K(i)).name===t)return null!==e?this.mouseMoveTools.Vc(i,e):this.mouseMoveTools.mb(i),l;for(n=this.mouseUpTools.length,i=0;i<n;i++)if((l=this.mouseUpTools.K(i)).name===t)return null!==e?this.mouseUpTools.Vc(i,e):this.mouseUpTools.mb(i),l;return null},Ce.prototype.gb=function(t,e,n){null!==e&&(e.name=t,e.diagram=this.diagram),this.findTool(t)?this.replaceTool(t,e):null!==e&&n.add(e)},Mt.Object.defineProperties(Ce.prototype,{mouseWheelBehavior:{get:function(){return this.ga},set:function(t){this.ga=t}},gestureBehavior:{get:function(){return this.u},set:function(t){this.u=t}},currentToolTip:{get:function(){return this.j},set:function(t){this.j=t,this.pp=null!==t&&t instanceof Pt?t.adornedPart:null}},mouseDownTools:{get:function(){return this.cb}},mouseMoveTools:{get:function(){return this.nb}},mouseUpTools:{get:function(){return this.Db}},hoverDelay:{get:function(){return this.W},set:function(t){this.W=t}},holdDelay:{get:function(){return this.F},set:function(t){this.F=t}},dragSize:{get:function(){return this.m},set:function(t){this.m=t.J()}},toolTipDuration:{get:function(){return this.Ga},set:function(t){this.Ga=t}}}),Ce.prototype.replaceStandardTool=Ce.prototype.gb;var Ln,Dc=new W(Ce,"WheelScroll",0),Gr=new W(Ce,"WheelZoom",1),Qy=new W(Ce,"WheelNone",2),yx=new W(Ce,"GestureZoom",3),Sc=new W(Ce,"GestureCancel",4),qy=new W(Ce,"GestureNone",5);function De(){kt.call(this),this.name="Dragging",this.u=this.ww=this.nb=!0,this.m=this.Ga=this.W=this.Ce=null,this.Gm=this.Db=!1,this.il=new P(NaN,NaN),this.br=new P,this.cb=!0,this.wk=100,this.tg=[],this.le=(new Z).freeze(),this.ga=new Gc,this.hn=null,this.F="copy",this.Hc="",this.Ic="no-drop"}function tv(t,e){if(t.dragsLink){var n=t.diagram;n.allowRelink&&(n.model.Nj()&&1===e.count&&e.first()instanceof H?(t.draggedLink=e.first(),t.draggedLink.canRelinkFrom()&&t.draggedLink.canRelinkTo()&&t.draggedLink.zj(),t.Ce=n.toolManager.findTool("Relinking"),null===t.Ce&&(t.Ce=new Vi,t.Ce.diagram=n),t.Ce.originalLink=t.draggedLink):(t.draggedLink=null,t.Ce=null))}}function vx(t){var e=t.diagram,n=e.skipsUndoManager;e.skipsUndoManager=!0,vd(t,e.lastInput,null),e.skipsUndoManager=n,t.tg.length=0}function yd(){var t=bn;aa(t),lo(t);var e=t.diagram;t.il.v()&&(e.position=t.il),e.lg()}function Eo(t,e){if(null===t.copiedParts){var n=t.diagram;if((!e||!n.isReadOnly&&!n.isModelReadOnly)&&null!==t.draggedParts){var i=n.undoManager;for(i.isEnabled&&i.isInTransaction?null!==i.currentTransaction&&0<i.currentTransaction.changes.count&&(n.undoManager.Bf(),n.Da("Drag")):lo(t),n.skipsUndoManager=!e,n.partManager.addsToTemporaryLayer=!e,t.startPoint=n.firstInput.documentPoint,e=t.copiesEffectiveCollection?t.draggedParts.Cf():n.selection,e=n.Ej(e,n,!0),n=new vt,i=t.draggedParts.iterator;i.next();){var l=i.key;if(l.Tc()&&l.canCopy()){var u=e.I(l);null!==u&&(u.location=l.location,u.Za(),n.add(u,t.Fd(u.location)))}}for(e=e.iterator;e.next();)(i=e.value)instanceof H&&i.canCopy()&&n.add(i,t.Fd());t.copiedParts=n,tv(t,n.Cf()),null!==t.draggedLink&&al(n=t.draggedLink,t.startPoint.x-((e=n.routeBounds).x+e.width/2),t.startPoint.y-(e.y+e.height/2)),t.doUpdateCursor(null,!0)}}}function aa(t){var e=t.diagram;if(null!==t.copiedParts){if(e.hs(t.copiedParts.Cf(),!1),t.copiedParts=null,null!==t.draggedParts)for(var n=t.draggedParts.iterator;n.next();)n.key instanceof H&&(n.value.point=new P(0,0));t.doUpdateCursor(null,!0)}e.skipsUndoManager=!1,e.partManager.addsToTemporaryLayer=!1,t.startPoint=e.firstInput.documentPoint}function yg(t){if(null!==t.draggedLink){if(t.dragsLink&&null!==t.Ce){var e=t.Ce;e.diagram.remove(e.temporaryFromNode),e.diagram.remove(e.temporaryToNode),t.Ce.originalLink=null}t.draggedLink=null,t.Ce=null}}function _s(t,e,n){var i=t.diagram,l=t.startPoint,u=P.alloc();u.assign(i.lastInput.documentPoint),t.moveParts(e,u.je(l),n),P.free(u),!0===i.Ge("temporaryPixelRatio")&&null===i.Rh&&30<i.Ew&&(Oc(i),i.Jo())}function lo(t){if(null!==t.draggedParts){for(var e=t.diagram,n=t.draggedParts.iterator;n.next();){var i=n.key;i.Tc()&&(i.location=n.value.point)}for(n=t.draggedParts.iterator;n.next();)if((i=n.key)instanceof H&&i.suspendsRouting){var l=n.value.point;t.draggedParts.add(i,t.Fd()),al(i,-l.x,-l.y)}e.nd()}}function ev(t,e){var n=t.diagram;t.dragsLink&&(null!==t.draggedLink&&(t.draggedLink.fromNode=null,t.draggedLink.toNode=null),nv(t,!1));var i=t.findDragOverObject(e),l=n.lastInput;l.targetObject=i,t.doUpdateCursor(i,!1);var u=n.skipsUndoManager,h=!1;try{if(n.skipsUndoManager=!0,h=vd(t,l,i),!t.isActive&&null===bn)return;var f=null!==i?i.part:null;if(null===f||n.handlesDragDropForTopLevelParts&&f.isTopLevel&&!(f instanceof yt)){var p=n.mouseDragOver;null!==p&&(p(l),h=!0)}if(!t.isActive&&null===bn||(t.doDragOver(e,i),!t.isActive&&null===bn))return}finally{n.skipsUndoManager=u,h&&n.nd()}t.hn=i,n.isReadOnly||!n.allowMove&&!n.allowCopy||!n.allowHorizontalScroll&&!n.allowVerticalScroll||n.Fr(l.viewPoint)}function vd(t,e,n){var i=!1,l=t.tg.length,u=0<l?t.tg[0]:null;if(n===u)return!1;e.handled=!1;for(var h=0;h<l;h++){var f=t.tg[h],p=f.mouseDragLeave;if(null!==p&&(p(e,f,n),i=!0,e.handled))break}if(t.tg.length=0,!t.isActive&&null===bn||null===n)return i;for(e.handled=!1,l=n;null!==l;)t.tg.push(l),l=wx(l);for(l=t.tg.length,n=0;n<l&&(null===(f=(h=t.tg[n]).mouseDragEnter)||(f(e,h,u),i=!0,!e.handled));n++);return i}function wx(t){var e=t.panel;return null!==e?e:t instanceof lt&&!(t instanceof yt)&&null!==(t=t.containingGroup)&&t.handlesDragDropForMembers?t:null}function ua(t,e,n){var i=t.Ce;if(null===i)return null;var l=t.diagram.hg(e,i.portGravity,function(g){return i.findValidLinkablePort(g,n)});t=P.alloc();var u=1/0,h=null;for(l=l.iterator;l.next();){var f=l.value;if(null!==f.part){var p=f.ia(ut,t);(p=e.rf(p))<u&&(h=f,u=p)}}return P.free(t),h}function nv(t,e){var n=t.draggedLink;if(null!==n&&!(2>n.pointsCount)){var i=t.diagram;if(!i.isReadOnly){var l=t.Ce;if(null!==l){var u=null,h=null;null===n.fromNode&&null!==(u=ua(t,n.i(0),!1))&&(h=u.part);var f=null,p=null;null===n.toNode&&null!==(f=ua(t,n.i(n.pointsCount-1),!0))&&(p=f.part),l.isValidLink(h,u,p,f)?e?(n.defaultFromPoint=n.i(0),n.defaultToPoint=n.i(n.pointsCount-1),n.suspendsRouting=!1,n.fromNode=h,null!==u&&(n.fromPortId=u.portId),n.toNode=p,null!==f&&(n.toPortId=f.portId),n.fromPort!==i.tx&&i.P("LinkRelinked",n,i.tx),n.toPort!==i.ux&&i.P("LinkRelinked",n,i.ux)):Js(l,h,u,p,f):Js(l,null,null,null,null)}}}}function vg(t,e){var n=t.diagram;t.dragsLink&&nv(t,!0),vx(t);var i=t.findDragOverObject(e),l=n.lastInput;if(l.targetObject=i,null!==i){l.handled=!1;for(var u=i;null!==u;){var h=u.mouseDrop;if(null!==h&&(h(l,u),l.handled))break;fe(t,l,u),u=wx(u)}}else null!==(u=n.mouseDrop)&&u(l);if(t.isActive||null!==bn){for(l=(t.copiedParts||t.draggedParts).iterator;l.next();)(u=l.key)instanceof J&&u.linksConnected.each(function(f){f.suspendsRouting=!1});if(t.doDropOnto(e,i),t.isActive||null!==bn){for(t=B.alloc(),e=n.selection.iterator;e.next();)(i=e.value)instanceof J&&xx(n,i,t);B.free(t)}}}function fe(t,e,n){n=n.part,!(t=t.diagram).handlesDragDropForTopLevelParts||!n.isTopLevel||n instanceof yt||null!==(n=t.mouseDrop)&&n(e)}function xx(t,e,n){var i=!1;if(e.getAvoidableRect(n),t.viewportBounds.Ee(n)&&(i=!0),0!==(t=t.zu(n,function(l){return l.part},function(l){return l instanceof H},!0,function(l){return l instanceof H},i)).count)for(t=t.iterator;t.next();)!(n=t.value).Md(e)&&n.isAvoiding&&n.ab()}function Cx(t,e,n,i){if(null===t.copiedParts){var l=t.diagram;if(!l.isReadOnly&&!l.isModelReadOnly){l.skipsUndoManager=!n,l.partManager.addsToTemporaryLayer=!n,t.startPoint=i.documentPoint,n=l.Ej(e,l,!0);var u=B.alloc();l=i=1/0;for(var h=-1/0,f=-1/0,p=e.iterator;p.next();){var g=p.value;if(g.isVisible()){var m=g.location;g=m.x,m=m.y,isNaN(g)||isNaN(m)||(g<i&&(i=g),m<l&&(l=m),g>h&&(h=g),m>f&&(f=m))}}for(i===1/0?u.h(0,0,0,0):u.h(i,l,h-i,f-l),i=u.x+u.width/2,l=u.y+u.height/2,B.free(u),u=t.br,h=new vt,f=P.alloc(),p=e.iterator;p.next();)(g=p.value)instanceof H&&g.canCopy()&&null!==(m=n.I(g))&&(m.points=g.points,al(m,u.x-i,u.y-l),m.suspendsRouting=!0,h.add(m,t.Fd()));for(e=e.iterator;e.next();)(g=e.value).Tc()&&g.canCopy()&&null!==(p=n.I(g))&&(f.h(u.x-(i-(g=g.location).x),u.y-(l-g.y)),p.location=f,p.Za(),h.add(p,t.Fd(f)));P.free(f),t.copiedParts=h,tv(t,h.Cf()),null!==t.draggedLink&&al(n=t.draggedLink,t.startPoint.x-((e=n.routeBounds).x+e.width/2),t.startPoint.y-(e.y+e.height/2)),t.doUpdateCursor(null,!0)}}}Ce.className="ToolManager",Ce.WheelScroll=Dc,Ce.WheelZoom=Gr,Ce.WheelNone=Qy,Ce.GestureZoom=yx,Ce.GestureCancel=Sc,Ce.GestureNone=qy,Ht(De,kt),De.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;if(t.isReadOnly&&!t.allowDragOut||!t.allowMove&&!t.allowCopy&&!t.allowDragOut||!t.allowSelect)return!1;var e=t.lastInput;return!(!e.left||t.currentTool!==this&&(!this.isBeyondDragSize()||e.isTouchEvent&&e.timestamp-t.firstInput.timestamp<this.wk))&&null!==this.findDraggablePart()},De.prototype.findDraggablePart=function(){var t=this.diagram;if(null===(t=t.wl(t.firstInput.documentPoint,!1)))return null;for(;null!==t&&!t.canSelect();)t=t.containingGroup;return null!==t&&(t.canMove()||t.canCopy())?t:null},De.prototype.standardMouseSelect=function(){var t=this.diagram;if(t.allowSelect){var e=t.wl(t.firstInput.documentPoint,!1);if(null!==e){for(;null!==e&&!e.canSelect();)e=e.containingGroup;this.currentPart=e,null===this.currentPart||this.currentPart.isSelected||(t.P("ChangingSelection",t.selection),e=t.lastInput,(Do?e.meta:e.control)||e.shift||t.clearSelection(!0),this.currentPart.isSelected=!0,t.P("ChangedSelection",t.selection))}}},De.prototype.doActivate=function(){var t=this.diagram;this.hn=null,null===this.currentPart&&this.standardMouseSelect();var e=this.currentPart;null!==e&&(e.canMove()||e.canCopy())&&(t.lu(!0),bn=null,this.isActive=!0,this.il.set(t.position),tv(this,t.selection),this.tg.length=0,t.animationManager.wc(),this.draggedParts=this.computeEffectiveCollection(t.selection,this.dragOptions),this.ww=this.diagram.layout.isRealtime,this.diagram.layout.isRealtime=!1,t.os=!0,!0===t.Ge("temporaryPixelRatio")&&30<t.Ew&&Oc(t),Pg(t,this.draggedParts),this.Da("Drag"),this.startPoint=t.firstInput.documentPoint,t.isMouseCaptured=!0,t.allowDragOut&&(this.isDragOutStarted=!0,this.Gm=!1,bn=this,eu=this.diagram,this.doSimulatedDragOut()))},De.prototype.computeEffectiveCollection=function(t,e){return this.diagram.commandHandler.computeEffectiveCollection(t,e)},De.prototype.Fd=function(t){return new pa(void 0===t?wl:this.isGridSnapEnabled?new P(Math.round(1e3*t.x)/1e3,Math.round(1e3*t.y)/1e3):t.copy())},De.prototype.doDeactivate=function(){this.isActive=!1;var t=this.diagram;if(this.diagram.layout.isRealtime=this.ww,t.lu(!1),t.lg(),vx(this),Ag(t,this.draggedParts),this.draggedParts=this.currentPart=this.hn=null,this.Gm=this.isDragOutStarted=!1,0<Ln.count){for(var e=Ln,n=e.length,i=0;i<n;i++){var l=e.K(i);yg(l),aa(l),vx(l),l.diagram.lg()}e.clear()}yg(this),this.il.h(NaN,NaN),null!==eu&&(eu.currentCursor=""),bn=eu=null,aa(this),t.isMouseCaptured=!1,t.currentCursor="",t.os=!1,this.stopTransaction(),Pd(t,!0)},De.prototype.stopTransaction=function(){var t=this.diagram,e=kt.prototype.stopTransaction.call(this);return e&&null!==t.undoManager.transactionToUndo&&t.undoManager.transactionToUndo.Vj(),e},De.prototype.doCancel=function(){aa(this),lo(this);var t=this.diagram;this.il.v()&&(t.position=this.il),this.stopTool()},De.prototype.doKeyDown=function(){var t=this.diagram,e=t.lastInput;this.isActive&&("Esc"===e.key?this.doCancel():e.key!==t.previousInput.key&&this.doMouseMove())},De.prototype.doKeyUp=function(){this.isActive&&this.doMouseMove()},De.prototype.moveParts=function(t,e,n){void 0===n&&(n=!1);var i=this.diagram;null!==i&&fh(i,t,e,this.dragOptions,n)},De.prototype.findDragOverObject=function(t){var e=this;return cu(this.diagram,t,null,function(n){return!(n=null===n||!!(null===(n=n.part)||n instanceof Pt||n.layer.isTemporary||e.draggedParts&&e.draggedParts.contains(n)||e.copiedParts&&e.copiedParts.contains(n)))})},De.prototype.doUpdateCursor=function(t,e){var n=this.diagram;(e||this.hn!==t)&&(!this.diagram.currentTool.isActive||this.mayCopy()?n.currentCursor=this.copyCursor:this.mayMove()?n.currentCursor=this.moveCursor:this.mayDragOut()&&(n.currentCursor=this.nodropCursor))},De.prototype.doDragOver=function(){},De.prototype.doDropOnto=function(){},De.prototype.doMouseMove=function(){if(this.isActive){var t=this.diagram,e=t.lastInput;this.simulatedMouseMove(e.event,e.documentPoint,e.targetDiagram)||null===this.currentPart||null===this.draggedParts||(this.mayCopy()?(Eo(this,!1),Pg(t,this.copiedParts),_s(this,this.copiedParts,!1),Ag(t,this.copiedParts)):this.mayMove()?(aa(this),_s(this,this.draggedParts,!0)):this.mayDragOut()?(Eo(this,!1),_s(this,this.copiedParts,!1)):aa(this),ev(this,t.lastInput.documentPoint))}},De.prototype.doMouseUp=function(){if(this.isActive){var t=this.diagram,e=t.lastInput;if(!this.simulatedMouseUp(e.event,e.documentPoint,e.targetDiagram)){e=!1;var n=this.mayCopy();if(n&&null!==this.copiedParts?(aa(this),Eo(this,!0),Pg(t,this.copiedParts),_s(this,this.copiedParts,!1),Ag(t,this.copiedParts),null!==this.copiedParts&&(t.P("ChangingSelection",t.selection),t.clearSelection(!0),this.copiedParts.iteratorKeys.each(function(l){l.isSelected=!0}))):(e=!0,aa(this),this.mayMove()&&(_s(this,this.draggedParts,!0),ev(this,t.lastInput.documentPoint))),this.Gm=!0,vg(this,t.lastInput.documentPoint),this.isActive){var i=n?this.copiedParts.Cf():this.draggedParts.Cf();this.copiedParts=null,e&&function aT(t){if(null!==t.draggedParts)for(var e=t.draggedParts.iterator;e.next();){var n=e.key;n instanceof J&&(null===(n=n.containingGroup)||null===n.placeholder||t.draggedParts.contains(n)||n.placeholder.w())}}(this),t.Va(),Ag(t,this.draggedParts),this.transactionResult=n?"Copy":"Move",t.P(n?"SelectionCopied":"SelectionMoved",i)}this.stopTool(),n&&t.P("ChangedSelection",t.selection)}}},De.prototype.simulatedMouseMove=function(t,e,n){if(null===bn)return!1;var i=bn.diagram;n instanceof V||(n=null);var l=eu;return n!==l&&(null!==l&&l!==i&&(l.lg(),bn.isDragOutStarted=!1,null!==(l=l.toolManager.findTool("Dragging"))&&l.doSimulatedDragLeave()),eu=n,null!==n&&n!==i&&(yd(),null!==(l=n.toolManager.findTool("Dragging"))&&(Ln.contains(l)||Ln.add(l),l.doSimulatedDragEnter())),this.doUpdateCursor(null,!0)),!(null===n||n===i||!n.allowDrop||n.isReadOnly||!n.allowInsert||(null!==(i=n.toolManager.findTool("Dragging"))&&(null!==t&&(void 0!==t.targetTouches&&(0<t.targetTouches.length?t=t.targetTouches[0]:0<t.changedTouches.length&&(t=t.changedTouches[0])),e=n.getMouse(t)),n.lastInput.documentPoint=e,n.lastInput.viewPoint=n.Ro(e),n.lastInput.down=!1,n.lastInput.up=!1,i.doSimulatedDragOver()),0))},De.prototype.simulatedMouseUp=function(t,e,n){if(null===bn)return!1;var i=eu,l=bn.diagram;if(null===n)return bn.doCancel(),!0;if(n!==i){var u=i.toolManager.findTool("Dragging");if(null!==i&&i!==l&&null!==u)return i.lg(),bn.isDragOutStarted=!1,u.doSimulatedDragLeave(),!1;eu=n,null!==(i=n.toolManager.findTool("Dragging"))&&(yd(),Ln.contains(i)||Ln.add(i),i.doSimulatedDragEnter())}return n!==this.diagram&&(null!==t?(void 0!==t.targetTouches&&(0<t.targetTouches.length?t=t.targetTouches[0]:0<t.changedTouches.length&&(t=t.changedTouches[0])),e=n.getMouse(t)):null===e&&(e=new P),n.lastInput.documentPoint=e,n.lastInput.viewPoint=n.Ro(e),n.lastInput.down=!1,n.lastInput.up=!0,null!==(t=n.toolManager.findTool("Dragging"))&&t.doSimulatedDrop(),null!==(t=bn)&&(n=t.mayCopy(),t.transactionResult=n?"Copy":"Move",t.stopTool()),!0)},De.prototype.mayCopy=function(){if(!this.isCopyEnabled)return!1;var t=this.diagram;if(t.isReadOnly||t.isModelReadOnly||!t.allowInsert||!t.allowCopy||(Do?!t.lastInput.alt:!t.lastInput.control))return!1;for(t=t.selection.iterator;t.next();)if(t.value.canCopy())return!0;return!(null===this.draggedLink||!this.dragsLink||!this.draggedLink.canCopy())},De.prototype.mayDragOut=function(){if(!this.isCopyEnabled)return!1;var t=this.diagram;if(!t.allowDragOut||!t.allowCopy||t.allowMove)return!1;for(t=t.selection.iterator;t.next();)if(t.value.canCopy())return!0;return!(null===this.draggedLink||!this.dragsLink||!this.draggedLink.canCopy())},De.prototype.mayMove=function(){var t=this.diagram;if(t.isReadOnly||!t.allowMove)return!1;for(t=t.selection.iterator;t.next();)if(t.value.canMove())return!0;return!(null===this.draggedLink||!this.dragsLink||!this.draggedLink.canMove())},De.prototype.computeBorder=function(t,e,n){return this.Gm||null===this.draggedParts||this.draggedParts.contains(t)?null:n.assign(e)},De.prototype.hz=function(){return bn},De.prototype.mayDragIn=function(){var t=this.diagram;return!(!t.allowDrop||t.isReadOnly||t.isModelReadOnly||!t.allowInsert)&&!(null===bn||bn.diagram.model.dataFormat!==t.model.dataFormat)},De.prototype.doSimulatedDragEnter=function(){if(this.mayDragIn()){var t=this.diagram;t.animationManager.wc(),fa(t),t.animationManager.wc(),null!==(t=bn)&&(t.diagram.os=!1),this.doUpdateCursor(null,!0)}},De.prototype.doSimulatedDragLeave=function(){null!==bn&&bn.doSimulatedDragOut(),this.doCancel()},De.prototype.doSimulatedDragOver=function(){var t=this.diagram;t.animationManager.lm=!0;var e=bn;if(null!==e&&null!==e.draggedParts){if(!this.mayDragIn())return;Cx(this,e.draggedParts.Cf(),!1,t.firstInput),_s(this,this.copiedParts,!1),ev(this,t.lastInput.documentPoint)}t.animationManager.lm=!1},De.prototype.doSimulatedDrop=function(){var t=this.diagram,e=bn;if(null!==e){var n=e.diagram;if(e.Gm=!0,aa(this),!this.mayDragIn())return;t.animationManager.lm=!0,t.P("ChangingSelection",t.selection),this.Da("Drop"),Cx(this,e.draggedParts.Cf(),!0,t.lastInput),_s(this,this.copiedParts,!1),null!==this.copiedParts&&(t.clearSelection(!0),this.copiedParts.iteratorKeys.each(function(i){i.isSelected=!0})),vg(this,t.lastInput.documentPoint),t.Va(),e=t.selection,null!==this.copiedParts?this.transactionResult="ExternalCopy":e=new Z,this.copiedParts=null,t.doFocus(),t.P("ExternalObjectsDropped",e,n),this.stopTransaction(),t.P("ChangedSelection",t.selection)}t.animationManager.lm=!1},De.prototype.doSimulatedDragOut=function(){var t=this.diagram;t.os=!1,t.currentCursor=this.mayCopy()||this.mayMove()?"":this.nodropCursor,this.hn=null},De.prototype.computeMove=function(t,e,n,i){return null!==(n=this.diagram)?n.computeMove(t,e,this.dragOptions,i):new P},Mt.Object.defineProperties(De.prototype,{isCopyEnabled:{get:function(){return this.nb},set:function(t){this.nb=t}},copiesEffectiveCollection:{get:function(){return this.u},set:function(t){this.u=t}},dragOptions:{get:function(){return this.ga},set:function(t){this.ga=t}},isGridSnapEnabled:{get:function(){return this.dragOptions.isGridSnapEnabled},set:function(t){this.dragOptions.isGridSnapEnabled=t}},isComplexRoutingRealtime:{get:function(){return this.cb},set:function(t){this.cb=t}},isGridSnapRealtime:{get:function(){return this.dragOptions.isGridSnapRealtime},set:function(t){this.dragOptions.isGridSnapRealtime=t}},gridSnapCellSize:{get:function(){return this.dragOptions.gridSnapCellSize},set:function(t){this.dragOptions.gridSnapCellSize.C(t)||(t=t.J(),this.dragOptions.gridSnapCellSize=t)}},gridSnapCellSpot:{get:function(){return this.dragOptions.gridSnapCellSpot},set:function(t){this.dragOptions.gridSnapCellSpot.C(t)||(t=t.J(),this.dragOptions.gridSnapCellSpot=t)}},gridSnapOrigin:{get:function(){return this.dragOptions.gridSnapOrigin},set:function(t){this.dragOptions.gridSnapOrigin.C(t)||(t=t.J(),this.dragOptions.gridSnapOrigin=t)}},dragsLink:{get:function(){return this.dragOptions.dragsLink},set:function(t){this.dragOptions.dragsLink=t}},dragsTree:{get:function(){return this.dragOptions.dragsTree},set:function(t){this.dragOptions.dragsTree=t}},copyCursor:{get:function(){return this.F},set:function(t){this.F=t}},moveCursor:{get:function(){return this.Hc},set:function(t){this.Hc=t}},nodropCursor:{get:function(){return this.Ic},set:function(t){this.Ic=t}},currentPart:{get:function(){return this.W},set:function(t){this.W=t}},copiedParts:{get:function(){return this.m},set:function(t){this.m=t}},draggedParts:{get:function(){return this.Ga},set:function(t){this.Ga=t}},draggingParts:{get:function(){return null!==this.copiedParts?this.copiedParts.Cf():null!==this.draggedParts?this.draggedParts.Cf():this.le}},draggedLink:{get:function(){return this.diagram.draggedLink},set:function(t){this.diagram.draggedLink=t}},isDragOutStarted:{get:function(){return this.Db},set:function(t){this.Db=t}},startPoint:{get:function(){return this.br},set:function(t){this.br.C(t)||this.br.assign(t)}},delay:{get:function(){return this.wk},set:function(t){this.wk=t}}}),De.prototype.getDraggingSource=De.prototype.hz;var bn=null,eu=null;function Gn(){kt.call(this),this.le=100,this.Ga=!1,this.u="pointer";var t=new H,e=new wt;e.isPanelMain=!0,e.stroke="blue",t.add(e),(e=new wt).toArrow="Standard",e.fill="blue",e.stroke="blue",t.add(e),t.layerName="Tool",this.vi=t,t=new J,(e=new wt).portId="",e.figure="Rectangle",e.fill=null,e.stroke="magenta",e.strokeWidth=2,e.desiredSize=ro,t.add(e),t.selectable=!1,t.layerName="Tool",this.ui=t,this.j=e,t=new J,(e=new wt).portId="",e.figure="Rectangle",e.fill=null,e.stroke="magenta",e.strokeWidth=2,e.desiredSize=ro,t.add(e),t.selectable=!1,t.layerName="Tool",this.wi=t,this.m=e,this.Ic=this.Hc=this.nb=this.cb=this.Db=null,this.ga=!0,this.Wo=new vt,this.Ff=this.bj=this.Gf=null}function iv(t,e,n,i){if(e===n)return!0;var l=e.fromNode;return!(null===l||!l.isLinkLabel||(i.add(l),!iv(t,l.labeledLink,n,i)))||!(null===(e=e.toNode)||!e.isLinkLabel||(i.add(e),!iv(t,e.labeledLink,n,i)))}function wd(t,e,n,i,l){if(e===n)return!0;if(null===e||null===n)return!1;for(var u=e.linksConnected;u.next();){var h=u.value;if(h!==i&&(!l||h.isTreeLink)&&h.toNode===e&&(h=h.fromNode)!==e&&wd(t,h,n,i,l))return!0}return!1}function gt(t,e,n,i,l){if(n===i)return!0;if(null===n||null===i||e.contains(n))return!1;e.add(n);for(var u=n.linksConnected;u.next();){var h=u.value;if(h!==l&&h.toNode===n&&(h=h.fromNode)!==n&&gt(t,e,h,i,l))return!0}return!1}function Ge(t,e,n,i,l){if(n===i)return!0;if(null===n||null===i||e.contains(n))return!1;e.add(n);for(var u=n.linksConnected;u.next();){var h=u.value;if(h!==l){var f=h.fromNode;if(h=h.toNode,(f=f===n?h:f)!==n&&Ge(t,e,f,i,l))return!0}}return!1}function ae(){Gn.call(this),this.name="Linking",this.W={},this.F=null,this.L=hn,this.Qd=null}De.className="DraggingTool",Ln=new q,Gt("draggingTool",function(){return this.findTool("Dragging")},function(t){this.gb("Dragging",t,this.mouseMoveTools)}),Ce.prototype.doCancel=function(){null!==bn&&bn.doCancel(),kt.prototype.doCancel.call(this)},Ht(Gn,kt),Gn.prototype.doStop=function(){this.diagram.lg(),this.originalToPort=this.originalToNode=this.originalFromPort=this.originalFromNode=this.originalLink=null,this.validPortsCache.clear(),this.targetPort=null},Gn.prototype.copyPortProperties=function(t,e,n,i,l){if(null!==t&&null!==e&&null!==n&&null!==i){var u=e.uf(),h=dt.alloc();h.width=e.naturalBounds.width*u,h.height=e.naturalBounds.height*u,i.desiredSize=h,dt.free(h),l?(i.toSpot=e.toSpot,i.toEndSegmentLength=e.toEndSegmentLength):(i.fromSpot=e.fromSpot,i.fromEndSegmentLength=e.fromEndSegmentLength),n.locationSpot=ut,u=P.alloc(),n.location=e.ia(ut,u),P.free(u),i.angle=e.fi(),null!==this.portTargeted&&this.portTargeted(t,e,n,i,l)}},Gn.prototype.setNoTargetPortProperties=function(t,e,n){null!==e&&(e.desiredSize=ro,e.fromSpot=Ne,e.toSpot=Ne),null!==t&&(t.location=this.diagram.lastInput.documentPoint),null!==this.portTargeted&&this.portTargeted(null,null,t,e,n)},Gn.prototype.doMouseDown=function(){this.isActive&&this.doMouseMove()},Gn.prototype.doMouseMove=function(){if(this.isActive){var t=this.diagram;if(this.targetPort=this.findTargetPort(this.isForwards),null!==this.targetPort&&this.targetPort.part instanceof J){var e=this.targetPort.part;this.isForwards?this.copyPortProperties(e,this.targetPort,this.temporaryToNode,this.temporaryToPort,!0):this.copyPortProperties(e,this.targetPort,this.temporaryFromNode,this.temporaryFromPort,!1)}else this.isForwards?this.setNoTargetPortProperties(this.temporaryToNode,this.temporaryToPort,!0):this.setNoTargetPortProperties(this.temporaryFromNode,this.temporaryFromPort,!1);(t.allowHorizontalScroll||t.allowVerticalScroll)&&t.Fr(t.lastInput.viewPoint)}},Gn.prototype.findValidLinkablePort=function(t,e){if(null===t)return null;var n=t.part;if(!(n instanceof J))return null;for(;null!==t;){var i=e?t.toLinkable:t.fromLinkable;if(!0===i&&(null!==t.portId||t instanceof J)&&(e?this.isValidTo(n,t):this.isValidFrom(n,t)))return t;if(!1===i)break;t=t.panel}return null},Gn.prototype.findTargetPort=function(t){var e=this.diagram,n=e.lastInput.documentPoint,i=this.portGravity;0>=i&&(i=.1);var l=this,u=e.hg(n,i,function(v){return l.findValidLinkablePort(v,t)},null,!0);for(i=1/0,e=null,u=u.iterator;u.next();){var h=u.value,f=h.part;if(f instanceof J){var p=h.ia(ut,P.alloc()),g=n.x-p.x,m=n.y-p.y;P.free(p),(p=g*g+m*m)<i&&(null!==(g=this.validPortsCache.I(h))?g&&(e=h,i=p):t&&this.isValidLink(this.originalFromNode,this.originalFromPort,f,h)||!t&&this.isValidLink(f,h,this.originalToNode,this.originalToPort)?(this.validPortsCache.add(h,!0),e=h,i=p):this.validPortsCache.add(h,!1))}}return null!==e&&(n=e.part)instanceof J&&(null===n.layer||n.layer.allowLink)?e:null},Gn.prototype.isValidFrom=function(t,e){if(null===t||null===e)return this.isUnconnectedLinkValid;if(this.diagram.currentTool===this&&(null!==t.layer&&!t.layer.allowLink||!0!==e.fromLinkable))return!1;var n=e.fromMaxLinks;if(1/0>n){if(null!==this.originalLink&&t===this.originalFromNode&&e===this.originalFromPort)return!0;if(null===(e=e.portId)&&(e=""),t.ro(e).count>=n)return!1}return!0},Gn.prototype.isValidTo=function(t,e){if(null===t||null===e)return this.isUnconnectedLinkValid;if(this.diagram.currentTool===this&&(null!==t.layer&&!t.layer.allowLink||!0!==e.toLinkable))return!1;var n=e.toMaxLinks;if(1/0>n){if(null!==this.originalLink&&t===this.originalToNode&&e===this.originalToPort)return!0;if(null===(e=e.portId)&&(e=""),t.Kd(e).count>=n)return!1}return!0},Gn.prototype.isInSameNode=function(t,e){return null!==t&&null!==e&&(t===e||(e=e.part,null!==(t=t.part)&&t===e))},Gn.prototype.isLinked=function(t,e){if(null===t||null===e)return!1;var n=t.part;if(!(n instanceof J))return!1;null===(t=t.portId)&&(t="");var i=e.part;if(!(i instanceof J))return!1;for(null===(e=e.portId)&&(e=""),e=i.Kd(e);e.next();)if((i=e.value).fromNode===n&&i.fromPortId===t)return!0;return!1},Gn.prototype.isValidLink=function(t,e,n,i){if(!this.isValidFrom(t,e)||!this.isValidTo(n,i)||!(null===e||null===i||(e.fromLinkableSelfNode&&i.toLinkableSelfNode||!this.isInSameNode(e,i))&&(e.fromLinkableDuplicates&&i.toLinkableDuplicates||!this.isLinked(e,i)))||null!==this.originalLink&&(null!==t&&this.isLabelDependentOnLink(t,this.originalLink)||null!==n&&this.isLabelDependentOnLink(n,this.originalLink))||null!==t&&null!==n&&(null===t.data&&null!==n.data||null!==t.data&&null===n.data)||!this.isValidCycle(t,n,this.originalLink))return!1;if(null!==t){var l=t.linkValidation;if(null!==l&&!l(t,e,n,i,this.originalLink))return!1}return!(null!==n&&(l=n.linkValidation,null!==l&&!l(t,e,n,i,this.originalLink)))&&(null===(l=this.linkValidation)||l(t,e,n,i,this.originalLink))},Gn.prototype.isLabelDependentOnLink=function(t,e){if(null===t)return!1;var n=t.labeledLink;if(null===n)return!1;if(n===e)return!0;var i=new Z;return i.add(t),iv(this,n,e,i)},Gn.prototype.isValidCycle=function(t,e,n){if(void 0===n&&(n=null),null===t||null===e)return this.isUnconnectedLinkValid;var i=this.diagram.validCycle;if(i!==Rd){if(i===Vx){if(null!==(i=n||this.temporaryLink)&&!i.isTreeLink)return!0;for(i=e.linksConnected;i.next();){var l=i.value;if(l!==n&&l.isTreeLink&&l.toNode===e)return!1}return!wd(this,t,e,n,!0)}if(i===Iv){if(null!==(i=n||this.temporaryLink)&&!i.isTreeLink)return!0;for(i=t.linksConnected;i.next();)if((l=i.value)!==n&&l.isTreeLink&&l.fromNode===t)return!1;return!wd(this,t,e,n,!0)}if(i===Vc)return t===e?t=!0:((i=new Z).add(e),t=gt(this,i,t,e,n)),!t;if(i===Ev)return!wd(this,t,e,n,!1);if(i===Bc)return t===e?t=!0:((i=new Z).add(e),t=Ge(this,i,t,e,n)),!t}return!0},Mt.Object.defineProperties(Gn.prototype,{portGravity:{get:function(){return this.le},set:function(t){0<=t&&(this.le=t)}},isUnconnectedLinkValid:{get:function(){return this.Ga},set:function(t){this.Ga=t}},linkingCursor:{get:function(){return this.u},set:function(t){this.u=t}},temporaryLink:{get:function(){return this.vi},set:function(t){this.vi=t}},temporaryFromNode:{get:function(){return this.ui},set:function(t){(this.ui=t)&&(this.j=t.port)}},temporaryFromPort:{get:function(){return this.j},set:function(t){if(null!==this.j){var e=this.j.panel;if(null!==e){var n=e.R.indexOf(this.j);e.mb(n),e.Cb(n,t)}}this.j=t}},temporaryToNode:{get:function(){return this.wi},set:function(t){(this.wi=t)&&(this.m=t.port)}},temporaryToPort:{get:function(){return this.m},set:function(t){if(null!==this.m){var e=this.m.panel;if(null!==e){var n=e.R.indexOf(this.m);e.mb(n),e.Cb(n,t)}}this.m=t}},originalLink:{get:function(){return this.Db},set:function(t){this.Db=t}},originalFromNode:{get:function(){return this.cb},set:function(t){this.cb=t}},originalFromPort:{get:function(){return this.nb},set:function(t){this.nb=t}},originalToNode:{get:function(){return this.Hc},set:function(t){this.Hc=t}},originalToPort:{get:function(){return this.Ic},set:function(t){this.Ic=t}},isForwards:{get:function(){return this.ga},set:function(t){this.ga=t}},validPortsCache:{get:function(){return this.Wo}},targetPort:{get:function(){return this.Gf},set:function(t){this.Gf=t}},linkValidation:{get:function(){return this.bj},set:function(t){this.bj=t}},portTargeted:{get:function(){return this.Ff},set:function(t){this.Ff=t}}}),Gn.className="LinkingBaseTool",Ht(ae,Gn),ae.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return!(t.isReadOnly||t.isModelReadOnly||!t.allowLink||!t.model.Vr()||!t.lastInput.left||t.currentTool!==this&&!this.isBeyondDragSize())&&null!==this.findLinkablePort()},ae.prototype.findLinkablePort=function(){var t=this.diagram,e=this.startObject;if(null===e&&(e=t.ec(t.firstInput.documentPoint,null,null)),null===e||!((t=e.part)instanceof J))return null;var n=this.direction;if(n===hn||n===ji){var i=this.findValidLinkablePort(e,!1);if(null!==i||this.startObject===t&&this.findValidLinkablePort(i=t.port,!1))return this.isForwards=!0,i}return n!==hn&&n!==rv||!(null!==(e=this.findValidLinkablePort(e,!0))||this.startObject===t&&this.findValidLinkablePort(e=t.port,!0))?null:(this.isForwards=!1,e)},ae.prototype.doActivate=function(){var t=this.diagram,e=this.findLinkablePort();null===e?this.stopTool():(this.Da(this.name),t.isMouseCaptured=!0,t.currentCursor=this.linkingCursor,this.isForwards?(null===this.temporaryToNode||this.temporaryToNode.location.v()||(this.temporaryToNode.location=t.lastInput.documentPoint),this.originalFromPort=e,(e=this.originalFromPort.part)instanceof J&&(this.originalFromNode=e),this.copyPortProperties(this.originalFromNode,this.originalFromPort,this.temporaryFromNode,this.temporaryFromPort,!1)):(null===this.temporaryFromNode||this.temporaryFromNode.location.v()||(this.temporaryFromNode.location=t.lastInput.documentPoint),this.originalToPort=e,(e=this.originalToPort.part)instanceof J&&(this.originalToNode=e),this.copyPortProperties(this.originalToNode,this.originalToPort,this.temporaryToNode,this.temporaryToPort,!0)),t.add(this.temporaryFromNode),t.add(this.temporaryToNode),null!==this.temporaryLink&&(null!==this.temporaryFromNode&&(this.temporaryLink.fromNode=this.temporaryFromNode),null!==this.temporaryToNode&&(this.temporaryLink.toNode=this.temporaryToNode),this.temporaryLink.isTreeLink=this.isNewTreeLink(),this.temporaryLink.ab(),t.add(this.temporaryLink)),this.isActive=!0)},ae.prototype.doDeactivate=function(){this.isActive=!1;var t=this.diagram;t.remove(this.temporaryLink),t.remove(this.temporaryFromNode),t.remove(this.temporaryToNode),t.isMouseCaptured=!1,t.currentCursor="",this.stopTransaction()},ae.prototype.doStop=function(){Gn.prototype.doStop.call(this),this.startObject=null},ae.prototype.doMouseUp=function(){if(this.isActive){var t=this.diagram,e=this.transactionResult=null,n=null,i=null,l=null,u=null;try{var h=this.targetPort=this.findTargetPort(this.isForwards);if(null!==h){var f=h.part;f instanceof J&&(this.isForwards?(null!==this.originalFromNode&&(e=this.originalFromNode,n=this.originalFromPort),i=f,l=h):(e=f,n=h,null!==this.originalToNode&&(i=this.originalToNode,l=this.originalToPort)))}else this.isForwards?null!==this.originalFromNode&&this.isUnconnectedLinkValid&&(e=this.originalFromNode,n=this.originalFromPort):null!==this.originalToNode&&this.isUnconnectedLinkValid&&(i=this.originalToNode,l=this.originalToPort);null!==e||null!==i?null!==(u=this.insertLink(e,n,i,l))?(null===h&&(this.isForwards?u.defaultToPoint=t.lastInput.documentPoint:u.defaultFromPoint=t.lastInput.documentPoint),t.allowSelect&&(t.P("ChangingSelection",t.selection),t.clearSelection(!0),u.isSelected=!0),this.transactionResult=this.name,t.P("LinkDrawn",u)):this.doNoLink(e,n,i,l):this.isForwards?this.doNoLink(this.originalFromNode,this.originalFromPort,null,null):this.doNoLink(null,null,this.originalToNode,this.originalToPort)}finally{this.stopTool(),u&&t.allowSelect&&t.P("ChangedSelection",t.selection)}}},ae.prototype.isNewTreeLink=function(){var t=this.archetypeLinkData;if(null===t)return!0;if(t instanceof H)return t.isTreeLink;var e=this.diagram;return null===e||(t=e.partManager.getLinkCategoryForData(t),null===(e=e.partManager.findLinkTemplateForCategory(t))||e.isTreeLink)},ae.prototype.insertLink=function(t,e,n,i){return this.diagram.partManager.insertLink(t,e,n,i)},ae.prototype.doNoLink=function(){},Mt.Object.defineProperties(ae.prototype,{archetypeLinkData:{get:function(){return this.W},set:function(t){this.W=t}},archetypeLabelNodeData:{get:function(){return this.F},set:function(t){this.F=t}},direction:{get:function(){return this.L},set:function(t){this.L=t}},startObject:{get:function(){return this.Qd},set:function(t){this.Qd=t}}});var hn=new W(ae,"Either",0),ji=new W(ae,"ForwardsOnly",0),rv=new W(ae,"BackwardsOnly",0);function Vi(){Gn.call(this),this.name="Relinking";var t=new wt;t.figure="Diamond",t.desiredSize=vc,t.fill="lightblue",t.stroke="dodgerblue",t.cursor=this.linkingCursor,t.segmentIndex=0,this.W=t,(t=new wt).figure="Diamond",t.desiredSize=vc,t.fill="lightblue",t.stroke="dodgerblue",t.cursor=this.linkingCursor,t.segmentIndex=-1,this.Qd=t,this.F=null,this.iw=new B}function Js(t,e,n,i,l){null!==e?(t.copyPortProperties(e,n,t.temporaryFromNode,t.temporaryFromPort,!1),t.diagram.add(t.temporaryFromNode)):t.diagram.remove(t.temporaryFromNode),null!==i?(t.copyPortProperties(i,l,t.temporaryToNode,t.temporaryToPort,!0),t.diagram.add(t.temporaryToNode)):t.diagram.remove(t.temporaryToNode)}function ze(){kt.call(this),this.name="LinkReshaping";var t=new wt;t.figure="Rectangle",t.desiredSize=cg,t.fill="lightblue",t.stroke="dodgerblue",this.m=t,(t=new wt).figure="Diamond",t.desiredSize=vc,t.fill="lightblue",t.stroke="dodgerblue",t.cursor="move",this.u=t,this.F=3,this.vs=this.j=null,this.jw=new P,this.xq=new q}function nu(t,e,n,i,l,u){return u?Math.abs(e.y-n.y)<t.resegmentingDistance&&Math.abs(n.y-i.y)<t.resegmentingDistance&&Math.abs(i.y-l.y)<t.resegmentingDistance:Math.abs(e.x-n.x)<t.resegmentingDistance&&Math.abs(n.x-i.x)<t.resegmentingDistance&&Math.abs(i.x-l.x)<t.resegmentingDistance}ae.className="LinkingTool",ae.Either=hn,ae.ForwardsOnly=ji,ae.BackwardsOnly=rv,Ht(Vi,Gn),Vi.prototype.updateAdornments=function(t){if(null!==t&&t instanceof H){var e="RelinkFrom",n=null;if(t.isSelected&&!this.diagram.isReadOnly){var i=t.selectionObject;null!==i&&t.canRelinkFrom()&&t.actualBounds.v()&&t.isVisible()&&i.actualBounds.v()&&i.zf()&&null===(n=t.Hj(e))&&(n=this.makeAdornment(i,!1),t.Tg(e,n))}null===n&&t.Af(e),e="RelinkTo",n=null,t.isSelected&&!this.diagram.isReadOnly&&null!==(i=t.selectionObject)&&t.canRelinkTo()&&t.actualBounds.v()&&t.isVisible()&&i.actualBounds.v()&&i.zf()&&(null===(n=t.Hj(e))?(n=this.makeAdornment(i,!0),t.Tg(e,n)):n.w()),null===n&&t.Af(e)}},Vi.prototype.makeAdornment=function(t,e){var n=new Pt;return n.type=$.Link,null!==(e=e?this.toHandleArchetype:this.fromHandleArchetype)&&n.add(e.copy()),n.adornedObject=t,n},Vi.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;if(t.isReadOnly||t.isModelReadOnly||!t.allowRelink||!t.model.Vr()||!t.lastInput.left)return!1;var e=this.findToolHandleAt(t.firstInput.documentPoint,"RelinkFrom");return null===e&&(e=this.findToolHandleAt(t.firstInput.documentPoint,"RelinkTo")),null!==e},Vi.prototype.doActivate=function(){var t=this.diagram;if(null===this.originalLink){var e=this.handle;if(null===e&&null===(e=this.findToolHandleAt(t.firstInput.documentPoint,"RelinkFrom"))&&(e=this.findToolHandleAt(t.firstInput.documentPoint,"RelinkTo")),null===e)return;var n=e.part;if(!(n instanceof Pt&&n.adornedPart instanceof H))return;this.handle=e,this.isForwards=null===n||"RelinkTo"===n.category,this.originalLink=n.adornedPart}this.Da(this.name),t.isMouseCaptured=!0,t.currentCursor=this.linkingCursor,this.originalFromPort=this.originalLink.fromPort,this.originalFromNode=this.originalLink.fromNode,this.originalToPort=this.originalLink.toPort,this.originalToNode=this.originalLink.toNode,this.iw.set(this.originalLink.actualBounds),null!==this.originalLink&&0<this.originalLink.pointsCount&&(null===this.originalLink.fromNode&&(null!==this.temporaryFromPort&&(this.temporaryFromPort.desiredSize=th),null!==this.temporaryFromNode&&(this.temporaryFromNode.location=this.originalLink.i(0))),null===this.originalLink.toNode&&(null!==this.temporaryToPort&&(this.temporaryToPort.desiredSize=th),null!==this.temporaryToNode&&(this.temporaryToNode.location=this.originalLink.i(this.originalLink.pointsCount-1)))),this.copyPortProperties(this.originalFromNode,this.originalFromPort,this.temporaryFromNode,this.temporaryFromPort,!1),this.copyPortProperties(this.originalToNode,this.originalToPort,this.temporaryToNode,this.temporaryToPort,!0),t.add(this.temporaryFromNode),t.add(this.temporaryToNode),null!==this.temporaryLink&&(null!==this.temporaryFromNode&&(this.temporaryLink.fromNode=this.temporaryFromNode),null!==this.temporaryToNode&&(this.temporaryLink.toNode=this.temporaryToNode),this.copyLinkProperties(this.originalLink,this.temporaryLink),this.temporaryLink.ab(),t.add(this.temporaryLink)),this.isActive=!0},Vi.prototype.copyLinkProperties=function(t,e){if(null!==t&&null!==e){e.adjusting=t.adjusting,e.corner=t.corner;var n=t.curve;(n===Th||n===bl)&&(n=ri),e.curve=n,e.curviness=t.curviness,e.isTreeLink=t.isTreeLink,e.points=t.points,e.routing=t.routing,e.smoothness=t.smoothness,e.fromSpot=t.fromSpot,e.fromEndSegmentLength=t.fromEndSegmentLength,e.fromShortLength=t.fromShortLength,e.toSpot=t.toSpot,e.toEndSegmentLength=t.toEndSegmentLength,e.toShortLength=t.toShortLength}},Vi.prototype.doDeactivate=function(){this.isActive=!1;var t=this.diagram;t.remove(this.temporaryLink),t.remove(this.temporaryFromNode),t.remove(this.temporaryToNode),t.isMouseCaptured=!1,t.currentCursor="",this.stopTransaction()},Vi.prototype.doStop=function(){Gn.prototype.doStop.call(this),this.handle=null},Vi.prototype.doMouseUp=function(){if(this.isActive){var t=this.diagram;this.transactionResult=null;var e=this.originalFromNode,n=this.originalFromPort,i=this.originalToNode,l=this.originalToPort,u=this.originalLink;try{if(this.targetPort=this.findTargetPort(this.isForwards),null!==this.targetPort){var h=this.targetPort.part;h instanceof J&&(this.isForwards?(i=h,l=this.targetPort):(e=h,n=this.targetPort))}else this.isUnconnectedLinkValid?this.isForwards?l=i=null:n=e=null:u=null;null!==u?(this.reconnectLink(u,this.isForwards?i:e,this.isForwards?l:n,this.isForwards),null===this.targetPort&&(this.isForwards?u.defaultToPoint=t.lastInput.documentPoint:u.defaultFromPoint=t.lastInput.documentPoint,u.ab()),this.transactionResult=this.name,t.P("LinkRelinked",u,this.isForwards?this.originalToPort:this.originalFromPort)):this.doNoRelink(this.originalLink,this.isForwards),this.originalLink.Ao(this.iw)}finally{this.stopTool()}}},Vi.prototype.reconnectLink=function(t,e,n,i){return n=null!==n&&null!==n.portId?n.portId:"",i?(t.toNode=e,t.toPortId=n):(t.fromNode=e,t.fromPortId=n),!0},Vi.prototype.doNoRelink=function(){},Mt.Object.defineProperties(Vi.prototype,{fromHandleArchetype:{get:function(){return this.W},set:function(t){this.W=t}},toHandleArchetype:{get:function(){return this.Qd},set:function(t){this.Qd=t}},handle:{get:function(){return this.F},set:function(t){if(null!==t&&!(t.part instanceof Pt))throw Error("new handle is not in an Adornment: "+t);this.F=t}}}),Vi.className="RelinkingTool",Gt("linkingTool",function(){return this.findTool("Linking")},function(t){this.gb("Linking",t,this.mouseMoveTools)}),Gt("relinkingTool",function(){return this.findTool("Relinking")},function(t){this.gb("Relinking",t,this.mouseDownTools)}),Ht(ze,kt),ze.prototype.Du=function(t){return t&&0!==t.reshapingBehavior.value?t.reshapingBehavior:Mx},ze.prototype.Wl=function(t,e){t.reshapingBehavior=e},ze.prototype.updateAdornments=function(t){if(null!==t&&t instanceof H){var e=null;if(t.isSelected&&!this.diagram.isReadOnly){var n=t.path;null!==n&&t.canReshape()&&t.actualBounds.v()&&t.isVisible()&&n.actualBounds.v()&&n.zf()&&(null===(e=t.Hj(this.name))||e.ew!==t.pointsCount||e.yw!==t.resegmentable)&&null!==(e=this.makeAdornment(n))&&(e.ew=t.pointsCount,e.yw=t.resegmentable,t.Tg(this.name,e))}null===e&&t.Af(this.name)}},ze.prototype.makeAdornment=function(t){var e=t.part,n=e.pointsCount,i=e.isOrthogonal,l=null;if(null!==e.points&&1<n){(l=new Pt).type=$.Link,n=e.firstPickIndex;var u=e.lastPickIndex,h=i?1:0;if(e.resegmentable&&e.computeCurve()!==Ni)for(var f=n+h;f<u-h;f++){var p=this.makeResegmentHandle(t,f);null!==p&&(p.segmentIndex=f,p.segmentFraction=.5,p.fromMaxLinks=999,l.add(p))}for(h=n+1;h<u;h++)if(null!==(f=this.makeHandle(t,h))){if(f.segmentIndex=h,h!==n)if(h===n+1&&i){p=e.i(n);var g=e.i(n+1);F.B(p.x,g.x)&&F.B(p.y,g.y)&&(g=e.i(n-1)),F.B(p.x,g.x)?(this.Wl(f,xd),f.cursor="n-resize"):F.B(p.y,g.y)&&(this.Wl(f,_c),f.cursor="w-resize")}else h===u-1&&i?(p=e.i(u-1),g=e.i(u),F.B(p.x,g.x)&&F.B(p.y,g.y)&&(p=e.i(u+1)),F.B(p.x,g.x)?(this.Wl(f,xd),f.cursor="n-resize"):F.B(p.y,g.y)&&(this.Wl(f,_c),f.cursor="w-resize")):h!==u&&(this.Wl(f,wg),f.cursor="move");l.add(f)}l.adornedObject=t}return l},ze.prototype.makeHandle=function(){var t=this.handleArchetype;return null===t?null:t.copy()},ze.prototype.makeResegmentHandle=function(){var t=this.midHandleArchetype;return null===t?null:t.copy()},ze.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return!(t.isReadOnly||!t.allowReshape||!t.lastInput.left)&&null!==this.findToolHandleAt(t.firstInput.documentPoint,this.name)},ze.prototype.doActivate=function(){var t=this.diagram;if(null===this.handle&&(this.handle=this.findToolHandleAt(t.firstInput.documentPoint,this.name)),null!==this.handle){var e=this.handle.part.adornedPart;if(e instanceof H){if(this.vs=e,t.isMouseCaptured=!0,this.Da(this.name),e.resegmentable&&999===this.handle.fromMaxLinks){var n=e.points.copy(),i=this.getResegmentingPoint();if(n.Cb(this.handle.segmentIndex+1,i),e.isOrthogonal&&n.Cb(this.handle.segmentIndex+1,i),e.points=n,e.Rb(),e.updateAdornments(),this.handle=this.findToolHandleAt(t.firstInput.documentPoint,this.name),null===this.handle)return void this.doDeactivate()}this.jw=e.i(this.handle.segmentIndex),this.xq=e.points.copy(),this.isActive=!0}}},ze.prototype.doDeactivate=function(){this.stopTransaction(),this.vs=this.handle=null,this.isActive=this.diagram.isMouseCaptured=!1},ze.prototype.stopTransaction=function(){var t=this.diagram,e=kt.prototype.stopTransaction.call(this);return e&&null!==t.undoManager.transactionToUndo&&t.undoManager.transactionToUndo.Vj(),e},ze.prototype.doCancel=function(){var t=this.adornedLink;null!==t&&(t.points=this.xq),this.stopTool()},ze.prototype.getResegmentingPoint=function(){return this.handle.ia(ut)},ze.prototype.doMouseMove=function(){var t=this.diagram;this.isActive&&(t=this.computeReshape(t.lastInput.documentPoint),this.reshape(t))},ze.prototype.doMouseUp=function(){var t=this.diagram;if(this.isActive){var e=this.computeReshape(t.lastInput.documentPoint);if(this.reshape(e),null!==(e=this.adornedLink)&&e.resegmentable){var n=this.handle.segmentIndex,i=e.i(n-1),l=e.i(n),u=e.i(n+1);if(e.isOrthogonal){if(n>e.firstPickIndex+1&&n<e.lastPickIndex-1){var h=e.i(n-2);if(Math.abs(i.x-l.x)<this.resegmentingDistance&&Math.abs(i.y-l.y)<this.resegmentingDistance&&(nu(this,h,i,l,u,!0)||nu(this,h,i,l,u,!1))){var f=e.points.copy();nu(this,h,i,l,u,!0)?(f.Vc(n-2,new P(h.x,(u.y+h.y)/2)),f.Vc(n+1,new P(u.x,(u.y+h.y)/2))):(f.Vc(n-2,new P((u.x+h.x)/2,h.y)),f.Vc(n+1,new P((u.x+h.x)/2,u.y))),f.mb(n),f.mb(n-1),e.points=f,e.Rb()}else h=e.i(n+2),Math.abs(l.x-u.x)<this.resegmentingDistance&&Math.abs(l.y-u.y)<this.resegmentingDistance&&(nu(this,i,l,u,h,!0)||nu(this,i,l,u,h,!1))&&(f=e.points.copy(),nu(this,i,l,u,h,!0)?(f.Vc(n-1,new P(i.x,(i.y+h.y)/2)),f.Vc(n+2,new P(h.x,(i.y+h.y)/2))):(f.Vc(n-1,new P((i.x+h.x)/2,i.y)),f.Vc(n+2,new P((i.x+h.x)/2,h.y))),f.mb(n+1),f.mb(n),e.points=f,e.Rb())}}else h=P.alloc(),F.fh(i.x,i.y,u.x,u.y,l.x,l.y,h)&&h.rf(l)<this.resegmentingDistance*this.resegmentingDistance&&((i=e.points.copy()).mb(n),e.points=i,e.Rb()),P.free(h)}t.Va(),this.transactionResult=this.name,t.P("LinkReshaped",this.adornedLink,this.xq)}this.stopTool()},ze.prototype.reshape=function(t){var e=this.adornedLink;e.jh();var n=this.handle.segmentIndex,i=this.Du(this.handle);if(e.isOrthogonal)if(n===e.firstPickIndex+1)n=e.firstPickIndex+1,i===xd?(e.M(n,e.i(n-1).x,t.y),e.M(n+1,e.i(n+2).x,t.y)):i===_c&&(e.M(n,t.x,e.i(n-1).y),e.M(n+1,t.x,e.i(n+2).y));else if(n===e.lastPickIndex-1)n=e.lastPickIndex-1,i===xd?(e.M(n-1,e.i(n-2).x,t.y),e.M(n,e.i(n+1).x,t.y)):i===_c&&(e.M(n-1,t.x,e.i(n-2).y),e.M(n,t.x,e.i(n+1).y));else{var l=e.i(i=n),u=e.i(i-1),h=e.i(i+1);F.B(u.x,l.x)&&F.B(l.y,h.y)?(F.B(u.x,e.i(i-2).x)&&!F.B(u.y,e.i(i-2).y)?(e.l(i,t.x,u.y),n++,i++):e.M(i-1,t.x,u.y),F.B(h.y,e.i(i+2).y)&&!F.B(h.x,e.i(i+2).x)?e.l(i+1,h.x,t.y):e.M(i+1,h.x,t.y)):F.B(u.y,l.y)&&F.B(l.x,h.x)?(F.B(u.y,e.i(i-2).y)&&!F.B(u.x,e.i(i-2).x)?(e.l(i,u.x,t.y),n++,i++):e.M(i-1,u.x,t.y),F.B(h.x,e.i(i+2).x)&&!F.B(h.y,e.i(i+2).y)?e.l(i+1,t.x,h.y):e.M(i+1,t.x,h.y)):F.B(u.x,l.x)&&F.B(l.x,h.x)?(F.B(u.x,e.i(i-2).x)&&!F.B(u.y,e.i(i-2).y)?(e.l(i,t.x,u.y),n++,i++):e.M(i-1,t.x,u.y),F.B(h.x,e.i(i+2).x)&&!F.B(h.y,e.i(i+2).y)?e.l(i+1,t.x,h.y):e.M(i+1,t.x,h.y)):F.B(u.y,l.y)&&F.B(l.y,h.y)&&(F.B(u.y,e.i(i-2).y)&&!F.B(u.x,e.i(i-2).x)?(e.l(i,u.x,t.y),n++,i++):e.M(i-1,u.x,t.y),F.B(h.y,e.i(i+2).y)&&!F.B(h.x,e.i(i+2).x)?e.l(i+1,h.x,t.y):e.M(i+1,h.x,t.y)),e.M(n,t.x,t.y)}else e.M(n,t.x,t.y),l=e.fromPort,null!==(i=e.fromNode)&&null!==(u=i.findVisibleNode())&&u!==i&&(l=(i=u).port),1===n&&e.computeSpot(!0,l).Fc()&&(u=l.ia(ut,P.alloc()),i=e.getLinkPointFromPoint(i,l,u,t,!0,P.alloc()),e.M(0,i.x,i.y),P.free(u),P.free(i)),l=e.toPort,null!==(i=e.toNode)&&null!==(u=i.findVisibleNode())&&u!==i&&(l=(i=u).port),n===e.pointsCount-2&&e.computeSpot(!1,l).Fc()&&(n=l.ia(ut,P.alloc()),t=e.getLinkPointFromPoint(i,l,n,t,!1,P.alloc()),e.M(e.pointsCount-1,t.x,t.y),P.free(n),P.free(t));e.pf()},ze.prototype.computeReshape=function(t){var e=this.adornedLink,n=this.handle.segmentIndex;switch(this.Du(this.handle)){case wg:return t;case xd:return new P(e.i(n).x,t.y);case _c:return new P(t.x,e.i(n).y);default:return e.i(n)}},Mt.Object.defineProperties(ze.prototype,{handleArchetype:{get:function(){return this.m},set:function(t){this.m=t}},midHandleArchetype:{get:function(){return this.u},set:function(t){this.u=t}},handle:{get:function(){return this.j},set:function(t){if(null!==t&&!(t.part instanceof Pt))throw Error("new handle is not in an Adornment: "+t);this.j=t}},adornedLink:{get:function(){return this.vs}},resegmentingDistance:{get:function(){return this.F},set:function(t){this.F=t}},originalPoint:{get:function(){return this.jw}},originalPoints:{get:function(){return this.xq}}}),ze.prototype.setReshapingBehavior=ze.prototype.Wl,ze.prototype.getReshapingBehavior=ze.prototype.Du;var Mx=new W(ze,"None",0),_c=new W(ze,"Horizontal",1),xd=new W(ze,"Vertical",2),wg=new W(ze,"All",3);function je(){kt.call(this),this.name="Resizing",this.m=new dt(1,1).freeze(),this.j=new dt(9999,9999).freeze(),this.pg=new dt(NaN,NaN).freeze(),this.W=!1,this.ga=!0,this.me=null;var t=new wt;t.alignmentFocus=ut,t.figure="Rectangle",t.desiredSize=cg,t.fill="lightblue",t.stroke="dodgerblue",t.strokeWidth=1,t.cursor="pointer",this.F=t,this.u=null,this.wq=new P,this.hw=new dt,this.An=new P,this.Us=new dt(0,0),this.Ts=new dt(1/0,1/0),this.Ss=new dt(1,1)}function Fn(){kt.call(this),this.name="Rotating",this.ga=45,this.W=2,this.An=new P,this.me=null;var t=new wt;t.figure="Ellipse",t.desiredSize=vc,t.fill="lightblue",t.stroke="dodgerblue",t.strokeWidth=1,t.cursor="pointer",this.m=t,this.j=null,this.gw=0,this.Jq=new P(NaN,NaN),this.u=0,this.F=50}function sh(){kt.call(this),this.name="ClickSelecting"}function ao(){kt.call(this),this.name="Action",this.ck=null}function zr(){kt.call(this),this.name="ClickCreating",this.Li=null,this.m=!0,this.j=!1,this.Rv=new P(0,0)}function Ts(){kt.call(this),this.name="DragSelecting",this.wk=175,this.m=!1;var t=new lt;t.layerName="Tool",t.selectable=!1;var e=new wt;e.name="SHAPE",e.figure="Rectangle",e.fill=null,e.stroke="magenta",t.add(e),this.j=t}function ns(){kt.call(this),this.name="Panning",this.Ct=new P,this.ey=new P,this.og=!1;var t=this;this.ow=function(){var e=t.diagram;null!==e&&e.removeEventListener(pt.document,"scroll",t.ow,!1),t.stopTool()}}function Dl(){this.F=this.u=this.j=this.m=null}function Io(t,e,n){this.text=t,this.Kw=e,this.visible=n}function Bi(){kt.call(this),this.name="ContextMenu",this.m=this.Js=this.j=null,this.cw=new P,this.Ls=null,this.gt=!1;var t=this;this.Zt=function(){t.stopTool()}}function xg(t){return t.preventDefault(),!1}function Cg(t){var e=t.diagram;if(t.isActive){var n=t.currentContextMenu;if(null!==n){if(!(n instanceof Dl)){var i=e.ec(e.lastInput.documentPoint,null,null);null!==i&&i.jg(n)&&t.standardMouseClick(null,null)}t.stopTool(),t.canStart()&&(e.currentTool=t,t.doMouseUp())}}else t.canStart()&&(Dx(t,!0),t.isActive||t.stopTool())}function Dx(t,e,n){if(void 0===n&&(n=null),!t.gt&&(t.gt=!0,e&&t.standardMouseSelect(),e=t.standardMouseClick(),t.gt=!1,!e)){if(t.isActive=!0,e=iu,null===n&&(n=t.findObjectWithContextMenu()),null!==n){var i=n.contextMenu;null!==i?(t.currentObject=n instanceof ot?n:null,t.showContextMenu(i,t.currentObject)):null!==e&&t.showContextMenu(e,t.currentObject)}else null!==e&&t.showContextMenu(e,null);t.currentContextMenu instanceof Pt&&!t.currentContextMenu.visible&&t.stopTool()}}ze.className="LinkReshapingTool",ze.None=Mx,ze.Horizontal=_c,ze.Vertical=xd,ze.All=wg,Gt("linkReshapingTool",function(){return this.findTool("LinkReshaping")},function(t){this.gb("LinkReshaping",t,this.mouseDownTools)}),Ht(je,kt),je.prototype.updateAdornments=function(t){if(!(null===t||t instanceof H)){if(t.isSelected&&!this.diagram.isReadOnly){var e=t.resizeObject,n=t.Hj(this.name);if(null!==e&&t.canResize()&&t.actualBounds.v()&&t.isVisible()&&e.actualBounds.v()&&e.zf()&&((null===n||n.adornedObject!==e)&&(n=this.makeAdornment(e)),null!==n))return e=e.fi(),Ol(t)&&this.updateResizeHandles(n,e),void t.Tg(this.name,n)}t.Af(this.name)}},je.prototype.makeAdornment=function(t){var e=t.part.resizeAdornmentTemplate;if(null===e){(e=new Pt).type=$.Spot,e.locationSpot=ut;var n=new mi;n.isPanelMain=!0,e.add(n),e.add(this.makeHandle(t,Oe)),e.add(this.makeHandle(t,hr)),e.add(this.makeHandle(t,cr)),e.add(this.makeHandle(t,gn)),e.add(this.makeHandle(t,dr)),e.add(this.makeHandle(t,di)),e.add(this.makeHandle(t,pi)),e.add(this.makeHandle(t,Ri))}else if(uo(e),null===(e=e.copy()))return null;return e.adornedObject=t,e},je.prototype.makeHandle=function(t,e){return null===(t=this.handleArchetype)?null:((t=t.copy()).alignment=e,t)},je.prototype.updateResizeHandles=function(t,e){if(null!==t)if(!t.alignment.Sb()&&("pointer"===t.cursor||0<t.cursor.indexOf("resize")))t:{var n=t.alignment;if(n.Fc()&&(n=ut),0>=n.x)e=0>=n.y?e+225:1<=n.y?e+135:e+180;else if(1<=n.x)0>=n.y?e+=315:1<=n.y&&(e+=45);else if(0>=n.y)e+=270;else{if(!(1<=n.y))break t;e+=90}0>e?e+=360:360<=e&&(e-=360),t.cursor=22.5>e?"e-resize":67.5>e?"se-resize":112.5>e?"s-resize":157.5>e?"sw-resize":202.5>e?"w-resize":247.5>e?"nw-resize":292.5>e?"n-resize":337.5>e?"ne-resize":"e-resize"}else if(t instanceof $)for(t=t.elements;t.next();)this.updateResizeHandles(t.value,e)},je.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return!(t.isReadOnly||!t.allowResize||!t.lastInput.left)&&null!==this.findToolHandleAt(t.firstInput.documentPoint,this.name)},je.prototype.doActivate=function(){var t=this.diagram;null===this.handle&&(this.handle=this.findToolHandleAt(t.firstInput.documentPoint,this.name)),null!==this.handle&&(this.adornedObject=this.handle.part.adornedObject,null!==this.adornedObject&&(t.isMouseCaptured=!0,t.animationManager.wc(),this.Da(this.name),this.wq.set(this.adornedObject.ia(this.handle.alignment.Qu())),this.An.set(this.adornedObject.part.location),this.hw.set(this.adornedObject.desiredSize),this.Ss=this.computeCellSize(),this.Us=this.computeMinSize(),this.Ts=this.computeMaxSize(),this.isActive=!0))},je.prototype.doDeactivate=function(){var t=this.diagram;this.stopTransaction(),this.me=this.handle=null,this.isActive=t.isMouseCaptured=!1},je.prototype.stopTransaction=function(){var t=this.diagram,e=kt.prototype.stopTransaction.call(this);return e&&null!==t.undoManager.transactionToUndo&&t.undoManager.transactionToUndo.Vj(),e},je.prototype.doCancel=function(){null!==this.adornedObject&&(this.adornedObject.desiredSize=this.originalDesiredSize,this.adornedObject.part.location=this.originalLocation),this.stopTool()},je.prototype.doMouseMove=function(){var t=this.diagram;if(this.isActive){var e=this.Us,n=this.Ts,i=this.Ss,l=this.adornedObject.Nr(t.lastInput.documentPoint,P.alloc()),u=this.computeReshape();e=this.computeResize(l,this.handle.alignment,e,n,i,u),this.resize(e),t.nd(),P.free(l)}},je.prototype.doMouseUp=function(){var t=this.diagram;if(this.isActive){var e=this.Us,n=this.Ts,i=this.Ss,l=this.adornedObject.Nr(t.lastInput.documentPoint,P.alloc()),u=this.computeReshape();e=this.computeResize(l,this.handle.alignment,e,n,i,u),this.resize(e),P.free(l),t.Va(),this.transactionResult=this.name,t.P("PartResized",this.adornedObject,this.originalDesiredSize)}this.stopTool()},je.prototype.resize=function(t){var e=this.diagram,n=this.adornedObject;if(null!==n){if(n.desiredSize=t.size,(t=n.part).Za(),n=n.ia(this.handle.alignment.Qu()),t instanceof yt){var i=new q;if(i.add(t),!this.dragsMembers&&null===t.placeholder){var l=new Gc;l.dragsMembers=!1}e.moveParts(i,this.oppositePoint.copy().je(n),!0,l)}else t.location=t.location.copy().je(n).add(this.oppositePoint);e.nd()}},je.prototype.computeResize=function(t,e,n,i,l,u){e.Fc()&&(e=ut);var h=this.adornedObject.naturalBounds,f=h.x,p=h.y,g=h.x+h.width,m=h.y+h.height,v=1;if(!u){var x=h.height;0>=(v=h.width)&&(v=1),0>=x&&(x=1),v=x/v}return x=P.alloc(),F.so(t.x,t.y,f,p,l.width,l.height,x),t=h.copy(),0>=e.x?0>=e.y?(t.x=Math.max(x.x,g-i.width),t.x=Math.min(t.x,g-n.width),t.width=Math.max(g-t.x,n.width),t.y=Math.max(x.y,m-i.height),t.y=Math.min(t.y,m-n.height),t.height=Math.max(m-t.y,n.height),u||(1<=t.height/t.width?(t.height=Math.max(Math.min(v*t.width,i.height),n.height),t.width=t.height/v):(t.width=Math.max(Math.min(t.height/v,i.width),n.width),t.height=v*t.width),t.x=g-t.width,t.y=m-t.height)):1<=e.y?(t.x=Math.max(x.x,g-i.width),t.x=Math.min(t.x,g-n.width),t.width=Math.max(g-t.x,n.width),t.height=Math.max(Math.min(x.y-p,i.height),n.height),u||(1<=t.height/t.width?(t.height=Math.max(Math.min(v*t.width,i.height),n.height),t.width=t.height/v):(t.width=Math.max(Math.min(t.height/v,i.width),n.width),t.height=v*t.width),t.x=g-t.width)):(t.x=Math.max(x.x,g-i.width),t.x=Math.min(t.x,g-n.width),t.width=g-t.x,u||(t.height=Math.max(Math.min(v*t.width,i.height),n.height),t.width=t.height/v,t.y=p+.5*(m-p-t.height))):1<=e.x?0>=e.y?(t.width=Math.max(Math.min(x.x-f,i.width),n.width),t.y=Math.max(x.y,m-i.height),t.y=Math.min(t.y,m-n.height),t.height=Math.max(m-t.y,n.height),u||(1<=t.height/t.width?(t.height=Math.max(Math.min(v*t.width,i.height),n.height),t.width=t.height/v):(t.width=Math.max(Math.min(t.height/v,i.width),n.width),t.height=v*t.width),t.y=m-t.height)):1<=e.y?(t.width=Math.max(Math.min(x.x-f,i.width),n.width),t.height=Math.max(Math.min(x.y-p,i.height),n.height),u||(1<=t.height/t.width?(t.height=Math.max(Math.min(v*t.width,i.height),n.height),t.width=t.height/v):(t.width=Math.max(Math.min(t.height/v,i.width),n.width),t.height=v*t.width))):(t.width=Math.max(Math.min(x.x-f,i.width),n.width),u||(t.height=Math.max(Math.min(v*t.width,i.height),n.height),t.width=t.height/v,t.y=p+.5*(m-p-t.height))):0>=e.y?(t.y=Math.max(x.y,m-i.height),t.y=Math.min(t.y,m-n.height),t.height=m-t.y,u||(t.width=Math.max(Math.min(t.height/v,i.width),n.width),t.height=v*t.width,t.x=f+.5*(g-f-t.width))):1<=e.y&&(t.height=Math.max(Math.min(x.y-p,i.height),n.height),u||(t.width=Math.max(Math.min(t.height/v,i.width),n.width),t.height=v*t.width,t.x=f+.5*(g-f-t.width))),P.free(x),t},je.prototype.computeReshape=function(){var t=Le;return this.adornedObject instanceof wt&&(t=Qv(this.adornedObject)),!(t===Ps||this.diagram.lastInput.shift)},je.prototype.computeMinSize=function(){var t=this.adornedObject.minSize.copy(),e=this.minSize;return!isNaN(e.width)&&e.width>t.width&&(t.width=e.width),!isNaN(e.height)&&e.height>t.height&&(t.height=e.height),t},je.prototype.computeMaxSize=function(){var t=this.adornedObject.maxSize.copy(),e=this.maxSize;return!isNaN(e.width)&&e.width<t.width&&(t.width=e.width),!isNaN(e.height)&&e.height<t.height&&(t.height=e.height),t},je.prototype.computeCellSize=function(){var t=new dt(NaN,NaN),e=this.adornedObject.part;return null!==e&&(e=e.resizeCellSize,!isNaN(e.width)&&0<e.width&&(t.width=e.width),!isNaN(e.height)&&0<e.height&&(t.height=e.height)),e=this.cellSize,isNaN(t.width)&&!isNaN(e.width)&&0<e.width&&(t.width=e.width),isNaN(t.height)&&!isNaN(e.height)&&0<e.height&&(t.height=e.height),e=this.diagram,(isNaN(t.width)||isNaN(t.height))&&e&&null!==(e=e.grid)&&e.visible&&this.isGridSnapEnabled&&(e=e.gridCellSize,isNaN(t.width)&&!isNaN(e.width)&&0<e.width&&(t.width=e.width),isNaN(t.height)&&!isNaN(e.height)&&0<e.height&&(t.height=e.height)),(isNaN(t.width)||0===t.width||t.width===1/0)&&(t.width=1),(isNaN(t.height)||0===t.height||t.height===1/0)&&(t.height=1),t},Mt.Object.defineProperties(je.prototype,{handleArchetype:{get:function(){return this.F},set:function(t){this.F=t}},handle:{get:function(){return this.u},set:function(t){if(null!==t&&!(t.part instanceof Pt))throw Error("new handle is not in an Adornment: "+t);this.u=t}},adornedObject:{get:function(){return this.me},set:function(t){if(null!==t&&t.part instanceof Pt)throw Error("new handle must not be in an Adornment: "+t);this.me=t}},minSize:{get:function(){return this.m},set:function(t){if(!this.m.C(t)){var e=t.width;isNaN(e)&&(e=0),t=t.height,isNaN(t)&&(t=0),this.m.h(e,t)}}},maxSize:{get:function(){return this.j},set:function(t){if(!this.j.C(t)){var e=t.width;isNaN(e)&&(e=1/0),t=t.height,isNaN(t)&&(t=1/0),this.j.h(e,t)}}},cellSize:{get:function(){return this.pg},set:function(t){this.pg.C(t)||this.pg.assign(t)}},isGridSnapEnabled:{get:function(){return this.W},set:function(t){this.W=t}},dragsMembers:{get:function(){return this.ga},set:function(t){this.ga=t}},oppositePoint:{get:function(){return this.wq},set:function(t){this.wq.C(t)||this.wq.assign(t)}},originalDesiredSize:{get:function(){return this.hw}},originalLocation:{get:function(){return this.An}}}),je.className="ResizingTool",Gt("resizingTool",function(){return this.findTool("Resizing")},function(t){this.gb("Resizing",t,this.mouseDownTools)}),Ht(Fn,kt),Fn.prototype.updateAdornments=function(t){if(null!==t){if(t.eh()){var e=t.rotateObject;if(e===t||e===t.path||e.isPanelMain)return}if(t.isSelected&&!this.diagram.isReadOnly&&null!==(e=t.rotateObject)&&t.canRotate()&&t.actualBounds.v()&&t.isVisible()&&e.actualBounds.v()&&e.zf()){var n=t.Hj(this.name);if((null===n||n.adornedObject!==e)&&(n=this.makeAdornment(e)),null!==n)return n.angle=e.fi(),null===n.placeholder&&(n.location=this.computeAdornmentLocation(e)),void t.Tg(this.name,n)}t.Af(this.name)}},Fn.prototype.makeAdornment=function(t){var e=t.part.rotateAdornmentTemplate;if(null===e){(e=new Pt).type=$.Position,e.locationSpot=ut;var n=this.handleArchetype;null!==n&&e.add(n.copy())}else if(uo(e),null===(e=e.copy()))return null;return e.adornedObject=t,e},Fn.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return!(t.isReadOnly||!t.allowRotate||!t.lastInput.left)&&null!==this.findToolHandleAt(t.firstInput.documentPoint,this.name)},Fn.prototype.doActivate=function(){var t=this.diagram;if(null===this.adornedObject){if(null===this.handle&&(this.handle=this.findToolHandleAt(t.firstInput.documentPoint,this.name)),null===this.handle)return;this.adornedObject=this.handle.part.adornedObject}null!==this.adornedObject&&(t.isMouseCaptured=!0,t.delaysLayout=!0,this.Da(this.name),this.gw=this.adornedObject.angle,this.Jq=this.computeRotationPoint(this.adornedObject),this.An=this.adornedObject.part.location.copy(),this.isActive=!0)},Fn.prototype.computeRotationPoint=function(t){var e=t.part,n=e.locationObject;return e.rotationSpot.pb()?t.ia(e.rotationSpot):t===e||t===n?n.ia(e.locationSpot):t.ia(ut)},Fn.prototype.computeAdornmentLocation=function(t){var e=this.rotationPoint;e.v()||(e=this.computeRotationPoint(t)),e=t.Nr(e);var n=this.handleAngle;0>n?n+=360:360<=n&&(n-=360),n=Math.round(45*Math.round(n/45));var i=this.handleDistance;return 0===n?e.x=t.naturalBounds.width+i:45===n?(e.x=t.naturalBounds.width+i,e.y=t.naturalBounds.height+i):90===n?e.y=t.naturalBounds.height+i:135===n?(e.x=-i,e.y=t.naturalBounds.height+i):180===n?e.x=-i:225===n?(e.x=-i,e.y=-i):270===n?e.y=-i:315===n&&(e.x=t.naturalBounds.width+i,e.y=-i),t.ia(e)},Fn.prototype.doDeactivate=function(){var t=this.diagram;this.stopTransaction(),this.me=this.handle=null,this.Jq=new P(NaN,NaN),this.isActive=t.isMouseCaptured=!1},Fn.prototype.stopTransaction=function(){var t=this.diagram,e=kt.prototype.stopTransaction.call(this);return e&&null!==t.undoManager.transactionToUndo&&t.undoManager.transactionToUndo.Vj(),e},Fn.prototype.doCancel=function(){this.diagram.delaysLayout=!1,this.rotate(this.originalAngle),this.stopTool()},Fn.prototype.doMouseMove=function(){var t=this.diagram;this.isActive&&(t=this.computeRotate(t.lastInput.documentPoint),this.rotate(t))},Fn.prototype.doMouseUp=function(){var t=this.diagram;if(this.isActive){t.delaysLayout=!1;var e=this.computeRotate(t.lastInput.documentPoint);this.rotate(e),t.Va(),this.transactionResult=this.name,t.P("PartRotated",this.adornedObject,this.originalAngle)}this.stopTool()},Fn.prototype.rotate=function(t){var e=this.adornedObject;if(null!==e){e.angle=t,(e=e.part).Za();var n=e.locationObject,i=e.rotateObject;(n===i||n.jg(i))&&(n=this.An.copy(),e.location=n.je(this.rotationPoint).rotate(t-this.originalAngle).add(this.rotationPoint)),this.diagram.nd()}},Fn.prototype.computeRotate=function(t){t=this.rotationPoint.Ya(t)-this.handleAngle;var e=this.adornedObject.panel;null!==e&&(t-=e.fi()),360<=t?t-=360:0>t&&(t+=360),e=Math.min(Math.abs(this.snapAngleMultiple),180);var n=Math.min(Math.abs(this.snapAngleEpsilon),e/2);return!this.diagram.lastInput.shift&&0<e&&0<n&&(t%e<n?t=Math.floor(t/e)*e:t%e>e-n&&(t=(Math.floor(t/e)+1)*e)),360<=t?t-=360:0>t&&(t+=360),t},Mt.Object.defineProperties(Fn.prototype,{handleArchetype:{get:function(){return this.m},set:function(t){this.m=t}},handle:{get:function(){return this.j},set:function(t){if(null!==t&&!(t.part instanceof Pt))throw Error("new handle is not in an Adornment: "+t);this.j=t}},adornedObject:{get:function(){return this.me},set:function(t){if(null!==t&&t.part instanceof Pt)throw Error("new handle must not be in an Adornment: "+t);this.me=t}},snapAngleMultiple:{get:function(){return this.ga},set:function(t){this.ga=t}},snapAngleEpsilon:{get:function(){return this.W},set:function(t){this.W=t}},originalAngle:{get:function(){return this.gw}},rotationPoint:{get:function(){return this.Jq},set:function(t){this.Jq=t.copy()}},handleAngle:{get:function(){return this.u},set:function(t){this.u=t}},handleDistance:{get:function(){return this.F},set:function(t){this.F=t}}}),Fn.className="RotatingTool",Gt("rotatingTool",function(){return this.findTool("Rotating")},function(t){this.gb("Rotating",t,this.mouseDownTools)}),Ht(sh,kt),sh.prototype.canStart=function(){return!(!this.isEnabled||this.isBeyondDragSize())},sh.prototype.doMouseUp=function(){this.isActive&&(this.standardMouseSelect(),!this.standardMouseClick()&&this.diagram.lastInput.isTouchEvent&&this.diagram.toolManager.doToolTip()),this.stopTool()},sh.className="ClickSelectingTool",Ht(ao,kt),ao.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram,e=t.lastInput,n=t.ec(e.documentPoint,function(i){for(;null!==i.panel&&!i.isActionable;)i=i.panel;return i});return!(null===n||!n.isActionable||(this.ck=n,t.qk=t.ec(e.documentPoint,null,null),0))},ao.prototype.doMouseDown=function(){if(this.isActive){var t=this.diagram.lastInput,e=this.ck;null!==e&&(t.targetObject=e,null!==e.actionDown&&e.actionDown(t,e))}else this.canStart()&&this.doActivate()},ao.prototype.doMouseMove=function(){if(this.isActive){var t=this.diagram.lastInput,e=this.ck;null!==e&&(t.targetObject=e,null!==e.actionMove&&e.actionMove(t,e))}},ao.prototype.doMouseUp=function(){if(this.isActive){var t=this.diagram.lastInput,e=this.ck;if(null===e)return;t.targetObject=e,null!==e.actionUp&&e.actionUp(t,e),this.standardMouseClick(function(n){for(;null!==n.panel&&(!n.isActionable||n!==e);)n=n.panel;return n},function(n){return n===e})}this.stopTool()},ao.prototype.doCancel=function(){var t=this.diagram.lastInput,e=this.ck;null!==e&&(t.targetObject=e,null!==e.actionCancel&&e.actionCancel(t,e),this.stopTool())},ao.prototype.doStop=function(){this.ck=null},ao.className="ActionTool",Ht(zr,kt),zr.prototype.canStart=function(){if(!this.isEnabled||null===this.archetypeNodeData)return!1;var t=this.diagram;if(t.isReadOnly||t.isModelReadOnly||!t.allowInsert||!t.lastInput.left||this.isBeyondDragSize())return!1;if(this.isDoubleClick){if(1===t.lastInput.clickCount&&(this.Rv=t.lastInput.viewPoint.copy()),2!==t.lastInput.clickCount||this.isBeyondDragSize(this.Rv))return!1}else if(1!==t.lastInput.clickCount)return!1;return!(t.currentTool!==this&&null!==t.wl(t.lastInput.documentPoint,!0))},zr.prototype.doMouseUp=function(){this.isActive&&this.insertPart(this.diagram.lastInput.documentPoint),this.stopTool()},zr.prototype.insertPart=function(t){var e=this.diagram,n=this.archetypeNodeData;if(null===n)return null;var i=null;try{if(e.P("ChangingSelection",e.selection),this.Da(this.name),n instanceof lt)n.Tc()&&(uo(n),null!==(i=n.copy())&&e.add(i));else if(null!==n){var l=e.model.copyNodeData(n);jt(l)&&(e.model.lf(l),i=e.Ec(l))}if(null!==i){var u=P.allocAt(t.x,t.y);this.isGridSnapEnabled&&wv(this.diagram,i,t,u),i.location=u,e.allowSelect&&(e.clearSelection(!0),i.isSelected=!0),P.free(u)}e.Va(),this.transactionResult=this.name,e.P("PartCreated",i)}finally{this.stopTransaction(),e.P("ChangedSelection",e.selection)}return i},Mt.Object.defineProperties(zr.prototype,{archetypeNodeData:{get:function(){return this.Li},set:function(t){this.Li=t}},isDoubleClick:{get:function(){return this.m},set:function(t){this.m=t}},isGridSnapEnabled:{get:function(){return this.j},set:function(t){this.j=t}}}),zr.className="ClickCreatingTool",Ht(Ts,kt),Ts.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;if(!t.allowSelect)return!1;var e=t.lastInput;return!(!e.left||t.currentTool!==this&&(!this.isBeyondDragSize()||e.timestamp-t.firstInput.timestamp<this.delay||null!==t.wl(e.documentPoint,!0)))},Ts.prototype.doActivate=function(){var t=this.diagram;this.isActive=!0,t.isMouseCaptured=!0,t.skipsUndoManager=!0,t.add(this.box),this.doMouseMove()},Ts.prototype.doDeactivate=function(){var t=this.diagram;t.lg(),t.remove(this.box),t.skipsUndoManager=!1,this.isActive=t.isMouseCaptured=!1},Ts.prototype.doMouseMove=function(){var t=this.diagram;if(this.isActive&&null!==this.box){var e=this.computeBoxBounds(),n=this.box.fb("SHAPE");null===n&&(n=this.box.vb());var i=dt.alloc().h(e.width,e.height);n.desiredSize=i,this.box.Ul(e.x,e.y,!1),dt.free(i),(t.allowHorizontalScroll||t.allowVerticalScroll)&&t.Fr(t.lastInput.viewPoint)}},Ts.prototype.doMouseUp=function(){if(this.isActive){var t=this.diagram;t.remove(this.box);try{t.currentCursor="wait",t.P("ChangingSelection",t.selection),this.selectInRect(this.computeBoxBounds()),t.P("ChangedSelection",t.selection)}finally{t.currentCursor=""}}this.stopTool()},Ts.prototype.computeBoxBounds=function(){var t=this.diagram;return new B(t.firstInput.documentPoint,t.lastInput.documentPoint)},Ts.prototype.selectInRect=function(t){var e=this.diagram,n=e.lastInput;if(t=e.Ww(t,this.isPartialInclusion),Do?n.meta:n.control)if(n.shift)for(t=t.iterator;t.next();)(e=t.value).isSelected&&(e.isSelected=!1);else for(t=t.iterator;t.next();)(e=t.value).isSelected=!e.isSelected;else if(n.shift)for(t=t.iterator;t.next();)(e=t.value).isSelected||(e.isSelected=!0);else{for(n=new q,e=e.selection.iterator;e.next();){var i=e.value;t.contains(i)||n.add(i)}for(e=n.iterator;e.next();)e.value.isSelected=!1;for(t=t.iterator;t.next();)(e=t.value).isSelected||(e.isSelected=!0)}},Mt.Object.defineProperties(Ts.prototype,{delay:{get:function(){return this.wk},set:function(t){this.wk=t}},isPartialInclusion:{get:function(){return this.m},set:function(t){this.m=t}},box:{get:function(){return this.j},set:function(t){this.j=t}}}),Ts.className="DragSelectingTool",Ht(ns,kt),ns.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return!(!t.allowHorizontalScroll&&!t.allowVerticalScroll||!t.lastInput.left||t.currentTool!==this&&!this.isBeyondDragSize())},ns.prototype.doActivate=function(){var t=this.diagram;this.og?(t.lastInput.bubbles=!0,t.addEventListener(pt.document,"scroll",this.ow,!1)):(t.currentCursor="move",t.isMouseCaptured=!0,this.Ct.assign(t.position)),this.isActive=!0},ns.prototype.doDeactivate=function(){var t=this.diagram;t.currentCursor="",this.isActive=t.isMouseCaptured=!1},ns.prototype.doCancel=function(){var t=this.diagram;t.position=this.Ct,t.isMouseCaptured=!1,this.stopTool()},ns.prototype.doMouseMove=function(){this.move()},ns.prototype.doMouseUp=function(){this.move(),this.stopTool()},ns.prototype.move=function(){var t=this.diagram;if(this.isActive&&t)if(this.og)t.lastInput.bubbles=!0;else{var e=t.position,n=t.firstInput.documentPoint,i=t.lastInput.documentPoint,l=e.x+n.x-i.x;n=e.y+n.y-i.y,t.allowHorizontalScroll||(l=e.x),t.allowVerticalScroll||(n=e.y),t.position=this.ey.h(l,n)}},Mt.Object.defineProperties(ns.prototype,{bubbles:{get:function(){return this.og},set:function(t){this.og=t}},originalPosition:{get:function(){return this.Ct}}}),ns.className="PanningTool",Gt("clickCreatingTool",function(){return this.findTool("ClickCreating")},function(t){this.gb("ClickCreating",t,this.mouseUpTools)}),Gt("clickSelectingTool",function(){return this.findTool("ClickSelecting")},function(t){this.gb("ClickSelecting",t,this.mouseUpTools)}),Gt("panningTool",function(){return this.findTool("Panning")},function(t){this.gb("Panning",t,this.mouseMoveTools)}),Gt("dragSelectingTool",function(){return this.findTool("DragSelecting")},function(t){this.gb("DragSelecting",t,this.mouseMoveTools)}),Gt("actionTool",function(){return this.findTool("Action")},function(t){this.gb("Action",t,this.mouseDownTools)}),Mt.Object.defineProperties(Dl.prototype,{mainElement:{get:function(){return this.u},set:function(t){this.u=t}},show:{get:function(){return this.m},set:function(t){this.m!==t&&(this.m=t)}},hide:{get:function(){return this.j},set:function(t){this.j!==t&&(this.j=t)}},valueFunction:{get:function(){return this.F},set:function(t){this.F=t}}}),Dl.className="HTMLInfo",Io.className="ContextMenuButtonInfo",Ht(Bi,kt),Bi.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return!(this.isBeyondDragSize()||!t.lastInput.right||1<t.lastInput.clickCount||!(t.lastInput.isTouchEvent&&null!==this.defaultTouchContextMenu||null!==this.findObjectWithContextMenu()))},Bi.prototype.doStart=function(){this.cw.set(this.diagram.firstInput.documentPoint)},Bi.prototype.doStop=function(){this.hideContextMenu(),this.currentObject=null},Bi.prototype.findObjectWithContextMenu=function(t){void 0===t&&(t=null);var e=this.diagram,i=null;if(t instanceof V||(i=t instanceof ot?t:e.ec(e.lastInput.documentPoint,null,function(l){return!l.layer.isTemporary})),null!==i){for(t=i;null!==t;){if(null!==t.contextMenu)return t;t=t.panel}if(e.lastInput.isTouchEvent&&this.defaultTouchContextMenu)return i.part}else if(null!==e.contextMenu)return e;return null},Bi.prototype.doActivate=function(){},Bi.prototype.doMouseDown=function(){if(kt.prototype.doMouseDown.call(this),this.isActive&&this.currentContextMenu instanceof Pt){var t=this.diagram.toolManager.findTool("Action");null!==t&&t.canStart()&&(t.doActivate(),t.doMouseDown(),t.doDeactivate())}this.diagram.toolManager.mouseDownTools.contains(this)&&Cg(this)},Bi.prototype.doMouseUp=function(){if(this.isActive&&this.currentContextMenu instanceof Pt){var t=this.diagram.toolManager.findTool("Action");null!==t&&t.canStart()&&(t.doActivate(),t.doCancel(),t.doDeactivate())}Cg(this)},Bi.prototype.doMouseMove=function(){var t=this.diagram.toolManager.findTool("Action");null!==t&&t.doMouseMove(),this.isActive&&this.diagram.toolManager.doMouseMove()},Bi.prototype.showContextMenu=function(t,e){var n=this.diagram;if(t!==this.currentContextMenu&&this.hideContextMenu(),t instanceof Pt){t.layerName="Tool",t.selectable=!1,t.scale=1/n.scale,t.category=this.name,null!==t.placeholder&&(t.placeholder.scale=n.scale);var i=t.diagram;null!==i&&i!==n&&i.remove(t),n.add(t),null!==e?t.adornedObject=e:t.data=n.model,t.Za(),this.positionContextMenu(t,e)}else t instanceof Dl&&t.show(e,n,this);this.currentContextMenu=t},Bi.prototype.positionContextMenu=function(t){if(null===t.placeholder){var e=this.diagram,n=e.lastInput.documentPoint.copy(),i=t.measuredBounds,l=e.viewportBounds;e.lastInput.isTouchEvent&&(n.x-=i.width),n.x+i.width>l.right&&(n.x-=i.width+5/e.scale),n.x<l.x&&(n.x=l.x),n.y+i.height>l.bottom&&(n.y-=i.height+5/e.scale),n.y<l.y&&(n.y=l.y),t.position=n}},Bi.prototype.hideContextMenu=function(){var t=this.diagram,e=this.currentContextMenu;null!==e&&(e instanceof Pt?(t.remove(e),null!==this.Js&&this.Js.Af(e.category),e.data=null,e.adornedObject=null):e instanceof Dl&&(null!==e.hide?e.hide(t,this):null!==e.mainElement&&(e.mainElement.style.display="none")),this.currentContextMenu=null,this.standardMouseOver())},Bi.prototype.showDefaultContextMenu=function(){var t=this.diagram;null===this.Ls&&(this.Ls=function Sx(t){var e=new q;return e.add(new Io("Copy",function(n){n.commandHandler.copySelection()},function(n){return n.commandHandler.canCopySelection()})),e.add(new Io("Cut",function(n){n.commandHandler.cutSelection()},function(n){return n.commandHandler.canCutSelection()})),e.add(new Io("Delete",function(n){n.commandHandler.deleteSelection()},function(n){return n.commandHandler.canDeleteSelection()})),e.add(new Io("Paste",function(n){n.commandHandler.pasteSelection(t.mouseDownPoint)},function(n){return n.commandHandler.canPasteSelection(t.mouseDownPoint)})),e.add(new Io("Select All",function(n){n.commandHandler.selectAll()},function(n){return n.commandHandler.canSelectAll()})),e.add(new Io("Undo",function(n){n.commandHandler.undo()},function(n){return n.commandHandler.canUndo()})),e.add(new Io("Redo",function(n){n.commandHandler.redo()},function(n){return n.commandHandler.canRedo()})),e.add(new Io("Scroll To Part",function(n){n.commandHandler.scrollToPart()},function(n){return n.commandHandler.canScrollToPart()})),e.add(new Io("Zoom To Fit",function(n){n.commandHandler.zoomToFit()},function(n){return n.commandHandler.canZoomToFit()})),e.add(new Io("Reset Zoom",function(n){n.commandHandler.resetZoom()},function(n){return n.commandHandler.canResetZoom()})),e.add(new Io("Group Selection",function(n){n.commandHandler.groupSelection()},function(n){return n.commandHandler.canGroupSelection()})),e.add(new Io("Ungroup Selection",function(n){n.commandHandler.ungroupSelection()},function(n){return n.commandHandler.canUngroupSelection()})),e.add(new Io("Edit Text",function(n){n.commandHandler.editTextBlock()},function(n){return n.commandHandler.canEditTextBlock()})),e}(this)),Ec.innerHTML="",Tc.addEventListener("pointerdown",this.Zt,!1);var e=this,n=Zo("ul");n.className="goCXul",Ec.appendChild(n),n.innerHTML="";for(var i=this.Ls.iterator;i.next();){var l=i.value,u=l.visible;if("function"==typeof l.Kw&&("function"!=typeof u||u(t))){(u=Zo("li")).className="goCXli";var h=Zo("a");h.className="goCXa",h.href="#",h.Qx=l.Kw,h.addEventListener("pointerdown",function(f){return this.Qx(t),e.stopTool(),f.preventDefault(),!1},!1),h.textContent=l.text,u.appendChild(h),n.appendChild(u)}}Ec.style.display="block",Tc.style.display="block"},Bi.prototype.hideDefaultContextMenu=function(){if(null!==this.currentContextMenu&&this.currentContextMenu===iu){Ec.style.display="none",Tc.style.display="none";var t=this.diagram;null!==t&&t.removeEventListener(Tc,"pointerdown",this.Zt,!1),this.currentContextMenu=null}},Mt.Object.defineProperties(Bi.prototype,{currentContextMenu:{get:function(){return this.j},set:function(t){this.j=t,this.Js=t instanceof Pt?t.adornedPart:null}},defaultTouchContextMenu:{get:function(){return!1===Mg&&null===iu&&$e&&function ov(t){var e=new Dl;e.show=function(l,u,h){h.showDefaultContextMenu()},e.hide=function(l,u){u.hideDefaultContextMenu()},iu=e,t.Zt=function(){t.stopTool()},e=Zo("div");var n=Zo("div");e.style.cssText="top: 0px;z-index:10002;position: fixed;display: none;text-align: center;left: 25%;width: 50%;background-color: #F5F5F5;padding: 16px;border: 16px solid #444;border-radius: 10px;margin-top: 10px",n.style.cssText="z-index:10001;position: fixed;display: none;top: 0;left: 0;width: 100%;height: 100%;background-color: black;opacity: 0.8;";var i=Zo("style");pt.document.getElementsByTagName("head")[0].appendChild(i),i.sheet.insertRule(".goCXul { list-style: none; }",0),i.sheet.insertRule(".goCXli {font:700 1.5em Helvetica, Arial, sans-serif;position: relative;min-width: 60px; }",0),i.sheet.insertRule(".goCXa {color: #444;display: inline-block;padding: 4px;text-decoration: none;margin: 2px;border: 1px solid gray;border-radius: 10px; }",0),null!==(i=t.diagram)&&(i.addEventListener(e,"contextmenu",xg,!1),i.addEventListener(e,"selectstart",xg,!1),i.addEventListener(n,"contextmenu",xg,!1)),e.className="goCXforeground",n.className="goCXbackground",pt.document.body&&(pt.document.body.appendChild(e),pt.document.body.appendChild(n)),Ec=e,Tc=n,Mg=!0}(this),iu},set:function(t){null===t&&(Mg=!0),iu=t}},currentObject:{get:function(){return this.m},set:function(t){this.m=t}},mouseDownPoint:{get:function(){return this.cw}}});var iu=null,Mg=!1,Tc=null,Ec=null;function se(){kt.call(this),this.name="TextEditing",this.Sh=new Wt,this.ga=null,this.W=lv,this.qj=null,this.na=Cd,this.u=1,this.F=!0,this.m=null,this.j=new Dl,this.Ms=null,function sv(t,e){if($e){var n=Zo("textarea");t.Ms=n,n.addEventListener("input",function(){if(null!==t.textBlock){var i=t.qx(this.value);this.style.width=20+i.measuredBounds.width*this.cA+"px",this.rows=i.lineCount}},!1),n.addEventListener("keydown",function(i){if(null!==t.textBlock){var l=i.key;"Enter"===l?(!1===t.textBlock.isMultiline&&i.preventDefault(),t.acceptText(zn)):"Tab"===l?(t.acceptText(Sl),i.preventDefault()):"Escape"===l&&(t.doCancel(),null!==t.diagram&&t.diagram.doFocus())}},!1),n.addEventListener("focus",function(){if(null!==t.currentTextEditor&&t.state!==Cd){var i=t.Ms;t.na===Md&&(t.na=Dg),"function"==typeof i.select&&t.selectsTextOnActivate&&(i.select(),i.setSelectionRange(0,9999))}},!1),n.addEventListener("blur",function(){if(null!==t.currentTextEditor&&t.state!==Cd){var i=t.Ms;"function"==typeof i.focus&&i.focus(),"function"==typeof i.select&&t.selectsTextOnActivate&&(i.select(),i.setSelectionRange(0,9999))}},!1),e.valueFunction=function(){return n.value},e.mainElement=n,e.show=function(i,l,u){if(i instanceof Wt&&u instanceof se)if(u.state===ru)n.style.border="3px solid red",n.focus();else{var h=i.ia(ut),f=l.position,p=l.scale,g=i.uf()*p;g<u.minimumEditorScale&&(g=u.minimumEditorScale);var m=i.naturalBounds.width*g+6,v=i.naturalBounds.height*g+2,x=(h.x-f.x)*p;h=(h.y-f.y)*p,v=(f=i.verticalAlignment).y*v-f.y*(p=(i.lineHeight+i.spacingAbove+i.spacingBelow)*i.lineCount*g)+f.offsetY-(.5*v-.5*p)-p/2,n.value=i.text,l.div.style.font=i.font,n.style.position="absolute",n.style.zIndex="100",n.style.font="inherit",n.style.fontSize=100*g+"%",n.style.lineHeight="normal",n.style.width=m+"px",n.style.left=(x-m/2|0)-1+"px",n.style.top=(h+v|0)-1+"px",n.style.textAlign=i.textAlign,n.style.margin="0",n.style.padding="1px",n.style.border="0",n.style.outline="none",n.style.whiteSpace="pre-wrap",n.style.overflow="hidden",n.rows=i.lineCount,n.cA=g,n.className="goTXarea",l.div.appendChild(n),n.focus(),u.selectsTextOnActivate&&(n.select(),n.setSelectionRange(0,9999))}},e.hide=function(i){i.div.removeChild(n)}}}(this,this.j)}function _x(t){var e=t.textBlock,n=t.diagram,i=t.currentTextEditor;if(null!==e&&null!==i){var l=e.text,u="";null!==i.valueFunction&&(u=i.valueFunction()),t.isValidText(e,l,u)?(t.Da(t.name),t.na=Nc,t.transactionResult=t.name,e.text=u,t.doSuccess(l,u),null!==n&&n.P("TextEdited",e,l),t.stopTransaction(),t.stopTool(),null!==n&&n.doFocus()):(t.na=ru,t.doError(l,u))}}Bi.className="ContextMenuTool",Gt("contextMenuTool",function(){return this.findTool("ContextMenu")},function(t){this.gb("ContextMenu",t,this.mouseUpTools)}),Ht(se,kt),se.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;if(null===t||t.isReadOnly||ha&&ha!==this&&(ha.acceptText(gr),ha&&ha!==this)||!t.lastInput.left||this.isBeyondDragSize())return!1;var e=t.ec(t.lastInput.documentPoint);return!!(null!==e&&e instanceof Wt&&e.editable&&e.part.canEdit())&&!(null===(e=e.part)||this.starting===lv&&!e.isSelected||this.starting===Ex&&2>t.lastInput.clickCount)},se.prototype.doStart=function(){ha=this,null!==this.textBlock&&this.doActivate()},se.prototype.doActivate=function(){if(!this.isActive){var t=this.diagram;if(null!==t){var e=this.textBlock;if(null===e&&(e=t.ec(t.lastInput.documentPoint)),null!==e&&e instanceof Wt&&(this.textBlock=e,null!==e.part)){t.animationManager.wc(),this.isActive=!0,this.na=Md;var n=this.defaultTextEditor;null!==e.textEditor&&(n=e.textEditor),this.Sh=this.textBlock.copy();var i=new B(this.textBlock.ia(Oe),this.textBlock.ia(cr));t.bv(i),n.show(e,t,this),this.currentTextEditor=n}}}},se.prototype.doCancel=function(){this.stopTool()},se.prototype.doMouseUp=function(){this.canStart()&&this.doActivate()},se.prototype.doMouseDown=function(){this.isActive&&this.acceptText(gr)},se.prototype.acceptText=function(t){switch(t){case gr:this.na===Nc?this.currentTextEditor instanceof HTMLElement&&this.currentTextEditor.focus():(this.na===Md||this.na===ru||this.na===Dg)&&(this.na=Ic,_x(this));break;case Tx:case zn:case Sl:(zn!==t||!0!==this.textBlock.isMultiline)&&(this.na===Md||this.na===ru||this.na===Dg)&&(this.na=Ic,_x(this))}},se.prototype.doError=function(t,e){var n=this.textBlock;null!==n.errorFunction&&n.errorFunction(this,t,e),(t=this.currentTextEditor)&&t.show(n,this.diagram,this)},se.prototype.doSuccess=function(t,e){var n=this.textBlock;null!==n.textEdited&&n.textEdited(n,t,e)},se.prototype.doDeactivate=function(){var t=this.diagram;null!==t&&(this.na=Cd,null!==this.currentTextEditor&&this.currentTextEditor.hide(t,this),this.textBlock=null,this.isActive=!1)},se.prototype.doStop=function(){ha=null},se.prototype.isValidText=function(t,e,n){var i=this.textValidation;return!(null!==i&&!i(t,e,n)||null!==(i=t.textValidation)&&!i(t,e,n))},se.prototype.qx=function(t){var e=this.Sh;return e.text=t,e.measure(this.textBlock.zh,1/0),e},Mt.Object.defineProperties(se.prototype,{textBlock:{get:function(){return this.ga},set:function(t){this.ga=t}},currentTextEditor:{get:function(){return this.m},set:function(t){this.m=t}},defaultTextEditor:{get:function(){return this.j},set:function(t){this.j=t}},starting:{get:function(){return this.W},set:function(t){this.W=t}},textValidation:{get:function(){return this.qj},set:function(t){this.qj=t}},minimumEditorScale:{get:function(){return this.u},set:function(t){this.u=t}},selectsTextOnActivate:{get:function(){return this.F},set:function(t){this.F=t}},state:{get:function(){return this.na},set:function(t){this.na!==t&&(this.na=t)}}}),se.prototype.measureTemporaryTextBlock=se.prototype.qx;var Tx=new W(se,"LostFocus",0),gr=new W(se,"MouseDown",1),Sl=new W(se,"Tab",2),zn=new W(se,"Enter",3),bM=new W(se,"SingleClick",0),lv=new W(se,"SingleClickSelected",1),Ex=new W(se,"DoubleClick",2),Cd=new W(se,"StateNone",0),Md=new W(se,"StateActive",1),Dg=new W(se,"StateEditing",2),Ic=new W(se,"StateValidating",3),ru=new W(se,"StateInvalid",4),Nc=new W(se,"StateValidated",5),ha=null;function mr(t){Td||(Sd(),Td=!0),this.H=ah,this.Dk=this.zb=this.Xp=this.$b=!1,this.uw=!0,this.Ek=lh,this.lm=!1,this.wh=this.Ad=!0,this.ug=600,this.Hv=this.sw=!1,this.Sd=new Z,this.Wd=new Cn,this.Wd.Rd=this,this.yi=new Z,this.Vt=new Z,this.rr=new Z,this.dl=new Z,t&&Object.assign(this,t)}function _l(t,e){t.Ad&&t.canStart(e)&&(t.Sd.add(e),t.defaultAnimation.isAnimating&&t.wc(),jn(t.H),t.zb=!0)}function Tl(t){if(t.Ad&&t.zb){var e=t.Wd,n=t.H,i=t.Sd.contains("Model");i&&(t.Dk=!0,t.Ek===lh?(e.isViewportUnconstrained=!0,e.rc.clear(),e.add(n,"position",n.position.copy().offset(0,-200),n.position),e.add(n,"opacity",0,1)):t.Ek===hv&&e.rc.clear(),t.uw=!(t.Ek!==uv||!n.Jt.C(n.pa)),n.P("InitialAnimationStarting",t)),i&&!t.wh||0===e.rc.count?(t.Sd.clear(),t.zb=!1,e.rc.clear(),Sg(e,n),t.Dk=!1,n.N()):(t.Sd.clear(),n.cg=!1,i=e.rc.get(n),n.autoScale!==Er&&null!==i&&(delete i.start.scale,delete i.end.scale),pt.requestAnimationFrame(function(){!1===t.zb||e.$b||(n.Ge("temporaryPixelRatio")&&Oc(n),uu(n),t.zb=!1,e.start(),e.$b&&(su(t),n.Va(),jM(e,0),fa(n,!0),Pc(t),n.P("AnimationStarting",t)))}))}}function ou(t){return t.Sd.contains("Trigger")&&1===t.Sd.count}function Ix(t,e,n,i){t.isTicking||ou(t)||e instanceof H&&(null!==e.fromNode||null!==e.toNode)||t.Wd.add(e,"position",n,i,!1)}function su(t){if(!t.Xp){var e=t.H;t.sw=e.skipsUndoManager,t.Hv=e.skipsModelSourceBindings,e.skipsUndoManager=!0,e.skipsModelSourceBindings=!0,t.Xp=!0}}function Pc(t){var e=t.H;e.skipsUndoManager=t.sw,e.skipsModelSourceBindings=t.Hv,t.Xp=!1}function Nx(t,e,n){!t.zb||e.C(n)||ou(t)||(t.H.ji||(e=n.copy()),lu(t.Wd,t.H,"position",e,n))}function RM(t,e){for(e=e.findLinksConnected();e.next();){var n=e.value;n.ef=n.points.copy(),t.dl.add(n)}}function av(t,e,n,i,l){null===t&&(t=[0,0,0,0]),null===e&&(e=[0,0,0,0]);var u=t[0],h=t[1],f=t[2];t=t[3];var p=e[0],g=e[1],m=e[2];return e=e[3],0===f||100===f?(u=p,h=g):(0===m||100===m)&&(p=u,g=h),180<Math.abs(p-u)&&(p>u?u+=360:p+=360),"hsla("+(u=l(n,u,p-u,i)%360)+", "+(h=l(n,h,g-h,i))+"%, "+(f=l(n,f,m-f,i))+"%, "+(n=l(n,t,e-t,i))+")"}function Sd(){function t(n,i,l,u,h,f){n.position=new P(u(h,i.x,l.x-i.x,f),u(h,i.y,l.y-i.y,f))}var e=new vt;e.add("position:diagram",t),e.add("position",t),e.add("position:part",function(n,i,l,u,h,f){h<f?n.Ul(u(h,i.x,l.x-i.x,f),u(h,i.y,l.y-i.y,f),!1):n.position=new P(u(h,i.x,l.x-i.x,f),u(h,i.y,l.y-i.y,f))}),e.add("location",function(n,i,l,u,h,f){h<f?n.Ul(u(h,i.x,l.x-i.x,f),u(h,i.y,l.y-i.y,f),!0):n.location=new P(u(h,i.x,l.x-i.x,f),u(h,i.y,l.y-i.y,f))}),e.add("position:placeholder",function(n,i,l,u,h,f){h<f?n.Ul(u(h,i.x,l.x-i.x,f),u(h,i.y,l.y-i.y,f),!1):n.position=new P(u(h,i.x,l.x-i.x,f),u(h,i.y,l.y-i.y,f))}),e.add("position:nodeCollapse",function(n,i,l,u,h,f){var p=n.actualBounds,g=l.actualBounds;l=g.x+g.width/2-p.width/2,p=g.y+g.height/2-p.height/2,h<f?n.Ul(u(h,i.x,l-i.x,f),u(h,i.y,p-i.y,f),!1):n.position=new P(u(h,i.x,l-i.x,f),u(h,i.y,p-i.y,f))}),e.add("desiredSize",function(n,i,l,u,h,f){n.desiredSize=new B(u(h,i.width,l.width-i.width,f),u(h,i.height,l.height-i.height,f))}),e.add("width",function(n,i,l,u,h,f){n.width=u(h,i,l-i,f)}),e.add("height",function(n,i,l,u,h,f){n.height=u(h,i,l-i,f)}),e.add("fill",function(n,i,l,u,h,f){n.fill=av(i,l,h,f,u)}),e.add("stroke",function(n,i,l,u,h,f){n.stroke=av(i,l,h,f,u)}),e.add("strokeWidth",function(n,i,l,u,h,f){n.strokeWidth=u(h,i,l-i,f)}),e.add("strokeDashOffset",function(n,i,l,u,h,f){n.strokeDashOffset=u(h,i,l-i,f)}),e.add("background",function(n,i,l,u,h,f){n.background=av(i,l,h,f,u)}),e.add("areaBackground",function(n,i,l,u,h,f){n.areaBackground=av(i,l,h,f,u)}),e.add("opacity",function(n,i,l,u,h,f){n.opacity=u(h,i,l-i,f)}),e.add("scale",function(n,i,l,u,h,f){n.scale=u(h,i,l-i,f)}),e.add("angle",function(n,i,l,u,h,f){n.angle=u(h,i,l-i,f)}),_d=e}se.className="TextEditingTool",se.LostFocus=Tx,se.MouseDown=gr,se.Tab=Sl,se.Enter=zn,se.SingleClick=bM,se.SingleClickSelected=lv,se.DoubleClick=Ex,se.StateNone=Cd,se.StateActive=Md,se.StateEditing=Dg,se.StateValidating=Ic,se.StateInvalid=ru,se.StateValidated=Nc,Gt("textEditingTool",function(){return this.findTool("TextEditing")},function(t){this.gb("TextEditing",t,this.mouseUpTools)}),mr.prototype.Le=function(t){this.H=t},mr.prototype.canStart=function(){return!0},(_=mr.prototype).es=function(t){return this.Wd.es(t)},_.Ju=function(t){return this.Wd.Ju(t)},_.wc=function(t){var e=this.Wd;if(!0===this.zb&&(this.Dk=this.zb=!1,this.Sd.clear(),0<e.rc.count&&this.H.Mb()),this.$b){if(e.ul(!0),e.rc.clear(),Sg(e,null),!0===t)for(t=this.yi.Ea(),e=0;e<t.length;e++)t[e].ul(!0)}else e.rc.clear(),Sg(e,this.H)},_.ul=function(t){t===this.defaultAnimation&&this.defaultAnimation.rc.clear(),this.yi.remove(t),0===this.yi.count&&(this.$b=!1,this.H.Mb()),t===this.defaultAnimation&&(this.defaultAnimation.rc.clear(),this.H.P("AnimationFinished",this))},_.xj=function(t,e){this.zb&&(this.Sd.contains("Expand Tree")||this.Sd.contains("Expand SubGraph"))&&(this.Wd.xj(t,e),RM(this,t))},_.vj=function(t,e){this.zb&&(this.Sd.contains("Collapse Tree")||this.Sd.contains("Collapse SubGraph"))&&(this.Wd.vj(t,e),lu(this.Wd,e,"position",e.position,e.position),RM(this,t))},Mt.Object.defineProperties(mr.prototype,{animationReasons:{get:function(){return this.Sd}},isEnabled:{get:function(){return this.Ad},set:function(t){(this.Ad=t)&&this.yi.each(function(e){e.isAnimating||e.runCount!==1/0||e.start()})}},duration:{get:function(){return this.ug},set:function(t){1>t&&le(t,">= 1",mr,"duration"),this.ug=t}},isAnimating:{get:function(){return this.$b}},isTicking:{get:function(){return this.Xp}},isInitial:{get:function(){return this.wh},set:function(t){this.wh=t}},defaultAnimation:{get:function(){return this.Wd}},activeAnimations:{get:function(){return this.yi}},initialAnimationStyle:{get:function(){return this.Ek},set:function(t){this.Ek=t}}}),mr.prototype.stopAnimation=mr.prototype.wc;var _d=null,Td=!1,lh=new W(mr,"Default",1),uv=new W(mr,"AnimateLocations",2),hv=new W(mr,"None",3);function Cn(t){this.au=this.rw=this.Rd=this.H=null,this.Mk=this.$b=this.j=!1,this.Km=this.Gd=0,this.op=this.Rs=cv,this.Lk=this.Kn=!1,this.It=1,this.Gt=0,this.yd=this.ug=NaN,this.Lv=0,this.Lm=null,this.m=wl,this.rc=new vt,this.yt=new vt,this.nl=new Z,this.zt=new Z,this.Iv=Is,t&&Object.assign(this,t)}function Sg(t,e){if(t.yt.clear(),t.Lk=!1,t.Gt=0,t.yd=NaN,0<t.nl.count&&t.nl.clear(),0<t.zt.count&&t.zt.clear(),null!==e)for(t=e.links;t.next();)t.value.ef=null}function lu(t,e,n,i,l,u){var h=t.rc;if(e instanceof V&&"position"===n&&(n="position:diagram"),("fill"===n||"stroke"===n||"background"===n||"areaBackground"===n)&&(nl(i),Gx(),i=[wr.j,wr.u,wr.m,wr.F],nl(l),Gx(),l=[wr.j,wr.u,wr.m,wr.F]),h.contains(e)){var f=h.I(e),p=f.start,g=f.end;void 0===p[n]&&(p[n]=au(i)),g[n]=au(l)}else g={},(p={})[n]=au(i),g[n]=au(l),f=p.position,e instanceof ot&&f instanceof P&&!f.v()&&e.diagram.animationManager.Sd.contains("Expand SubGraph")&&f.assign(g.position),f=new Px(p,g,u),h.add(e,f);(h=p[n])instanceof P&&!h.v()&&h.assign(t.m),u&&0===n.indexOf("position:")&&e instanceof lt?f.uu.location=au(e.location):u&&(f.uu[n]=au(i))}function au(t){return t instanceof P||t instanceof dt?t.copy():t}function Ed(t,e){if(!t.Mk||e){var n=t.Rd;if(!1!==t.$b){var i=+new Date,l=i>t.Km?t.yd:i-t.Gd;e&&((l=t.Lv)<t.yd?(t.Gd=+new Date-l,t.Km=t.Gd+t.yd):l=t.yd),su(n),jM(t,l),fa(t.H,!0),Pc(n),i>t.Km&&(t.Kn&&!t.Lk?(t.Gd=+new Date,t.Km=t.Gd+t.yd,t.Lk=!0):t.ul(!1))}}}function jM(t,e){for(var n=t.yd,i=t.rc.iterator,l=t.Lk;i.next();){var u=i.key;if(!(u instanceof ot&&null===u.diagram)){var h=i.value,f=l?h.end:h.start;h=l?h.start:h.end;var g,p=_d;for(g in h)"position"===g&&(h["position:placeholder"]||h["position:nodeCollapse"])||null===p.get(g)||p.get(g)(u,f[g],h[g],t.op,e,n,t)}}}function cv(t,e,n,i){return 1>(t/=i/2)?n/2*t*t+e:-n/2*(--t*(t-2)-1)+e}function fv(t,e,n,i){return t===i?e+n:n*(1-Math.pow(2,-10*t/i))+e}function Px(t,e,n){this.start=t,this.end=e,this.uu={},this.ou=n,this.Wu=!1}function _i(t,e,n){this.sd=null,this.df=t,this.Vn=n||Ac,this.hk=null,void 0!==e&&(this.hk=e,void 0===n&&(this.Vn=Id))}mr.className="AnimationManager",mr.defineAnimationEffect=function(t,e){Td||(Sd(),Td=!0),_d.add(t,e)},mr.Default=lh,mr.AnimateLocations=uv,mr.None=hv,Cn.prototype.suspend=function(){this.Mk=!0},Cn.prototype.advanceTo=function(t,e){e&&(this.Mk=!1),this.Kn&&t>=this.yd&&(this.Lk=!0,t-=this.yd),this.Lv=t,Ed(this,!0),su(this.Rd),fa(this.H),Pc(this.Rd),this.H.redraw()},(_=Cn.prototype).start=function(){if(0===this.rc.count||this.$b)return this;for(var t=this.H,e=this.rc.iterator;e.next();){var n=e.value.end,i=e.key;if(n["position:placeholder"]){var l=i.findVisibleNode();if(l instanceof yt&&null!==l.placeholder){var u=l.placeholder;(l=u.ia(Oe)).x+=(u=u.padding).left,l.y+=u.top,n["position:placeholder"]=l}}null===t&&(i instanceof V?t=i:i instanceof ot&&(t=i.diagram))}return null===t||(this.H=t,this.Rd=t.animationManager,!1===(e=this.Rd).isEnabled||(this.yd=isNaN(this.ug)?e.duration:this.ug,this.op=this.Rs,e.Dk&&e.Ek===lh&&this===e.defaultAnimation&&(this.op=fv,this.yd=isNaN(this.ug)?600===e.duration?900:e.duration:this.ug),this.Iv=t.scrollMode,this.isViewportUnconstrained&&(t.nj=Uc),su(e),this.nl.each(function(h){h.data=null,t.add(h)}),Pc(e),this.$b=!0,this.Gd=+new Date,this.Km=this.Gd+this.yd,function FM(t,e){function n(){if(0<l.rr.count&&(i.addAll(l.rr),l.rr.clear(),l.$b=!0),!1!==l.$b&&0!==i.count){l.Vt.addAll(i);for(var u=l.Vt.iterator;u.next();){var h=u.value;if(!1!==h.$b){t:if(0<h.nl.count)var f=!0;else{for(f=h.rc.iterator;f.next();){var p=f.key;if(p instanceof ot&&null!==p.diagram||p instanceof V){f=!0;break t}}f=!1}f?Ed(h,!1):h.Mk=!0}}l.Vt.clear(),!1!==l.$b&&(su(l),fa(l.H),Pc(l)),pt.requestAnimationFrame(n)}}var i=t.yi,l=t;t.$b?t.rr.add(e):(t.$b=!0,i.add(e),pt.requestAnimationFrame(function(){n()}))}(e,this))),this},_.oy=function(t,e){return t.Tc()?(this.nl.add(t),this.H=e,this):this},_.add=function(t,e,n,i,l){if("position"===e&&n.C(i))return this;if(null===this.H&&(t instanceof V?this.H=t:t instanceof ot&&null!==t.diagram&&(this.H=t.diagram)),t instanceof lt){if(!t.isAnimated)return this;"position"===e&&(e="position:part")}return lu(this,t,e,n,i,l),this},_.es=function(t){return!!this.$b&&null!==(t=this.rc.I(t))&&t.Wu},_.Ju=function(t){return!!this.$b&&null!==(t=this.rc.I(t))&&(t.start.position||t.start.location)},_.stop=function(){return this.$b?(this.ul(!0),this):this},_.ul=function(t){if(null!==this.au&&this.au.Mn.remove(this.rw),this.$b){var e=this.H,n=this.Rd;this.Mk=this.$b=n.Dk=!1,su(n);for(var i=this.rc,l=this.nl.iterator;l.next();)e.remove(l.value);for(l=this.zt.iterator;l.next();)l.value.w();l=this.Kn,i=i.iterator;for(var u=_d;i.next();){var v,h=i.key,f=i.value,p=l?f.end:f.start,g=l?f.start:f.end,m=f.uu;for(v in g)if(null!==u.get(v)){var x=v;!f.ou||"position:nodeCollapse"!==x&&"position:placeholder"!==x||(x="position"),u.get(x)(h,p[v],void 0!==m[v]?m[v]:f.ou?p[v]:g[v],this.op,this.yd,this.yd,this)}f.ou&&void 0!==m.location&&h instanceof lt&&(h.location=m.location),f.Wu&&h instanceof lt&&h.Ub(!1)}if(e.Zr.clear(),Pd(e,!1),e.Va(),e.N(),fa(e,!0),n.defaultAnimation===this){for(v=n.dl.iterator;v.next();)null!==(l=v.value).ef&&(l.points=l.ef,l.ef=null);n.dl.clear()}fa(e,!0),this.isViewportUnconstrained&&(e.scrollMode=this.Iv),Pc(n),this.Gt++,!t&&this.It>this.Gt?(this.Lk=!1,this.start()):(this.Lm&&this.Lm(this),Sg(this,null),n.ul(this),e.Mb())}},_.xj=function(t,e){var n=e.actualBounds,i=null;if(e instanceof yt&&(i=e.placeholder),null!==i?((n=i.ia(Oe)).x+=(i=i.padding).left,n.y+=i.top,this.add(t,"position",n,t.position,!1)):this.add(t,"position",new P(n.x+n.width/2,n.y+n.height/2),t.position,!1),this.add(t,"scale",.01,t.scale,!1),t instanceof yt)for(t=t.memberParts;t.next();)(i=t.value)instanceof J&&this.xj(i,e)},_.vj=function(t,e){if(t.isVisible()){var n=null;if(e instanceof yt&&(n=e.placeholder),null!==n?this.add(t,"position:placeholder",t.position,n,!0):this.add(t,"position:nodeCollapse",t.position,e,!0),this.add(t,"scale",t.scale,.01,!0),(n=this.rc).contains(t)&&(n.I(t).Wu=!0),t instanceof yt)for(t=t.memberParts;t.next();)(n=t.value)instanceof J&&this.vj(n,e)}},_.lz=function(t){var e=this.yt.get(t);return null===e&&this.yt.add(t,e={}),e},Mt.Object.defineProperties(Cn.prototype,{duration:{get:function(){return this.ug},set:function(t){1>t&&le(t,">= 1",Cn,"duration"),this.ug=t}},reversible:{get:function(){return this.Kn},set:function(t){this.Kn=t}},runCount:{get:function(){return this.It},set:function(t){0<t?this.It=t:Y("Animation.runCount value must be a positive integer.")}},finished:{get:function(){return this.Lm},set:function(t){this.Lm!==t&&(this.Lm=t)}},easing:{get:function(){return this.Rs},set:function(t){this.Rs=t}},isViewportUnconstrained:{get:function(){return this.j},set:function(t){this.j=t}},isAnimating:{get:function(){return this.$b}}}),Cn.prototype.getTemporaryState=Cn.prototype.lz,Cn.prototype.stop=Cn.prototype.stop,Cn.prototype.add=Cn.prototype.add,Cn.prototype.addTemporaryPart=Cn.prototype.oy,Cn.className="Animation",Cn.EaseLinear=function(t,e,n,i){return n*t/i+e},Cn.EaseInOutQuad=cv,Cn.EaseInQuad=function(t,e,n,i){return n*(t/=i)*t+e},Cn.EaseOutQuad=function(t,e,n,i){return-n*(t/=i)*(t-2)+e},Cn.EaseInExpo=function(t,e,n,i){return 0===t?e:n*Math.pow(2,10*(t/i-1))+e},Cn.EaseOutExpo=fv,Px.className="AnimationState",_i.prototype.copy=function(){var t=new _i(this.df);t.Vn=this.Vn;var e=this.hk;if(null!==e){var n={};void 0!==e.duration&&(n.duration=e.duration),void 0!==e.finished&&(n.finished=e.finished),void 0!==e.easing&&(n.easing=e.easing),t.hk=n}return t},Mt.Object.defineProperties(_i.prototype,{propertyName:{get:function(){return this.df},set:function(t){this.df=t}},animationSettings:{get:function(){return this.hk},set:function(t){this.hk=t}},startCondition:{get:function(){return this.Vn},set:function(t){this.Vn=t}}});var dv,ah,Ac=new W(_i,"Default",1),Id=new W(_i,"Immediate",2),_g=new W(_i,"Bundled",3);function Rn(t){wn(this),this.H=null,this.Ma=new q,this.va="",this.tb=1,this.m=!1,this.j=this.Nh=this.u=this.Ii=this.Hi=this.Gi=this.Fi=this.Di=this.Ei=this.Ci=this.Ki=this.Bi=this.Ji=this.Ai=this.zi=!0,this.Bn=[],t&&Object.assign(this,t)}function ca(t,e){var n=1;return 1!==t.tb&&(e.globalAlpha=(n=e.globalAlpha)*t.tb),n}function Tg(t,e,n){if(e=function Ax(t,e,n){var i=n.zOrder;if(isNaN(i))return e;var l=(t=t.Ma).count;if(1>=l)return e;if(0>e&&(e=t.indexOf(n)),0>e)return-1;for(var u=e-1,h=NaN;0<=u&&(h=t.K(u).zOrder,isNaN(h));)u--;for(var f=e+1,p=NaN;f<l&&(p=t.K(f).zOrder,isNaN(p));)f++;if(!isNaN(h)&&h>i)for(;;){if(-1===u||h<=i){if(++u===e)break;return t.mb(e),t.Cb(u,n),u}for(h=NaN;0<=--u&&(h=t.K(u).zOrder,isNaN(h)););}else if(!isNaN(p)&&p<i)for(;;){if(f===l||p>=i){if(--f===e)break;return t.mb(e),t.Cb(f,n),f}for(p=NaN;++f<l&&(p=t.K(f).zOrder,isNaN(p)););}return e}(t,e,n),n instanceof yt&&null!==n&&isNaN(n.zOrder)){if(0!==n.memberParts.count){for(var i=-1,l=t.Ma.s,u=l.length,h=0;h<u;h++){var f=l[h];if(f===n&&(e=h,0<=i)||0>i&&f.containingGroup===n&&(i=h,0<=e))break}!(0>i)&&i<e&&((l=t.Ma).mb(e),l.Cb(i,n))}null!==(n=n.containingGroup)&&Tg(t,-1,n)}}function V(t,e){if(Av||(function $M(){if($e){var t=pt.document.createElement("canvas"),e=t.getContext("2d"),n=zt("7ca11abfd022028846");e[n]=zt("398c3597c01238");for(var i=["5da73c80a36455d6038e4972187c3cae51fd22",Xa.Dx+"4ae6247590da4bb21c324ba3a84e385776",Dt.xF+"fb236cdfda5de14c134ba1a95a2d4c7cc6f93c1387",F.za],l=1;5>l;l++)e[zt("7ca11abfd7330390")](zt(i[l-1]),10,15*l);for(e[n]=zt("39f046ebb36e4b"),n=1;5>n;n++)e[zt("7ca11abfd7330390")](zt(i[n-1]),10,15*n);(4!==i.length||"5"!==i[0][0]||"7"!==i[3][0])&&(Dt.prototype.Ld=Dt.prototype.Fw),zM=t}}(),Av=!0),wn(this),ah=this,this.wb=!0,this.La=null,this.Aa=this.Ba=0,this.Ha=null,$e){var n=this,i=function(){n.removeEventListener(pt.document,"DOMContentLoaded",i,!1),n.setRTL()};null!==pt.document.body?this.setRTL():n.addEventListener(pt.document,"DOMContentLoaded",i,!1)}this.cl=null,Ut.add("Model",Vt);var l=this;return this.Db=function(u){var h=l.partManager;if(u.model===h.diagram.model&&h.diagram.$){h.diagram.$=!1;try{""===u.modelChange&&u.change===ee&&h.updateDataBindings(u.object,u.propertyName)}finally{h.diagram.$=!0}}},this.Hc=function(u){l.partManager.doModelChanged(u)},this.Nt=this.Qt=null,kx(this),this.model=R0(),this.Mg=!0,Ox(this),this.layout=new Ot,this.Mg=!1,this.Yj=this.Zj=this.Xj=this.Wj=this.Iz=this.Sj=this.sv=null,this.Jo=function(){},this.preventDefault=null,this.Ym=!1,this.vh=new WM,void 0!==t&&("string"==typeof t||pt.Element&&t instanceof Element?kv(this,t):e=t),this.wb=!1,e&&this.Vl(e),this}function kx(t){t.Rd=new mr,t.Rd.Le(t),t.Ab=17,t.kw=!1,t.$m=!1,t.Ht="default",t.Ua=new q,t.Yx=new vt,t.Ax(),t.zx(),t.tb=1,t.pa=new P(NaN,NaN).freeze(),t.Jt=new P(NaN,NaN),t.xa=1,t.sp=1,t.bt=new P(NaN,NaN).freeze(),t.ct=NaN,t.tt=1e-4,t.pt=100,t.Bb=new Dt,t.eu=new P(NaN,NaN).freeze(),t.Xs=new B(NaN,NaN,NaN,NaN).freeze(),t.mj=new Bt(0,0,0,0).freeze(),t.nj=Is,t.Tt=!1,t.Et=null,t.Lt=null,t.nh=Er,t.mk=Hn,t.wg=Er,t.Rp=Hn,t.at=Oe,t.dt=Oe,t.bd=!0,t.Wm=!1,t.te=new Z,t.th=new vt,t.Fm=!0,t.Yo=250,t.ik=-1,t.$o=new Bt(16,16,16,16).freeze(),t.cg=!1,t.xk=!1,t.Nm=!0,t.Fp=new Zi,t.Fp.diagram=t,t.Hg=new Zi,t.Hg.diagram=t,t.Yi=new Zi,t.Yi.diagram=t,t.qg=null,t.bf=null,t.Wt=!1,function fT(t){function e(l){var u=l.toLowerCase(),h=new q;n.add(l,h),n.add(u,h),i.add(l,l),i.add(u,l)}var n=new vt,i=new vt;e("InitialAnimationStarting"),e("AnimationStarting"),e("AnimationFinished"),e("BackgroundSingleClicked"),e("BackgroundDoubleClicked"),e("BackgroundContextClicked"),e("ClipboardChanged"),e("ClipboardPasted"),e("DocumentBoundsChanged"),e("ExternalObjectsDropped"),e("GainedFocus"),e("InitialLayoutCompleted"),e("LayoutCompleted"),e("LinkDrawn"),e("LinkRelinked"),e("LinkReshaped"),e("LostFocus"),e("Modified"),e("ObjectSingleClicked"),e("ObjectDoubleClicked"),e("ObjectContextClicked"),e("PartCreated"),e("PartResized"),e("PartRotated"),e("SelectionMoved"),e("SelectionCopied"),e("SelectionDeleting"),e("SelectionDeleted"),e("SelectionGrouped"),e("SelectionUngrouped"),e("ChangingSelection"),e("ChangedSelection"),e("SubGraphCollapsed"),e("SubGraphExpanded"),e("TextEdited"),e("TreeCollapsed"),e("TreeExpanded"),e("ViewportBoundsChanged"),e("InvalidateDraw"),t.Nv=n,t.Mv=i}(t),t.Uh=new Z,t.kt=!0,t.$t=du,t.Vv=!1,t.bu=Rd,t.Ks="auto",t.rp="auto",t.oh=null,t.uh=null,t.qh=null,t.Jh=null,t.Hh=null,t.Gh=null,t.vt=null,t.Eh=null,t.$s=!1,t.Fh=null,t.Ih=null,t.Th=null,t.rh=null,t.wt=!1,t.Dt={},t.$k=[null,null],t.Mg=!1,t.mw=!1,t.Ut=!1,t.Ns=!1,t.Xv=!0,t.cd=!1,t.Vi=!1,t.xw=!0,t.se=-2,t.Fg=new vt,t.Fn=new q,t.xg=!1,t.Ad=!0,t.ws=!0,t.zi=!0,t.Ai=!0,t.xs=!1,t.ys=!0,t.Ji=!0,t.Bi=!0,t.Ki=!0,t.As=!0,t.Ci=!0,t.Ei=!0,t.Di=!0,t.Fi=!0,t.Gi=!0,t.Hi=!0,t.Ii=!0,t.Bs=!0,t.Ds=!0,t.Wv=!1,t.Kk=!1,t.Tm=!0,t.Um=!0,t.zs=!0,t.Cs=!0,t.Ot=16,t.St=16,t.Nq=!1,t.Mt=!1,t.Rt=0,t.Pt=0,t.ub=new Bt(5).freeze(),t.lw=(new Z).freeze(),t.qt=999999999,t.Tv=(new Z).freeze(),t.Si=!0,t.Ti=!0,t.Ui=!0,t.We=!1,t.Of=!1,t.mh=!0,t.Qf=!1,t.Xx=new Z,t.Uv=new Z,t.Qh=null,t.Fv=new dt(8,8),t.Gv=999,t.fw=1,t.nw=0,t.kd={scale:1,position:new P,bounds:new B,Hw:new dt,sx:new dt,lx:!1},t.vw=new B(NaN,NaN,NaN,NaN).freeze(),t.Zn=new dt(NaN,NaN).freeze(),t.wp=new B(NaN,NaN,NaN,NaN).freeze(),t.lt=!1,t.Dg=new vt;var e=new J,n=new Wt;n.bind(new de("text","",io)),e.add(n),t.Tx=e,t.Dg.add("",e),e=new J,(n=new Wt).stroke="brown",n.bind(new de("text","",io)),e.add(n),t.Dg.add("Comment",e),(e=new J).selectable=!1,e.avoidable=!1,(n=new wt).figure="Ellipse",n.fill="black",n.stroke=null,n.desiredSize=new dt(3,3).ha(),e.add(n),t.Dg.add("LinkLabel",e),t.Ri=new vt,(e=new yt).selectionObjectName="GROUPPANEL",e.type=$.Vertical,(n=new Wt).font="bold 12pt sans-serif",n.bind(new de("text","",io)),e.add(n),(n=new $($.Auto)).name="GROUPPANEL";var i=new wt;i.figure="Rectangle",i.fill="rgba(128,128,128,0.2)",i.stroke="black",n.add(i),(i=new mi).padding=new Bt(5,5,5,5).ha(),n.add(i),e.add(n),t.Rx=e,t.Ri.add("",e),t.Ch=new vt,e=new H,(n=new wt).isPanelMain=!0,e.add(n),(n=new wt).toArrow="Standard",n.fill="black",n.stroke=null,n.strokeWidth=0,e.add(n),t.Sx=e,t.Ch.add("",e),e=new H,(n=new wt).isPanelMain=!0,n.stroke="brown",e.add(n),t.Ch.add("Comment",e),(e=new Pt).type=$.Auto,(n=new wt).fill=null,n.stroke="dodgerblue",n.strokeWidth=3,e.add(n),(n=new mi).margin=new Bt(1.5,1.5,1.5,1.5).ha(),e.add(n),t.xt=e,t.Zs=e,(e=new Pt).type=$.Link,(n=new wt).isPanelMain=!0,n.fill=null,n.stroke="dodgerblue",n.strokeWidth=3,e.add(n),t.nt=e,t.Zd=null,t.Op=!1,t.qk=null,t.partManager=new Vt,t.toolManager=new Ce,t.toolManager.initializeStandardTools(),t.defaultTool=t.toolManager,t.currentTool=t.defaultTool,t.Ps=null,t.Em=new Gc,t.At=null,t.Bt=null,t.jr=!1,t.commandHandler=kc(),t.kr=!1,t.Hp=null,t.Ip=dd,t.tw=!1,t.kc=1,t.Rh=null,t.nq=1,t.rq=0,t.dw=[0,0,0,0,0],t.sq=0,t.Yp=1,t.Zv=0,t.$v=new P,t.hy=500,t.Zo=new P,t.jt=!1}function Nd(t,e){t.animationManager.wc(!0),t.lw=(new Z).freeze(),t.Tv=(new Z).freeze();var n=t.skipsUndoManager,i=null!=t.ac;i&&(t.skipsUndoManager=!0);var l=null;null!==t.Zd&&null!==(l=t.Zd.part)&&t.remove(l);var u=[],h=t.Ua.length;if(e){for(e=0;e<h;e++)for(var f=t.Ua.s[e].parts;f.next();){var p=f.value;p!==l&&null===p.data&&u.push(p)}for(e=0;e<u.length;e++)t.remove(u[e])}for(e=0;e<h;e++)t.Ua.s[e].clear();return t.partManager.clear(),t.te.clear(),t.th.clear(),t.Uh.clear(),t.qk=null,t.Fn.clear(),af(),t.Fg.clear(),he=[],null!==l&&(t.add(l),t.partManager.parts.remove(l)),i&&(t.skipsUndoManager=n),u}function kc(){return null}function Oc(t){30<t.rq&&(t.Rh=1)}function Pd(t,e){null!==t.Rh&&(t.Rh=null,e&&t.Jo(),Qu&&Qu.Rw||(t.rq=0,t.dw=[0,0,0,0,0],t.sq=0))}function uu(t){if(null!==t.Ha){var e=t.La;if(null!==e&&0!==e.clientWidth&&0!==e.clientHeight){t.kw||t.setScrollWidth();var n=t.Of?t.Ab:0,i=t.We?t.Ab:0,l=t.kc;t.kc=t.computePixelRatio(),t.kc!==l&&(t.Wm=!0,t.Mb()),(e.clientWidth!==t.Ba+n||e.clientHeight!==t.Aa+i)&&(t.Ti=!0,t.bd=!0,null!==(e=t.layout)&&e.isViewportSized&&t.autoScale===Er&&(t.xk=!0,e.D()),t.cd||t.Mb())}}}function Ox(t){var e=new Rn;e.name="Background",t.pl(e),(e=new Rn).name="",t.pl(e),(e=new Rn).name="Foreground",t.pl(e),(e=new Rn).name="Adornment",e.isTemporary=!0,e.isInDocumentBounds=!1,t.pl(e),(e=new Rn).name="Tool",e.isTemporary=!0,e.isInDocumentBounds=!0,t.pl(e),(e=new Rn).name="Grid",e.allowSelect=!1,e.pickable=!1,e.isTemporary=!0,e.isInDocumentBounds=!1,t.Aw(e,t.Ij("Background"))}function Tr(t){var e=new $($.Grid);e.name="GRID";var n=new wt;return n.figure="LineH",n.stroke="lightgray",n.strokeWidth=.5,n.interval=1,e.add(n),(n=new wt).figure="LineH",n.stroke="gray",n.strokeWidth=.5,n.interval=5,e.add(n),(n=new wt).figure="LineH",n.stroke="gray",n.strokeWidth=1,n.interval=10,e.add(n),(n=new wt).figure="LineV",n.stroke="lightgray",n.strokeWidth=.5,n.interval=1,e.add(n),(n=new wt).figure="LineV",n.stroke="gray",n.strokeWidth=.5,n.interval=5,e.add(n),(n=new wt).figure="LineV",n.stroke="gray",n.strokeWidth=1,n.interval=10,e.add(n),(n=new lt).add(e),n.layerName="Grid",n.zOrder=0,n.isInDocumentBounds=!1,n.isAnimated=!1,n.pickable=!1,n.locationObjectName="GRID",t.add(n),t.partManager.parts.remove(n),e.visible=!1,e}function pv(){this.H.Mt?this.H.Mt=!1:this.H.isEnabled?this.H.Nw(this):Qs(this.H)}function UM(t){this.H.isEnabled?(this.H.Rt=t.target.scrollTop,this.H.Pt=t.target.scrollLeft):Qs(this.H)}function gv(t,e){if(t.fixedBounds.v())return e.assign(t.fixedBounds),e.fo(t.ub),e;for(var n=!0,i=t.Ua.s,l=i.length,u=0;u<l;u++){var h=i[u];if(h.visible&&h.isInDocumentBounds)for(var f=(h=h.Ma.s).length,p=0;p<f;p++){var g=h[p];g.isInDocumentBounds&&g.isVisible()&&(g=g.actualBounds).v()&&(n?(n=!1,e.assign(g)):e.Xc(g))}}return n&&e.h(0,0,0,0),e.fo(t.ub),e}function yr(t,e){if((e||t.Qf)&&!t.wb&&null!==t.Ha&&t.documentBounds.v()){if(e){var n=t.initialPosition;if(n.v())return void(t.position=n);(n=P.alloc()).oi(t.documentBounds,t.initialDocumentSpot);var i=t.viewportBounds;i=B.allocAt(0,0,i.width,i.height);var l=P.alloc();l.oi(i,t.initialViewportSpot),l.h(n.x-l.x,n.y-l.y),t.position=l,B.free(i),P.free(l),P.free(n)}t.wb=!0,n=t.nh,e&&t.wg!==Er&&(n=t.wg);var u=n!==Er?Zs(t,n):t.scale;n=t.pa.x,i=t.pa.y,l=t.Ba/u;var h=t.Aa/u,f=t.mk,p=t.Rp;e&&!f.pb()&&(p.pb()||p.Sb())&&(f=p.Sb()?ut:p),hu(t,t.documentBounds,l,h,f,e),e=t.scale,t.scale=u,t.wb=!1,is(t),Ad(t,!0,!1),F.B((u=t.viewportBounds).x,n)&&F.B(u.y,i)&&F.B(u.width,l)&&F.B(u.height,h)||t.onViewportBoundsChanged(new B(n,i,l,h),u,e,!1)}}function Zs(t,e){var n=t.sp;if(null===t.Ha)return n;t.Za();var i=t.documentBounds;if(!i.v())return n;var l=i.width,u=t.Ba+(t.Of?t.Ab:0),h=t.Aa+(t.We?t.Ab:0),f=u/l,p=h/(i=i.height);return e===jc?((e=Math.min(p,f))>n&&(e=n),e<t.minScale&&(e=t.minScale),e>t.maxScale&&(e=t.maxScale),e):e===bg?((e=p>f?(h-t.Ab)/i:(u-t.Ab)/l)>n&&(e=n),e<t.minScale&&(e=t.minScale),e>t.maxScale&&(e=t.maxScale),e):t.scale}function hu(t,e,n,i,l,u){var h=P.allocAt(t.pa.x,t.pa.y),f=h.x,p=h.y;if(null!==t.Hp){var g=P.alloc();f=(g=t.Hp.ia(Oe,g)).x-t.Ip.x/t.scale,p=g.y-t.Ip.y/t.scale,l=Ne,P.free(g)}(u||t.scrollMode===Is)&&(l.pb()&&(n>e.width&&(f=e.x+(l.x*e.width+l.offsetX)-(l.x*n-l.offsetX)),i>e.height&&(p=e.y+(l.y*e.height+l.offsetY)-(l.y*i-l.offsetY))),u=n-e.width,n<e.width+(l=t.mj).left+l.right?(f=Math.min(f+n/2,e.right+Math.max(u,l.right)-n/2),f=Math.max(f,e.left-Math.max(u,l.left)+n/2),f-=n/2):f>e.left?f=e.left:f<e.right-n&&(f=e.right-n),n=i-e.height,i<e.height+l.top+l.bottom?(p=Math.min(p+i/2,e.bottom+Math.max(n,l.bottom)-i/2),p=Math.max(p,e.top-Math.max(n,l.top)+i/2),p-=i/2):p>e.top?p=e.top:p<e.bottom-i&&(p=e.bottom-i)),h.x=isFinite(f)?f:-t.ub.left,h.y=isFinite(p)?p:-t.ub.top,null!==t.positionComputation&&(e=t.positionComputation(t,h),h.x=e.x,h.y=e.y),Nx(t.Rd,t.pa,h),t.pa.h(h.x,h.y),El(t),P.free(h)}function cu(t,e,n,i){for(void 0===n&&(n=null),void 0===i&&(i=null),jn(t),t=t.Ua.iteratorBackwards;t.next();){var l=t.value;if(l.visible&&!l.isTemporary&&null!==(l=l.ec(e,n,i)))return l}return null}function bc(t,e,n){var i=t.Hg;return t.Hg=t.Yi,t.Yi=i,i.diagram=t,i.event=e,n?Eg(t,e,i):(i.viewPoint=t.Hg.viewPoint,i.documentPoint=t.Hg.documentPoint),t=0,e.ctrlKey&&(t+=1),e.altKey&&(t+=2),e.shiftKey&&(t+=4),e.metaKey&&(t+=8),i.modifiers=t,i.button=e.button,void 0!==e.buttons&&(i.buttons=e.buttons),Do&&0===e.button&&e.ctrlKey&&(i.button=2),i.down=!1,i.up=!1,i.clickCount=1,i.delta=0,i.handled=!1,i.bubbles=!1,i.timestamp=e.timeStamp,i.isMultiTouch=!1,i.targetDiagram=yv(e,e.target),i.targetObject=null,i}function yv(t,e){return null===e?null:(e=e.H)?e:((e=t.path)||"function"!=typeof t.composedPath||(e=t.composedPath()),e&&e[0]&&e[0].H?e[0].H:null)}function Yt(t,e,n,i,l,u){var h=t.Hg;return t.Hg=t.Yi,t.Yi=h,h.diagram=t,h.clickCount=1,t=h.delta=0,e.ctrlKey&&(t+=1),e.altKey&&(t+=2),e.shiftKey&&(t+=4),e.metaKey&&(t+=8),h.modifiers=t,h.event=e,h.timestamp=e.timeStamp,h.button=e.button,h.buttons=e.buttons,Do&&0===e.button&&e.ctrlKey&&(h.button=2),h.down=n,h.up=i,h.handled=!1,h.bubbles=l,h.isMultiTouch=u,h}function uh(t,e){return!!t.bubbles||(void 0!==e.stopPropagation&&e.stopPropagation(),!1!==e.cancelable&&e.preventDefault(),e.cancelBubble=!0,!1)}function Eg(t,e,n){var i=t.Ha,l=t.Ba,u=t.Aa,h=0,f=0;null!==i&&(i=i.getBoundingClientRect(),h=e.clientX-l/i.width*i.left,f=e.clientY-u/i.height*i.top),n.viewPoint.h(h,f),null!==t.Bb?(e=P.allocAt(h,f),t.Bb.Ld(e),n.documentPoint.assign(e),P.free(e)):n.documentPoint.h(h,f)}function HM(t,e,n,i){if(void 0!==e.targetTouches){if(2>e.targetTouches.length)return;e=e.targetTouches[n]}else{if(null===t.$k[0])return;e=t.$k[n]}null!==(n=t.Ha)&&(n=n.getBoundingClientRect(),i.h(e.clientX-t.Ba/n.width*n.left,e.clientY-t.Aa/n.height*n.top))}function Ad(t,e,n){t.animationManager.defaultAnimation.isAnimating||t.wb||!t.Ti||Qs(t)||(e&&jn(t),n&&yr(t,!1))}function fa(t,e){if(!t.cd&&(t.cg=!1,null!==t.La||t.Zn.v())){t.cd=!0;var n=t.animationManager,i=t.Fn;if(!n.isAnimating&&0!==i.length){for(var l=i.s,u=l.length,h=0;h<u;h++){var f=l[h];Qi(f,!1),f.w()}i.clear()}0<(i=t.Uv).count&&(i.each(function(p){p.rv()}),i.clear()),l=i=!1,n.defaultAnimation.isAnimating&&(l=!0,i=t.skipsUndoManager,t.skipsUndoManager=!0),n.zb||uu(t),Ad(t,!1,!0),null!==t.Zd&&(t.Zd.visible&&!t.Op&&(Es(t),t.Op=!0),!t.Zd.visible&&t.Op&&(t.Op=!1)),jn(t),u=!1,(!t.Qf||t.mh)&&(t.Qf?Od(t,!t.xk):(t.Da("Initial Layout"),!1===n.isEnabled&&n.wc(),Od(t,!1)),u=!0),t.xk=!1,jn(t),t.Ut||function uT(t){t.cd||jn(t),t.Za()}(t),Ad(t,!0,!1),h=!1,u?((n=B.alloc()).assign(t.viewportBounds),t.Qf||(h=t.Qf=!0,t.skipsUndoManager||(t.undoManager.isPendingClear=!0),t.undoManager.isPendingUnmodified=!0,function hT(t){var e=t.xa;if(t.wg!==Er)t.scale=Zs(t,t.wg);else if(t.nh!==Er)t.scale=Zs(t,t.nh);else{var n=t.initialScale;isFinite(n)&&0<n&&(t.scale=n)}t.xa!==e&&(is(t),Ad(t,!0,!1)),yr(t,!0),t.Pd(e=t.Ua.s,e.length,t,t.viewportBounds),t.P("InitialLayoutCompleted"),t.Jt.assign(t.pa),Es(t)}(t)),t.P("LayoutCompleted"),n.C(t.viewportBounds)||Ad(t,!0,!1),B.free(n)):n.Dk&&n.uw&&(t.wg!==Er?t.scale=Zs(t,t.wg):t.nh!==Er?t.scale=Zs(t,t.nh):(n=t.initialScale,isFinite(n)&&0<n&&(t.scale=n)),yr(t,!0)),jn(t),u&&h&&t.eb("Initial Layout"),t.mu(),e||t.tc(t.Zb),l&&(t.skipsUndoManager=i),t.cd=!1}}function jn(t){if(0!==t.te.count&&(t.cd||!t.animationManager.isTicking)){for(var e=0;23>e;e++){var n=t.te.iterator;if(null===n||0===t.te.count)break;t.te=new Z,t.rv(n,t.te)}t.nodes.each(function(i){i instanceof yt&&0!=(65536&i.U)&&(i.U=65536^i.U)})}}function bx(t,e){for(var n=oe(),i=oe(),l=e.memberParts;l.next();){var u=l.value;u.isVisible()&&(u instanceof yt?(qs(u)||Xn(u)||Da(u))&&bx(t,u):u instanceof H?u.fromNode===e||u.toNode===e?i.push(u):n.push(u):(u.measure(1/0,1/0),u.arrange()))}for(t=n.length,l=0;l<t;l++)(u=n[l]).measure(1/0,1/0),u.arrange();for(Nt(n),e.measure(1/0,1/0),e.arrange(),t=i.length,e=0;e<t;e++)(n=i[e]).measure(1/0,1/0),n.arrange();Nt(i)}function vv(t,e,n,i,l,u,h,f,p,g){if(null!==t.La){null===t.Ha&&Y("No canvas specified"),void 0===h&&(h=null),void 0===f&&(f=null),void 0===p&&(p=!1),void 0===g&&(g=!1),kd(t),t.Zb.Oc(!0),ch(t),t.Vi=!0;var m=t.xa;t.xa=l;var v=t.Ua.s,x=v.length;try{var D=new B(u.x,u.y,i.width/l,i.height/l),M=D.copy();M.fo(n),Es(t,M),jn(t),t.Pd(v,x,t,D),e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,i.width,i.height),null!==f&&""!==f&&(e.fillStyle=f,e.fillRect(0,0,i.width,i.height));var T=t.kc;e.scale(T,T);var N=Dt.alloc();N.reset(),N.translate(n.left,n.top),N.scale(l),0===u.x&&0===u.y||N.translate(-u.x,-u.y),e.setTransform(N.m11,N.m12,N.m21,N.m22,N.dx,N.dy),e.Pc(),Dt.free(N),Ti(t,e),e.globalAlpha=t.tb;var I=t.Ij("Grid");if(h){var k=new Z,O=h.iterator;for(O.reset();O.next();){var L=O.value;L instanceof lt&&(g||L.layer!==I)&&k.add(L)}for(g=0;g<x;g++){var b=v[g];I=e;var U=t;if(b.visible&&0!==b.tb&&(p||!b.isTemporary)){var X=b.Ma.s,nt=X.length;if(0!==nt){var et=ca(b,I),Q=b.Bn;Q.length=0;var G=U.scale,xt=B.alloc();for(n=0;n<nt;n++){var ft=X[n];k.contains(ft)&&b.$h(I,ft,U,Q,G,xt,!1)}B.free(xt),I.globalAlpha=et}}}}else for(k=0;k<x;k++)(U=v[k])===I?g&&U.tc(e,t,!0):U.tc(e,t,p);t.Vi=!1,t.vh&&Vd(t.vh,t)&&t.Qs()}finally{t.xa=m,t.Zb.Oc(!0),ch(t),t.Pd(v,x,t,t.viewportBounds),Es(t)}}}function Ti(t,e){null!==(t=t.Ig)&&(void 0!==t.imageSmoothingEnabled&&e.Ex(!!t.imageSmoothingEnabled),null!=(t=t.defaultFont)&&(e.font=t))}function hh(t,e){var l,n=t instanceof $,i=t instanceof V;for(l in e){""===l&&Y("Setting properties requires non-empty property names");var u=t,h=l;if(n||i){var f=l.indexOf(".");if(0<f){var p=l.substring(0,f);n?u=t.fb(p):null==(u=t[p])&&(u=t.toolManager[p]),jt(u)?h=l.substr(f+1):Y("Unable to find object named: "+p+" in "+t.toString()+" when trying to set property: "+l)}}if("_"!==h[0]&&!vn(u,h)){if(i&&"ModelChanged"===h){t.Cw(e[h]);continue}if(i&&"Changed"===h){t.Ug(e[h]);continue}if(i&&vn(t.toolManager,h))u=t.toolManager;else{if(i&&Fc(t,h)){t.wj(h,e[h]);continue}if(t instanceof rt&&"Changed"===h){t.Ug(e[h]);continue}Y('Trying to set undefined property "'+h+'" on object: '+u.toString())}}u[h]=e[l],"_"===h[0]&&u instanceof ot&&u.zw(h)}}function is(t){!1===t.Ti&&(t.Ti=!0)}function ch(t){!1===t.Ui&&(t.Ui=!0)}function kd(t){!1!==t.Wm&&(t.Wm=!1,No(t,t.Ba,t.Aa))}function No(t,e,n){El(t);var i=t.kc;t.Ha.resize(e*i,n*i,e,n)&&(t.bd=!0,t.Zb.Oc(!0))}function Qs(t){var e=t.Ha;if(null===e||t.Zn.v())return!0;var n=t.Ba,i=t.Aa,l=t.viewportBounds;if(!t.viewportBounds.v())return!0;var u=l.x,h=l.y,f=l.width,p=l.height,g=t.Qt,m=t.Nt,v=t.La,x=!1,D=t.Of?t.Ab:0,M=t.We?t.Ab:0,T=v.clientWidth||n+D,N=v.clientHeight||i+M;if((T!==n+D||N!==i+M)&&(t.Of=!1,t.We=!1,M=D=0,t.Ba=T,t.Aa=N,x=t.Wm=!0,El(t)),!(x||t.Of||t.We||t.Tm||t.Um))return!0;t.Ti=!1;var I=t.documentBounds,k=0,O=0,L=0,b=0;v=l.width;var U=l.height,X=t.mj;t.contentAlignment.pb()?(I.width>v&&(k=X.left,O=X.right),I.height>U&&(L=X.top,b=X.bottom)):(k=X.left,O=X.right,L=X.top,b=X.bottom),X=I.width+k+O;var nt=I.height+L+b;k=I.x-k;var et=l.x;O=I.right+O;var Q=l.right+D;L=I.y-L;var G=l.y;I=I.bottom+b,b=l.bottom+M;var xt="1px",ft="1px";if(T=X>T/(l=t.scale),N=nt>N/l,t.scrollMode===Is&&(T||N)&&(T&&t.hasHorizontalScrollbar&&t.allowHorizontalScroll&&(T=1,k+1<et&&(T=Math.max((et-k)*l+t.Ba,T)),O>Q+1&&(T=Math.max((O-Q)*l+t.Ba,T)),v+D+1<X&&(T=Math.max((X-v)*l+t.Ba,T)),xt=T.toString()+"px"),N&&t.hasVerticalScrollbar&&t.allowVerticalScroll&&(T=1,L+1<G&&(T=Math.max((G-L)*l+t.Aa,T)),I>b+1&&(T=Math.max((I-b)*l+t.Aa,T)),U+M+1<nt&&(T=Math.max((nt-U)*l+t.Aa,T)),ft=T.toString()+"px")),N="1px"!==ft,(T="1px"!==xt)&&N||!T&&!N||(N&&(Q-=t.Ab),T&&(b-=t.Ab),X<v+D||!t.hasHorizontalScrollbar||!t.allowHorizontalScroll||(D=1,k+1<et&&(D=Math.max((et-k)*l+t.Ba,D)),O>Q+1&&(D=Math.max((O-Q)*l+t.Ba,D)),v+1<X&&(D=Math.max((X-v)*l+t.Ba,D)),xt=D.toString()+"px"),D=t.Aa,(T="1px"!==xt)!==t.We&&(D=T?t.Aa-t.Ab:t.Aa+t.Ab),nt<U+M||!t.hasVerticalScrollbar||!t.allowVerticalScroll||(M=1,L+1<G&&(M=Math.max((G-L)*l+D,M)),I>b+1&&(M=Math.max((I-b)*l+D,M)),U+1<nt&&(M=Math.max((nt-U)*l+D,M)),ft=M.toString()+"px"),N="1px"!==ft),t.Nq&&T===t.We&&N===t.Of)return n===t.Ba&&i===t.Aa||t.nd(),!1;if(T!==t.We&&(t.Aa="1px"===xt?t.Aa+t.Ab:Math.max(t.Aa-t.Ab,1),x=!0),t.We=T,m.style.width=xt,N!==t.Of&&(t.Ba="1px"===ft?t.Ba+t.Ab:Math.max(t.Ba-t.Ab,1),x=!0,t.$m&&(M=P.alloc(),N?(e.style.left=t.Ab+"px",t.position=M.h(t.pa.x+t.Ab/t.scale,t.pa.y)):(e.style.left="0px",t.position=M.h(t.pa.x-t.Ab/t.scale,t.pa.y)),P.free(M))),x&&El(t),t.Of=N,m.style.height=ft,t.Mt=!0,x&&(t.Wm=!0),e=g.scrollLeft,t.hasHorizontalScrollbar&&t.allowHorizontalScroll&&(v+1<X?e=(t.position.x-k)*l:k+1<et?e=g.scrollWidth-g.clientWidth:O>Q+1&&(e=t.position.x*l)),t.$m)switch(t.Ht){case"negative":e=-(g.scrollWidth-e-g.clientWidth);break;case"reverse":e=g.scrollWidth-e-g.clientWidth}return g.scrollLeft=e,t.hasVerticalScrollbar&&t.allowVerticalScroll&&(U+1<nt?g.scrollTop=(t.position.y-L)*l:L+1<G?g.scrollTop=g.scrollHeight-g.clientHeight:I>b+1&&(g.scrollTop=t.position.y*l)),N=t.Aa,g.style.width=(T=t.Ba)+(t.Of?t.Ab:0)+"px",g.style.height=N+(t.We?t.Ab:0)+"px",n===T&&i===N&&!t.animationManager.zb||(n=B.allocAt(u,h,f,p),t.onViewportBoundsChanged(n,t.viewportBounds,l,x),B.free(n),!1)}function Ig(t,e,n){var i=e.layer;null!==i&&i.diagram===t&&(e.isSelected=!1,e.isHighlighted=!1,e.D(2),n&&e.Fj(),0<=(n=i.lc(-1,e,!1))&&t.bb(xe,"parts",i,e,null,n,null),null!==(t=e.layerChanged)&&t(e,i,null))}function rs(t,e,n,i,l,u){if(!e.contains(n)&&(void 0===u&&(u=!1),!i||u||n.canMove()||n.canCopy()))if(void 0===l&&(l=Ng(t)),n instanceof J){if(e.add(n,t.Fd(l,n,n.location)),n instanceof yt&&(null!==n.placeholder||l.dragsMembers))for(u=n.memberParts;u.next();)rs(t,e,u.value,i,l,l.groupsAlwaysMove);for(u=n.linksConnected;u.next();){var h=u.value;if(!e.contains(h)){var f=h.fromNode,p=h.toNode;null!==f&&e.contains(f)&&null!==p&&e.contains(p)&&rs(t,e,h,i,l)}}if(l.dragsTree)for(n=n.Au();n.next();)rs(t,e,n.value,i,l)}else if(n instanceof H)for(e.add(n,t.Fd(l,n)),n=n.labelNodes;n.next();)rs(t,e,n.value,i,l);else n instanceof Pt||e.add(n,t.Fd(l,n,n.location))}function fh(t,e,n,i,l){if(null!==e&&0!==e.count){var u=P.alloc(),h=P.alloc();h.assign(n),isNaN(h.x)&&(h.x=0),isNaN(h.y)&&(h.y=0),(n=t.jr)||Pg(t,e);for(var f=oe(),p=oe(),g=e.iterator,m=P.alloc();g.next();){var v=g.key,x=g.value;if(v.Tc()){var D=GM(t,v,e);null!==D?f.push(new Ov(v,x,D)):(!l||v.canMove())&&(u.assign(D=x.point),t.computeMove(v,u.add(h),i,m),v.location=m,void 0===x.shifted&&(x.shifted=new P),x.shifted.assign(m.je(D)))}else g.key instanceof H&&p.push(g.ra)}for(P.free(m),l=f.length,g=0;g<l;g++)u.assign((v=f[g]).info.point),void 0===v.Eu.shifted&&(v.Eu.shifted=new P),v.node.location=u.add(v.Eu.shifted);for(l=P.alloc(),g=P.alloc(),v=p.length,x=0;x<v;x++){var M=p[x];if((D=M.key)instanceof H)if(D.suspendsRouting){D.ef=null,m=D.fromNode;var T=D.toNode;if(null!==t.draggedLink&&i.dragsLink)if(T=M.value.point,null===D.dragComputation)e.add(D,t.Fd(i,D,h)),al(D,h.x-T.x,h.y-T.y);else{M=P.allocAt(0,0),(m=D.i(0))&&m.v()&&M.assign(m);var N=m=P.alloc().assign(M).add(h);i.isGridSnapEnabled&&(i.isGridSnapRealtime||t.lastInput.up)&&wv(t,D,m,N=P.alloc(),i),m.assign(D.dragComputation(D,m,N)).je(M),e.add(D,t.Fd(i,D,m)),al(D,m.x-T.x,m.y-T.y),P.free(M),P.free(m),N!==m&&P.free(N)}else null!==m&&(l.assign(m.location),null!==(N=e.I(m))&&l.je(N.point)),null!==T&&(g.assign(T.location),null!==(N=e.I(T))&&g.je(N.point)),null!==m&&null!==T?l.$a(g)?(m=M.value.point,(T=u).assign(l),T.je(m),e.add(D,t.Fd(i,D,l)),al(D,T.x,T.y)):(D.suspendsRouting=!1,D.ab()):(M=M.value.point,e.add(D,t.Fd(i,D,m=null!==m?l:null!==T?g:h)),al(D,m.x-M.x,m.y-M.y))}else(null===D.fromNode||null===D.toNode)&&(m=M.value.point,e.add(D,t.Fd(i,D,h)),al(D,h.x-m.x,h.y-m.y))}P.free(u),P.free(h),P.free(l),P.free(g),Nt(f),Nt(p),n||(jn(t),Ag(t,e))}}function Ng(t){var e=t.toolManager.findTool("Dragging");return null!==e?e.dragOptions:t.Em}function wv(t,e,n,i,l){if(void 0===l&&(l=Ng(t)),i.assign(n),null!==e){var u=t.grid;t=(e=l.gridSnapCellSize).width,e=e.height;var h=l.gridSnapOrigin,f=h.x;if(h=h.y,l=l.gridSnapCellSpot,null!==u){var p=u.gridCellSize;isNaN(t)&&(t=p.width),isNaN(e)&&(e=p.height),u=u.gridOrigin,isNaN(f)&&(f=u.x),isNaN(h)&&(h=u.y)}(u=P.allocAt(0,0)).pi(0,0,t,e,l),F.so(n.x,n.y,f+u.x,h+u.y,t,e,i),P.free(u)}}function Pg(t,e){if(null!==e)for(t.jr=!0,t=e.iterator;t.next();)(e=t.key)instanceof H&&(e.suspendsRouting=!0)}function Ag(t,e){if(null!==e){for(e=e.iterator;e.next();){var n=e.key;n instanceof H&&(n.suspendsRouting=!1,M0(n)&&n.ab())}t.jr=!1}}function GM(t,e,n){return null===(e=e.containingGroup)||null===(t=GM(t,e,n))&&null===(t=n.I(e))?null:t}function kg(t,e,n){if(null!==e.diagram&&e.diagram!==t&&Y("Cannot share a Layer with another Diagram: "+e+" of "+e.diagram),null===n?null!==e.diagram&&Y("Cannot add an existing Layer to this Diagram again: "+e):(n.diagram!==t&&Y("Existing Layer must be in this Diagram: "+n+" not in "+n.diagram),e===n&&Y("Cannot move a Layer before or after itself: "+e)),e.diagram!==t){e=e.name,n=(t=t.Ua).count;for(var i=0;i<n;i++)t.K(i).name===e&&Y("Cannot add Layer with the name '"+e+"'; a Layer with the same name is already present in this Diagram.")}}function Po(t,e,n){var i=t.animationManager;if(t.wb||t.cd)t.xa=n,El(t),i.zb&&(ou(i)||i.Wd.add(i.H,"scale",e,t.xa));else if(null===t.Ha)t.xa=n,El(t);else{t.wb=!0;var l=t.viewportBounds.copy(),u=t.Ba,h=t.Aa;l.width=t.Ba/e,l.height=t.Aa/e;var f=t.zoomPoint.x,p=t.zoomPoint.y,g=t.contentAlignment;isNaN(f)&&(g.Uc()?g.xf(Ms)?f=0:g.xf(En)&&(f=u-1):f=g.pb()?g.x*(u-1):u/2),isNaN(p)&&(g.Uc()?g.xf(ii)?p=0:g.xf(Cl)&&(p=h-1):p=g.pb()?g.y*(h-1):h/2),null===t.scaleComputation||t.animationManager.defaultAnimation.isAnimating||(n=t.scaleComputation(t,n)),n<t.minScale&&(n=t.minScale),n>t.maxScale&&(n=t.maxScale),u=P.allocAt(t.pa.x+f/e-f/n,t.pa.y+p/e-p/n),t.position=u,P.free(u),t.xa=n,El(t),t.onViewportBoundsChanged(l,t.viewportBounds,e,!1),t.wb=!1,yr(t,!1),i.zb&&(ou(i)||i.Wd.add(i.H,"scale",e,t.xa)),t.N(),is(t)}}function Es(t,e){var n=t.Zd;if(null!==n&&n.visible){for(var i=dt.alloc(),l=1,u=1,h=n.R.s,f=h.length,p=0;p<f;p++){var g=h[p],m=Math.abs(g.interval);2>m||(Wv(g.figure)?u=u*m/F.Xw(u,m):l=l*m/F.Xw(l,m))}if(i.h(u*(h=n.gridCellSize).width,l*h.height),void 0!==e)l=e.width,u=e.height,t=e.x,h=e.y;else{if((e=B.alloc()).h((t=t.viewportBounds).x,t.y,t.width,t.height),!e.v())return void B.free(e);l=e.width,u=e.height,t=e.x,h=e.y,B.free(e)}n.width=l+2*i.width,n.height=u+2*i.height,e=P.alloc(),F.so(t,h,0,0,i.width,i.height,e),e.offset(-i.width,-i.height),dt.free(i),n.part.location=e,P.free(e)}}function dh(t){var e=t.isModified;t.xw!==e&&(t.xw=e,t.P("Modified"))}function xv(t,e){for(var n=(e=e.R.s).length,i=0;i<n;i++)Cv(t,e[i])}function Cv(t,e){if(e instanceof Gi){var n=e.element;if(null!==n&&n instanceof HTMLImageElement){n.sg instanceof Z&&n.sg.add(t);var i=e.vg;if(null!==i&&!0===i.Up&&null!==e.diagram&&e.diagram.Fn.add(e),n.Pm)if(n=n.getAttribute("src")||"",null===(i=t.Fg.I(n)))(i=[]).push(e),t.Fg.add(n,i);else{for(t=0;t<i.length;t++)if(i[t]===e)return;i.push(e)}}}}function Mv(t,e){if(e instanceof Gi){var n=e.element;if(null!==n&&n instanceof HTMLImageElement&&n.Pm){var i=n.getAttribute("src")||"",l=t.Fg.I(i);if(null!==l)for(var u=0;u<l.length;u++)if(l[u]===e){l.splice(u,1),0===l.length&&(t.Fg.remove(i),n.fq&&n.removeEventListener("load",n.fq),n.Bp&&n.removeEventListener("error",n.Bp),delete n.fq,delete n.Bp,n.sg instanceof Z&&n.sg.remove(t),af(i));break}}}}function El(t){var e=t.pa,n=t.xa;t.vw.h(e.x,e.y,Math.max(t.Ba,0)/n,Math.max(t.Aa,0)/n)}function Dv(t,e){t.Si=!1;var n=t.wp;n.C(e)||(n=n.copy(),t.wp.assign(e),yr(t,!1),t.P("DocumentBoundsChanged",void 0,n),is(t))}function Og(t,e){for(var n=t.Uh.iterator;n.next();)Fx(t,n.value,e);t.layout&&(e?t.layout.isValidLayout=!1:t.layout.D())}function Fx(t,e,n){if(null!==e){for(var i=e.Vk.iterator;i.next();)Fx(t,i.value,n);null!==e.layout&&(n?e.layout.isValidLayout=!1:e.layout.D())}}function Od(t,e){if(t.mh&&!t.Ns){var n=t.$;t.$=!0;var i=t.undoManager.transactionLevel,l=t.layout,u=t.animationManager;try{0===i&&(t.undoManager.isInternalTransaction=!0,t.Da("Layout")),1>=i&&!u.defaultAnimation.isAnimating&&!u.zb&&(e||_l(u,"Layout")),t.mh=!1;for(var h=t.Uh.iterator;h.next();)Ld(t,h.value,e,i);l.isValidLayout||(!e||l.isRealtime||null===l.isRealtime||0===i?(l.doLayout(t),jn(t),l.isValidLayout=!0):t.mh=!0)}finally{e=t.undoManager.isInternalTransaction,0===i&&(t.eb("Layout"),t.undoManager.isInternalTransaction=!1),!e||0!==i&&1!==i||Tl(u),t.$=n}}}function Ld(t,e,n,i){if(null!==e){for(var l=e.Vk.iterator;l.next();)Ld(t,l.value,n,i);null===(l=e.layout)||l.isValidLayout||(!n||l.isRealtime||0===i?(e.gh=!e.location.v(),l.doLayout(e),e.D(32),bx(t,e),l.isValidLayout=!0):t.mh=!0)}}function Fc(t,e){var n=t.Mv.I(e);return null!==n?n:t.Mv.I(e.toLowerCase())}function bd(t,e){var n=t.Nv.I(e);if(null!==n||null!==(n=t.Nv.I(e.toLowerCase())))return n;Y("Unknown DiagramEvent name: "+e)}function Fd(t){if(t.animationManager.isTicking)return!1;var e=t.currentTool;return e!==t.toolManager.findTool("Dragging")||!t.jr||e.isComplexRoutingRealtime}function Sv(t,e,n,i){var l=t.Qh;if(null===l&&(t.Qh=l=new Ih(t.avoidanceCellSize)),l.Sr||l.group!==n||l.Hx!==i){if(l.mx=Math.max(l.ps+1,Math.floor(t.avoidanceLimit/t.avoidanceCellSize.width)),l.nx=Math.max(l.ps+1,Math.floor(t.avoidanceLimit/t.avoidanceCellSize.height)),null!==n&&(n=Rx(t,n)),null===n){e=B.alloc(),t.computeOccupiedArea(e),e.vc(100,100),l.initialize(e);for(var u=t.nodes;u.next();){var h=u.value,f=h.layer;null!==f&&f.visible&&!f.isTemporary&&_v(t,h,i,e)}B.free(e)}else{for(0<n.memberParts.count&&((e=t.computePartsBounds(n.memberParts,!1)).vc(20,20),l.initialize(e)),e=B.alloc(),u=n.memberParts;u.next();)(h=u.value)instanceof J&&_v(t,h,i,e);B.free(e)}l.group=n,l.Hx=i,l.Sr=!1}else e&&Rs(l);return l}function Rx(t,e){return e.avoidable&&!e.isLinkLabel?e:null!==e.containingGroup?Rx(t,e.containingGroup):null}function _v(t,e,n,i){if(e!==n&&e.isVisible())if(e.avoidable&&!e.isLinkLabel){var l=(e=e.getAvoidableRect(i)).x,u=e.y;if(Nh(t=t.Qh,l,u))for(n=(u-t.Ed)/t.oc|0,i=Math.min((l+e.width-t.Dd)/t.nc|0,t.Wh),e=Math.min((u+e.height-t.Ed)/t.oc|0,t.Xh),l=(l-t.Dd)/t.nc|0;l<=i;l++)if((u=t.Xb[l]).fill)u.fill(ul,n,e+1);else for(var h=n;h<=e;h++)u[h]=ul}else if(e instanceof yt)for(e=e.memberParts;e.next();)(l=e.value)instanceof J&&_v(t,l,n,i)}function Lg(t,e){null===t.Qh||t.Qh.Sr||void 0!==e&&(!e.avoidable||e.isLinkLabel)||(t.Qh.Sr=!0)}function Rc(t){-1===t.ik&&(t.ik=Ja(function(){if(-1!==t.ik&&(t.lg(),null!==t.lastInput.event)){var e=t.computeAutoScrollPosition(t.Zo);e.$a(t.position)||(t.position=e,t.lastInput.documentPoint=t.rs(t.Zo),t.doMouseMove(),t.Si=!0,e=B.alloc(),t.computeBounds(e),e.Xc(t.documentBounds),Dv(t,e),B.free(e),t.bd=!0,t.nd(),Rc(t))}},t.Yo))}function ph(t,e,n){function i(){var m=+new Date;for(u=!0,h.reset();h.next();)if(!h.value[0].Qk){u=!1;break}u||m-g>p?e(n,l,f):pt.requestAnimationFrame(i)}for(var l=n.callback,u=!0,h=t.Fg.iterator;h.next();)if(!h.value[0].Qk){u=!1;break}if("function"!=typeof l||u)return e(n,l,t);var f=t,p=n.callbackTimeout||300,g=+new Date;return pt.requestAnimationFrame(function(){i()}),null}function jx(t,e,n,i){if(t.animationManager.wc(),t.nd(),null===t.Ha)return null;"object"!=typeof e&&Y("properties argument must be an Object.");var l=e.size||null,u=e.scale||null;void 0!==e.scale&&isNaN(e.scale)&&(u="NaN");var h=e.maxSize;void 0===e.maxSize&&(h="SVG"===n?new dt(1/0,1/0):new dt(2e3,2e3));var f=e.position||null,p=e.parts||null,g=void 0===e.padding?1:e.padding,m=e.background||null,v=e.omitTemporary;void 0===v&&(v=!0);var x=e.document||document,D=e.elementFinished||null,M=e.showTemporary;void 0===M&&(M=!v),void 0===(e=e.showGrid)&&(e=M),null!==l&&isNaN(l.width)&&isNaN(l.height)&&(l=null),"number"==typeof g?g=new Bt(g):g instanceof Bt||Y("MakeImage padding must be a Margin or a number."),g.left=Math.max(g.left,0),g.right=Math.max(g.right,0),g.top=Math.max(g.top,0),g.bottom=Math.max(g.bottom,0),t.Zb.Oc(!0);var T=(v=new Wr(null,x)).context;if(!(l||u||p||f))return v.width=t.Ba+Math.ceil(g.left+g.right),v.height=t.Aa+Math.ceil(g.top+g.bottom),"SVG"===n?null===i?null:(i.resize(v.width,v.height,v.width,v.height),i.ownerDocument=x,i.po=D,vv(t,i.context,g,new dt(v.width,v.height),t.xa,t.pa,p,m,M,e),i.context):(t.Fm=!1,vv(t,T,g,new dt(v.width,v.height),t.xa,t.pa,p,m,M,e),t.Fm=!0,v.context);var N=t.sp,I=t.documentBounds.copy();if(I.jv(t.ub),M)for(var k=t.Ua.s,O=k.length,L=0;L<O;L++){var b=k[L];if(b.visible&&b.isTemporary)for(var U=(b=b.Ma.s).length,X=0;X<U;X++){var nt=b[X];nt.isInDocumentBounds&&nt.isVisible()&&(nt=nt.actualBounds).v()&&I.Xc(nt)}}if(k=new P(I.x,I.y),null!==p){for(O=new B(0,0,0,0),L=!0,(b=p.iterator).reset();b.next();)(U=b.value)instanceof lt&&(null!==(X=U.layer)&&!X.visible||null!==X&&!M&&X.isTemporary||!U.isVisible()||(U=U.actualBounds).v()&&(L?(L=!1,O.assign(U)):O.Xc(U)));I.width=O.width,I.height=O.height,k.x=O.x,k.y=O.y}return null!==f&&f.v()&&(k=f,u||(u=N)),O=f=0,null!==g&&(f=g.left+g.right,O=g.top+g.bottom),L=b=0,null!==l&&(b=l.width,L=l.height,isFinite(b)&&(b=Math.max(0,b-f)),isFinite(L)&&(L=Math.max(0,L-O))),null!==l&&null!==u?("NaN"===u&&(u=N),l.v()?(l=b,I=L):isNaN(L)?(l=b,I=I.height*u):(l=I.width*u,I=L)):null!==l?l.v()?(u=Math.min(b/I.width,L/I.height),l=b,I=L):isNaN(L)?(l=b,I=I.height*(u=b/I.width)):(l=I.width*(u=L/I.height),I=L):null!==u?"NaN"===u&&h.v()?(u=Math.min((h.width-f)/I.width,(h.height-O)/I.height))>N?(u=N,l=I.width,I=I.height):(l=h.width,I=h.height):(l=I.width*u,I=I.height*u):(u=N,l=I.width,I=I.height),null!==g?(l+=f,I+=O):g=new Bt(0),null!==h&&(N=h.width,h=h.height,isNaN(N)&&(N=2e3),isNaN(h)&&(h=2e3),isFinite(N)&&(l=Math.min(l,N)),isFinite(h)&&(I=Math.min(I,h))),v.width=Math.ceil(l),v.height=Math.ceil(I),"SVG"===n?null===i?null:(i.resize(v.width,v.height,v.width,v.height),i.ownerDocument=x,i.po=D,vv(t,i.context,g,new dt(Math.ceil(l),Math.ceil(I)),u,k,p,m,M,e),i.context):(t.Fm=!1,vv(t,T,g,new dt(Math.ceil(l),Math.ceil(I)),u,k,p,m,M,e),t.Fm=!0,v.context)}_i.className="AnimationTrigger",_i.Default=Ac,_i.Immediate=Id,_i.Bundled=_g,(_=Rn.prototype).clear=function(){this.Ma.clear(),this.Bn.length=0},_.Le=function(t){this.H=t},_.toString=function(t){void 0===t&&(t=0);var e='Layer "'+this.name+'"';if(0>=t)return e;for(var n=0,i=0,l=0,u=0,h=0,f=this.Ma.iterator;f.next();){var p=f.value;p instanceof yt?l++:p instanceof J?i++:p instanceof H?u++:p instanceof Pt?h++:n++}if(f="",0<n&&(f+=n+" Parts "),0<i&&(f+=i+" Nodes "),0<l&&(f+=l+" Groups "),0<u&&(f+=u+" Links "),0<h&&(f+=h+" Adornments "),1<t)for(t=this.Ma.iterator;t.next();)f+="\n    "+(n=t.value).toString(),null!==(i=n.data)&&pn(i)&&(f+=" #"+pn(i)),n instanceof J?f+=" "+io(i):n instanceof H&&(f+=" "+io(n.fromNode)+" "+io(n.toNode));return e+" "+this.Ma.count+": "+f},_.ec=function(t,e,n){if(void 0===e&&(e=null),void 0===n&&(n=null),!1===this.Nh)return null;var i=!1;null!==this.diagram&&this.diagram.viewportBounds.ba(t)&&(i=!0);for(var l=P.alloc(),u=this.Ma.s,h=u.length;h--;){var f=u[h];if((!0!==i||!1!==Ol(f))&&f.isVisible()&&(l.assign(t),Un(l,f.ge),null!==(f=f.ec(l,e,n))&&(null!==e&&(f=e(f)),null!==f&&(null===n||n(f)))))return P.free(l),f}return P.free(l),null},_.di=function(t,e,n,i){if(void 0===e&&(e=null),void 0===n&&(n=null),i instanceof q||i instanceof Z||(i=new Z),!1===this.Nh)return i;var l=!1;null!==this.diagram&&this.diagram.viewportBounds.ba(t)&&(l=!0);for(var u=P.alloc(),h=this.Ma.s,f=h.length;f--;){var p=h[f];if((!0!==l||!1!==Ol(p))&&p.isVisible()){u.assign(t),Un(u,p.ge);var g=p;p.di(u,e,n,i)&&(null!==e&&(g=e(g)),null===g||null!==n&&!n(g)||i.add(g))}}return P.free(u),i},_.tf=function(t,e,n,i,l){if(void 0===e&&(e=null),void 0===n&&(n=null),void 0===i&&(i=!1),l instanceof q||l instanceof Z||(l=new Z),!1===this.Nh)return l;var u=!1;null!==this.diagram&&this.diagram.viewportBounds.Ee(t)&&(u=!0);for(var h=this.Ma.s,f=h.length;f--;){var p=h[f];if((!0!==u||!1!==Ol(p))&&p.isVisible()){var g=p;p.tf(t,e,n,i,l)&&(null!==e&&(g=e(g)),null===g||null!==n&&!n(g)||l.add(g))}}return l},_.zu=function(t,e,n,i,l,u,h){if(!1===this.Nh)return l;for(var f=this.Ma.s,p=f.length;p--;){var g=f[p];if((!0!==h||!1!==Ol(g))&&u(g)&&g.isVisible()){var m=g;g.tf(t,e,n,i,l)&&(null!==e&&(m=e(m)),null===m||null!==n&&!n(m)||l.add(m))}}return l},_.hg=function(t,e,n,i,l,u){if(void 0===n&&(n=null),void 0===i&&(i=null),void 0===l&&(l=!0),!1!==l&&!0!==l&&((l instanceof q||l instanceof Z)&&(u=l),l=!0),u instanceof q||u instanceof Z||(u=new Z),!1===this.Nh)return u;var h=!1;null!==this.diagram&&this.diagram.viewportBounds.ba(t)&&(h=!0);for(var f=P.alloc(),p=P.alloc(),g=this.Ma.s,m=g.length;m--;){var v=g[m];if((!0!==h||!1!==Ol(v))&&v.isVisible()){f.assign(t),Un(f,v.ge),p.h(t.x+e,t.y),Un(p,v.ge);var x=v;v.hg(f,p,n,i,l,u)&&(null!==n&&(x=n(x)),null===x||null!==i&&!i(x)||u.add(x))}}return P.free(f),P.free(p),u},_.Pd=function(t,e){if(this.visible){var n=this.Ma.s,i=n.length;if(0!==i){t=oe();for(var l=oe(),u=0;u<i;u++){var h=n[u];if(h.aw=u,h instanceof H){if(!1===h.xd)continue}else if(h instanceof Pt&&null!==h.adornedPart)continue;var f=h.actualBounds;h.isVisible()&&Xy(f,e)?(h.Pd(!0),t.push(h)):(h.Pd(!1),null!==h.adornments&&0<h.adornments.count&&l.push(h))}for(e=0;e<t.length;e++)for(fm(n=t[e]),n=n.adornments;n.next();)(i=n.value).measure(1/0,1/0),i.arrange(),i.Pd(!0);for(e=0;e<l.length;e++)fm(l[e]);Nt(t),Nt(l)}}},_.tc=function(t,e,n){if(this.visible&&0!==this.tb&&(void 0===n&&(n=!0),n||!this.isTemporary)){var i=(n=this.Ma.s).length;if(0!==i){var l=ca(this,t),u=this.Bn;u.length=0;for(var h=e.scale,f=B.alloc(),p=0;p<i;p++)this.$h(t,n[p],e,u,h,f,!0);B.free(f),t.globalAlpha=l}}},_.$h=function(t,e,n,i,l,u,h){if(!h||Ol(e)){if(null!==i&&e instanceof H&&(e.isOrthogonal&&i.push(e),!1===e.xd))return;for(h=!1,i=e.containingGroup;null!==i;)h?null!==i.ib&&u.ix(i.ib):null!==i.ib&&(h=!0,u.assign(i.ib)),i=i.containingGroup;var f=e.actualBounds;if(i=!1,h&&e.isVisible()){if(!u.Sc(f))return;i=!u.Ee(f)}i&&(t.save(),t.beginPath(),t.rect(u.x,u.y,u.width,u.height),t.clip()),f.width*l>n.nq||f.height*l>n.nq?e.tc(t,n):(u=e.naturalBounds,0===(l=e.actualBounds).width||0===l.height||isNaN(l.x)||isNaN(l.y)||!e.isVisible()||(n=e.transform,null!==e.areaBackground&&(gi(e,t,e.areaBackground,!0,!0,u,l),t.fillRect(l.x,l.y,l.width,l.height)),null===e.areaBackground&&null===e.background&&(gi(e,t,"rgba(0,0,0,0.3)",!0,!1,u,l),t.fillRect(l.x,l.y,l.width,l.height)),null!==e.background&&(t.transform(n.m11,n.m12,n.m21,n.m22,n.dx,n.dy),gi(e,t,e.background,!0,!1,u,l),t.fillRect(0,0,u.width/2,u.height/2),n.Ur()||t.transform(n.m22*(e=1/(n.m11*n.m22-n.m12*n.m21)),-n.m12*e,-n.m21*e,n.m11*e,e*(n.m21*n.dy-n.m22*n.dx),e*(n.m12*n.dx-n.m11*n.dy))))),i&&(t.restore(),t.Oc(!0))}},_.g=function(t,e,n,i,l){var u=this.diagram;null!==u&&u.bb(ee,t,this,e,n,i,l)},_.ii=function(t,e,n){var i=this.Ma;if(e.Ah=this,t>=i.count)t=i.count;else if(i.K(t)===e)return-1;return i.Cb(t,e),e.yo(n),null!==(i=this.diagram)&&(n?i.N():i.ii(e)),Tg(this,t,e),t},_.lc=function(t,e,n){if(!n&&e.layer!==this&&null!==e.layer)return e.layer.lc(t,e,n);var i=this.Ma;if(0>t||t>=i.length){if(0>(t=i.indexOf(e)))return-1}else if(i.K(t)!==e&&0>(t=i.indexOf(e)))return-1;return e.zo(n),i.mb(t),null!==(i=this.diagram)&&(n?i.N():i.lc(e)),e.Ah=null,t},Mt.Object.defineProperties(Rn.prototype,{parts:{get:function(){return this.Ma.iterator}},partsBackwards:{get:function(){return this.Ma.iteratorBackwards}},diagram:{get:function(){return this.H}},name:{get:function(){return this.va},set:function(t){var e=this.va;if(e!==t){var n=this.diagram;if(null!==n)for(""===e&&Y("Cannot rename default Layer to: "+t),n=n.layers;n.next();)n.value.name===t&&Y("Layer.name is already present in this diagram: "+t);for(this.va=t,this.g("name",e,t),t=this.Ma.iterator;t.next();)t.value.layerName=this.va}}},opacity:{get:function(){return this.tb},set:function(t){var e=this.tb;e!==t&&((0>t||1<t)&&le(t,"0 <= value <= 1",Rn,"opacity"),this.tb=t,this.g("opacity",e,t),null!==(t=this.diagram)&&t.N())}},isTemporary:{get:function(){return this.m},set:function(t){var e=this.m;e!==t&&((this.m=t)&&(this.isInDocumentBounds=!1),this.g("isTemporary",e,t))}},visible:{get:function(){return this.u},set:function(t){var e=this.u;if(e!==t){for(this.u=t,this.g("visible",e,t),e=this.Ma.iterator;e.next();)e.value.Ub(t);null!==(t=this.diagram)&&t.N()}}},pickable:{get:function(){return this.Nh},set:function(t){var e=this.Nh;e!==t&&(this.Nh=t,this.g("pickable",e,t))}},isInDocumentBounds:{get:function(){return this.j},set:function(t){this.j!==t&&(this.j=t,null!==this.diagram&&this.diagram.Va())}},allowCopy:{get:function(){return this.zi},set:function(t){var e=this.zi;e!==t&&(this.zi=t,this.g("allowCopy",e,t))}},allowDelete:{get:function(){return this.Ai},set:function(t){var e=this.Ai;e!==t&&(this.Ai=t,this.g("allowDelete",e,t))}},allowTextEdit:{get:function(){return this.Ji},set:function(t){var e=this.Ji;e!==t&&(this.Ji=t,this.g("allowTextEdit",e,t))}},allowGroup:{get:function(){return this.Bi},set:function(t){var e=this.Bi;e!==t&&(this.Bi=t,this.g("allowGroup",e,t))}},allowUngroup:{get:function(){return this.Ki},set:function(t){var e=this.Ki;e!==t&&(this.Ki=t,this.g("allowUngroup",e,t))}},allowLink:{get:function(){return this.Ci},set:function(t){var e=this.Ci;e!==t&&(this.Ci=t,this.g("allowLink",e,t))}},allowRelink:{get:function(){return this.Ei},set:function(t){var e=this.Ei;e!==t&&(this.Ei=t,this.g("allowRelink",e,t))}},allowMove:{get:function(){return this.Di},set:function(t){var e=this.Di;e!==t&&(this.Di=t,this.g("allowMove",e,t))}},allowReshape:{get:function(){return this.Fi},set:function(t){var e=this.Fi;e!==t&&(this.Fi=t,this.g("allowReshape",e,t))}},allowResize:{get:function(){return this.Gi},set:function(t){var e=this.Gi;e!==t&&(this.Gi=t,this.g("allowResize",e,t))}},allowRotate:{get:function(){return this.Hi},set:function(t){var e=this.Hi;e!==t&&(this.Hi=t,this.g("allowRotate",e,t))}},allowSelect:{get:function(){return this.Ii},set:function(t){var e=this.Ii;e!==t&&(this.Ii=t,this.g("allowSelect",e,t))}}}),Rn.prototype.findObjectsNear=Rn.prototype.hg,Rn.prototype.findObjectsIn=Rn.prototype.tf,Rn.prototype.findObjectsAt=Rn.prototype.di,Rn.prototype.findObjectAt=Rn.prototype.ec,Rn.className="Layer",V.prototype.clear=function(){this.animationManager.wc(),this.model.clear(),fu=null,da="",Nd(this,!1),this.Fn.clear(),af(),this.Fg.clear(),this.Qh=null,this.Va(),this.Za(),this.N()},V.prototype.reset=function(){this.clear(),this.wb=!0,kx(this),El(this),this.Mg=!0,Ox(this),this.layout=new Ot,this.Mg=!1,this.model=R0(),this.model.undoManager=new Pe,this.wb=this.Ym=!1,this.N()},V.prototype.setRTL=function(t){null===(t=void 0===t?this.div:t)&&(t=pt.document.body);var e=Zo("div");e.dir="rtl",e.style.cssText="font-size: 14px; width: 1px; height: 1px; position: absolute; top: -1000px; overflow: scroll;",e.textContent="A",t.appendChild(e);var n="reverse";0<e.scrollLeft?n="default":(e.scrollLeft=1,0===e.scrollLeft&&(n="negative")),t.removeChild(e),this.Ht=n},V.prototype.setScrollWidth=function(t){null===(t=void 0===t?this.div:t)&&(t=pt.document.body);var e=0;if($e){var n=Tv;e=dv,null===n&&((n=Tv=Zo("p")).style.width="100%",n.style.height="200px",n.style.boxSizing="content-box",(e=dv=Zo("div")).style.position="absolute",e.style.visibility="hidden",e.style.width="200px",e.style.height="150px",e.style.boxSizing="content-box",e.appendChild(n)),e.style.overflow="hidden",t.appendChild(e);var i=n.offsetWidth;e.style.overflow="scroll",i===(n=n.offsetWidth)&&(n=e.clientWidth),t.removeChild(e),0!=(e=i-n)||Do||(e=11)}this.Ab=e,this.kw=!0},V.prototype.ob=function(t){t.classType===V&&(this.autoScale=t)},V.prototype.toString=function(t){void 0===t&&(t=0);var e="";if(this.div&&this.div.id&&(e=this.div.id),e='Diagram "'+e+'"',0>=t)return e;for(var n=this.Ua.iterator;n.next();)e+="\n  "+n.value.toString(t-1);return e},V.prototype.addEventListener=function(t,e,n,i){t.addEventListener(e,n,{capture:i,passive:!1})},V.prototype.removeEventListener=function(t,e,n,i){t.removeEventListener(e,n,{capture:i})},V.prototype.computePixelRatio=function(){return null!==this.Rh?this.Rh:pt.devicePixelRatio||1},V.prototype.doMouseMove=function(){this.currentTool.doMouseMove()},V.prototype.doMouseDown=function(){this.currentTool.doMouseDown()},V.prototype.doMouseUp=function(){this.currentTool.doMouseUp()},V.prototype.doMouseWheel=function(){this.currentTool.doMouseWheel()},V.prototype.doKeyDown=function(){this.currentTool.doKeyDown()},V.prototype.doKeyUp=function(){this.currentTool.doKeyUp()},V.prototype.doFocus=function(){this.focus()},V.prototype.focus=function(){if(this.Ha)if(this.scrollsPageOnFocus)this.Ha.focus();else{var t=pt.scrollX||pt.pageXOffset,e=pt.scrollY||pt.pageYOffset;this.Ha.focus(),pt.scrollTo(t,e)}},V.prototype.wy=function(){this.H.P("GainedFocus")},V.prototype.vy=function(){this.H.P("LostFocus")},V.prototype.Nw=function(t){if(null!==this.Ha){var e=this.Qt,n=this.Nt;this.Nq=!0;var i=this.documentBounds,l=this.viewportBounds,u=this.mj,h=i.x-u.left,f=i.y-u.top,p=i.width+u.left+u.right,g=i.height+u.top+u.bottom,m=i.right+u.right;u=i.bottom+u.bottom;var v=l.x;i=l.y;var x=l.width,D=l.height,M=l.right,T=l.bottom;l=this.scale;var N=t.scrollLeft;if(this.$m)switch(this.Ht){case"negative":N=N+t.scrollWidth-t.clientWidth;break;case"reverse":N=t.scrollWidth-N-t.clientWidth}var I=N;x<p||D<g?(N=P.allocAt(this.position.x,this.position.y),this.allowHorizontalScroll&&this.Pt!==I&&(N.x=I/l+h,this.Pt=I),this.allowVerticalScroll&&this.Rt!==t.scrollTop&&(N.y=t.scrollTop/l+f,this.Rt=t.scrollTop),this.position=N,P.free(N),this.Ti=this.Nq=!1):(N=P.alloc(),t.$x&&this.allowHorizontalScroll&&(h<v&&(this.position=N.h(I+h,this.position.y)),m>M&&(this.position=N.h(-(e.scrollWidth-this.Ba)+I-this.Ba/l+m,this.position.y))),t.ay&&this.allowVerticalScroll&&(f<i&&(this.position=N.h(this.position.x,t.scrollTop+f)),u>T&&(this.position=N.h(this.position.x,-(e.scrollHeight-this.Aa)+t.scrollTop-this.Aa/l+u))),P.free(N),ch(this),this.Ti=this.Nq=!1,m=(i=this.documentBounds).right,M=(l=this.viewportBounds).right,u=i.bottom,T=l.bottom,h=i.x,v=l.x,f=i.y,i=l.y,x>=p&&h>=v&&m<=M&&(n.style.width="1px"),D>=g&&f>=i&&u<=T&&(n.style.height="1px"))}},V.prototype.computeBounds=function(t){return void 0===t&&(t=new B),jn(this),gv(this,t)},V.prototype.computePartsBounds=function(t,e){void 0===e&&(e=!1);var n=null;if(yn(t))for(var i=0;i<t.length;i++){var l=t[i];!e&&l instanceof H||(l.Za(),null===n?n=l.actualBounds.copy():n.Xc(l.actualBounds))}else for(t=t.iterator;t.next();)i=t.value,!e&&i instanceof H||(i.Za(),null===n?n=i.actualBounds.copy():n.Xc(i.actualBounds));return null===n?new B(NaN,NaN,0,0):n},V.prototype.zoomToFit=function(){var t=this.nj;this.nj=Is,this.scale=Zs(this,jc),t!==Is&&(yr(this,!1),hu(this,this.documentBounds,this.Ba/this.xa,this.Aa/this.xa,this.mk,!1)),this.nj=t},(_=V.prototype).kA=function(t,e){void 0===e&&(e=jc);var n=t.width,i=t.height;if(!(0===n||0===i||isNaN(n)&&isNaN(i))){var l=1;if(e===jc||e===bg)if(isNaN(n))l=this.viewportBounds.height*this.scale/i;else if(isNaN(i))l=this.viewportBounds.width*this.scale/n;else{l=this.Ba;var u=this.Aa;l=e===bg?u/i>l/n?(u-(this.We?this.Ab:0))/i:(l-(this.Of?this.Ab:0))/n:Math.min(u/i,l/n)}this.scale=l,this.position=new P(t.x,t.y)}},_.py=function(t,e){this.Za();var n=this.documentBounds,i=this.viewportBounds;this.position=new P(n.x+(t.x*n.width+t.offsetX)-(e.x*i.width-e.offsetX),n.y+(t.y*n.height+t.offsetY)-(e.y*i.height-e.offsetY))},_.gz=function(t){if(t instanceof ot){this.Hp=t;var e=P.alloc();this.Ip=this.Ro(t.ia(Oe,e)),P.free(e)}else this.Hp=null,this.Ip=dd},_.wl=function(t,e){if(void 0===e&&(e=!0),e){if((t=cu(this,t,function(n){return n.part},function(n){return n.canSelect()}))instanceof lt)return t}else if((t=cu(this,t,function(n){return n.part}))instanceof lt)return t;return null},_.ec=function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=null),jn(this);for(var i=this.Ua.iteratorBackwards;i.next();){var l=i.value;if(l.visible&&null!==(l=l.ec(t,e,n)))return l}return null},_.Uy=function(t,e,n){return void 0===e&&(e=!0),function Lx(t,e,n,i,l){for(void 0===n&&(n=null),void 0===i&&(i=null),l instanceof q||l instanceof Z||(l=new Z),jn(t),t=t.Ua.iteratorBackwards;t.next();){var u=t.value;u.visible&&!u.isTemporary&&u.di(e,n,i,l)}return l}(this,t,function(i){return i.part},e?function(i){return i instanceof lt&&i.canSelect()}:null,n)},_.di=function(t,e,n,i){void 0===e&&(e=null),void 0===n&&(n=null),i instanceof q||i instanceof Z||(i=new Z),jn(this);for(var l=this.Ua.iteratorBackwards;l.next();){var u=l.value;u.visible&&u.di(t,e,n,i)}return i},_.Ww=function(t,e,n,i){return void 0===e&&(e=!1),void 0===n&&(n=!0),function mv(t,e,n,i,l){var u=null;for(void 0===u&&(u=null),void 0===n&&(n=null),void 0===i&&(i=!1),l instanceof q||l instanceof Z||(l=new Z),jn(t),t=t.Ua.iteratorBackwards;t.next();){var h=t.value;h.visible&&!h.isTemporary&&h.tf(e,u,n,i,l)}return l}(this,t,function(l){return l instanceof lt&&(!n||l.canSelect())},e,i)},_.tf=function(t,e,n,i,l){void 0===e&&(e=null),void 0===n&&(n=null),void 0===i&&(i=!1),l instanceof q||l instanceof Z||(l=new Z),jn(this);for(var u=this.Ua.iteratorBackwards;u.next();){var h=u.value;h.visible&&h.tf(t,e,n,i,l)}return l},_.zu=function(t,e,n,i,l,u){var h=new Z;jn(this);for(var f=this.Ua.iteratorBackwards;f.next();){var p=f.value;p.visible&&p.zu(t,e,n,i,h,l,u)}return h},_.Vy=function(t,e,n,i,l){return void 0===n&&(n=!0),void 0===i&&(i=!0),function Lc(t,e,n,i,l,u){var h=null;for(void 0===h&&(h=null),void 0===i&&(i=null),void 0===l&&(l=!0),!1!==l&&!0!==l&&((l instanceof q||l instanceof Z)&&(u=l),l=!0),u instanceof q||u instanceof Z||(u=new Z),jn(t),t=t.Ua.iteratorBackwards;t.next();){var f=t.value;f.visible&&!f.isTemporary&&f.hg(e,n,h,i,l,u)}return u}(this,t,e,function(u){return u instanceof lt&&(!i||u.canSelect())},n,l)},_.hg=function(t,e,n,i,l,u){void 0===n&&(n=null),void 0===i&&(i=null),void 0===l&&(l=!0),!1!==l&&!0!==l&&((l instanceof q||l instanceof Z)&&(u=l),l=!0),u instanceof q||u instanceof Z||(u=new Z),jn(this);for(var h=this.Ua.iteratorBackwards;h.next();){var f=h.value;f.visible&&f.hg(t,e,n,i,l,u)}return u},V.prototype.acceptEvent=function(t){return bc(this,t,t instanceof MouseEvent)},V.prototype.yz=function(t){var e=this.H;if(!this.H.isEnabled)return!1;var n=bc(e,t,!1);switch(n.key=String.fromCharCode(t.which),n.down=!0,t.which){case 8:n.key="Backspace";break;case 33:n.key="PageUp";break;case 34:n.key="PageDown";break;case 35:n.key="End";break;case 36:n.key="Home";break;case 37:n.key="Left";break;case 38:n.key="Up";break;case 39:n.key="Right";break;case 40:n.key="Down";break;case 45:n.key="Insert";break;case 46:n.key="Del";break;case 48:n.key="0";break;case 187:case 61:case 107:n.key="Add";break;case 189:case 173:case 109:n.key="Subtract";break;case 27:n.key="Esc"}return e.doKeyDown(),uh(n,t)},V.prototype.zz=function(t){var e=this.H;if(!e.isEnabled)return!1;var n=bc(e,t,!1);switch(n.key=String.fromCharCode(t.which),n.up=!0,t.which){case 8:n.key="Backspace";break;case 33:n.key="PageUp";break;case 34:n.key="PageDown";break;case 35:n.key="End";break;case 36:n.key="Home";break;case 37:n.key="Left";break;case 38:n.key="Up";break;case 39:n.key="Right";break;case 40:n.key="Down";break;case 45:n.key="Insert";break;case 46:n.key="Del"}return e.doKeyUp(),uh(n,t)},V.prototype.Jy=function(t){var e=this.H;if(!e.isEnabled)return!1;var n=bc(e,t,!0);return null!==e.mouseEnter&&e.mouseEnter(n),uh(n,t)},V.prototype.Ky=function(t){var e=this.H;if(!e.isEnabled)return!1;var n=bc(e,t,!0);return null!==e.mouseLeave&&e.mouseLeave(n),uh(n,t)},V.prototype.getMouse=function(t){var e=this.Ha;if(null===e)return new P(0,0);var n=e.getBoundingClientRect();return e=t.clientX-this.Ba/n.width*n.left,t=t.clientY-this.Aa/n.height*n.top,null!==this.Bb?Un(new P(e,t),this.Bb):new P(e,t)},V.prototype.Va=function(){this.Si||(this.Si=!0,this.Mb(!0))},V.prototype.redraw=function(){this.wb||this.cd||(this.N(),is(this),this.nd())},(_=V.prototype).xz=function(){return this.cg},_.Ey=function(t){void 0===t&&(t=null);var e=this.animationManager,n=e.isEnabled;e.wc(),e.isEnabled=!1,fa(this),this.Qf=!1,this.Jt=new P(NaN,NaN),e.isEnabled=n,this.cd=!0;var i=this;null!==t&&Ja(function(){i.cd=!1,_l(e,"Model"),t(i)},1)},_.Mb=function(t){if(void 0===t&&(t=!1),!0!==this.cg&&!(this.wb||!1===t&&this.cd)){this.cg=!0;var e=this;pt.requestAnimationFrame(function(){e.cg&&e.nd()})}},_.nd=function(){(!this.Nm||this.cg)&&(this.Nm&&(this.Nm=!1),fa(this))},_.rv=function(t,e){for(t.reset();t.next();){var n=t.value;!n.Tc()||n instanceof yt||(n.mi()?(n.measure(1/0,1/0),n.arrange()):e.add(n))}for(t.reset();t.next();)(n=t.value)instanceof yt&&n.isVisible()&&bx(this,n);for(t.reset();t.next();)(n=t.value)instanceof H&&n.isVisible()&&(n.mi()?(n.measure(1/0,1/0),n.arrange()):e.add(n));for(t.reset();t.next();)(n=t.value)instanceof Pt&&n.isVisible()&&(n.mi()?(n.measure(1/0,1/0),n.arrange()):e.add(n))},_.Pd=function(t,e,n,i){if(this.Ui||this.animationManager.isAnimating)for(var l=0;l<e;l++)t[l].Pd(n,i)},_.tc=function(t,e){if(null!==this.La){null===this.Ha&&Y("No canvas specified");var n=this.animationManager;if(!n.zb&&(!n.isAnimating||n.isTicking)){var i=new Date;if(kd(this),"0"!==this.La.style.opacity){var l=t!==this.Zb,u=this.Ua.s,h=u.length,f=this;if(this.Pd(u,h,f,f.viewportBounds),l)t.Oc(!0),ch(this);else if(!this.bd&&void 0===e&&!n.isAnimating)return;h=this.pa;var p=this.xa,g=Math.round(h.x*p)/p,m=Math.round(h.y*p)/p;for((n=this.Bb).reset(),1!==p&&n.scale(p),0===h.x&&0===h.y||n.translate(-g,-m),t.setTransform(p=this.kc,0,0,p,0,0),t.clearRect(0,0,this.Ba,this.Aa),1!==this.tb&&(t.globalAlpha=this.tb),Ti(this,t),g=void 0!==e?function(v){if(v.visible&&0!==v.tb){var x=v.Ma.s,D=x.length;if(0!==D){var M=ca(v,t),T=v.Bn;T.length=0;for(var N=f.scale,I=B.alloc(),k=0;k<D;k++){var O=x[k];e.contains(O)||v.$h(t,O,f,T,N,I,!0)}B.free(I),t.globalAlpha=M}}}:function(v){v.tc(t,f)},h=u.length,m=0;m<h;m++)t.setTransform(p,0,0,p,0,0),t.transform(n.m11,n.m12,n.m21,n.m22,n.dx,n.dy),t.Pc(),g(u[m]);if(u=!1,this.vh?Vd(this.vh,this)&&(u=this.Qs()):u=!0,u&&(Dt.prototype.Ld=Dt.prototype.Fw),l?(this.Zb.Oc(!0),ch(this)):this.bd=this.Ui=!1,u=+new Date-+i,i=this.dw,(l=Qu&&Qu.Rw)||null===this.Rh){for(i[this.sq]=u,this.sq=(this.sq+1)%i.length,n=u=0;n<i.length;n++)u+=i[n];this.rq=u/i.length}if(1!==this.tb&&(t.globalAlpha=1),l)for(t.setTransform(1,0,0,1,0,0),l=0;l<i.length;l++)t.fillText(i[l].toString(),20,150+20*l)}}}},_.Ge=function(t){return this.Ig[t]},_.Fx=function(t,e){"minDrawingLength"===t&&(this.nq=e),this.Ig[t]=e,this.redraw()},_.Ax=function(){this.Ig=new Vr,this.Ig.drawShadows=!0,this.Ig.textGreeking=!0,this.Ig.viewportOptimizations=!(Do||AM),this.Ig.temporaryPixelRatio=!0,this.Ig.pictureRatioOptimization=!0,this.nq=this.Ig.minDrawingLength=1},_.yl=function(t){return this.Vm[t]},_.Zz=function(t,e){this.Vm[t]=e},_.zx=function(){this.Vm=new Vr,this.Vm.extraTouchArea=10,this.Vm.extraTouchThreshold=10,this.Vm.hasGestureZoom=!0},_.set=function(t){return Object.assign(this,t),this},_.ku=function(t){return this.Vl(t)},_.Vl=function(t){return hh(this,t),this},_.mu=function(){if(0===this.undoManager.transactionLevel&&0!==this.th.count){for(;0<this.th.count;){var t=this.th;for(this.th=new vt,t=t.iterator;t.next();){var e=t.key;e.Ao(t.value),e.mc(!1)}}this.N()}},_.N=function(t){if(void 0===t)this.bd=!0,this.Mb();else{var e=this.viewportBounds;t.v()&&e.Sc(t)&&(this.bd=!0,this.Mb())}this.P("InvalidateDraw")},V.prototype.invalidateViewport=function(t,e){if(!0!==this.bd){this.bd=!0;var n=!0===this.Ge("temporaryPixelRatio");if(!0===this.Ge("viewportOptimizations")&&this.scrollMode!==Uc&&this.mj.bi(0,0,0,0)&&e.width===t.width&&e.height===t.height){var i=this.scale,l=Math.max(t.x,e.x),u=Math.max(t.y,e.y);if(i=B.allocAt(l,u,Math.max(0,Math.min(t.x+t.width,e.x+e.width)-l)*i,Math.max(0,Math.min(t.y+t.height,e.y+e.height)-u)*i),!this.kr&&0<i.width&&0<i.height){if(!(this.cd||(this.cg=!1,null===this.La||(this.cd=!0,this.mu(),this.documentBounds.v()||(l=B.alloc(),Dv(this,this.computeBounds(l)),B.free(l)),l=this.Ha,null===l||l instanceof tl)))){var h=this.kc;u=this.Ba*h;var f=this.Aa*h,p=this.scale*h,g=Math.round(Math.round(e.x*p)-Math.round(t.x*p));e=Math.round(Math.round(e.y*p)-Math.round(t.y*p)),t=this.Ux,(p=this.Ov).width!==u&&(p.width=u),p.height!==f&&(p.height=f),t.clearRect(0,0,u,f),p=190*h;var m=70*h,v=Math.max(g,0),x=Math.max(e,0),D=Math.floor(u-v),M=Math.floor(f-x);t.drawImage(l.Sa,v,x,D,M,0,0,D,M),Vd(this.vh,this)&&t.clearRect(0,0,p,m),l=oe(),t=oe(),M=Math.abs(g),D=Math.abs(e);var T=0===v?0:u-M;v=P.allocAt(T,0),M=P.allocAt(M+T,f),t.push(new B(Math.min(v.x,M.x),Math.min(v.y,M.y),Math.abs(v.x-M.x),Math.abs(v.y-M.y)));var N=this.Bb;if(N.reset(),N.scale(h,h),1!==this.xa&&N.scale(this.xa),(0!==(h=this.pa).x||0!==h.y)&&isFinite(h.x)&&isFinite(h.y)&&N.translate(-h.x,-h.y),Un(v,N),Un(M,N),l.push(new B(Math.min(v.x,M.x),Math.min(v.y,M.y),Math.abs(v.x-M.x),Math.abs(v.y-M.y))),v.h(0,T=0===x?0:f-D),M.h(u,D+T),t.push(new B(Math.min(v.x,M.x),Math.min(v.y,M.y),Math.abs(v.x-M.x),Math.abs(v.y-M.y))),Un(v,N),Un(M,N),l.push(new B(Math.min(v.x,M.x),Math.min(v.y,M.y),Math.abs(v.x-M.x),Math.abs(v.y-M.y))),Vd(this.vh,this)&&(v.h(u=0<g?0:-g,f=0<e?0:-e),M.h(p+u,m+f),t.push(new B(Math.min(v.x,M.x),Math.min(v.y,M.y),Math.abs(v.x-M.x),Math.abs(v.y-M.y))),Un(v,N),Un(M,N),l.push(new B(Math.min(v.x,M.x),Math.min(v.y,M.y),Math.abs(v.x-M.x),Math.abs(v.y-M.y)))),P.free(v),P.free(M),Ad(this,!1,!0),null===this.La&&Y("No div specified"),null===this.Ha&&Y("No canvas specified"),!this.animationManager.zb&&(u=this.Zb,this.bd)){for(kd(this),f=this.kc,u.setTransform(1,0,0,1,0,0),u.clearRect(0,0,this.Ba*f,this.Aa*f),u.drawImage(this.Ov.Sa,0<g?0:Math.round(-g),0<e?0:Math.round(-e)),g=this.pa,h=this.xa,p=Math.round(g.x*h)/h,m=Math.round(g.y*h)/h,(e=this.Bb).reset(),1!==h&&e.scale(h),0===g.x&&0===g.y||e.translate(-p,-m),u.save(),u.beginPath(),g=t.length,h=0;h<g;h++)0!==(p=t[h]).width&&0!==p.height&&u.rect(Math.floor(p.x),Math.floor(p.y),Math.ceil(p.width),Math.ceil(p.height));for(u.clip(),u.setTransform(f,0,0,f,0,0),u.transform(e.m11,e.m12,e.m21,e.m22,e.dx,e.dy),u.Pc(),this.Pd(e=this.Ua.s,g=e.length,this,this.viewportBounds),Ti(this,u),u.globalAlpha=this.tb,f=0;f<g;f++)if(p=l,(h=e[f]).visible&&0!==h.tb){m=ca(h,u),(x=h.Bn).length=0,v=this.scale,D=B.alloc(),N=(M=h.Ma.s).length,T=p.length;for(var I=0;I<N;I++){var k=M[I],O=Sh(k,k.actualBounds);t:{for(var L=2/v,b=4/v,U=0;U<T;U++){var X=p[U];if(0!==X.width&&0!==X.height&&O.Hu(X.x-L,X.y-L,X.width+b,X.height+b)){O=!0;break t}}O=!1}O&&h.$h(u,k,this,x,v,D,!0)}B.free(D),u.globalAlpha=m}u.restore(),u.Oc(!0),this.vh&&Vd(this.vh,this)&&this.Qs(),this.bd=this.Ui=!1,this.Jo()}Nt(l),Nt(t),this.cd=!1}}else this.nd();B.free(i),n&&(Oc(this),this.nd(),Pd(this,!0))}else n?(Oc(this),this.nd(),Pd(this,!0)):this.nd()}},(_=V.prototype).add=function(t){var e=t.diagram;if(e!==this&&(null!==e&&Y("Cannot add part "+t.toString()+" to "+this.toString()+". It is already a part of "+e.toString()),null===(e=this.Ij(t.layerName))&&(e=this.Ij("")),null===e&&Y('Cannot add a Part when unable find a Layer named "'+t.layerName+'" and there is no default Layer'),t.layer!==e)){var n=e.ii(99999999,t,t.diagram===this);0<=n&&this.bb(nn,"parts",e,null,t,null,n),e.isTemporary||this.Va(),t.D(1),null!==(n=t.layerChanged)&&n(t,null,e)}},_.ii=function(t){this.partManager.ii(t);var e=this;Zn(t,function(n){xv(e,n)}),(t instanceof Pt||t instanceof yt&&null!==t.placeholder)&&t.w(),null!==t.data&&Zn(t,function(n){A0(e.partManager,n)}),!0!==Xn(t)&&!0!==Da(t)||this.te.add(t),c0(t,!0,this),ap(t)?(t.actualBounds.v()&&this.N(Sh(t,t.actualBounds)),this.Va()):t.isVisible()&&t.actualBounds.v()&&this.N(Sh(t,t.actualBounds)),this.Mb()},_.lc=function(t){t.zj(),this.partManager.lc(t);var e=this;null!==t.data&&Zn(t,function(n){Cf(e.partManager,n,e)}),this.te.remove(t),ap(t)?(t.actualBounds.v()&&this.N(Sh(t,t.actualBounds)),this.Va()):t.isVisible()&&t.actualBounds.v()&&this.N(Sh(t,t.actualBounds)),this.Mb()},_.remove=function(t){Ig(this,t,!0)},_.hs=function(t,e){if(void 0===e&&(e=!1),yn(t))for(var n=t.length,i=0;i<n;i++){var l=t[i];e&&!l.canDelete()||this.remove(l)}else for((n=new Z).addAll(t),t=n.iterator;t.next();)n=t.value,e&&!n.canDelete()||this.remove(n)},_.Ej=function(t,e,n){return void 0===n&&(n=!1),this.partManager.Ej(t,e,n)},V.prototype.moveParts=function(t,e,n,i){if(void 0===n&&(n=!1),void 0===i&&(i=Ng(this)),null!==this.toolManager){var l=new vt;if(null!==t)if(yn(t))for(var u=0;u<t.length;u++)rs(this,l,t[u],n,i);else for(t=t.iterator;t.next();)rs(this,l,t.value,n,i);else{for(t=this.parts;t.next();)rs(this,l,t.value,n,i);for(t=this.nodes;t.next();)rs(this,l,t.value,n,i);for(t=this.links;t.next();)rs(this,l,t.value,n,i)}fh(this,l,e,i,n)}},V.prototype.computeMove=function(t,e,n,i){if(void 0===i&&(i=new P),i.assign(e),null===t)return i;var l=e,u=n.isGridSnapEnabled;u&&(n.isGridSnapRealtime||this.lastInput.up)&&wv(this,t,e,l=P.alloc(),n),n=null!==t.dragComputation?t.dragComputation(t,e,l):l;var h=t.minLocation,f=h.x;isNaN(f)&&(f=u?Math.round(1e3*t.location.x)/1e3:t.location.x),h=h.y,isNaN(h)&&(h=u?Math.round(1e3*t.location.y)/1e3:t.location.y);var p=t.maxLocation,g=p.x;return isNaN(g)&&(g=u?Math.round(1e3*t.location.x)/1e3:t.location.x),p=p.y,isNaN(p)&&(p=u?Math.round(1e3*t.location.y)/1e3:t.location.y),i.h(Math.max(f,Math.min(n.x,g)),Math.max(h,Math.min(n.y,p))),l!==e&&P.free(l),i},(_=V.prototype).Fd=function(t,e,n){if(void 0===n)return new pa(wl);var i=t.isGridSnapEnabled;return t.groupsSnapMembers||null===e.containingGroup||(i=!1),new pa(i?new P(Math.round(1e3*n.x)/1e3,Math.round(1e3*n.y)/1e3):n.copy())},_.pl=function(t){kg(this,t,null),t.Le(this);var e=this.Ua,n=e.count-1;if(!t.isTemporary)for(;0<=n&&e.K(n).isTemporary;)n--;return e.Cb(n+1,t),null!==this.ac&&this.bb(nn,"layers",this,null,t,null,n+1),this.N(),this.Va(),this},_.Aw=function(t,e){kg(this,t,e),t.Le(this);var n=this.Ua,i=n.indexOf(t);0<=i&&(n.remove(t),null!==this.ac&&this.bb(xe,"layers",this,t,null,i,null));var u,l=n.count;for(u=0;u<l;u++)if(n.K(u)===e){n.Cb(u,t);break}return null!==this.ac&&this.bb(nn,"layers",this,null,t,null,u),this.N(),0>i&&this.Va(),this},_.jy=function(t,e){kg(this,t,e),t.Le(this);var n=this.Ua,i=n.indexOf(t);0<=i&&(n.remove(t),null!==this.ac&&this.bb(xe,"layers",this,t,null,i,null));var u,l=n.count;for(u=0;u<l;u++)if(n.K(u)===e){n.Cb(u+1,t);break}return null!==this.ac&&this.bb(nn,"layers",this,null,t,null,u+1),this.N(),0>i&&this.Va(),this},_.Rz=function(t){if(t.diagram!==this&&Y("Cannot remove a Layer from another Diagram: "+t+" of "+t.diagram),""!==t.name){var e=this.Ua,n=e.indexOf(t);if(e.remove(t)){for(e=t.Ma.copy().iterator;e.next();){var i=e.value,l=i.layerName;i.layerName=l!==t.name?l:""}null!==this.ac&&this.bb(xe,"layers",this,t,null,n,null),this.N(),this.Va()}}},_.Ij=function(t){for(var e=this.layers;e.next();){var n=e.value;if(n.name===t)return n}return null},_.Cw=function(t){return null===this.bf&&(this.bf=new q),this.bf.add(t),this.model.Ug(t),this},_.Tz=function(t){null!==this.bf&&(this.bf.remove(t),0===this.bf.count&&(this.bf=null)),this.model.ak(t)},_.Ug=function(t){return null===this.qg&&(this.qg=new q),this.qg.add(t),this},_.ak=function(t){null!==this.qg&&(this.qg.remove(t),0===this.qg.count&&(this.qg=null))},_.Cr=function(t){if(this.skipsUndoManager||this.model.skipsUndoManager||this.model.undoManager.Fu(t),t.change!==es&&(this.isModified=!0),null!==this.qg)for(var e=this.qg,n=e.length,i=0;i<n;i++)e.K(i)(t)},_.bb=function(t,e,n,i,l,u,h){void 0===u&&(u=null),void 0===h&&(h=null);var f=new Me;f.diagram=this,f.change=t,f.propertyName=e,f.object=n,f.oldValue=i,f.oldParam=u,f.newValue=l,f.newParam=h,this.Cr(f)},_.g=function(t,e,n,i,l){this.bb(ee,t,this,e,n,i,l)},V.prototype.changeState=function(t,e){if(null!==t&&t.diagram===this){var n=this.skipsModelSourceBindings;try{this.skipsModelSourceBindings=!0;var i=t.change;if(i===ee){var l=t.object;if(ne(l,t.propertyName,t.I(e)),l instanceof ot){var u=l.part;null!==u&&u.Rb()}this.isModified=!0}else if(i===nn){var h=t.object,f=t.newParam,p=t.newValue;if(h instanceof $)if("number"==typeof f&&p instanceof ot){e?h.lc(f):h.Cb(f,p);var g=h.part;null!==g&&g.Rb()}else"number"==typeof f&&p instanceof on&&(p.isRow?Yx(h,f,e?void 0:p):Kx(h,f,e?void 0:p));else if(h instanceof Rn){var m=!0===t.oldParam;"number"==typeof f&&p instanceof lt&&(e?(p.isSelected=!1,p.isHighlighted=!1,p.Rb(),h.lc(m?f:-1,p,m)):h.ii(f,p,m))}else h instanceof V?"number"==typeof f&&p instanceof Rn&&(e?this.Ua.mb(f):(p.Le(this),this.Ua.Cb(f,p))):Y("unknown ChangedEvent.Insert object: "+t.toString());this.isModified=!0}else if(i===xe){var v=t.object,x=t.oldParam,D=t.oldValue;if(v instanceof $)"number"==typeof x&&D instanceof ot?e?v.Cb(x,D):v.lc(x):"number"==typeof x&&D instanceof on&&(D.isRow?Yx(v,x,e?D:void 0):Kx(v,x,e?D:void 0));else if(v instanceof Rn){var M=!0===t.newParam;"number"==typeof x&&D instanceof lt&&(e?0>v.Ma.indexOf(D)&&v.ii(x,D,M):(D.isSelected=!1,D.isHighlighted=!1,D.Rb(),v.lc(M?x:-1,D,M)))}else v instanceof V?"number"==typeof x&&D instanceof Rn&&(e?(D.Le(this),this.Ua.Cb(x,D)):this.Ua.mb(x)):Y("unknown ChangedEvent.Remove object: "+t.toString());this.isModified=!0}else i!==es&&Y("unknown ChangedEvent: "+t.toString())}finally{this.skipsModelSourceBindings=n}}},V.prototype.Da=function(t){return this.undoManager.Da(t)},V.prototype.eb=function(t){return this.undoManager.eb(t)},V.prototype.Bf=function(){return this.undoManager.Bf()},V.prototype.commit=function(t,e){void 0===e&&(e="");var n=this.skipsUndoManager;null===e&&(this.skipsUndoManager=!0,e=""),this.undoManager.Da(e);var i=!1;try{t(this),i=!0}finally{i?this.undoManager.eb(e):this.undoManager.Bf(),this.skipsUndoManager=n}},V.prototype.updateAllTargetBindings=function(t){this.partManager.updateAllTargetBindings(t)},V.prototype.Uo=function(){this.partManager.Uo()},V.prototype.onViewportBoundsChanged=function(t,e,n,i){if(!t.C(e)){void 0===i&&(i=!1),i||is(this),ch(this);var l=this.layout;null===l||!l.isViewportSized||this.autoScale!==Er||i||t.width===e.width&&t.height===e.height||l.D(),l=this.currentTool,!0===this.Kk&&l instanceof Ce&&(this.lastInput.documentPoint=this.rs(this.lastInput.viewPoint),mg(l,this)),this.wb||this.invalidateViewport(t,e),Es(this),this.kd.scale=n,this.kd.position.x=t.x,this.kd.position.y=t.y,this.kd.bounds.assign(t),this.kd.Hw.width=Math.round(t.width*n),this.kd.Hw.height=Math.round(t.height*n),this.kd.sx.width=this.Ba,this.kd.sx.height=this.Aa,this.kd.lx=i,this.P("ViewportBoundsChanged",this.kd,t),this.isVirtualized&&this.links.each(function(u){u.isAvoiding&&u.actualBounds.Sc(e)&&u.ab()})}},V.prototype.clearSelection=function(t){void 0===t&&(t=!1);var e=this.selection;if(0!==e.count){t||this.P("ChangingSelection",e);for(var n=e.Ea(),i=n.length,l=0;l<i;l++)n[l].isSelected=!1;e.ja(),e.clear(),e.freeze(),t||this.P("ChangedSelection",e)}},V.prototype.select=function(t){null!==t&&t.diagram===this&&(!t.isSelected||1<this.selection.count)&&(this.P("ChangingSelection",this.selection),this.clearSelection(!0),t.isSelected=!0,this.P("ChangedSelection",this.selection))},V.prototype.Yz=function(t){if(this.P("ChangingSelection",this.selection),this.clearSelection(!0),yn(t))for(var e=t.length,n=0;n<e;n++){var i=t[n];i instanceof lt||Y("Diagram.selectCollection given something that is not a Part: "+i),i.isSelected=!0}else for(t=t.iterator;t.next();)(e=t.value)instanceof lt||Y("Diagram.selectCollection given something that is not a Part: "+e),e.isSelected=!0;this.P("ChangedSelection",this.selection)},V.prototype.clearHighlighteds=function(){var t=this.highlighteds;if(0<t.count){for(var e=t.Ea(),n=e.length,i=0;i<n;i++)e[i].isHighlighted=!1;t.ja(),t.clear(),t.freeze()}},(_=V.prototype).qz=function(t){null!==t&&t.diagram===this&&(!t.isHighlighted||1<this.highlighteds.count)&&(this.clearHighlighteds(),t.isHighlighted=!0)},_.rz=function(t){t=(new Z).addAll(t);for(var e=this.highlighteds.copy().Ko(t).iterator;e.next();)e.value.isHighlighted=!1;for(t=t.iterator;t.next();)(e=t.value)instanceof lt||Y("Diagram.highlightCollection given something that is not a Part: "+e),e.isHighlighted=!0},_.scroll=function(t,e,n){void 0===n&&(n=1);var i="up"===e||"down"===e,l=0;if("pixel"===t)l=n;else if("line"===t)l=n*(i?this.scrollVerticalLineChange:this.scrollHorizontalLineChange);else if("page"===t)t=i?this.viewportBounds.height:this.viewportBounds.width,0!=(t*=this.scale)&&(l=n*Math.max(t-(i?this.scrollVerticalLineChange:this.scrollHorizontalLineChange),0));else{if("document"===t)return l=this.documentBounds,n=this.viewportBounds,i=P.alloc(),"up"===e?this.position=i.h(n.x,l.y):"left"===e?this.position=i.h(l.x,n.y):"down"===e?this.position=i.h(n.x,l.bottom-n.height):"right"===e&&(this.position=i.h(l.right-n.width,n.y)),void P.free(i);Y("scrolling unit must be 'pixel', 'line', 'page', or 'document', not: "+t)}l/=this.scale,n=this.position.copy(),"up"===e?n.y=this.position.y-l:"down"===e?n.y=this.position.y+l:"left"===e?n.x=this.position.x-l:"right"===e?n.x=this.position.x+l:Y("scrolling direction must be 'up', 'down', 'left', or 'right', not: "+e),this.position=n},_.bv=function(t){var e=this.viewportBounds;e.Ee(t)||((t=t.center).x-=e.width/2,t.y-=e.height/2,this.position=t)},_.Dr=function(t){var e=this.viewportBounds;(t=t.center).x-=e.width/2,t.y-=e.height/2,this.position=t},_.Ro=function(t){var e=this.Bb;e.reset(),1!==this.xa&&e.scale(this.xa);var n=this.pa;return(0!==n.x||0!==n.y)&&isFinite(n.x)&&isFinite(n.y)&&e.translate(-n.x,-n.y),t.copy().transform(this.Bb)},_.gA=function(t){var e=this.Bb,n=t.x,i=t.y,l=n+t.width,u=i+t.height,h=e.m11,f=e.m12,p=e.m21,g=e.m22,m=e.dx,v=e.dy,x=n*h+i*p+m;e=n*f+i*g+v;var D=l*h+i*p+m;return t=l*f+i*g+v,i=n*h+u*p+m,n=n*f+u*g+v,h=l*h+u*p+m,l=l*f+u*g+v,u=Math.min(x,D),x=Math.max(x,D),D=Math.min(e,t),e=Math.max(e,t),u=Math.min(u,i),x=Math.max(x,i),D=Math.min(D,n),e=Math.max(e,n),u=Math.min(u,h),x=Math.max(x,h),new B(u,D=Math.min(D,l),x-u,(e=Math.max(e,l))-D)},_.rs=function(t){var e=this.Bb;e.reset(),1!==this.xa&&e.scale(this.xa);var n=this.pa;return(0!==n.x||0!==n.y)&&isFinite(n.x)&&isFinite(n.y)&&e.translate(-n.x,-n.y),Un(t.copy(),this.Bb)},V.prototype.doModelChanged=function(t){var e=this;if(t.model===this.model){var n=t.change,i=t.propertyName;if(n===es&&"S"===i[0])if("StartingFirstTransaction"===i){var l=this;(t=this.toolManager).mouseDownTools.each(function(p){p.diagram=l}),t.mouseMoveTools.each(function(p){p.diagram=l}),t.mouseUpTools.each(function(p){p.diagram=l}),this.cd||this.Qf||(this.xk=!0,this.Nm&&(this.cg=!0))}else"StartingUndo"===i||"StartingRedo"===i?((t=this.animationManager).defaultAnimation.isAnimating&&!this.skipsUndoManager&&t.wc(),this.P("ChangingSelection",this.selection)):"StartedTransaction"===i&&(t=this.animationManager).defaultAnimation.isAnimating&&!this.skipsUndoManager&&t.wc();else if(this.$){this.$=!1;try{if(""===t.modelChange&&n===es){("FinishedUndo"===i||"FinishedRedo"===i)&&(this.P("ChangedSelection",this.selection),jn(this));var u=this.animationManager;"RolledBackTransaction"===i&&u.wc(),this.xk=!0,this.nd(),0!==this.undoManager.transactionLevel&&1!==this.undoManager.transactionLevel||Tl(u),"CommittedTransaction"===i&&this.undoManager.isJustDiscarded&&(this.se=Math.min(this.se,this.undoManager.historyIndex-1)),"CommittedTransaction"!==i&&"RolledBackTransaction"!==i||!this.undoManager.isPendingUnmodified||setTimeout(function(){e.isModified=!1},1);var h=t.isTransactionFinished;if(h&&(dh(this),this.Zr.clear(),function Dd(t){for(t=t.yi.iterator;t.next();)t.value.Mk=!1}(this.animationManager)),!this.wt&&h&&this.lastInput.targetDiagram){this.wt=!0;var f=this;Ja(function(){f.currentTool.standardMouseOver(),f.wt=!1},10)}}}finally{this.$=!0}}}},V.prototype.Od=function(){this.partManager.Od()},V.prototype.vj=function(t,e){this.Rd.vj(t,e)},V.prototype.xj=function(t,e){this.Rd.xj(t,e)},V.prototype.findPartForKey=function(t){return this.partManager.findPartForKey(t)},V.prototype.Lb=function(t){return this.partManager.Lb(t)},V.prototype.findLinkForKey=function(t){return this.partManager.findLinkForKey(t)},(_=V.prototype).Ec=function(t){return this.partManager.Ec(t)},_.ci=function(t){return this.partManager.ci(t)},_.Dc=function(t){return this.partManager.Dc(t)},_.Jr=function(t){for(var e=[],n=0;n<arguments.length;++n)e[n]=arguments[n];return this.partManager.Jr.apply(this.partManager,e instanceof Array?e:vl(ex(e)))},_.Ir=function(t){for(var e=[],n=0;n<arguments.length;++n)e[n]=arguments[n];return this.partManager.Ir.apply(this.partManager,e instanceof Array?e:vl(ex(e)))},_.Za=function(){if(this.Si){var t=B.alloc();Dv(this,this.computeBounds(t)),B.free(t)}},_.$y=function(){for(var t=new Z,e=this.nodes;e.next();){var n=e.value;n.isTopLevel&&t.add(n)}for(e=this.links;e.next();)(n=e.value).isTopLevel&&t.add(n);return t.iterator},_.Zy=function(){return this.Uh.iterator},_.Bz=function(t){jn(this),t&&Og(this,!0),this.cd?Od(this,!1):(this.xk=!0,fa(this))},_.fz=function(){for(var t=new q,e=this.nodes;e.next();){var n=e.value;n.isTopLevel&&null===n.$g()&&t.add(n)}return t.iterator},_.wj=function(t,e){return null!==(t=bd(this,t))&&t.add(e),this},_.Il=function(t,e){null!==(t=bd(this,t))&&t.remove(e)},_.P=function(t,e,n){var i=bd(this,t),l=new Mc;if(l.diagram=this,null!==(t=Fc(this,t))&&(l.name=t),void 0!==e&&(l.subject=e),void 0!==n&&(l.parameter=n),1===(e=i.length))i.K(0)(l);else if(0!==e)for(i=i.Ea(),n=0;n<e;n++)(0,i[n])(l)},_.Pj=function(t,e){return Sv(this,!1,null,e||null).Pj(t.x,t.y,t.width,t.height)},V.prototype.computeOccupiedArea=function(t){return this.isVirtualized?this.viewportBounds.copy():this.Si?gv(this,t):t.assign(this.documentBounds)},V.prototype.Fr=function(t){this.Zo.assign(t),this.computeAutoScrollPosition(this.Zo).$a(this.position)?this.lg():Rc(this)},V.prototype.lg=function(){-1!==this.ik&&(pt.clearTimeout(this.ik),this.ik=-1)},V.prototype.computeAutoScrollPosition=function(t){var e=this.position,n=this.$o;if(0>=n.top&&0>=n.left&&0>=n.right&&0>=n.bottom)return e;var i=this.viewportBounds,l=this.scale;i=B.allocAt(0,0,i.width*l,i.height*l);var u=P.allocAt(0,0);if(t.x>=i.x&&t.x<i.x+n.left&&this.allowHorizontalScroll){var h=Math.max(this.scrollHorizontalLineChange,1);u.x-=h|=0,t.x<i.x+n.left/2&&(u.x-=h),t.x<i.x+n.left/4&&(u.x-=4*h)}else t.x<=i.x+i.width&&t.x>i.x+i.width-n.right&&this.allowHorizontalScroll&&(h=Math.max(this.scrollHorizontalLineChange,1),u.x+=h|=0,t.x>i.x+i.width-n.right/2&&(u.x+=h),t.x>i.x+i.width-n.right/4&&(u.x+=4*h));return t.y>=i.y&&t.y<i.y+n.top&&this.allowVerticalScroll?(h=Math.max(this.scrollVerticalLineChange,1),u.y-=h|=0,t.y<i.y+n.top/2&&(u.y-=h),t.y<i.y+n.top/4&&(u.y-=4*h)):t.y<=i.y+i.height&&t.y>i.y+i.height-n.bottom&&this.allowVerticalScroll&&(h=Math.max(this.scrollVerticalLineChange,1),u.y+=h|=0,t.y>i.y+i.height-n.bottom/2&&(u.y+=h),t.y>i.y+i.height-n.bottom/4&&(u.y+=4*h)),u.$a(wl)||(e=new P(e.x+u.x/l,e.y+u.y/l)),B.free(i),P.free(u),e},(_=V.prototype).bs=function(){return null},_.Nu=function(){return null},_.ny=function(t,e){this.Yx.add(t,e)},_.lu=function(t){(this.tw=t)||this.nodes.each(function(e){e instanceof yt&&(e.Dp=null)})},_.Dz=function(t){return $e?(void 0===t&&(t={}),t.returnType="Image",this.ox(t)):null},_.ox=function(t){return void 0===t&&(t={}),ph(this,this.Ez,t)},_.Ez=function(t,e,n){var i=jx(n,t,"canvas",null);if(null===i)return null;var l=null;if(null!==(n=i.Z.canvas))switch(l=t.returnType,l=void 0===l?"string":l.toLowerCase(),l){case Hc+"data":l=i.getImageData(0,0,n.width,n.height);break;case Hc:(i=(t.document||document).createElement("img")).src=n.toDataURL(t.type,t.details),l=i;break;case"blob":return"function"!=typeof e&&Y('Error: Diagram.makeImageData called with "returnType: toBlob", but no required "callback" function property defined.'),"function"==typeof n.toBlob?(n.toBlob(e,t.type,t.details),"toBlob"):"function"==typeof n.msToBlob?(e(n.msToBlob()),"msToBlob"):(e(null),null);default:l=n.toDataURL(t.type,t.details)}return"function"==typeof e?(e(l),null):l},Mt.Object.defineProperties(V.prototype,{div:{get:function(){return this.La},set:function(t){if(this.La!==t){var e=this.La;null!==e?(e.H=void 0,e.goDiagram=void 0,e.go=void 0,e.innerHTML="",null!==this.Ha&&(this.removeEventListener(e=this.Ha.Sa,"pointermove",this.Xj,!1),this.removeEventListener(e,"pointerdown",this.Wj,!1),this.removeEventListener(e,"pointerup",this.Zj,!1),this.removeEventListener(e,"pointerout",this.Yj,!1),this.Ha.Pw()),this.cl&&(this.cl.disconnect(),this.cl=null),null!==(e=this.toolManager)&&(e.mouseDownTools.each(function(n){n.cancelWaitAfter()}),e.mouseMoveTools.each(function(n){n.cancelWaitAfter()}),e.mouseUpTools.each(function(n){n.cancelWaitAfter()})),e.cancelWaitAfter(),this.currentTool.doCancel(),this.Ha=null,this.removeEventListener(pt,"resize",this.sv,!1),this.removeEventListener(pt,"wheel",this.Sj,!0),ah===this&&(ah=null)):this.Qf=!1,this.La=null,null!==t&&((e=t.H)&&(e.div=null),kv(this,t),this.redraw())}}},Ew:{get:function(){return this.rq}},ji:{get:function(){return this.Qf}},draggedLink:{get:function(){return this.Ps},set:function(t){this.Ps!==t&&(this.Ps=t,null!==t&&(this.At=t.fromPort,this.Bt=t.toPort))}},tx:{get:function(){return this.At},set:function(t){this.At=t}},ux:{get:function(){return this.Bt},set:function(t){this.Bt=t}},animationManager:{get:function(){return this.Rd}},undoManager:{get:function(){return this.ac.undoManager}},skipsUndoManager:{get:function(){return this.Mg},set:function(t){this.Mg=t,this.ac.skipsUndoManager=t}},delaysLayout:{get:function(){return this.Ns},set:function(t){this.Ns=t}},opacity:{get:function(){return this.tb},set:function(t){var e=this.tb;e!==t&&((0>t||1<t)&&le(t,"0 <= value <= 1",V,"opacity"),this.tb=t,this.g("opacity",e,t),this.N())}},validCycle:{get:function(){return this.bu},set:function(t){var e=this.bu;e!==t&&(this.bu=t,this.g("validCycle",e,t))}},layers:{get:function(){return this.Ua.iterator}},isModelReadOnly:{get:function(){var t=this.ac;return null!==t&&t.isReadOnly},set:function(t){var e=this.ac;null!==e&&(e.isReadOnly=t)}},isReadOnly:{get:function(){return this.xg},set:function(t){var e=this.xg;e!==t&&(this.xg=t,this.g("isReadOnly",e,t))}},isEnabled:{get:function(){return this.Ad},set:function(t){var e=this.Ad;e!==t&&(this.Ad=t,this.g("isEnabled",e,t))}},allowClipboard:{get:function(){return this.ws},set:function(t){var e=this.ws;e!==t&&(this.ws=t,this.g("allowClipboard",e,t))}},allowCopy:{get:function(){return this.zi},set:function(t){var e=this.zi;e!==t&&(this.zi=t,this.g("allowCopy",e,t))}},allowDelete:{get:function(){return this.Ai},set:function(t){var e=this.Ai;e!==t&&(this.Ai=t,this.g("allowDelete",e,t))}},allowDragOut:{get:function(){return this.xs},set:function(t){var e=this.xs;e!==t&&(this.xs=t,this.g("allowDragOut",e,t))}},allowDrop:{get:function(){return this.ys},set:function(t){var e=this.ys;e!==t&&(this.ys=t,this.g("allowDrop",e,t))}},allowTextEdit:{get:function(){return this.Ji},set:function(t){var e=this.Ji;e!==t&&(this.Ji=t,this.g("allowTextEdit",e,t))}},allowGroup:{get:function(){return this.Bi},set:function(t){var e=this.Bi;e!==t&&(this.Bi=t,this.g("allowGroup",e,t))}},allowUngroup:{get:function(){return this.Ki},set:function(t){var e=this.Ki;e!==t&&(this.Ki=t,this.g("allowUngroup",e,t))}},allowInsert:{get:function(){return this.As},set:function(t){var e=this.As;e!==t&&(this.As=t,this.g("allowInsert",e,t))}},allowLink:{get:function(){return this.Ci},set:function(t){var e=this.Ci;e!==t&&(this.Ci=t,this.g("allowLink",e,t))}},allowRelink:{get:function(){return this.Ei},set:function(t){var e=this.Ei;e!==t&&(this.Ei=t,this.g("allowRelink",e,t))}},allowMove:{get:function(){return this.Di},set:function(t){var e=this.Di;e!==t&&(this.Di=t,this.g("allowMove",e,t))}},allowReshape:{get:function(){return this.Fi},set:function(t){var e=this.Fi;e!==t&&(this.Fi=t,this.g("allowReshape",e,t))}},allowResize:{get:function(){return this.Gi},set:function(t){var e=this.Gi;e!==t&&(this.Gi=t,this.g("allowResize",e,t))}},allowRotate:{get:function(){return this.Hi},set:function(t){var e=this.Hi;e!==t&&(this.Hi=t,this.g("allowRotate",e,t))}},allowSelect:{get:function(){return this.Ii},set:function(t){var e=this.Ii;e!==t&&(this.Ii=t,this.g("allowSelect",e,t))}},allowUndo:{get:function(){return this.Bs},set:function(t){var e=this.Bs;e!==t&&(this.Bs=t,this.g("allowUndo",e,t))}},allowZoom:{get:function(){return this.Ds},set:function(t){var e=this.Ds;e!==t&&(this.Ds=t,this.g("allowZoom",e,t))}},hasVerticalScrollbar:{get:function(){return this.Um},set:function(t){var e=this.Um;e!==t&&(this.Um=t,is(this),this.N(),this.g("hasVerticalScrollbar",e,t),yr(this,!1))}},hasHorizontalScrollbar:{get:function(){return this.Tm},set:function(t){var e=this.Tm;e!==t&&(this.Tm=t,is(this),this.N(),this.g("hasHorizontalScrollbar",e,t),yr(this,!1))}},allowHorizontalScroll:{get:function(){return this.zs},set:function(t){var e=this.zs;e!==t&&(this.zs=t,this.g("allowHorizontalScroll",e,t),yr(this,!1))}},allowVerticalScroll:{get:function(){return this.Cs},set:function(t){var e=this.Cs;e!==t&&(this.Cs=t,this.g("allowVerticalScroll",e,t),yr(this,!1))}},scrollHorizontalLineChange:{get:function(){return this.Ot},set:function(t){var e=this.Ot;e!==t&&(0>t&&le(t,">= 0",V,"scrollHorizontalLineChange"),this.Ot=t,this.g("scrollHorizontalLineChange",e,t))}},scrollVerticalLineChange:{get:function(){return this.St},set:function(t){var e=this.St;e!==t&&(0>t&&le(t,">= 0",V,"scrollVerticalLineChange"),this.St=t,this.g("scrollVerticalLineChange",e,t))}},lastInput:{get:function(){return this.Yi},set:function(t){this.Yi=t}},previousInput:{get:function(){return this.Hg},set:function(t){this.Hg=t}},firstInput:{get:function(){return this.Fp},set:function(t){this.Fp=t}},currentCursor:{get:function(){return this.Ks},set:function(t){if(""===t&&(t=this.rp),this.Ks!==t){var e=this.Ha,n=this.La;if(null!==e&&null!==n){this.Ks=t;var i=e.style.cursor;e.style.cursor=t,n.style.cursor=t,e.style.cursor===i&&(e.style.cursor="-webkit-"+t,n.style.cursor="-webkit-"+t,e.style.cursor===i&&(e.style.cursor="-moz-"+t,n.style.cursor="-moz-"+t,e.style.cursor===i&&(e.style.cursor=t,n.style.cursor=t)))}}}},defaultCursor:{get:function(){return this.rp},set:function(t){""===t&&(t="auto");var e=this.rp;e!==t&&(this.rp=t,this.g("defaultCursor",e,t))}},click:{get:function(){return this.oh},set:function(t){var e=this.oh;e!==t&&(this.oh=t,this.g("click",e,t))}},doubleClick:{get:function(){return this.uh},set:function(t){var e=this.uh;e!==t&&(this.uh=t,this.g("doubleClick",e,t))}},contextClick:{get:function(){return this.qh},set:function(t){var e=this.qh;e!==t&&(this.qh=t,this.g("contextClick",e,t))}},mouseOver:{get:function(){return this.Jh},set:function(t){var e=this.Jh;e!==t&&(this.Jh=t,this.g("mouseOver",e,t))}},mouseHover:{get:function(){return this.Hh},set:function(t){var e=this.Hh;e!==t&&(this.Hh=t,this.g("mouseHover",e,t))}},mouseHold:{get:function(){return this.Gh},set:function(t){var e=this.Gh;e!==t&&(this.Gh=t,this.g("mouseHold",e,t))}},mouseDragOver:{get:function(){return this.vt},set:function(t){var e=this.vt;e!==t&&(this.vt=t,this.g("mouseDragOver",e,t))}},mouseDrop:{get:function(){return this.Eh},set:function(t){var e=this.Eh;e!==t&&(this.Eh=t,this.g("mouseDrop",e,t))}},handlesDragDropForTopLevelParts:{get:function(){return this.$s},set:function(t){var e=this.$s;e!==t&&(this.$s=t,this.g("handlesDragDropForTopLevelParts",e,t))}},mouseEnter:{get:function(){return this.Fh},set:function(t){var e=this.Fh;e!==t&&(this.Fh=t,this.g("mouseEnter",e,t))}},mouseLeave:{get:function(){return this.Ih},set:function(t){var e=this.Ih;e!==t&&(this.Ih=t,this.g("mouseLeave",e,t))}},toolTip:{get:function(){return this.Th},set:function(t){var e=this.Th;e!==t&&(this.Th=t,this.g("toolTip",e,t))}},contextMenu:{get:function(){return this.rh},set:function(t){var e=this.rh;e!==t&&(this.rh=t,this.g("contextMenu",e,t))}},commandHandler:{get:function(){return this.hb},set:function(t){this.hb!==t&&(this.hb=t,t.Le(this))}},toolManager:{get:function(){return this.le},set:function(t){this.le!==t&&(this.le=t,t.diagram=this)}},defaultTool:{get:function(){return this.nb},set:function(t){var e=this.nb;e!==t&&(this.nb=t,t.diagram=this,this.currentTool===e&&(this.currentTool=t))}},currentTool:{get:function(){return this.cb},set:function(t){var e=this.cb;e&&(e.isActive&&e.doDeactivate(),e.cancelWaitAfter(),e.doStop()),null===t&&(t=this.defaultTool),null!==t&&(this.cb=t,t.diagram=this,t.doStart())}},selection:{get:function(){return this.lw}},maxSelectionCount:{get:function(){return this.qt},set:function(t){var e=this.qt;if(e!==t)if(0<=t&&!isNaN(t)){if(this.qt=t,this.g("maxSelectionCount",e,t),!this.undoManager.isUndoingRedoing&&0<(t=this.selection.count-t)){this.P("ChangingSelection",this.selection),e=this.selection.Ea();for(var n=0;n<t;n++)e[n].isSelected=!1;this.P("ChangedSelection",this.selection)}}else le(t,">= 0",V,"maxSelectionCount")}},nodeSelectionAdornmentTemplate:{get:function(){return this.xt},set:function(t){var e=this.xt;e!==t&&(this.xt=t,this.g("nodeSelectionAdornmentTemplate",e,t))}},groupSelectionAdornmentTemplate:{get:function(){return this.Zs},set:function(t){var e=this.Zs;e!==t&&(this.Zs=t,this.g("groupSelectionAdornmentTemplate",e,t))}},linkSelectionAdornmentTemplate:{get:function(){return this.nt},set:function(t){var e=this.nt;e!==t&&(this.nt=t,this.g("linkSelectionAdornmentTemplate",e,t))}},highlighteds:{get:function(){return this.Tv}},isModified:{get:function(){var t=this.undoManager;return t.isEnabled?null!==t.currentTransaction||this.Ym&&this.se!==t.historyIndex:this.Ym},set:function(t){if(this.Ym!==t){this.Ym=t;var e=this.undoManager;!t&&e.isEnabled&&(this.se=e.historyIndex),t||dh(this)}}},model:{get:function(){return this.ac},set:function(t){var e=this.ac;if(e!==t){this.currentTool.doCancel(),e&&e.undoManager!==t.undoManager&&e.undoManager.isInTransaction&&Y("Do not replace a Diagram.model while a transaction is in progress."),this.animationManager.wc(!0);var n=Nd(this,!0);this.Qf=!1,this.Nm=!0,this.se=-2,this.cg=!1;var i=this.wb;this.wb=!0,_l(this.animationManager,"Model"),e&&(null!==this.bf&&this.bf.each(function(u){e.ak(u)}),e.ak(this.Hc)),this.ac=t,this.partManager=function cT(t){return null!==(t=Ut.get(t))?new t:new Vt}(this.ac.type);for(var l=0;l<n.length;l++)this.add(n[l]);t.Ug(this.Db),this.partManager.addAllModeledParts(),t.ak(this.Db),t.Ug(this.Hc),null!==this.bf&&this.bf.each(function(u){t.Ug(u)}),this.wb=i,this.Va(),this.wb||this.N(),e&&t.undoManager.copyProperties(e.undoManager)}}},$:{get:function(){return this.Xv},set:function(t){this.Xv=t}},Zr:{get:function(){return this.Xx}},skipsModelSourceBindings:{get:function(){return this.mw},set:function(t){this.mw=t}},os:{get:function(){return this.Ut},set:function(t){this.Ut=t}},nodeTemplate:{get:function(){return this.Dg.I("")},set:function(t){var e=this.Dg.I("");e!==t&&(this.Dg.add("",t),this.g("nodeTemplate",e,t),this.undoManager.isUndoingRedoing||this.Od())}},nodeTemplateMap:{get:function(){return this.Dg},set:function(t){var e=this.Dg;e!==t&&(this.Dg=t,this.g("nodeTemplateMap",e,t),this.undoManager.isUndoingRedoing||this.Od())}},groupTemplate:{get:function(){return this.Ri.I("")},set:function(t){var e=this.Ri.I("");e!==t&&(this.Ri.add("",t),this.g("groupTemplate",e,t),this.undoManager.isUndoingRedoing||this.Od())}},groupTemplateMap:{get:function(){return this.Ri},set:function(t){var e=this.Ri;e!==t&&(this.Ri=t,this.g("groupTemplateMap",e,t),this.undoManager.isUndoingRedoing||this.Od())}},linkTemplate:{get:function(){return this.Ch.I("")},set:function(t){var e=this.Ch.I("");e!==t&&(this.Ch.add("",t),this.g("linkTemplate",e,t),this.undoManager.isUndoingRedoing||this.Od())}},linkTemplateMap:{get:function(){return this.Ch},set:function(t){var e=this.Ch;e!==t&&(this.Ch=t,this.g("linkTemplateMap",e,t),this.undoManager.isUndoingRedoing||this.Od())}},isMouseCaptured:{get:function(){return this.Wv},set:function(t){var e=this.Ha;null!==e&&((e=e.Sa)instanceof SVGElement||(t?(this.lastInput.bubbles=!1,this.removeEventListener(e,"pointermove",this.Xj,!1),this.removeEventListener(e,"pointerdown",this.Wj,!1),this.removeEventListener(e,"pointerup",this.Zj,!1),this.removeEventListener(e,"pointerout",this.Yj,!1),this.addEventListener(pt,"pointermove",this.Xj,!0),this.addEventListener(pt,"pointerdown",this.Wj,!0),this.addEventListener(pt,"pointerup",this.Zj,!0),this.addEventListener(pt,"pointerout",this.Yj,!0),this.removeEventListener(e,"wheel",this.Sj,!1),this.addEventListener(pt,"wheel",this.Sj,!0),this.addEventListener(pt,"selectstart",this.preventDefault,!1)):(this.removeEventListener(pt,"pointermove",this.Xj,!0),this.removeEventListener(pt,"pointerdown",this.Wj,!0),this.removeEventListener(pt,"pointerup",this.Zj,!0),this.removeEventListener(pt,"pointerout",this.Yj,!0),this.addEventListener(e,"pointermove",this.Xj,!1),this.addEventListener(e,"pointerdown",this.Wj,!1),this.addEventListener(e,"pointerup",this.Zj,!1),this.addEventListener(e,"pointerout",this.Yj,!1),this.removeEventListener(pt,"wheel",this.Sj,!0),this.removeEventListener(pt,"selectstart",this.preventDefault,!1),this.addEventListener(e,"wheel",this.Sj,!1)),this.Wv=t))}},position:{get:function(){return this.pa},set:function(t){var e=P.alloc().assign(this.pa);if(!e.C(t)){var n=this.viewportBounds.copy();this.pa.assign(t),Nx(this.animationManager,e,this.pa),this.wb||null===this.Ha&&!this.Zn.v()?El(this):(this.wb=!0,hu(this,this.wp,this.Ba/(t=this.scale),this.Aa/t,this.mk,!1),this.wb=!1),this.wb||this.onViewportBoundsChanged(n,this.viewportBounds,this.xa,!1)}P.free(e)}},initialPosition:{get:function(){return this.bt},set:function(t){this.bt.C(t)||(this.bt=t.J())}},initialScale:{get:function(){return this.ct},set:function(t){this.ct!==t&&(this.ct=t)}},grid:{get:function(){return null===this.Zd&&(this.Zd=Tr(this)),this.Zd},set:function(t){var e=this.Zd;if(e!==t){null===e&&(e=this.Zd=Tr(this)),t.type!==$.Grid&&Y("Diagram.grid must be a Panel of type Panel.Grid");var n=e.panel;null!==n&&n.remove(e),this.Zd=t,t.name="GRID",null!==n&&n.add(t),Es(this),this.N(),this.g("grid",e,t)}}},viewportBounds:{get:function(){return this.vw}},viewSize:{get:function(){return this.Zn},set:function(t){var e=this.viewSize;e.C(t)||(this.Zn=t=t.J(),this.Aa=this.Ba=0,t.v()?(this.Ba=t.width,this.Aa=t.height):null!==this.La&&(this.Ba=this.La.clientWidth||1,this.Aa=this.La.clientHeight||1),El(this),this.Va(),this.g("viewSize",e,t),this.redraw())}},fixedBounds:{get:function(){return this.Xs},set:function(t){var e=this.Xs;e.C(t)||(t.width!==-1/0&&t.height!==1/0&&t.height!==-1/0||Y("fixedBounds width/height must not be Infinity"),this.Xs=t=t.J(),this.Va(),this.g("fixedBounds",e,t))}},scrollMargin:{get:function(){return this.mj},set:function(t){"number"==typeof t&&(t=new Bt(t));var e=this.mj;e.C(t)||(this.mj=t=t.J(),this.g("scrollMargin",e,t),this.Jo())}},scrollMode:{get:function(){return this.nj},set:function(t){var e=this.nj;e!==t&&(this.nj=t,t===Is&&yr(this,!1),this.g("scrollMode",e,t),this.N())}},scrollsPageOnFocus:{get:function(){return this.Tt},set:function(t){var e=this.Tt;e!==t&&(this.Tt=t,this.g("scrollsPageOnFocus",e,t))}},positionComputation:{get:function(){return this.Et},set:function(t){var e=this.Et;e!==t&&(this.Et=t,yr(this,!1),this.g("positionComputation",e,t))}},scaleComputation:{get:function(){return this.Lt},set:function(t){var e=this.Lt;e!==t&&(this.Lt=t,Po(this,this.scale,this.scale),this.g("scaleComputation",e,t))}},documentBounds:{get:function(){return this.wp}},isVirtualized:{get:function(){return this.lt},set:function(t){var e=this.lt;e!==t&&(this.lt=t,this.g("isVirtualized",e,t))}},scale:{get:function(){return this.xa},set:function(t){var e=this.xa;e!==t&&Po(this,e,t)}},defaultScale:{get:function(){return this.sp},set:function(t){this.sp=t}},autoScale:{get:function(){return this.nh},set:function(t){var e=this.nh;e!==t&&(this.nh=t,this.g("autoScale",e,t),t!==Er&&yr(this,!1))}},initialAutoScale:{get:function(){return this.wg},set:function(t){var e=this.wg;e!==t&&(this.wg=t,this.g("initialAutoScale",e,t))}},initialViewportSpot:{get:function(){return this.dt},set:function(t){var e=this.dt;e!==t&&(t.pb()||Y("initialViewportSpot must be a specific Spot: "+t),this.dt=t,this.g("initialViewportSpot",e,t))}},initialDocumentSpot:{get:function(){return this.at},set:function(t){var e=this.at;e!==t&&(t.pb()||Y("initialViewportSpot must be a specific Spot: "+t),this.at=t,this.g("initialDocumentSpot",e,t))}},minScale:{get:function(){return this.tt},set:function(t){var e=this.tt;e!==t&&(0<t?(this.tt=t,this.g("minScale",e,t),t>this.scale&&(this.scale=t)):le(t,"> 0",V,"minScale"))}},maxScale:{get:function(){return this.pt},set:function(t){var e=this.pt;e!==t&&(0<t?(this.pt=t,this.g("maxScale",e,t),t<this.scale&&(this.scale=t)):le(t,"> 0",V,"maxScale"))}},zoomPoint:{get:function(){return this.eu},set:function(t){this.eu.C(t)||(this.eu=t=t.J())}},contentAlignment:{get:function(){return this.mk},set:function(t){var e=this.mk;e.C(t)||(this.mk=t=t.J(),this.g("contentAlignment",e,t),yr(this,!1))}},initialContentAlignment:{get:function(){return this.Rp},set:function(t){var e=this.Rp;e.C(t)||(this.Rp=t=t.J(),this.g("initialContentAlignment",e,t))}},padding:{get:function(){return this.ub},set:function(t){"number"==typeof t&&(t=new Bt(t));var e=this.ub;e.C(t)||(this.ub=t=t.J(),this.Va(),this.g("padding",e,t))}},partManager:{get:function(){return this.Ic},set:function(t){var e=this.Ic;e!==t&&(null!==t.diagram&&Y("Cannot share PartManagers between Diagrams: "+t.toString()),e&&e.Le(null),this.Ic=t,t.Le(this))}},nodes:{get:function(){return this.partManager.nodes.iterator}},links:{get:function(){return this.partManager.links.iterator}},parts:{get:function(){return this.partManager.parts.iterator}},layout:{get:function(){return this.Kc},set:function(t){var e=this.Kc;e!==t&&(this.Kc=t,t.diagram=this,t.group=null,this.mh=!0,this.g("layout",e,t),this.Mb())}},isTreePathToChildren:{get:function(){return this.kt},set:function(t){var e=this.kt;if(e!==t&&(this.kt=t,this.g("isTreePathToChildren",e,t),!this.undoManager.isUndoingRedoing))for(t=this.nodes;t.next();)vm(t.value)}},treeCollapsePolicy:{get:function(){return this.$t},set:function(t){var e=this.$t;e!==t&&(t!==du&&t!==Nv&&t!==Pv&&Y("Unknown Diagram.treeCollapsePolicy: "+t),this.$t=t,this.g("treeCollapsePolicy",e,t))}},Ie:{get:function(){return this.Vv},set:function(t){this.Vv=t}},avoidanceCellSize:{get:function(){return this.Fv},set:function(t){this.Qh=null,this.Fv=new dt(Math.max(1,t.width),Math.max(1,t.height))}},avoidanceLimit:{get:function(){return this.Gv},set:function(t){this.Gv=Math.max(1,t)}},autoScrollInterval:{get:function(){return this.Yo},set:function(t){var e=this.Yo;e!==t&&(this.Yo=t,this.g("autoScrollInterval",e,t))}},autoScrollRegion:{get:function(){return this.$o},set:function(t){"number"==typeof t&&(t=new Bt(t));var e=this.$o;e.C(t)||(this.$o=t=t.J(),this.Va(),this.g("autoScrollRegion",e,t))}}}),Mt.Object.defineProperties(V,{licenseKey:{get:function(){return pu.fc()},set:function(t){pu.add(t.replace(/\s/g,""))}},version:{get:function(){return jd}}}),V.prototype.makeImageData=V.prototype.ox,V.prototype.makeImage=V.prototype.Dz,V.prototype.cacheGroupExternalLinks=V.prototype.lu,V.prototype.addRenderer=V.prototype.ny,V.prototype.makeSVG=V.prototype.Nu,V.prototype.makeSvg=V.prototype.bs,V.prototype.stopAutoScroll=V.prototype.lg,V.prototype.doAutoScroll=V.prototype.Fr,V.prototype.isUnoccupied=V.prototype.Pj,V.prototype.raiseDiagramEvent=V.prototype.P,V.prototype.removeDiagramListener=V.prototype.Il,V.prototype.addDiagramListener=V.prototype.wj,V.prototype.findTreeRoots=V.prototype.fz,V.prototype.layoutDiagram=V.prototype.Bz,V.prototype.findTopLevelGroups=V.prototype.Zy,V.prototype.findTopLevelNodesAndLinks=V.prototype.$y,V.prototype.ensureBounds=V.prototype.Za,V.prototype.findLinksByExample=V.prototype.Ir,V.prototype.findNodesByExample=V.prototype.Jr,V.prototype.findLinkForData=V.prototype.Dc,V.prototype.findNodeForData=V.prototype.ci,V.prototype.findPartForData=V.prototype.Ec,V.prototype.findLinkForKey=V.prototype.findLinkForKey,V.prototype.findNodeForKey=V.prototype.Lb,V.prototype.findPartForKey=V.prototype.findPartForKey,V.prototype.rebuildParts=V.prototype.Od,V.prototype.transformViewToDoc=V.prototype.rs,V.prototype.transformRectDocToView=V.prototype.gA,V.prototype.transformDocToView=V.prototype.Ro,V.prototype.centerRect=V.prototype.Dr,V.prototype.scrollToRect=V.prototype.bv,V.prototype.scroll=V.prototype.scroll,V.prototype.highlightCollection=V.prototype.rz,V.prototype.highlight=V.prototype.qz,V.prototype.selectCollection=V.prototype.Yz,V.prototype.select=V.prototype.select,V.prototype.updateAllRelationshipsFromData=V.prototype.Uo,V.prototype.updateAllTargetBindings=V.prototype.updateAllTargetBindings,V.prototype.commit=V.prototype.commit,V.prototype.rollbackTransaction=V.prototype.Bf,V.prototype.commitTransaction=V.prototype.eb,V.prototype.startTransaction=V.prototype.Da,V.prototype.raiseChanged=V.prototype.g,V.prototype.raiseChangedEvent=V.prototype.bb,V.prototype.removeChangedListener=V.prototype.ak,V.prototype.addChangedListener=V.prototype.Ug,V.prototype.removeModelChangedListener=V.prototype.Tz,V.prototype.addModelChangedListener=V.prototype.Cw,V.prototype.findLayer=V.prototype.Ij,V.prototype.removeLayer=V.prototype.Rz,V.prototype.addLayerAfter=V.prototype.jy,V.prototype.addLayerBefore=V.prototype.Aw,V.prototype.addLayer=V.prototype.pl,V.prototype.moveParts=V.prototype.moveParts,V.prototype.copyParts=V.prototype.Ej,V.prototype.removeParts=V.prototype.hs,V.prototype.remove=V.prototype.remove,V.prototype.add=V.prototype.add,V.prototype.clearDelayedGeometries=V.prototype.mu,V.prototype.setProperties=V.prototype.Vl,V.prototype.attach=V.prototype.ku,V.prototype.set=V.prototype.set,V.prototype.resetInputOptions=V.prototype.zx,V.prototype.setInputOption=V.prototype.Zz,V.prototype.getInputOption=V.prototype.yl,V.prototype.resetRenderingHints=V.prototype.Ax,V.prototype.setRenderingHint=V.prototype.Fx,V.prototype.getRenderingHint=V.prototype.Ge,V.prototype.maybeUpdate=V.prototype.nd,V.prototype.requestUpdate=V.prototype.Mb,V.prototype.delayInitialization=V.prototype.Ey,V.prototype.isUpdateRequested=V.prototype.xz,V.prototype.invalidateDocumentBounds=V.prototype.Va,V.prototype.findObjectsNear=V.prototype.hg,V.prototype.findPartsNear=V.prototype.Vy,V.prototype.findObjectsIn=V.prototype.tf,V.prototype.findPartsIn=V.prototype.Ww,V.prototype.findObjectsAt=V.prototype.di,V.prototype.findPartsAt=V.prototype.Uy,V.prototype.findObjectAt=V.prototype.ec,V.prototype.findPartAt=V.prototype.wl,V.prototype.focusObject=V.prototype.gz,V.prototype.alignDocument=V.prototype.py,V.prototype.zoomToRect=V.prototype.kA,V.prototype.zoomToFit=V.prototype.zoomToFit,V.prototype.diagramScroll=V.prototype.Nw,V.prototype.focus=V.prototype.focus;var Ut=new vt,Tv=null,$e=void 0!==pt.document,fu=null,da="",Er=new W(V,"None",0),jc=new W(V,"Uniform",1),bg=new W(V,"UniformToFill",2),Rd=new W(V,"CycleAll",10),Vc=new W(V,"CycleNotDirected",11),Ev=new W(V,"CycleNotDirectedFast",12),Bc=new W(V,"CycleNotUndirected",13),Vx=new W(V,"CycleDestinationTree",14),Iv=new W(V,"CycleSourceTree",15),Is=new W(V,"DocumentScroll",1),Uc=new W(V,"InfiniteScroll",2),du=new W(V,"TreeParentCollapsed",21),Nv=new W(V,"AllParentsCollapsed",22),Pv=new W(V,"AnyParentsCollapsed",23),pu=new q,jd="2.2.16",Hc="image",zM=null,Av=!1;function WM(){this.by=null,this.j="zz@orderNum",this.pd="63ad05bbe23a1786468a4c741b6d2"===this._tk?this.j=!0:null}function Vd(t,e){if(e.Zb.setTransform(e.kc,0,0,e.kc,0,0),e.Zb.Pc(),null===t.pd)t:{e="f";var n=pt[zt("76a715b2f73f148a")][zt("72ba13b5")];if(t.pd=!0,$e){var i=V[zt("76a115b6ed251eaf4692")];if(i)for(var l=pu.iterator;l.next()&&!(6>(i=zt(i=l.value).split(zt("39e9"))).length);){var u=zt(i[1]).split(".");if("7da71ca0"!==i[4])break;var h=zt(Xa[zt("6cae19")]).split(".");if(u[0]>h[0]||u[0]===h[0]&&u[1]>=h[1]){var f=pt[zt("74a900bae4370f8b51")][zt("6fbb13a1c2311e8a57")].toLowerCase();if(h=f[zt("73a612b6fb191d")](zt("3aad1ab6e022098b4dc4")),u=zt(i[2]),-1<h&&(f=f[zt("73a612b6fb191d")](u.toLowerCase()+"/"),t.pd=!(-1<f&&f<h),!t.pd))break;for(h=n[zt("76ad18b4f73e")],f=n[zt("73a612b6fb191d")](zt("35e7"))+2;f<h;f++)e+=n[f];if(0>(h=e[zt("73a612b6fb191d")](u))&&u!==zt("7da71ca0ad381e90")&&(h=e[zt("73a612b6fb191d")](zt("76a715b2ef3e149757"))),0>h&&(h=e[zt("73a612b6fb191d")](zt("76a715b2ef3e149757"))),0>h&&(h=n[zt("73a612b6fb191d")](zt("7baa19a6f76c1988428554"))),t.pd=!(0<=h&&h<e[zt("73a612b6fb191d")](zt("35"))||-1===e[zt("73a612b6fb191d")](zt("35"))),!t.pd||n[zt("73a612b6fb191d")](zt("7fb002b6ed25128b4da25b2e"))&&n[zt("73a612b6fb191d")](zt("75ba1beee63a1e875799507d"))&&(t.pd=!(-1<n[zt("73a612b6fb191d")](u)),!t.pd))break;if("#"===u[0]){h=pt.document.createElement("div");for(var p=i[0].replace(/[A-Za-z]/g,"");4>p.length;)p+="9";if(f=p,p=p.substr(p.length-4),i="",i+=["gsh","gsf"][parseInt(p.substr(0,1),10)%2],i+=["Header","Background","Display","Feedback"][parseInt(p.substr(0,1),10)%4],h[zt("79a417a0f0181a8946")]=i,pt.document[zt("78a712aa")]){pt.document[zt("78a712aa")][zt("7bb806b6ed32388c4a875b")](h),p=pt.getComputedStyle(h).getPropertyValue(zt("78a704b7e62456904c9b12701b6532a8"));var g=pt.getComputedStyle(h).getPropertyValue(zt("75b817b0ea2202"));if(pt.document[zt("78a712aa")][zt("68ad1bbcf533388c4a875b")](h),p){if(h=pt[zt("77a902b0eb1b1e804a8a")],g==="0."+parseInt(f,10)%100||-1!==p.indexOf(parseInt(u[1]+u[2],16))&&-1!==p.indexOf(parseInt(u[3]+u[4],16))){t.pd=!1;break}if(h&&h(zt("32ae19a1e0331fc94084537c067a67fa59f1386b89d006")).matches)for(i="."+i,u=0;u<document.styleSheets.length;u++)for(var m in h=document.styleSheets[u].rules||document.styleSheets[u].cssRules)if(i===h[m].selectorText){t.pd=!1;break t}}}else t.pd=null,t.pd=!1}}}else{for(m=n[zt("76ad18b4f73e")],l=n[zt("73a612b6fb191d")](zt("35e7"))+2;l<m;l++)e+=n[l];n=e[zt("73a612b6fb191d")](zt("7da71ca0ad381e90")),t.pd=!(0<=n&&n<e[zt("73a612b6fb191d")](zt("35")))}}}return 0<t.pd&&t!==t.by}function kv(t,e){if($e){if(null!=e||Y("Diagram setup requires an argument DIV."),null!==t.La&&Y("Diagram has already completed setup."),"string"==typeof e?t.La=pt.document.getElementById(e):e instanceof HTMLDivElement?t.La=e:Y("No DIV or DIV id supplied: "+e),null===t.La&&Y("Invalid DIV id; could not get element with id: "+e),void 0!==t.La.H&&Y("Invalid div id; div already has a Diagram associated with it."),!t.cl&&pt.ResizeObserver){var n=Gy(function(){t.Mb()},250);t.cl=new pt.ResizeObserver(function(){n()}),t.cl.observe(t.La)}"static"===pt.getComputedStyle(t.La,null).position&&(t.La.style.position="relative");var i="rgba(2"+(e=5)+"5, 255, 255, 0)";e--,t.La.style["-webkit-tap-highlight-color"]=i,t.La.innerHTML="",t.La.H=t,t.La.goDiagram=t,t.La.go=pt.go;var l=t.kr?new tl(t):new Wr(t);if(void 0!==l.style&&(l.style.position="absolute",l.style.top="0px",l.style.left="0px","rtl"===pt.getComputedStyle(t.La,null).getPropertyValue("direction")&&(t.$m=!0),l.style.zIndex="2",l.style.userSelect="none",l.style.MozUserSelect="none",l.style.touchAction="none"),t.Ha=l,t.Zb=l.context,i=t.Zb,t.kc=t.computePixelRatio(),t.viewSize.v()||(t.Ba=t.La.clientWidth||1,t.Aa=t.La.clientHeight||1),No(t,t.Ba,t.Aa),t.La.insertBefore(l.Sa,t.La.firstChild),(l=new Wr(null)).width=1,l.height=1,t.Ov=l,t.Ux=l.context,$e){l=Zo("div");var u=Zo("div");l.style.position="absolute",l.style.overflow="auto",l.style.width=t.Ba+"px",l.style.height=t.Aa+"px",l.style.zIndex="1",u.style.position="absolute",u.style.width="1px",u.style.height="1px",t.La.appendChild(l),l.appendChild(u),l.onscroll=pv,l.addEventListener("pointerdown",UM),l.H=t,l.$x=!0,l.ay=!0,t.Qt=l,t.Nt=u}t.Jo=Gy(function(){t.Rh=null,t.N()},300),t.sv=Gy(function(){uu(t)},250),t.preventDefault=function(h){return h.preventDefault(),!1},t.Sj=function(h){if(t.isEnabled){var f=bc(t,h,!0);f.bubbles=!0;var p=0,g=0;f.delta=0,void 0!==h.deltaX?(0!==h.deltaX&&(p=0<h.deltaX?1:-1),0!==h.deltaY&&(g=0<h.deltaY?1:-1),f.delta=Math.abs(h.deltaX)>Math.abs(h.deltaY)?-p:-g):void 0!==h.wheelDeltaX?(0!==h.wheelDeltaX&&(p=0<h.wheelDeltaX?-1:1),0!==h.wheelDeltaY&&(g=0<h.wheelDeltaY?-1:1),f.delta=Math.abs(h.wheelDeltaX)>Math.abs(h.wheelDeltaY)?-p:-g):void 0!==h.wheelDelta&&0!==h.wheelDelta&&(f.delta=0<h.wheelDelta?1:-1),t.doMouseWheel(),uh(f,h)}},t.Iz=function(h){t.isEnabled&&(t.Kk=!1,bc(t,h,!0),(h=t.currentTool).cancelWaitAfter(),h.standardMouseOver())},t.Wj=function(h){if(t.isEnabled){t.Kk=!0;var f=t.Dt;void 0===f[h.pointerId]&&(f[h.pointerId]=h);var p=!1;if(null!==(f=t.$k)[0]&&f[0].pointerId===h.pointerId)f[0]=h;else if(null!==f[1]&&f[1].pointerId===h.pointerId)f[1]=h,p=!0;else if(null===f[0])f[0]=h;else{if(null!==f[1])return void h.preventDefault();f[1]=h,p=!0}(f="touch"===h.pointerType||"pen"===h.pointerType)&&(t.Wt=!1,t.jt=!0);var g=p;p=Yt(t,h,!0,!1,!0,g),Eg(t,h,p),p.targetDiagram=yv(h,h.target),p.targetObject=null,g||p.clone(t.Fp),g=t.$v,f=f?25:10,h.timeStamp-t.Zv<t.hy&&!(Math.abs(g.x-h.screenX)>f||Math.abs(g.y-h.screenY)>f)?t.Yp++:t.Yp=1,p.clickCount=t.Yp,t.Zv=h.timeStamp,t.$v.kg(h.screenX,h.screenY),t.doMouseDown(),1===h.button?h.preventDefault():uh(p,h)}},t.Xj=function(h){if(t.isEnabled){t.Kk=!0;var f=t.$k;if(null!==f[0]&&f[0].pointerId===h.pointerId)f[0]=h;else{if(null!==f[1]&&f[1].pointerId===h.pointerId)return void(f[1]=h);if(null!==f[0])return;f[0]=h}if(f[0].pointerId===h.pointerId){f=Yt(t,h,!1,!1,!1,null!==f[1]);var p=pt.document.elementFromPoint(h.clientX,h.clientY);null!==p&&null!=p.shadowRoot&&(p=p.shadowRoot.elementFromPoint(h.clientX,h.clientY));var g=t,m=h;p&&p.H&&(m=h,g=p.H),f.targetDiagram=g,Eg(t,m,f),f.targetObject=null,t.doMouseMove(),uh(f,h)}}},t.Zj=function(h){if(t.isEnabled){t.Kk=!0;var f="touch"===h.pointerType||"pen"===h.pointerType,p=t.Dt;if(f&&t.Wt)delete p[h.pointerId],h.preventDefault();else if(null!==(p=t.$k)[0]&&p[0].pointerId===h.pointerId){p[0]=null,p=Yt(t,h,!1,!0,!0,!1);var g=pt.document.elementFromPoint(h.clientX,h.clientY);null!==g&&null!=g.shadowRoot&&(g=g.shadowRoot.elementFromPoint(h.clientX,h.clientY)),null!==g&&g.H instanceof V&&g.H!==t&&Eg(g.H,h,p),null===g&&(g=h.target),Eg(t,h,p),p.clickCount=t.Yp,p.targetDiagram=yv(h,g),p.targetObject=null,t.doMouseUp(),uh(p,h),f&&(t.jt=!1)}else null!==p[1]&&p[1].pointerId===h.pointerId&&(p[1]=null)}},t.Yj=function(h){if(t.isEnabled){t.Kk=!1;var f=t.Dt;f[h.pointerId]&&delete f[h.pointerId],null!==(f=t.$k)[0]&&f[0].pointerId===h.pointerId&&(f[0]=null),null!==f[1]&&f[1].pointerId===h.pointerId&&(f[1]=null),"touch"!==h.pointerType&&"pen"!==h.pointerType&&((h=t.currentTool).cancelWaitAfter(),h.standardMouseOver())}},t.Qs=i.Z["d"+Bd[1]+Bd[2]+"wI"+Hc.slice(1,5)]["b"+lD.slice(1,e)](i.Z,zM,e,e),i.Oc(!0),function BM(t){var e=t.Ha.Sa;e instanceof HTMLCanvasElement&&(t.addEventListener(e,"pointerdown",t.Wj,!1),t.addEventListener(e,"pointermove",t.Xj,!1),t.addEventListener(e,"pointerup",t.Zj,!1),t.addEventListener(e,"pointerout",t.Yj,!1),t.addEventListener(e,"pointerenter",t.Jy,!1),t.addEventListener(e,"pointerleave",t.Ky,!1),t.addEventListener(e,"wheel",t.Sj,!1),t.addEventListener(e,"keydown",t.yz,!1),t.addEventListener(e,"keyup",t.zz,!1),t.addEventListener(e,"blur",t.vy,!1),t.addEventListener(e,"focus",t.wy,!1),t.addEventListener(e,"selectstart",function(n){return n.preventDefault(),!1},!1),t.addEventListener(e,"contextmenu",function(n){return n.preventDefault(),!1},!1),t.addEventListener(pt,"resize",t.sv,!1),Do&&t.addEventListener(e,"touchstart",function(n){n.preventDefault()},!1))}(t)}}function pa(t){this.j=void 0===t?new P:t,this.m=new P}V.className="Diagram",V.fromDiv=function(t){var e=t;return"string"==typeof t&&(e=pt.document.getElementById(t)),e instanceof HTMLDivElement&&e.H instanceof V?e.H:null},V.inherit=function(t,e){function n(){}if(Object.getPrototypeOf(t).prototype)throw Error("Used go.Diagram.inherit defining already defined class \n"+t);n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t},V.useDOM=function(t){$e=!!t&&void 0!==pt.document},V.isUsingDOM=function(){return $e},V.None=Er,V.Uniform=jc,V.UniformToFill=bg,V.CycleAll=Rd,V.CycleNotDirected=Vc,V.CycleNotDirectedFast=Ev,V.CycleNotUndirected=Bc,V.CycleDestinationTree=Vx,V.CycleSourceTree=Iv,V.DocumentScroll=Is,V.InfiniteScroll=Uc,V.TreeParentCollapsed=du,V.AllParentsCollapsed=Nv,V.AnyParentsCollapsed=Pv,WM.className="DiagramHelper",Mt.Object.defineProperties(pa.prototype,{point:{get:function(){return this.j},set:function(t){this.j=t}},shifted:{get:function(){return this.m},set:function(t){this.m=t}}});var Ve,Le,Ps,Mn,Vn,$r,zc,$c,Wc,Gd,Bd="DraggingInfo";function Ov(t,e,n){this.node=t,this.info=e,this.Eu=n}function Gc(){this.reset()}function Ud(t,e){if("string"==typeof t||pt.Element&&t instanceof Element)var n=V.call(this,t)||this;else n=V.call(this)||this,e=t;return YM(n),e&&n.Vl(e),n}function YM(t){t.allowDragOut=!0,t.allowMove=!1,t.isReadOnly=!0,t.contentAlignment=Br,t.layout=new kn}function Ns(t,e){if("string"==typeof t||pt.Element&&t instanceof Element)var n=V.call(this,t)||this;else n=V.call(this)||this,e=t;var i=n;n.animationManager.isEnabled=!1,n.wb=!0,n.W=null,n.Tm=!1,n.Um=!1,n.F=!0,n.u=!0,n.ga=0,n.m=!1,n.fl=null,n.Fx("drawShadows",!1),t=new lt;var l=new wt;return l.stroke="magenta",l.strokeWidth=2,l.fill="transparent",l.name="BOXSHAPE",t.selectable=!0,t.selectionAdorned=!1,t.selectionObjectName="BOXSHAPE",t.locationObjectName="BOXSHAPE",t.resizeObjectName="BOXSHAPE",t.cursor="move",t.add(l),n.j=t,n.allowCopy=!1,n.allowDelete=!1,n.allowSelect=!0,n.autoScrollRegion=new Bt(0,0,0,0),n.pa.h(0,0),n.toolManager.gb("Dragging",new mh,n.toolManager.mouseMoveTools),n.click=function(){var u=i.observed;if(null!==u){var h=u.viewportBounds,f=i.lastInput.documentPoint;u.position=new P(f.x-h.width/2,f.y-h.height/2)}},n.Gf=function(){i.Va(),gh(i)},n.Qd=function(){null!==i.observed&&(i.Va(),i.N())},n.Ga=function(){1>i.updateDelay?i.N():i.m||(i.m=!0,setTimeout(function(){return i.redraw()},i.updateDelay))},n.Ff=function(){null!==i.observed&&gh(i)},n.autoScale=jc,n.wb=!1,e&&Object.assign(n,e),n}function KM(t){var e=t.observed;if(null!==e){var n=t.drawsTemporaryLayers,i=t.drawsGrid&&n,l=e.grid;i&&null!==l&&l.visible&&!isNaN(l.width)&&!isNaN(l.height)&&(Es(e,l=B.alloc().assign(t.viewportBounds).Xc(e.viewportBounds)),B.free(l),jn(e));var u=t.Bb;u.reset(),1!==t.scale&&u.scale(t.scale),0===t.position.x&&0===t.position.y||u.translate(-t.position.x,-t.position.y),(l=t.Zb).scale(t.kc,t.kc),l.transform(u.m11,u.m12,u.m21,u.m22,u.dx,u.dy),u=(e=e.Ua.s).length;for(var h=0;h<u;h++){var f=e[h],p=t;if(f.visible&&0!==f.opacity){var g=f.diagram.grid.part;if(!n&&f.isTemporary)i&&g.layer===f&&(f=ca(f,l),g.tc(l,p),l.globalAlpha=f);else{for(var m=ca(f,l),v=p.scale,x=B.alloc(),D=f.Ma.s,M=D.length,T=0;T<M;T++){var N=D[T];(i||N!==g)&&f.$h(l,N,p,null,v,x,!1)}B.free(x),l.globalAlpha=m}}}}}function gh(t){var e=t.box;if(null!==e){var n=t.observed;if(null!==n){t.bd=!0,n=n.viewportBounds;var i=e.selectionObject,l=dt.alloc();l.h(n.width,n.height),i.desiredSize=l,dt.free(l),t=2/t.scale,i instanceof wt&&(i.strokeWidth=t),e.location=new P(n.x-t/2,n.y-t/2),e.isSelected=!0}}}function mh(){De.call(this),this.j=null}function $t(){wn(this),this.H=ah,this.Ga=this.u=this.m=!0,this.F=this.W=this.hb=this.ga=!1,this.dj=this.j=null,this.Db=1.05,this.mt=NaN,this.Yv=null,this.fu=NaN,this.du=_o,this.cb=!0,this.Vf=null,this.nb=200}function Il(t,e,n){if(e.isVisible())return n;if(e instanceof Pt)Il(t,e.adornedPart,n);else if(e instanceof H){var i=e.fromNode;null!==i&&Il(t,i,n),null!==(e=e.toNode)&&Il(t,e,n)}else e instanceof J&&(null!==(i=e.labeledLink)&&Il(t,i,n),null!==(i=e.ig())&&(i.isTreeExpanded||i.wasTreeExpanded||n.push(i),Il(t,i,n))),null!==(e=e.containingGroup)&&(e.isSubGraphExpanded||e.wasSubGraphExpanded||n.push(e),Il(t,e,n));return n}function Hd(t){var e=oe();for(t=t.iterator;t.next();){var n=t.value;n instanceof H||e.push(n)}t=new Z,n=e.length;for(var i=0;i<n;i++){for(var l=e[i],u=!0,h=0;h<n;h++)if(l.Md(e[h])){u=!1;break}u&&t.add(l)}return Nt(e),t}function ot(){wn(this),this.o=30723,this.tb=1,this.Yb=this.Uf=null,this.pa=new P(NaN,NaN).freeze(),this.$c=Ky,this.Bb=new Dt,this.lh=new Dt,this.Ib=null,this.xa=this.yk=1,this.Gb=0,this.Ag=nh,this.qc=new B(NaN,NaN,NaN,NaN).freeze(),this.Eb=new B(NaN,NaN,NaN,NaN).freeze(),this.bc=new B(0,0,NaN,NaN).freeze(),this.aa=this.Gn=this.Hn=null,this.fk=this.Fb=Hn,this.rg=this.Ln=0,this.Mn=this.jj=this.ib=this.sh=this.A=this.Ra=null}function rn(t){null===t.A?t.A=new wa:t.A.ic&&(t.A=t.A.copy())}function gu(t,e,n){var i=t.Yg();if(null!==i)for(var l=t.localBindings.iterator;l.next();){var u=l.value,h=null;if(null!==u.sourceName){if(null===(h=zm(u,i,t)))continue;u.Vo(t,h,n,null)}else if(u.isToModel){var f=e.diagram;null===f||f.skipsModelSourceBindings||u.Vo(t,f.model.modelData,n,i)}else{if(null===(f=i.data))continue;var p=e.diagram;null===p||p.skipsModelSourceBindings||u.Vo(t,f,n,i)}h===t&&null!==(f=i.Hr(u.ti))&&u.pv(f,h,n)}}function Bx(t,e,n,i){return!1!==t.pickable&&(i.multiply(t.transform),n?t.Sc(e,i):t.Wg(e,i))}function Lv(t,e,n,i,l){if(t.Eb.h(e,n,i,l),!t.desiredSize.v()){var u=t.qc,h=(n=t.Ag).top+n.bottom;switch(n=u.width+(e=n.right+n.left),u=u.height+h,i+=e,l+=h,e=os(t,!0),n===i&&u===l&&(e=Le),e){case Le:(n>i||u>l)&&(Qi(t,!0),t.measure(n>i?i:n,u>l?l:u,0,0));break;case Ve:Qi(t,!0),t.measure(i,l,0,0);break;case Mn:Qi(t,!0),t.measure(i,u,0,0);break;case Vn:Qi(t,!0),t.measure(n,l,0,0)}}}function ga(t,e,n,i){var l=t.naturalBounds,u=0,h=0,f=l.width;l=l.height;var p=t.Sv();t instanceof wt&&(u=(l=t.sa.bounds).x,h=l.y,f=l.width,l=l.height),gi(t,e,t.Yb,!0,!1,n,i),t.Yb instanceof bt&&t.Yb.type===Ui?(e.beginPath(),e.rect(u-p/2,h-p/2,f+p,l+p),e.sf(t.Yb)):e.fillRect(u-p/2,h-p/2,f+p,l+p)}function gi(t,e,n,i,l,u,h){if(null!==n){var f=1,p=1;if("string"==typeof n)i?e.fillStyle=n:e.strokeStyle=n;else if(n.type===Yr)i?e.fillStyle=n.color:e.strokeStyle=n.color;else{var g=0;if(t instanceof wt&&(g=t.strokeWidth),f=u.width,p=u.height,l?(f=h.width,p=h.height):i||(f+=g,p+=g),(u=e instanceof Pn)&&n.oe&&(n.type===xa||n.lk===f&&n.Hs===p))var m=n.oe;else{var v=0,x=0,D=0,M=0,T=0,N=0;if(N=T=0,l?(T=h.x,N=h.y):i||(T-=g/2,N-=g/2),v=n.start.x*f+n.start.offsetX,x=n.start.y*p+n.start.offsetY,D=n.end.x*f+n.end.offsetX,M=n.end.y*p+n.end.offsetY,v+=T,D+=T,x+=N,M+=N,n.type===il)m=e.createLinearGradient(v,x,D,M);else if(n.type===Ui)N=isNaN(n.endRadius)?Math.max(f,p)/2:n.endRadius,isNaN(n.startRadius)?(T=0,N=Math.max(f,p)/2):T=n.startRadius,m=e.createRadialGradient(v,x,T,D,M,N);else if(n.type===xa)try{m=e.createPattern(n.pattern,"repeat")}catch{m=null}if(n.type!==xa&&null!==(l=n.colorStops))for(l=l.iterator;l.next();)m.addColorStop(l.key,l.value);if(u&&(n.oe=m,null!==m&&(n.lk=f,n.Hs=p),null===m&&n.type===xa&&-1!==n.lk)){n.lk=-1;var I=t.diagram;null!==I&&-1===n.lk&&Ja(function(){I.redraw()},600)}}i?e.fillStyle=m:e.strokeStyle=m}}}function Fg(t){if(0!=(2048&t.o)){var e=t.Bb;if(e.reset(),!t.Eb.v()||!t.qc.v())return void Yc(t,!1);if(e.translate(t.Eb.x-t.qc.x,t.Eb.y-t.qc.y),1!==t.scale||0!==t.angle){var n=t.naturalBounds;t.Qn(e,n.x,n.y,n.width,n.height)}Yc(t,!1),ma(t,!0)}0!=(4096&t.o)&&(null===(e=t.panel)?(t.lh.set(t.Bb),t.yk=t.scale,ma(t,!1)):null!==e.ge&&((n=t.lh).reset(),e.ke()?n.multiply(e.lh):null!==e.panel&&n.multiply(e.panel.lh),n.multiply(t.Bb),t.yk=t.scale*e.yk,ma(t,!1)))}function zd(t){if(!Xn(t)){var e=t.panel;null!==e?e.w():t.li()&&null!==(e=t.diagram)&&(e.te.add(t),t instanceof J&&t.vd(),e.Mb()),As(t,!0)}}function os(t,e){var n=t.stretch,i=t.panel;return null!==i&&i.type===$.Table?Rg(t,i.getRowDefinition(t.row),i.getColumnDefinition(t.column),e):null!==i&&i.type===$.Auto&&i.vb()===t?Nl(t,Ve,e):n===$r?null!==i?i.type===$.Spot&&i.vb()===t?Nl(t,Ve,e):Nl(t,(n=i.defaultStretch)===$r?Le:n,e):Nl(t,Le,e):Nl(t,n,e)}function Rg(t,e,n,i){var l=t.stretch;if(l!==$r)return Nl(t,l,i);var u=l=null;switch(e.stretch){case Vn:case Ve:u=!0}switch(n.stretch){case Mn:case Ve:l=!0}return e=t.panel.defaultStretch,null===l&&(l=e===Mn||e===Ve),null===u&&(u=e===Vn||e===Ve),Nl(t,!0===l&&!0===u?Ve:!0===l?Mn:!0===u?Vn:Le,i)}function Nl(t,e,n){if(n)return e;if(e===Le||(n=t.desiredSize).v())return Le;if(t=t.angle,!isNaN(n.width))if(90!==t&&270!==t){if(e===Mn)return Le;if(e===Ve)return Vn}else{if(e===Vn)return Le;if(e===Ve)return Mn}if(!isNaN(n.height))if(90!==t&&270!==t){if(e===Vn)return Le;if(e===Ve)return Mn}else{if(e===Mn)return Le;if(e===Ve)return Vn}return e}function bv(t,e){t.o=e?512|t.o:-513&t.o}function mu(t){return 0!=(1024&t.o)}function Fv(t,e){t.o=e?1024|t.o:-1025&t.o}function Yc(t,e){t.o=e?2048|t.o:-2049&t.o}function ma(t,e){t.o=e?4096|t.o:-4097&t.o}function qs(t){return 0!=(8192&t.o)}function Qi(t,e){t.o=e?8192|t.o:-8193&t.o}function Xn(t){return 0!=(16384&t.o)}function As(t,e){t.o=e?16384|t.o:-16385&t.o}function ya(t){var e=t.part;if(e instanceof J&&(null!==t.portId||t===e.port)){var n=e.diagram;null===n||n.undoManager.isUndoingRedoing||h1(e,t)}}function Rv(t){var e=t.diagram;null===e||e.undoManager.isUndoingRedoing||(t instanceof $?t instanceof J?t.vd():t.$l(t,function(n){ya(n)}):ya(t))}function vr(t,e){for(var n=1;n<arguments.length;++n);n=arguments;var i=null,l=null;if("function"==typeof t)l=t;else if("string"==typeof t){var u=yu.I(t);"function"==typeof u?jt(i=u(n=mc(arguments)))||Y('GraphObject.make invoked object builder "'+t+'", but it did not return an Object'):l=pt.go[t]}if(null===i&&(null!=l&&l.constructor||Y("GraphObject.make requires a class function or GoJS class name or name of an object builder, not: "+t),i=new l),l=1,i instanceof V&&1<n.length){u=i;var h=n[1];("string"==typeof h||h instanceof HTMLDivElement)&&(kv(u,h),l++)}for(;l<n.length;l++)void 0===(u=n[l])?Y("Undefined value at argument "+l+" for object being constructed by GraphObject.make: "+i):Ux(i,u);return i}function Ux(t,e){if("string"==typeof e)if(t instanceof Wt)t.text=e;else if(t instanceof wt)t.figure=e;else if(t instanceof Gi)t.source=e;else if(t instanceof $)null!==(e=Xr.I(e))&&(t.type=e);else if(t instanceof bt){var n=Ks(bt,e);null!==n?t.type=n:Y("Unknown Brush type as an argument to GraphObject.make: "+e)}else t instanceof K?null!==(e=Ks(K,e))&&(t.type=e):t instanceof Lt&&null!==(e=Ks(Lt,e))&&(t.type=e);else if(e instanceof ot)t instanceof $||Y("A GraphObject can only be added to a Panel, not to: "+t),t.add(e);else if(e instanceof on){var i;e.isRow&&"function"==typeof t.getRowDefinition?i=t.getRowDefinition(e.index):e.isRow||"function"!=typeof t.getColumnDefinition||(i=t.getColumnDefinition(e.index)),i instanceof on?(t=i,e.isRow?t.height=e.height:t.width=e.width,t.minimum=e.minimum,t.maximum=e.maximum,t.alignment=e.alignment,t.stretch=e.stretch,t.sizing=e.sizing,t.Wf=null===e.separatorPadding?null:e.separatorPadding.J(),t.separatorStroke=e.separatorStroke,t.separatorStrokeWidth=e.separatorStrokeWidth,t.oj=null,e.separatorDashArray&&(t.oj=mc(e.separatorDashArray)),t.background=e.background,t.coversSeparators=e.coversSeparators,t.Vd=e.Vd):Y("A RowColumnDefinition can only be added to an object that implements getRowDefinition/getColumnDefinition, not to: "+t)}else if(e instanceof W)"function"==typeof t.ob&&t.ob(e);else if(e instanceof Be)t.type=e;else if(e instanceof de)t instanceof ot||t instanceof on?t.bind(e):Y("A Binding can only be applied to a GraphObject or RowColumnDefinition, not to: "+t);else if(e instanceof _i)t instanceof ot?t.mv(e):Y("An AnimationTrigger can only be applied to a GraphObject, not to: "+t);else if(e instanceof Nn)t instanceof K&&t.type===K.m?t.figures.add(e):Y("A PathFigure can only be added to a Path Geometry, not to: "+t);else if(e instanceof Lt)t instanceof Nn?t.segments.add(e):Y("A PathSegment can only be added to a PathFigure, not to: "+t);else if(e instanceof Ot)t instanceof V||t instanceof yt?t.layout=e:Y("A Layout can only be assigned to a Diagram or a Group, not to: "+t);else if(Array.isArray(e))for(n=0;n<e.length;n++)Ux(t,e[n]);else if("object"==typeof e&&null!==e)if(t instanceof bt){for(var l in n=new Vr,e)i=parseFloat(l),isNaN(i)?n[l]=e[l]:t.addColorStop(i,e[l]);hh(t,n)}else if(t instanceof on){for(n in void 0!==e.row?((null==(l=e.row)||l===1/0||isNaN(l)||0>l)&&Y("Must specify non-negative integer row for RowColumnDefinition "+e+", not: "+l),t.isRow=!0,t.index=l):void 0!==e.column&&((null==(l=e.column)||l===1/0||isNaN(l)||0>l)&&Y("Must specify non-negative integer column for RowColumnDefinition "+e+", not: "+l),t.isRow=!1,t.index=l),l=new Vr,e)"row"!==n&&"column"!==n&&(l[n]=e[n]);hh(t,l)}else hh(t,e);else Y('Unknown initializer "'+e+'" for object being constructed by GraphObject.make: '+t)}function va(t,e){yu.add(t,e)}function jv(t,e,n){void 0===n&&(n=null);var i=t[1];if("function"==typeof n?n(i):"string"==typeof i)return t.splice(1,1),i;if(void 0===e)throw Error("no "+("function"==typeof n?"satisfactory":"string")+" argument for GraphObject builder "+t[0]);return e}pa.className="DraggingInfo",Ov.className="DraggingNodeInfoPair",Gc.prototype.reset=function(){this.isGridSnapEnabled=!1,this.isGridSnapRealtime=!0,this.gridSnapCellSize=new dt(NaN,NaN).freeze(),this.gridSnapCellSpot=Oe,this.gridSnapOrigin=new P(NaN,NaN).freeze(),this.groupsSnapMembers=this.dragsTree=this.dragsLink=!1,this.dragsMembers=this.groupsAlwaysMove=!0},Gc.className="DraggingOptions",Ht(Ud,V),Ud.prototype.reset=function(){V.prototype.reset.call(this),YM(this)},Ud.className="Palette",Ht(Ns,V),Ns.prototype.computePixelRatio=function(){return 1},Ns.prototype.redraw=function(){if(this.m&&1<=this.updateDelay){this.m=!1;var t=this.Ha,e=this.Zb;if(null!==t&&null!==e){if(kd(this),null===this.fl){var n=new Wr(null);n.width=t.width,n.height=t.height,this.fl=n}try{this.Ha=this.fl,this.Zb=this.Ha.context,this.Zb.Oc(!0),this.Zb.setTransform(1,0,0,1,0,0),this.Zb.clearRect(0,0,this.Ha.width,this.Ha.height),KM(this)}finally{this.Ha=t,this.Zb=e}}}V.prototype.redraw.call(this)},Ns.prototype.tc=function(){if(null===this.La&&Y("No div specified"),null===this.Ha&&Y("No canvas specified"),!(this.Ha instanceof tl)&&(fm(this.box),this.bd)){var t=this.observed;if(null!==t&&!t.animationManager.defaultAnimation.isAnimating&&t.ji){kd(this);var e=this.Ha;(t=this.Zb).Oc(!0),t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,e.width,e.height),1>this.updateDelay?KM(this):null!==this.fl&&(t.drawImage(this.fl.Sa,0,0),(e=this.Bb).reset(),1!==this.scale&&e.scale(this.scale),0===this.position.x&&0===this.position.y||e.translate(-this.position.x,-this.position.y),t.scale(this.kc,this.kc),t.transform(e.m11,e.m12,e.m21,e.m22,e.dx,e.dy));for(var n=(e=this.Ua.s).length,i=0;i<n;i++)e[i].tc(t,this);this.bd=this.Ui=!1}}},Ns.prototype.computeBounds=function(){var t=this.observed;if(null===t)return _o;var e=t.documentBounds.copy();return e.Xc(t.viewportBounds),e},Ns.prototype.invalidateViewport=function(){!0!==this.bd&&(this.bd=!0,this.Mb())},Ns.prototype.onViewportBoundsChanged=function(t,e,n,i){this.wb||(ch(this),this.N(),is(this),this.Va(),gh(this),this.kd.scale=n,this.kd.position.x=t.x,this.kd.position.y=t.y,this.kd.bounds.assign(t),this.kd.lx=i,this.P("ViewportBoundsChanged",this.kd,t))},Mt.Object.defineProperties(Ns.prototype,{observed:{get:function(){return this.W},set:function(t){var e=this.W;if(t instanceof Ns&&Y("Overview.observed Diagram may not be an Overview itself: "+t),e!==t){if(null!==e&&(this.remove(this.box),e.Il("ViewportBoundsChanged",this.Gf),e.Il("DocumentBoundsChanged",this.Qd),e.Il("InvalidateDraw",this.Ga),e.Il("AnimationFinished",this.Ff)),this.W=t,null!==t&&(t.wj("ViewportBoundsChanged",this.Gf),t.wj("DocumentBoundsChanged",this.Qd),t.wj("InvalidateDraw",this.Ga),t.wj("AnimationFinished",this.Ff),this.add(this.box)),this.Va(),null===t){this.fl=null;var n=this.Ha,i=this.Zb;n&&i&&(i.setTransform(1,0,0,1,0,0),i.clearRect(0,0,n.width,n.height))}else this.Ga(null),gh(this),this.N();this.g("observed",e,t)}}},box:{get:function(){return this.j},set:function(t){var e=this.j;e!==t&&(this.j=t,this.remove(e),this.add(this.j),gh(this),this.g("box",e,t))}},drawsTemporaryLayers:{get:function(){return this.F},set:function(t){this.F!==t&&(this.F=t,this.redraw())}},drawsGrid:{get:function(){return this.u},set:function(t){this.u!==t&&(this.u=t,this.redraw())}},updateDelay:{get:function(){return this.ga},set:function(t){0>t&&(t=0),this.ga!==t&&(this.ga=t)}}}),Ns.className="Overview",Ht(mh,De),mh.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;if(null===t||!t.allowMove||!t.allowSelect)return!1;var e=t.observed;if(null===e)return!1;var n=t.lastInput;return!(!n.left||t.currentTool!==this&&(!this.isBeyondDragSize()||n.isTouchEvent&&n.timestamp-t.firstInput.timestamp<this.delay)||(null===this.findDraggablePart()&&(this.j=new P((n=e.viewportBounds).width/2,n.height/2),e.position=new P((t=t.firstInput.documentPoint).x-this.j.x,t.y-this.j.y)),0))},mh.prototype.doActivate=function(){this.j=null,De.prototype.doActivate.call(this)},mh.prototype.doUpdateCursor=function(){var t=this.diagram,e=t.box;null!==e&&e.cursor&&(t.currentCursor=e.cursor)},mh.prototype.moveParts=function(){var t=this.diagram,e=t.observed;if(null!==e){var n=t.box;if(null!==n){if(null===this.j){var i=t.firstInput.documentPoint;this.j=new P(i.x-(n=n.location).x,i.y-n.y)}e.position=new P((t=t.lastInput.documentPoint).x-this.j.x,t.y-this.j.y)}}},mh.className="OverviewDraggingTool",$t.prototype.toString=function(){return"CommandHandler"},$t.prototype.Le=function(t){this.H=t},$t.prototype.doKeyDown=function(){var t=this.diagram,e=t.lastInput,n=Do?e.meta:e.control,i=e.shift,l=e.alt,u=e.key;!n||"C"!==u&&"Insert"!==u?n&&"X"===u||i&&"Del"===u?this.canCutSelection()&&this.cutSelection():n&&"V"===u||i&&"Insert"===u?this.canPasteSelection()&&this.pasteSelection():n&&"Y"===u||l&&i&&"Backspace"===u?this.canRedo()&&this.redo():n&&"Z"===u||l&&"Backspace"===u?this.canUndo()&&this.undo():"Del"===u||"Backspace"===u?this.canDeleteSelection()&&this.deleteSelection():n&&"A"===u?this.canSelectAll()&&this.selectAll():"Esc"===u?this.canStopCommand()&&this.stopCommand():"Up"===u?t.allowVerticalScroll&&t.scroll(n?"pixel":"line","up"):"Down"===u?t.allowVerticalScroll&&t.scroll(n?"pixel":"line","down"):"Left"===u?t.allowHorizontalScroll&&t.scroll(n?"pixel":"line","left"):"Right"===u?t.allowHorizontalScroll&&t.scroll(n?"pixel":"line","right"):"PageUp"===u?i&&t.allowHorizontalScroll?t.scroll("page","left"):t.allowVerticalScroll&&t.scroll("page","up"):"PageDown"===u?i&&t.allowHorizontalScroll?t.scroll("page","right"):t.allowVerticalScroll&&t.scroll("page","down"):"Home"===u?n&&t.allowVerticalScroll?t.scroll("document","up"):!n&&t.allowHorizontalScroll&&t.scroll("document","left"):"End"===u?n&&t.allowVerticalScroll?t.scroll("document","down"):!n&&t.allowHorizontalScroll&&t.scroll("document","right"):" "===u?this.canScrollToPart()&&this.scrollToPart():"Subtract"===u?this.canDecreaseZoom()&&this.decreaseZoom():"Add"===u?this.canIncreaseZoom()&&this.increaseZoom():n&&"0"===u?this.canResetZoom()&&this.resetZoom():i&&"Z"===u?this.canZoomToFit()&&this.zoomToFit():n&&!i&&"G"===u?this.canGroupSelection()&&this.groupSelection():n&&i&&"G"===u?this.canUngroupSelection()&&this.ungroupSelection():"F2"===u||e.event&&"F2"===e.event.key?this.canEditTextBlock()&&this.editTextBlock():"ContextMenu"===u||e.event&&"ContextMenu"===e.event.key?this.canShowContextMenu()&&this.showContextMenu():e.bubbles=!0:this.canCopySelection()&&this.copySelection()},$t.prototype.doKeyUp=function(){this.diagram.lastInput.bubbles=!0},$t.prototype.stopCommand=function(){var t=this.diagram,e=t.currentTool;e instanceof Ce&&t.allowSelect&&t.clearSelection(),null!==e&&e.doCancel()},$t.prototype.canStopCommand=function(){return!0},$t.prototype.selectAll=function(){var t=this.diagram;t.N();try{t.currentCursor="wait",t.P("ChangingSelection",t.selection);for(var e=t.parts;e.next();)e.value.isSelected=!0;for(var n=t.nodes;n.next();)n.value.isSelected=!0;for(var i=t.links;i.next();)i.value.isSelected=!0}finally{t.P("ChangedSelection",t.selection),t.currentCursor=""}},$t.prototype.canSelectAll=function(){return this.diagram.allowSelect},$t.prototype.deleteSelection=function(){var t=this.diagram;try{t.currentCursor="wait",t.P("ChangingSelection",t.selection),t.Da("Delete"),t.P("SelectionDeleting",t.selection);for(var e=new Z,n=t.selection.iterator;n.next();)bs(e,n.value,!0,this.deletesTree?1/0:0,!!this.deletesConnectedLinks&&null,function(i){return i.canDelete()});t.hs(e,!0),t.P("SelectionDeleted",e)}finally{t.eb("Delete"),t.P("ChangedSelection",t.selection),t.currentCursor=""}},$t.prototype.canDeleteSelection=function(){var t=this.diagram;return!(t.isReadOnly||t.isModelReadOnly||!t.allowDelete||0===t.selection.count)},$t.prototype.copySelection=function(){var t=this.diagram,e=new Z;for(t=t.selection.iterator;t.next();)bs(e,t.value,!0,this.copiesTree?1/0:0,this.copiesConnectedLinks,function(n){return n.canCopy()});this.copyToClipboard(e)},$t.prototype.canCopySelection=function(){var t=this.diagram;return!(!t.allowCopy||!t.allowClipboard||0===t.selection.count)},$t.prototype.cutSelection=function(){this.copySelection(),this.deleteSelection()},$t.prototype.canCutSelection=function(){var t=this.diagram;return!(t.isReadOnly||t.isModelReadOnly||!t.allowCopy||!t.allowDelete||!t.allowClipboard||0===t.selection.count)},$t.prototype.copyToClipboard=function(t){var e=this.diagram,n=null;if(null===t)fu=null,da="";else{n=e.model;var i=!1,l=!1,u=null;try{n.Bl()&&(i=n.Dj,n.Dj=this.copiesParentKey),n.Nj()&&(l=n.Cj,n.Cj=this.copiesGroupKey),u=e.Ej(t,null,!0)}finally{n.Bl()&&(n.Dj=i),n.Nj()&&(n.Cj=l),(n=new q).addAll(u),fu=n,da=e.model.dataFormat}}e.P("ClipboardChanged",n)},$t.prototype.pasteFromClipboard=function(){var t=new Z,e=fu;if(null===e)return t;var n=this.diagram;if(da!==n.model.dataFormat)return t;var i=n.model,l=!1,u=!1,h=null;try{i.Bl()&&(l=i.Dj,i.Dj=this.copiesParentKey),i.Nj()&&(u=i.Cj,i.Cj=this.copiesGroupKey),h=n.Ej(e,n,!1)}finally{for(i.Bl()&&(i.Dj=l),i.Nj()&&(i.Cj=u),e=h.iterator;e.next();)i=e.key,(n=e.value).location.v()||(i.location.v()?n.location=i.location:!n.position.v()&&i.position.v()&&(n.position=i.position)),t.add(n)}return t},$t.prototype.pasteSelection=function(t){void 0===t&&(t=null);var e=this.diagram;try{e.currentCursor="wait",e.P("ChangingSelection",e.selection),e.Da("Paste");var n=this.pasteFromClipboard();0<n.count&&e.clearSelection(!0);for(var i=n.iterator;i.next();)i.value.isSelected=!0;if(null!==t){var l=e.computePartsBounds(e.selection);l.v()&&fh(e,this.computeEffectiveCollection(e.selection,e.Em),new P(t.x-l.centerX,t.y-l.centerY),e.Em,!1)}e.P("ClipboardPasted",n)}finally{e.eb("Paste"),e.P("ChangedSelection",e.selection),e.currentCursor=""}},$t.prototype.canPasteSelection=function(){var t=this.diagram;return!(t.isReadOnly||t.isModelReadOnly||!t.allowInsert||!t.allowClipboard||null===fu||0===fu.count||da!==t.model.dataFormat)},$t.prototype.undo=function(){this.diagram.undoManager.undo()},$t.prototype.canUndo=function(){var t=this.diagram;return!t.isReadOnly&&!t.isModelReadOnly&&t.allowUndo&&t.undoManager.canUndo()},$t.prototype.redo=function(){this.diagram.undoManager.redo()},$t.prototype.canRedo=function(){var t=this.diagram;return!t.isReadOnly&&!t.isModelReadOnly&&t.allowUndo&&t.undoManager.canRedo()},$t.prototype.decreaseZoom=function(t){void 0===t&&(t=1/this.zoomFactor);var e=this.diagram;e.autoScale===Er&&((t*=e.scale)<e.minScale||t>e.maxScale||(e.scale=t))},$t.prototype.canDecreaseZoom=function(t){void 0===t&&(t=1/this.zoomFactor);var e=this.diagram;return e.autoScale===Er&&!((t*=e.scale)<e.minScale||t>e.maxScale)&&e.allowZoom},$t.prototype.increaseZoom=function(t){void 0===t&&(t=this.zoomFactor);var e=this.diagram;e.autoScale===Er&&((t*=e.scale)<e.minScale||t>e.maxScale||(e.scale=t))},$t.prototype.canIncreaseZoom=function(t){void 0===t&&(t=this.zoomFactor);var e=this.diagram;return e.autoScale===Er&&!((t*=e.scale)<e.minScale||t>e.maxScale)&&e.allowZoom},$t.prototype.resetZoom=function(t){void 0===t&&(t=this.defaultScale);var e=this.diagram;t<e.minScale||t>e.maxScale||(e.scale=t)},$t.prototype.canResetZoom=function(t){void 0===t&&(t=this.defaultScale);var e=this.diagram;return!(t<e.minScale||t>e.maxScale)&&e.allowZoom},$t.prototype.zoomToFit=function(){var t=this.diagram,e=t.animationManager;e.wc(),t.redraw();var n=t.position,i=t.scale;_l(e,"Zoom To Fit"),this.isZoomToFitRestoreEnabled&&i===this.fu&&!isNaN(this.mt)&&t.documentBounds.C(this.du)?(t.scale=this.mt,t.position=this.Yv,this.fu=NaN,this.du=_o):(this.mt=i,this.Yv=n.copy(),t.zoomToFit(),this.fu=t.scale,this.du=t.documentBounds.copy()),Tl(e)},$t.prototype.canZoomToFit=function(){return this.diagram.allowZoom},$t.prototype.scrollToPart=function(t){void 0===t&&(t=null);var e=this.diagram;if(e.Za(),null===t){try{null!==this.Vf&&(this.Vf.next()?t=this.Vf.value:this.Vf=null)}catch{this.Vf=null}null===t&&(0<e.highlighteds.count?this.Vf=e.highlighteds.iterator:0<e.selection.count&&(this.Vf=e.selection.iterator),null!==this.Vf&&this.Vf.next()&&(t=this.Vf.value))}if(null!==t){var n=e.animationManager;_l(n,"Scroll To Part");var i=this.scrollToPartPause;if(0<i){var l=Il(this,t,[t]);if(1===l.length)e.Da(),e.Dr(t.actualBounds),e.eb("Scroll To Part");else{var u=function(){e.Da();for(var p=l.pop();0<l.length&&p instanceof J&&p.isTreeExpanded&&(!(p instanceof yt)||p.isSubGraphExpanded);)p=l.pop();0<l.length?(p instanceof lt&&e.bv(p.actualBounds),p instanceof J&&!p.isTreeExpanded&&(p.isTreeExpanded=!0),p instanceof yt&&!p.isSubGraphExpanded&&(p.isSubGraphExpanded=!0)):(p instanceof lt&&e.Dr(p.actualBounds),e.Il("LayoutCompleted",h)),e.eb("Scroll To Part")},h=function(){Ja(u,(n.isEnabled?n.duration:0)+i)};e.wj("LayoutCompleted",h),u()}}else{var f=e.position.copy();e.Dr(t.actualBounds),f.$a(e.position)&&n.wc()}}},$t.prototype.canScrollToPart=function(t){return void 0===t&&(t=null),(null===t||t instanceof lt)&&(0!==(t=this.diagram).selection.count||0!==t.highlighteds.count)&&t.allowHorizontalScroll&&t.allowVerticalScroll},$t.prototype.collapseTree=function(t){void 0===t&&(t=null);var e=this.diagram;try{e.Da("Collapse Tree"),_l(e.animationManager,"Collapse Tree");var n=new q;if(null!==t&&t.isTreeExpanded)t.collapseTree(),n.add(t);else if(null===t)for(var i=e.selection.iterator;i.next();){var l=i.value;l instanceof J&&l.isTreeExpanded&&(l.collapseTree(),n.add(l))}e.P("TreeCollapsed",n)}finally{e.eb("Collapse Tree")}},$t.prototype.canCollapseTree=function(t){void 0===t&&(t=null);var e=this.diagram;if(e.isReadOnly)return!1;if(null!==t){if(!(t instanceof J&&t.isTreeExpanded))return!1;if(0<t.to().count)return!0}else for(t=e.selection.iterator;t.next();)if((e=t.value)instanceof J&&e.isTreeExpanded&&0<e.to().count)return!0;return!1},$t.prototype.expandTree=function(t){void 0===t&&(t=null);var e=this.diagram;try{e.Da("Expand Tree"),_l(e.animationManager,"Expand Tree");var n=new q;if(null===t||t.isTreeExpanded){if(null===t)for(var i=e.selection.iterator;i.next();){var l=i.value;l instanceof J&&!l.isTreeExpanded&&(l.expandTree(),n.add(l))}}else t.expandTree(),n.add(t);e.P("TreeExpanded",n)}finally{e.eb("Expand Tree")}},$t.prototype.canExpandTree=function(t){void 0===t&&(t=null);var e=this.diagram;if(e.isReadOnly)return!1;if(null!==t){if(!(t instanceof J)||t.isTreeExpanded)return!1;if(0<t.to().count)return!0}else for(t=e.selection.iterator;t.next();)if((e=t.value)instanceof J&&!e.isTreeExpanded&&0<e.to().count)return!0;return!1},$t.prototype.groupSelection=function(){var t=this.diagram,e=t.model;if(e.Oj()){var n=this.archetypeGroupData;if(null!==n){var i=null;try{t.currentCursor="wait",t.P("ChangingSelection",t.selection),t.Da("Group");for(var l=new q,u=t.selection.iterator;u.next();){var h=u.value;h.Tc()&&h.canGroup()&&l.add(h)}for(var f=new q,p=l.iterator;p.next();){var g=p.value;u=!1;for(var m=l.iterator;m.next();)if(g.Md(m.value)){u=!0;break}u||f.add(g)}if(0<f.count){var v=f.first().containingGroup;if(null!==v)for(;null!==v;){l=!1;for(var x=f.iterator;x.next();)if(!x.value.Md(v)){l=!0;break}if(!l)break;v=v.containingGroup}if(n instanceof yt)uo(n),null!==(i=n.copy())&&t.add(i);else if(e.Ku(n)){var D=e.copyNodeData(n);jt(D)&&(e.lf(D),i=t.ci(D))}if(null!==i){null!==v&&this.isValidMember(v,i)&&(i.containingGroup=v);for(var M=f.iterator;M.next();){var T=M.value;this.isValidMember(i,T)&&(T.containingGroup=i)}t.clearSelection(!0),i.isSelected=!0}}t.P("SelectionGrouped",i)}finally{t.eb("Group"),t.P("ChangedSelection",t.selection),t.currentCursor=""}}}},$t.prototype.canGroupSelection=function(){var t=this.diagram;if(t.isReadOnly||t.isModelReadOnly||!t.allowInsert||!t.allowGroup||!t.model.Oj()||null===this.archetypeGroupData)return!1;for(t=t.selection.iterator;t.next();){var e=t.value;if(e.Tc()&&e.canGroup())return!0}return!1},$t.prototype.isValidMember=function(t,e){if(null===e||t===e||e instanceof H)return!1;if(null!==t){if(t===e||t.Md(e))return!1;var n=t.memberValidation;if(null!==n&&!n(t,e)||null===t.data&&null!==e.data||null!==t.data&&null===e.data)return!1}return null===(n=this.memberValidation)||n(t,e)},$t.prototype.ungroupSelection=function(t){void 0===t&&(t=null);var e=this.diagram,n=e.model;if(n.Oj())try{e.currentCursor="wait",e.P("ChangingSelection",e.selection),e.Da("Ungroup");var i=new q;if(null!==t)i.add(t);else for(var l=e.selection.iterator;l.next();){var u=l.value;u instanceof yt&&u.canUngroup()&&i.add(u)}var h=new q;if(0<i.count){e.clearSelection(!0);for(var f=i.iterator;f.next();){var p=f.value;p.expandSubGraph();var g=p.containingGroup,m=null!==g&&null!==g.data?n.ua(g.data):void 0;h.addAll(p.memberParts);for(var v=h.iterator;v.next();){var x=v.value;if(x.isSelected=!0,!(x instanceof H)){var D=x.data;null!==D?n.Po(D,m):x.containingGroup=g}}e.remove(p)}}e.P("SelectionUngrouped",i,h)}finally{e.eb("Ungroup"),e.P("ChangedSelection",e.selection),e.currentCursor=""}},$t.prototype.canUngroupSelection=function(t){void 0===t&&(t=null);var e=this.diagram;if(e.isReadOnly||e.isModelReadOnly||!e.allowDelete||!e.allowUngroup||!e.model.Oj())return!1;if(null!==t){if(!(t instanceof yt))return!1;if(t.canUngroup())return!0}else for(t=e.selection.iterator;t.next();)if((e=t.value)instanceof yt&&e.canUngroup())return!0;return!1},$t.prototype.addTopLevelParts=function(t,e){var n=!0;for(t=Hd(t).iterator;t.next();){var i=t.value;null!==i.containingGroup&&(!e||this.isValidMember(null,i)?i.containingGroup=null:n=!1)}return n},$t.prototype.collapseSubGraph=function(t){void 0===t&&(t=null);var e=this.diagram;try{e.Da("Collapse SubGraph"),_l(e.animationManager,"Collapse SubGraph");var n=new q;if(null!==t&&t.isSubGraphExpanded)t.collapseSubGraph(),n.add(t);else if(null===t)for(var i=e.selection.iterator;i.next();){var l=i.value;l instanceof yt&&l.isSubGraphExpanded&&(l.collapseSubGraph(),n.add(l))}e.P("SubGraphCollapsed",n)}finally{e.eb("Collapse SubGraph")}},$t.prototype.canCollapseSubGraph=function(t){void 0===t&&(t=null);var e=this.diagram;if(e.isReadOnly)return!1;if(null!==t)return!!(t instanceof yt&&t.isSubGraphExpanded);for(t=e.selection.iterator;t.next();)if((e=t.value)instanceof yt&&e.isSubGraphExpanded)return!0;return!1},$t.prototype.expandSubGraph=function(t){void 0===t&&(t=null);var e=this.diagram;try{e.Da("Expand SubGraph"),_l(e.animationManager,"Expand SubGraph");var n=new q;if(null===t||t.isSubGraphExpanded){if(null===t)for(var i=e.selection.iterator;i.next();){var l=i.value;l instanceof yt&&!l.isSubGraphExpanded&&(l.expandSubGraph(),n.add(l))}}else t.expandSubGraph(),n.add(t);e.P("SubGraphExpanded",n)}finally{e.eb("Expand SubGraph")}},$t.prototype.canExpandSubGraph=function(t){void 0===t&&(t=null);var e=this.diagram;if(e.isReadOnly)return!1;if(null!==t)return t instanceof yt&&!t.isSubGraphExpanded;for(t=e.selection.iterator;t.next();)if((e=t.value)instanceof yt&&!e.isSubGraphExpanded)return!0;return!1},$t.prototype.editTextBlock=function(t){void 0===t&&(t=null);var e=this.diagram,n=e.toolManager.findTool("TextEditing");if(null!==n){if(null===t){t=null;for(var i=e.selection.iterator;i.next();){var l=i.value;if(l.canEdit()){t=l;break}}if(null===t)return;t=t.vl(function(u){return u instanceof Wt&&u.editable})}null!==t&&(e.currentTool=null,n.textBlock=t,e.currentTool=n)}},$t.prototype.canEditTextBlock=function(t){void 0===t&&(t=null);var e=this.diagram;if(e.isReadOnly||e.isModelReadOnly||!e.allowTextEdit||null===e.toolManager.findTool("TextEditing"))return!1;if(null!==t){if(!(t instanceof Wt))return!1;if(null!==(t=t.part)&&t.canEdit())return!0}else for(e=e.selection.iterator;e.next();)if((t=e.value).canEdit()&&null!==(t=t.vl(function(n){return n instanceof Wt&&n.editable})))return!0;return!1},$t.prototype.showContextMenu=function(t){var e=this.diagram,n=e.toolManager.findTool("ContextMenu");if(null!==n&&(void 0===t&&(t=0<e.selection.count?e.selection.first():e),null!==(t=n.findObjectWithContextMenu(t)))){var i=e.lastInput,l=null;t instanceof ot?l=t.ia(ut):e.viewportBounds.ba(i.documentPoint)||(l=new P((l=e.viewportBounds).x+l.width/2,l.y+l.height/2)),null!==l&&(i.viewPoint=e.Ro(l),i.documentPoint=l,i.left=!1,i.right=!0,i.up=!0),e.currentTool=n,Dx(n,!1,t)}},$t.prototype.canShowContextMenu=function(t){var e=this.diagram,n=e.toolManager.findTool("ContextMenu");return null!==n&&(void 0===t&&(t=0<e.selection.count?e.selection.first():e),null!==n.findObjectWithContextMenu(t))},$t.prototype.computeEffectiveCollection=function(t,e){var n=this.diagram,i=n.toolManager.findTool("Dragging"),l=n.currentTool===i;if(void 0===e&&(e=l?i.dragOptions:n.Em),i=new vt,null===t)return i;for(var u=t.iterator;u.next();)rs(n,i,u.value,l,e);if(null!==n.draggedLink&&e.dragsLink)return i;for(u=t.iterator;u.next();)(t=u.value)instanceof H&&((null===(e=t.fromNode)||i.contains(e))&&(null===(e=t.toNode)||i.contains(e))||i.remove(t));return i},Mt.Object.defineProperties($t.prototype,{diagram:{get:function(){return this.H}},copiesClipboardData:{get:function(){return this.m},set:function(t){this.m=t}},copiesConnectedLinks:{get:function(){return this.u},set:function(t){this.u=t}},deletesConnectedLinks:{get:function(){return this.Ga},set:function(t){this.Ga=t}},copiesTree:{get:function(){return this.ga},set:function(t){this.ga=t}},deletesTree:{get:function(){return this.hb},set:function(t){this.hb=t}},copiesParentKey:{get:function(){return this.W},set:function(t){this.W=t}},copiesGroupKey:{get:function(){return this.F},set:function(t){this.F=t}},archetypeGroupData:{get:function(){return this.j},set:function(t){this.j=t}},memberValidation:{get:function(){return this.dj},set:function(t){this.dj=t}},defaultScale:{get:function(){return this.diagram.defaultScale},set:function(t){this.diagram.defaultScale=t}},zoomFactor:{get:function(){return this.Db},set:function(t){1<t||Y("zoomFactor must be larger than 1.0, not: "+t),this.Db=t}},isZoomToFitRestoreEnabled:{get:function(){return this.cb},set:function(t){this.cb=t}},scrollToPartPause:{get:function(){return this.nb},set:function(t){this.nb=t}}}),$t.className="CommandHandler",kc=function(){return new $t},ot.prototype.cloneProtected=function(t){t.o=6144|this.o,t.tb=this.tb,t.Yb=this.Yb,t.pa.assign(this.pa),t.$c=this.$c.J(),t.Ib=null!==this.Ib?this.Ib.copy():null,t.xa=this.xa,t.Gb=this.Gb,t.Ag=this.Ag.J(),t.qc.assign(this.qc),t.Eb.assign(this.Eb),t.bc.assign(this.bc),t.Gn=this.Gn,null!==this.aa&&(t.aa=this.aa.copy()),t.Fb=this.Fb.J(),t.fk=this.fk.J(),t.Ln=this.Ln,t.rg=this.rg,null!==this.Ra&&(t.Ra=this.Ra.copy()),null!==this.A&&(t.A=this.A.ic?this.A:this.A.copy()),null!==this.sh&&(t.sh=mc(this.sh)),null!==this.ib&&(t.ib=this.ib.copy())},ot.prototype.zw=function(t){var e=this.sh;if(yn(e)){for(var n=0;n<e.length;n++)if(e[n]===t)return}else this.sh=e=[];e.push(t)},ot.prototype.qf=function(t){t.Hn=null,t.jj=null,t.w()},ot.prototype.clone=function(){var t=new this.constructor;if(this.cloneProtected(t),null!==this.sh)for(var e=0;e<this.sh.length;e++){var n=this.sh[e];t[n]=this[n]}return t},ot.prototype.copy=function(){return this.clone()},(_=ot.prototype).ob=function(t){t.classType===H?0===t.name.indexOf("Orient")?this.segmentOrientation=t:Y("Unknown Link enum value for GraphObject.segmentOrientation property: "+t):t.classType===ot&&(this.stretch=t)},_.toString=function(){return Ys(this.constructor)+"#"+pn(this)},_.ih=function(){null!==this.A&&(this.A.ic=!0)},_.Rc=function(){if(null===this.aa){var t=new jg;t.Qi=Ne,t.tj=Ne,t.Oi=10,t.rj=10,t.Pi=0,t.sj=0,this.aa=t}},_.bb=function(t,e,n,i,l,u,h){var f=this.part;if(null!==f&&(f.$j(t,e,n,i,l,u,h),n===this&&t===ee&&mu(this)&&gu(this,f,e),u=this.diagram,null===this.animationTriggers||null===u||!u.ji||u.undoManager.isUndoingRedoing||u.animationManager.lm||null!==(t=this.animationTriggers.get(e))&&u.animationManager.isEnabled&&!u.animationManager.isTicking&&(null===this.Mn&&(this.Mn=new vt),h=0===u.undoManager.transactionLevel,t.startCondition===Id?h=!0:t.startCondition===_g&&(h=!1),h?(function VM(t,e){null!==(t=t.hk)&&(t.duration&&(e.duration=t.duration),t.finished&&(e.finished=t.finished),t.easing&&(e.easing=t.easing))}(t,u=new Cn),null!==(h=this.Mn.get(t))&&h.stop(),this.Mn.add(t,u),u.au=this,u.rw=t,u.add(this,e,i,l),u.start()):(_l(u.animationManager,"Trigger"),u.animationManager.defaultAnimation.add(this,e,i,l))),this instanceof $&&n===f&&0!=(16777216&f.o)&&null!==f.data))for(i=(n=this.R.s).length,l=0;l<i;l++)(f=n[l])instanceof $&&Zn(f,function(p){null!==p.data&&0!=(16777216&p.o)&&p.Ka(e)})},_.Hr=function(t){return this.bindingId===t?this:null},_.g=function(t,e,n){this.bb(ee,t,this,e,n)},_.ve=function(t,e,n,i){var l=this.qc;if(l.h(t,e,n,i),1!==this.xa||0!==this.Gb){null===this.Ib&&(this.Ib=new Dt);var u=this.Ib;u.reset(),this.Qn(u,t,e,n,i),u.So(l)}},_.Vw=function(t,e,n){if(!1===this.pickable)return!1;var i=this.naturalBounds;return e=t.rf(e),n?Kn(t.x,t.y,0,0,0,i.height)<=e||Kn(t.x,t.y,0,i.height,i.width,i.height)<=e||Kn(t.x,t.y,i.width,i.height,i.width,0)<=e||Kn(t.x,t.y,i.width,0,0,0)<=e:t.td(0,0)<=e&&t.td(0,i.height)<=e&&t.td(i.width,0)<=e&&t.td(i.width,i.height)<=e},_.ke=function(){return!0},_.ba=function(t){var e=P.alloc();e.assign(t),this.transform.Fa(e);var n=this.actualBounds;if(!n.v())return P.free(e),!1;var i=this.diagram;if(null!==i&&i.jt){var l=i.yl("extraTouchThreshold"),u=i.yl("extraTouchArea"),h=u/2,f=this.naturalBounds,p=1/(i=this.uf()*i.scale);if(f.width*i<l&&f.height*i<l)return t=ur(n.x-h*p,n.y-h*p,n.width+u*p,n.height+u*p,e.x,e.y),P.free(e),t}return l=!1,(this instanceof Pt||this instanceof wt?ur(n.x-5,n.y-5,n.width+10,n.height+10,e.x,e.y):n.ba(e))&&(l=!(this.ib&&!this.ib.ba(e))&&(!!(null!==this.areaBackground&&n.ba(e)||null!==this.Yb&&this.bc.ba(t))||this.Xg(t))),P.free(e),l},_.Xg=function(t){var e=this.naturalBounds;return ur(0,0,e.width,e.height,t.x,t.y)},_.Ee=function(t){if(0===this.angle)return this.actualBounds.Ee(t);var e=this.naturalBounds;e=B.allocAt(0,0,e.width,e.height);var n=this.transform,i=!1,l=P.allocAt(t.x,t.y);return e.ba(n.Ld(l))&&(l.h(t.x,t.bottom),e.ba(n.Ld(l))&&(l.h(t.right,t.bottom),e.ba(n.Ld(l))&&(l.h(t.right,t.y),e.ba(n.Ld(l))&&(i=!0)))),P.free(l),B.free(e),i},_.Wg=function(t,e){if(void 0===e)return t.Ee(this.actualBounds);var n=this.naturalBounds,i=!1,l=P.allocAt(0,0);return t.ba(e.Fa(l))&&(l.h(0,n.height),t.ba(e.Fa(l))&&(l.h(n.width,n.height),t.ba(e.Fa(l))&&(l.h(n.width,0),t.ba(e.Fa(l))&&(i=!0)))),P.free(l),i},_.Sc=function(t,e){if(void 0===e&&(e=this.transform,0===this.angle))return t.Sc(this.actualBounds);var n=this.naturalBounds,i=P.allocAt(0,0),l=P.allocAt(0,n.height),u=P.allocAt(n.width,n.height),h=P.allocAt(n.width,0),f=!1;if(t.ba(e.Fa(i))||t.ba(e.Fa(l))||t.ba(e.Fa(u))||t.ba(e.Fa(h)))f=!0;else{n=B.allocAt(0,0,n.width,n.height);var p=P.allocAt(t.x,t.y);n.ba(e.Ld(p))?f=!0:(p.h(t.x,t.bottom),n.ba(e.Ld(p))?f=!0:(p.h(t.right,t.bottom),n.ba(e.Ld(p))?f=!0:(p.h(t.right,t.y),n.ba(e.Ld(p))&&(f=!0)))),P.free(p),B.free(n),!f&&(F.Rr(t,i,l)||F.Rr(t,l,u)||F.Rr(t,u,h)||F.Rr(t,h,i))&&(f=!0)}return P.free(i),P.free(l),P.free(u),P.free(h),f},_.ia=function(t,e){if(void 0===e&&(e=new P),t instanceof it){var n=this.naturalBounds;e.h(t.x*n.width+t.offsetX,t.y*n.height+t.offsetY)}else e.set(t);return this.ge.Fa(e),e},_.gi=function(t){void 0===t&&(t=new B);var e=this.naturalBounds,n=this.ge,i=P.allocAt(0,0).transform(n);return t.h(i.x,i.y,0,0),i.h(e.width,0).transform(n),He(t,i.x,i.y,0,0),i.h(e.width,e.height).transform(n),He(t,i.x,i.y,0,0),i.h(0,e.height).transform(n),He(t,i.x,i.y,0,0),P.free(i),t},_.fi=function(){var t=this.ge;return 1===t.m11&&0===t.m12?t=0:0>(t=180*Math.atan2(t.m12,t.m11)/Math.PI)&&(t+=360),t},_.uf=function(){if(0==(4096&this.o))return this.yk;var t=this.xa;return null!==this.panel?t*this.panel.uf():t},_.Nr=function(t,e){return void 0===e&&(e=new P),e.assign(t),this.ge.Ld(e),e},_.Or=function(t,e,n){return this.Kj(t.x,t.y,e.x,e.y,n)},_.Kj=function(t,e,n,i,l){var u=this.transform,h=1/(u.m11*u.m22-u.m12*u.m21),f=u.m22*h,p=-u.m12*h,g=-u.m21*h,m=u.m11*h,v=h*(u.m21*u.dy-u.m22*u.dx),x=h*(u.m12*u.dx-u.m11*u.dy);return null!==this.areaBackground?F.wf((u=this.actualBounds).left,u.top,u.right,u.bottom,t,e,n,i,l):(h=t*f+e*g+v,t=t*p+e*m+x,e=n*f+i*g+v,n=n*p+i*m+x,l.h(0,0),n=F.wf(0,0,(i=this.naturalBounds).width,i.height,h,t,e,n,l),l.transform(u),n)},ot.prototype.measure=function(t,e,n,i){if(!1!==qs(this)){var l=this.Ag,u=l.right+l.left;l=l.top+l.bottom,t=Math.max(t-u,0),e=Math.max(e-l,0),n=Math.max((n||0)-u,0),i=Math.max((i||0)-l,0),l=this.desiredSize;var h=0;this instanceof wt&&(h=this.strokeWidth),90===(u=this.angle)||270===u?(t=isFinite(l.height)?l.height+h:t,e=isFinite(l.width)?l.width+h:e):(t=isFinite(l.width)?l.width+h:t,e=isFinite(l.height)?l.height+h:e),l=n||0,h=i||0;var f=this instanceof $;switch(os(this,!0)){case Le:h=l=0,f&&(e=t=1/0);break;case Ve:isFinite(t)&&t>n&&(l=t),isFinite(e)&&e>i&&(h=e);break;case Mn:isFinite(t)&&t>n&&(l=t),h=0,f&&(e=1/0);break;case Vn:isFinite(e)&&e>i&&(h=e),l=0,f&&(t=1/0)}var p=this.minSize;l>(f=this.maxSize).width&&p.width<f.width&&(l=f.width),h>f.height&&p.height<f.height&&(h=f.height),n=Math.max(l/this.scale,p.width),i=Math.max(h/this.scale,p.height),f.width<n&&(n=Math.min(p.width,n)),f.height<i&&(i=Math.min(p.height,i)),t=Math.min(f.width,t),e=Math.min(f.height,e),t=Math.max(n,t),e=Math.max(i,e),(90===u||270===u)&&(u=t,t=e,e=u,u=n,n=i,i=u),this.qc.ja(),this.El(t,e,n,i),this.qc.freeze(),this.qc.v()||Y("Non-real measuredBounds has been set. Object "+this+", measuredBounds: "+this.qc.toString()),Qi(this,!1)}},ot.prototype.El=function(){},ot.prototype.li=function(){return!1},ot.prototype.arrange=function(t,e,n,i,l){this.Jk();var u=B.alloc();u.assign(this.Eb),this.Eb.ja(),!1===Xn(this)?this.Eb.h(t,e,n,i):this.Vg(t,e,n,i),this.Eb.freeze(),this.ib=void 0===l?null:l,n=!1,void 0!==l?n=!0:(null===(l=this.panel)||l.type!==$.TableRow&&l.type!==$.TableColumn||(l=l.panel),null!==l&&(l=l.bc,i=this.measuredBounds,null!==this.areaBackground&&(i=this.Eb),n=e+i.height,i=t+i.width,n=!(0<=t+.05&&i<=l.width+.05&&0<=e+.05&&n<=l.height+.05),this instanceof Wt&&(this.kq>(t=this.naturalBounds).height||this.yb>t.width))&&(n=!0)),this.o=n?256|this.o:-257&this.o,this.Eb.v()||Y("Non-real actualBounds has been set. Object "+this+", actualBounds: "+this.Eb.toString()),this.Fl(u,this.Eb),As(this,!1),B.free(u)},(_=ot.prototype).Vg=function(){},_.Fl=function(t,e){var n=this.part;null!==n&&null!==n.diagram&&(n.selectionObject!==this&&n.resizeObject!==this&&n.rotateObject!==this||d0(n,!0),this.N(),wc(t,e)||(n.dh(),this.wn(n)))},_.wn=function(t){null!==this.portId&&(d0(t,!0),t instanceof J&&h1(t,this))},_.tc=function(t,e){if(this.visible){var n=this.opacity;if(0!==n){var i=this instanceof $&&(this.type===$.TableRow||this.type===$.TableColumn),l=this.Eb;if(i||0!==l.width&&0!==l.height&&!isNaN(l.x)&&!isNaN(l.y)){var u=1;if(1!==n&&(t.globalAlpha=(u=t.globalAlpha)*n),i){l=this.Eb,i=this.bc;var h=this.areaBackground,f=this.Yb;null===h&&null===f||t.Pc(),null!==h&&(gi(this,t,h,!0,!0,i,l),h instanceof bt&&h.type===Ui?(t.beginPath(),t.rect(l.x,l.y,l.width,l.height),t.sf(h)):t.fillRect(l.x,l.y,l.width,l.height)),null!==f&&(gi(this,t,f,!0,!1,i,l),f instanceof bt&&f.type===Ui?(t.beginPath(),t.rect(l.x,l.y,l.width,l.height),t.sf(f)):t.fillRect(l.x,l.y,l.width,l.height)),this.ai(t,e)}else if(!this.Qw(t,e)){this instanceof H&&this.Rj(!1),i=this.transform,h=this.panel,0!=(4096&this.o)&&Fg(this);var p=this.part;f=!1;var v,g=0;if(p&&e.Ge("drawShadows")&&(f=p.isShadowed)){var m=p.shadowOffset;g=Math.max(m.y,m.x)*e.scale*e.kc}if(m=this.li(),!(v=e.Vi||!m)){var O,x=this.naturalBounds,D=(v=this.lh).m11,M=v.m21,T=v.dx,N=v.m12,I=v.m22,k=v.dy,L=O=0;v=O*D+L*M+T;var b=O*N+L*I+k,U=(O=x.width+g)*D+(L=0)*M+T;O=O*N+L*I+k,L=Math.min(v,U);var X=Math.min(b,O),nt=Math.max(v+0,U)-L,et=Math.max(b+0,O)-X;v=L,b=X,U=(O=x.width+g)*D+(L=x.height+g)*M+T,O=O*N+L*I+k,L=Math.min(v,U),X=Math.min(b,O),nt=Math.max(v+nt,U)-L,et=Math.max(b+et,O)-X,v=L,b=X,U=(O=0)*D+(L=x.height+g)*M+T,O=O*N+L*I+k,L=Math.min(v,U),X=Math.min(b,O),nt=Math.max(v+nt,U)-L,et=Math.max(b+et,O)-X,b=X,D=(g=e.viewportBounds).y,v=!((v=L)>g.width+(x=g.x)||x>nt+v||b>g.height+D||D>et+b)}if(v){if(v=0!=(256&this.o),t.clipInsteadOfFill&&(v=!1),this instanceof Wt&&(t.font=this.font),v){if(b=h.ke()?h.naturalBounds:h.actualBounds,null!==this.ib?(nt=(x=this.ib).x,et=x.y,g=x.width,x=x.height):(nt=Math.max(l.x,b.x),et=Math.max(l.y,b.y),g=Math.min(l.right,b.right)-nt,x=Math.min(l.bottom,b.bottom)-et),nt>l.width+l.x||l.x>b.width+b.x)return void(1!==n&&(t.globalAlpha=u));t.save(),t.beginPath(),t.rect(nt,et,g,x),t.clip()}if(m){if(!p.isVisible())return void(1!==n&&(t.globalAlpha=u));f&&(t.iv((b=p.shadowOffset).x*e.scale*e.kc,b.y*e.scale*e.kc,p.shadowBlur),ks(t),t.shadowColor=p.shadowColor)}f&&!0===this.shadowVisible?ks(t):f&&!1===this.shadowVisible&&el(t),p=this.naturalBounds,null!==this.areaBackground&&(t.Pc(),gi(this,t,this.areaBackground,!0,!0,p,l),this.areaBackground instanceof bt&&this.areaBackground.type===Ui?(t.beginPath(),t.rect(l.x,l.y,l.width,l.height),t.sf(this.areaBackground)):t.fillRect(l.x,l.y,l.width,l.height)),t.transform(i.m11,i.m12,i.m21,i.m22,i.dx,i.dy),f&&(null!==h&&0!=(512&h.o)||null!==h&&(h.type===$.Auto||h.type===$.Spot)&&h.vb()!==this)&&null===this.shadowVisible&&el(t),null!==this.Yb&&(t.Pc(),ga(this,t,p,l)),f&&(null!==this.Yb||null!==this.areaBackground||null!==h&&0!=(512&h.o)||null!==h&&(h.type===$.Auto||h.type===$.Spot)&&h.vb()!==this)?(bv(this,!0),null===this.shadowVisible&&el(t)):bv(this,!1),this.ai(t,e),f&&0!=(512&this.o)&&ks(t),m&&f&&el(t),v&&(t.restore(),t.Oc(this instanceof $)),i.Ur()||t.transform(i.m22*(e=1/(i.m11*i.m22-i.m12*i.m21)),-i.m12*e,-i.m21*e,i.m11*e,e*(i.m21*i.dy-i.m22*i.dx),e*(i.m12*i.dx-i.m11*i.dy))}}1!==n&&(t.globalAlpha=u)}}}},_.Qw=function(){return!1},_.ai=function(){},_.jg=function(t){if(t instanceof $)t:{if(this!==t&&null!==t)for(var e=this.panel;null!==e;){if(e===t){t=!0;break t}e=e.panel}t=!1}else t=!1;return t},_.zf=function(){if(!this.visible)return!1;var t=this.panel;return null===t||t.zf()},_.yf=function(){for(var t=this instanceof $?this:this.panel;null!==t&&t.isEnabled;)t=t.panel;return null===t},_.Qn=function(t,e,n,i,l){if(1!==this.xa&&t.scale(this.xa),0!==this.Gb){var u=P.alloc();u.pi(e,n,i,l,ut),t.rotate(this.Gb,u.x,u.y),P.free(u)}},_.w=function(t){if(!qs(this)){void 0===t&&(t=!1),Qi(this,!0),As(this,!0);var e=this.panel;null===e||t||e.w()}},_.Mj=function(){qs(this)||(Qi(this,!0),As(this,!0))},_.Jk=function(){0==(2048&this.o)&&(Yc(this,!0),ma(this,!0))},_.Iu=function(){ma(this,!0)},_.N=function(){var t=this.part;null!==t&&t.N()},_.ni=function(t){this.Uf=t},_.ns=function(){},_.fv=function(t){return this.pa=t,zd(this),!0},_.Ul=function(t,e){(this.pa.x!==t||this.pa.y!==e)&&(this.pa.h(t,e),this.Jk())},_.Sv=function(){return 0},_.bind=function(t,e,n,i){var l=null;return(l="string"==typeof t?new de(t,e,n,i):t).sd=this,null!==(t=this.Yg())&&Yg(t)&&Y("Cannot add a Binding to a template that has already been copied: "+l),null===this.localBindings&&(this.localBindings=new q),this.localBindings.add(l),this},_.set=function(t){return Object.assign(this,t),this},_.ku=function(t){return Ux(this,t),this},_.apply=function(t){return t(this),this},_.Vl=function(t){return hh(this,t),this},_.Yy=function(){return this.Yg()},_.Yg=function(){for(var t=this instanceof $?this:this.panel;null!==t;){if(null!==t.allBindings)return t;t=t.panel}return null},_.mv=function(t){return t.sd=this,null===this.animationTriggers&&(this.animationTriggers=new vt),this.animationTriggers.add(t.propertyName,t),this},Mt.Object.defineProperties(ot.prototype,{bindingId:{get:function(){return null!==this.A?this.A.bp:-1},set:function(t){this.bindingId!==t&&(null===this.A&&(this.A=new wa),this.A.bp=t)}},localBindings:{get:function(){return null!==this.A?this.A.Ff:null},set:function(t){this.localBindings!==t&&(null===this.A&&(this.A=new wa),this.A.Ff=t)}},srcBindings:{get:function(){return null!==this.A?this.A.Wo:null},set:function(t){this.srcBindings!==t&&(null===this.A&&(this.A=new wa),this.A.Wo=t)}},shadowVisible:{get:function(){return null!==this.A?this.A.wi:null},set:function(t){var e=this.shadowVisible;e!==t&&(rn(this),this.A.wi=t,this.N(),this.g("shadowVisible",e,t))}},enabledChanged:{get:function(){return null!==this.A?this.A.Hc:null},set:function(t){var e=this.enabledChanged;e!==t&&(rn(this),this.A.Hc=t,this.g("enabledChanged",e,t))}},segmentOrientation:{get:function(){return null!==this.Ra?this.Ra.Oq:ri},set:function(t){var e=this.segmentOrientation;e!==t&&(null===this.Ra&&(this.Ra=new vu),this.Ra.Oq=t,this.w(),this.g("segmentOrientation",e,t),t===ri&&(this.angle=0))}},segmentIndex:{get:function(){return null!==this.Ra?this.Ra.u:-1/0},set:function(t){t=Math.round(t);var e=this.segmentIndex;e!==t&&(null===this.Ra&&(this.Ra=new vu),this.Ra.u=t,this.w(),this.g("segmentIndex",e,t))}},segmentFraction:{get:function(){return null!==this.Ra?this.Ra.m:0},set:function(t){isNaN(t)||0>t?t=0:1<t&&(t=1);var e=this.segmentFraction;e!==t&&(null===this.Ra&&(this.Ra=new vu),this.Ra.m=t,this.w(),this.g("segmentFraction",e,t))}},segmentOffset:{get:function(){return null!==this.Ra?this.Ra.F:wl},set:function(t){var e=this.segmentOffset;e.C(t)||(t=t.J(),null===this.Ra&&(this.Ra=new vu),this.Ra.F=t,this.w(),this.g("segmentOffset",e,t))}},stretch:{get:function(){return null!==this.A?this.A.$f:$r},set:function(t){var e=this.stretch;e!==t&&(rn(this),this.A.$f=t,this.w(),this.g("stretch",e,t))}},name:{get:function(){return null!==this.A?this.A.va:""},set:function(t){var e=this.name;e!==t&&(rn(this),this.A.va=t,null!==this.part&&(this.part.Kh=null),this.g("name",e,t))}},opacity:{get:function(){return this.tb},set:function(t){var e=this.tb;e!==t&&((0>t||1<t)&&le(t,"0 <= value <= 1",ot,"opacity"),this.tb=t,this.g("opacity",e,t),e=this.part,null!==(t=this.diagram)&&null!==e&&t.N(Sh(e,e.actualBounds)))}},visible:{get:function(){return 0!=(1&this.o)},set:function(t){var e=0!=(1&this.o);e!==t&&(this.o^=1,this.g("visible",e,t),null!==(e=this.panel)?e.w():this.li()&&this.Ub(t),this.N(),Rv(this))}},pickable:{get:function(){return 0!=(2&this.o)},set:function(t){var e=0!=(2&this.o);e!==t&&(this.o^=2,this.g("pickable",e,t))}},fromLinkableDuplicates:{get:function(){return 0!=(4&this.o)},set:function(t){var e=0!=(4&this.o);e!==t&&(this.o^=4,this.g("fromLinkableDuplicates",e,t))}},fromLinkableSelfNode:{get:function(){return 0!=(8&this.o)},set:function(t){var e=0!=(8&this.o);e!==t&&(this.o^=8,this.g("fromLinkableSelfNode",e,t))}},toLinkableDuplicates:{get:function(){return 0!=(16&this.o)},set:function(t){var e=0!=(16&this.o);e!==t&&(this.o^=16,this.g("toLinkableDuplicates",e,t))}},toLinkableSelfNode:{get:function(){return 0!=(32&this.o)},set:function(t){var e=0!=(32&this.o);e!==t&&(this.o^=32,this.g("toLinkableSelfNode",e,t))}},isPanelMain:{get:function(){return 0!=(64&this.o)},set:function(t){var e=0!=(64&this.o);e!==t&&(this.o^=64,this.w(),this.g("isPanelMain",e,t))}},isActionable:{get:function(){return 0!=(128&this.o)},set:function(t){var e=0!=(128&this.o);e!==t&&(this.o^=128,this.g("isActionable",e,t))}},areaBackground:{get:function(){return null!==this.A?this.A.nb:null},set:function(t){var e=this.areaBackground;e!==t&&(null!==t&&xu(t,"GraphObject.areaBackground"),t instanceof bt&&t.freeze(),rn(this),this.A.nb=t,this.N(),this.g("areaBackground",e,t))}},background:{get:function(){return this.Yb},set:function(t){var e=this.Yb;e!==t&&(null!==t&&xu(t,"GraphObject.background"),t instanceof bt&&t.freeze(),this.Yb=t,this.N(),this.g("background",e,t))}},part:{get:function(){if(this.li())return this;if(null!==this.jj)return this.jj;var t;for(t=this.panel;t;){if(t instanceof lt)return this.jj=t;t=t.panel}return null}},svg:{get:function(){return this.kr},set:function(t){this.kr=t}},panel:{get:function(){return this.Uf}},layer:{get:function(){var t=this.part;return null!==t?t.layer:null}},diagram:{get:function(){var t=this.part;return null!==t?t.diagram:null}},position:{get:function(){return this.pa},set:function(t){var e=t.x,n=t.y,i=this.pa,l=i.x;i=i.y,(l===e||isNaN(l)&&isNaN(e))&&(i===n||isNaN(i)&&isNaN(n))?this.ns():(t=t.copy(),this.fv(t,l,i)&&this.g("position",new P(l,i),t))}},actualBounds:{get:function(){return this.Eb}},scale:{get:function(){return this.xa},set:function(t){var e=this.xa;e!==t&&(0>=t&&Y("GraphObject.scale for "+this+" must be greater than zero, not: "+t),this.xa=t,this.w(),this.g("scale",e,t))}},angle:{get:function(){return this.Gb},set:function(t){var e=this.Gb;e!==t&&(0>(t%=360)&&(t+=360),e!==t&&(this.Gb=t,Rv(this),this.w(),this.g("angle",e,t)))}},desiredSize:{get:function(){return this.$c},set:function(t){var e=t.width,n=t.height,i=this.$c,l=i.width,u=i.height;(l===e||isNaN(l)&&isNaN(e))&&(u===n||isNaN(u)&&isNaN(n))||(this.$c=t=t.J(),this.w(),this instanceof wt&&this.mc(),this.g("desiredSize",i,t),mu(this)&&null!==(t=this.part)&&(gu(this,t,"width"),gu(this,t,"height")))}},width:{get:function(){return this.$c.width},set:function(t){var e=this.$c.width;e===t||isNaN(e)&&isNaN(t)||(e=this.$c,this.$c=t=new dt(t,this.$c.height).freeze(),this.w(),this instanceof wt&&this.mc(),this.g("desiredSize",e,t),mu(this)&&null!==(t=this.part)&&gu(this,t,"width"))}},height:{get:function(){return this.$c.height},set:function(t){var e=this.$c.height;e===t||isNaN(e)&&isNaN(t)||(e=this.$c,this.$c=t=new dt(this.$c.width,t).freeze(),this.w(),this instanceof wt&&this.mc(),this.g("desiredSize",e,t),mu(this)&&null!==(t=this.part)&&gu(this,t,"height"))}},minSize:{get:function(){return null!==this.A?this.A.u:th},set:function(t){var e=this.minSize;e.C(t)||(t=t.copy(),isNaN(t.width)&&(t.width=0),isNaN(t.height)&&(t.height=0),t.freeze(),rn(this),this.A.u=t,this.w(),this.g("minSize",e,t))}},maxSize:{get:function(){return null!==this.A?this.A.m:Qo},set:function(t){var e=this.maxSize;e.C(t)||(t=t.copy(),isNaN(t.width)&&(t.width=1/0),isNaN(t.height)&&(t.height=1/0),t.freeze(),rn(this),this.A.m=t,this.w(),this.g("maxSize",e,t))}},measuredBounds:{get:function(){return this.qc}},naturalBounds:{get:function(){return this.bc}},margin:{get:function(){return this.Ag},set:function(t){"number"==typeof t&&(t=new Bt(t));var e=this.Ag;e.C(t)||(this.Ag=t=t.J(),this.w(),this.g("margin",e,t))}},transform:{get:function(){return 0!=(2048&this.o)&&Fg(this),this.Bb}},ge:{get:function(){return 0!=(4096&this.o)&&Fg(this),this.lh}},animationTriggers:{get:function(){return null!==this.A?this.A.cb:null},set:function(t){this.animationTriggers!==t&&(rn(this),this.A.cb=t)}},reshapingBehavior:{get:function(){return null!==this.A?this.A.ui:Le},set:function(t){this.reshapingBehavior!==t&&(rn(this),this.A.ui=t)}},alignment:{get:function(){return this.Fb},set:function(t){var e=this.Fb;e.C(t)||(t.Fc()&&!t.Sb()&&Y("GraphObject.alignment for "+this+" must be a real Spot or Spot.Default, not: "+t),this.Fb=t=t.J(),zd(this),this.g("alignment",e,t))}},column:{get:function(){return this.rg},set:function(t){t=Math.round(t);var e=this.rg;e!==t&&(0>t&&le(t,">= 0",ot,"column"),this.rg=t,this.w(),this.g("column",e,t))}},columnSpan:{get:function(){return null!==this.A?this.A.Db:1},set:function(t){t=Math.round(t);var e=this.columnSpan;e!==t&&(1>t&&le(t,">= 1",ot,"columnSpan"),rn(this),this.A.Db=t,this.w(),this.g("columnSpan",e,t))}},row:{get:function(){return this.Ln},set:function(t){t=Math.round(t);var e=this.Ln;e!==t&&(0>t&&le(t,">= 0",ot,"row"),this.Ln=t,this.w(),this.g("row",e,t))}},rowSpan:{get:function(){return null!==this.A?this.A.vi:1},set:function(t){t=Math.round(t);var e=this.rowSpan;e!==t&&(1>t&&le(t,">= 1",ot,"rowSpan"),rn(this),this.A.vi=t,this.w(),this.g("rowSpan",e,t))}},spanAllocation:{get:function(){return null!==this.A?this.A.xi:null},set:function(t){var e=this.spanAllocation;e!==t&&(rn(this),this.A.xi=t,this.w(),this.g("spanAllocation",e,t))}},alignmentFocus:{get:function(){return this.fk},set:function(t){var e=this.fk;e.C(t)||(this.fk=t=t.J(),this.w(),this.g("alignmentFocus",e,t))}},portId:{get:function(){return this.Gn},set:function(t){var e=this.Gn;if(e!==t){var n=this.part;null===n||n instanceof J||Y("Cannot set portID on a Link: "+t),null!==e&&null!==n&&wm(n,this),this.Gn=t,null!==t&&null!==n&&(n.He=!0,c1(n,this)),this.g("portId",e,t)}}},toSpot:{get:function(){return null!==this.aa?this.aa.tj:Ne},set:function(t){var e=this.toSpot;e.C(t)||(t=t.J(),this.Rc(),this.aa.tj=t,this.g("toSpot",e,t),ya(this))}},toEndSegmentLength:{get:function(){return null!==this.aa?this.aa.rj:10},set:function(t){var e=this.toEndSegmentLength;e!==t&&(0>t&&le(t,">= 0",ot,"toEndSegmentLength"),this.Rc(),this.aa.rj=t,this.g("toEndSegmentLength",e,t),ya(this))}},toShortLength:{get:function(){return null!==this.aa?this.aa.sj:0},set:function(t){var e=this.toShortLength;e!==t&&(this.Rc(),this.aa.sj=t,this.g("toShortLength",e,t),ya(this))}},toLinkable:{get:function(){return null!==this.aa?this.aa.sr:null},set:function(t){var e=this.toLinkable;e!==t&&(this.Rc(),this.aa.sr=t,this.g("toLinkable",e,t))}},toMaxLinks:{get:function(){return null!==this.aa?this.aa.tr:1/0},set:function(t){var e=this.toMaxLinks;e!==t&&(0>t&&le(t,">= 0",ot,"toMaxLinks"),this.Rc(),this.aa.tr=t,this.g("toMaxLinks",e,t))}},fromSpot:{get:function(){return null!==this.aa?this.aa.Qi:Ne},set:function(t){var e=this.fromSpot;e.C(t)||(t=t.J(),this.Rc(),this.aa.Qi=t,this.g("fromSpot",e,t),ya(this))}},fromEndSegmentLength:{get:function(){return null!==this.aa?this.aa.Oi:10},set:function(t){var e=this.fromEndSegmentLength;e!==t&&(0>t&&le(t,">= 0",ot,"fromEndSegmentLength"),this.Rc(),this.aa.Oi=t,this.g("fromEndSegmentLength",e,t),ya(this))}},fromShortLength:{get:function(){return null!==this.aa?this.aa.Pi:0},set:function(t){var e=this.fromShortLength;e!==t&&(this.Rc(),this.aa.Pi=t,this.g("fromShortLength",e,t),ya(this))}},fromLinkable:{get:function(){return null!==this.aa?this.aa.Kp:null},set:function(t){var e=this.fromLinkable;e!==t&&(this.Rc(),this.aa.Kp=t,this.g("fromLinkable",e,t))}},fromMaxLinks:{get:function(){return null!==this.aa?this.aa.Lp:1/0},set:function(t){var e=this.fromMaxLinks;e!==t&&(0>t&&le(t,">= 0",ot,"fromMaxLinks"),this.Rc(),this.aa.Lp=t,this.g("fromMaxLinks",e,t))}},cursor:{get:function(){return null!==this.A?this.A.j:""},set:function(t){var e=this.cursor;e!==t&&(rn(this),this.A.j=t,this.g("cursor",e,t))}},click:{get:function(){return null!==this.A?this.A.oh:null},set:function(t){var e=this.click;e!==t&&(rn(this),this.A.oh=t,this.g("click",e,t))}},doubleClick:{get:function(){return null!==this.A?this.A.uh:null},set:function(t){var e=this.doubleClick;e!==t&&(rn(this),this.A.uh=t,this.g("doubleClick",e,t))}},contextClick:{get:function(){return null!==this.A?this.A.qh:null},set:function(t){var e=this.contextClick;e!==t&&(rn(this),this.A.qh=t,this.g("contextClick",e,t))}},mouseEnter:{get:function(){return null!==this.A?this.A.Fh:null},set:function(t){var e=this.mouseEnter;e!==t&&(rn(this),this.A.Fh=t,this.g("mouseEnter",e,t))}},mouseLeave:{get:function(){return null!==this.A?this.A.Ih:null},set:function(t){var e=this.mouseLeave;e!==t&&(rn(this),this.A.Ih=t,this.g("mouseLeave",e,t))}},mouseOver:{get:function(){return null!==this.A?this.A.Jh:null},set:function(t){var e=this.mouseOver;e!==t&&(rn(this),this.A.Jh=t,this.g("mouseOver",e,t))}},mouseHover:{get:function(){return null!==this.A?this.A.Hh:null},set:function(t){var e=this.mouseHover;e!==t&&(rn(this),this.A.Hh=t,this.g("mouseHover",e,t))}},mouseHold:{get:function(){return null!==this.A?this.A.Gh:null},set:function(t){var e=this.mouseHold;e!==t&&(rn(this),this.A.Gh=t,this.g("mouseHold",e,t))}},mouseDragEnter:{get:function(){return null!==this.A?this.A.Qd:null},set:function(t){var e=this.mouseDragEnter;e!==t&&(rn(this),this.A.Qd=t,this.g("mouseDragEnter",e,t))}},mouseDragLeave:{get:function(){return null!==this.A?this.A.Gf:null},set:function(t){var e=this.mouseDragLeave;e!==t&&(rn(this),this.A.Gf=t,this.g("mouseDragLeave",e,t))}},mouseDrop:{get:function(){return null!==this.A?this.A.Eh:null},set:function(t){var e=this.mouseDrop;e!==t&&(rn(this),this.A.Eh=t,this.g("mouseDrop",e,t))}},actionDown:{get:function(){return null!==this.A?this.A.W:null},set:function(t){var e=this.actionDown;e!==t&&(rn(this),this.A.W=t,this.g("actionDown",e,t))}},actionMove:{get:function(){return null!==this.A?this.A.ga:null},set:function(t){var e=this.actionMove;e!==t&&(rn(this),this.A.ga=t,this.g("actionMove",e,t))}},actionUp:{get:function(){return null!==this.A?this.A.Ga:null},set:function(t){var e=this.actionUp;e!==t&&(rn(this),this.A.Ga=t,this.g("actionUp",e,t))}},actionCancel:{get:function(){return null!==this.A?this.A.F:null},set:function(t){var e=this.actionCancel;e!==t&&(rn(this),this.A.F=t,this.g("actionCancel",e,t))}},toolTip:{get:function(){return null!==this.A?this.A.Th:null},set:function(t){var e=this.toolTip;e!==t&&(rn(this),this.A.Th=t,this.g("toolTip",e,t))}},contextMenu:{get:function(){return null!==this.A?this.A.rh:null},set:function(t){var e=this.contextMenu;e!==t&&(rn(this),this.A.rh=t,this.g("contextMenu",e,t))}}}),ot.prototype.trigger=ot.prototype.mv,ot.prototype.findBindingPanel=ot.prototype.Yg,ot.prototype.findTemplateBinder=ot.prototype.Yy,ot.prototype.setProperties=ot.prototype.Vl,ot.prototype.apply=ot.prototype.apply,ot.prototype.attach=ot.prototype.ku,ot.prototype.set=ot.prototype.set,ot.prototype.isEnabledObject=ot.prototype.yf,ot.prototype.isVisibleObject=ot.prototype.zf,ot.prototype.isContainedBy=ot.prototype.jg,ot.prototype.getNearestIntersectionPoint=ot.prototype.Or,ot.prototype.getLocalPoint=ot.prototype.Nr,ot.prototype.getDocumentScale=ot.prototype.uf,ot.prototype.getDocumentAngle=ot.prototype.fi,ot.prototype.getDocumentBounds=ot.prototype.gi,ot.prototype.getDocumentPoint=ot.prototype.ia,ot.prototype.intersectsRect=ot.prototype.Sc,ot.prototype.containedInRect=ot.prototype.Wg,ot.prototype.containsRect=ot.prototype.Ee,ot.prototype.containsPoint=ot.prototype.ba,ot.prototype.raiseChanged=ot.prototype.g,ot.prototype.raiseChangedEvent=ot.prototype.bb,ot.prototype.addCopyProperty=ot.prototype.zw;var yu=null;function wa(){this.ic=!1,this.va="",this.bp=-1,this.hb=this.Wo=this.Ff=null,this.j="",this.cb=this.xi=this.Hc=this.rh=this.Th=this.F=this.Ga=this.ga=this.W=this.Eh=this.Gf=this.Qd=this.Gh=this.Hh=this.Jh=this.Ih=this.Fh=this.qh=this.uh=this.oh=null,this.u=th,this.m=Qo,this.$f=$r,this.Db=this.vi=1,this.ui=Le,this.le=this.wi=this.nb=null,this.Ic="category"}function vu(){this.u=-1/0,this.m=0,this.F=wl,this.Oq=ri,this.j=this.W="None"}function jg(){this.tj=this.Qi=Hn,this.sj=this.Pi=this.rj=this.Oi=NaN,this.sr=this.Kp=null,this.tr=this.Lp=1/0}function wu(){this.Ta=[1,0,0,1,0,0]}function Kc(t){this.type=t,this.r2=this.y2=this.x2=this.r1=this.y1=this.x1=0,this.Jw=[],this.pattern=null}function tl(t,e){this.ownerDocument=t=void 0===e?pt.document:e,this.Jz="http://www.w3.org/2000/svg",void 0!==t&&(this.Sa=this.Vb("svg",{width:"1px",height:"1px",viewBox:"0 0 1 1"}),this.Sa.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns","http://www.w3.org/2000/svg"),this.Sa.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink")),this.po=null,this.context=new yh(this)}function yh(t){this.qs=t,this.svg=t.Sa,this.stack=[],this.md=[],this.fillStyle="#000000",this.font="10px sans-serif",this.globalAlpha=1,this.lineCap="butt",this.lineDashOffset=0,this.lineJoin="miter",this.lineWidth=1,this.miterLimit=10,this.shadowBlur=0,this.shadowColor="rgba(0, 0, 0, 0)",this.shadowOffsetY=this.shadowOffsetX=0,this.strokeStyle="#000000",this.textAlign="start",this.clipInsteadOfFill=!1,this.Lg=this.Yq=this.Xq=0,this.Xr=null,this.path=[],this.et=!1,this.Og=null,this.pj=0,this.Fe=new wu,ss(this,1,0,0,1,0,0);var e=oa++,n=this.Vb("clipPath",{id:"mainClip"+e});n.appendChild(this.Vb("rect",{x:0,y:0,width:t.width,height:t.height})),this.bw=n,this.qs.Sa.appendChild(n),this.md[0].setAttributeNS(null,"clip-path","url(#mainClip"+e+")"),this.Lz={}}function $d(t,e,n,i,l){1!==t.globalAlpha&&(n.opacity=t.globalAlpha),"fill"===e?(t.fillStyle instanceof Kc?n.fill=Vv(t,t.fillStyle):/^rgba\(/.test(t.fillStyle)?(t=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(t.fillStyle),n.fill="rgb("+t[1]+","+t[2]+","+t[3]+")",n["fill-opacity"]=t[4]):n.fill=t.fillStyle,n.stroke="none"):"stroke"===e&&(n.fill="none",t.strokeStyle instanceof Kc?n.stroke=Vv(t,t.strokeStyle):/^rgba\(/.test(t.strokeStyle)?(e=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(t.strokeStyle),n.stroke="rgb("+e[1]+","+e[2]+","+e[3]+")",n["stroke-opacity"]=e[4]):n.stroke=t.strokeStyle,n["stroke-width"]=t.lineWidth,n["stroke-linecap"]=t.lineCap,n["stroke-linejoin"]=t.lineJoin,n["stroke-miterlimit"]=t.miterLimit),i="matrix("+(i=i.Ta)[0]+", "+i[1]+", "+i[2]+", "+i[3]+", "+i[4]+", "+i[5]+")",void 0!==l&&(i+=l),n.transform=i}function Vv(t,e){var n="GRAD"+oa++;if("linear"===e.type)var i=t.Vb("linearGradient",{x1:e.x1,x2:e.x2,y1:e.y1,y2:e.y2,id:n,gradientUnits:"userSpaceOnUse"});else{if("radial"!==e.type)throw Error("invalid gradient");i=t.Vb("radialGradient",{x1:e.x1,x2:e.x2,y1:e.y1,y2:e.y2,r1:e.r1,r2:e.r2,id:n})}var l=e.Jw;e=l.length;for(var u=[],h=0;h<e;h++){var f=l[h],p=f.color;f={offset:f.offset,"stop-color":p},/^rgba\(/.test(p)&&(p=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(p),f["stop-color"]="rgb("+p[1]+","+p[2]+","+p[3]+")",f["stop-opacity"]=p[4]),u.push(f)}for(u.sort(function(g,m){return g.offset>m.offset?1:-1}),l=0;l<e;l++)i.appendChild(t.Vb("stop",u[l]));return t.svg.appendChild(i),"url(#"+n+")"}function ss(t,e,n,i,l,u,h){var f=new wu;f.Ta=[e,n,i,l,u,h],$d(t,"g",e={},f),f=t.addElement("g",e),t.md.push(f)}function el(t){t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0}function ks(t){t.shadowOffsetX=t.Xq,t.shadowOffsetY=t.Yq,t.shadowBlur=t.Lg}function Wr(t,e){this.ownerDocument=e=void 0===e?pt.document:e,this.po=null,(e=e.createElement("canvas")).tabIndex=0,this.Sa=e,this.Sa.innerHTML="This text is displayed if your browser does not support the Canvas HTML element.",this.context=new Pn(e),e.H=t}function Pn(t){t.getContext&&t.getContext("2d")||Y("Browser does not support HTML Canvas Element"),this.Z=t.getContext("2d"),this.Es=this.Gs=this.Fs="",this.pm=!1,this.Lg=this.Yq=this.Xq=0,this.rl=new Dt}ot.className="GraphObject",yu=new vt,va("Button",function(){function t(n,i){return null!==n.diagram.ec(n.documentPoint,function(l){for(;null!==l.panel&&!l.isActionable;)l=l.panel;return l},function(l){return l===i})}var e=vr($,$.Auto,{isActionable:!0,enabledChanged:function(n,i){if(n instanceof $){var l=n.fb("ButtonBorder");null!==l&&(l.fill=i?n._buttonFillNormal:n._buttonFillDisabled)}},cursor:"pointer",_buttonFillNormal:"#F5F5F5",_buttonStrokeNormal:"#BDBDBD",_buttonFillOver:"#E0E0E0",_buttonStrokeOver:"#9E9E9E",_buttonFillPressed:"#BDBDBD",_buttonStrokePressed:"#9E9E9E",_buttonFillDisabled:"#E5E5E5"},vr(wt,{name:"ButtonBorder",figure:"RoundedRectangle",spot1:new it(0,0,2.76142374915397,2.761423749153969),spot2:new it(1,1,-2.76142374915397,-2.761423749153969),parameter1:2,parameter2:2,fill:"#F5F5F5",stroke:"#BDBDBD"}));return e.mouseEnter=function(n,i){if(i.yf()&&i instanceof $&&(n=i.fb("ButtonBorder"))instanceof wt){var l=i._buttonFillOver;i._buttonFillNormal=n.fill,n.fill=l,l=i._buttonStrokeOver,i._buttonStrokeNormal=n.stroke,n.stroke=l}},e.mouseLeave=function(n,i){i.yf()&&i instanceof $&&(n=i.fb("ButtonBorder"))instanceof wt&&(n.fill=i._buttonFillNormal,n.stroke=i._buttonStrokeNormal)},e.actionDown=function(n,i){if(i.yf()&&i instanceof $&&null!==i._buttonFillPressed&&0===n.button){var l=i.fb("ButtonBorder");if(l instanceof wt){var u=(n=n.diagram).skipsUndoManager;n.skipsUndoManager=!0;var h=i._buttonFillPressed;i._buttonFillOver=l.fill,l.fill=h,h=i._buttonStrokePressed,i._buttonStrokeOver=l.stroke,l.stroke=h,n.skipsUndoManager=u}}},e.actionUp=function(n,i){if(i.yf()&&i instanceof $&&null!==i._buttonFillPressed&&0===n.button){var l=i.fb("ButtonBorder");if(l instanceof wt){var u=n.diagram,h=u.skipsUndoManager;u.skipsUndoManager=!0,t(n,i)?(l.fill=i._buttonFillOver,l.stroke=i._buttonStrokeOver):(l.fill=i._buttonFillNormal,l.stroke=i._buttonStrokeNormal),u.skipsUndoManager=h}}},e.actionCancel=function(n,i){if(i.yf()&&i instanceof $&&null!==i._buttonFillPressed){var l=i.fb("ButtonBorder");if(l instanceof wt){var u=n.diagram,h=u.skipsUndoManager;u.skipsUndoManager=!0,t(n,i)?(l.fill=i._buttonFillOver,l.stroke=i._buttonStrokeOver):(l.fill=i._buttonFillNormal,l.stroke=i._buttonStrokeNormal),u.skipsUndoManager=h}}},e.actionMove=function(n,i){if(i.yf()&&i instanceof $&&null!==i._buttonFillPressed){var l=n.diagram;if(0===l.firstInput.button&&(l.currentTool.standardMouseOver(),t(n,i)&&(n=i.fb("ButtonBorder"))instanceof wt)){var u=l.skipsUndoManager;l.skipsUndoManager=!0;var h=i._buttonFillPressed;n.fill!==h&&(n.fill=h),n.stroke!==(h=i._buttonStrokePressed)&&(n.stroke=h),l.skipsUndoManager=u}}},e}),va("TreeExpanderButton",function(){var t=vr("Button",{_treeExpandedFigure:"MinusLine",_treeCollapsedFigure:"PlusLine"},vr(wt,{name:"ButtonIcon",figure:"MinusLine",stroke:"#424242",strokeWidth:2,desiredSize:vc},new de("figure","isTreeExpanded",function(e,n){return n=n.panel,e?n._treeExpandedFigure:n._treeCollapsedFigure}).Fo()),{visible:!1},new de("visible","isTreeLeaf",function(e){return!e}).Fo());return t.click=function(e,n){if((n=n.part)instanceof Pt&&(n=n.adornedPart),n instanceof J){var i=n.diagram;if(null!==i){if(i=i.commandHandler,n.isTreeExpanded){if(!i.canCollapseTree(n))return}else if(!i.canExpandTree(n))return;e.handled=!0,n.isTreeExpanded?i.collapseTree(n):i.expandTree(n)}}},t}),va("SubGraphExpanderButton",function(){var t=vr("Button",{_subGraphExpandedFigure:"MinusLine",_subGraphCollapsedFigure:"PlusLine"},vr(wt,{name:"ButtonIcon",figure:"MinusLine",stroke:"#424242",strokeWidth:2,desiredSize:vc},new de("figure","isSubGraphExpanded",function(e,n){return n=n.panel,e?n._subGraphExpandedFigure:n._subGraphCollapsedFigure}).Fo()));return t.click=function(e,n){if((n=n.part)instanceof Pt&&(n=n.adornedPart),n instanceof yt){var i=n.diagram;if(null!==i){if(i=i.commandHandler,n.isSubGraphExpanded){if(!i.canCollapseSubGraph(n))return}else if(!i.canExpandSubGraph(n))return;e.handled=!0,n.isSubGraphExpanded?i.collapseSubGraph(n):i.expandSubGraph(n)}}},t}),va("ToolTip",function(){return vr(Pt,$.Auto,{isShadowed:!0,shadowColor:"rgba(0, 0, 0, .4)",shadowOffset:new P(0,3),shadowBlur:5},vr(wt,{name:"Border",figure:"RoundedRectangle",parameter1:1,parameter2:1,fill:"#F5F5F5",stroke:"#F0F0F0",spot1:new it(0,0,4,6),spot2:new it(1,1,-4,-4)}))}),va("ContextMenu",function(){return vr(Pt,$.Vertical,{background:"#F5F5F5",isShadowed:!0,shadowColor:"rgba(0, 0, 0, .4)",shadowOffset:new P(0,3),shadowBlur:5},new de("background","",function(t){return null!==t.adornedPart&&null!==t.placeholder?null:"#F5F5F5"}))}),va("ContextMenuButton",function(){var t=vr("Button");t.stretch=Mn;var e=t.fb("ButtonBorder");return e instanceof wt&&(e.figure="Rectangle",e.strokeWidth=0,e.spot1=new it(0,0,2,3),e.spot2=new it(1,1,-2,-2)),t}),va("PanelExpanderButton",function(t){var e=jv(t,"COLLAPSIBLE"),n=vr("Button",{_buttonExpandedFigure:"M0 0 M0 6 L4 2 8 6 M8 8",_buttonCollapsedFigure:"M0 0 M0 2 L4 6 8 2 M8 8",_buttonFillNormal:"rgba(0, 0, 0, 0)",_buttonStrokeNormal:null,_buttonFillOver:"rgba(0, 0, 0, .2)",_buttonStrokeOver:null,_buttonFillPressed:"rgba(0, 0, 0, .4)",_buttonStrokePressed:null},vr(wt,{name:"ButtonIcon",strokeWidth:2},new de("geometryString","visible",function(i){return i?n._buttonExpandedFigure:n._buttonCollapsedFigure}).Fo(e)));return(t=n.fb("ButtonBorder"))instanceof wt&&(t.stroke=null,t.fill="rgba(0, 0, 0, 0)"),n.click=function(i,l){var u=l.diagram;if(null!==u&&!u.isReadOnly){var h=l.Yg();null===h&&(h=l.part),null!==h&&null!==(l=h.fb(e))&&(i.handled=!0,u.Da("Collapse/Expand Panel"),l.visible=!l.visible,u.eb("Collapse/Expand Panel"))}},n}),va("CheckBoxButton",function(t){var e=jv(t);return(t=vr("Button",{desiredSize:new dt(14,14)},vr(wt,{name:"ButtonIcon",geometryString:"M0 0 M0 8.85 L4.9 13.75 16.2 2.45 M16.2 16.2",strokeWidth:2,stretch:Ve,geometryStretch:Ps,visible:!1},""!==e?new de("visible",e).px():[]))).click=function(n,i){if(i instanceof $){var l=n.diagram;if(!(null===l||l.isReadOnly||""!==e&&l.model.isReadOnly)){n.handled=!0;var u=i.fb("ButtonIcon");l.Da("checkbox"),u.visible=!u.visible,"function"==typeof i._doClick&&i._doClick(n,i),l.eb("checkbox")}}},t}),va("CheckBox",function(t){t=vr("CheckBoxButton",t=jv(t),{name:"Button",isActionable:!1,margin:new Bt(0,1,0,0)});var e=vr($,"Horizontal",t,{isActionable:!0,cursor:t.cursor,margin:1,_buttonFillNormal:t._buttonFillNormal,_buttonStrokeNormal:t._buttonStrokeNormal,_buttonFillOver:t._buttonFillOver,_buttonStrokeOver:t._buttonStrokeOver,_buttonFillPressed:t._buttonFillPressed,_buttonStrokePressed:t._buttonStrokePressed,_buttonFillDisabled:t._buttonFillDisabled,mouseEnter:t.mouseEnter,mouseLeave:t.mouseLeave,actionDown:t.actionDown,actionUp:t.actionUp,actionCancel:t.actionCancel,actionMove:t.actionMove,click:t.click,_buttonClick:t.click});return t.mouseEnter=null,t.mouseLeave=null,t.actionDown=null,t.actionUp=null,t.actionCancel=null,t.actionMove=null,t.click=null,e}),ot.None=Le=new W(ot,"None",0),ot.Default=$r=new W(ot,"Default",0),ot.Vertical=Vn=new W(ot,"Vertical",4),ot.Horizontal=Mn=new W(ot,"Horizontal",5),ot.Fill=Ve=new W(ot,"Fill",3),ot.Uniform=Ps=new W(ot,"Uniform",1),ot.UniformToFill=zc=new W(ot,"UniformToFill",2),ot.FlipVertical=$c=new W(ot,"FlipVertical",1),ot.FlipHorizontal=Wc=new W(ot,"FlipHorizontal",2),ot.FlipBoth=Gd=new W(ot,"FlipBoth",3),ot.make=vr,ot.getBuilders=function(){var e,t=new vt;for(e in yu)if(e!==e.toLowerCase()){var n=yu.I(e);"function"==typeof n&&t.add(e,n)}return t.freeze(),t},ot.defineBuilder=va,ot.build=function(t,e){var n=yu.I(t);if("function"==typeof n&&(n=n(null))instanceof ot)return e&&n.set(e),n;Y('GraphObject.build invoked object builder "'+t+'", but it did not return an Object')},ot.takeBuilderArgument=jv,wa.prototype.copy=function(){var t=new wa;return t.va=this.va,t.bp=this.bp,t.Ff=this.Ff,t.hb=this.hb,t.j=this.j,t.oh=this.oh,t.uh=this.uh,t.qh=this.qh,t.Fh=this.Fh,t.Ih=this.Ih,t.Jh=this.Jh,t.Hh=this.Hh,t.Gh=this.Gh,t.Qd=this.Qd,t.Gf=this.Gf,t.Eh=this.Eh,t.W=this.W,t.ga=this.ga,t.Ga=this.Ga,t.F=this.F,t.Th=this.Th,t.rh=this.rh,t.Hc=this.Hc,t.xi=this.xi,t.cb=this.cb,t.u=this.u.J(),t.m=this.m.J(),t.$f=this.$f,t.vi=this.vi,t.Db=this.Db,t.ui=this.ui,t.nb=this.nb,t.wi=this.wi,t.le=this.le,t.Ic=this.Ic,t},vu.prototype.copy=function(){var t=new vu;return t.u=this.u,t.m=this.m,t.F=this.F.J(),t.Oq=this.Oq,t.W=this.W,t.j=this.j,t},vu.className="LinkElementSettings",jg.prototype.copy=function(){var t=new jg;return t.Qi=this.Qi.J(),t.tj=this.tj.J(),t.Oi=this.Oi,t.rj=this.rj,t.Pi=this.Pi,t.sj=this.sj,t.Kp=this.Kp,t.sr=this.sr,t.Lp=this.Lp,t.tr=this.tr,t},jg.className="LinkSettings",wu.prototype.copy=function(){var t=new wu;return t.Ta[0]=this.Ta[0],t.Ta[1]=this.Ta[1],t.Ta[2]=this.Ta[2],t.Ta[3]=this.Ta[3],t.Ta[4]=this.Ta[4],t.Ta[5]=this.Ta[5],t},wu.prototype.translate=function(t,e){this.Ta[4]+=this.Ta[0]*t+this.Ta[2]*e,this.Ta[5]+=this.Ta[1]*t+this.Ta[3]*e},wu.prototype.scale=function(t,e){this.Ta[0]*=t,this.Ta[1]*=t,this.Ta[2]*=e,this.Ta[3]*=e},wu.className="STransform",Kc.prototype.addColorStop=function(t,e){this.Jw.push({offset:t,color:e})},Kc.className="SGradient",tl.prototype.resize=function(t,e,n,i){return(this.width!==t||this.height!==e)&&(this.style.width=n+"px",this.style.height=i+"px",this.Sa.setAttributeNS(null,"width",n+"px"),this.Sa.setAttributeNS(null,"height",i+"px"),this.Sa.setAttributeNS(null,"viewBox","0 0 "+n+" "+i),this.context.bw.firstElementChild.setAttributeNS(null,"width",n+"px"),this.context.bw.firstElementChild.setAttributeNS(null,"height",i+"px"),!0)},tl.prototype.Vb=function(t,e,n){if(t=this.ownerDocument.createElementNS(this.Jz,t),jt(e))for(var i in e)t.setAttributeNS("href"===i?"http://www.w3.org/1999/xlink":"",i,e[i]);return void 0!==n&&(t.textContent=n),t},tl.prototype.getBoundingClientRect=function(){return this.Sa.getBoundingClientRect()},tl.prototype.focus=function(){this.Sa.focus()},tl.prototype.Pw=function(){this.ownerDocument=null},Mt.Object.defineProperties(tl.prototype,{width:{get:function(){return this.Sa.width.baseVal.value},set:function(t){this.Sa.width=t}},height:{get:function(){return this.Sa.height.baseVal.value},set:function(t){this.Sa.height=t}},style:{get:function(){return this.Sa.style}}}),tl.className="SVGSurface",(_=yh.prototype).arc=function(t,e,n,i,l,u,h,f){var p=2*Math.PI,g=p-1e-6,m=n*Math.cos(i),v=n*Math.sin(i),x=t+m,D=e+v,M=u?0:1;i=u?i-l:l-i,(1e-6<Math.abs(h-x)||1e-6<Math.abs(f-D))&&this.path.push(["L",x,+D]),0>i&&(i=i%p+p),i>g?(this.path.push(["A",n,n,0,1,M,t-m,e-v]),this.path.push(["A",n,n,0,1,M,x,D])):1e-6<i&&this.path.push(["A",n,n,0,+(i>=Math.PI),M,t+n*Math.cos(l),e+n*Math.sin(l)])},_.beginPath=function(){this.path=[]},_.bezierCurveTo=function(t,e,n,i,l,u){this.path.push(["C",t,e,n,i,l,u])},_.clearRect=function(){},_.clip=function(){this.addPath("clipPath",this.path,this.Fe)},_.closePath=function(){this.path.push(["z"])},_.createLinearGradient=function(t,e,n,i){var l=new Kc("linear");return l.x1=t,l.y1=e,l.x2=n,l.y2=i,l},_.createPattern=function(t){var e="";t instanceof HTMLCanvasElement&&(e=t.toDataURL()),t instanceof HTMLImageElement&&(e=t.getAttribute("src"));var n=this.Lz;if(n[e])return"url(#"+n[e]+")";var i="PATTERN"+oa++,l={x:0,y:0,width:t.width,height:t.height,href:e};return(t=this.Vb("pattern",{width:t.width,height:t.height,id:i,patternUnits:"userSpaceOnUse"})).appendChild(this.Vb(Hc,l)),this.svg.appendChild(t),n[e]=i,"url(#"+i+")"},_.createRadialGradient=function(t,e,n,i,l,u){var h=new Kc("radial");return h.x1=t,h.y1=e,h.r1=n,h.x2=i,h.y2=l,h.r2=u,h},_.drawImage=function(t,e,n,i,l,u,h,f,p){var g="";t instanceof HTMLCanvasElement&&(g=t.toDataURL()),t instanceof HTMLImageElement&&(g=t.getAttribute("src"));var m=t instanceof HTMLImageElement?t.naturalWidth:t.width,v=t instanceof HTMLImageElement?t.naturalHeight:t.height;void 0===i&&(u=e,h=n,f=i=m,p=l=v),i=i||0,l=l||0,u=u||0,h=h||0,p=p||0,t={x:0,y:0,width:m||i,height:v||l,href:g},F.ca(i,f=f||0)&&F.ca(l,p)?-1===g.toLowerCase().indexOf(".svg")&&-1===g.toLowerCase().indexOf("data:image/svg")&&(t.preserveAspectRatio="xMidYMid slice"):t.preserveAspectRatio="none",g="",p/=l,(0!==u||0!==h)&&(g+=" translate("+u+", "+h+")"),(1!=(f/=i)||1!==p)&&(g+=" scale("+f+", "+p+")"),(0!==e||0!==n)&&(g+=" translate("+-e+", "+-n+")"),(0!==e||0!==n||i!==m||l!==v)&&(u="CLIP"+oa++,(h=this.Vb("clipPath",{id:u})).appendChild(this.Vb("rect",{x:e,y:n,width:i,height:l})),this.svg.appendChild(h),t["clip-path"]="url(#"+u+")"),$d(this,Hc,t,this.Fe,g),this.addElement(Hc,t)},_.fill=function(){this.addPath("fill",this.path,this.Fe)},_.sf=function(){this.clipInsteadOfFill?this.clip():this.fill()},_.fillRect=function(t,e,n,i){$d(this,"fill",t={x:(t=[t,e,n,i])[0],y:t[1],width:t[2],height:t[3]},this.Fe),this.addElement("rect",t)},_.fillText=function(t,e,n){t=[t,e,n],"left"===(e=this.textAlign)?e="start":"right"===e?e="end":"center"===e&&(e="middle"),$d(this,"fill",e={x:t[1],y:t[2],style:"font: "+this.font,"text-anchor":e},this.Fe),this.addElement("text",e,t[0])},_.lineTo=function(t,e){this.path.push(["L",t,e])},_.moveTo=function(t,e){this.path.push(["M",t,e])},_.quadraticCurveTo=function(t,e,n,i){this.path.push(["Q",t,e,n,i])},_.rect=function(t,e,n,i){this.path.push(["M",t,e],["L",t+n,e],["L",t+n,e+i],["L",t,e+i],["z"])},_.restore=function(){this.Fe=this.stack.pop(),this.path=this.stack.pop();var t=this.stack.pop();this.fillStyle=t.fillStyle,this.font=t.font,this.globalAlpha=t.globalAlpha,this.lineCap=t.lineCap,this.lineDashOffset=t.lineDashOffset,this.lineJoin=t.lineJoin,this.lineWidth=t.lineWidth,this.miterLimit=t.miterLimit,this.shadowBlur=t.shadowBlur,this.shadowColor=t.shadowColor,this.shadowOffsetX=t.shadowOffsetX,this.shadowOffsetY=t.shadowOffsetY,this.strokeStyle=t.strokeStyle,this.textAlign=t.textAlign},_.save=function(){this.stack.push({fillStyle:this.fillStyle,font:this.font,globalAlpha:this.globalAlpha,lineCap:this.lineCap,lineDashOffset:this.lineDashOffset,lineJoin:this.lineJoin,lineWidth:this.lineWidth,miterLimit:this.miterLimit,shadowBlur:this.shadowBlur,shadowColor:this.shadowColor,shadowOffsetX:this.shadowOffsetX,shadowOffsetY:this.shadowOffsetY,strokeStyle:this.strokeStyle,textAlign:this.textAlign});for(var t=[],e=0;e<this.path.length;e++)t.push(this.path[e]);this.stack.push(t),this.stack.push(this.Fe.copy())},_.setTransform=function(t,e,n,i,l,u){1===t&&0===e&&0===n&&1===i&&0===l&&0===u||ss(this,t,e,n,i,l,u)},_.scale=function(t,e){this.Fe.scale(t,e)},_.translate=function(t,e){this.Fe.translate(t,e)},_.transform=function(){},_.Pc=function(){},_.stroke=function(){this.addPath("stroke",this.path,this.Fe)},_.si=function(){this.clipInsteadOfFill||this.stroke()},_.Vb=function(t,e,n){return this.qs.Vb(t,e,n)},_.addElement=function(t,e,n){return t=this.Vb(t,e,n),0<this.md.length?this.md[this.md.length-1].appendChild(t):this.svg.appendChild(t),this.Xr=t},_.addPath=function(t,e,n){for(var i=[],l=0;l<e.length;l++){var u=mc(e[l]),h=[u.shift()];if("A"===h[0])h.push(u.shift()+","+u.shift(),u.shift(),u.shift()+","+u.shift(),u.shift()+","+u.shift());else for(;u.length;)h.push(u.shift()+","+u.shift());i.push(h.join(" "))}e={d:i.join(" ")},"stroke"===t&&this.et&&(e["stroke-dasharray"]=this.Og.toString(),e["stroke-dashoffset"]=this.pj),$d(this,t,e,n),"clipPath"===t?(t="CLIP"+oa++,(n=this.Vb("clipPath",{id:t})).appendChild(this.Vb("path",e)),this.svg.appendChild(n),0<this.md.length&&this.md[this.md.length-1].setAttributeNS(null,"clip-path","url(#"+t+")")):this.addElement("path",e)},_.Xl=function(t){if(0!==this.shadowOffsetX||0!==this.shadowOffsetY||0!==this.shadowBlur){var e="SHADOW"+oa++,n=this.addElement("filter",{id:e,x:"-100%",y:"-100%",width:"300%",height:"300%"},null),i=t.computePixelRatio();t=this.Vb("feGaussianBlur",{in:"SourceAlpha",result:"blur",stdDeviation:this.shadowBlur/2/i});var l=this.Vb("feFlood",{in:"blur",result:"flood","flood-color":this.shadowColor}),u=this.Vb("feComposite",{in:"flood",in2:"blur",operator:"in",result:"comp"});i=this.Vb("feOffset",{in:"comp",result:"offsetBlur",dx:this.shadowOffsetX/i,dy:this.shadowOffsetY/i});var h=this.Vb("feMerge",{});h.appendChild(this.Vb("feMergeNode",{in:"offsetBlur"})),h.appendChild(this.Vb("feMergeNode",{in:"SourceGraphic"})),n.appendChild(t),n.appendChild(l),n.appendChild(u),n.appendChild(i),n.appendChild(h),0<this.md.length&&this.md[this.md.length-1].setAttributeNS(null,"filter","url(#"+e+")")}},_.iv=function(t,e,n){this.Xq=t,this.Yq=e,this.Lg=n},_.Gr=function(t,e){this.et=!0,this.Og=t,this.pj=e},_.Er=function(){this.et=!1},_.Oc=function(){},_.Ex=function(){},yh.prototype.rotate=function(){},yh.prototype.getImageData=function(){return null},yh.prototype.measureText=function(){return null},yh.className="SVGContext",V.prototype.makeSvg=V.prototype.bs=function(t){var e=new tl(this,pt.document);void 0===t&&(t=new Vr);var n=this;return ph(this,function(i,l){return i=null!==(i=jx(n,i,"SVG",e))?i.svg:null,"function"==typeof l?(l(i),null):i},t)},V.prototype.makeSVG=V.prototype.Nu=function(t){return this.bs(t)},ot.prototype.Qw=function(t,e){if(!(t instanceof yh))return!1;var n=null,i=t.Xr,l=this.transform,u=this.panel;0!=(4096&this.o)&&Fg(this);var h=this.Eb,f=0!=(256&this.o);t.clipInsteadOfFill&&(f=!1);var p=!1;if(this instanceof Wt&&(t.font=this.font),f){if(p=u.ke()?u.naturalBounds:u.actualBounds,null!==this.ib){var g=this.ib,m=g.x,v=g.y,x=g.width;g=g.height}else m=Math.max(h.x,p.x),v=Math.max(h.y,p.y),x=Math.min(h.right,p.right)-m,g=Math.min(h.bottom,p.bottom)-v;if(m>h.width+h.x||h.x>p.width+p.x||v>h.height+h.y||h.y>p.height+p.y)return!0;p=!0,ss(t,1,0,0,1,0,0),t.save(),t.beginPath(),t.rect(m,v,x,g),t.clip()}return this.li()&&!this.isVisible()||(t.Fe.Ta=[1,0,0,1,0,0],(this instanceof Wt&&1<this.lineCount||this instanceof wt&&1<this.geometry.figures.length)&&ss(t,1,0,0,1,0,0),m=!1,this.li()&&this.isShadowed&&e.Ge("drawShadows")&&(t.iv((v=this.shadowOffset).x*e.scale*e.kc,v.y*e.scale*e.kc,this.shadowBlur),ks(t),t.shadowColor=this.shadowColor),v=!1,this.part&&e.Ge("drawShadows")&&(v=this.part.isShadowed),t.clipInsteadOfFill&&(v=!1),!0===this.shadowVisible?(ks(t),!1===m&&v&&(ss(t,1,0,0,1,0,0),t.Xl(e),m=!0)):!1===this.shadowVisible&&el(t),x=this.naturalBounds,null!==this.areaBackground&&(gi(this,t,this.areaBackground,!0,!0,x,h),!1===m&&v&&(ss(t,1,0,0,1,0,0),t.Xl(e),m=!0),this.areaBackground instanceof bt&&this.areaBackground.type===Ui?(t.beginPath(),t.rect(h.x,h.y,h.width,h.height),t.sf(this.areaBackground)):t.fillRect(h.x,h.y,h.width,h.height)),g=!1,this instanceof $?ss(t,l.m11,l.m12,l.m21,l.m22,l.dx,l.dy):(t.Fe.Ta=[l.m11,l.m12,l.m21,l.m22,l.dx,l.dy],!1===m&&v&&(g=!0)),null!==this.background&&(!1===m&&v&&(ss(t,1,0,0,1,0,0),t.Xl(e),m=!0),ga(this,t,x,h)),v&&(null!==this.background||null!==this.areaBackground||null!==u&&0!=(512&u.o)||null!==u&&(u.type===$.Auto||u.type===$.Spot)&&u.vb()!==this)?(bv(this,!0),null===this.shadowVisible&&el(t),g=!1):bv(this,!1),g&&!1===m&&(ss(t,1,0,0,1,0,0),t.Xl(e),m=!0),this.ai(t,e),v&&0!=(512&this.o)&&ks(t),this.li()&&v&&el(t),f&&(t.restore(),p&&t.md.pop()),this instanceof $&&(n=t.md.pop()),!0===m&&t.md.pop(),(this instanceof Wt&&1<this.lineCount||this instanceof wt&&1<this.geometry.figures.length)&&(n=t.md.pop()),null!==t.qs.po&&(null===n&&(i===t.Xr?(ss(t,1,0,0,1,0,0),n=t.md.pop()):n=t.Xr),t.qs.po(this,n)),this.svg=n),!0},Wr.prototype.resize=function(t,e,n,i){return(this.width!==t||this.height!==e)&&(this.width=t,this.height=e,this.style.width=n+"px",this.style.height=i+"px",!0)},Wr.prototype.toDataURL=function(t,e){return this.Sa.toDataURL(t,e)},Wr.prototype.getBoundingClientRect=function(){return this.Sa.getBoundingClientRect()},Wr.prototype.focus=function(){this.Sa.focus()},Wr.prototype.Pw=function(){this.ownerDocument=this.Sa.H=null},Mt.Object.defineProperties(Wr.prototype,{width:{get:function(){return this.Sa.width},set:function(t){this.Sa.width=t}},height:{get:function(){return this.Sa.height},set:function(t){this.Sa.height=t}},style:{get:function(){return this.Sa.style}}}),Wr.className="CanvasSurface",(_=Pn.prototype).Ex=function(t){this.Z.imageSmoothingEnabled=t},_.arc=function(t,e,n,i,l,u){this.Z.arc(t,e,n,i,l,u)},_.beginPath=function(){this.Z.beginPath()},_.bezierCurveTo=function(t,e,n,i,l,u){this.Z.bezierCurveTo(t,e,n,i,l,u)},_.clearRect=function(t,e,n,i){this.Pc(),this.Z.clearRect(t,e,n,i)},_.clip=function(){this.Z.clip()},_.closePath=function(){this.Z.closePath()},_.createLinearGradient=function(t,e,n,i){return this.Z.createLinearGradient(t,e,n,i)},_.createPattern=function(t,e){return this.Z.createPattern(t,e)},_.createRadialGradient=function(t,e,n,i,l,u){return this.Z.createRadialGradient(t,e,n,i,l,u)},_.drawImage=function(t,e,n,i,l,u,h,f,p){void 0===i?this.Z.drawImage(t,e,n):this.Z.drawImage(t,e,n,i,l,u,h,f,p)},_.fill=function(){this.Z.fill()},_.fillRect=function(t,e,n,i){this.Z.fillRect(t,e,n,i)},_.fillText=function(t,e,n){this.Z.fillText(t,e,n)},_.getImageData=function(t,e,n,i){return this.Z.getImageData(t,e,n,i)},_.lineTo=function(t,e){this.Z.lineTo(t,e)},_.measureText=function(t){return this.Z.measureText(t)},_.moveTo=function(t,e){this.Z.moveTo(t,e)},_.quadraticCurveTo=function(t,e,n,i){this.Z.quadraticCurveTo(t,e,n,i)},_.rect=function(t,e,n,i){this.Z.rect(t,e,n,i)},_.restore=function(){this.Z.restore()},_.save=function(){this.Pc(),this.Z.save()},Pn.prototype.rotate=function(t){this.rl.rotate(57.2958*t,0,0)},(_=Pn.prototype).setTransform=function(t,e,n,i,l,u){this.rl.setTransform(t,e,n,i,l,u)},_.scale=function(t,e){this.rl.scale(t,e)},_.translate=function(t,e){this.rl.translate(t,e)},_.stroke=function(){this.Z.stroke()},_.transform=function(t,e,n,i,l,u){if(1!==t||0!==e||0!==n||1!==i||0!==l||0!==u){var h=this.rl,f=h.m11*t+h.m21*e;t=h.m12*t+h.m22*e,e=h.m11*n+h.m21*i,n=h.m12*n+h.m22*i,h.dx=h.m11*l+h.m21*u+h.dx,h.dy=h.m12*l+h.m22*u+h.dy,h.m11=f,h.m12=t,h.m21=e,h.m22=n}},_.Pc=function(){var t=this.rl;this.Z.setTransform(t.m11,t.m12,t.m21,t.m22,t.dx,t.dy)},_.sf=function(t){if(t instanceof bt&&t.type===Ui){var e=t.lk;(t=t.Hs)>e?(this.scale(e/t,1),this.translate((t-e)/2,0)):e>t&&(this.scale(1,t/e),this.translate(0,(e-t)/2)),this.pm?this.clip():this.fill(),t>e?(this.translate(-(t-e)/2,0),this.scale(1/(e/t),1)):e>t&&(this.translate(0,-(e-t)/2),this.scale(1,1/(t/e)))}else this.pm?this.clip():this.fill()},_.si=function(){this.pm||this.stroke()},_.iv=function(t,e,n){this.Xq=t,this.Yq=e,this.Lg=n},_.Gr=function(t,e){var n=this.Z;void 0!==n.setLineDash&&(n.setLineDash(t),n.lineDashOffset=e)},_.Er=function(){var t=this.Z;void 0!==t.setLineDash&&(t.setLineDash(XM),t.lineDashOffset=0)},_.Oc=function(t){t&&(this.Fs=""),this.Es=this.Gs=""},Mt.Object.defineProperties(Pn.prototype,{fillStyle:{get:function(){return this.Z.fillStyle},set:function(t){this.Es!==t&&(this.Es=this.Z.fillStyle=t)}},font:{get:function(){return this.Z.font},set:function(t){this.Fs!==t&&(this.Fs=this.Z.font=t)}},globalAlpha:{get:function(){return this.Z.globalAlpha},set:function(t){this.Z.globalAlpha=t}},lineCap:{get:function(){return this.Z.lineCap},set:function(t){this.Z.lineCap=t}},lineDashOffset:{get:function(){return this.Z.lineDashOffset},set:function(t){this.Z.lineDashOffset=t}},lineJoin:{get:function(){return this.Z.lineJoin},set:function(t){this.Z.lineJoin=t}},lineWidth:{get:function(){return this.Z.lineWidth},set:function(t){this.Z.lineWidth=t}},miterLimit:{get:function(){return this.Z.miterLimit},set:function(t){this.Z.miterLimit=t}},shadowBlur:{get:function(){return this.Z.shadowBlur},set:function(t){this.Z.shadowBlur=t}},shadowColor:{get:function(){return this.Z.shadowColor},set:function(t){this.Z.shadowColor=t}},shadowOffsetX:{get:function(){return this.Z.shadowOffsetX},set:function(t){this.Z.shadowOffsetX=t}},shadowOffsetY:{get:function(){return this.Z.shadowOffsetY},set:function(t){this.Z.shadowOffsetY=t}},strokeStyle:{get:function(){return this.Z.strokeStyle},set:function(t){this.Gs!==t&&(this.Gs=this.Z.strokeStyle=t)}},textAlign:{get:function(){return this.Z.textAlign},set:function(t){this.Z.textAlign=t}},imageSmoothingEnabled:{get:function(){return this.Z.imageSmoothingEnabled},set:function(t){this.Z.imageSmoothingEnabled=t}},clipInsteadOfFill:{get:function(){return this.pm},set:function(t){this.pm=t}}});var XM=Object.freeze([]);function Wd(){this.F=this.m=this.u=this.j=0}function bt(t,e){xh||(Vg(),xh=!0),wn(this),this._isFrozen=!1,void 0===t?(this.qa=Yr,this.kk="black"):"string"==typeof t?(this.qa=Yr,this.kk=t):(this.qa=t,this.kk="black"),(t=this.qa)===il?(this.Gd=Br,this.zk=Ji):this.zk=this.Gd=t===Ui?ut:Ne,this.cr=0,this.Ap=NaN,this.oe=this.Bq=this.ne=null,this.Hs=this.lk=0,e&&Object.assign(this,e)}function Bv(t,e,n){return e=void 0===e||"number"!=typeof e?.2:e,n=void 0===n?Zc:n,nl(t),Jc(e,n)}function Hx(t,e,n){return e=void 0===e||"number"!=typeof e?.2:e,n=void 0===n?Zc:n,nl(t),Jc(-e,n)}function Uv(t,e,n){nl(t),t=Zt.j;var i=Zt.u,l=Zt.m,u=Zt.F;return nl(e),void 0===n&&(n=.5),"rgba("+Math.round((Zt.j-t)*n+t)+", "+Math.round((Zt.u-i)*n+i)+", "+Math.round((Zt.m-l)*n+l)+", "+Math.round((Zt.F-u)*n+u)+")"}function Xc(t){return!!t&&(t instanceof bt?t.kx():(nl(t),128>(299*Zt.j+587*Zt.u+114*Zt.m)/1e3))}function Jc(t,e){switch(e){case Zc:e=100*zx(Zt.j);var n=100*zx(Zt.u),i=100*zx(Zt.m);return Jn.j=.4124564*e+.3575761*n+.1804375*i,Jn.u=.2126729*e+.7151522*n+.072175*i,Jn.m=.0193339*e+.119192*n+.9503041*i,Jn.F=Zt.F,e=Yd(Jn.j/wh[0]),n=Yd(Jn.u/wh[1]),i=Yd(Jn.m/wh[2]),ls.j=116*n-16,ls.u=500*(e-n),ls.m=200*(n-i),ls.F=Jn.F,ls.j=Math.min(100,Math.max(0,ls.j+100*t)),e=(t=(ls.j+16)/116)-ls.m/200,Jn.j=wh[0]*Hv(ls.u/500+t),Jn.u=wh[1]*(ls.j>Kd*Gv?Math.pow(t,3):ls.j/Kd),Jn.m=wh[2]*Hv(e),Jn.F=ls.F,t=-.969266*Jn.j+1.8760108*Jn.u+.041556*Jn.m,e=.0556434*Jn.j+-.2040259*Jn.u+1.0572252*Jn.m,Zt.j=255*vh((3.2404542*Jn.j+-1.5371385*Jn.u+-.4985314*Jn.m)/100),Zt.u=255*vh(t/100),Zt.m=255*vh(e/100),Zt.F=Jn.F,Zt.j=Math.round(Zt.j),255<Zt.j?Zt.j=255:0>Zt.j&&(Zt.j=0),Zt.u=Math.round(Zt.u),255<Zt.u?Zt.u=255:0>Zt.u&&(Zt.u=0),Zt.m=Math.round(Zt.m),255<Zt.m?Zt.m=255:0>Zt.m&&(Zt.m=0),"rgba("+Zt.j+", "+Zt.u+", "+Zt.m+", "+Zt.F+")";case Bg:return Gx(),wr.m=Math.min(100,Math.max(0,wr.m+100*t)),"hsla("+wr.j+", "+wr.u+"%, "+wr.m+"%, "+wr.F+")";default:Y("Unknown color space: "+e)}}function nl(t){xh||(Vg(),xh=!0);var e=Xd;if(null!==e){e.clearRect(0,0,1,1),e.fillStyle="#000000";var n=e.fillStyle;e.fillStyle=t,e.fillStyle!==n?(e.fillRect(0,0,1,1),t=e.getImageData(0,0,1,1).data,Zt.j=t[0],Zt.u=t[1],Zt.m=t[2],Zt.F=t[3]/255):(e.fillStyle="#FFFFFF",e.fillStyle=t,Zt.j=0,Zt.u=0,Zt.m=0,Zt.F=1)}}function Gx(){var t=Zt.j/255,e=Zt.u/255,n=Zt.m/255,i=Math.max(t,e,n),l=Math.min(t,e,n),u=i-l;if(l=(i+l)/2,0===u)var h=t=0;else{switch(i){case t:h=(e-n)/u%6;break;case e:h=(n-t)/u+2;break;case n:h=(t-e)/u+4}0>(h*=60)&&(h+=360),t=u/(1-Math.abs(2*l-1))}wr.j=Math.round(h),wr.u=Math.round(100*t),wr.m=Math.round(100*l),wr.F=Zt.F}function zx(t){return.04045>=(t/=255)?t/12.92:Math.pow((t+.055)/1.055,2.4)}function vh(t){return.0031308>=t?12.92*t:1.055*Math.pow(t,1/2.4)-.055}function Yd(t){return t>Gv?Math.pow(t,1/3):(Kd*t+16)/116}function Hv(t){var e=t*t*t;return e>Gv?e:(116*t-16)/Kd}function xu(t,e){"string"!=typeof t&&(t instanceof bt||Y("Value for "+e+" must be a color string or a Brush, not "+t))}function Vg(){Xd=$e?new Wr(null).context:null}Pn.className="CanvasSurfaceContext",Wd.className="ColorNumbers",bt.prototype.copy=function(){var t=new bt;return t.qa=this.qa,t.kk=this.kk,t.Gd=this.Gd.J(),t.zk=this.zk.J(),t.cr=this.cr,t.Ap=this.Ap,null!==this.ne&&(t.ne=this.ne.copy()),t.Bq=this.Bq,t},(_=bt.prototype).freeze=function(){return this._isFrozen=!0,null!==this.ne&&this.ne.freeze(),this},_.ja=function(){return Object.isFrozen(this)&&Y("cannot thaw constant: "+this),this._isFrozen=!1,null!==this.ne&&this.ne.ja(),this},_.ob=function(t){t.classType===bt&&(this.type=t)},_.toString=function(){var t="Brush(";if(this.type===Yr)t+=this.color;else if(t=this.type===il?t+"Linear ":this.type===Ui?t+"Radial ":this.type===xa?t+"Pattern ":t+"(unknown) ",t+=this.start+" "+this.end,null!==this.colorStops)for(var e=this.colorStops.iterator;e.next();)t+=" "+e.key+":"+e.value;return t+")"},_.addColorStop=function(t,e){return this._isFrozen&&It(this),("number"!=typeof t||!isFinite(t)||1<t||0>t)&&le(t,"0 <= loc <= 1",bt,"addColorStop:loc"),null===this.ne&&(this.ne=new vt),this.ne.add(t,e),this.qa===Yr&&(this.type=il),this.oe=null,this},_.Cz=function(t,e){if(this._isFrozen&&It(this),t=void 0===t||"number"!=typeof t?.2:t,e=void 0===e?Zc:e,this.type===Yr)nl(this.color),this.color=Jc(t,e);else if((this.type===il||this.type===Ui)&&null!==this.colorStops)for(var n=this.colorStops.iterator;n.next();)nl(n.value),this.addColorStop(n.key,Jc(t,e));return this},_.Dy=function(t,e){if(this._isFrozen&&It(this),t=void 0===t||"number"!=typeof t?.2:t,e=void 0===e?Zc:e,this.type===Yr)nl(this.color),this.color=Jc(-t,e);else if((this.type===il||this.type===Ui)&&null!==this.colorStops)for(var n=this.colorStops.iterator;n.next();)nl(n.value),this.addColorStop(n.key,Jc(-t,e));return this},_.kx=function(){if(this.type===Yr)return Xc(this.color);if((this.type===il||this.type===Ui)&&null!==this.colorStops){var t=this.colorStops;if(this.type===Ui)return Xc(t.first().value);if(null!==t.get(.5))return Xc(t.get(.5));if(2===t.count)return Xc(Uv((t=t.Ea())[0].value,t[1].value));for(var e=t.iterator,n=-1,i=-1,l=1,u=1;e.next();){var h=e.key,f=Math.abs(.5-e.key);l>u&&f<l?(n=h,l=f):u>=l&&f<u&&(i=h,u=f)}return n>i&&(u=n,n=i,i=u,u=l),l=i-n,Xc(Uv(t.get(n),t.get(i),1-u/l))}return!1},Mt.Object.defineProperties(bt.prototype,{type:{get:function(){return this.qa},set:function(t){this._isFrozen&&It(this,t),this.qa=t,this.start.Fc()&&(t===il?this.start=Br:t===Ui&&(this.start=ut)),this.end.Fc()&&(t===il?this.end=Ji:t===Ui&&(this.end=ut)),this.oe=null}},color:{get:function(){return this.kk},set:function(t){this._isFrozen&&It(this,t),this.kk=t,this.oe=null}},start:{get:function(){return this.Gd},set:function(t){this._isFrozen&&It(this,t),this.Gd=t.J(),this.oe=null}},end:{get:function(){return this.zk},set:function(t){this._isFrozen&&It(this,t),this.zk=t.J(),this.oe=null}},startRadius:{get:function(){return this.cr},set:function(t){this._isFrozen&&It(this,t),0>t&&le(t,">= zero",bt,"startRadius"),this.cr=t,this.oe=null}},endRadius:{get:function(){return this.Ap},set:function(t){this._isFrozen&&It(this,t),0>t&&le(t,">= zero",bt,"endRadius"),this.Ap=t,this.oe=null}},colorStops:{get:function(){return this.ne},set:function(t){this._isFrozen&&It(this,t),this.ne=t,this.oe=null}},pattern:{get:function(){return this.Bq},set:function(t){this._isFrozen&&It(this,t),this.Bq=t,this.oe=null}}}),bt.prototype.isDark=bt.prototype.kx,bt.prototype.darkenBy=bt.prototype.Dy,bt.prototype.lightenBy=bt.prototype.Cz,bt.prototype.addColorStop=bt.prototype.addColorStop;var Yr,il,Ui,xa,Zc,Bg,Gv=216/24389,Kd=24389/27,wh=[95.047,100,108.883],Xd=null,Zt=new Wd,wr=new Wd,Jn=new Wd,ls=new Wd,xh=!1;function Be(){this.va="Base"}function rl(){this.va="Base"}function Jd(){this.va="Base"}function Qc(){this.va="Base"}function Ug(){this.va="Base"}function zv(t,e,n){var i=null;if(t instanceof $&&""!==t.Pe&&(i=t.fb(t.Pe))===t&&(i=null),null!==i)for(n&&t.arrange(0,0,e.width,e.height),e.assign(i.actualBounds),i=i.panel;i!==t;)i.transform.So(e),i=i.panel}function Zd(){this.va="Base"}function Ca(){this.va="Base",this.name="Table"}function Hg(){this.va="Base"}function Gg(){this.va="Base"}function zg(){this.va="Base"}function Qd(){this.va="Base"}function qc(t,e,n,i){if(0>e)return t%e===n;if(t%e!==n)return!1;e=i.length;for(var l=0;l<e;l++)if(t%i[l]===n)return!1;return!0}function $g(){this.va="Base"}function $v(t,e,n,i){if(!1!==qs(i)){var l=i.strokeWidth;0===l&&t instanceof Pt&&t.type===$.Link&&t.adornedObject instanceof wt&&(l=t.adornedObject.strokeWidth),l*=i.xa,t instanceof H&&null!==t.sa?i.ve((t=t.sa.bounds).x-l/2,t.y-l/2,t.width+l,t.height+l):t instanceof Pt&&null!==t.adornedPart.sa?i.ve((t=t.adornedPart.sa.bounds).x-l/2,t.y-l/2,t.width+l,t.height+l):i.ve(-l/2,-l/2,e+l,n+l),(l=i.desiredSize).v()||null===i.sa?i.bc.h(0,0,l.width,l.height):i.bc.assign(i.sa.bounds),Qi(i,!1)}}function qd(){this.va="Base"}function $(t,e){if(ot.call(this),this.qa=null,void 0===t)this.qa=$.Position;else if("string"==typeof t){var n=Xr.I(t);null!==n&&(this.qa=n)}else t instanceof Be?this.qa=t:t&&(this.qa=$.Position,e=t);null===this.qa&&Y("Panel type not specified or PanelLayout not loaded: "+t),this.o=4194304|this.o|(this.qa===$.Grid?1048576:0),this.R=new q,this.ub=nh,this.Bm=Hn,this.Kf=$r,this.Qg=null,this.Pe="",this.bg=new B(NaN,NaN,NaN,NaN),this.T=this.F=null,this.$n=Ps,this.Qm=sa,this.Rm=wl,this.qb=this.oa=null,this.fn=NaN,this.$d=this.xh=null,e&&Object.assign(this,e)}function JM(t,e,n,i){for(var l=i.length,u=t.actualBounds,h=t.naturalBounds,f=!0,p=0;p<l;p++){var g=i[p];if(void 0!==g&&0!==g.actual)if(f)f=!1;else{if(n){if(g.position>u.height)continue}else if(g.position>u.width)continue;var m=g.separatorStrokeWidth;isNaN(m)&&(m=n?t.defaultRowSeparatorStrokeWidth:t.defaultColumnSeparatorStrokeWidth);var v=g.separatorStroke;if(null===v&&(v=n?t.defaultRowSeparatorStroke:t.defaultColumnSeparatorStroke),0!==m&&null!==v){gi(t,e,v,!1,!1,h,u),v=!1;var x=g.separatorDashArray;null===x&&(x=n?t.defaultRowSeparatorDashArray:t.defaultColumnSeparatorDashArray),null!==x&&(v=!0,e.Gr(x,0)),e.beginPath(),x=g.position+m,n?x>u.height&&(m-=x-u.height):x>u.width&&(m-=x-u.width),g=g.position+m/2,e.lineWidth=m,m=t.ub,n?(x=u.width-m.right,e.moveTo(m.left,g+=m.top),e.lineTo(x,g)):(x=u.height-m.bottom,e.moveTo(g+=m.left,m.top),e.lineTo(g,x)),e.stroke(),v&&e.Er()}}}}function Wg(t,e,n,i,l){for(var u=i.length,h=t.actualBounds,f=t.naturalBounds,p=tf(t,!0),g=tf(t,!1),m=0;m<u;m++){var v=i[m];if(void 0!==v&&null!==v.background&&v.coversSeparators!==l&&0!==v.actual){var x=n?h.height:h.width;if(!(v.position>x)){var D=v.Qc(),M=v.separatorStrokeWidth;isNaN(M)&&(M=n?t.defaultRowSeparatorStrokeWidth:t.defaultColumnSeparatorStrokeWidth);var T=v.separatorStroke;null===T&&(T=n?t.defaultRowSeparatorStroke:t.defaultColumnSeparatorStroke),(null===T||v.index===(n?p:g))&&(M=0),D-=M,(M=v.position+M)+(D+=v.actual)>x&&(D=x-M),0>=D||(x=t.ub,gi(t,e,v.background,!0,!1,f,h),n?e.fillRect(x.left,M+x.top,h.width-(x.left+x.right),D):e.fillRect(M+x.left,x.top,D,h.height-(x.top+x.bottom)))}}}}function tf(t,e){for(var n=e?t.rowCount:t.columnCount,i=0;i<n;i++){var l=e?t.rowDefs[i]:t.colDefs[i];if(void 0!==l)return l.index}return 0}function Wv(t){return"LineV"===t||"BarV"===t}function Kr(t){return null!==t.part?t.part.locationObject:null}function Zn(t,e){$x(t,t,e)}function $x(t,e,n){n(e);for(var i=(e=e.R.s).length,l=0;l<i;l++){var u=e[l];u instanceof $&&$x(t,u,n)}}function dT(t,e){Yv(t,t,e)}function Yv(t,e,n){if(n(e),e instanceof $)for(var i=(e=e.R.s).length,l=0;l<i;l++)Yv(t,e[l],n)}function Pl(t,e,n){if(n(e))return e;if(e instanceof $)for(var i=(e=e.R.s).length,l=0;l<i;l++){var u=Pl(t,e[l],n);if(null!==u)return u}return null}function Wx(t){for(var e=(t=t.R.s).length,n=0,i=0;i<e;i++){var l=t[i];l instanceof $?n=Math.max(n,Wx(l)):l instanceof wt&&(n=Math.max(n,l.ag/2*l.strokeMiterLimit*l.uf()))}return n}function Kv(t,e,n,i){for(var l=t.R.s,u=l.length;u--;){var h=l[u];if(h.visible){var f=h.actualBounds,p=t.naturalBounds;f.x>p.width||f.y>p.height||0>f.x+f.width||0>f.y+f.height||(h instanceof $&&Kv(h,e,n,i),null!==e&&(h=e(h)),null===h||null!==n&&!n(h)||i.add(h))}}}function Ch(t){var e=null;return t instanceof wt&&((e=t.spot1)===Hn&&(e=null),null!==(t=t.geometry)&&null===e&&(e=t.spot1)),null===e&&(e=Oe),e}function Xv(t){var e=null;return t instanceof wt&&((e=t.spot2)===Hn&&(e=null),null!==(t=t.geometry)&&null===e&&(e=t.spot2)),null===e&&(e=cr),e}function tp(t,e){t.o=e?16777216|t.o:-16777217&t.o}function Yx(t,e,n){var i=t.rowDefs;if(!(0>e)){if(i[e]=n instanceof on?n:void 0,!n)for(e=i.length-1;0<=e&&void 0===i[e--];)i.length--;t.w()}}function Kx(t,e,n){var i=t.colDefs;if(!(0>e)){if(i[e]=n instanceof on?n:void 0,!n)for(e=i.length-1;0<=e&&void 0===i[e--];)i.length--;t.w()}}function Yg(t){return null!==(t=t.allBindings)&&t._isFrozen}function uo(t){var e=t.allBindings;if(null===e)null!==t.data&&Y("Template cannot have .data be non-null: "+t),t.allBindings=e=new q;else if(e._isFrozen)return;var n=new q;tp(t,!1),t.$l(t,function(g,m){m.ih();var v=m.localBindings;if(null!==v)for(Fv(m,!1),v=v.iterator;v.next();){var x=v.value;x.mode===$m&&Fv(m,!0);var D=x.sourceName;null!==D&&("/"===D&&tp(g,!0),null!==(D=zm(x,g,m))&&(n.add(D),null===D.srcBindings&&(D.srcBindings=new q),D.srcBindings.add(x))),e.add(x)}if(m instanceof $&&m.type===$.Table){if(0<m.rowCount)for(v=(g=m.rowDefs).length,x=0;x<v;x++)if(void 0!==(D=g[x])&&null!==D.Vd)for(var M=D.Vd.iterator;M.next();){var T=M.value;T.sd=D,T.Wn=2,T.ll=D.index,e.add(T)}if(0<m.columnCount)for(g=(m=m.colDefs).length,v=0;v<g;v++)if(void 0!==(x=m[v])&&null!==x.Vd)for(D=x.Vd.iterator;D.next();)(M=D.value).sd=x,M.Wn=1,M.ll=x.index,e.add(M)}});for(var i=n.iterator;i.next();){var l=i.value;if(null!==l.srcBindings){Fv(l,!0);for(var u=l.srcBindings.iterator;u.next();){var h=u.value;null===l.localBindings&&(l.localBindings=new q),l.localBindings.add(h)}}l.srcBindings=null}for(i=e.iterator;i.next();)if(null!==(u=(l=i.value).sd)){l.sd=null;var f=l.targetProperty,p=f.indexOf(".");0<p&&u instanceof $&&(h=f.substring(0,p),f=f.substr(p+1),null!==(p=u.fb(h))?(u=p,l.targetProperty=f):hi('Warning: unable to find GraphObject named "'+h+'" for Binding: '+l.toString())),u instanceof on?(h=pn(u.panel),l.ti=void 0===h?-1:h,u.panel.bindingId=l.ti):u instanceof ot?(h=pn(u),l.ti=void 0===h?-1:h,u.bindingId=l.ti):Y("Unknown type of binding target: "+u)}e.freeze(),t instanceof lt&&t.Tc()&&t.Za()}function Mh(t){if(t.type===$.Spot||t.type===$.Auto)return Math.min(t.R.length,1);if(t.type===$.Link){for(var e=(t=t.R).length,n=0;n<e;n++){var i=t.K(n);if(!(i instanceof wt&&i.isPanelMain))break}return n}return t.type===$.Table&&0<t.R.length&&(t=t.R.K(0)).isPanelMain&&t instanceof $&&(t.type===$.TableRow||t.type===$.TableColumn)?1:0}function ZM(t,e){var n=Mh(t);if(null===e||0===e.length)for(;t.R.length>n;)t.lc(t.R.length-1,!1);else if(t.R.length<=n){n=e.length;for(var i=0;i<n;i++)Jv(t,e[i],i,!0)}else{i=n;for(var l=0;l<e.length;l++,i++){var u=e[l],h=i<t.R.length?t.R.K(i):null;if(h instanceof $){if(h.data!==u){var f=Jx(t,h.data),p=Jx(t,u),g=p!==f;g||(f=Zx(t,f),g=Zx(t,p)!==f),g?(t.lc(i,!1),Jv(t,u,l,!1)):h.data=u}}else Jv(t,u,l,!1)}for(;i<t.R.length;)t.lc(i,!1);t.Qg=null,Xx(t,n,0),qs(t)||t.w(),t.graduatedIntervals=null,t.yf()||Kg(t,t,!1),null!==(e=t.part)&&(e.Kh=null,e.Sf=NaN,t.He&&e instanceof J&&(e.He=!0),e.He&&e instanceof J&&(e.sc=null))}}function Jv(t,e,n,i){if(!(null==e||0>n)){var l=Jx(t,e);if(null!==(l=Zx(t,l))){if(uo(l),0!=(16777216&(l=l.copy()).o)){var u=t.Yg();null!==u&&tp(u,!0)}"object"==typeof e&&(null===t.$d&&(t.$d=new vt),t.$d.add(e,l)),u=n+Mh(t),t.Cb(u,l),i&&(l.qb=e,Xx(t,u,n),l.qb=null),l.data=e}}}function Xx(t,e,n){for(t=t.R;e<t.length;){var i=t.K(e);if(i instanceof $){var l=e,u=n;i.type===$.TableRow?i.row=l:i.type===$.TableColumn&&(i.column=l),i.itemIndex=u}e++,n++}}function Jx(t,e){if(null===e)return"";if("function"==typeof(t=t.itemCategoryProperty))t=t(e);else{if("string"!=typeof t||"object"!=typeof e)return"";if(""===t)return"";t=be(e,t)}return void 0===t?"":"string"==typeof t?t:void Y("Panel.getCategoryForItemData found a non-string category for "+e+": "+t)}function Zx(t,e){var n=t.itemTemplateMap,i=null;return null!==n&&(i=n.I(e)),null===i&&(null!==n&&(i=n.I("")),null===i&&(Xg||(Xg=!0,hi('No item template Panel found for category "'+e+'" on '+t),hi("  Using default item template."),t=new $,(e=new Wt).bind(new de("text","",io)),t.add(e),Zv=t),i=Zv)),i}function Kg(t,e,n){var i=e.enabledChanged;if(null!==i&&i(e,n),e instanceof $){i=(e=e.R.s).length;for(var l=0;l<i;l++){var u=e[l];n&&u instanceof $&&!u.isEnabled||Kg(t,u,n)}}}function Ao(t,e){e.name=t,Xr.add(t,e)}bt.className="Brush",bt.Solid=Yr=new W(bt,"Solid",0),bt.Linear=il=new W(bt,"Linear",1),bt.Radial=Ui=new W(bt,"Radial",2),bt.Pattern=xa=new W(bt,"Pattern",4),bt.Lab=Zc=new W(bt,"Lab",5),bt.HSL=Bg=new W(bt,"HSL",6),bt.randomColor=function(t,e){void 0===t&&(t=128),void 0===e&&(e=Math.max(t,255));var n=Math.abs(e-t);e=Math.floor(t+Math.random()*n).toString(16);var i=Math.floor(t+Math.random()*n).toString(16);return t=Math.floor(t+Math.random()*n).toString(16),2>e.length&&(e="0"+e),2>i.length&&(i="0"+i),2>t.length&&(t="0"+t),"#"+e+i+t},bt.isValidColor=function(t){if("black"===t)return!0;if(""===t)return!1;xh||(Vg(),xh=!0);var e=Xd;if(null===e)return!0;e.fillStyle="#000000";var n=e.fillStyle;return e.fillStyle=t,e.fillStyle!==n||(e.fillStyle="#FFFFFF",n=e.fillStyle,e.fillStyle=t,e.fillStyle!==n)},bt.lighten=function(t){return Bv(t)},bt.lightenBy=Bv,bt.darken=function(t){return Hx(t)},bt.darkenBy=Hx,bt.mix=Uv,bt.isDark=Xc,Be.prototype.measure=function(){},Be.prototype.Fz=function(t,e,n,i,l){t.measure(e,n,i,l)},Be.prototype.arrange=function(){},Be.prototype.sy=function(t,e,n,i,l,u){t.arrange(e,n,i,l,u)},Be.prototype.Pz=function(t){t.Mj()},Be.prototype.tc=function(){},Mt.Object.defineProperties(Be.prototype,{name:{get:function(){return this.va},set:function(t){this.va=t}},classType:{get:function(){return $}}}),Be.prototype.remeasureObject=Be.prototype.Pz,Be.prototype.arrangeElement=Be.prototype.sy,Be.prototype.measureElement=Be.prototype.Fz,Be.className="PanelLayout",Ht(rl,Be),rl.prototype.measure=function(t,e,n,i,l,u,h){var f=i.length;t=Kr(t);for(var p=0;p<f;p++){var g=i[p];if(g.visible||g===t){var m=g.margin,v=m.right+m.left;m=m.top+m.bottom,g.measure(e,n,u,h);var x=g.measuredBounds;v=Math.max(x.width+v,0),m=Math.max(x.height+m,0),x=g.position.x;var D=g.position.y;isFinite(x)||(x=0),isFinite(D)||(D=0),g instanceof wt&&g.isGeometryPositioned&&(x-=g=g.strokeWidth/2,D-=g),He(l,x,D,v,m)}}},rl.prototype.arrange=function(t,e,n){var i=e.length,l=t.padding;for(t=n.x-l.left,n=n.y-l.top,l=0;l<i;l++){var u=e[l],h=u.measuredBounds,f=u.margin,p=u.position.x,g=u.position.y;if(p=isNaN(p)?-t:p-t,g=isNaN(g)?-n:g-n,u instanceof wt&&u.isGeometryPositioned){var m=u.strokeWidth/2;p-=m,g-=m}u.visible&&u.arrange(p+f.left,g+f.top,h.width,h.height)}},Ht(Jd,Be),Jd.prototype.measure=function(t,e,n,i,l,u,h){var f=i.length;e=oe(),u=Kr(t);for(var p=0;p<f;p++){var g=i[p];if(g.visible||g===u){var m=os(g,!1);if(m!==Le&&m!==Mn)e.push(g);else{g.measure(1/0,n,0,h),m=g.margin,g=g.measuredBounds;var v=Math.max(g.height+m.top+m.bottom,0);l.width+=Math.max(g.width+m.right+m.left,0),l.height=Math.max(l.height,v)}}}for(i=e.length,t.desiredSize.height?n=Math.min(t.desiredSize.height,t.maxSize.height):0!==l.height&&(n=Math.min(l.height,t.maxSize.height)),t=0;t<i;t++)((p=e[t]).visible||p===u)&&(f=(m=p.margin).right+m.left,m=m.top+m.bottom,p.measure(1/0,n,0,h),p=p.measuredBounds,m=Math.max(p.height+m,0),l.width+=Math.max(p.width+f,0),l.height=Math.max(l.height,m));Nt(e)},Jd.prototype.arrange=function(t,e,n){for(var i=e.length,l=t.padding,u=l.top,h=t.isOpposite,f=h?n.width:l.left,p=0;p<i;p++){var g=u,m=e[p];if(m.visible){var v=m.measuredBounds,x=m.margin,D=x.top+x.bottom,M=u+l.bottom,T=v.height,N=os(m,!1);(isNaN(m.desiredSize.height)&&N===Ve||N===Vn)&&(T=Math.max(n.height-D-M,0)),D=T+D+M,(M=m.alignment).Sb()&&(M=t.defaultAlignment),M.pb()||(M=ut),h&&(f-=v.width+x.left+x.right),m.arrange(f+M.offsetX+x.left,g+M.offsetY+x.top+(n.height*M.y-D*M.y),v.width,T),h||(f+=v.width+x.left+x.right)}}},Ht(Qc,Be),Qc.prototype.measure=function(t,e,n,i,l,u){var h=i.length;n=oe();for(var f=Kr(t),p=0;p<h;p++){var g=i[p];if(g.visible||g===f){var m=os(g,!1);if(m!==Le&&m!==Vn)n.push(g);else{var v=g.margin;m=v.right+v.left,v=v.top+v.bottom,g.measure(e,1/0,u,0),g=g.measuredBounds,xl(l,Math.max(l.width,Math.max(g.width+m,0)),l.height+Math.max(g.height+v,0))}}}if(0!==(i=n.length)){for(t.desiredSize.width?e=Math.min(t.desiredSize.width,t.maxSize.width):0!==l.width&&(e=Math.min(l.width,t.maxSize.width)),t=0;t<i;t++)((p=n[t]).visible||p===f)&&(h=(g=p.margin).right+g.left,g=g.top+g.bottom,p.measure(e,1/0,u,0),p=p.measuredBounds,g=Math.max(p.height+g,0),l.width=Math.max(l.width,Math.max(p.width+h,0)),l.height+=g);Nt(n)}},Qc.prototype.arrange=function(t,e,n){for(var i=e.length,l=t.padding,u=l.left,h=t.isOpposite,f=h?n.height:l.top,p=0;p<i;p++){var g=u,m=e[p];if(m.visible){var v=m.measuredBounds,x=m.margin,D=x.left+x.right,M=u+l.right,T=v.width,N=os(m,!1);(isNaN(m.desiredSize.width)&&N===Ve||N===Mn)&&(T=Math.max(n.width-D-M,0)),D=T+D+M,(M=m.alignment).Sb()&&(M=t.defaultAlignment),M.pb()||(M=ut),h&&(f-=v.height+x.bottom+x.top),m.arrange(g+M.offsetX+x.left+(n.width*M.x-D*M.x),f+M.offsetY+x.top,T,v.height),h||(f+=v.height+x.bottom+x.top)}}},Ht(Ug,Be),Ug.prototype.measure=function(t,e,n,i,l,u,h){var f=i.length,p=t.vb(),g=p.margin,m=g.right+g.left,v=g.top+g.bottom;p.measure(e,n,u,h);var x=p.measuredBounds;u=x.width,h=x.height;var D=Math.max(u+m,0),M=Math.max(h+v,0),T=t.isClipping,N=B.allocAt(-g.left,-g.top,D,M),I=B.allocAt(0,0,u,h);zv(p,I,!0),u=I.width,h=I.height;for(var k=!0,O=Kr(t),L=0;L<f;L++){var b=i[L],U=e,X=n;if(b!==p&&(b.visible||b===O)){switch(D=(g=b.margin).right+g.left,M=g.top+g.bottom,x=os(b,!1)){case Ve:U=u,X=h;break;case Mn:U=u;break;case Vn:X=h}b.measure(U,X,0,0),x=b.measuredBounds,D=Math.max(x.width+D,0),M=Math.max(x.height+M,0),(U=b.alignment).Sb()&&(U=t.defaultAlignment),U.pb()||(U=ut);var nt=b.alignmentFocus;nt.Sb()&&(nt=ut),X=null,b instanceof $&&""!==b.Pe&&(X=b.fb(b.Pe))===b&&(X=null);var et=I.x,Q=I.y;if(null!==X){for(b.arrange(0,0,x.width,x.height),g=P.allocAt((g=X.actualBounds).x+(nt.x*g.width-nt.offsetX),g.y+(nt.y*g.height-nt.offsetY)),X=X.panel;X!==b;)X.transform.Fa(g),X=X.panel;et+=U.x*u+U.offsetX-g.x,Q+=U.y*h+U.offsetY-g.y,P.free(g)}else et+=U.x*u+U.offsetX-(nt.x*x.width+nt.offsetX)-g.left,Q+=U.y*h+U.offsetY-(nt.y*x.height+nt.offsetY)-g.top;k?(k=!1,l.h(et,Q,D,M)):He(l,et,Q,D,M)}}switch(k?l.assign(N):T?l.Gu(I.x,I.y,I.width,I.height):He(l,N.x,N.y,N.width,N.height),B.free(N),B.free(I),(x=p.stretch)===$r&&(x=os(p,!1)),x){case Le:return;case Ve:if(!isFinite(e)&&!isFinite(n))return;break;case Mn:if(!isFinite(e))return;break;case Vn:if(!isFinite(n))return}for(u=(x=p.measuredBounds).width,h=x.height,D=Math.max(u+m,0),M=Math.max(h+v,0),zv(p,I=B.allocAt(-(g=p.margin).left,-g.top,D,M),!0),u=I.width,h=I.height,e=0;e<f;e++)(n=i[e])===p||!n.visible&&n!==O||(D=(g=n.margin).right+g.left,M=g.top+g.bottom,x=n.measuredBounds,D=Math.max(x.width+D,0),M=Math.max(x.height+M,0),(m=n.alignment).Sb()&&(m=t.defaultAlignment),m.pb()||(m=ut),(n=n.alignmentFocus).Sb()&&(n=ut),k?(k=!1,l.h(m.x*u+m.offsetX-(n.x*x.width+n.offsetX)-g.left,m.y*h+m.offsetY-(n.y*x.height+n.offsetY)-g.top,D,M)):He(l,m.x*u+m.offsetX-(n.x*x.width+n.offsetX)-g.left,m.y*h+m.offsetY-(n.y*x.height+n.offsetY)-g.top,D,M));k?l.assign(N):T?l.Gu(I.x,I.y,I.width,I.height):He(l,N.x,N.y,N.width,N.height),B.free(I)},Ug.prototype.arrange=function(t,e,n){var i=e.length,l=t.vb(),u=l.measuredBounds,h=u.width,f=u.height,p=t.padding,g=(u=p.left)-n.x,m=(p=p.top)-n.y;for(l.arrange(g,m,h,f),zv(l,h=B.allocAt(0,0,h,f),!1),f=0;f<i;f++){var v=e[f];if(v!==l){var x=(g=v.measuredBounds).width,D=g.height;(m=v.alignment).Sb()&&(m=t.defaultAlignment),m.pb()||(m=ut);var M=v.alignmentFocus;if(M.Sb()&&(M=ut),g=null,v instanceof $&&""!==v.Pe&&(g=v.fb(v.Pe))===v&&(g=null),null!==g){var T=g.actualBounds;for(M=P.allocAt(T.x+(M.x*T.width-M.offsetX),T.y+(M.y*T.height-M.offsetY)),g=g.panel;g!==v;)g.transform.Fa(M),g=g.panel;g=m.x*h.width+m.offsetX-M.x,m=m.y*h.height+m.offsetY-M.y,P.free(M)}else g=m.x*h.width+m.offsetX-(M.x*x+M.offsetX),m=m.y*h.height+m.offsetY-(M.y*D+M.offsetY);g+=h.x-n.x,m+=h.y-n.y,v.visible&&v.arrange(u+g,p+m,x,D)}}B.free(h)},Ht(Zd,Be),Zd.prototype.measure=function(t,e,n,i,l,u,h){var f=i.length,p=t.vb(),g=p.margin,m=e,v=n,x=g.right+g.left,D=g.top+g.bottom;p.measure(e,n,u,h),g=p.measuredBounds;var M=0,T=null;p instanceof wt&&(M=(T=p).strokeWidth*T.scale);var N=Math.max(g.width+x,0);g=Math.max(g.height+D,0);var I=Ch(p),k=I.x*N+I.offsetX;I=I.y*g+I.offsetY;var O=Xv(p),L=O.x*N+O.offsetX;for(O=O.y*g+O.offsetY,isFinite(e)&&(m=Math.max(Math.abs(k-L)-M,0)),isFinite(n)&&(v=Math.max(Math.abs(I-O)-M,0)),(M=dt.alloc()).h(0,0),t=Kr(t),O=0;O<f;O++)(I=i[O])===p||!I.visible&&I!==t||(N=(g=I.margin).right+g.left,k=g.top+g.bottom,I.measure(m,v,0,0),g=I.measuredBounds,N=Math.max(g.width+N,0),g=Math.max(g.height+k,0),M.h(Math.max(N,M.width),Math.max(g,M.height)));if(1===f)l.width=N,l.height=g,dt.free(M);else{switch(I=Ch(p),f=i=0,(O=Xv(p)).x!==I.x&&O.y!==I.y&&(i=M.width/Math.abs(O.x-I.x),f=M.height/Math.abs(O.y-I.y)),dt.free(M),M=0,null!==T&&(M=T.strokeWidth*T.scale,Qv(T)===Ps&&(i=f=Math.max(i,f))),i+=Math.abs(I.offsetX)+Math.abs(O.offsetX)+M,f+=Math.abs(I.offsetY)+Math.abs(O.offsetY)+M,(T=p.stretch)===$r&&(T=os(p,!1)),T){case Le:h=u=0;break;case Ve:isFinite(e)&&(i=e),isFinite(n)&&(f=n);break;case Mn:isFinite(e)&&(i=e),h=0;break;case Vn:u=0,isFinite(n)&&(f=n)}p.Mj(),p.measure(i,f,u,h),l.width=p.measuredBounds.width+x,l.height=p.measuredBounds.height+D}},Zd.prototype.arrange=function(t,e){var n=e.length,i=t.vb(),l=i.measuredBounds,u=B.alloc();u.h(0,0,1,1);var h=i.margin,f=h.left,p=t.padding,g=p.left;i.arrange(g+f,(p=p.top)+(h=h.top),l.width,l.height);var m=Ch(i),v=Xv(i),x=m.y*l.height+m.offsetY,D=v.x*l.width+v.offsetX;for(v=v.y*l.height+v.offsetY,u.x=m.x*l.width+m.offsetX,u.y=x,He(u,D,v,0,0),u.x+=f+g,u.y+=h+p,l=0;l<n;l++)(f=e[l])!==i&&(g=f.measuredBounds,h=f.margin,p=Math.max(g.width+h.right+h.left,0),m=Math.max(g.height+h.top+h.bottom,0),(x=f.alignment).Sb()&&(x=t.defaultAlignment),x.pb()||(x=ut),p=u.width*x.x+x.offsetX-p*x.x+h.left+u.x,h=u.height*x.y+x.offsetY-m*x.y+h.top+u.y,f.visible&&(ur(u.x,u.y,u.width,u.height,p,h,g.width,g.height)?f.arrange(p,h,g.width,g.height):f.arrange(p,h,g.width,g.height,new B(u.x,u.y,u.width,u.height))));B.free(u)},Ht(Ca,Be),Ca.prototype.measure=function(t,e,n,i,l){for(var u=i.length,h=oe(),f=oe(),p=0;p<u;p++){var g=i[p],m=g instanceof $?g:null;if(null===m||m.type!==$.TableRow&&m.type!==$.TableColumn||!g.visible)h.push(g);else{f.push(m);for(var v=m.R.s,x=v.length,D=0;D<x;D++){var M=v[D];m.type===$.TableRow?M.row=g.row:m.type===$.TableColumn&&(M.column=g.column),h.push(M)}}}0===(u=h.length)&&(t.getRowDefinition(0),t.getColumnDefinition(0));for(var T=[],N=0;N<u;N++){var I=h[N];I.visible&&(Qi(I,!0),As(I,!0),T[I.row]||(T[I.row]=[]),T[I.row][I.column]||(T[I.row][I.column]=[]),T[I.row][I.column].push(I))}Nt(h);var k=oe(),O=oe(),L=oe(),b={count:0},U={count:0},X=e,nt=n,et=t.rowDefs,Q=t.colDefs,G=null;u=et.length;for(var xt=0;xt<u;xt++)void 0!==(G=et[xt])&&(G.actual=0);u=Q.length;for(var ft=0;ft<u;ft++)void 0!==(G=Q[ft])&&(G.actual=0);for(var At=T.length,ie=0,pe=0;pe<At;pe++)T[pe]&&(ie=Math.max(ie,T[pe].length));var mn=Math.min(t.topIndex,At-1),ei=Math.min(t.leftIndex,ie-1),un=0;At=T.length;for(var La=Kr(t),mt=0;mt<At;mt++)if(T[mt]){ie=T[mt].length;var Uo=t.getRowDefinition(mt);Uo.actual=0;for(var si=Uo.jc=0;si<ie;si++)if(T[mt][si]){var Wl=t.getColumnDefinition(si);void 0===k[si]&&(Wl.actual=0,Wl.jc=0,k[si]=!0);for(var li=T[mt][si],qr=li.length,Ci=0;Ci<qr;Ci++){var ai=li[Ci];if(ai.visible||ai===La){var dn=1<ai.rowSpan||1<ai.columnSpan;dn&&(mt<mn||si<ei||O.push(ai));var ps=ai.margin,zh=ps.right+ps.left,$i=ps.top+ps.bottom,ui=Rg(ai,Uo,Wl,!1),Hf=ai.desiredSize,Ou=!isNaN(Hf.height),Ho=!isNaN(Hf.width)&&Ou;if(dn||ui===Le||Ho||mt<mn||si<ei||(void 0!==b[si]||ui!==Ve&&ui!==Mn||(b[si]=-1,b.count++),void 0!==U[mt]||ui!==Ve&&ui!==Vn||(U[mt]=-1,U.count++),L.push(ai)),ai.measure(1/0,1/0,0,0),!(mt<mn||si<ei)){var ki=ai.measuredBounds,Lu=Math.max(ki.width+zh,0),or=Math.max(ki.height+$i,0);if(1===ai.rowSpan&&(ui===Le||ui===Mn)){var ba=(G=t.getRowDefinition(mt)).Qc();(un=Math.max(or-G.actual,0))+ba>nt&&(un=Math.max(nt-ba,0));var bu=0===G.ma;G.jc=G.jc+un,G.actual=G.ma+un,nt=Math.max(nt-(un+(bu?ba:0)),0)}if(1===ai.columnSpan&&(ui===Le||ui===Vn)){var Gp=(G=t.getColumnDefinition(si)).Qc();(un=Math.max(Lu-G.actual,0))+Gp>X&&(un=Math.max(X-Gp,0));var rw=0===G.ma;G.jc=G.jc+un,G.actual=G.ma+un,X=Math.max(X-(un+(rw?Gp:0)),0)}dn&&ai.Mj()}}}}}Nt(k);var Vs=0,Go=0;u=t.columnCount;for(var Fu=0;Fu<u;Fu++){var Yl=Q[Fu];void 0!==Yl&&(Vs+=isNaN(Yl.Ac)?Yl.jc:Yl.Ac,0!==Yl.jc&&(Vs+=Yl.Qc()))}u=t.rowCount;for(var $h=0;$h<u;$h++){var Fa=et[$h];void 0!==Fa&&(Go+=isNaN(Fa.Ac)?Fa.jc:Fa.Ac,0!==Fa.jc&&(Go+=Fa.Qc()))}X=Math.max(e-Vs,0);var to=nt=Math.max(n-Go,0),zo=X;u=L.length;for(var Wi=0;Wi<u;Wi++){var gs=L[Wi],vy=t.getRowDefinition(gs.row),Bs=t.getColumnDefinition(gs.column),Wh=gs.measuredBounds,vo=gs.margin,$o=vo.top+vo.bottom;b[gs.column]=0===Bs.jc&&void 0!==b[gs.column]?Math.max(Wh.width+(vo.right+vo.left),b[gs.column]):null,U[gs.row]=0===vy.jc&&void 0!==U[gs.row]?Math.max(Wh.height+$o,U[gs.row]):null}var Wo,Yh=0,Gf=0;for(Wo in U)"count"!==Wo&&(Yh+=U[Wo]);for(Wo in b)"count"!==Wo&&(Gf+=b[Wo]);for(var On=dt.alloc(),wy=0;wy<u;wy++){var Oi=L[wy];if(Oi.visible||Oi===La){var Fe=t.getRowDefinition(Oi.row),$n=t.getColumnDefinition(Oi.column),dl=0;isFinite($n.width)?dl=$n.width:(dl=isFinite(X)&&null!==b[Oi.column]?0===Gf?$n.actual+X:b[Oi.column]/Gf*zo:null!==b[Oi.column]?X:$n.actual||X,dl=Math.max(0,dl-$n.Qc()));var Kl=0;switch(isFinite(Fe.height)?Kl=Fe.height:(Kl=isFinite(nt)&&null!==U[Oi.row]?0===Yh?Fe.actual+nt:U[Oi.row]/Yh*to:null!==U[Oi.row]?nt:Fe.actual||nt,Kl=Math.max(0,Kl-Fe.Qc())),On.h(Math.max($n.minimum,Math.min(dl,$n.maximum)),Math.max(Fe.minimum,Math.min(Kl,Fe.maximum))),ui=Rg(Oi,Fe,$n,!1)){case Mn:On.height=Math.max(On.height,Fe.actual+nt);break;case Vn:On.width=Math.max(On.width,$n.actual+X)}var Ra=Oi.margin,Kh=Ra.right+Ra.left,xy=Ra.top+Ra.bottom;Oi.Mj(),Oi.measure(On.width,On.height,$n.minimum,Fe.minimum);var zf=Oi.measuredBounds,ju=Math.max(zf.width+Kh,0),Xh=Math.max(zf.height+xy,0);isFinite(X)&&(ju=Math.min(ju,On.width)),isFinite(nt)&&(Xh=Math.min(Xh,On.height));var Yi=0;Yi=Fe.actual,Fe.actual=Math.max(Fe.actual,Xh),Fe.jc=Math.max(Fe.jc,Xh),un=Fe.actual-Yi,nt=Math.max(nt-un,0),null===U[Oi.row]&&(to=Math.max(to-un,0)),Yi=$n.actual,$n.actual=Math.max($n.actual,ju),$n.jc=Math.max($n.jc,ju),un=$n.actual-Yi,X=Math.max(X-un,0),null===b[Oi.column]&&(zo=Math.max(zo-un,0))}}Nt(L);var Us=dt.alloc(),Yo=oe(),Or=oe();if(0!==(u=O.length))for(var ms=0;ms<At;ms++)if(T[ms]){ie=T[ms].length;var $f=t.getRowDefinition(ms);Yo[ms]=$f.actual;for(var Xl=0;Xl<ie;Xl++)if(T[ms][Xl]){var Cy=t.getColumnDefinition(Xl);Or[Xl]=Cy.actual}}for(var Jh=0;Jh<u;Jh++){var Ee=O[Jh];if(Ee.visible||Ee===La){var eo=t.getRowDefinition(Ee.row),no=t.getColumnDefinition(Ee.column);switch(On.h(Math.max(no.minimum,Math.min(e,no.maximum)),Math.max(eo.minimum,Math.min(n,eo.maximum))),ui=Rg(Ee,eo,no,!1)){case Ve:0!==Or[no.index]&&(On.width=Math.min(On.width,Or[no.index])),0!==Yo[eo.index]&&(On.height=Math.min(On.height,Yo[eo.index]));break;case Mn:0!==Or[no.index]&&(On.width=Math.min(On.width,Or[no.index]));break;case Vn:0!==Yo[eo.index]&&(On.height=Math.min(On.height,Yo[eo.index]))}isFinite(no.width)&&(On.width=no.width),isFinite(eo.height)&&(On.height=eo.height),Us.h(0,0);for(var Wf=no.minimum,sr=eo.minimum,pl=1;pl<Ee.rowSpan&&!(Ee.row+pl>=t.rowCount);pl++)G=t.getRowDefinition(Ee.row+pl),un=0,un=ui===Ve||ui===Vn?Math.max(G.minimum,0===Yo[Ee.row+pl]?G.maximum:Math.min(Yo[Ee.row+pl],G.maximum)):Math.max(G.minimum,isNaN(G.Ac)?G.maximum:Math.min(G.Ac,G.maximum)),Us.height+=un,sr+=G.minimum;for(var Lr=1;Lr<Ee.columnSpan&&!(Ee.column+Lr>=t.columnCount);Lr++)G=t.getColumnDefinition(Ee.column+Lr),un=0,un=ui===Ve||ui===Mn?Math.max(G.minimum,0===Or[Ee.column+Lr]?G.maximum:Math.min(Or[Ee.column+Lr],G.maximum)):Math.max(G.minimum,isNaN(G.Ac)?G.maximum:Math.min(G.Ac,G.maximum)),Us.width+=un,Wf+=G.minimum;On.width+=Us.width,On.height+=Us.height;var Yf=Ee.margin,ja=Yf.right+Yf.left,zp=Yf.top+Yf.bottom;Ee.measure(On.width,On.height,Wf,sr);for(var Vu=Ee.measuredBounds,ys=Math.max(Vu.width+ja,0),Va=Math.max(Vu.height+zp,0),Ba=0,Kf=0;Kf<Ee.rowSpan&&!(Ee.row+Kf>=t.rowCount);Kf++)Ba+=(G=t.getRowDefinition(Ee.row+Kf)).total||0;if(Ba<Va){var Jl=Va-Ba,Hs=Va-Ba;if(null!==Ee.spanAllocation)for(var Zl=Ee.spanAllocation,gl=0;gl<Ee.rowSpan&&!(0>=Jl)&&!(Ee.row+gl>=t.rowCount);gl++){var Ql=(G=t.getRowDefinition(Ee.row+gl)).ma||0,Bu=Zl(Ee,G,Hs);G.actual=Math.min(G.maximum,Ql+Bu),G.ma!==Ql&&(Jl-=G.ma-Ql)}for(;0<Jl;){var wo=G.ma||0;if(isNaN(G.height)&&G.maximum>wo&&(G.actual=Math.min(G.maximum,wo+Jl),G.ma!==wo&&(Jl-=G.ma-wo)),0===G.index)break;G=t.getRowDefinition(G.index-1)}}for(var Uu=0,ql=0;ql<Ee.columnSpan&&!(Ee.column+ql>=t.columnCount);ql++)Uu+=(G=t.getColumnDefinition(Ee.column+ql)).total||0;if(Uu<ys){var Zh=ys-Uu,My=ys-Uu;if(null!==Ee.spanAllocation)for(var ml=Ee.spanAllocation,Hu=0;Hu<Ee.columnSpan&&!(0>=Zh)&&!(Ee.column+Hu>=t.columnCount);Hu++){var $p=(G=t.getColumnDefinition(Ee.column+Hu)).ma||0,Wp=ml(Ee,G,My);G.actual=Math.min(G.maximum,$p+Wp),G.ma!==$p&&(Zh-=G.ma-$p)}for(;0<Zh;){var Xf=G.ma||0;if(isNaN(G.width)&&G.maximum>Xf&&(G.actual=Math.min(G.maximum,Xf+Zh),G.ma!==Xf&&(Zh-=G.ma-Xf)),0===G.index)break;G=t.getColumnDefinition(G.index-1)}}}}Nt(O),dt.free(Us),dt.free(On),void 0!==Yo&&Nt(Yo),void 0!==Or&&Nt(Or);var Gu=0,Ua=0,Dy=t.desiredSize,Y1=t.maxSize;ui=os(t,!0);var Qh=Go=Vs=0,Yp=0;u=t.columnCount;for(var Dn=0;Dn<u;Dn++)void 0!==Q[Dn]&&(G=t.getColumnDefinition(Dn),isFinite(G.width)?(Qh+=G.width,Qh+=G.Qc()):ef(G)===ep?(Qh+=G.ma,Qh+=G.Qc()):0!==G.ma&&(Vs+=G.ma,Vs+=G.Qc()));Gu=isFinite(Dy.width)?Math.min(Dy.width,Y1.width):ui!==Le&&isFinite(e)?e:Vs,Gu=Math.max(Gu,t.minSize.width),Gu=Math.max(Gu-Qh,0);for(var qh=0===Vs?1:Math.max(Gu/Vs,1),Kp=0;Kp<u;Kp++)void 0!==Q[Kp]&&(G=t.getColumnDefinition(Kp),isFinite(G.width)||ef(G)===ep||(G.actual=G.ma*qh),G.position=l.width,0!==G.ma&&(l.width+=G.ma,l.width+=G.Qc()));u=t.rowCount;for(var Sy=0;Sy<u;Sy++)void 0!==et[Sy]&&(G=t.getRowDefinition(Sy),isFinite(G.height)?(Yp+=G.height,Yp+=G.Qc()):ef(G)===ep?(Yp+=G.ma,Yp+=G.Qc()):0!==G.ma&&(Go+=G.ma,Go+=G.Qc()));Ua=isFinite(Dy.height)?Math.min(Dy.height,Y1.height):ui!==Le&&isFinite(n)?n:Go,Ua=Math.max(Ua,t.minSize.height),Ua=Math.max(Ua-Yp,0);for(var yT=0===Go?1:Math.max(Ua/Go,1),Xp=0;Xp<u;Xp++)void 0!==et[Xp]&&(G=t.getRowDefinition(Xp),isFinite(G.height)||ef(G)===ep||(G.actual=G.ma*yT),G.position=l.height,0!==G.ma&&(l.height+=G.ma,l.height+=G.Qc()));u=f.length;for(var Jp=0;Jp<u;Jp++){var Zp=f[Jp],Jf=0,ow=0;Zp.type===$.TableRow?(Jf=l.width,ow=(G=t.getRowDefinition(Zp.row)).actual):(Jf=(G=t.getColumnDefinition(Zp.column)).actual,ow=l.height),Zp.measuredBounds.h(0,0,Jf,ow),Qi(Zp,!1)}Nt(f),t.inRowsCols=T},Ca.prototype.arrange=function(t,e,n){var i=e.length,l=t.padding,u=l.left;l=l.top;var h=t.inRowsCols;if(null!==h){for(var f,p,g=h.length,m=0,v=0;v<g;v++)h[v]&&(m=Math.max(m,h[v].length));p=t.rowDefs,f=t.colDefs;var x=v=0,D=Math.min(t.topIndex,g-1);if(0<p.length){for(;D!==g&&(void 0===p[D]||0===p[D].ma);)D++;v=-p[D=Math.max(Math.min(D,g-1),0)].position}var M=Math.min(t.leftIndex,m-1);if(0<f.length){for(;M!==m&&(void 0===f[M]||0===f[M].ma);)M++;x=-f[M=Math.max(Math.min(M,m-1),0)].position}for(var T=0,N=0;T!==g&&void 0===p[T];)T++;for(;N!==g&&void 0===f[N];)N++;m=t.part,t.getRowDefinition(T),t.getColumnDefinition(N);for(var I=0;I<e.length;I++){var k=e[I];if(k instanceof $&&k.visible&&(k.type===$.TableRow||k.type===$.TableColumn)){if(k.type===$.TableRow){f=t.getRowDefinition(k.row);var O=t.getColumnDefinition(N)}else f=t.getRowDefinition(T),O=t.getColumnDefinition(k.column);p=f.position+v+l,0!==f.ma&&(p+=f.mo(Math.max(T,D))),f=O.position+x+u,0!==O.ma&&(f+=O.mo(Math.max(N,M))),O=k.measuredBounds,k.Jk(),k.actualBounds.ja();var L=k.actualBounds,b=B.allocAt(L.x,L.y,L.width,L.height);L.x=k.type===$.TableRow?u:f,L.y=k.type===$.TableColumn?l:p,L.width=O.width,L.height=O.height,k.actualBounds.freeze(),As(k,!1),wc(b,L)||null===m||(m.dh(),k.wn(m)),B.free(b)}}for(I=dt.alloc(),k=0;k<g;k++)if(h[k])for(m=h[k].length,p=(O=t.getRowDefinition(k)).position+v+l,0!==O.ma&&(p+=O.mo(Math.max(T,D))),L=0;L<m;L++)if(h[k][L]){f=(b=t.getColumnDefinition(L)).position+x+u,0!==b.ma&&(f+=b.mo(Math.max(N,M)));for(var U=h[k][L],X=U.length,nt=0;nt<X;nt++){var et=U[nt],Q=et.measuredBounds;I.h(0,0);for(var G=1;G<et.rowSpan&&!(k+G>=t.rowCount);G++){var xt=t.getRowDefinition(k+G);0!==xt.ma&&(I.height+=xt.total)}for(G=1;G<et.columnSpan&&!(L+G>=t.columnCount);G++)0!==(xt=t.getColumnDefinition(L+G)).ma&&(I.width+=xt.total);var ft=b.ma+I.width,At=O.ma+I.height;G=f,xt=p;var ie=ft,pe=At,mn=f,ei=p,un=ft,La=At;f+ft>n.width&&(un=Math.max(n.width-f,0)),p+At>n.height&&(La=Math.max(n.height-p,0));var mt=et.alignment;if(mt.Sb()){(mt=t.defaultAlignment).pb()||(mt=ut);var Uo=mt.x,si=mt.y,Wl=mt.offsetX;mt=mt.offsetY;var li=b.alignment,qr=O.alignment;li.pb()&&(Uo=li.x,Wl=li.offsetX),qr.pb()&&(si=qr.y,mt=qr.offsetY)}else Uo=mt.x,si=mt.y,Wl=mt.offsetX,mt=mt.offsetY;(isNaN(Uo)||isNaN(si))&&(si=Uo=.5,mt=Wl=0),li=Q.width,qr=Q.height;var Ci=et.margin,ai=Ci.left+Ci.right,dn=Ci.top+Ci.bottom,ps=Rg(et,O,b,!1);!isNaN(et.desiredSize.width)||ps!==Ve&&ps!==Mn||(li=Math.max(ft-ai,0)),!isNaN(et.desiredSize.height)||ps!==Ve&&ps!==Vn||(qr=Math.max(At-dn,0)),ft=et.maxSize,At=et.minSize,li=Math.min(ft.width,li),qr=Math.min(ft.height,qr),li=Math.max(At.width,li),qr=Math.max(At.height,qr),G+=ie*Uo-(li+ai)*Uo+Wl+Ci.left,xt+=pe*si-(ft=qr+dn)*si+mt+Ci.top,et.visible&&(ur(mn,ei,un,La,G,xt,Q.width,Q.height)?et.arrange(G,xt,li,qr):et.arrange(G,xt,li,qr,new B(mn,ei,un,La)))}}for(dt.free(I),t=0;t<i;t++)null===(u=(n=e[t])instanceof $?n:null)||u.type!==$.TableRow&&u.type!==$.TableColumn||(u=n.actualBounds,n.naturalBounds.ja(),n.naturalBounds.h(0,0,u.width,u.height),n.naturalBounds.freeze())}},Ht(Hg,Be),Hg.prototype.measure=function(){},Hg.prototype.arrange=function(){},Ht(Gg,Be),Gg.prototype.measure=function(){},Gg.prototype.arrange=function(){},Ht(zg,Be),zg.prototype.measure=function(t,e,n,i,l,u,h){1<i.length&&Y("Viewbox Panel cannot contain more than one GraphObject."),(i=i[0]).xa=1,i.Mj(),i.measure(1/0,1/0,u,h);var f=i.measuredBounds,p=i.margin,g=p.right+p.left;if(p=p.top+p.bottom,isFinite(e)||isFinite(n)){var m=i.scale,v=f.width;f=f.height;var x=Math.max(e-g,0),D=Math.max(n-p,0),M=1;t.viewboxStretch===Ps?0!==v&&0!==f&&(M=Math.min(x/v,D/f)):0!==v&&0!==f&&(M=Math.max(x/v,D/f)),0===M&&(M=1e-4),i.xa*=M,m!==i.scale&&(Qi(i,!0),i.measure(1/0,1/0,u,h))}f=i.measuredBounds,l.width=isFinite(e)?e:Math.max(f.width+g,0),l.height=isFinite(n)?n:Math.max(f.height+p,0)},zg.prototype.arrange=function(t,e,n){var i=(e=e[0]).measuredBounds,l=e.margin,u=Math.max(i.width+(l.right+l.left),0);l=Math.max(i.height+(l.top+l.bottom),0);var h=e.alignment;h.Sb()&&(h=t.defaultAlignment),h.pb()||(h=ut),e.arrange(n.width*h.x-u*h.x+h.offsetX,n.height*h.y-l*h.y+h.offsetY,i.width,i.height)},Ht(Qd,Be),Qd.prototype.measure=function(){},Qd.prototype.arrange=function(){},Qd.prototype.tc=function(t,e,n){0>=(n=t.uf()*n.scale)&&(n=1);var i=t.gridCellSize,l=i.width;i=i.height;var u=t.naturalBounds,h=t.actualBounds,f=u.width,p=u.height,g=Math.ceil(f/l),m=Math.ceil(p/i),v=t.gridOrigin,x=v.x;v=v.y,e.save(),e.beginPath(),e.rect(0,0,f,p),e.clip();for(var D=[],M=t.R.s,T=M.length,N=0;N<T;N++){var I=M[N],k=[];if(D.push(k),I.visible){var O=I.interval;if(!(0>O)){I=Wv(I.figure);for(var L=0;L<T;L++)if(L!==N){var b=M[L];b.visible&&Wv(b.figure)===I&&(b=b.interval)>O&&k.push(b)}}}}for(T=(M=t.R.s).length,N=0;N<T;N++){var U=M[N];if(U.visible&&(k=U.interval||1,!(2>l*(I=Math.abs(k))*n))){if(O=U.segmentIndex,(!isFinite(O)||isNaN(O))&&(O=0),0>O&&(O=I-Math.min(-O,I)),O=Math.round(O%I),L=1,1!==(I=U.opacity)){if(0===I)continue;e.globalAlpha=(L=e.globalAlpha)*I}b=D[N];var X=!1,nt=U.strokeDashArray;if(null!==nt&&(X=!0,e.Gr(nt,U.strokeDashOffset)),"LineV"===U.figure&&null!==U.stroke&&0<U.strokeWidth){for(e.lineWidth=U.strokeWidth,gi(t,e,U.stroke,!1,!1,u,h),e.beginPath(),nt=U=Math.floor((x-l)/l);nt<=U+g;nt++){var et=nt*l+x;0<=et&&et<=f&&qc(nt,k,O,b)&&(e.moveTo(et,0),e.lineTo(et,p))}e.stroke()}else if("LineH"===U.figure&&null!==U.stroke&&0<U.strokeWidth){for(e.lineWidth=U.strokeWidth,gi(t,e,U.stroke,!1,!1,u,h),e.beginPath(),nt=U=Math.floor((v-i)/i);nt<=U+m;nt++)0<=(et=nt*i+v)&&et<=p&&qc(nt,k,O,b)&&(e.moveTo(0,et),e.lineTo(f,et));e.stroke()}else if("BarV"===U.figure&&null!==U.fill)for(gi(t,e,U.fill,!0,!1,u,h),U=U.width,isNaN(U)&&(U=l),et=nt=Math.floor((x-l)/l);et<=nt+g;et++){var Q=et*l+x;0<=Q+U&&Q<=f&&qc(et,k,O,b)&&e.fillRect(Q,0,U,p)}else if("BarH"===U.figure&&null!==U.fill)for(gi(t,e,U.fill,!0,!1,u,h),U=U.height,isNaN(U)&&(U=i),et=nt=Math.floor((v-i)/i);et<=nt+m;et++)0<=(Q=et*i+v)+U&&Q<=p&&qc(et,k,O,b)&&e.fillRect(0,Q,f,U);X&&e.Er(),1!==I&&(e.globalAlpha=L)}}e.restore(),e.Oc(!1)},Ht($g,Be),$g.prototype.measure=function(t,e,n,i,l){var u=i.length;if(t instanceof Pt||t instanceof H){var h=null,f=null;if(t instanceof H&&(h=t),t instanceof Pt&&(h=(f=t).adornedPart,null===t.j&&(t.j=[])),h instanceof H){var p=h;if(0===u)xl(t.naturalBounds,0,0),t.measuredBounds.h(0,0,0,0);else{var g=t instanceof Pt?null:h.path;(n=t.bg).h(0,0,(e=h.routeBounds).width,e.height);var m=p.points,v=h.pointsCount;null!==f?f.Rj(!1):null!==h&&h.Rj(!1),f=e.width;var x=e.height,D=t.j;if(D.length=0,null!==g){$v(t,f,x,g);var M=g.measuredBounds;n.Xc(M),D.push(M)}M=Dt.alloc();for(var T=P.alloc(),N=P.alloc(),I=0;I<u;I++){var k=i[I];if(k!==g)if(k.isPanelMain&&k instanceof wt){$v(t,f,x,k);var O=k.measuredBounds;n.Xc(O),D.push(O)}else if(2>v)k.measure(1/0,1/0,0,0),n.Xc(O=k.measuredBounds),D.push(O);else{var L=k.segmentIndex,b=k.segmentFraction,U=k.alignmentFocus;U.Fc()&&(U=ut);var X=k.segmentOrientation,nt=k.segmentOffset;if(isNaN(L)){var et=p.sa;O=oe(),et.Cu(b,O);var Q=P.allocAt(O[0],O[1]);if(Q.add(p.i(0)),(et.type===K.j||null!==(et=et.figures.first()))&&Q.offset(-et.startX,-et.startY),et=O[2],X!==ri){var G=p.computeAngle(k,X,et);k.Gb=G}G=Q.x-e.x;var xt=Q.y-e.y;P.free(Q),Nt(O)}else if(L<-v||L>=v)O=P.alloc(),p.mg(),p.computeMidPoint(O),et=p.midAngle,X!==ri&&(G=p.computeAngle(k,X,et),k.Gb=G),G=O.x-e.x,xt=O.y-e.y,P.free(O);else{if(G=0,0<=L?(xt=m.K(L),O=L<v-1?m.K(L+1):xt):(xt=m.K(G=v+L),O=0<G?m.K(G-1):xt),xt.$a(O)){0<=L?(et=0<L?m.K(L-1):xt,G=L<v-2?m.K(L+2):O):(et=G<v-1?m.K(G+1):xt,G=1<G?m.K(G-2):O),Q=et.rf(xt);var ft=O.rf(G);et=Q>ft+10?0<=L?et.Ya(xt):xt.Ya(et):ft>Q+10?0<=L?O.Ya(G):G.Ya(O):0<=L?et.Ya(G):G.Ya(et)}else et=0<=L?xt.Ya(O):O.Ya(xt);X!==ri&&(G=p.computeAngle(k,X,et),k.Gb=G),G=xt.x+(O.x-xt.x)*b-e.x,xt=xt.y+(O.y-xt.y)*b-e.y}k.measure(1/0,1/0,0,0),O=k.measuredBounds;var At=0;k instanceof wt&&(At=k.strokeWidth),ft=(Q=k.naturalBounds).width+At;var ie=Q.height+At;M.reset(),M.translate(-O.x,-O.y),M.scale(k.scale,k.scale),M.rotate(X===ri?k.angle:et,ft/2,ie/2),X!==pp&&X!==mf||M.rotate(90,ft/2,ie/2),X!==gf&&X!==Eh||M.rotate(-90,ft/2,ie/2),X===I0&&(45<et&&135>et||225<et&&315>et)&&M.rotate(-et,ft/2,ie/2),Q=new B(0,0,ft,ie),T.oi(Q,U),M.Fa(T),U=At/2*k.scale-T.x,k=At/2*k.scale-T.y,N.assign(nt),At=isNaN(nt.x);var pe=isNaN(nt.y);if(At||pe){ft=ft/2+3,ie=ie/2+3;var mn=45<=et&&135>=et,ei=225<=et&&315>=et;X===ri&&(mn||ei)?(N.x=pe?ft:nt.y,N.y=At?ie:nt.x,mn?0<=L||isNaN(L)&&.5>b||!At||(N.y=-ie):ei&&((0<=L||isNaN(L)&&.5>b)&&At&&(N.y=-ie),pe&&(N.x=-ft))):(At&&(N.x=0<=L||isNaN(L)&&.5>b?ft:-ft),pe&&(N.y=-ie),N.rotate(et))}else N.rotate(et);G+=N.x,xt+=N.y,Q.set(O),Q.h(G+U,xt+k,O.width,O.height),D.push(Q),n.Xc(Q)}}if(null!==h)for(i=h.labelNodes;i.next();)i.value.measure(1/0,1/0);t.bg=n,t.position.h(e.x+n.x,e.y+n.y),t.location.h(NaN,NaN),xl(l,n.width||0,n.height||0),Dt.free(M),P.free(T),P.free(N)}}}},$g.prototype.arrange=function(t,e){var n=e.length;if(t instanceof Pt||t instanceof H){var i=t,l=null;t instanceof Pt&&(i=(l=t).adornedPart);var u=t instanceof Pt?null:i.path,h=t.j;if(0!==h.length){var f=0;if(null!==u&&f<h.length){var p=h[f];f++,u.arrange(p.x-t.bg.x,p.y-t.bg.y,p.width,p.height)}for(p=0;p<n;p++){var g=e[p];if(g!==u&&f<h.length){var m=h[f];f++,g.arrange(m.x-t.bg.x,m.y-t.bg.y,m.width,m.height)}}}if(2<=(n=(e=i.points).count)&&t instanceof H)for(u=t.labelNodes;u.next();){var v=t;f=(h=u.value).segmentIndex,p=h.segmentFraction;var x=h.alignmentFocus;if(g=h.segmentOrientation,m=h.segmentOffset,isNaN(f)){var D=v.sa,M=oe();D.Cu(p,M);var T=P.allocAt(M[0],M[1]);T.add(v.i(0)),D.type===K.j||(D=D.figures.first()),T.offset(-D.startX,-D.startY),D=M[2],g!==ri&&(v=v.computeAngle(h,g,D),h.angle=v),v=T.x;var N=T.y;P.free(T),Nt(M)}else if(f<-n||f>=n)N=M=P.alloc(),(D=v).mg(),D.computeMidPoint(N),D=v.midAngle,g!==ri&&(v=v.computeAngle(h,g,D),h.angle=v),v=M.x,N=M.y,P.free(M);else{if(T=0,0<=f?(M=e.s[f],N=f<n-1?e.s[f+1]:M):(M=e.s[T=n+f],N=0<T?e.s[T-1]:M),M.$a(N)){0<=f?(D=0<f?e.s[f-1]:M,T=f<n-2?e.s[f+2]:N):(D=T<n-1?e.s[T+1]:M,T=1<T?e.s[T-2]:N);var I=D.rf(M),k=N.rf(T);D=I>k+10?0<=f?D.Ya(M):M.Ya(D):k>I+10?0<=f?N.Ya(T):T.Ya(N):0<=f?D.Ya(T):T.Ya(D)}else D=0<=f?M.Ya(N):N.Ya(M);g!==ri&&(v=v.computeAngle(h,g,D),h.angle=v),v=M.x+(N.x-M.x)*p,N=M.y+(N.y-M.y)*p}if(x.Wr())h.location=new P(v,N);else{x.Fc()&&(x=ut),(M=Dt.alloc()).reset(),M.scale(h.scale,h.scale),M.rotate(h.angle,0,0);var O=h.naturalBounds;T=B.allocAt(0,0,O.width,O.height),(I=P.alloc()).oi(T,x),M.Fa(I),x=-I.x,k=-I.y;var L=O.width,b=O.height;(O=P.alloc()).assign(m);var U=isNaN(m.x),X=isNaN(m.y);if(U||X){L=L/2+3,b=b/2+3;var nt=45<=D&&135>=D,et=225<=D&&315>=D;g===ri&&(nt||et)?(O.x=X?L:m.y,O.y=U?b:m.x,nt?0<=f||isNaN(f)&&.5>p||!U||(O.y=-b):et&&((0<=f||isNaN(f)&&.5>p)&&U&&(O.y=-b),X&&(O.x=-L))):(U&&(O.x=0<=f||isNaN(f)&&.5>p?L:-L),X&&(O.y=-b),O.rotate(D))}else O.rotate(D);v+=O.x,N+=O.y,M.So(T),f=P.allocAt(v+(x+=T.x),N+(k+=T.y)),h.move(f),P.free(f),P.free(O),P.free(I),B.free(T),Dt.free(M)}}null!==l?l.Rj(!1):i.Rj(!1)}},Ht(qd,Be),qd.prototype.measure=function(t,e,n,i,l,u,h){var f=t.vb();t.graduatedBounds=[];var p=f.margin,g=p.right+p.left,m=p.top+p.bottom;f.measure(e,n,u,h);var v=f.measuredBounds,x=new B(-p.left,-p.top,Math.max(v.width+g,0),Math.max(v.height+m,0));t.graduatedBounds.push(x),l.assign(x);for(var D=f.geometry,M=f.strokeWidth,T=D.flattenedSegments,N=D.flattenedLengths,I=D.flattenedTotalLength,k=T.length,O=0,L=0,b=oe(),U=0;U<k;U++){var X=T[U],nt=[];L=O=0;for(var et=X.length,Q=0;Q<et;Q+=2){var G=X[Q],xt=X[Q+1];if(0!==Q){var ft=180*Math.atan2(xt-L,G-O)/Math.PI;0>ft&&(ft+=360),nt.push(ft)}O=G,L=xt}b.push(nt)}if(null===t.graduatedIntervals){for(var At=[],ie=t.R.s,pe=ie.length,mn=0;mn<pe;mn++){var ei=ie[mn],un=[];if(At.push(un),ei.visible){var La=ei.interval;if(!(0>La))for(var mt=0;mt<pe;mt++)if(mt!==mn){var Uo=ie[mt];if(Uo.visible&&ei.constructor===Uo.constructor){var si=Uo.interval;si>La&&un.push(si)}}}}t.graduatedIntervals=At}var Wl=t.graduatedIntervals,li=t.R.s,qr=li.length,Ci=0,ai=0,dn=I;t.graduatedMarks=[];for(var ps,zh=0;zh<qr;zh++){var $i=li[zh];if(ps=[],$i.visible&&$i!==f){var ui=Math.abs($i.interval),Hf=t.graduatedTickUnit;if(!(2>Hf*ui*I/t.graduatedRange&&null===$i.graduatedSkip)){var Ou=N[0][0],Ho=0,ki=0;ai=I*$i.graduatedStart-1e-4,dn=I*$i.graduatedEnd+1e-4;var Lu=Hf*ui,or=t.graduatedTickBase;if(or<t.graduatedMin){var ba=(t.graduatedMin-or)/Lu;or+=(ba=ba%1==0?ba:Math.floor(ba+1))*Lu}else or>t.graduatedMin+Lu&&(or-=Math.floor((or-t.graduatedMin)/Lu)*Lu);for(var bu=Wl[zh],Gp=or,rw=1e-6*t.graduatedMax,Vs=1;or<=t.graduatedMax+rw;Vs++){t:{for(var Go=bu.length,Fu=0;Fu<Go;Fu++){var Yl=(or-t.graduatedTickBase)%(bu[Fu]*t.graduatedTickUnit),$h=1e-6*t.graduatedTickUnit;if(Yl<$h&&Yl>-$h){var Fa=!1;break t}}Fa=!0}if(Fa&&(or>t.graduatedMax&&(or=t.graduatedMax),null===$i.graduatedSkip||$i instanceof Wt&&!$i.graduatedSkip(or,$i)||$i instanceof wt&&!$i.graduatedSkip(or,$i))&&((Ci=(or-t.graduatedMin)*I/t.graduatedRange)>I&&(Ci=I),ai<=Ci&&Ci<=dn)){for(var to=b[Ho][ki],zo=N[Ho][ki];Ho<N.length;){for(;Ci>Ou&&ki<N[Ho].length-1;)ki++,to=b[Ho][ki],Ou+=zo=N[Ho][ki];if(Ci<=Ou)break;to=b[++Ho][ki=0],Ou+=zo=N[Ho][ki]}var Wi=T[Ho],gs=Wi[2*ki],vy=Wi[2*ki+1],Bs=(Ci-(Ou-zo))/zo,Wh=new P(gs+(Wi[2*ki+2]-gs)*Bs+M/2-D.bounds.x,vy+(Wi[2*ki+3]-vy)*Bs+M/2-D.bounds.y);Wh.scale(f.scale,f.scale);t:{var vo=to,Ru=b[Ho];if(!(.5005>Bs&&.4995<Bs)){var $o=vo;if(.5>Bs?0<ki?$o=Ru[ki-1]:F.ca(Wi[0],Wi[Wi.length-2])&&F.ca(Wi[1],Wi[Wi.length-1])&&($o=Ru[Ru.length-1]):.5<Bs&&(ki+1<Ru.length?$o=Ru[ki+1]:F.ca(Wi[0],Wi[Wi.length-2])&&F.ca(Wi[1],Wi[Wi.length-1])&&($o=Ru[0])),vo!==$o){var Yh=Math.abs(vo-$o);if(180<Yh&&(vo<$o?vo+=360:$o+=360,Yh=Math.abs(vo-$o)),5e-4>Bs||.9995<Bs){to=(vo+$o)/2%360;break t}if(10>Yh){var Gf=1-Math.abs(.5-Bs);to=(vo*Gf+$o*(1-Gf))%360;break t}}}to=vo}if($i instanceof Wt){var Wo="";""!==(Wo=null!==$i.graduatedFunction?null!=(Wo=$i.graduatedFunction(or,$i))?Wo.toString():"":(+or.toFixed(2)).toString())&&ps.push({Hl:Wh,angle:to,text:Wo})}else ps.push({Hl:Wh,angle:to})}or=Gp+Vs*Lu}}}t.graduatedMarks.push(ps)}Nt(b);var On=t.graduatedMarks;if(null!==On)for(var wy=i.length,Oi=0;Oi<wy;Oi++){var Fe=i[Oi],$n=On[Oi];if(Fe.visible&&Fe!==f&&0!==$n.length){if(Fe instanceof wt){var dl=t,Kl=l,Ra=Fe.alignmentFocus;Ra.Fc()&&(Ra=Br);var Kh=Fe.angle;Fe.Gb=0,Fe.measure(1/0,1/0,0,0),Fe.Gb=Kh;var xy=Fe.measuredBounds,zf=xy.width,ju=xy.height,Xh=B.allocAt(0,0,zf,ju),Yi=P.alloc();Yi.oi(Xh,Ra),B.free(Xh);for(var Us=-Yi.x,Yo=-Yi.y,Or=new B,ms=$n.length,$f=0;$f<ms;$f++)for(var Xl=$n[$f],Cy=Xl.Hl.x,Jh=Xl.Hl.y,Ee=Xl.angle,eo=0;4>eo;eo++){switch(eo){case 0:Yi.h(Us,Yo);break;case 1:Yi.h(Us+zf,Yo);break;case 2:Yi.h(Us,Yo+ju);break;case 3:Yi.h(Us+zf,Yo+ju)}Yi.rotate(Ee+Fe.angle),Yi.offset(Cy,Jh),0===$f&&0===eo?Or.h(Yi.x,Yi.y,0,0):Or.Me(Yi),Yi.offset(-Cy,-Jh),Yi.rotate(-Ee-Fe.angle)}P.free(Yi),null!==dl.graduatedBounds&&dl.graduatedBounds.push(Or),He(Kl,Or.x,Or.y,Or.width,Or.height)}else if(Fe instanceof Wt){var no=t,Wf=l;null===no.temporaryTextBlock&&(no.temporaryTextBlock=new Wt);var sr=no.temporaryTextBlock;tm(sr,Fe);var pl=Fe.alignmentFocus;pl.Fc()&&(pl=Br);for(var Lr=Fe.segmentOrientation,Yf=Fe.segmentOffset,ja=new B,zp=0,Vu=0,ys=0,Va=0,Ba=0,Kf=$n.length,Jl=0;Jl<Kf;Jl++){var Hs=$n[Jl];zp=Hs.Hl.x,Vu=Hs.Hl.y,ys=Hs.angle,Ba=Va=Fe.angle,Lr!==ri&&(Va=H.computeAngle(Lr,Ba=Lr===dp||Lr===gp?ys+Fe.angle:ys)),sr.Gb=Va,sr.text=Hs.text||"",sr.measure(1/0,1/0,0,0);var Zl=sr.measuredBounds,gl=sr.naturalBounds,Ql=gl.width,Bu=gl.height,wo=Dt.alloc();wo.reset(),wo.translate(-Zl.x,-Zl.y),wo.scale(sr.scale,sr.scale),wo.rotate(Ba,Ql/2,Bu/2),Lr!==pp&&Lr!==mf||wo.rotate(90,Ql/2,Bu/2),Lr!==gf&&Lr!==Eh||wo.rotate(-90,Ql/2,Bu/2),Lr===I0&&(45<ys&&135>ys||225<ys&&315>ys)&&wo.rotate(-ys,Ql/2,Bu/2);var Uu=B.allocAt(0,0,Ql,Bu),ql=P.alloc();ql.oi(Uu,pl),wo.Fa(ql);var Zh=-ql.x,My=-ql.y,ml=P.alloc();ml.assign(Yf),isNaN(ml.x)&&(ml.x=Ql/2+3),isNaN(ml.y)&&(ml.y=-(Bu/2+3)),ml.rotate(ys);var Hu=new B(zp+=ml.x+Zh,Vu+=ml.y+My,Zl.width,Zl.height),$p=new B(Zl.x,Zl.y,Zl.width,Zl.height),Wp=new B(gl.x,gl.y,gl.width,gl.height);Hs.Az=Va,Hs.lineCount=sr.lineCount,Hs.lines=[sr.yb,sr.zh,sr.Te,sr.Ae,sr.Jc,sr.Wb,sr.qe],Hs.actualBounds=Hu,Hs.measuredBounds=$p,Hs.naturalBounds=Wp,0===Jl?ja.assign(Hu):ja.Xc(Hu),P.free(ml),P.free(ql),B.free(Uu),Dt.free(wo)}null!==no.graduatedBounds&&no.graduatedBounds.push(ja),He(Wf,ja.x,ja.y,ja.width,ja.height)}Qi(Fe,!1)}}},qd.prototype.arrange=function(t,e,n){if(null!==t.graduatedBounds){var i=t.vb(),l=t.graduatedMarks;if(null!==l){var u=t.graduatedBounds,h=0,f=u[h];h++,null!==i&&i.arrange(f.x-n.x,f.y-n.y,f.width,f.height);for(var p=e.length,g=0;g<p;g++){var m=e[g];f=l[g],m.visible&&m!==i&&0!==f.length&&(f=u[h],h++,m.arrange(f.x-n.x,f.y-n.y,f.width,f.height))}t.graduatedBounds=null}}},qd.prototype.tc=function(t,e,n){var i=n.Vi;n.Vi=!0;var l=t.naturalBounds,u=l.width;l=l.height,e.save(),e.beginPath(),e.rect(-1,-1,u+1,l+1),e.clip(),(u=t.vb()).tc(e,n),0>=(l=t.uf()*n.scale)&&(l=1);for(var h=u.actualBounds,f=t.R.s,p=t.graduatedMarks,g=f.length,m=0;m<g;m++){var v=f[m],x=p[m],D=x.length;if(v.visible&&v!==u&&0!==x.length)if(v instanceof wt){if(!(2>t.graduatedTickUnit*v.interval*u.geometry.flattenedTotalLength/t.graduatedRange*l&&null===v.graduatedSkip)){var M=v.measuredBounds,T=v.strokeWidth*v.scale,N=v.alignmentFocus;N.Fc()&&(N=Br);for(var I=0;I<D;I++){var k=x[I].Hl,O=x[I].angle,L=N,b=v.Bb;b.reset(),b.translate(k.x+h.x,k.y+h.y),b.rotate(O+v.angle,0,0),b.translate(-M.width*L.x+L.offsetX+T/2,-M.height*L.y+L.offsetY+T/2),b.scale(v.scale,v.scale),Yc(v,!1),v.lh.set(v.Bb),v.yk=v.scale,ma(v,!1),v.tc(e,n),v.Bb.reset()}}}else if(v instanceof Wt)for(null===t.temporaryTextBlock&&(t.temporaryTextBlock=new Wt),tm(M=t.temporaryTextBlock,v),v=0;v<D;v++)(T=x[v]).actualBounds&&T.measuredBounds&&T.naturalBounds&&(M.cc=T.text||"",M.Gb=T.Az||0,M.dd=T.lineCount||0,void 0!==(N=T.lines)&&(M.yb=N[0],M.zh=N[1],M.Te=N[2],M.Ae=N[3],M.Jc=N[4],M.Wb=N[5],M.qe=N[6]),T.naturalBounds&&(M.bc=T.naturalBounds),T.actualBounds&&M.arrange((N=T.actualBounds).x,N.y,N.width,N.height),M.arrange((N=T.actualBounds).x,N.y,N.width,N.height),I=T.measuredBounds,T=T.naturalBounds,(k=M.Bb).reset(),k.translate(N.x+h.x,N.y+h.y),k.translate(-I.x,-I.y),M.Qn(k,T.x,T.y,T.width,T.height),Yc(M,!1),M.lh.set(M.Bb),M.yk=M.scale,ma(M,!1),M.tc(e,n))}n.Vi=i,e.restore(),e.Oc(!0)},Ht($,ot),$.prototype.cloneProtected=function(t){ot.prototype.cloneProtected.call(this,t),t.qa=this.qa,t.ub=this.ub.J(),t.Bm=this.Bm.J(),t.Kf=this.Kf,t.Pe=this.Pe,t.bg.assign(this.bg),null!==this.T&&(t.T=this.T.copy(t)),t.$n=this.$n,t.Qm=this.Qm.J(),t.Rm=this.Rm.J(),null!==this.oa&&(t.oa=this.oa.copy()),t.qb=this.qb,t.fn=this.fn,t.xh=this.xh},$.prototype.qf=function(t){ot.prototype.qf.call(this,t),t.R=this.R;for(var e=t.R.s,n=e.length,i=0;i<n;i++)e[i].Uf=t;t.Qg=null},$.prototype.copy=function(){var t=ot.prototype.copy.call(this);if(null!==t){for(var e=this.R.s,n=e.length,i=0;i<n;i++){var l=e[i].copy();l.ni(t),l.jj=null;var u=t.R,h=u.count;if(u.Cb(h,l),null!==(u=t.part)){u.Kh=null,null!==l.portId&&u instanceof J&&(u.He=!0);var f=t.diagram;null!==f&&f.undoManager.isUndoingRedoing||u.bb(nn,"elements",t,null,l,null,h)}}return t}return null},(_=$.prototype).toString=function(){return"Panel("+this.type.name+")#"+pn(this)},_.wn=function(t){ot.prototype.wn.call(this,t);for(var e=this.R.s,n=e.length,i=0;i<n;i++)e[i].wn(t)},_.ai=function(t,e){if(this.qa===$.Grid)t.Pc(),this.qa.tc(this,t,e);else if(this.qa===$.Graduated)t.Pc(),this.qa.tc(this,t,e);else{if(this.qa===$.Table){t.Pc(),t.lineCap="butt";var n=0<this.rowCount?this.rowDefs:null,i=0<this.columnCount?this.colDefs:null;null!==n&&Wg(this,t,!0,n,!0),null!==i&&Wg(this,t,!1,i,!0),null!==n&&JM(this,t,!0,n),null!==i&&JM(this,t,!1,i),null!==n&&Wg(this,t,!0,n,!1),null!==i&&Wg(this,t,!1,i,!1)}(n=this.isClipping&&this.qa===$.Spot)&&t.save(),i=this.vb();for(var l=this.R.s,u=l.length,h=0;h<u;h++){var f=l[h];n&&f===i&&(t.clipInsteadOfFill=!0),f.tc(t,e),n&&f===i&&(t.clipInsteadOfFill=!1)}n&&(t.restore(),t.Oc(!0))}},_.Kj=function(t,e,n,i,l){var u=this.ke(),h=this.transform,f=1/(h.m11*h.m22-h.m12*h.m21),p=h.m22*f,g=-h.m12*f,m=-h.m21*f,v=h.m11*f,x=f*(h.m21*h.dy-h.m22*h.dx),D=f*(h.m12*h.dx-h.m11*h.dy);if(null!==this.areaBackground)return F.wf((h=this.actualBounds).left,h.top,h.right,h.bottom,t,e,n,i,l);if(null!==this.background)return u=t*p+e*m+x,f=t*g+e*v+D,t=n*p+i*m+x,p=n*g+i*v+D,l.h(0,0),u=F.wf(0,0,(n=this.naturalBounds).width,n.height,u,f,t,p,l),l.transform(h),u;u||(p=1,m=g=0,v=1,D=x=0),f=t*p+e*m+x,t=t*g+e*v+D,l.h(p=n*p+i*m+x,n=n*g+i*v+D),i=(p-f)*(p-f)+(n-t)*(n-t),g=!1,D=(v=this.R.s).length,m=P.alloc(),x=null,e=1/0;var M=null,T=this.isClipping&&this.qa===$.Spot;T&&(M=P.alloc(),(g=(x=this.vb()).Kj(f,t,p,n,M))&&(e=(f-M.x)*(f-M.x)+(t-M.y)*(t-M.y)));for(var N=0;N<D;N++){var I=v[N];I.visible&&I!==x&&I.Kj(f,t,p,n,m)&&(g=!0,(I=(f-m.x)*(f-m.x)+(t-m.y)*(t-m.y))<i&&(i=I,l.set(m)))}return T&&(e>i&&l.set(M),P.free(M)),P.free(m),u&&l.transform(h),g},_.w=function(t){if(!qs(this)){ot.prototype.w.call(this,t),t=null,(this.qa===$.Auto||this.qa===$.Link)&&(t=this.vb());for(var e=this.R.s,n=e.length,i=0;i<n;i++){var l=e[i];if((l===t||l.isPanelMain)&&l.w(!0),!l.desiredSize.v()){var u=os(l,!1);(l instanceof mi||l instanceof $||l instanceof Wt||u!==Le)&&l.w(!0)}}}},_.Mj=function(){if(!qs(this)){Qi(this,!0),As(this,!0);for(var t=this.R.s,e=t.length,n=0;n<e;n++)t[n].Mj()}},_.Jk=function(){if(0==(2048&this.o)){Yc(this,!0),ma(this,!0);for(var t=this.R.s,e=t.length,n=0;n<e;n++)t[n].Iu()}},_.Iu=function(){ma(this,!0);for(var t=this.R.s,e=t.length,n=0;n<e;n++)t[n].Iu()},_.El=function(t,e,n,i){var l=this.bg;l.h(0,0,0,0);var u=this.desiredSize,h=this.minSize;void 0===n&&(n=h.width,i=h.height),n=Math.max(n,h.width),i=Math.max(i,h.height);var f=this.maxSize;isNaN(u.width)||(t=Math.min(u.width,f.width)),isNaN(u.height)||(e=Math.min(u.height,f.height)),t=Math.max(n,t),e=Math.max(i,e);var p=this.ub;t=Math.max(t-p.left-p.right,0),e=Math.max(e-p.top-p.bottom,0);var g=this.R.s;0!==g.length&&this.qa.measure(this,t,e,g,l,n,i),t=l.width+p.left+p.right,p=l.height+p.top+p.bottom,isFinite(u.width)&&(t=u.width),isFinite(u.height)&&(p=u.height),t=Math.min(f.width,t),p=Math.min(f.height,p),t=Math.max(h.width,t),p=Math.max(h.height,p),xl(l,t=Math.max(n,t),p=Math.max(i,p)),xl(this.naturalBounds,t,p),this.ve(0,0,t,p)},_.vb=function(){if(null===this.Qg){var t=this.R.s,e=t.length;if(0===e)return null;for(var n=0;n<e;n++){var i=t[n];if(!0===i.isPanelMain)return this.Qg=i}this.Qg=t[0]}return this.Qg},_.Vg=function(t,e,n,i){var l=this.R.s;if(this.actualBounds.h(t,e,n,i),0!==l.length){if(!this.desiredSize.v()){t=os(this,!0);var u=this.measuredBounds;e=u.width,u=u.height;var h=this.Ag,f=h.left+h.right;switch(h=h.top+h.bottom,e===n&&u===i&&(t=Le),t){case Le:(e>n||u>i)&&(this.w(),this.measure(e>n?n:e,u>i?i:u,0,0));break;case Ve:this.w(!0),this.measure(n+f,i+h,0,0);break;case Mn:this.w(!0),this.measure(n+f,u+h,0,0);break;case Vn:this.w(!0),this.measure(e+f,i+h,0,0)}}this.qa.arrange(this,l,this.bg)}},_.Xg=function(t){var e=this.naturalBounds,n=Kr(this);if(ur(0,0,e.width,e.height,t.x,t.y)){for(var i=(e=this.R.s).length,l=P.allocAt(0,0);i--;){var u=e[i];if((u.visible||u===n)&&(Un(l.set(t),u.transform),u.ba(l)))return P.free(l),!0}return P.free(l),!(null===this.Yb&&null===this.areaBackground)}return!1},_.Hr=function(t){if(this.bindingId===t)return this;for(var e=this.R.s,n=e.length,i=0;i<n;i++){var l=e[i].Hr(t);if(null!==l)return l}return null},_.$l=function(t,e){if(e(this,t),t instanceof $)for(var n=(t=t.R.s).length,i=0;i<n;i++)this.$l(t[i],e)},_.vl=function(t){return Pl(this,this,t)},_.fb=function(t){if(this.name===t)return this;var e=this.R.s,n=e.length;null===this.xh&&null===this.itemTemplateMap||(n=Mh(this));for(var i=0;i<n;i++){var l=e[i];if(l instanceof $){var u=l.fb(t);if(null!==u)return u}if(l.name===t)return l}return null},_.ke=function(){return!(this.type===$.TableRow||this.type===$.TableColumn)},_.ec=function(t,e,n){if(!1===this.pickable||(void 0===e&&(e=null),void 0===n&&(n=null),Xn(this)))return null;var i=this.naturalBounds,l=1/this.uf(),u=this.ke(),h=u?t:Un(P.allocAt(t.x,t.y),this.transform),f=this.diagram,p=10,g=5;if(null!==f&&(g=(p=f.yl("extraTouchArea"))/2),ur(-g*l,-g*l,i.width+p*l,i.height+p*l,h.x,h.y)){if(!this.isAtomic){var m=(l=this.R.s).length;if(f=P.alloc(),g=(p=this.isClipping&&this.qa===$.Spot)?this.vb():null,p&&(g.ke()?Un(f.set(t),g.transform):f.set(t),!g.ba(f)))return P.free(f),u||P.free(h),null;for(var v=Kr(this);m--;){var x=l[m];if((x.visible||x===v)&&(x.ke()?Un(f.set(t),x.transform):f.set(t),!p||x!==g)){var D=null;if(x instanceof $?D=x.ec(f,e,n):!0===x.pickable&&x.ba(f)&&(D=x),null!==D&&(null!==e&&(D=e(D)),null!==D&&(null===n||n(D))))return P.free(f),u||P.free(h),D}}P.free(f)}return null===this.background&&null===this.areaBackground?(u||P.free(h),null):(t=ur(0,0,i.width,i.height,h.x,h.y)?this:null,u||P.free(h),t)}return u||P.free(h),null},_.di=function(t,e,n,i){if(!1===this.pickable)return!1;void 0===e&&(e=null),void 0===n&&(n=null);var l=this.naturalBounds,u=this.ke(),h=u?t:Un(P.allocAt(t.x,t.y),this.transform);if(l=ur(0,0,l.width,l.height,h.x,h.y),this.type===$.TableRow||this.type===$.TableColumn||l){if(!this.isAtomic){for(var f=this.R.s,p=f.length,g=P.alloc(),m=Kr(this);p--;){var v=f[p];if(v.visible||v===m){v.ke()?Un(g.set(t),v.transform):g.set(t);var x=v;(null!==(v=v instanceof $?v:null)?v.di(g,e,n,i):x.ba(g))&&!1!==x.pickable&&(null!==e&&(x=e(x)),null===x||null!==n&&!n(x)||i.add(x))}}P.free(g)}return u||P.free(h),l&&(null!==this.background||null!==this.areaBackground)}return u||P.free(h),!1},_.tf=function(t,e,n,i,l,u){if(!1===this.pickable)return!1;void 0===e&&(e=null),void 0===n&&(n=null);var h=u;if(void 0===u&&(h=Dt.alloc()).reset(),h.multiply(this.transform),this.Wg(t,h))return Kv(this,e,n,l),void 0===u&&Dt.free(h),!0;if(this.Sc(t,h)){if(!this.isAtomic)for(var f=Kr(this),p=this.R.s,g=p.length;g--;){var m=p[g];if(m.visible||m===f){var v=m.actualBounds,x=this.naturalBounds;v.x>x.width||v.y>x.height||0>v.x+v.width||0>v.y+v.height||(v=m,m=m instanceof $?m:null,(x=Dt.alloc()).set(h),(null!==m?m.tf(t,e,n,i,l,x):Bx(v,t,i,x))&&(null!==e&&(v=e(v)),null===v||null!==n&&!n(v)||l.add(v)),Dt.free(x))}}return void 0===u&&Dt.free(h),i}return void 0===u&&Dt.free(h),!1},_.hg=function(t,e,n,i,l,u){if(!1===this.pickable)return!1;void 0===n&&(n=null),void 0===i&&(i=null);var h=this.naturalBounds,f=this.ke(),p=f?t:Un(P.allocAt(t.x,t.y),this.transform),g=f?e:Un(P.allocAt(e.x,e.y),this.transform),m=p.rf(g),v=0<p.x&&p.x<h.width&&0<p.y&&p.y<h.height||Kn(p.x,p.y,0,0,0,h.height)<=m||Kn(p.x,p.y,0,h.height,h.width,h.height)<=m||Kn(p.x,p.y,h.width,h.height,h.width,0)<=m||Kn(p.x,p.y,h.width,0,0,0)<=m;if(h=p.td(0,0)<=m&&p.td(0,h.height)<=m&&p.td(h.width,0)<=m&&p.td(h.width,h.height)<=m,f||(P.free(p),P.free(g)),v){if(!this.isAtomic){p=P.alloc(),g=P.alloc(),m=Kr(this);for(var x=this.R.s,D=x.length;D--;){var M=x[D];if(M.visible||M===m){var T=M.actualBounds,N=this.naturalBounds;(!f||!(T.x>N.width||T.y>N.height||0>T.x+T.width||0>T.y+T.height))&&(M.ke()?(T=M.transform,Un(p.set(t),T),Un(g.set(e),T)):(p.set(t),g.set(e)),T=M,(null!==(M=M instanceof $?M:null)?M.hg(p,g,n,i,l,u):T.Vw(p,g,l))&&(null!==n&&(T=n(T)),null===T||null!==i&&!i(T)||u.add(T)))}}P.free(p),P.free(g)}return l?v:h}return!1},_.add=function(t){for(var e=[],n=0;n<arguments.length;++n)e[n]=arguments[n];for(n=0;n<e.length;n++)this.Cb(this.R.count,e[n]);return this},_.K=function(t){return this.R.K(t)},_.Cb=function(t,e){e instanceof lt&&Y("Cannot add a Part to a Panel: "+e+"; use a Panel instead"),(this===e||this.jg(e))&&(this===e&&Y("Cannot make a Panel contain itself: "+this.toString()),Y("Cannot make a Panel indirectly contain itself: "+this.toString()+" already contains "+e.toString()));var n=e.panel;if(null!==n&&n!==this&&Y("Cannot add a GraphObject that already belongs to another Panel to this Panel: "+e.toString()+", already contained by "+n.toString()+", cannot be shared by this Panel: "+this.toString()),this.qa!==$.Grid||e instanceof wt||Y("Can only add Shapes to a Grid Panel, not: "+e),this.qa!==$.Graduated||e instanceof wt||e instanceof Wt||Y("Can only add Shapes or TextBlocks to a Graduated Panel, not: "+e),e.ni(this),e.jj=null,null!==this.itemArray){var i=e.data;null!==i&&"object"==typeof i&&(null===this.$d&&(this.$d=new vt),this.$d.add(i,e))}var l=this.R;if(i=-1,n===this){for(var u=-1,h=this.R.s,f=h.length,p=0;p<f;p++)if(h[p]===e){u=p;break}if(-1!==u){if(u===t||u+1>=l.count&&t>=l.count)return;l.mb(u),i=u}else Y("element "+e.toString()+" has panel "+n.toString()+" but is not contained by it.")}(0>t||t>l.count)&&(t=l.count),l.Cb(t,e),(0===t||e.isPanelMain)&&(this.Qg=null),qs(this)||this.w(),e.w(!1),(null!==e.portId||e instanceof $&&!0===e.He)&&(this.He=!0),this.graduatedIntervals=null,this.yf()||Kg(this,e,!1),null!==(n=this.part)&&(n.Kh=null,n.Sf=NaN,this.He&&n instanceof J&&(n.He=!0),n.He&&n instanceof J&&(n.sc=null),null!==(l=this.diagram)&&l.undoManager.isUndoingRedoing||(-1!==i&&n.bb(xe,"elements",this,e,null,i,null),n.bb(nn,"elements",this,null,e,null,t)))},_.remove=function(t){for(var e=this.R.s,n=e.length,i=-1,l=0;l<n;l++)if(e[l]===t){i=l;break}-1!==i&&this.lc(i,!0)},_.mb=function(t){0<=t&&this.lc(t,!0)},_.lc=function(t,e){var n=this.R,i=n.K(t);if(i.jj=null,i.ni(null),null!==this.$d){var l=i.data;"object"==typeof l&&this.$d.remove(l)}n.mb(t),Qi(this,!1),this.w(),this.Qg===i&&(this.Qg=null),this.graduatedIntervals=null;var u=this.part;null!==u&&(u.Kh=null,u.Sf=NaN,u.Rb(),u instanceof J&&(i instanceof $?i.$l(i,function(h,f){wm(u,f,e)}):wm(u,i,e)),null!==(n=this.diagram)&&n.undoManager.isUndoingRedoing||u.bb(xe,"elements",this,i,null,t,null))},$.prototype.getRowDefinition=function(t){0>t&&le(t,">= 0",$,"getRowDefinition:idx"),t=Math.round(t);var e=this.rowDefs;if(void 0===e[t]){var n=new on;n.ni(this),n.isRow=!0,n.index=t,e[t]=n,this.bb(nn,"rowdefs",this,null,n,null,t)}return e[t]},$.prototype.Vz=function(t){if(0>t&&le(t,">= 0",$,"removeRowDefinition:idx"),0!==this.rowCount){t=Math.round(t);var e=this.rowDefs,n=e[t];if(n){e[t]=void 0;for(var i=e.length-1;0<=i&&void 0===e[i--];)e.length--;this.bb(xe,"rowdefs",this,n,null,t,null),this.w()}}},$.prototype.getColumnDefinition=function(t){0>t&&le(t,">= 0",$,"getColumnDefinition:idx"),t=Math.round(t);var e=this.colDefs;if(void 0===e[t]){var n=new on;n.ni(this),n.isRow=!1,n.index=t,e[t]=n,this.bb(nn,"coldefs",this,null,n,null,t)}return e[t]},(_=$.prototype).Qz=function(t){if(0>t&&le(t,">= 0",$,"removeColumnDefinition:idx"),0!==this.columnCount){t=Math.round(t);var e=this.colDefs,n=e[t];if(n){e[t]=void 0;for(var i=e.length-1;0<=i&&void 0===e[i--];)e.length--;this.bb(xe,"coldefs",this,n,null,t,null),this.w()}}},_.Wy=function(t){if(0>t||this.type!==$.Table||0===this.rowCount)return-1;for(var e=0,n=this.rowDefs,i=n.length,l=this.topIndex;l<i;l++){var u=n[l];if(void 0!==u&&t<(e+=u.total))break}return l},_.Oy=function(t){if(0>t||this.type!==$.Table||0===this.columnCount)return-1;for(var e=0,n=this.colDefs,i=n.length,l=this.leftIndex;l<i;l++){var u=n[l];if(void 0!==u&&t<(e+=u.total))break}return l},_.mz=function(t,e){if(void 0===e&&(e=new P(NaN,NaN)),this.type!==$.Graduated)return e.h(NaN,NaN),e;t=Math.min(Math.max(t,this.graduatedMin),this.graduatedMax);var n=this.vb();return n.geometry.Bu((t-this.graduatedMin)/this.graduatedRange,e),n.transform.Fa(e)},_.nz=function(t){if(this.type!==$.Graduated)return NaN;var e=this.vb();return e.transform.Ld(t),e.geometry.Zw(t)*this.graduatedRange+this.graduatedMin},_.By=function(t){void 0===t&&(t=!1);var e=this.copy();return dT(e,function(n){n instanceof $&&(n.allBindings=null,n.qb=null);var i=n.localBindings;null!==i&&(n.localBindings=null,i.each(function(l){n.bind(l.copy())})),null!==(i=n.animationTriggers)&&(n.animationTriggers=null,i.each(function(l){n.mv(l.value.copy())}))}),t&&uo(e),e},_.Ka=function(t){var e=this.allBindings;if(null!==e)for(void 0===t&&(t=""),e=e.iterator;e.next();){var n=e.value,i=n.sourceProperty;if((""===t||""===i||i===t)&&(i=n.targetProperty,null!==n.converter||""!==i)){i=this.data;var l=n.sourceName;if(null!==l){if(""===l)i=this;else if("/"===l)i=this;else if("."===l)i=this;else if(".."===l)i=this;else if(null===(i=this.fb(l)))continue}else if(n.isToModel){if(null===(i=this.diagram))continue;i=i.model.modelData}var u=this,h=n.ti;if(-1!==h){if(null===(u=this.Hr(h)))continue}else null!==n.sd&&(u=n.sd);if("/"===l?i=u.part:"."===l?i=u:".."===l&&(i=u.panel),0!==(l=n.Wn)){if(!(u instanceof $))continue;1===l?u=u.getColumnDefinition(n.ll):2===l&&(u=u.getRowDefinition(n.ll))}void 0!==u&&n.pv(u,i)}}},_.Uw=function(t){return null==t||null===this.$d?null:this.$d.I(t)},_.Vu=function(){for(var t=Mh(this);this.R.length>t;)this.lc(this.R.length-1,!1);ZM(this,this.itemArray)},Mt.Object.defineProperties($.prototype,{type:{get:function(){return this.qa},set:function(t){var e=this.qa;e!==t&&(this.qa=t,this.isAtomic=this.qa===$.Grid,this.w(),this.g("type",e,t))}},elements:{get:function(){return this.R.iterator}},naturalBounds:{get:function(){return this.bc}},padding:{get:function(){return this.ub},set:function(t){"number"==typeof t?(0>t&&le(t,">= 0",$,"padding"),t=new Bt(t)):(0>t.left&&le(t.left,">= 0",$,"padding:value.left"),0>t.right&&le(t.right,">= 0",$,"padding:value.right"),0>t.top&&le(t.top,">= 0",$,"padding:value.top"),0>t.bottom&&le(t.bottom,">= 0",$,"padding:value.bottom"));var e=this.ub;e.C(t)||(this.ub=t=t.J(),this.w(),this.g("padding",e,t))}},defaultAlignment:{get:function(){return this.Bm},set:function(t){var e=this.Bm;e.C(t)||(this.Bm=t=t.J(),this.w(),this.g("defaultAlignment",e,t))}},defaultStretch:{get:function(){return this.Kf},set:function(t){var e=this.Kf;e!==t&&(this.Kf=t,this.w(),this.g("defaultStretch",e,t))}},defaultSeparatorPadding:{get:function(){return null!==this.T?this.T.tp:nh},set:function(t){"number"==typeof t&&(t=new Bt(t));var e=this.defaultSeparatorPadding;e.C(t)||(t=t.J(),null===this.T&&(this.T=new qi),this.T.tp=t,this.w(),this.g("defaultSeparatorPadding",e,t))}},defaultRowSeparatorStroke:{get:function(){return null!==this.T?this.T.ga:null},set:function(t){var e=this.defaultRowSeparatorStroke;e!==t&&(null===t||"string"==typeof t||t instanceof bt)&&(t instanceof bt&&t.freeze(),null===this.T&&(this.T=new qi),this.T.ga=t,this.N(),this.g("defaultRowSeparatorStroke",e,t))}},defaultRowSeparatorStrokeWidth:{get:function(){return null!==this.T?this.T.Ga:1},set:function(t){var e=this.defaultRowSeparatorStrokeWidth;e!==t&&isFinite(t)&&0<=t&&(null===this.T&&(this.T=new qi),this.T.Ga=t,this.w(),this.g("defaultRowSeparatorStrokeWidth",e,t))}},defaultRowSeparatorDashArray:{get:function(){return null!==this.T?this.T.W:null},set:function(t){var e=this.defaultRowSeparatorDashArray;if(e!==t){if(null!==t){for(var n=t.length,i=0,l=0;l<n;l++){var u=t[l];"number"==typeof u&&0<=u&&isFinite(u)||Y("defaultRowSeparatorDashArray value "+u+" at index "+l+" must be a positive number or zero."),i+=u}if(0===i){if(null===e)return;t=null}}null===this.T&&(this.T=new qi),this.T.W=t,this.N(),this.g("defaultRowSeparatorDashArray",e,t)}}},defaultColumnSeparatorStroke:{get:function(){return null!==this.T?this.T.u:null},set:function(t){var e=this.defaultColumnSeparatorStroke;e!==t&&(null===t||"string"==typeof t||t instanceof bt)&&(t instanceof bt&&t.freeze(),null===this.T&&(this.T=new qi),this.T.u=t,this.N(),this.g("defaultColumnSeparatorStroke",e,t))}},defaultColumnSeparatorStrokeWidth:{get:function(){return null!==this.T?this.T.F:1},set:function(t){var e=this.defaultColumnSeparatorStrokeWidth;e!==t&&isFinite(t)&&0<=t&&(null===this.T&&(this.T=new qi),this.T.F=t,this.w(),this.g("defaultColumnSeparatorStrokeWidth",e,t))}},defaultColumnSeparatorDashArray:{get:function(){return null!==this.T?this.T.m:null},set:function(t){var e=this.defaultColumnSeparatorDashArray;if(e!==t){if(null!==t){for(var n=t.length,i=0,l=0;l<n;l++){var u=t[l];"number"==typeof u&&0<=u&&isFinite(u)||Y("defaultColumnSeparatorDashArray value "+u+" at index "+l+" must be a positive number or zero."),i+=u}if(0===i){if(null===e)return;t=null}}null===this.T&&(this.T=new qi),this.T.m=t,this.N(),this.g("defaultColumnSeparatorDashArray",e,t)}}},inRowsCols:{get:function(){return null!==this.T?this.T.hb:null},set:function(t){null===this.T&&(this.T=new qi),this.T.hb=t}},viewboxStretch:{get:function(){return this.$n},set:function(t){var e=this.$n;e!==t&&(this.$n=t,this.w(),this.g("viewboxStretch",e,t))}},gridCellSize:{get:function(){return this.Qm},set:function(t){var e=this.Qm;if(!e.C(t)){t.v()&&0!==t.width&&0!==t.height||Y("Invalid Panel.gridCellSize: "+t),this.Qm=t.J();var n=this.diagram;null!==n&&this===n.grid&&Es(n),this.N(),this.g("gridCellSize",e,t)}}},gridOrigin:{get:function(){return this.Rm},set:function(t){var e=this.Rm;if(!e.C(t)){t.v()||Y("Invalid Panel.gridOrigin: "+t),this.Rm=t.J();var n=this.diagram;null!==n&&this===n.grid&&Es(n),this.N(),this.g("gridOrigin",e,t)}}},graduatedMin:{get:function(){return null!==this.oa?this.oa.Np:0},set:function(t){var e=this.graduatedMin;e!==t&&(null===this.oa&&(this.oa=new Os),this.oa.Np=t,this.w(),this.g("graduatedMin",e,t),mu(this)&&null!==(t=this.part)&&gu(this,t,"graduatedRange"))}},graduatedMax:{get:function(){return null!==this.oa?this.oa.F:100},set:function(t){var e=this.graduatedMax;e!==t&&(null===this.oa&&(this.oa=new Os),this.oa.F=t,this.w(),this.g("graduatedMax",e,t),mu(this)&&null!==(t=this.part)&&gu(this,t,"graduatedRange"))}},graduatedRange:{get:function(){return this.graduatedMax-this.graduatedMin}},graduatedTickUnit:{get:function(){return null!==this.oa?this.oa.ga:10},set:function(t){var e=this.graduatedTickUnit;e!==t&&0<t&&(null===this.oa&&(this.oa=new Os),this.oa.ga=t,this.w(),this.g("graduatedTickUnit",e,t))}},graduatedTickBase:{get:function(){return null!==this.oa?this.oa.W:0},set:function(t){var e=this.graduatedTickBase;e!==t&&(null===this.oa&&(this.oa=new Os),this.oa.W=t,this.w(),this.g("graduatedTickBase",e,t))}},graduatedMarks:{get:function(){return null!==this.oa?this.oa.u:null},set:function(t){null!==this.oa?this.oa.u=t:null!==t&&(this.oa=new Os,this.oa.u=t)}},graduatedBounds:{get:function(){return null!==this.oa?this.oa.j:null},set:function(t){null!==this.oa?this.oa.j=t:null!==t&&(this.oa=new Os,this.oa.j=t)}},graduatedIntervals:{get:function(){return null!==this.oa?this.oa.m:null},set:function(t){null!==this.oa?this.oa.m=t:null!==t&&(this.oa=new Os,this.oa.m=t)}},temporaryTextBlock:{get:function(){return null!==this.oa?this.oa.Sh:null},set:function(t){null!==this.oa?this.oa.Sh=t:null!==t&&(this.oa=new Os,this.oa.Sh=t)}},panelLayoutState:{get:function(){return this.F},set:function(t){this.F=t}},He:{get:function(){return 0!=(8388608&this.o)},set:function(t){0!=(8388608&this.o)!==t&&(this.o^=8388608)}},rowDefs:{get:function(){return null===this.T&&(this.T=new qi),this.T.Ic}},rowCount:{get:function(){return null===this.T?0:this.rowDefs.length}},colDefs:{get:function(){return null===this.T&&(this.T=new qi),this.T.Hc}},columnCount:{get:function(){return null===this.T?0:this.colDefs.length}},rowSizing:{get:function(){return null!==this.T?this.T.nb:Jg},set:function(t){var e=this.rowSizing;e!==t&&(null===this.T&&(this.T=new qi),this.T.nb=t,this.w(),this.g("rowSizing",e,t))}},columnSizing:{get:function(){return null!==this.T?this.T.j:Jg},set:function(t){var e=this.columnSizing;e!==t&&(null===this.T&&(this.T=new qi),this.T.j=t,this.w(),this.g("columnSizing",e,t))}},topIndex:{get:function(){return null!==this.T?this.T.Db:0},set:function(t){var e=this.topIndex;e!==t&&((!isFinite(t)||0>t)&&Y("Panel.topIndex must be greater than zero and a real number, not: "+t),null===this.T&&(this.T=new qi),this.T.Db=t,this.w(),this.g("topIndex",e,t))}},leftIndex:{get:function(){return null!==this.T?this.T.cb:0},set:function(t){var e=this.leftIndex;e!==t&&((!isFinite(t)||0>t)&&Y("Panel.leftIndex must be greater than zero and a real number, not: "+t),null===this.T&&(this.T=new qi),this.T.cb=t,this.w(),this.g("leftIndex",e,t))}},data:{get:function(){return this.qb},set:function(t){var e=this.qb;if(e!==t){var n=this instanceof lt&&!(this instanceof Pt);uo(this),this.qb=t;var i=this.diagram;null!==i&&(n?(n=i.partManager,this instanceof H?(null!==e&&n.Re.remove(e),null!==t&&n.Re.add(t,this)):this instanceof lt&&(null!==e&&n.Se.remove(e),null!==t&&n.Se.add(t,this))):null!==(n=this.panel)&&null!==n.$d&&(null!==e&&n.$d.remove(e),null!==t&&n.$d.add(t,this))),this.g("data",e,t),null!==i&&i.undoManager.isUndoingRedoing||null!==t&&this.Ka()}}},itemIndex:{get:function(){return this.fn},set:function(t){var e=this.fn;e!==t&&(this.fn=t,this.g("itemIndex",e,t))}},allBindings:{get:function(){return null!==this.A?this.A.hb:null},set:function(t){this.localBindings!==t&&(null===this.A&&(this.A=new wa),this.A.hb=t)}},itemArray:{get:function(){return this.xh},set:function(t){var e=this.xh;if(e!==t||null!==t&&function pT(t,e){for(var n=(t=t.R.s).length,i=e.length,l=0,u=null;l<n&&!((u=t[l])instanceof $&&null!==u.data);)u=t[++l];if(n-l!==i)return!0;if(null===u)return 0<i;for(var h=0;l<n&&h<i;){if(!((u=t[l])instanceof $)||u.data!==e[h])return!0;l++,h++}return!1}(this,t)){var n=this.diagram;e!==t&&(null!==n&&null!==e&&Cf(n.partManager,this,n),this.xh=t,null!==n&&null!==t&&A0(n.partManager,this)),this.g("itemArray",e,t),null!==n&&n.undoManager.isUndoingRedoing||ZM(this,t)}}},itemTemplate:{get:function(){return null===this.itemTemplateMap?null:this.itemTemplateMap.I("")},set:function(t){if(null===this.itemTemplateMap){if(null===t)return;this.itemTemplateMap=new vt}var e=this.itemTemplateMap.I("");e!==t&&((t instanceof lt||t.isPanelMain)&&Y("Panel.itemTemplate must not be a Part or be Panel.isPanelMain: "+t),this.itemTemplateMap.add("",t),this.g("itemTemplate",e,t),null!==(t=this.diagram)&&t.undoManager.isUndoingRedoing||this.Vu())}},itemTemplateMap:{get:function(){return null!==this.A?this.A.le:null},set:function(t){var e=this.itemTemplateMap;if(e!==t){for(var n=t.iterator;n.next(););rn(this),this.A.le=t,this.g("itemTemplateMap",e,t),null!==(t=this.diagram)&&t.undoManager.isUndoingRedoing||this.Vu()}}},itemCategoryProperty:{get:function(){return null!==this.A?this.A.Ic:"category"},set:function(t){var e=this.itemCategoryProperty;e!==t&&(rn(this),this.A.Ic=t,this.g("itemCategoryProperty",e,t))}},isAtomic:{get:function(){return 0!=(1048576&this.o)},set:function(t){var e=0!=(1048576&this.o);e!==t&&(this.o^=1048576,this.g("isAtomic",e,t))}},isClipping:{get:function(){return 0!=(2097152&this.o)},set:function(t){var e=0!=(2097152&this.o);e!==t&&(this.o^=2097152,this instanceof yt&&(this.ib=null),this.w(),this.g("isClipping",e,t))}},isOpposite:{get:function(){return 0!=(33554432&this.o)},set:function(t){var e=0!=(33554432&this.o);e!==t&&(this.o^=33554432,this.w(),this.g("isOpposite",e,t))}},isEnabled:{get:function(){return 0!=(4194304&this.o)},set:function(t){var e=0!=(4194304&this.o);if(e!==t){var n=null===this.panel||this.panel.yf();this.o^=4194304,this.g("isEnabled",e,t),null!==(e=this.diagram)&&e.undoManager.isUndoingRedoing||n&&Kg(this,this,t)}}},alignmentFocusName:{get:function(){return this.Pe},set:function(t){var e=this.Pe;e!==t&&(this.Pe=t,this.w(),this.g("alignmentFocusName",e,t))}}}),Mt.Object.defineProperties($,{Position:{get:function(){return Xr.I("Position")}},Horizontal:{get:function(){return Xr.I("Horizontal")}},Vertical:{get:function(){return Xr.I("Vertical")}},Spot:{get:function(){return Xr.I("Spot")}},Auto:{get:function(){return Xr.I("Auto")}},Table:{get:function(){return Xr.I("Table")}},Viewbox:{get:function(){return Xr.I("Viewbox")}},TableRow:{get:function(){return Xr.I("TableRow")}},TableColumn:{get:function(){return Xr.I("TableColumn")}},Link:{get:function(){return Xr.I("Link")}},Grid:{get:function(){return Xr.I("Grid")}},Graduated:{get:function(){return Xr.I("Graduated")}}}),$.prototype.rebuildItemElements=$.prototype.Vu,$.prototype.findItemPanelForData=$.prototype.Uw,$.prototype.updateTargetBindings=$.prototype.Ka,$.prototype.copyTemplate=$.prototype.By,$.prototype.graduatedValueForPoint=$.prototype.nz,$.prototype.graduatedPointForValue=$.prototype.mz,$.prototype.findColumnForLocalX=$.prototype.Oy,$.prototype.findRowForLocalY=$.prototype.Wy,$.prototype.removeColumnDefinition=$.prototype.Qz,$.prototype.removeRowDefinition=$.prototype.Vz,$.prototype.removeAt=$.prototype.mb,$.prototype.remove=$.prototype.remove,$.prototype.insertAt=$.prototype.Cb,$.prototype.elt=$.prototype.K,$.prototype.add=$.prototype.add,$.prototype.findObject=$.prototype.fb,$.prototype.findInVisualTree=$.prototype.vl,$.prototype.walkVisualTreeFrom=$.prototype.$l,$.prototype.findMainElement=$.prototype.vb;var Xg=!1,Zv=null,Xr=new vt;function Os(){this.Np=0,this.F=100,this.ga=10,this.W=0,this.Sh=this.m=this.j=this.u=null}function qi(){this.Ic=[],this.Hc=[],this.j=this.nb=Jg,this.cb=this.Db=0,this.tp=nh,this.Ga=1,this.W=this.ga=null,this.F=1,this.hb=this.m=this.u=null}function on(){wn(this),this.Uf=null,this.Wp=!0,this.Wa=0,this.Ac=NaN,this.ej=0,this.cj=1/0,this.Fb=Hn,this.pa=this.jc=this.ma=0,this.Vd=null,this.Rn=Cu,this.$f=$r,this.On=this.Wf=null,this.Pn=NaN,this.Yb=this.oj=null,this.xm=!1}function ef(t){if(t.sizing===Cu){var e=t.Uf;return t.isRow?e.rowSizing:e.columnSizing}return t.sizing}$.className="Panel",$.definePanelLayout=Ao,Ao("Position",new rl),Ao("Vertical",new Qc),Ao("Auto",new Zd),Ao("Link",new $g),Os.prototype.copy=function(){var t=new Os;return t.Np=this.Np,t.F=this.F,t.ga=this.ga,t.W=this.W,t.u=this.u,t.j=this.j,t.m=this.m,t.Sh=this.Sh,t},Os.className="GradPanelSettings",qi.prototype.copy=function(t){for(var e=new qi,n=this.Ic,i=n.length,l=e.Ic,u=0;u<i;u++)if(void 0!==n[u]){var h=n[u].copy();h.ni(t),l[u]=h}for(i=(n=this.Hc).length,l=e.Hc,u=0;u<i;u++)void 0!==n[u]&&((h=n[u].copy()).ni(t),l[u]=h);return e.nb=this.nb,e.j=this.j,e.Db=this.Db,e.cb=this.cb,e.tp=this.tp.J(),e.Ga=this.Ga,e.ga=this.ga,e.W=this.W,e.F=this.F,e.u=this.u,e.m=this.m,e.hb=this.hb,e},qi.className="TablePanelSettings",on.prototype.copy=function(){var t=new on;return t.Wp=this.Wp,t.Wa=this.Wa,t.Ac=this.Ac,t.ej=this.ej,t.cj=this.cj,t.Fb=this.Fb,t.ma=this.ma,t.jc=this.jc,t.pa=this.pa,t.$f=this.$f,t.Rn=this.Rn,t.Wf=null===this.Wf?null:this.Wf.J(),t.On=this.On,t.Pn=this.Pn,t.oj=null,null!==this.oj&&(t.separatorDashArray=mc(this.separatorDashArray)),t.Yb=this.Yb,t.xm=this.xm,t.Vd=this.Vd,t},(_=on.prototype).ob=function(t){t.classType===on&&(this.sizing=t)},_.toString=function(){return"RowColumnDefinition "+(this.isRow?"(Row ":"(Column ")+this.index+") #"+pn(this)},_.ni=function(t){this.Uf=t},_.mo=function(t){var e=0,n=this.Uf;if(this.index!==t&&(null===(t=this.separatorStroke)&&null!==n&&(t=this.isRow?n.defaultRowSeparatorStroke:n.defaultColumnSeparatorStroke),null!==t&&(e=this.separatorStrokeWidth,isNaN(e)&&(e=null!==n?this.isRow?n.defaultRowSeparatorStrokeWidth:n.defaultColumnSeparatorStrokeWidth:0))),null===(t=this.Wf)){if(null===n)return e;t=n.defaultSeparatorPadding}return e+(this.isRow?t.top:t.left)},_.Qc=function(){var t=0,e=this.Uf,n=0,i=this.isRow;if(null!==e&&e.type===$.Table)for(var l=i?e.rowDefs.length:e.colDefs.length,u=0;u<l;u++){var h=i?e.rowDefs[u]:e.colDefs[u];if(void 0!==h&&0!==h.ma){n=h.index;break}}if(this.index!==n&&(null===(n=this.separatorStroke)&&null!==e&&(n=i?e.defaultRowSeparatorStroke:e.defaultColumnSeparatorStroke),null!==n&&(t=this.separatorStrokeWidth,isNaN(t)&&(t=null!==e?i?e.defaultRowSeparatorStrokeWidth:e.defaultColumnSeparatorStrokeWidth:0))),null===(i=this.Wf)){if(null===e)return t;i=e.defaultSeparatorPadding}return t+(this.isRow?i.top+i.bottom:i.left+i.right)},_.Kb=function(t,e,n){var i=this.Uf;if(null!==i&&(i.bb(ee,t,this,e,n,void 0,void 0),null!==this.Vd&&null!==(e=i.diagram)&&!e.skipsModelSourceBindings&&null!==(i=i.Yg())&&null!==(e=i.data)))for(n=this.Vd.iterator;n.next();)n.value.Vo(this,e,t,i)},_.bind=function(t,e,n,i){var l=null;return(l="string"==typeof t?new de(t,e,n,i):t).sd=this,null!==(t=this.panel)&&null!==(e=t.Yg())&&Yg(e)&&Y("Cannot add a Binding to a RowColumnDefinition that is already frozen: "+l+" on "+t),null===this.Vd&&(this.Vd=new q),this.Vd.add(l),this},Mt.Object.defineProperties(on.prototype,{panel:{get:function(){return this.Uf}},isRow:{get:function(){return this.Wp},set:function(t){this.Wp=t}},index:{get:function(){return this.Wa},set:function(t){this.Wa=t}},height:{get:function(){return this.Ac},set:function(t){var e=this.Ac;e!==t&&(0>t&&le(t,">= 0",on,"height"),this.Ac=t,this.actual=this.ma,null!==this.panel&&this.panel.w(),this.Kb("height",e,t))}},width:{get:function(){return this.Ac},set:function(t){var e=this.Ac;e!==t&&(0>t&&le(t,">= 0",on,"width"),this.Ac=t,this.actual=this.ma,null!==this.panel&&this.panel.w(),this.Kb("width",e,t))}},minimum:{get:function(){return this.ej},set:function(t){var e=this.ej;e!==t&&((0>t||!isFinite(t))&&le(t,">= 0",on,"minimum"),this.ej=t,this.actual=this.ma,null!==this.panel&&this.panel.w(),this.Kb("minimum",e,t))}},maximum:{get:function(){return this.cj},set:function(t){var e=this.cj;e!==t&&(0>t&&le(t,">= 0",on,"maximum"),this.cj=t,this.actual=this.ma,null!==this.panel&&this.panel.w(),this.Kb("maximum",e,t))}},alignment:{get:function(){return this.Fb},set:function(t){var e=this.Fb;e.C(t)||(this.Fb=t.J(),null!==this.panel&&this.panel.w(),this.Kb("alignment",e,t))}},stretch:{get:function(){return this.$f},set:function(t){var e=this.$f;e!==t&&(this.$f=t,null!==this.panel&&this.panel.w(),this.Kb("stretch",e,t))}},separatorPadding:{get:function(){return this.Wf},set:function(t){"number"==typeof t&&(t=new Bt(t));var e=this.Wf;null!==t&&null!==e&&e.C(t)||(null!==t&&(t=t.J()),this.Wf=t,null!==this.panel&&this.panel.w(),this.Kb("separatorPadding",e,t))}},separatorStroke:{get:function(){return this.On},set:function(t){var e=this.On;e!==t&&(null!==t&&xu(t,"RowColumnDefinition.separatorStroke"),t instanceof bt&&t.freeze(),this.On=t,null!==this.panel&&this.panel.w(),this.Kb("separatorStroke",e,t))}},separatorStrokeWidth:{get:function(){return this.Pn},set:function(t){var e=this.Pn;e!==t&&(this.Pn=t,null!==this.panel&&this.panel.w(),this.Kb("separatorStrokeWidth",e,t))}},separatorDashArray:{get:function(){return this.oj},set:function(t){var e=this.oj;if(e!==t){if(null!==t){for(var n=t.length,i=0,l=0;l<n;l++){var u=t[l];"number"==typeof u&&0<=u&&isFinite(u)||Y("separatorDashArray value "+u+" at index "+l+" must be a positive number or zero."),i+=u}if(0===i){if(null===e)return;t=null}}this.oj=t,null!==this.panel&&this.panel.N(),this.Kb("separatorDashArray",e,t)}}},background:{get:function(){return this.Yb},set:function(t){var e=this.Yb;e!==t&&(null!==t&&xu(t,"RowColumnDefinition.background"),t instanceof bt&&t.freeze(),this.Yb=t,null!==this.panel&&this.panel.N(),this.Kb("background",e,t))}},coversSeparators:{get:function(){return this.xm},set:function(t){var e=this.xm;e!==t&&(this.xm=t,null!==this.panel&&this.panel.N(),this.Kb("coversSeparators",e,t))}},sizing:{get:function(){return this.Rn},set:function(t){var e=this.Rn;e!==t&&(this.Rn=t,null!==this.panel&&this.panel.w(),this.Kb("sizing",e,t))}},actual:{get:function(){return this.ma},set:function(t){this.ma=isNaN(this.Ac)?Math.max(Math.min(this.cj,t),this.ej):Math.max(Math.min(this.cj,this.Ac),this.ej)}},measured:{get:function(){return this.jc},set:function(t){this.jc=t}},total:{get:function(){return this.ma+this.Qc()}},position:{get:function(){return this.pa},set:function(t){this.pa=t}}}),on.prototype.computeEffectiveSpacing=on.prototype.Qc,on.prototype.computeEffectiveSpacingTop=on.prototype.mo;var Cu=new W(on,"Default",0),ep=new W(on,"None",1),Jg=new W(on,"ProportionalExtra",2);function wt(t,e){ot.call(this),this.Hd=this.sa=null,this.Jm="None",this.Nc=this.Ak="black",this.ag=1,this.Na=this.Og=null,this.Dn=this.Cn=NaN,this.fa=null,"string"==typeof t?this.figure=t:t&&Object.assign(this,t),e&&Object.assign(this,e)}function Ma(t){null===t.Na?t.Na=new qv:t.Na.ic&&(t.Na=t.Na.copy())}function nf(t,e,n,i){var l=n.length;if(!(4>l)){var u=i.measuredBounds,h=Math.max(1,u.width);u=u.height;for(var g,m,v,x,D,M,f=n[0],p=n[1],T=0,N=oe(),I=2;I<l;I+=2)0==(v=(g=n[I])-f)&&(v=.001),x=(f=(m=n[I+1])-p)/v,D=Math.atan2(f,v),M=Math.sqrt(v*v+f*f),N.push([v,D,x,M]),T+=M,f=g,p=m;f=n[0],p=n[1],v=i.measuredBounds.width,i instanceof wt&&(v-=i.strokeWidth),1>v&&(v=1),l=n=v,m=0!=(g=h/2),v=(M=N[I=0])[0],D=M[1],x=M[2],M=M[3];for(var k=0;.1<=T;){if(0===k&&(m?(l=n,l-=g,T-=g,m=!1):l=n,0===l&&(l=1)),l>T)return void Nt(N);l>M?(k=l-M,l=M):k=0;var O=Math.sqrt(l*l/(1+x*x));if(0>v&&(O=-O),t.translate(f+=O,p+=x*O),t.rotate(D),t.translate(-h/2,-u/2),0===k&&i.ai(t,e),t.translate(h/2,u/2),t.rotate(-D),t.translate(-f,-p),T-=l,M-=l,0!==k){if(++I===N.length)return void Nt(N);v=(M=N[I])[0],D=M[1],x=M[2],M=M[3],l=k}}Nt(N)}}function Qv(t){var e=t.geometryStretch;return null!==t.Hd?e===$r?Ve:e:e===$r?qg[t.figure].defaultStretch:e}function Zg(t,e,n,i,l){return(e=(t=n.x-t)*t+(e=n.y-e)*e)<i?(l.x=n.x,l.y=n.y,e):i}function Qg(t,e,n,i,l,u,h,f,p){var g=!1,m=(l-h)*(e-i)-(u-f)*(t-n);return 0!==m&&(p.x=((l*f-u*h)*(t-n)-(l-h)*(t*i-e*n))/m,p.y=((l*f-u*h)*(e-i)-(u-f)*(t*i-e*n))/m,(t>n?t-n:n-t)<(e>i?e-i:i-e)?(t=e<i?e:i,e=e<i?i:e,(p.y>t||F.ca(p.y,t))&&(p.y<e||F.ca(p.y,e))&&(g=!0)):(e=t<n?t:n,t=t<n?n:t,(p.x>e||F.ca(p.x,e))&&(p.x<t||F.ca(p.x,t))&&(g=!0)),g)}function Al(t,e,n,i){if(!t.Or(e,n,i))return!1;t=e.x,e=e.y;var l=n.x,u=n.y;return n=i.x,i=i.y,t===l?(e<u?(t=e,e=u):t=u,i>=t&&i<=e):(t<l?(i=t,t=l):i=l,n>=i&&n<=t)}function Qx(t){var e=t.diagram;null!==e&&e.undoManager.isUndoingRedoing||(t.segmentOrientation=dp,"None"!==t.toArrow?(t.segmentIndex=-1,t.alignmentFocus=di):"None"!==t.fromArrow&&(t.segmentIndex=0,t.alignmentFocus=new it(1-di.x,di.y)))}function qx(t){var e=Ls[t];if(void 0===e){var n=t.toLowerCase();if("none"===n)return"None";if(void 0===(e=Ls[n])){var l,i=null;for(l in F.dm)if(l.toLowerCase()===n){i=l;break}if(null!==i)return t=K.parse(F.dm[i],!1),Ls[i]=t,n!==i&&(Ls[n]=i),i}}return"string"==typeof e?e:e instanceof K?t:null}on.className="RowColumnDefinition",on.Default=Cu,on.None=ep,on.ProportionalExtra=Jg,Ht(wt,ot),wt.prototype.cloneProtected=function(t){ot.prototype.cloneProtected.call(this,t),t.sa=this.sa,t.Hd=this.Hd,t.Jm=this.Jm,t.Ak=this.Ak,t.Nc=this.Nc,t.ag=this.ag,null!==this.Og&&(t.Og=mc(this.Og)),null!==this.Na&&(t.Na=this.Na.ic?this.Na:this.Na.copy()),t.Cn=this.Cn,t.Dn=this.Dn,null!==this.fa&&(t.fa=this.fa.copy())},(_=wt.prototype).ih=function(){ot.prototype.ih.call(this),null!==this.Na&&(this.Na.ic=!0)},_.ob=function(t){t===Le||t===Ps||t===zc||t===$r?this.geometryStretch=t:ot.prototype.ob.call(this,t)},_.toString=function(){return"Shape("+("None"!==this.figure?this.figure:"None"!==this.toArrow?this.toArrow:this.fromArrow)+")#"+pn(this)},_.ai=function(t,e){var n=this.Nc,i=this.Ak;if(null!==n||null!==i){var l=this.sa;if(null!==l){t.Pc();var u=this.actualBounds,h=this.naturalBounds;null!==i&&gi(this,t,i,!0,!1,h,u);var f=this.part,p=this.ag;if(null===n||0!==p||null===f||!this.isPanelMain&&f.vb()!==this||(p=f.type===$.Link&&f instanceof Pt&&"Selection"===f.category&&f.adornedObject instanceof wt&&f.adornedPart.vb()===f.adornedObject?f.adornedObject.strokeWidth:0),0===p&&(n=null),null!==n&&0!==p&&(gi(this,t,n,!1,!1,h,u),t.lineWidth=p,t.lineJoin=this.strokeJoin,t.lineCap=this.strokeCap,t.miterLimit=this.strokeMiterLimit),u=!1,f&&e.Ge("drawShadows")&&(u=f.isShadowed),f=!0,null===n||null!==i&&"transparent"!==i||(f=!1),h=!1,null!==(p=this.strokeDashArray)&&(h=!0,t.Gr(p,this.strokeDashOffset)),l.type===K.j)t.beginPath(),t.moveTo(l.startX,l.startY),t.lineTo(l.endX,l.endY),null!==n&&t.si();else if(l.type===K.u){var g=l.startX;p=l.startY;var m=l.endX,v=l.endY;l=Math.min(g,m);var x=Math.min(p,v);g=Math.abs(m-g),p=Math.abs(v-p),t.beginPath(),t.rect(l,x,g,p),null!==i&&t.sf(i),null!==n&&(f&&u&&el(t),(0===g||0===p)&&(t.beginPath(),t.rect(l,x,Math.max(g,.1),Math.max(p,.1))),t.si(),f&&u&&ks(t))}else if(l.type===K.F)g=l.startX,p=l.startY,m=l.endX,v=l.endY,l=Math.abs(m-g)/2,x=Math.abs(v-p)/2,g=Math.min(g,m)+l,p=Math.min(p,v)+x,t.beginPath(),t.moveTo(g,p-x),t.bezierCurveTo(g+F.ng*l,p-x,g+l,p-F.ng*x,g+l,p),t.bezierCurveTo(g+l,p+F.ng*x,g+F.ng*l,p+x,g,p+x),t.bezierCurveTo(g-F.ng*l,p+x,g-l,p+F.ng*x,g-l,p),t.bezierCurveTo(g-l,p-F.ng*x,g-F.ng*l,p-x,g,p-x),t.closePath(),null!==i&&t.sf(i),null!==n&&(f&&u?(el(t),t.si(),ks(t)):t.si());else if(l.type===K.m)for(p=(l=l.figures).length,x=0;x<p;x++){g=l.s[x],t.beginPath(),t.moveTo(g.startX,g.startY),v=(m=g.segments.s).length;for(var D=null,M=0;M<v;M++){var T=m[M];switch(T.type){case To:t.moveTo(T.endX,T.endY);break;case we:t.lineTo(T.endX,T.endY);break;case Hr:t.bezierCurveTo(T.point1X,T.point1Y,T.point2X,T.point2Y,T.endX,T.endY);break;case Ss:t.quadraticCurveTo(T.point1X,T.point1Y,T.endX,T.endY);break;case en:if(T.radiusX===T.radiusY){var N=Math.PI/180;t.arc(T.point1X,T.point1Y,T.radiusX,T.startAngle*N,(T.startAngle+T.sweepAngle)*N,0>T.sweepAngle,null!==D?D.endX:g.startX,null!==D?D.endY:g.startY)}else if(0===(N=(D=Ml(T,g)).length))t.lineTo(T.centerX,T.centerY);else for(var I=0;I<N;I++){var k=D[I];0===I&&t.lineTo(k[0],k[1]),t.bezierCurveTo(k[2],k[3],k[4],k[5],k[6],k[7])}break;case so:if(I=N=0,null!==D&&D.type===en){if(0===(k=(D=Ml(D,g)).length)){t.lineTo(T.endX,T.endY);break}null!==(D=D[k-1]||null)&&(N=D[6],I=D[7])}else N=null!==D?D.endX:g.startX,I=null!==D?D.endY:g.startY;if(0===(N=(D=oh(T,g,N,I)).length)){t.lineTo(T.endX,T.endY);break}for(I=0;I<N;I++)t.bezierCurveTo((k=D[I])[2],k[3],k[4],k[5],k[6],k[7]);break;default:Y("Segment not of valid type: "+T.type)}T.isClosed&&t.closePath(),D=T}m=g.isFilled,u?g.isShadowed?(!0===m&&"transparent"!==i&&null!==i&&t.sf(i),null!==n&&(m&&f&&el(t),t.si(),m&&f&&ks(t))):(el(t),m&&"transparent"!==i&&null!==i&&t.sf(i),null!==n&&t.si(),ks(t)):(m&&null!==i&&t.sf(i),null!==n&&t.si())}if(h&&t.Er(),null!==this.pathPattern){if((n=this.pathPattern).measure(1/0,1/0),n.arrange(0,0,(i=n.measuredBounds).width,i.height),u=this.geometry,t.save(),t.beginPath(),i=oe(),u.type===K.j)i.push(u.startX),i.push(u.startY),i.push(u.endX),i.push(u.endY),nf(t,e,i,n);else if(u.type===K.m)for(u=u.figures.iterator;u.next();){for(f=u.value,i.length=0,i.push(f.startX),i.push(f.startY),p=h=f.startX,x=l=f.startY,m=(g=f.segments.s).length,v=0;v<m;v++){switch((M=g[v]).type){case To:nf(t,e,i,n),i.length=0,i.push(M.endX),i.push(M.endY),p=h=M.endX,x=l=M.endY;break;case we:i.push(M.endX),i.push(M.endY),h=M.endX,l=M.endY;break;case Hr:F.De(h,l,M.point1X,M.point1Y,M.point2X,M.point2Y,M.endX,M.endY,.5,i),h=M.endX,l=M.endY;break;case Ss:F.Go(h,l,M.point1X,M.point1Y,M.endX,M.endY,.5,i),h=M.endX,l=M.endY;break;case en:if(0===(D=(T=Ml(M,f)).length)){i.push(M.centerX),i.push(M.centerY),h=M.centerX,l=M.centerY;break}for(N=0;N<D;N++)F.De(h,l,(I=T[N])[2],I[3],I[4],I[5],I[6],I[7],.5,i),h=I[6],l=I[7];break;case so:if(0===(D=(T=oh(M,f,h,l)).length)){i.push(M.endX),i.push(M.endY),h=M.endX,l=M.endY;break}for(N=0;N<D;N++)F.De(h,l,(I=T[N])[2],I[3],I[4],I[5],I[6],I[7],.5,i),h=I[6],l=I[7];break;default:Y("Segment not of valid type: "+M.type)}M.isClosed&&(i.push(p),i.push(x),nf(t,e,i,n))}nf(t,e,i,n)}else if(u.type===K.u)i.push(u.startX),i.push(u.startY),i.push(u.endX),i.push(u.startY),i.push(u.endX),i.push(u.endY),i.push(u.startX),i.push(u.endY),i.push(u.startX),i.push(u.startY),nf(t,e,i,n);else if(u.type===K.F){if((l=new Nn).startX=u.endX,l.startY=(u.startY+u.endY)/2,(h=new Lt(en)).startAngle=0,h.sweepAngle=360,h.centerX=(u.startX+u.endX)/2,h.centerY=(u.startY+u.endY)/2,h.radiusX=Math.abs(u.startX-u.endX)/2,h.radiusY=Math.abs(u.startY-u.endY)/2,l.add(h),0===(f=(u=Ml(h,l)).length))i.push(h.centerX),i.push(h.centerY);else for(h=l.startX,l=l.startY,p=0;p<f;p++)F.De(h,l,(x=u[p])[2],x[3],x[4],x[5],x[6],x[7],.5,i),h=x[6],l=x[7];nf(t,e,i,n)}Nt(i),t.restore(),t.Oc(!1)}}}},_.ia=function(t,e){if(void 0===e&&(e=new P),t instanceof it){t.Fc()&&Y("getDocumentPoint Spot must be a real, specific Spot, not: "+t.toString());var n=this.naturalBounds,i=this.strokeWidth;e.h(t.x*(n.width+i)-i/2+n.x+t.offsetX,t.y*(n.height+i)-i/2+n.y+t.offsetY)}else e.set(t);return this.ge.Fa(e),e},_.gi=function(t){void 0===t&&(t=new B);var e=this.naturalBounds,n=this.ge;e=B.allocAt(e.x,e.y,e.width,e.height);var i=this.strokeWidth;return e.vc(i/2,i/2),i=P.allocAt(e.x,e.y).transform(n),t.h(i.x,i.y,0,0),i.h(e.right,e.y).transform(n),He(t,i.x,i.y,0,0),i.h(e.right,e.bottom).transform(n),He(t,i.x,i.y,0,0),i.h(e.x,e.bottom).transform(n),He(t,i.x,i.y,0,0),B.free(e),P.free(i),t},_.Xg=function(t,e){var n=this.geometry;if(null===n||null===this.fill&&null===this.stroke)return!1;var i=n.bounds,l=this.strokeWidth/2;n.type!==K.j||e||(l+=2);var u=B.alloc();if(u.assign(i),u.vc(l+2,l+2),!u.ba(t))return B.free(u),!1;if(i=l+1e-4,n.type===K.j)return!(null===this.stroke||(i=(n.endX-n.startX)*(t.x-n.startX)+(n.endY-n.startY)*(t.y-n.startY),0>(n.startX-n.endX)*(t.x-n.endX)+(n.startY-n.endY)*(t.y-n.endY)||0>i))&&(B.free(u),F.Tb(n.startX,n.startY,n.endX,n.endY,l,t.x,t.y));if(n.type===K.u){e=n.startX;var h=n.startY,f=n.endX;if(n=n.endY,u.x=Math.min(e,f),u.y=Math.min(h,n),u.width=Math.abs(f-e),u.height=Math.abs(n-h),null===this.fill){if(u.vc(-i,-i),u.ba(t))return B.free(u),!1;u.vc(i,i)}return null!==this.stroke&&u.vc(l,l),t=u.ba(t),B.free(u),t}if(n.type===K.F){h=n.startX,l=n.startY,f=n.endX;var p=n.endY;if(n=Math.min(h,f),e=Math.min(l,p),h=Math.abs(f-h)/2,l=Math.abs(p-l)/2,n=t.x-(n+h),e=t.y-(e+l),null===this.fill){if(l-=i,0>=(h-=i)||0>=l||1>=n*n/(h*h)+e*e/(l*l))return B.free(u),!1;h+=i,l+=i}return null!==this.stroke&&(h+=i,l+=i),B.free(u),!(0>=h||0>=l)&&1>=n*n/(h*h)+e*e/(l*l)}if(n.type===K.m)return B.free(u),null===this.fill?OM(n,t.x,t.y,l):dx(n,t,l,1<this.strokeWidth,e);Y("Unknown Geometry type: "+n.type)},_.El=function(t,e,n,i){var l=this.desiredSize,u=this.ag;if(t=Math.max(t,0),e=Math.max(e,0),null!==this.Hd)var h=this.geometry.bounds;else{var f=this.figure,p=qg[f];if(void 0===p){var g=F.Oe[f];"string"==typeof g&&(g=F.Oe[g]),"function"==typeof g?(p=g(null,100,100),qg[f]=p):Y("Unsupported Figure: "+f)}h=p.bounds}f=h.width,p=h.height,g=h.width;var m=h.height;switch(os(this,!0)){case Le:i=n=0;break;case Ve:g=Math.max(t-u,0),m=Math.max(e-u,0);break;case Mn:g=Math.max(t-u,0),i=0;break;case Vn:n=0,m=Math.max(e-u,0)}isFinite(l.width)&&(g=l.width),isFinite(l.height)&&(m=l.height),h=this.maxSize;var v=this.minSize;switch(n=Math.max(n-u,v.width),i=Math.max(i-u,v.height),g=Math.min(h.width,g),m=Math.min(h.height,m),g=isFinite(g)?Math.max(n,g):Math.max(f,n),m=isFinite(m)?Math.max(i,m):Math.max(p,i),n=Qv(this)){case Le:break;case Ve:f=g,p=m;break;case Ps:n=Math.min(g/f,m/p),isFinite(n)||(n=1),f*=n,p*=n;break;default:Y(n+" is not a valid geometryStretch.")}null!==this.Hd?(0===f&&(f=.001),0===p&&(p=.001),i=f/(h=(n=null!==this.Hd?this.Hd:this.sa).bounds).width,h=p/h.height,isFinite(i)||(i=1),isFinite(h)||(h=1),this.sa=1===i&&1===h?n:n.copy().scale(i,h)):null!==this.sa&&F.ca(this.sa.Hk,t-u)&&F.ca(this.sa.Gk,e-u)||(this.sa=wt.makeGeometry(this,f,p)),h=this.sa.bounds,t===1/0||e===1/0?this.ve(h.x-u/2,h.y-u/2,0===t&&0===f?0:h.width+u,0===e&&0===p?0:h.height+u):this.ve(-u/2,-u/2,g+u,m+u),l.v()?this.bc.h(0,0,l.width,l.height):this.bc.assign(h)},_.Vg=function(t,e,n,i){Lv(this,t,e,n,i)},_.Or=function(t,e,n){return this.Kj(t.x,t.y,e.x,e.y,n)},_.Kj=function(t,e,n,i,l){var u=this.transform,h=1/(u.m11*u.m22-u.m12*u.m21),f=u.m22*h,p=-u.m12*h,g=-u.m21*h,m=u.m11*h,v=h*(u.m21*u.dy-u.m22*u.dx),x=h*(u.m12*u.dx-u.m11*u.dy);u=t*f+e*g+v,h=t*p+e*m+x,f=n*f+i*g+v,p=n*p+i*m+x,v=this.ag/2,null===(g=this.sa)&&(this.measure(1/0,1/0),g=this.sa);var D=g.bounds;if(m=!1,g.type===K.j)if(1.5>=this.strokeWidth)m=F.Je(g.startX,g.startY,g.endX,g.endY,u,h,f,p,l);else{if(g.startX===g.endX?(i=v,m=0):(e=(g.endY-g.startY)/(g.endX-g.startX),i=(m=v/Math.sqrt(1+e*e))*e),e=oe(),t=new P,F.Je(g.startX+i,g.startY+m,g.endX+i,g.endY+m,u,h,f,p,t)&&e.push(t),t=new P,F.Je(g.startX-i,g.startY-m,g.endX-i,g.endY-m,u,h,f,p,t)&&e.push(t),t=new P,F.Je(g.startX+i,g.startY+m,g.startX-i,g.startY-m,u,h,f,p,t)&&e.push(t),t=new P,F.Je(g.endX+i,g.endY+m,g.endX-i,g.endY-m,u,h,f,p,t)&&e.push(t),0===(f=e.length))return Nt(e),!1;for(m=!0,p=1/0,i=0;i<f;i++)(n=((t=e[i]).x-u)*(t.x-u)+(t.y-h)*(t.y-h))<p&&(p=n,l.x=t.x,l.y=t.y);Nt(e)}else if(g.type===K.u)m=F.wf(D.x-v,D.y-v,D.x+D.width+v,D.y+D.height+v,u,h,f,p,l);else if(g.type===K.F){t:if(0===(e=B.allocAt(D.x,D.y,D.width,D.height).vc(v,v)).width)m=F.Je(e.x,e.y,e.x,e.y+e.height,u,h,f,p,l);else if(0===e.height)m=F.Je(e.x,e.y,e.x+e.width,e.y,u,h,f,p,l);else{if(i=e.x+(t=e.width/2),m=e.y+(g=e.height/2),n=9999,u!==f&&(n=(h-p)/(u-f)),9999>Math.abs(n)){if(0>t*t*n*n+g*g-(p=h-m-n*(u-i))*p){l.x=NaN,l.y=NaN,m=!1;break t}f=(-t*t*n*p+t*g*(v=Math.sqrt(t*t*n*n+g*g-p*p)))/(g*g+t*t*n*n)+i,t=(-t*t*n*p-t*g*v)/(g*g+t*t*n*n)+i,g=n*(f-i)+p+m,p=n*(t-i)+p+m,Math.abs((u-f)*(u-f))+Math.abs((h-g)*(h-g))<Math.abs((u-t)*(u-t))+Math.abs((h-p)*(h-p))?(l.x=f,l.y=g):(l.x=t,l.y=p)}else{if(f=g*g,0>(f-=f/(t*t)*(p=u-i)*p)){l.x=NaN,l.y=NaN,m=!1;break t}f=m+(p=Math.sqrt(f)),p=m-p,Math.abs(f-h)<Math.abs(p-h)?(l.x=u,l.y=f):(l.x=u,l.y=p)}m=!0}B.free(e)}else if(g.type===K.m){x=P.alloc();var M=f-u,T=p-h,N=M*M+T*T,I=u,k=h;if(0<N&&D.contains(I,k)&&(x.x=I,x.y=k,this.ba(x)))for(0!==M&&.5>Math.abs(M)?(T*=.5/M,M=.5):0!==T&&.5>Math.abs(T)&&(M*=.5/T,T=.5),I-=M,k-=T;D.contains(I,k);)I-=M,k-=T;for(l.x=f,l.y=p,T=0;T<g.figures.count;T++)for(var O=g.figures.s[T],L=O.isFilled?I:u,b=O.isFilled?k:h,U=O.segments,X=D=O.startX,nt=M=O.startY,et=0;et<U.count;et++){var Q=U.s[et],G=Q.type,xt=Q.endX,ft=Q.endY,At=!1;switch(G){case To:X=xt,nt=ft;break;case we:At=Qg(D,M,xt,ft,L,b,f,p,x);break;case Hr:At=F.io(D,M,Q.point1X,Q.point1Y,Q.point2X,Q.point2Y,xt,ft,L,b,f,p,.6,x);break;case Ss:At=F.io(D,M,D+2/3*(Q.point1X-D),M+2/3*(Q.point1Y-M),xt+2/3*(Q.point1X-xt),ft+2/3*(Q.point1Y-ft),xt,ft,L,b,f,p,.6,x);break;case en:case so:var ie=(G=Q.type===en?Ml(Q,O):oh(Q,O,D,M)).length;if(0===ie){At=Qg(D,M,Q.type===en?Q.centerX:Q.endX,Q.type===en?Q.centerY:Q.endY,L,b,f,p,x);break}for(ft=null,xt=0;xt<ie;xt++){if(ft=G[xt],0===xt&&Qg(D,M,ft[0],ft[1],L,b,f,p,x)){var pe=Zg(L,b,x,N,l);pe<N&&(N=pe,m=!0)}F.io(ft[0],ft[1],ft[2],ft[3],ft[4],ft[5],ft[6],ft[7],L,b,f,p,.6,x)&&(pe=Zg(L,b,x,N,l))<N&&(N=pe,m=!0)}xt=ft[6],ft=ft[7];break;default:Y("Unknown Segment type: "+G)}D=xt,M=ft,At&&(At=Zg(L,b,x,N,l))<N&&(N=At,m=!0),Q.isClosed&&Qg(D,M,xt=X,ft=nt,L,b,f,p,x)&&(Q=Zg(L,b,x,N,l))<N&&(N=Q,m=!0)}u=n-t,h=i-e,0!==(f=Math.sqrt(u*u+h*h))&&(u/=f,h/=f),l.x-=u*v,l.y-=h*v,P.free(x)}else Y("Unknown Geometry type: "+g.type);return!!m&&(this.transform.Fa(l),!0)},_.Wg=function(t,e){if(void 0===e)return t.Ee(this.actualBounds);var n=this.sa;null===n&&(this.measure(1/0,1/0),n=this.sa),n=n.bounds;var i=this.strokeWidth/2,l=!1,u=P.alloc();return u.h(n.x-i,n.y-i),t.ba(e.Fa(u))&&(u.h(n.x-i,n.bottom+i),t.ba(e.Fa(u))&&(u.h(n.right+i,n.bottom+i),t.ba(e.Fa(u))&&(u.h(n.right+i,n.y-i),t.ba(e.Fa(u))&&(l=!0)))),P.free(u),l},_.Sc=function(t,e){if(this.Wg(t,e)||void 0===e&&(e=this.transform,t.Ee(this.actualBounds)))return!0;var n=Dt.alloc();n.set(e),n.Tr();var i=t.left,l=t.right,u=t.top;t=t.bottom;var h=P.alloc();if(h.h(i,u),n.Fa(h),this.Xg(h,!0)||(h.h(l,u),n.Fa(h),this.Xg(h,!0))||(h.h(i,t),n.Fa(h),this.Xg(h,!0))||(h.h(l,t),n.Fa(h),this.Xg(h,!0)))return P.free(h),!0;var f=P.alloc(),p=P.alloc();return n.set(e),n.Ou(this.transform),n.Tr(),f.x=l,f.y=u,f.transform(n),h.x=i,h.y=u,h.transform(n),e=!1,Al(this,h,f,p)?e=!0:(h.x=l,h.y=t,h.transform(n),Al(this,h,f,p)?e=!0:(f.x=i,f.y=t,f.transform(n),Al(this,h,f,p)?e=!0:(h.x=i,h.y=u,h.transform(n),Al(this,h,f,p)&&(e=!0)))),P.free(h),Dt.free(n),P.free(f),P.free(p),e},_.Vw=function(t,e,n){function i(N,I){for(var k=N.length,O=0;O<k;O+=2)if(I.td(N[O],N[O+1])>l)return!0;return!1}if(n&&null!==this.fill&&this.Xg(t,!0))return!0;var l=t.rf(e),u=l;if(1.5<this.strokeWidth&&(l=this.strokeWidth/2+Math.sqrt(l),l*=l),null===(e=this.sa)&&(this.measure(1/0,1/0),null===(e=this.sa)))return!1;if(!n){var h=e.bounds,f=h.x,p=h.y,g=h.x+h.width;if(h=h.y+h.height,Cs(t.x,t.y,f,p)<=l&&Cs(t.x,t.y,g,p)<=l&&Cs(t.x,t.y,f,h)<=l&&Cs(t.x,t.y,g,h)<=l)return!0}if(f=e.startX,p=e.startY,g=e.endX,h=e.endY,e.type===K.j){if(n=(f-g)*(t.x-g)+(p-h)*(t.y-h),Kn(t.x,t.y,f,p,g,h)<=(0<=(g-f)*(t.x-f)+(h-p)*(t.y-p)&&0<=n?l:u))return!0}else{if(e.type===K.u)return e=!1,n&&(e=Kn(t.x,t.y,f,p,f,h)<=l||Kn(t.x,t.y,f,p,g,p)<=l||Kn(t.x,t.y,g,p,g,h)<=l||Kn(t.x,t.y,f,h,g,h)<=l),e;if(e.type===K.F){e=t.x-(f+g)/2,u=t.y-(p+h)/2;var m=Math.abs(g-f)/2,v=Math.abs(h-p)/2;if(0===m||0===v)return Kn(t.x,t.y,f,p,g,h)<=l;if(!n)return!(Cs(e,u,-m,0)>=l||Cs(e,u,0,-v)>=l||Cs(e,u,0,v)>=l||Cs(e,u,m,0)>=l);if((t=F.Hy(m,v,e,u))*t<=l)return!0}else if(e.type===K.m){if(u=(g=e.bounds).x,f=g.y,p=g.x+g.width,g=g.y+g.height,t.x>p&&t.x<u&&t.y>g&&t.y<f&&Kn(t.x,t.y,u,f,u,g)>l&&Kn(t.x,t.y,u,f,p,f)>l&&Kn(t.x,t.y,p,g,u,g)>l&&Kn(t.x,t.y,p,g,p,f)>l)return!1;if(u=Math.sqrt(l),!n){for(n=e.figures,e=0;e<n.count;e++){if(t.td(h=(u=n.s[e]).startX,m=u.startY)>l)return!1;for(p=(f=u.segments.s).length,g=0;g<p;g++)switch(v=f[g],v.type){case To:case we:if(t.td(h=v.endX,m=v.endY)>l)return!1;break;case Hr:var x=oe();if(F.De(h,m,v.point1X,v.point1Y,v.point2X,v.point2Y,v.endX,v.endY,.8,x),h=i(x,t),Nt(x),h||t.td(h=v.endX,m=v.endY)>l)return!1;break;case Ss:if(x=oe(),F.Go(h,m,v.point1X,v.point1Y,v.endX,v.endY,.8,x),h=i(x,t),Nt(x),h||t.td(h=v.endX,m=v.endY)>l)return!1;break;case en:case so:var D=(x=v.type===en?Ml(v,u):oh(v,u,h,m)).length;if(0===D){if(t.td(h=v.type===en?v.centerX:v.endX,m=v.type===en?v.centerY:v.endY)>l)return!1;break}v=null;for(var M=oe(),T=0;T<D;T++)if(v=x[T],M.length=0,F.De(v[0],v[1],v[2],v[3],v[4],v[5],v[6],v[7],.8,M),i(M,t))return Nt(M),!1;Nt(M),null!==v&&(h=v[6],m=v[7]);break;default:Y("Unknown Segment type: "+v.type)}}return!0}if(null===this.fill?OM(e,t.x,t.y,u):dx(e,t,u,!0,!1))return!0}}return!1},_.mc=function(){this.sa=null},_.Sv=function(){return this.ag},wt.makeGeometry=function(t,e,n){if("None"!==t.toArrow)var i=Ls[t.toArrow];else"None"!==t.fromArrow?i=Ls[t.fromArrow]:("string"==typeof(i=F.Oe[t.figure])&&(i=F.Oe[i]),void 0===i&&Y("Unknown Shape.figure: "+t.figure),(i=i(t,e,n)).Hk=e,i.Gk=n);if(null===i){var l=F.Oe.Rectangle;"function"==typeof l&&(i=l(t,e,n))}return i},Mt.Object.defineProperties(wt.prototype,{geometry:{get:function(){return null!==this.sa?this.sa:this.Hd},set:function(t){var e=this.sa,n=this.Hd;if(e!==t){this.Hd=this.sa=null!==t?t.freeze():null;var i=this.part;null!==i&&(i.Sf=NaN),this.w(),this.g("geometry",e||n,t),mu(this)&&null!==(t=this.part)&&gu(this,t,"geometryString")}}},geometryString:{get:function(){return null===this.geometry?"":this.geometry.toString()},set:function(t){var e=(t=K.parse(t)).normalize();this.geometry=t,this.position=t=P.allocAt(-e.x,-e.y),P.free(t)}},isGeometryPositioned:{get:function(){return 0!=(1048576&this.o)},set:function(t){var e=0!=(1048576&this.o);e!==t&&(this.o^=1048576,this.w(),this.g("isGeometryPositioned",e,t))}},fill:{get:function(){return this.Ak},set:function(t){var e=this.Ak;e!==t&&(null!==t&&xu(t,"Shape.fill"),t instanceof bt&&t.freeze(),this.Ak=t,this.N(),this.g("fill",e,t))}},stroke:{get:function(){return this.Nc},set:function(t){var e=this.Nc;e!==t&&(null!==t&&xu(t,"Shape.stroke"),t instanceof bt&&t.freeze(),this.Nc=t,this.N(),this.g("stroke",e,t))}},strokeWidth:{get:function(){return this.ag},set:function(t){var e=this.ag;if(e!==t)if(0<=t){this.ag=t,this.w();var n=this.part;null!==n&&(n.Sf=NaN),this.g("strokeWidth",e,t)}else le(t,"value >= 0",wt,"strokeWidth:value")}},strokeCap:{get:function(){return null!==this.Na?this.Na.dr:"butt"},set:function(t){var e=this.strokeCap;e!==t&&("string"!=typeof t||"butt"!==t&&"round"!==t&&"square"!==t?le(t,'"butt", "round", or "square"',wt,"strokeCap"):(Ma(this),this.Na.dr=t,this.N(),this.g("strokeCap",e,t)))}},strokeJoin:{get:function(){return null!==this.Na?this.Na.er:"miter"},set:function(t){var e=this.strokeJoin;e!==t&&("string"!=typeof t||"miter"!==t&&"bevel"!==t&&"round"!==t?le(t,'"miter", "bevel", or "round"',wt,"strokeJoin"):(Ma(this),this.Na.er=t,this.N(),this.g("strokeJoin",e,t)))}},strokeMiterLimit:{get:function(){return null!==this.Na?this.Na.fr:10},set:function(t){var e=this.strokeMiterLimit;if(e!==t&&1<=t){Ma(this),this.Na.fr=t,this.N();var n=this.part;null!==n&&(n.Sf=NaN),this.g("strokeMiterLimit",e,t)}}},strokeDashArray:{get:function(){return this.Og},set:function(t){var e=this.Og;if(e!==t){if(null!==t){for(var n=t.length,i=0,l=0;l<n;l++){var u=t[l];0<=u&&isFinite(u)||Y("strokeDashArray:value "+u+" at index "+l+" must be a positive number or zero."),i+=u}if(0===i){if(null===e)return;t=null}}this.Og=t,this.N(),this.g("strokeDashArray",e,t)}}},strokeDashOffset:{get:function(){return null!==this.Na?this.Na.pj:0},set:function(t){var e=this.strokeDashOffset;e!==t&&0<=t&&(Ma(this),this.Na.pj=t,this.N(),this.g("strokeDashOffset",e,t))}},figure:{get:function(){return this.Jm},set:function(t){var e=this.Jm;if(e!==t){var n=F.Oe[t];"function"==typeof n?n=t:(n=F.Oe[t.toLowerCase()])||Y("Unknown Shape.figure: "+t),e!==n&&(null!==(t=this.part)&&(t.Sf=NaN),this.Jm=n,this.Hd=null,this.mc(),this.w(),this.g("figure",e,n))}}},toArrow:{get:function(){return null!==this.Ra?this.Ra.W:"None"},set:function(t){var e=this.toArrow;if(!0===t?t="Standard":!1===t&&(t=""),e!==t){var n=qx(t);null===n?Y("Unknown Shape.toArrow: "+t):e!==n&&(null===this.Ra&&(this.Ra=new vu),this.Ra.W=n,this.Hd=null,this.mc(),this.w(),Qx(this),this.g("toArrow",e,n))}}},fromArrow:{get:function(){return null!==this.Ra?this.Ra.j:"None"},set:function(t){var e=this.fromArrow;if(!0===t?t="Standard":!1===t&&(t=""),e!==t){var n=qx(t);null===n?Y("Unknown Shape.fromArrow: "+t):e!==n&&(null===this.Ra&&(this.Ra=new vu),this.Ra.j=n,this.Hd=null,this.mc(),this.w(),Qx(this),this.g("fromArrow",e,n))}}},spot1:{get:function(){return null!==this.Na?this.Na.Yf:Hn},set:function(t){var e=this.spot1;e.C(t)||(t=t.J(),Ma(this),this.Na.Yf=t,this.w(),this.g("spot1",e,t))}},spot2:{get:function(){return null!==this.Na?this.Na.Zf:Hn},set:function(t){var e=this.spot2;e.C(t)||(t=t.J(),Ma(this),this.Na.Zf=t,this.w(),this.g("spot2",e,t))}},parameter1:{get:function(){return this.Cn},set:function(t){var e=this.Cn;e!==t&&(this.Cn=t,this.mc(),this.w(),this.g("parameter1",e,t))}},parameter2:{get:function(){return this.Dn},set:function(t){var e=this.Dn;e!==t&&(this.Dn=t,this.mc(),this.w(),this.g("parameter2",e,t))}},naturalBounds:{get:function(){return this.bc}},pathPattern:{get:function(){return null!==this.Na?this.Na.Aq:null},set:function(t){var e=this.pathPattern;e!==t&&(Ma(this),this.Na.Aq=t,this.N(),this.g("pathPattern",e,t))}},geometryStretch:{get:function(){return null!==this.Na?this.Na.Mp:$r},set:function(t){var e=this.geometryStretch;e!==t&&(Ma(this),this.Na.Mp=t,this.w(),this.g("geometryStretch",e,t))}},interval:{get:function(){return null!==this.fa?this.fa.Ik:1},set:function(t){var e=this.interval;if(e!==(t=Math.round(t))&&0!==t&&isFinite(t)){null===this.fa&&(this.fa=new ko),this.fa.Ik=t;var n=this.diagram;null!==n&&this.panel===n.grid&&Es(n),this.w(),null!==(n=this.panel)&&(n.graduatedIntervals=null),this.g("interval",e,t)}}},graduatedStart:{get:function(){return null!==this.fa?this.fa.u:0},set:function(t){var e=this.graduatedStart;e!==t&&(0>t?t=0:1<t&&(t=1),null===this.fa&&(this.fa=new ko),this.fa.u=t,this.w(),this.g("graduatedStart",e,t))}},graduatedEnd:{get:function(){return null!==this.fa?this.fa.j:1},set:function(t){var e=this.graduatedEnd;e!==t&&(0>t?t=0:1<t&&(t=1),null===this.fa&&(this.fa=new ko),this.fa.j=t,this.w(),this.g("graduatedEnd",e,t))}},graduatedSkip:{get:function(){return null!==this.fa?this.fa.m:null},set:function(t){var e=this.graduatedSkip;e!==t&&(null===this.fa&&(this.fa=new ko),this.fa.m=t,this.w(),this.g("graduatedSkip",e,t))}}}),wt.prototype.intersectsRect=wt.prototype.Sc,wt.prototype.containedInRect=wt.prototype.Wg,wt.prototype.getNearestIntersectionPoint=wt.prototype.Or,wt.prototype.getDocumentBounds=wt.prototype.gi,wt.prototype.getDocumentPoint=wt.prototype.ia;var Ls=new Vr,qg=new Vr;function qv(){this.ic=!1,this.dr="butt",this.er="miter",this.fr=10,this.pj=0,this.Aq=null,this.Mp=$r,this.Zf=this.Yf=Hn}function Wt(t,e){return ot.call(this),Ir||(Hi=$e?new Wr(null).context:null,Ir=!0),this.o|=2097152,this.cc="",this.Nc="black",this.re="13px sans-serif",this.kq=this.yb=this.dd=0,this.da=this.fa=this.om=this.rt=this.st=null,this.zh=0,this.Te=null,this.Ae=0,this.qe=this.Wb=this.Jc=null,"string"==typeof t?this.text=t:t&&Object.assign(this,t),e&&Object.assign(this,e),this}function An(t){null===t.da?t.da=new op:t.da.ic&&(t.da=t.da.copy())}function tm(t,e){t.o=6144|e.o,t.tb=e.opacity,t.Yb=e.background,t.areaBackground=e.areaBackground,t.$c=e.desiredSize.J(),t.minSize=e.minSize.J(),t.maxSize=e.maxSize.J(),t.Ib=null!==e.Ib?e.Ib.copy():null,t.xa=e.scale,t.Gb=e.angle,t.stretch=e.stretch,t.Ag=e.margin.J(),t.Fb=e.alignment.J(),t.fk=e.alignmentFocus.J(),t.segmentFraction=e.segmentFraction,t.segmentOffset=e.segmentOffset.J(),t.segmentOrientation=e.segmentOrientation,null!==e.ib&&(t.ib=e.ib.copy()),t.shadowVisible=e.shadowVisible,t.cc=e.cc,t.Nc=e.Nc,t.re=e.re,null!==t.fa&&(t.fa=e.fa.copy()),null!==e.da&&(t.da=e.da.ic?e.da:e.da.copy()),t.zh=e.zh}function rf(t,e,n){null===t.qe?(t.qe=e,t.yb=n):((null===t.Wb||null===t.Jc)&&(t.Wb=[],t.Jc=[],t.Wb.push(t.qe),t.Jc.push(t.yb)),t.Wb.push(e),t.Jc.push(n))}function np(t,e,n,i){var l=t.formatting===rp;l&&(e=e.trim());var u=0,h=t.re,f=t.spacingAbove+t.spacingBelow;f=Math.max(0,sf(t)+f);var p=t.overflow===rm?t1(h):0;if(t.dd>=t.maxLines)null!==i&&i.h(0,f);else if(h=e,t.wrap===nm){t.Ae=1;var g=tr(e);if(0===p||g<=n)t.yb=Math.max(t.yb,g),rf(t,e,t.yb),null!==i&&i.h(g,f);else{for(g=tr((u=Ei(t,h))+(e=Ei(t,h=h.substr(u.length))));0<e.length&&g<=n;)g=(u+=e)+(e=Ei(t,h=h.substr(e.length))),l&&(g=g.trim()),g=tr(g);for(l&&(e=e.trim()),u+=e,n=Math.max(1,n-p);tr(u)>n&&1<u.length;)u=u.substr(0,u.length-1);var m=tr(u+=sm);t.yb=m,rf(t,u,m),null!==i&&i.h(m,f)}}else{for(p=0,0===h.length&&(p=1,rf(t,h,0));0<h.length;){for(e=Ei(t,h),h=h.substr(e.length);tr(e)>n;){var v=1;for(g=tr(e.substr(0,v)),m=0;g<=n;)v++,m=g,g=tr(e.substr(0,v));if(1===v){var x=g;u=Math.max(u,g)}else x=m,u=Math.max(u,m);if(1>--v&&(v=1),rf(t,e.substr(0,v),x),p++,e=e.substr(v),t.dd+p>t.maxLines)break}for(g=tr(e+(m=Ei(t,h)));0<m.length&&g<=n;)g=(e+=m)+(m=Ei(t,h=h.substr(m.length))),l&&(g=g.trim()),g=tr(g);if(l&&(e=e.trim()),""!==e&&("\xad"===e[e.length-1]&&(e=e.substring(0,e.length-1)+"\u2010"),0===m.length?(v=g,u=Math.max(u,g)):(v=m=tr(e),u=Math.max(u,m)),rf(t,e,v),p++,t.dd+p>t.maxLines))break}t.Ae=Math.min(t.maxLines,p),t.yb=Math.max(t.yb,u),null!==i&&i.h(t.yb,f*t.Ae)}}function Ei(t,e){if(t.wrap===r1)return e.substr(0,1);for(var n=e.length,i=0,l=lf;i<n&&!l.test(e.charAt(i));)i++;for(t.formatting===o1&&(n=Math.min(n,i+1));i<n&&l.test(e.charAt(i));)i++;return i>=e.length?e:e.substr(0,i)}function tr(t){return null===Hi?8*t.length:Hi.measureText(t).width}function sf(t){if(null!==t.Te)return t.Te;var e=t.re;if(null===Hi){var n=16;return t.Te=n}return void 0!==ol[e]&&5e3>s1?n=ol[e]:(n=1.3*Hi.measureText("M").width,ol[e]=n,s1++),t.Te=n}function t1(t){if(null===Hi)return 6;if(void 0!==om[t]&&5e3>l1)var e=om[t];else e=Hi.measureText(sm).width,om[t]=e,l1++;return e}function e1(t,e){var n=t.cc.replace(/\r\n/g,"\n").replace(/\r/g,"\n"),i=t.spacingAbove+t.spacingBelow;if(i=Math.max(0,sf(t)+i),0===n.length)return t.yb=0,t.dd=1,i;if(!t.isMultiline){var l=n.indexOf("\n",0);0<=l&&(n=n.substr(0,l))}l=0;for(var h,u=t.dd=0,f=!1;!f;){if(-1===(h=n.indexOf("\n",u))&&(h=n.length,f=!0),u<=h){if(u=n.substr(u,h-u),t.wrap!==nm){t.Ae=0;var p=dt.alloc();np(t,u,e,p),l+=p.height,dt.free(p),t.dd+=t.Ae}else np(t,u,e,null),l+=i,t.dd++;t.dd===t.maxLines&&(f=!0)}u=h+1}return t.kq=l}wt.className="Shape",wt.getFigureGenerators=function(){var e,t=new vt;for(e in F.Oe)e!==e.toLowerCase()&&t.add(e,F.Oe[e]);return t.freeze(),t},wt.defineFigureGenerator=function(t,e){var n=t.toLowerCase(),i=F.Oe;i[t]=e,i[n]=t},wt.getArrowheadGeometries=function(){var t=new vt;for(i in F.dm)if(void 0===Ls[i]){var e=K.parse(F.dm[i],!1);Ls[i]=e,(e=i.toLowerCase())!==i&&(Ls[e]=i)}for(var n in Ls)if(n!==n.toLowerCase()){var i=Ls[n];i instanceof K&&t.add(n,i)}return t.freeze(),t},wt.defineArrowheadGeometry=function(t,e){var n;n="string"==typeof e?K.parse(e,!1):e,"none"!==(e=t.toLowerCase())&&t!==e||Y("Shape.defineArrowheadGeometry name must not be empty or None or all-lower-case: "+t);var i=Ls;i[t]=n,i[e]=t},qv.prototype.copy=function(){var t=new qv;return t.dr=this.dr,t.er=this.er,t.fr=this.fr,t.pj=this.pj,t.Aq=this.Aq,t.Mp=this.Mp,t.Yf=this.Yf.J(),t.Zf=this.Zf.J(),t},Ht(Wt,ot),Wt.prototype.cloneProtected=function(t){ot.prototype.cloneProtected.call(this,t),t.cc=this.cc,t.Nc=this.Nc,t.re=this.re,t.dd=this.dd,t.yb=this.yb,t.kq=this.kq,t.st=this.st,t.rt=this.rt,t.om=this.om,null!==this.fa&&(t.fa=this.fa.copy()),null!==this.da&&(t.da=this.da.ic?this.da:this.da.copy()),t.zh=this.zh,t.Te=this.Te,t.Ae=this.Ae,t.Jc=this.Jc,t.Wb=this.Wb,t.qe=this.qe},(_=Wt.prototype).ih=function(){ot.prototype.ih.call(this),null!==this.da&&(this.da.ic=!0)},_.ob=function(t){t.classType===Wt?this.wrap=t:ot.prototype.ob.call(this,t)},_.toString=function(){return 22<this.cc.length?'TextBlock("'+this.cc.substring(0,20)+'"...)':'TextBlock("'+this.cc+'")'},_.w=function(){ot.prototype.w.call(this),this.rt=this.st=null},_.ai=function(t,e){if(null!==this.Nc&&0!==this.cc.length&&null!==this.re){var n=this.naturalBounds,i=this.actualBounds,l=n.width,u=n.height,h=sf(this),f=t.textAlign=this.textAlign,p=e.$m;"start"===f?f=p?"right":"left":"end"===f&&(f=p?"left":"right"),p=this.isUnderline;var g=this.isStrikethrough;gi(this,t,this.Nc,!0,!1,n,i),(p||g)&&gi(this,t,this.Nc,!1,!1,n,i),i=0,n=!1;var m=this.ge,v=m.dx-(h*m.m21+m.dx),x=e.scale;switch(8>(v*v+(m=m.dy-(h*m.m22+m.dy))*m)*x*x&&(n=!0),e.Zb!==t&&(n=!1),!1===e.Ge("textGreeking")&&(n=!1),e=this.spacingAbove,v=this.spacingBelow,this.flip){case Wc:t.translate(l,0),t.scale(-1,1);break;case $c:t.translate(0,u),t.scale(1,-1);break;case Gd:t.translate(l,u),t.scale(-1,-1)}if(t.Pc(),u>(x=(e+h+v)*(m=this.dd))&&(i=(i=this.verticalAlignment).y*u-i.y*x+i.offsetY),1===m&&null!==this.qe)(v=this.yb)>l&&(v=l),this.$h(this.qe,t,0,i+e,l,h,v,n,f,p,g);else if(null!==this.Jc&&null!==this.Wb)for(x=0;x<m;x++){var D=this.Jc[x];D>l&&(D=l),this.$h(this.Wb[x],t,0,i+=e,l,h,D,n,f,p,g),i+=h+v}switch(this.flip){case Wc:t.scale(-1,1),t.translate(-l,0);break;case $c:t.scale(1,-1),t.translate(0,-u);break;case Gd:t.scale(-1,-1),t.translate(-l,-u)}}},_.$h=function(t,e,n,i,l,u,h,f,p,g,m){var v=0;f?("left"===p?v=0:"right"===p?v=l-h:"center"===p&&(v=(l-h)/2),e.fillRect(n+v,i+.25*u,h,1)):("left"===p?v=0:"right"===p?v=l:"center"===p&&(v=l/2),l=null!==ip?ip(this,u):.75*u,e.fillText(t,n+v,i+l),0==(t=u/20|0)&&(t=1),"right"===p?v-=h:"center"===p&&(v-=h/2),g&&(p=null!==em?em(this,u):.8*u,e.beginPath(),e.lineWidth=t,e.moveTo(n+v,i+p),e.lineTo(n+v+h,i+p),e.stroke()),m&&(e.beginPath(),e.lineWidth=t,i=i+u-u/2.2|0,t%2!=0&&(i+=.5),e.moveTo(n+v,i),e.lineTo(n+v+h,i),e.stroke()))},_.El=function(t,e,n,i){this.zh=t;var u,l=this.re;if(null!==Hi&&e0!==l&&(e0=Hi.font=l),this.yb=this.Ae=0,this.qe=this.Wb=this.Jc=this.Te=null,isNaN(this.desiredSize.width)){if(0===(l=this.cc.replace(/\r\n/g,"\n").replace(/\r/g,"\n")).length)l=0;else if(this.isMultiline){for(var h=u=0,f=!1;!f;){var p=l.indexOf("\n",h);-1===p&&(p=l.length,f=!0),h=l.substr(h,p-h),this.formatting===rp&&(h=h.trim()),u=Math.max(u,tr(h)),h=p+1}l=u}else 0<=(u=l.indexOf("\n",0))&&(l=l.substr(0,u)),l=tr(l);l=Math.min(l,t/this.scale),l=Math.max(8,l)}else l=this.desiredSize.width;if(null!==this.panel&&(l=Math.min(l,this.panel.maxSize.width)),u=e1(this,l),f=u=isNaN(this.desiredSize.height)?Math.min(u,e/this.scale):this.desiredSize.height,0!==this.yb&&null!==this.Jc&&null!==this.Wb&&this.overflow===rm&&(e=this.re,e=this.overflow===rm?t1(e):0,p=this.spacingAbove+this.spacingBelow,p=Math.max(0,sf(this)+p),!((f=Math.min(this.maxLines-1,Math.max(Math.floor(f/p+.01)-1,0)))+1>=this.Wb.length))){for(p=this.Wb[f],e=Math.max(1,t-e);tr(p)>e&&1<p.length;)p=p.substr(0,p.length-1);e=tr(p+=sm),this.Wb[f]=p,this.Wb=this.Wb.slice(0,f+1),this.Jc[f]=e,this.Jc=this.Jc.slice(0,f+1),this.Ae=this.Wb.length,this.yb=Math.max(this.yb,e),this.dd=this.Ae,1===this.dd&&(this.qe=this.Wb[0])}(this.wrap===n1||isNaN(this.desiredSize.width))&&(l=isNaN(t)?this.yb:Math.min(t,this.yb),isNaN(this.desiredSize.width)&&(l=Math.max(8,l))),l=Math.max(n,l),u=Math.max(i,u),xl(this.bc,l,u),this.ve(0,0,l,u)},_.Vg=function(t,e,n,i){Lv(this,t,e,n,i)},Mt.Object.defineProperties(Wt.prototype,{font:{get:function(){return this.re},set:function(t){var e=this.re;e!==t&&(this.re=t,this.Te=null,this.w(),this.g("font",e,t))}},text:{get:function(){return this.cc},set:function(t){var e=this.cc;e!==(t=null!=t?t.toString():"")&&(this.cc=t,this.w(),this.g("text",e,t))}},textAlign:{get:function(){return null!==this.da?this.da.mr:"start"},set:function(t){var e=this.textAlign;e===t||"start"!==t&&"end"!==t&&"left"!==t&&"right"!==t&&"center"!==t||(An(this),this.da.mr=t,this.N(),this.g("textAlign",e,t))}},flip:{get:function(){return null!==this.da?this.da.Nf:Le},set:function(t){var e=this.flip;e!==t&&(An(this),this.da.Nf=t,this.N(),this.g("flip",e,t))}},verticalAlignment:{get:function(){return null!==this.da?this.da.xr:pg},set:function(t){var e=this.verticalAlignment;e.C(t)||(t=t.J(),An(this),this.da.xr=t,zd(this),this.g("verticalAlignment",e,t))}},naturalBounds:{get:function(){if(!this.bc.v()){var t=dt.alloc();np(this,this.cc,999999,t);var e=t.width;dt.free(t),t=e1(this,e);var n=this.desiredSize;isNaN(n.width)||(e=n.width),isNaN(n.height)||(t=n.height),xl(this.bc,e,t)}return this.bc}},isMultiline:{get:function(){return 0!=(2097152&this.o)},set:function(t){var e=0!=(2097152&this.o);e!==t&&(this.o^=2097152,this.w(),this.g("isMultiline",e,t))}},isUnderline:{get:function(){return 0!=(4194304&this.o)},set:function(t){var e=0!=(4194304&this.o);e!==t&&(this.o^=4194304,this.N(),this.g("isUnderline",e,t))}},isStrikethrough:{get:function(){return 0!=(8388608&this.o)},set:function(t){var e=0!=(8388608&this.o);e!==t&&(this.o^=8388608,this.N(),this.g("isStrikethrough",e,t))}},wrap:{get:function(){return null!==this.da?this.da.Ar:im},set:function(t){var e=this.wrap;e!==t&&(An(this),this.da.Ar=t,this.w(),this.g("wrap",e,t))}},overflow:{get:function(){return null!==this.da?this.da.yq:t0},set:function(t){var e=this.overflow;e!==t&&(An(this),this.da.yq=t,this.w(),this.g("overflow",e,t))}},stroke:{get:function(){return this.Nc},set:function(t){var e=this.Nc;e!==t&&(null!==t&&xu(t,"TextBlock.stroke"),t instanceof bt&&t.freeze(),this.Nc=t,this.N(),this.g("stroke",e,t))}},lineCount:{get:function(){return this.dd}},lineHeight:{get:function(){return sf(this)}},editable:{get:function(){return 0!=(1048576&this.o)},set:function(t){var e=0!=(1048576&this.o);e!==t&&(this.o^=1048576,this.g("editable",e,t))}},textEditor:{get:function(){return null!==this.da?this.da.pr:null},set:function(t){var e=this.textEditor;e!==t&&(An(this),this.da.pr=t,this.g("textEditor",e,t))}},errorFunction:{get:function(){return null!==this.da?this.da.zd:null},set:function(t){var e=this.errorFunction;e!==t&&(An(this),this.da.zd=t,this.g("errorFunction",e,t))}},interval:{get:function(){return null!==this.fa?this.fa.Ik:1},set:function(t){var e=this.interval;if(e!==(t=Math.round(t))&&0!==t&&isFinite(t)){null===this.fa&&(this.fa=new ko),this.fa.Ik=t,this.w();var n=this.panel;null!==n&&(n.graduatedIntervals=null),this.g("interval",e,t)}}},graduatedStart:{get:function(){return null!==this.fa?this.fa.u:0},set:function(t){var e=this.graduatedStart;e!==t&&(0>t?t=0:1<t&&(t=1),null===this.fa&&(this.fa=new ko),this.fa.u=t,this.w(),this.g("graduatedStart",e,t))}},graduatedEnd:{get:function(){return null!==this.fa?this.fa.j:1},set:function(t){var e=this.graduatedEnd;e!==t&&(0>t?t=0:1<t&&(t=1),null===this.fa&&(this.fa=new ko),this.fa.j=t,this.w(),this.g("graduatedEnd",e,t))}},graduatedFunction:{get:function(){return null!==this.fa?this.fa.F:null},set:function(t){var e=this.graduatedFunction;e!==t&&(null===this.fa&&(this.fa=new ko),this.fa.F=t,this.w(),this.g("graduatedFunction",e,t))}},graduatedSkip:{get:function(){return null!==this.fa?this.fa.m:null},set:function(t){var e=this.graduatedSkip;e!==t&&(null===this.fa&&(this.fa=new ko),this.fa.m=t,this.w(),this.g("graduatedSkip",e,t))}},textValidation:{get:function(){return null!==this.da?this.da.qj:null},set:function(t){var e=this.textValidation;e!==t&&(An(this),this.da.qj=t,this.g("textValidation",e,t))}},textEdited:{get:function(){return null!==this.da?this.da.nr:null},set:function(t){var e=this.textEdited;e!==t&&(An(this),this.da.nr=t,this.g("textEdited",e,t))}},spacingAbove:{get:function(){return null!==this.da?this.da.$q:0},set:function(t){var e=this.spacingAbove;e!==t&&(An(this),this.da.$q=t,this.w(),this.g("spacingAbove",e,t))}},spacingBelow:{get:function(){return null!==this.da?this.da.ar:0},set:function(t){var e=this.spacingBelow;e!==t&&(An(this),this.da.ar=t,this.w(),this.g("spacingBelow",e,t))}},formatting:{get:function(){return null!==this.da?this.da.Jp:rp},set:function(t){var e=this.formatting;e!==t&&(An(this),this.da.Jp=t,this.w(),this.g("formatting",e,t))}},maxLines:{get:function(){return null!==this.da?this.da.iq:1/0},set:function(t){var e=this.maxLines;e!==t&&(0>=(t=Math.floor(t))&&le(t,"> 0",Wt,"maxLines"),An(this),this.da.iq=t,this.w(),this.g("maxLines",e,t))}},metrics:{get:function(){return{arrSize:null!==this.Jc?this.Jc:[this.yb],arrText:null!==this.Wb?this.Wb:[this.qe],maxLineWidth:this.yb,fontHeight:this.Te}}},choices:{get:function(){return this.om},set:function(t){var e=this.om;e!==t&&(this.om=t,this.g("choices",e,t))}}});var Dh,ip=null,em=null,nm=new W(Wt,"None",0),n1=new W(Wt,"WrapFit",1),im=new W(Wt,"WrapDesiredSize",2),r1=new W(Wt,"WrapBreakAll",3),t0=new W(Wt,"OverflowClip",0),rm=new W(Wt,"OverflowEllipsis",1),rp=new W(Wt,"FormatTrim",0),o1=new W(Wt,"FormatNone",0),lf=/[ \u200b\u00ad]/,ol=new Vr,s1=0,om=new Vr,l1=0,sm="...",e0="",Hi=null,Ir=!1;function op(){this.ic=!1,this.zd=null,this.Nf=Le,this.Jp=rp,this.iq=1/0,this.yq=t0,this.ar=this.$q=0,this.mr="start",this.qj=this.pr=this.nr=null,this.xr=pg,this.Ar=im}function ko(){this.Ik=1,this.u=0,this.j=1,this.m=this.F=null}function Gi(t,e){ot.call(this),this.vg=null,this.Tn="",this.Ng=ax,this.Ck=Ve,this.Pg=this.zd=null,this.Bk=ut,this.Nf=Le,this.kl=null,this.Xm=!1,this.Mm=!0,this.Qk=!1,this.gl=null,"string"==typeof t?this.source=t:t&&Object.assign(this,t),e&&Object.assign(this,e)}function af(t){void 0===t&&(t=""),""!==t?Dh[t]&&(delete Dh[t],lm--):(Dh=new Vr,lm=0)}function uf(t,e){e.Wx||(e.fq=function(n){e.Up=!0,e.Sm=!1;var i=e.sg.copy();if(null!=i){for(i=i.iterator;i.next();){var l=i.value,u=e.getAttribute("src")||"",h=l.Fg.I(u);if(null!==h)for(var f=h.length,p=0;p<f;p++)l.Fn.add(u=h[p]),l.Mb(),e.Pm&&(void 0===e.Kt&&(e.Kt=n),null!==u.Pg&&u.Pg(u,n))}e.sg.clear()}t.desiredSize.v()||(Qi(t,!1),t.w())},e.Bp=function(n){e.Sm=n;var i=e.sg.copy();if(null!=i){for(i=i.iterator;i.next();){var l=i.value,u=e.getAttribute("src")||"",h=l.Fg.I(u);if(null!==h){l=h.length,u=oe();for(var f=0;f<l;f++)u.push(h[f]);if(e.Pm)for(f=0;f<l;f++)null!==(h=u[f]).zd&&h.zd(h,n);Nt(u)}}e.sg.clear()}},e.addEventListener("load",e.fq),e.addEventListener("error",e.Bp),e.Wx=!0)}Wt.className="TextBlock",op.prototype.copy=function(){var t=new op;return t.zd=this.zd,t.Nf=this.Nf,t.Jp=this.Jp,t.iq=this.iq,t.yq=this.yq,t.$q=this.$q,t.ar=this.ar,t.mr=this.mr,t.nr=this.nr,t.pr=this.pr,t.qj=this.qj,t.xr=this.xr,t.Ar=this.Ar,t},Wt.getEllipsis=function(){return sm},Wt.setEllipsis=function(t){sm=t,om=new Vr,l1=0},Wt.getBaseline=function(){return ip},Wt.setBaseline=function(t){ip=t},Wt.getUnderline=function(){return em},Wt.setUnderline=function(t){em=t},Wt.isValidFont=function(t){if(Ir||(Hi=$e?new Wr(null).context:null,Ir=!0),null===Hi)return!0;var e=Hi.font;if(t===e||"10px sans-serif"===t)return!0;Hi.font="10px sans-serif",Hi.font=t;var n=Hi.font;if("10px sans-serif"!==n)return Hi.font=e,!0;Hi.font="19px serif";var i=Hi.font;return Hi.font=t,n=Hi.font,Hi.font=e,n!==i},Wt.FormatNone=o1,Wt.FormatTrim=rp,Wt.None=nm,Wt.OverflowClip=t0,Wt.OverflowEllipsis=rm,Wt.WrapBreakAll=r1,Wt.WrapDesiredSize=im,Wt.WrapFit=n1,ko.prototype.copy=function(){var t=new ko;return t.Ik=this.Ik,t.u=this.u,t.j=this.j,t.F=this.F,t.m=this.m,t},ko.className="GradElementSettings",Ht(Gi,ot),Gi.prototype.cloneProtected=function(t){ot.prototype.cloneProtected.call(this,t),t.Tn=this.Tn,t.element=this.vg,t.Ng=this.Ng.J(),t.Ck=this.Ck,t.Nf=this.Nf,t.zd=this.zd,t.Pg=this.Pg,t.Bk=this.Bk.J(),t.Mm=this.Mm,t.gl=this.gl},Gi.prototype.ob=function(t){t===Le||t===Ps||t===zc?this.imageStretch=t:ot.prototype.ob.call(this,t)},Gi.prototype.toString=function(){return"Picture("+this.source+")#"+pn(this)},Gi.prototype.Oz=function(){if(""!==this.source){af(this.source);var t=this.source;this.source="",this.source=t}},Gi.prototype.redraw=function(){this.N()},Gi.prototype.ai=function(t,e){var n=this.vg;if(null!==n){var i=n.getAttribute("src");if(!(n instanceof HTMLImageElement&&(null===i||""===i)||n.Sm instanceof Event&&t instanceof Pn)){i=this.naturalBounds;var l=0,u=0,h=this.Xm,f=h?+n.width:n.naturalWidth;if(void 0===f&&n.videoWidth&&(f=n.videoWidth),void 0===(h=h?+n.height:n.naturalHeight)&&n.videoHeight&&(h=n.videoHeight),h=h||i.height,0!==(f=f||i.width)&&0!==h){var p=f,g=h;this.sourceRect.v()&&(l=this.Ng.x,u=this.Ng.y,f=this.Ng.width,h=this.Ng.height);var m=f,v=h,x=this.Ck,D=this.Bk;switch(x){case Le:if(this.sourceRect.v())break;m>=i.width&&(l=l+D.offsetX+(m*D.x-i.width*D.x)),v>=i.height&&(u=u+D.offsetY+(v*D.y-i.height*D.y)),f=Math.min(i.width,m),h=Math.min(i.height,v);break;case Ve:m=i.width,v=i.height;break;case Ps:case zc:x===Ps?(m*=x=Math.min(i.height/v,i.width/m),v*=x):x===zc&&((m*=x=Math.max(i.height/v,i.width/m))>=i.width&&(l=(l+D.offsetX+(m*D.x-i.width*D.x)/m)*f),(v*=x)>=i.height&&(u=(u+D.offsetY+(v*D.y-i.height*D.y)/v)*h),f*=1/(m/i.width),h*=1/(v/i.height),m=i.width,v=i.height)}var M=m*(x=this.uf()*e.scale)*v*x,T=f*h/M,N=n.__goCache;if(x=null,n.Up&&void 0!==N&&4<M&&T>QM*QM)for(null===N.Zh&&(um(N,4,p,g,n),um(N,16,p,g,n)),g=(p=N.Zh).length,M=0;M<g&&p[M].ratio*p[M].ratio<T;M++)x=p[M];if(!e.Fm){if(null===this.kl)if(null===this.vg)this.kl=!1;else{p=new Wr(null).context;try{p.drawImage(this.vg,0,0)}catch{this.Mm=!1}try{p.getImageData(0,0,1,1).data[3]&&(this.kl=!1),this.kl=!1}catch{this.kl=!0}}if(this.kl)return}switch(p=0,m<i.width&&(p=D.offsetX+(i.width*D.x-m*D.x)),g=0,v<i.height&&(g=D.offsetY+(i.height*D.y-v*D.y)),this.flip){case Wc:t.translate(Math.min(i.width,m),0),t.scale(-1,1);break;case $c:t.translate(0,Math.min(i.height,v)),t.scale(1,-1);break;case Gd:t.translate(Math.min(i.width,m),Math.min(i.height,v)),t.scale(-1,-1)}if(t.Pc(),e.Ge("pictureRatioOptimization")&&!e.Vi&&void 0!==N&&null!==x&&1!==x.ratio){t.save(),e=x.ratio;try{t.drawImage(x.source,l/e,u/e,Math.min(x.source.width,f/e),Math.min(x.source.height,h/e),p,g,Math.min(i.width,m),Math.min(i.height,v))}catch{this.Mm=!1}t.restore()}else try{t.drawImage(n,l,u,f,h,p,g,Math.min(i.width,m),Math.min(i.height,v))}catch{this.Mm=!1}switch(this.flip){case Wc:t.scale(-1,1),t.translate(-Math.min(i.width,m),0);break;case $c:t.scale(1,-1),t.translate(0,-Math.min(i.height,v));break;case Gd:t.scale(-1,-1),t.translate(-Math.min(i.width,m),-Math.min(i.height,v))}}}}},Gi.prototype.El=function(t,e,n,i){var l=this.desiredSize,u=os(this,!0),h=this.vg,f=this.Xm;(f||!this.Qk&&h&&h.complete)&&(this.Qk=!0),null===h&&(isFinite(l.width)||(t=0),isFinite(l.height)||(e=0)),isFinite(l.width)||u===Ve||u===Mn?(isFinite(t)||(this.sourceRect.v()?t=this.sourceRect.width:null!==h&&(t=f?+h.width:h.naturalWidth)),n=0):null!==h&&!1!==this.Qk&&(t=this.sourceRect.v()?this.sourceRect.width:f?+h.width:h.naturalWidth),isFinite(l.height)||u===Ve||u===Vn?(isFinite(e)||(this.sourceRect.v()?e=this.sourceRect.height:null!==h&&(e=f?+h.height:h.naturalHeight)),i=0):null!==h&&!1!==this.Qk&&(e=this.sourceRect.v()?this.sourceRect.height:f?+h.height:h.naturalHeight),isFinite(l.width)&&(t=l.width),isFinite(l.height)&&(e=l.height),l=this.maxSize,u=this.minSize,n=Math.max(n||0,u.width),i=Math.max(i||0,u.height),t=Math.min(l.width,t),e=Math.min(l.height,e),t=Math.max(n,t),e=Math.max(i,e),null===h||h.complete||(isFinite(t)||(t=0),isFinite(e)||(e=0)),xl(this.bc,t,e),this.ve(0,0,t,e)},Gi.prototype.Vg=function(t,e,n,i){Lv(this,t,e,n,i)},Mt.Object.defineProperties(Gi.prototype,{element:{get:function(){return this.vg},set:function(t){var e=this.vg;if(e!==t){this.Xm=t instanceof HTMLCanvasElement;var n=t instanceof HTMLImageElement;null===t||n||t instanceof HTMLVideoElement||this.Xm||Y("Picture.element must be an instance of Image, Canvas, or Video, not: "+t);var i=this.diagram;null!==i&&Mv(i,this),this.vg=t,null!==t&&n&&void 0===t.sg&&(t.sg=new Z),null!==i&&n&&Cv(i,this),null!==t&&(this.Xm||!0===t.complete?(t.Pm&&(t.Sm instanceof Event&&null!==this.zd?this.zd(this,t.Sm):!0===t.Up&&!t.Sm&&null!==this.Pg&&t.Kt&&this.Pg(this,t.Kt)),t.Up=!0,this.desiredSize.v()||(Qi(this,!1),this.w())):n&&uf(this,t)),this.g("element",e,t),this.N()}}},source:{get:function(){return this.Tn},set:function(t){var e=this.Tn;if(e!==t){this.Tn=t;var n=Dh;if($e){if(void 0!==n[t])var i=n[t];else if(""!==t){30<lm&&(af(),n=Dh),(i=Zo("img")).Pm=!0,uf(this,i);var l=this.gl;null!==l&&(i.crossOrigin=l(this)),i.src=t,n[t]=i,lm++}this.element=i,null!==i&&void 0===i.__goCache&&(i.__goCache=new am),this.w(),this.N()}this.g("source",e,t)}}},sourceCrossOrigin:{get:function(){return this.gl},set:function(t){if(this.gl!==t&&(this.gl=t,null!==this.element)){var e=this.element.getAttribute("src");null===t&&"string"==typeof e?this.element.crossOrigin=null:null!==t&&(this.element.crossOrigin=t(this)),this.element.src=e}}},sourceRect:{get:function(){return this.Ng},set:function(t){var e=this.Ng;e.C(t)||(this.Ng=t=t.J(),this.N(),this.g("sourceRect",e,t))}},imageStretch:{get:function(){return this.Ck},set:function(t){var e=this.Ck;e!==t&&(this.Ck=t,this.N(),this.g("imageStretch",e,t))}},flip:{get:function(){return this.Nf},set:function(t){var e=this.Nf;e!==t&&(this.Nf=t,this.N(),this.g("flip",e,t))}},imageAlignment:{get:function(){return this.Bk},set:function(t){var e=this.Bk;e.C(t)||(this.Bk=t=t.J(),this.N(),this.g("imageAlignment",e,t))}},errorFunction:{get:function(){return this.zd},set:function(t){var e=this.zd;e!==t&&(this.zd=t,this.g("errorFunction",e,t))}},successFunction:{get:function(){return this.Pg},set:function(t){var e=this.Pg;e!==t&&(this.Pg=t,this.g("successFunction",e,t))}},naturalBounds:{get:function(){return this.bc}}}),Gi.prototype.redraw=Gi.prototype.redraw,Gi.prototype.reloadSource=Gi.prototype.Oz;var lm=0,QM=4;function am(){this.Zh=null}function um(t,e,n,i,l){null===t.Zh&&(t.Zh=[]);var u=new Wr(null),h=u.context,f=1/e;u.width=n/e,u.height=i/e,0!==u.width&&0!==u.height&&(e=new n0(u.Sa,e),n=1,0<t.Zh.length&&(l=(n=t.Zh[t.Zh.length-1]).source,n=n.ratio),h.setTransform(f*n,0,0,f*n,0,0),h.Pc(),h.drawImage(l,0,0),t.Zh.push(e))}function n0(t,e){this.source=t,this.ratio=e}function hf(){this.Lr=new K,this.pc=null}function sl(t,e,n,i,l){t.pc=new Nn,t.pc.startX=e,t.pc.startY=n,t.pc.isFilled=i,t.Lr.figures.add(t.pc),void 0!==l&&(t.pc.isShadowed=l)}function r0(t){var e=t.pc.segments.length;0<e&&t.pc.segments.K(e-1).close()}function ll(t,e,n,i,l,u,h){var f;void 0===f&&(f=!1);var p=new Lt(Hr);p.point1X=e,p.point1Y=n,p.point2X=i,p.point2Y=l,p.endX=u,p.endY=h,f&&p.close(),t.pc.segments.add(p)}function hm(t,e,n,i,l){var u;void 0===u&&(u=!1);var h=new Lt(Ss);h.point1X=e,h.point1Y=n,h.endX=i,h.endY=l,u&&h.close(),t.pc.segments.add(h)}function o0(t,e,n,i,l,u,h,f){var p;void 0===p&&(p=!1),e=new Lt(so,h,f,e,n,i,l,u),p&&e.close(),t.pc.segments.add(e)}function a1(t){var e=cm;return null!==e?(cm=null,e.reset(t),e):((e=new hf).reset(t),e)}Gi.className="Picture",Dh=new Vr,Gi.clearCache=af,am.className="PictureCacheArray",n0.className="PictureCacheInstance",hf.prototype.reset=function(t){null!==t?(t.ja(),this.Lr=t,t.figures.clear()):this.Lr=new K,this.pc=null},hf.prototype.Xl=function(t){this.pc.isShadowed=t},hf.prototype.moveTo=function(t,e,n){void 0===n&&(n=!1);var i=new Lt(To);i.endX=t,i.endY=e,n&&i.close(),this.pc.segments.add(i)},hf.prototype.lineTo=function(t,e,n){void 0===n&&(n=!1);var i=new Lt(we);i.endX=t,i.endY=e,n&&i.close(),this.pc.segments.add(i)},hf.prototype.arcTo=function(t,e,n,i,l,u,h){void 0===u&&(u=0),void 0===h&&(h=!1);var f=new Lt(en);f.startAngle=t,f.sweepAngle=e,f.centerX=n,f.centerY=i,f.radiusX=l,f.radiusY=0!==u?u:l,h&&f.close(),this.pc.segments.add(f)};var cm=null;function Qn(t,e){var n=t.toLowerCase(),i=F.Oe;i[t]=e,i[n]=t}function s0(){this.ic=!1,this.Qq=this.np=this.Zp=null,this.Sq="",this.Eq=this.Qp=this.Rq=null,this.Gq="",this.Fq=Ky,this.Hq=null,this.Iq="",this.Kq=Hn,this.gq="",this.hq=Oe,this.oq=fi,this.jq=yc,this.yp=null,this.bq=127,this.Wq=$y,this.Vq="gray",this.Lg=4}function lt(t,e){void 0===t||t instanceof Be||"string"==typeof t?$.call(this,t):($.call(this),t&&(e=t)),this.G=2408959,this.Jf="",this.O=null,this.zg="",this.Hf=this.Kg=null,this.cc="",this.ph=this.Ah=null,this.de=new P(NaN,NaN).freeze(),this.af=null,this.eo=NaN,this.aw=-1,this.Vx=new B,this.Kh=null,this.Sf=NaN,e&&Object.assign(this,e)}function Ii(t){null===t.O?t.O=new s0:t.O.ic&&(t.O=t.O.copy())}function fm(t){0!=(16384&t.G)&&(t.updateAdornments(),t.G&=-16385)}function sp(t){if(!1===Da(t)){cf(t,!0),t.Jk();var e=t.diagram;null!==e&&(e.te.add(t),e.Mb())}}function dm(t){if(t.G|=2097152,!1!==Da(t)){var e=t.position,n=t.location;n.v()&&e.v()||u0(t,e,n),n=t.Eb;var i=B.alloc().assign(n);n.ja(),n.x=e.x,n.y=e.y,n.freeze(),t.Fl(i,n),B.free(i),cf(t,!1)}}function kl(t,e,n,i){void 0===i&&(i=new P),n=n.Fc()?ut:n;var l=e.naturalBounds;if(i.h(l.width*n.x+n.offsetX,l.height*n.y+n.offsetY),null===e||e===t)return i;for(e.transform.Fa(i),e=e.panel;null!==e&&e!==t;)e.transform.Fa(i),e=e.panel;return null!==t.Ib&&t.Ib.Fa(i),i.offset(-t.qc.x,-t.qc.y),i}function Sh(t,e){var n=t.Vx;isNaN(t.Sf)&&(t.Sf=Wx(t));var i=t.Sf,l=2*i;if(!t.isShadowed)return n.h(e.x-1-i,e.y-1-i,e.width+2+l,e.height+2+l),n;i=e.x,l=e.y;var u=e.width;e=e.height;var h=t.shadowBlur;return u+=h,e+=h,i-=h/2,l-=h/2,0<(t=t.shadowOffset).x?u+=t.x:(i+=t.x,u-=t.x),0<t.y?e+=t.y:(l+=t.y,e-=t.y),n.h(i-1,l-1,u+2,e+2),n}function a0(t,e,n,i,l){null===e||t instanceof Pt||(e=e.animationManager).zb&&Ix(e,t,new P(i,l),n)}function u0(t,e,n){var i=P.alloc(),l=t.locationObject,u=l.naturalBounds,h=l instanceof wt?l.strokeWidth:0;if(i.pi(0,0,u.width+h,u.height+h,t.locationSpot),l!==t)for(i.offset(-h/2,-h/2),l.transform.Fa(i),l=l.panel;null!==l&&l!==t;)l.transform.Fa(i),l=l.panel;null!==t.Ib&&t.Ib.Fa(i),i.offset(-t.qc.x,-t.qc.y),l=t.diagram,u=n.v(),h=e.v(),u&&h?0!=(2097152&t.G)?Mu(t,e,n,l,i):h0(t,e,n,l,i):u?Mu(t,e,n,l,i):h&&h0(t,e,n,l,i),t.G|=2097152,P.free(i),t.Jk()}function Mu(t,e,n,i,l){var u=e.x,h=e.y;e.h(n.x-l.x,n.y-l.y),null!==i&&((i=(n=i.animationManager).defaultAnimation.isAnimating)||!n.zb||t instanceof Pt||Ix(n,t,new P(u,h),e),i||e.x===u&&e.y===h||t.g("position",new P(u,h),e.copy()))}function h0(t,e,n,i,l){var u=n.copy();n.h(e.x+l.x,e.y+l.y),n.C(u)||null===i||t.g("location",u,n.copy())}function c0(t,e,n){d0(t,!1),t instanceof J&&Lg(n,t),t.layer.isTemporary||e||n.Va(),e=t.Eb;var i=n.viewportBounds;i.v()?Ol(t)?(Xy(e,i)||t.Pd(!1),t.updateAdornments()):e.Sc(i)?(t.Pd(!0),t.updateAdornments()):t.Rb():n.Ui=!0}function f0(t,e,n,i){e.constructor===t.constructor||p0||(p0=!0,hi('Should not change the class of the Part when changing category from "'+n+'" to "'+i+'"'),hi("  Old class: "+Ys(t.constructor)+", new class: "+Ys(e.constructor)+", part: "+t.toString())),t.zj();var l=t.data;n=t.layerName;var u=t.isSelected,h=t.isHighlighted,f=!0,p=!0,g=!1;t instanceof J&&(f=t.isTreeLeaf,p=t.isTreeExpanded,g=t.wasTreeExpanded),e.qf(t),e.cloneProtected(t),t.Jf=i,t.w(),t.N(),i=!0,null!==(e=t.diagram)&&(i=e.skipsUndoManager,e.skipsUndoManager=!0),t.qb=l,t.G=u?4096|t.G:-4097&t.G,t.G=h?524288|t.G:-524289&t.G,t instanceof J&&(t.U=f?4|t.U:-5&t.U,t.U=p?1|t.U:-2&t.U,t.U=g?2|t.U:-3&t.U),null!==l&&t.Ka(),(l=t.layerName)!==n&&(t.zg=n,t.layerName=l),null!==e&&(e.skipsUndoManager=i),t.Tc()&&t.D(64)}function Da(t){return 0!=(32768&t.G)}function cf(t,e){t.G=e?32768|t.G:-32769&t.G}function d0(t,e){t.G=e?65536|t.G:-65537&t.G}function Ol(t){return 0!=(131072&t.G)}function lp(t,e){t.G=e?1048576|t.G:-1048577&t.G}function pm(t,e){var n=e.containingGroup;return null!==n?1+pm(t,n):e instanceof J&&null!==(e=e.labeledLink)?pm(t,e):0}function gm(t,e){var n=e.containingGroup;return null!==n||e instanceof J&&null!==(n=e.labeledLink)?gm(t,n):e}function mm(t,e,n){if(e===n||null===n)return!1;var i=e.containingGroup;return!(null===i||i!==n&&!mm(t,i,n))||e instanceof J&&null!==(e=e.labeledLink)&&mm(t,e,n)}function ap(t){return!(!t.isVisible()||null!==(t=t.layer)&&t.isTemporary)}function bs(t,e,n,i,l,u){if(void 0===u&&(u=null),!(t.contains(e)||null!==u&&!u(e)||e instanceof Pt))if(t.add(e),e instanceof J){if(n&&e instanceof yt)for(var h=e.memberParts;h.next();)bs(t,h.value,n,i,l,u);if(!1!==l)for(h=e.linksConnected;h.next();){var f=h.value;if(!t.contains(f)){var p=f.fromNode,g=f.toNode;p=null===p||t.contains(p),g=null===g||t.contains(g),(l?p&&g:p||g)&&bs(t,f,n,i,l,u)}}if(1<i)for(e=e.Au();e.next();)bs(t,e.value,n,i-1,l,u)}else if(e instanceof H)for(e=e.labelNodes;e.next();)bs(t,e.value,n,i,l,u)}hf.className="StreamGeometryContext",Qn("Rectangle",function(t,e,n){var i=F.Df[t="r"+e+","+n];return void 0!==i||((i=new K(K.u)).endX=e,i.endY=n,F.Ef<F.em&&(F.Df[t]=i,F.Ef++)),i}),Qn("Square",function(t,e,n){var i=F.Df[t="s"+e+","+n];return void 0!==i||((i=new K(K.u)).endX=e,i.endY=n,i.defaultStretch=Ps,F.Ef<F.em&&(F.Df[t]=i,F.Ef++)),i}),Qn("RoundedRectangle",function(t,e,n){t=t?t.parameter1:NaN,(isNaN(t)||0>t)&&(t=5),t=Math.min(t,e/3);var i="rr"+e+","+n+","+(t=Math.min(t,n/3)),l=F.Df[i];if(void 0!==l)return l;var u=t*F.ng;return l=(new K).add(new Nn(t,0,!0).add(new Lt(we,e-t,0)).add(new Lt(Hr,e,t,e-u,0,e,u)).add(new Lt(we,e,n-t)).add(new Lt(Hr,e-t,n,e,n-u,e-u,n)).add(new Lt(we,t,n)).add(new Lt(Hr,0,n-t,u,n,0,n-u)).add(new Lt(we,0,t)).add(new Lt(Hr,t,0,0,u,u,0).close())),1<u&&(l.spot1=new it(0,0,u,u),l.spot2=new it(1,1,-u,-u)),F.Ef<F.em&&(F.Df[i]=l,F.Ef++),l}),Qn("Border","RoundedRectangle"),Qn("Ellipse",function(t,e,n){var i=F.Df[t="e"+e+","+n];return void 0!==i||((i=new K(K.F)).endX=e,i.endY=n,i.spot1=pr,i.spot2=Jy,F.Ef<F.em&&(F.Df[t]=i,F.Ef++)),i}),Qn("Circle",function(t,e,n){var i=F.Df[t="c"+e+","+n];return void 0!==i||((i=new K(K.F)).endX=e,i.endY=n,i.spot1=pr,i.spot2=Jy,i.defaultStretch=Ps,F.Ef<F.em&&(F.Df[t]=i,F.Ef++)),i}),Qn("TriangleRight",function(t,e,n){return(new K).add(new Nn(0,0).add(new Lt(we,e,.5*n)).add(new Lt(we,0,n).close())).Yl(0,.25,.5,.75)}),Qn("TriangleDown",function(t,e,n){return(new K).add(new Nn(0,0).add(new Lt(we,e,0)).add(new Lt(we,.5*e,n).close())).Yl(.25,0,.75,.5)}),Qn("TriangleLeft",function(t,e,n){return(new K).add(new Nn(e,n).add(new Lt(we,0,.5*n)).add(new Lt(we,e,0).close())).Yl(.5,.25,1,.75)}),Qn("TriangleUp",function(t,e,n){return(new K).add(new Nn(e,n).add(new Lt(we,0,n)).add(new Lt(we,.5*e,0).close())).Yl(.25,.5,.75,1)}),Qn("Triangle","TriangleUp"),Qn("Diamond",function(t,e,n){return(new K).add(new Nn(.5*e,0).add(new Lt(we,0,.5*n)).add(new Lt(we,.5*e,n)).add(new Lt(we,e,.5*n).close())).Yl(.25,.25,.75,.75)}),Qn("LineH",function(t,e,n){return(t=new K(K.j)).startX=0,t.startY=n/2,t.endX=e,t.endY=n/2,t}),Qn("LineV",function(t,e,n){return(t=new K(K.j)).startX=e/2,t.startY=0,t.endX=e/2,t.endY=n,t}),Qn("None","Rectangle"),Qn("BarH","Rectangle"),Qn("BarV","Rectangle"),Qn("MinusLine","LineH"),Qn("PlusLine",function(t,e,n){return(new K).add(new Nn(0,n/2,!1).add(new Lt(we,e,n/2)).add(new Lt(To,e/2,0)).add(new Lt(we,e/2,n)))}),Qn("XLine",function(t,e,n){return(new K).add(new Nn(0,n,!1).add(new Lt(we,e,0)).add(new Lt(To,0,0)).add(new Lt(we,e,n)))}),Qn("LineRight",function(t,e,n){return(new K).add(new Nn(.25*e,0,!1).add(new Lt(we,.75*e,.5*n)).add(new Lt(we,.25*e,n)))}),Qn("LineDown",function(t,e,n){return(new K).add(new Nn(0,.25*n,!1).add(new Lt(we,.5*e,.75*n)).add(new Lt(we,e,.25*n)))}),Qn("LineLeft",function(t,e,n){return(new K).add(new Nn(.75*e,0,!1).add(new Lt(we,.25*e,.5*n)).add(new Lt(we,.75*e,n)))}),Qn("LineUp",function(t,e,n){return(new K).add(new Nn(0,.75*n,!1).add(new Lt(we,.5*e,.25*n)).add(new Lt(we,e,.75*n)))}),F.dm={"":"",Standard:"F1 m 0,0 l 8,4 -8,4 2,-4 z",Backward:"F1 m 8,0 l -2,4 2,4 -8,-4 z",Triangle:"F1 m 0,0 l 8,4.62 -8,4.62 z",BackwardTriangle:"F1 m 8,4 l 0,4 -8,-4 8,-4 0,4 z",Boomerang:"F1 m 0,0 l 8,4 -8,4 4,-4 -4,-4 z",BackwardBoomerang:"F1 m 8,0 l -8,4 8,4 -4,-4 4,-4 z",SidewaysV:"m 0,0 l 8,4 -8,4 0,-1 6,-3 -6,-3 0,-1 z",BackwardV:"m 8,0 l -8,4 8,4 0,-1 -6,-3 6,-3 0,-1 z",OpenTriangle:"m 0,0 l 8,4 -8,4",BackwardOpenTriangle:"m 8,0 l -8,4 8,4",OpenTriangleLine:"m 0,0 l 8,4 -8,4 m 8.5,0 l 0,-8",BackwardOpenTriangleLine:"m 8,0 l  -8,4 8,4 m -8.5,0 l 0,-8",OpenTriangleTop:"m 0,0 l 8,4 m 0,4",BackwardOpenTriangleTop:"m 8,0 l -8,4 m 0,4",OpenTriangleBottom:"m 0,8 l 8,-4",BackwardOpenTriangleBottom:"m 0,4 l 8,4",HalfTriangleTop:"F1 m 0,0 l 0,4 8,0 z m 0,8",BackwardHalfTriangleTop:"F1 m 8,0 l 0,4 -8,0 z m 0,8",HalfTriangleBottom:"F1 m 0,4 l 0,4 8,-4 z",BackwardHalfTriangleBottom:"F1 m 8,4 l 0,4 -8,-4 z",ForwardSemiCircle:"m 4,0 b 270 180 0 4 4",BackwardSemiCircle:"m 4,8 b 90 180 0 -4 4",Feather:"m 0,0 l 3,4 -3,4",BackwardFeather:"m 3,0 l -3,4 3,4",DoubleFeathers:"m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4",BackwardDoubleFeathers:"m 3,0 l -3,4 3,4 m 3,-8 l -3,4 3,4",TripleFeathers:"m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4 m 3,-8 l 3,4 -3,4",BackwardTripleFeathers:"m 3,0 l -3,4 3,4 m 3,-8 l -3,4 3,4 m 3,-8 l -3,4 3,4",ForwardSlash:"m 0,8 l 5,-8",BackSlash:"m 0,0 l 5,8",DoubleForwardSlash:"m 0,8 l 4,-8 m -2,8 l 4,-8",DoubleBackSlash:"m 0,0 l 4,8 m -2,-8 l 4,8",TripleForwardSlash:"m 0,8 l 4,-8 m -2,8 l 4,-8 m -2,8 l 4,-8",TripleBackSlash:"m 0,0 l 4,8 m -2,-8 l 4,8 m -2,-8 l 4,8",Fork:"m 0,4 l 8,0 m -8,0 l 8,-4 m -8,4 l 8,4",BackwardFork:"m 8,4 l -8,0 m 8,0 l -8,-4 m 8,4 l -8,4",LineFork:"m 0,0 l 0,8 m 0,-4 l 8,0 m -8,0 l 8,-4 m -8,4 l 8,4",BackwardLineFork:"m 8,4 l -8,0 m 8,0 l -8,-4 m 8,4 l -8,4 m 8,-8 l 0,8",CircleFork:"F1 m 6,4 b 0 360 -3 0 3 z m 0,0 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",BackwardCircleFork:"F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 6,0 b 0 360 -3 0 3",CircleLineFork:"F1 m 6,4 b 0 360 -3 0 3 z m 1,-4 l 0,8 m 0,-4 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",BackwardCircleLineFork:"F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 0,-4 l 0,8 m 7,-4 b 0 360 -3 0 3",Circle:"F1 m 8,4 b 0 360 -4 0 4 z",Block:"F1 m 0,0 l 0,8 8,0 0,-8 z",StretchedDiamond:"F1 m 0,3 l 5,-3 5,3 -5,3 -5,-3 z",Diamond:"F1 m 0,4 l 4,-4 4,4 -4,4 -4,-4 z",Chevron:"F1 m 0,0 l 5,0 3,4 -3,4 -5,0 3,-4 -3,-4 z",StretchedChevron:"F1 m 0,0 l 8,0 3,4 -3,4 -8,0 3,-4 -3,-4 z",NormalArrow:"F1 m 0,2 l 4,0 0,-2 4,4 -4,4 0,-2 -4,0 z",X:"m 0,0 l 8,8 m 0,-8 l -8,8",TailedNormalArrow:"F1 m 0,0 l 2,0 1,2 3,0 0,-2 2,4 -2,4 0,-2 -3,0 -1,2 -2,0 1,-4 -1,-4 z",DoubleTriangle:"F1 m 0,0 l 4,4 -4,4 0,-8 z  m 4,0 l 4,4 -4,4 0,-8 z",BigEndArrow:"F1 m 0,0 l 5,2 0,-2 3,4 -3,4 0,-2 -5,2 0,-8 z",ConcaveTailArrow:"F1 m 0,2 h 4 v -2 l 4,4 -4,4 v -2 h -4 l 2,-2 -2,-2 z",RoundedTriangle:"F1 m 0,1 a 1,1 0 0 1 1,-1 l 7,3 a 0.5,1 0 0 1 0,2 l -7,3 a 1,1 0 0 1 -1,-1 l 0,-6 z",SimpleArrow:"F1 m 1,2 l -1,-2 2,0 1,2 -1,2 -2,0 1,-2 5,0 0,-2 2,2 -2,2 0,-2 z",AccelerationArrow:"F1 m 0,0 l 0,8 0.2,0 0,-8 -0.2,0 z m 2,0 l 0,8 1,0 0,-8 -1,0 z m 3,0 l 2,0 2,4 -2,4 -2,0 0,-8 z",BoxArrow:"F1 m 0,0 l 4,0 0,2 2,0 0,-2 2,4 -2,4 0,-2 -2,0 0,2 -4,0 0,-8 z",TriangleLine:"F1 m 8,4 l -8,-4 0,8 8,-4 z m 0.5,4 l 0,-8",CircleEndedArrow:"F1 m 10,4 l -2,-3 0,2 -2,0 0,2 2,0 0,2 2,-3 z m -4,0 b 0 360 -3 0 3 z",DynamicWidthArrow:"F1 m 0,3 l 2,0 2,-1 2,-2 2,4 -2,4 -2,-2 -2,-1 -2,0 0,-2 z",EquilibriumArrow:"m 0,3 l 8,0 -3,-3 m 3,5 l -8,0 3,3",FastForward:"F1 m 0,0 l 3.5,4 0,-4 3.5,4 0,-4 1,0 0,8 -1,0 0,-4 -3.5,4 0,-4 -3.5,4 0,-8 z",Kite:"F1 m 0,4 l 2,-4 6,4 -6,4 -2,-4 z",HalfArrowTop:"F1 m 0,0 l 4,4 4,0 -8,-4 z m 0,8",HalfArrowBottom:"F1 m 0,8 l 4,-4 4,0 -8,4 z",OpposingDirectionDoubleArrow:"F1 m 0,4 l 2,-4 0,2 4,0 0,-2 2,4 -2,4 0,-2 -4,0 0,2 -2,-4 z",PartialDoubleTriangle:"F1 m 0,0 4,3 0,-3 4,4 -4,4 0,-3 -4,3 0,-8 z",LineCircle:"F1 m 0,0 l 0,8 m 7 -4 b 0 360 -3 0 3 z",DoubleLineCircle:"F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z",TripleLineCircle:"F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z",CircleLine:"F1 m 6 4 b 0 360 -3 0 3 z m 1,-4 l 0,8",DiamondCircle:"F1 m 8,4 l -4,4 -4,-4 4,-4 4,4 m 8,0 b 0 360 -4 0 4 z",PlusCircle:"F1 m 8,4 b 0 360 -4 0 4 l -8 0 z m -4 -4 l 0 8",OpenRightTriangleTop:"m 8,0 l 0,4 -8,0 m 0,4",OpenRightTriangleBottom:"m 8,8 l 0,-4 -8,0",Line:"m 0,0 l 0,8",DoubleLine:"m 0,0 l 0,8 m 2,0 l 0,-8",TripleLine:"m 0,0 l 0,8 m 2,0 l 0,-8 m 2,0 l 0,8",PentagonArrow:"F1 m 8,4 l -4,-4 -4,0 0,8 4,0 4,-4 z"},s0.prototype.copy=function(){var t=new s0;return t.Zp=this.Zp,t.np=this.np,t.Qq=this.Qq,t.Sq=this.Sq,t.Rq=this.Rq,t.Qp=this.Qp,t.Eq=this.Eq,t.Gq=this.Gq,t.Fq=this.Fq.J(),t.Hq=this.Hq,t.Iq=this.Iq,t.Kq=this.Kq.J(),t.gq=this.gq,t.hq=this.hq.J(),t.oq=this.oq.J(),t.jq=this.jq.J(),t.yp=this.yp,t.bq=this.bq,t.Wq=this.Wq.J(),t.Vq=this.Vq,t.Lg=this.Lg,t},Ht(lt,$),lt.prototype.cloneProtected=function(t){$.prototype.cloneProtected.call(this,t),t.G=-4097&this.G|49152,t.Jf=this.Jf,null!==this.O&&(t.O=this.O.ic?this.O:this.O.copy()),t.zg=this.zg,t.Hf=null,t.cc=this.cc,t.de.assign(this.de),t.eo=this.eo},(_=lt.prototype).qf=function(t){$.prototype.qf.call(this,t),t.dh(),t.Kg=null,t.af=null,t.Kh=null},_.toString=function(){var t=Ys(this.constructor)+"#"+pn(this);return null!==this.data&&(t+="("+io(this.data)+")"),t},_.ih=function(){$.prototype.ih.call(this),null!==this.O&&(this.O.ic=!0)},_.$j=function(t,e,n,i,l,u,h){var f=this.diagram;null!==f&&(t===nn&&"elements"===e?l instanceof $?Zn(l,function(p){A0(f.partManager,p),xv(f,p)}):Cv(f,l):t===xe&&"elements"===e&&(l instanceof $?Zn(l,function(p){Cf(f.partManager,p,f)}):Mv(f,l)),f.bb(t,e,n,i,l,u,h))},_.Ka=function(t){if($.prototype.Ka.call(this,t),null!==this.data){for(var e=this.R.s,n=e.length,i=0;i<n;i++){var l=e[i];l instanceof $&&Zn(l,function(u){null!==u.data&&u.Ka()})}for(e=this.adornments;e.next();)e.value.Ka(t)}},lt.prototype.updateRelationshipsFromData=function(){var t;null!==this.data&&(null===(t=this.diagram)||void 0===t||t.partManager.updateRelationshipsFromData(this))},lt.prototype.Hj=function(t){var e=this.Hf;return null===e?null:e.I(t)},lt.prototype.Tg=function(t,e){if(null!==e){var n=null,i=this.Hf;if(null!==i&&(n=i.I(t)),n!==e){if(null!==n){var l=n.diagram;null!==l&&l.remove(n)}null===i&&(this.Hf=i=new vt),e.Jf!==t&&(e.category=t),i.add(t,e),null!==(t=this.diagram)&&(t.add(e),null!==(t=e.adornedObject)&&null!==(t=t.Yg())&&(e.data=t.data))}}},lt.prototype.Af=function(t){var e=this.Hf;if(null!==e){var n=e.I(t);if(null!==n){var i=n.diagram;null!==i&&i.remove(n)}e.remove(t),0===e.count&&(this.Hf=null)}},lt.prototype.zj=function(){var t=this.Hf;if(null!==t){var e=oe();for(t=t.iterator;t.next();)e.push(t.key);t=e.length;for(var n=0;n<t;n++)this.Af(e[n]);Nt(e)}},lt.prototype.updateAdornments=function(){var t=this.diagram;if(null!==t){for(var e=this.adornments;e.next();){var n=e.value;n.w(),n.placeholder&&n.placeholder.w()}t:{if(this.isSelected&&this.selectionAdorned&&null!==(e=this.selectionObject)&&this.actualBounds.v()&&this.isVisible()&&e.zf()&&e.actualBounds.v()){if(null===(n=this.Hj("Selection"))){if(null===(n=this.selectionAdornmentTemplate)&&(n=this.eh()?t.linkSelectionAdornmentTemplate:this instanceof yt?t.groupSelectionAdornmentTemplate:t.nodeSelectionAdornmentTemplate),!(n instanceof Pt))break t;uo(n),null!==(n=n.copy())&&(this.eh()&&this.selectionObject===this.path&&(n.type=$.Link),n.adornedObject=e)}if(null!==n){n.type===$.Link&&n.w(),this.Tg("Selection",n);break t}}this.Af("Selection")}for(function l0(t,e){e.toolManager.mouseDownTools.each(function(n){n.isEnabled&&n.updateAdornments(t)}),e.toolManager.updateAdornments(t)}(this,t),e=this.adornments;e.next();)e.value.Ka()}},lt.prototype.Rb=function(){var t=this.diagram;null!==t&&(ch(t),0==(16384&this.G)&&(this.G|=16384,t.Mb()))},lt.prototype.ve=function(t,e,n,i){var l=this.qc;l.h(t,e,n,i),null===this.Ib&&(this.Ib=new Dt);var u=this.Ib;u.reset(),this.Qn(u,t,e,n,i),this.Ib=u,u.Ur()||u.So(l)},lt.prototype.Qn=function(t,e,n,i,l){if(1!==this.xa&&t.scale(this.xa),0!==this.Gb){var u=ut;this.locationSpot.pb()&&(u=this.locationSpot);var h=P.alloc();if(this.locationObject!==this)for(h.pi((n=(e=this.locationObject).naturalBounds).x,n.y,n.width,n.height,u),null!==e.Ib&&e.Ib.Fa(h),h.offset(-e.measuredBounds.x,-e.measuredBounds.y),u=e.panel;null!==u&&u!==this;)null!==u.Ib&&u.Ib.Fa(h),h.offset(-u.measuredBounds.x,-u.measuredBounds.y),u=u.panel;else h.pi(e,n,i,l,u);t.rotate(this.Gb,h.x,h.y),P.free(h)}},lt.prototype.move=function(t,e){!0===e?this.location=t:this.position=t},lt.prototype.moveTo=function(t,e,n){t=P.allocAt(t,e),this.move(t,n),P.free(t)},lt.prototype.isVisible=function(){if(!this.visible)return!1;var t=this.layer;if(null!==t){if(!t.visible)return!1;if(null!==(t=t.diagram)&&t.animationManager.es(this))return!0}return!!(null===(t=this.containingGroup)||t.isSubGraphExpanded&&t.isVisible())},lt.prototype.Ub=function(t){var e=this.diagram;t?(this.D(4),this.Rb(),null!==e&&e.te.add(this)):(this.D(8),this.zj()),this.dh(),null!==e&&(e.Va(),e.N())},lt.prototype.fb=function(t){if(this.name===t)return this;var e=this.Kh;if(null===e&&(this.Kh=e=new vt),null!==e.I(t))return e.I(t);var n=$.prototype.fb.call(this,t);return null!==n?(e.set(t,n),n):(e.set(t,null),null)},lt.prototype.gi=function(t){return void 0===t&&(t=new B),t.assign(this.actualBounds)},lt.prototype.Za=function(){!0===qs(this)&&this.measure(1/0,1/0),this.arrange()},lt.prototype.arrange=function(){if(!1===Xn(this))dm(this);else{As(this,!1);var t=this.Eb,e=B.alloc();e.assign(t);var n=Ol(this);this.Vg(0,0,this.qc.width,this.qc.height);var i=this.position;u0(this,i,this.location),t.ja(),t.x=i.x,t.y=i.y,t.freeze(),this.Fl(e,t),e.C(t)?this.Pd(n):!this.Tc()||F.B(e.width,t.width)&&F.B(e.height,t.height)||0<=this.aw&&this.D(16),B.free(e),cf(this,!1)}},(_=lt.prototype).Fl=function(t,e){var n=this.diagram;if(null!==n){var i=!1;if(!1===n.Si&&t.v()){var l=B.alloc();l.assign(n.documentBounds),l.jv(n.padding),t.x>l.x&&t.y>l.y&&t.right<l.right&&t.bottom<l.bottom&&e.x>l.x&&e.y>l.y&&e.right<l.right&&e.bottom<l.bottom&&(i=!0),B.free(l)}0==(65536&this.G)&&t.C(e)||c0(this,i,n),n.N(),!t.v()&&!e.v()||wc(t,e)||(this instanceof J&&!n.undoManager.isUndoingRedoing&&this.vd(),this.dh())}},_.fv=function(t,e,n){if(this.eh()||!t.v())return!1;var i=this.diagram;return null!==i&&a0(this,i,t,e,n),this.pa=t,this.G&=-2097153,!this.de.v()||null!==i&&!i.animationManager.isTicking&&i.undoManager.isUndoingRedoing||(this.de=new P((i=this.de).x+(t.x-e),i.y+(t.y-n)),this.g("location",i,this.de.copy())),!1===Da(this)&&!1===Xn(this)&&(sp(this),dm(this)),!0},_.Ul=function(t,e,n){var i=this.de,l=this.pa;if(n){if(i.x===t&&i.y===e)return;Da(this)||Xn(this)?l.h(NaN,NaN):l.h(l.x+t-i.x,l.y+e-i.y),i.h(t,e)}else{if(l.x===t&&l.y===e)return;Da(this)||Xn(this)?this.ns():i.h(i.x+t-l.x,i.y+e-l.y),l.h(t,e)}sp(this)},_.ns=function(){this.G&=-2097153,sp(this)},_.mi=function(){return!0},_.Tc=function(){return!0},_.eh=function(){return!1},_.li=function(){return!0},lt.prototype.canCopy=function(){if(!this.copyable)return!1;var t=this.layer;return null===t||!!t.allowCopy&&(null===(t=t.diagram)||!!t.allowCopy)},lt.prototype.canDelete=function(){if(!this.deletable)return!1;var t=this.layer;return null===t||!!t.allowDelete&&(null===(t=t.diagram)||!!t.allowDelete)},lt.prototype.canEdit=function(){if(!this.textEditable)return!1;var t=this.layer;return null===t||!!t.allowTextEdit&&(null===(t=t.diagram)||!!t.allowTextEdit)},lt.prototype.canGroup=function(){if(!this.groupable)return!1;var t=this.layer;return null===t||!!t.allowGroup&&(null===(t=t.diagram)||!!t.allowGroup)},lt.prototype.canMove=function(){if(!this.movable)return!1;var t=this.layer;return null===t||!!t.allowMove&&(null===(t=t.diagram)||!!t.allowMove)},lt.prototype.canReshape=function(){if(!this.reshapable)return!1;var t=this.layer;return null===t||!!t.allowReshape&&(null===(t=t.diagram)||!!t.allowReshape)},lt.prototype.canResize=function(){if(!this.resizable)return!1;var t=this.layer;return null===t||!!t.allowResize&&(null===(t=t.diagram)||!!t.allowResize)},lt.prototype.canRotate=function(){if(!this.rotatable)return!1;var t=this.layer;return null===t||!!t.allowRotate&&(null===(t=t.diagram)||!!t.allowRotate)},lt.prototype.canSelect=function(){if(!this.selectable)return!1;var t=this.layer;return null===t||!!t.allowSelect&&(null===(t=t.diagram)||!!t.allowSelect)},(_=lt.prototype).Pd=function(t){this.G=t?131072|this.G:-131073&this.G},_.dh=function(){var t=this.containingGroup;null!==t&&(t.w(),null!==t.placeholder&&t.placeholder.w(),t.vd())},_.N=function(){var t=this.diagram;null!==t&&!Xn(this)&&!Da(this)&&this.isVisible()&&this.Eb.v()&&t.N(Sh(this,this.Eb))},_.w=function(){$.prototype.w.call(this);var t=this.diagram;null!==t&&(t.te.add(this),this instanceof J&&null!==this.labeledLink&&zd(this.labeledLink),t.Mb(!0))},_.yo=function(t){t||null!==(t=this.ph)&&w0(t,this)},_.zo=function(t){t||null!==(t=this.ph)&&Cm(t,this)},_.Fj=function(){var t=this.data;if(null!==t){var e=this.diagram;null!==e&&null!==(e=e.model)&&e.Kl(t)}},_.Xy=function(){return pm(this,this)},_.az=function(){return gm(this,this)},_.Md=function(t){return t instanceof yt&&mm(this,this,t)},_.Sw=function(t){if(null===t)return null;if(this===t)return this.containingGroup;for(var e=this;null!==e;){if(e instanceof yt&&lp(e,!0),e instanceof J){var n=e.labeledLink;null!==n&&(e=n)}e=e.containingGroup}for(n=null,e=t;null!==e;){if(0!=(1048576&e.G)){n=e;break}e instanceof J&&null!==(t=e.labeledLink)&&(e=t),e=e.containingGroup}for(e=this;null!==e;)e instanceof yt&&lp(e,!1),e instanceof J&&null!==(t=e.labeledLink)&&(e=t),e=e.containingGroup;return n},lt.prototype.canLayout=function(){if(!this.isLayoutPositioned||!this.isVisible())return!1;var t=this.layer;return!(null!==t&&t.isTemporary||this instanceof J&&this.isLinkLabel)},lt.prototype.D=function(t){if(void 0===t&&(t=16777215),this.isLayoutPositioned&&0!=(t&this.layoutConditions)){var e=this.layer;e=!(null!==e&&e.isTemporary||this instanceof J&&this.isLinkLabel)&&!(null!==(e=this.diagram)&&e.undoManager.isUndoingRedoing)}else e=!1;if(e)if(null!==(e=this.ph)){var n=e.layout;null!==n?n.D():e.D(t)}else null!==(t=this.diagram)&&null!==(t=t.layout)&&t.D()},Mt.Object.defineProperties(lt.prototype,{key:{get:function(){var t=this.diagram;if(null!==t)return t.model.ua(this.data)}},adornments:{get:function(){return null===this.Hf?So:this.Hf.iteratorValues}},layer:{get:function(){return this.Ah}},diagram:{get:function(){var t=this.Ah;return null==t?null:t.diagram}},layerName:{get:function(){return this.zg},set:function(t){var e=this.zg;if(e!==t){var n=this.diagram;if((null===n||null!==n.Ij(t)&&!n.partManager.addsToTemporaryLayer)&&(this.zg=t,null!==n&&n.Va(),this.g("layerName",e,t),null!==(e=this.layer)&&e.name!==t&&null!==(n=e.diagram)&&null!==(t=n.Ij(t))&&t!==e)){var i=e.lc(-1,this,!0);if(0<=i&&n.bb(xe,"parts",e,this,null,i,!0),i=t.ii(99999999,this,!0),e.visible!==t.visible&&this.Ub(t.visible),0<=i&&n.bb(nn,"parts",t,null,this,!0,i),null!==(i=this.layerChanged)){var l=n.$;n.$=!0,i(this,e,t),n.$=l}}}}},layerChanged:{get:function(){return null!==this.O?this.O.Zp:null},set:function(t){var e=this.layerChanged;e!==t&&(Ii(this),this.O.Zp=t,this.g("layerChanged",e,t))}},zOrder:{get:function(){return this.eo},set:function(t){var e=this.eo;if(e!==t){this.eo=t;var n=this.layer;null!==n&&Tg(n,-1,this),this.g("zOrder",e,t),null!==(t=this.diagram)&&t.N()}}},locationObject:{get:function(){if(null===this.af){var t=this.locationObjectName;""!==t?(t=this.fb(t),this.af=null!==t?t:this):this.af=this instanceof Pt&&this.type!==$.Link&&null!==this.placeholder?this.placeholder:this}return this.af.visible?this.af:this}},minLocation:{get:function(){return null!==this.O?this.O.oq:fi},set:function(t){var e=this.minLocation;e.C(t)||(t=t.J(),Ii(this),this.O.oq=t,this.g("minLocation",e,t))}},maxLocation:{get:function(){return null!==this.O?this.O.jq:yc},set:function(t){var e=this.maxLocation;e.C(t)||(t=t.J(),Ii(this),this.O.jq=t,this.g("maxLocation",e,t))}},locationObjectName:{get:function(){return null!==this.O?this.O.gq:""},set:function(t){var e=this.locationObjectName;e!==t&&(Ii(this),this.O.gq=t,this.af=null,this.w(),this.g("locationObjectName",e,t))}},locationSpot:{get:function(){return null!==this.O?this.O.hq:Oe},set:function(t){var e=this.locationSpot;e.C(t)||(t=t.J(),Ii(this),this.O.hq=t,this.w(),this.g("locationSpot",e,t))}},location:{get:function(){return this.de},set:function(t){var e=t.x,n=t.y,i=this.de;if(!(i.x===e||isNaN(i.x)&&isNaN(e))||!(i.y===n||isNaN(i.y)&&isNaN(n))){if(e=t=t.copy(),this.eh())e=!1;else{if(this.de=e,this.G|=2097152,!1===Xn(this)&&(sp(this),(n=this.pa).v())){var l=this.diagram;if(null===l||l.animationManager.isTicking||!l.undoManager.isUndoingRedoing){var u=n.copy();n.h(n.x+(e.x-i.x),n.y+(e.y-i.y)),a0(this,l,n,u.x,u.y),this.g("position",u,n.copy())}}e=!0}e&&this.g("location",i,t.copy())}}},category:{get:function(){return this.Jf},set:function(t){var e=this.Jf;if(e!==t){var n=this.diagram,i=this.data,l=null;if(null!==n&&null!==i&&!(this instanceof Pt)){var u=n.model.undoManager;u.isEnabled&&!u.isUndoingRedoing&&(l=this.clone()).R.addAll(this.R)}this.Jf=t,this.g("category",e,t),null===n||null===i||this instanceof Pt?this instanceof Pt&&null!==(l=this.adornedPart)&&(null!==(t=l.Hf)&&t.remove(e),l.Tg(this.category,this)):(u=n.model).undoManager.isUndoingRedoing||(this.eh()?(n.partManager.setLinkCategoryForData(i,t),null!==(n=n.partManager.findLinkTemplateForCategory(t))&&(uo(n),null!==(n=n.copy())&&f0(this,n,e,t))):(null!==u&&u.Rl(i,t),null!==(n=P1(n.partManager,i,t))&&(uo(n),null===(n=n.copy())||n instanceof H||(i=this.location.copy(),f0(this,n,e,t),this.location.v()||(this.location=i)))),null!==l&&((e=this.clone()).R.addAll(this.R),this.g("self",l,e)))}}},self:{get:function(){return this},set:function(t){f0(this,t,this.category,t.category)}},copyable:{get:function(){return 0!=(1&this.G)},set:function(t){var e=0!=(1&this.G);e!==t&&(this.G^=1,this.g("copyable",e,t))}},deletable:{get:function(){return 0!=(2&this.G)},set:function(t){var e=0!=(2&this.G);e!==t&&(this.G^=2,this.g("deletable",e,t))}},textEditable:{get:function(){return 0!=(4&this.G)},set:function(t){var e=0!=(4&this.G);e!==t&&(this.G^=4,this.g("textEditable",e,t),this.Rb())}},groupable:{get:function(){return 0!=(8&this.G)},set:function(t){var e=0!=(8&this.G);e!==t&&(this.G^=8,this.g("groupable",e,t))}},movable:{get:function(){return 0!=(16&this.G)},set:function(t){var e=0!=(16&this.G);e!==t&&(this.G^=16,this.g("movable",e,t))}},selectionAdorned:{get:function(){return 0!=(32&this.G)},set:function(t){var e=0!=(32&this.G);e!==t&&(this.G^=32,this.g("selectionAdorned",e,t),this.Rb())}},isInDocumentBounds:{get:function(){return 0!=(64&this.G)},set:function(t){var e=0!=(64&this.G);if(e!==t){this.G^=64;var n=this.diagram;null!==n&&n.Va(),this.g("isInDocumentBounds",e,t)}}},isLayoutPositioned:{get:function(){return 0!=(128&this.G)},set:function(t){var e=0!=(128&this.G);e!==t&&(this.G^=128,this.g("isLayoutPositioned",e,t),this.D(t?4:8))}},selectable:{get:function(){return 0!=(256&this.G)},set:function(t){var e=0!=(256&this.G);e!==t&&(this.G^=256,this.g("selectable",e,t),this.Rb())}},reshapable:{get:function(){return 0!=(512&this.G)},set:function(t){var e=0!=(512&this.G);e!==t&&(this.G^=512,this.g("reshapable",e,t),this.Rb())}},resizable:{get:function(){return 0!=(1024&this.G)},set:function(t){var e=0!=(1024&this.G);e!==t&&(this.G^=1024,this.g("resizable",e,t),this.Rb())}},rotatable:{get:function(){return 0!=(2048&this.G)},set:function(t){var e=0!=(2048&this.G);e!==t&&(this.G^=2048,this.g("rotatable",e,t),this.Rb())}},isSelected:{get:function(){return 0!=(4096&this.G)},set:function(t){var e=0!=(4096&this.G);if(e!==t){var n=this.diagram;if(!t||this.canSelect()&&!(null!==n&&n.selection.count>=n.maxSelectionCount)){this.G^=4096;var i=!1;if(null!==n){i=n.skipsUndoManager,n.skipsUndoManager=!0;var l=n.selection;l.ja(),t?l.add(this):l.remove(this),l.freeze()}this.g("isSelected",e,t),this.Rb(),null!==(t=this.selectionChanged)&&t(this),null!==n&&(n.Mb(),n.skipsUndoManager=i)}}}},isHighlighted:{get:function(){return 0!=(524288&this.G)},set:function(t){var e=0!=(524288&this.G);if(e!==t){this.G^=524288;var n=this.diagram;null!==n&&((n=n.highlighteds).ja(),t?n.add(this):n.remove(this),n.freeze()),this.g("isHighlighted",e,t),this.N(),null!==(t=this.highlightedChanged)&&t(this)}}},isShadowed:{get:function(){return 0!=(8192&this.G)},set:function(t){var e=0!=(8192&this.G);e!==t&&(this.G^=8192,this.g("isShadowed",e,t),this.N())}},isAnimated:{get:function(){return 0!=(262144&this.G)},set:function(t){var e=0!=(262144&this.G);e!==t&&(this.G^=262144,this.g("isAnimated",e,t))}},highlightedChanged:{get:function(){return null!==this.O?this.O.Qp:null},set:function(t){var e=this.highlightedChanged;e!==t&&(Ii(this),this.O.Qp=t,this.g("highlightedChanged",e,t))}},selectionObjectName:{get:function(){return null!==this.O?this.O.Sq:""},set:function(t){var e=this.selectionObjectName;e!==t&&(Ii(this),this.O.Sq=t,this.Kg=null,this.g("selectionObjectName",e,t))}},selectionAdornmentTemplate:{get:function(){return null!==this.O?this.O.Qq:null},set:function(t){var e=this.selectionAdornmentTemplate;e!==t&&(Ii(this),this.O.Qq=t,this.g("selectionAdornmentTemplate",e,t))}},selectionObject:{get:function(){if(null===this.Kg){var t=this.selectionObjectName;null!==t&&""!==t?(t=this.fb(t),this.Kg=null!==t?t:this):this.Kg=this instanceof H&&null!==(t=this.path)?t:this}return this.Kg}},selectionChanged:{get:function(){return null!==this.O?this.O.Rq:null},set:function(t){var e=this.selectionChanged;e!==t&&(Ii(this),this.O.Rq=t,this.g("selectionChanged",e,t))}},resizeAdornmentTemplate:{get:function(){return null!==this.O?this.O.Eq:null},set:function(t){var e=this.resizeAdornmentTemplate;e!==t&&(Ii(this),this.O.Eq=t,this.g("resizeAdornmentTemplate",e,t))}},resizeObjectName:{get:function(){return null!==this.O?this.O.Gq:""},set:function(t){var e=this.resizeObjectName;e!==t&&(Ii(this),this.O.Gq=t,this.g("resizeObjectName",e,t))}},resizeObject:{get:function(){var t=this.resizeObjectName;return""!==t&&null!==(t=this.fb(t))?t:this}},resizeCellSize:{get:function(){return null!==this.O?this.O.Fq:Ky},set:function(t){var e=this.resizeCellSize;e.C(t)||(t=t.J(),Ii(this),this.O.Fq=t,this.g("resizeCellSize",e,t))}},rotateAdornmentTemplate:{get:function(){return null!==this.O?this.O.Hq:null},set:function(t){var e=this.rotateAdornmentTemplate;e!==t&&(Ii(this),this.O.Hq=t,this.g("rotateAdornmentTemplate",e,t))}},rotateObjectName:{get:function(){return null!==this.O?this.O.Iq:""},set:function(t){var e=this.rotateObjectName;e!==t&&(Ii(this),this.O.Iq=t,this.g("rotateObjectName",e,t))}},rotateObject:{get:function(){var t=this.rotateObjectName;return""!==t&&null!==(t=this.fb(t))?t:this}},rotationSpot:{get:function(){return null!==this.O?this.O.Kq:Hn},set:function(t){var e=this.rotationSpot;e.C(t)||(t=t.J(),Ii(this),this.O.Kq=t,this.g("rotationSpot",e,t))}},text:{get:function(){return this.cc},set:function(t){var e=this.cc;e!==t&&(this.cc=t,this.g("text",e,t))}},containingGroup:{get:function(){return this.ph},set:function(t){if(this.Tc()){var e=this.ph;if(e!==t){null===t||this!==t&&!t.Md(this)||(this===t&&Y("Cannot make a Group a member of itself: "+this.toString()),Y("Cannot make a Group indirectly contain itself: "+this.toString()+" already contains "+t.toString())),this.D(2);var n=this.diagram;if(null!==e?Cm(e,this):this instanceof yt&&null!==n&&n.Uh.remove(this),this.ph=t,null!==t?w0(t,this):this instanceof yt&&null!==n&&n.Uh.add(this),this.D(1),null!==n&&n.$){var i=this.data,l=n.model;if(null!==i&&l.Oj()){var u=l.ua(null!==t?t.data:null);l.Po(i,u)}}if(null!==(i=this.containingGroupChanged)&&(l=!0,null!==n&&(l=n.$,n.$=!0),i(this,e,t),null!==n&&(n.$=l)),this instanceof yt)for(bs(n=new Z,this,!0,0,!0),n=n.iterator;n.next();)if((i=n.value)instanceof J)for(i=i.linksConnected;i.next();)ge(i.value);if(this instanceof J){for(n=this.linksConnected;n.next();)ge(n.value);null!==(n=this.labeledLink)&&ge(n)}this.g("containingGroup",e,t),null!==t&&null!==(e=t.layer)&&Tg(e,-1,t)}}else Y("cannot set the Part.containingGroup of a Link or Adornment")}},containingGroupChanged:{get:function(){return null!==this.O?this.O.np:null},set:function(t){var e=this.containingGroupChanged;e!==t&&(Ii(this),this.O.np=t,this.g("containingGroupChanged",e,t))}},isTopLevel:{get:function(){return!(null!==this.containingGroup||this instanceof J&&null!==this.labeledLink)}},layoutConditions:{get:function(){return null!==this.O?this.O.bq:127},set:function(t){var e=this.layoutConditions;e!==t&&(Ii(this),this.O.bq=t,this.g("layoutConditions",e,t))}},dragComputation:{get:function(){return null!==this.O?this.O.yp:null},set:function(t){var e=this.dragComputation;e!==t&&(Ii(this),this.O.yp=t,this.g("dragComputation",e,t))}},shadowOffset:{get:function(){return null!==this.O?this.O.Wq:$y},set:function(t){var e=this.shadowOffset;e.C(t)||(t=t.J(),Ii(this),this.O.Wq=t,this.N(),this.g("shadowOffset",e,t))}},shadowColor:{get:function(){return null!==this.O?this.O.Vq:"gray"},set:function(t){var e=this.shadowColor;e!==t&&(Ii(this),this.O.Vq=t,this.N(),this.g("shadowColor",e,t))}},shadowBlur:{get:function(){return null!==this.O?this.O.Lg:4},set:function(t){var e=this.shadowBlur;e!==t&&(Ii(this),this.O.Lg=t,this.N(),this.g("shadowBlur",e,t))}}}),lt.prototype.invalidateLayout=lt.prototype.D,lt.prototype.findCommonContainingGroup=lt.prototype.Sw,lt.prototype.isMemberOf=lt.prototype.Md,lt.prototype.findTopLevelPart=lt.prototype.az,lt.prototype.findSubGraphLevel=lt.prototype.Xy,lt.prototype.ensureBounds=lt.prototype.Za,lt.prototype.getDocumentBounds=lt.prototype.gi,lt.prototype.findObject=lt.prototype.fb,lt.prototype.moveTo=lt.prototype.moveTo,lt.prototype.invalidateAdornments=lt.prototype.Rb,lt.prototype.clearAdornments=lt.prototype.zj,lt.prototype.removeAdornment=lt.prototype.Af,lt.prototype.addAdornment=lt.prototype.Tg,lt.prototype.findAdornment=lt.prototype.Hj,lt.prototype.updateTargetBindings=lt.prototype.Ka;var p0=!1;function Pt(t,e){void 0===t||t instanceof Be||"string"==typeof t?lt.call(this,t):(lt.call(this),t&&(e=t)),this.G&=-257,this.zg="Adornment",this.me=null,this.ew=0,this.yw=!1,this.j=this.Xa=null,e&&Object.assign(this,e)}function ym(){this.ic=!1,this.ur=this.bj=this.eq=this.cq=null,this.ap=Kt,this.Dq=xm,this.gr=this.dj=this.mq=this.lq=null}function J(t,e){void 0===t||t instanceof Be||"string"==typeof t?lt.call(this,t):(lt.call(this),t&&(e=t)),this.U=13,this.ya=null,this.jb=new q,this.sc=this.Qe=this.Nk=null,this.Rg=!1,e&&Object.assign(this,e)}function Oo(t){null===t.ya?t.ya=new ym:t.ya.ic&&(t.ya=t.ya.copy())}function u1(t,e){null!==e&&(null===t.Qe&&(t.Qe=new Z),t.Qe.add(e))}function g0(t,e,n,i){if(null===e||null===t.Qe)return null;for(var l=t.Qe.iterator;l.next();){var u=l.value;if(u.cs===t&&u.Pu===e&&u.vx===n&&u.wx===i||u.cs===e&&u.Pu===t&&u.vx===i&&u.wx===n)return u}return null}function h1(t,e){for(t=t.linksConnected;t.next();){var n=t.value;(n.fromPort===e||n.toPort===e)&&(er(n.fromPort),er(n.toPort),n.ab())}}function er(t){if(null!==t){var e=t.Hn;null!==e&&e.Al(),null===(e=(t=t.part).containingGroup)||t.isVisible()||er(e.port)}}function m0(t,e,n,i){if(null!==e&&!n.has(e)){n.add(e);var l=!0,u=t.diagram;null!==u&&(l=u.isTreePathToChildren),e.linksConnected.each(function(h){h.isTreeLink?(l?h.fromNode===e:h.toNode===e)&&m0(t,l?h.toNode:h.fromNode,n,i):i.add(h)})}}function ff(t,e,n){er(n);var i=t.jb.contains(e);if(i||t.jb.add(e),!i||e.fromNode===e.toNode){var l=t.linkConnected;if(null!==l){var u=!0,h=t.diagram;null!==h&&(u=h.$,h.$=!0),l(t,e,n),null!==h&&(h.$=u)}}!i&&e.isTreeLink&&(n=e.fromNode,e=e.toNode,null!==n&&null!==e&&n!==e&&(i=!0,null!==(t=t.diagram)&&(i=t.isTreePathToChildren),u=i?n:e,(l=i?e:n).Rg||(l.Rg=u),!u.isTreeLeaf||null!==t&&t.undoManager.isUndoingRedoing||(i?n===u&&(u.isTreeLeaf=!1):e===u&&(u.isTreeLeaf=!1))))}function up(t,e,n){er(n);var i=t.jb.remove(e),l=null;if(i||e.toNode===e.fromNode){var u=t.linkDisconnected;if(l=t.diagram,null!==u){var h=!0;null!==l&&(h=l.$,l.$=!0),u(t,e,n),null!==l&&(l.$=h)}}i&&e.isTreeLink&&(n=!0,null!==l&&(n=l.isTreePathToChildren),t=n?e.toNode:e.fromNode,e=n?e.fromNode:e.toNode,null!==t&&(t.Rg=!1),null===e||e.isTreeLeaf||(0===e.jb.count?(e.Rg=null,null!==l&&l.undoManager.isUndoingRedoing||(e.isTreeLeaf=!0)):vm(e)))}function vm(t){if(t.Rg=!1,0!==t.jb.count){var e=!0,n=t.diagram;if(null===n||!n.undoManager.isUndoingRedoing){for(null!==n&&(e=n.isTreePathToChildren),n=t.jb.iterator;n.next();){var i=n.value;if(i.isTreeLink)if(e){if(i.fromNode===t)return void(t.isTreeLeaf=!1)}else if(i.toNode===t)return void(t.isTreeLeaf=!1)}t.isTreeLeaf=!0}}}function y0(t){null===t.sc?t.sc=new vt:t.sc.clear(),t.$l(t,function(e,n){c1(e,n)}),0===t.sc.count&&t.sc.add("",t)}function c1(t,e){var n=e.portId;null!==n&&null!==t.sc&&t.sc.add(n,e)}function wm(t,e,n){var i=e.portId;if(null!==i&&(null!==t.sc&&t.sc.remove(i),null!==(e=t.diagram)&&n)){for(n=null,t=t.findLinksConnected(i);t.next();)i=t.value,null===n&&(n=oe()),n.push(i);if(null!==n){for(t=0;t<n.length;t++)e.remove(n[t]);Nt(n)}}}function f1(t,e){return null===(e=e.ig())?0:1+f1(t,e)}function d1(t,e,n,i,l,u,h){if(1<i)for(var f=n?t.ro():t.Kd();f.next();){var p=f.value;p.isTreeLink&&(null===(p=p.wo(t))||p===t||e.contains(p)||(e.add(p),d1(p,e,n,i-1,l,u,h)))}else Fs(t,e,n,l,u,h)}function Fs(t,e,n,i,l,u){for(var h=l===t||t.isTreeExpanded,f=n?t.ro():t.Kd();f.next();){var p=f.value;if(p.isTreeLink&&null!==(p=p.wo(t))&&p!==t){var g=e.contains(p);g||e.add(p),h&&(u&&i.vj(p,l),p.dh(),p.Ub(!1)),p.isTreeExpanded&&(p.wasTreeExpanded=p.isTreeExpanded,g||Fs(p,e,n,i,l,u))}}t.isTreeExpanded=!1}function p1(t,e,n,i,l,u,h){for(var f=u!==t&&t.isTreeExpanded,p=n?t.ro():t.Kd();p.next();){var g=p.value;g.isTreeLink&&(f||g.xd||g.ab(),null!==(g=g.wo(t))&&g!==t&&!e.contains(g)&&(e.add(g),f||(g.Ub(!0),g.dh(),h&&l.xj(g,u)),2<i||g.wasTreeExpanded))&&(g.wasTreeExpanded=!1,p1(g,e,n,i-1,l,u,h))}t.isTreeExpanded=!0}lt.className="Part",lt.LayoutNone=0,lt.LayoutAdded=1,lt.LayoutRemoved=2,lt.LayoutShown=4,lt.LayoutHidden=8,lt.LayoutNodeSized=16,lt.LayoutGroupLayout=32,lt.LayoutNodeReplaced=64,lt.LayoutStandard=127,lt.LayoutAll=16777215,Ht(Pt,lt),Pt.prototype.toString=function(){var t=this.adornedPart;return"Adornment("+this.category+")"+(null!==t?t.toString():"")},Pt.prototype.updateRelationshipsFromData=function(){},Pt.prototype.Rj=function(t){var e=this.adornedObject,n=e?.part;if(n instanceof H&&e instanceof wt){e=n.path,n.Rj(t),t=e.geometry,e=(n=this.R.s).length;for(var i=0;i<e;i++){var l=n[i];l.isPanelMain&&l instanceof wt&&(l.sa=t)}}},Pt.prototype.mi=function(){var t=this.me;return null===t||null===(t=t.part)||!Xn(t)},Pt.prototype.Tc=function(){return!1},Pt.prototype.$j=function(t,e,n,i,l,u,h){if(t===nn&&"elements"===e){if(l instanceof mi)null===this.Xa&&(this.Xa=l);else if(l instanceof $){var f=l.vl(function(p){return p instanceof mi});f instanceof mi&&null===this.Xa&&(this.Xa=f)}}else t===xe&&"elements"===e&&null!==this.Xa&&(i===this.Xa||i instanceof $&&this.Xa.jg(i))&&(this.Xa=null);lt.prototype.$j.call(this,t,e,n,i,l,u,h)},Pt.prototype.updateAdornments=function(){},Pt.prototype.Fj=function(){},Mt.Object.defineProperties(Pt.prototype,{placeholder:{get:function(){return this.Xa}},adornedObject:{get:function(){return this.me},set:function(t){var e=this.adornedPart,n=null;null!==t&&(n=t.part),null===e||null!==t&&e===n||e.Af(this.category),this.me=t,null!==n&&n.Tg(this.category,this)}},adornedPart:{get:function(){var t=this.me;return null!==t?t.part:null}},containingGroup:{get:function(){return null}}}),Pt.className="Adornment",ym.prototype.copy=function(){var t=new ym;return t.cq=this.cq,t.eq=this.eq,t.bj=this.bj,t.ur=this.ur,t.ap=this.ap.J(),t.Dq=this.Dq,t.lq=this.lq,t.mq=this.mq,t.dj=this.dj,t.gr=this.gr,t},Ht(J,lt),J.prototype.cloneProtected=function(t){lt.prototype.cloneProtected.call(this,t),t.U=this.U,null!==this.ya&&(t.ya=this.ya.ic?this.ya:this.ya.copy())},(_=J.prototype).qf=function(t){lt.prototype.qf.call(this,t),t.vd(),t.Qe=this.Qe,t.sc=null},_.ih=function(){lt.prototype.ih.call(this),null!==this.ya&&(this.ya.ic=!0)},_.uz=function(t,e,n){null==e&&(e=""),null==n&&(n=""),null!==(t=g0(this,t,e,n))&&t.Al()},_.$j=function(t,e,n,i,l,u,h){(t===nn&&"elements"===e||t===xe&&"elements"===e)&&(this.sc=null),lt.prototype.$j.call(this,t,e,n,i,l,u,h)},_.vd=function(t){for(var e=this.linksConnected;e.next();){var n=e.value;void 0!==t&&t.contains(n)||(er(n.fromPort),er(n.toPort),n.ab())}},_.mi=function(){return!0},J.prototype.getAvoidableRect=function(t){return t.set(this.actualBounds),t.fo(this.avoidableMargin),t},J.prototype.findVisibleNode=function(){for(var t=this;null!==t&&!t.isVisible();)t=t.containingGroup;return t},J.prototype.isVisible=function(){if(!lt.prototype.isVisible.call(this))return!1;var t=!0,e=du,n=this.diagram;if(null!==n){if(n.animationManager.es(this))return!0;t=n.isTreePathToChildren,e=n.treeCollapsePolicy}if(e===du){if(null!==(t=this.ig())&&!t.isTreeExpanded)return!1}else if(e===Nv){if(0<(t=t?this.xu():this.yu()).count&&t.all(function(i){return!i.isTreeExpanded}))return!1}else if(e===Pv&&0<(t=t?this.xu():this.yu()).count&&t.any(function(i){return!i.isTreeExpanded}))return!1;return null===(t=this.labeledLink)||t.isVisible()},J.prototype.Ub=function(t){lt.prototype.Ub.call(this,t);for(var e=this.linksConnected;e.next();){var n=e.value;if(t&&null!==this.containingGroup){var i=n.wo(this);null===i||i.Md(this.containingGroup)||n.ab()}n.Ub(t)}},J.prototype.Tw=function(){var t=new Z,e=new Z;return m0(this,this,t,e),e.iterator},J.prototype.findLinksConnected=function(t){if(void 0===t&&(t=null),null===t)return this.jb.iterator;var e=new _n(this.jb),n=this;return e.predicate=function(i){return i.fromNode===n&&i.fromPortId===t||i.toNode===n&&i.toPortId===t},e},(_=J.prototype).ro=function(t){void 0===t&&(t=null);var e=new _n(this.jb),n=this;return e.predicate=function(i){return i.fromNode===n&&(null===t||i.fromPortId===t)},e},_.Kd=function(t){void 0===t&&(t=null);var e=new _n(this.jb),n=this;return e.predicate=function(i){return i.toNode===n&&(null===t||i.toPortId===t)},e},_.wu=function(t){void 0===t&&(t=null);for(var e=null,n=null,i=this.jb.iterator;i.next();){var l=i.value;l.fromNode===this?(null===t||l.fromPortId===t)&&(l=l.toNode,null!==e?e.add(l):null!==n&&n!==l?((e=new Z).add(n),e.add(l)):n=l):l.toNode!==this||null!==t&&l.toPortId!==t||(l=l.fromNode,null!==e?e.add(l):null!==n&&n!==l?((e=new Z).add(n),e.add(l)):n=l)}return null!==e?e.iterator:null!==n?new Sn(n):So},_.yu=function(t){void 0===t&&(t=null);for(var e=null,n=null,i=this.jb.iterator;i.next();){var l=i.value;l.fromNode!==this||null!==t&&l.fromPortId!==t||(l=l.toNode,null!==e?e.add(l):null!==n&&n!==l?((e=new Z).add(n),e.add(l)):n=l)}return null!==e?e.iterator:null!==n?new Sn(n):So},_.xu=function(t){void 0===t&&(t=null);for(var e=null,n=null,i=this.jb.iterator;i.next();){var l=i.value;l.toNode!==this||null!==t&&l.toPortId!==t||(l=l.fromNode,null!==e?e.add(l):null!==n&&n!==l?((e=new Z).add(n),e.add(l)):n=l)}return null!==e?e.iterator:null!==n?new Sn(n):So},_.Sy=function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=null);var i=new _n(this.jb),l=this;return i.predicate=function(u){return!((u.fromNode!==l||u.toNode!==t||null!==e&&u.fromPortId!==e||null!==n&&u.toPortId!==n)&&(u.fromNode!==t||u.toNode!==l||null!==n&&u.fromPortId!==n||null!==e&&u.toPortId!==e))},i},_.Ty=function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=null);var i=new _n(this.jb),l=this;return i.predicate=function(u){return!(u.fromNode!==l||u.toNode!==t||null!==e&&u.fromPortId!==e||null!==n&&u.toPortId!==n)},i},J.prototype.updateRelationshipsFromData=function(){var t=this.diagram;null!==t&&t.partManager.updateRelationshipsFromData(this)},(_=J.prototype).yo=function(t){lt.prototype.yo.call(this,t),t||(vm(this),null!==(t=this.Nk)&&x0(t,this))},_.zo=function(t){lt.prototype.zo.call(this,t),t||null!==(t=this.Nk)&&null!==t.rd&&(t.rd.remove(this),t.w())},_.Fj=function(){if(0<this.jb.count){var t=this.diagram;if(null!==t)for(var e=null===t.commandHandler||t.commandHandler.deletesConnectedLinks,n=this.jb.copy().iterator;n.next();){var i=n.value;e?t.remove(i):(i.fromNode===this&&(i.fromNode=null),i.toNode===this&&(i.toNode=null))}}this.labeledLink=null,lt.prototype.Fj.call(this)},_.Kr=function(t){if(null===this.sc){if(""===t&&!1===this.He)return this;y0(this)}var e=this.sc.I(t);return null!==e||""!==t&&null!==(e=this.sc.I(""))?e:this},_.wz=function(t){if(null===t||t===this)return!1;var e=!0,n=this.diagram;if(null!==n&&(e=n.isTreePathToChildren),n=this,e)for(;n!==t;){e=null;for(var i=n.jb.iterator;i.next();){var l=i.value;if(l.isTreeLink&&(e=l.fromNode)!==n&&e!==this)break}if(e===this||null===e||e===n)return!1;n=e}else for(;n!==t;){for(e=null,i=n.jb.iterator;i.next()&&(!(l=i.value).isTreeLink||(e=l.toNode)===n||e===this););if(e===this||null===e||e===n)return!1;n=e}return!0},_.ez=function(){var t=!0,e=this.diagram;if(null!==e&&(t=e.isTreePathToChildren),e=this,t)for(;;){t=null;for(var n=e.jb.iterator;n.next();){var i=n.value;if(i.isTreeLink&&(t=i.fromNode)!==e&&t!==this)break}if(t===this)return this;if(null===t||t===e)return e;e=t}else for(;;){for(t=null,n=e.jb.iterator;n.next()&&(!(i=n.value).isTreeLink||(t=i.toNode)===e||t===this););if(t===this)return this;if(null===t||t===e)return e;e=t}},_.Py=function(t){if(null===t)return null;if(this===t)return this;for(var e=this;null!==e;)lp(e,!0),e=e.ig();var n=null;for(e=t;null!==e;){if(0!=(1048576&e.G)){n=e;break}e=e.ig()}for(e=this;null!==e;)lp(e,!1),e=e.ig();return n},_.$g=function(){var t=!0,e=this.diagram;if(null!==e&&(t=e.isTreePathToChildren),e=this.jb.iterator,t){for(;e.next();)if((t=e.value).isTreeLink&&t.fromNode!==this)return t}else for(;e.next();)if((t=e.value).isTreeLink&&t.toNode!==this)return t;return null},_.ig=function(){var t=this.Rg;if(null===t)return null;if(t instanceof J)return t;var e=!0;if(null!==(t=this.diagram)&&(e=t.isTreePathToChildren),t=this.jb.iterator,e){for(;t.next();)if((e=t.value).isTreeLink&&(e=e.fromNode)!==this)return this.Rg=e}else for(;t.next();)if((e=t.value).isTreeLink&&(e=e.toNode)!==this)return this.Rg=e;return this.Rg=null},_.cz=function(){var e=new Z;return function t(n,i){i.add(n);var l=n.$g();null!==l&&(i.add(l),null!==(n=n.ig())&&t(n,i))}(this,e),e},_.bz=function(){return f1(this,this)},_.to=function(){var t=!0,e=this.diagram;null!==e&&(t=e.isTreePathToChildren),e=new _n(this.jb);var n=this;return e.predicate=t?function(i){return!(!i.isTreeLink||i.fromNode!==n)}:function(i){return!(!i.isTreeLink||i.toNode!==n)},e},_.Au=function(){var t=!0,e=this.diagram;null!==e&&(t=e.isTreePathToChildren);var n=e=null,i=this.jb.iterator;if(t)for(;i.next();)(t=i.value).isTreeLink&&t.fromNode===this&&(t=t.toNode,null!==e?e.add(t):null!==n&&n!==t?((e=new q).add(n),e.add(t)):n=t);else for(;i.next();)(t=i.value).isTreeLink&&t.toNode===this&&(t=t.fromNode,null!==e?e.add(t):null!==n&&n!==t?((e=new q).add(n),e.add(t)):n=t);return null!==e?e.iterator:null!==n?new Sn(n):So},_.dz=function(t){void 0===t&&(t=1/0);var e=new Z;return bs(e,this,!1,t,!0),e},J.prototype.collapseTree=function(t){void 0===t&&(t=1),1>t&&(t=1);var e=this.diagram;if(null!==e&&!e.Ie){e.Ie=!0;var n=new Z;n.add(this),d1(this,n,e.isTreePathToChildren,t,e,this,e.treeCollapsePolicy===du),e.Ie=!1}},J.prototype.expandTree=function(t){void 0===t&&(t=2),2>t&&(t=2);var e=this.diagram;if(null!==e&&!e.Ie){e.Ie=!0;var n=new Z;n.add(this),p1(this,n,e.isTreePathToChildren,t,e,this,e.treeCollapsePolicy===du),e.Ie=!1}},Mt.Object.defineProperties(J.prototype,{portSpreading:{get:function(){return null!==this.ya?this.ya.Dq:xm},set:function(t){var e=this.portSpreading;e!==t&&(Oo(this),this.ya.Dq=t,this.g("portSpreading",e,t),null!==(t=this.diagram)&&t.undoManager.isUndoingRedoing||this.vd())}},avoidable:{get:function(){return 0!=(8&this.U)},set:function(t){var e=0!=(8&this.U);if(e!==t){this.U^=8;var n=this.diagram;null!==n&&Lg(n,this),this.g("avoidable",e,t)}}},avoidableMargin:{get:function(){return null!==this.ya?this.ya.ap:Kt},set:function(t){"number"==typeof t&&(t=new Bt(t));var e=this.avoidableMargin;if(!e.C(t)){t=t.J(),Oo(this),this.ya.ap=t;var n=this.diagram;null!==n&&Lg(n,this),this.g("avoidableMargin",e,t)}}},linksConnected:{get:function(){return this.jb.iterator}},linkConnected:{get:function(){return null!==this.ya?this.ya.cq:null},set:function(t){var e=this.linkConnected;e!==t&&(Oo(this),this.ya.cq=t,this.g("linkConnected",e,t))}},linkDisconnected:{get:function(){return null!==this.ya?this.ya.eq:null},set:function(t){var e=this.linkDisconnected;e!==t&&(Oo(this),this.ya.eq=t,this.g("linkDisconnected",e,t))}},linkValidation:{get:function(){return null!==this.ya?this.ya.bj:null},set:function(t){var e=this.linkValidation;e!==t&&(Oo(this),this.ya.bj=t,this.g("linkValidation",e,t))}},isLinkLabel:{get:function(){return null!==this.Nk}},labeledLink:{get:function(){return this.Nk},set:function(t){var e=this.Nk;if(e!==t){var n=this.diagram,i=this.data;if(null!==e){if(null!==e.rd&&(e.rd.remove(this),e.w()),null!==n&&null!==i&&!n.undoManager.isUndoingRedoing){var l=e.data,u=n.model;if(null!==l&&u.ki()){var h=u.ua(i);void 0!==h&&u.xx(l,h)}}this.containingGroup=null}this.Nk=t,null!==t&&(x0(t,this),null===n||null===i||n.undoManager.isUndoingRedoing||(n=n.model,null!==(l=t.data)&&n.ki()&&void 0!==(i=n.ua(i))&&n.hu(l,i)),this.containingGroup=t.containingGroup),zd(this),this.g("labeledLink",e,t)}}},port:{get:function(){return this.Kr("")}},ports:{get:function(){return null===this.sc&&y0(this),this.sc.iteratorValues}},isTreeExpanded:{get:function(){return 0!=(1&this.U)},set:function(t){var e=0!=(1&this.U);if(e!==t){this.U^=1;var n=this.diagram;if(this.g("isTreeExpanded",e,t),null!==(e=this.treeExpandedChanged)){var i=!0;null!==n&&(i=n.$,n.$=!0),e(this),null!==n&&(n.$=i)}null!==n&&n.undoManager.isUndoingRedoing?this.Ub(t):t?this.expandTree():this.collapseTree()}}},wasTreeExpanded:{get:function(){return 0!=(2&this.U)},set:function(t){var e=0!=(2&this.U);e!==t&&(this.U^=2,this.g("wasTreeExpanded",e,t))}},treeExpandedChanged:{get:function(){return null!==this.ya?this.ya.ur:null},set:function(t){var e=this.treeExpandedChanged;e!==t&&(Oo(this),this.ya.ur=t,this.g("treeExpandedChanged",e,t))}},isTreeLeaf:{get:function(){return 0!=(4&this.U)},set:function(t){var e=0!=(4&this.U);e!==t&&(this.U^=4,this.g("isTreeLeaf",e,t))}}}),J.prototype.expandTree=J.prototype.expandTree,J.prototype.collapseTree=J.prototype.collapseTree,J.prototype.findTreeParts=J.prototype.dz,J.prototype.findTreeChildrenNodes=J.prototype.Au,J.prototype.findTreeChildrenLinks=J.prototype.to,J.prototype.findTreeLevel=J.prototype.bz,J.prototype.findTreeParentChain=J.prototype.cz,J.prototype.findTreeParentNode=J.prototype.ig,J.prototype.findTreeParentLink=J.prototype.$g,J.prototype.findCommonTreeParent=J.prototype.Py,J.prototype.findTreeRoot=J.prototype.ez,J.prototype.isInTreeOf=J.prototype.wz,J.prototype.findPort=J.prototype.Kr,J.prototype.findLinksTo=J.prototype.Ty,J.prototype.findLinksBetween=J.prototype.Sy,J.prototype.findNodesInto=J.prototype.xu,J.prototype.findNodesOutOf=J.prototype.yu,J.prototype.findNodesConnected=J.prototype.wu,J.prototype.findLinksInto=J.prototype.Kd,J.prototype.findLinksOutOf=J.prototype.ro,J.prototype.findExternalTreeLinksConnected=J.prototype.Tw,J.prototype.invalidateConnectedLinks=J.prototype.vd,J.prototype.invalidateLinkBundle=J.prototype.uz;var g1=new W(J,"SpreadingNone",10),xm=new W(J,"SpreadingEvenly",11),v0=new W(J,"SpreadingPacked",12);function yt(t,e){void 0===t||t instanceof Be||"string"==typeof t?J.call(this,t):(J.call(this),t&&(e=t)),this.U|=4608,this.on=new Z,this.Xa=null,this.Kc=new Ot,this.Kc.group=this,this.Vk=new Z,this.ib=this.Dp=null,e&&Object.assign(this,e)}function w0(t,e){if(t.on.add(e)){e instanceof yt&&t.Vk.add(e);var n=t.memberAdded;if(null!==n){var i=!0,l=t.diagram;null!==l&&(i=l.$,l.$=!0),n(t,e),null!==l&&(l.$=i)}t.isVisible()&&t.isSubGraphExpanded||e.Ub(!1)}e instanceof H&&!t.computesBoundsIncludingLinks||(null===(e=t.Xa)&&(e=t),e.w())}function Cm(t,e){if(t.on.remove(e)){e instanceof yt&&t.Vk.remove(e);var n=t.memberRemoved;if(null!==n){var i=!0,l=t.diagram;null!==l&&(i=l.$,l.$=!0),n(t,e),null!==l&&(l.$=i)}t.isVisible()&&t.isSubGraphExpanded||e.Ub(!0)}e instanceof H&&!t.computesBoundsIncludingLinks||(null===(e=t.Xa)&&(e=t),e.w())}function m1(t,e,n,i){for(var l=t.memberParts;l.next();){var u=l.value;if(u.Ub(!1),u instanceof yt&&u.isSubGraphExpanded&&(u.wasSubGraphExpanded=u.isSubGraphExpanded,m1(u,e,n,i)),u instanceof J)u.vd(e),n.vj(u,i);else if(u instanceof H)for(u=u.labelNodes;u.next();)u.value.vd(e)}t.isSubGraphExpanded=!1}function y1(t,e,n,i){for(var l=t.memberParts;l.next();){var u=l.value;if(u.Ub(!0),u instanceof yt&&u.wasSubGraphExpanded&&(u.wasSubGraphExpanded=!1,y1(u,e,n,i)),u instanceof J)u.vd(e),n.xj(u,i);else if(u instanceof H)for(u=u.labelNodes;u.next();)u.value.vd(e)}t.isSubGraphExpanded=!0}function mi(t){ot.call(this),this.ub=nh,this.Nn=new B(NaN,NaN,NaN,NaN),t&&Object.assign(this,t)}function H(t){lt.call(this,$.Link),this.Oa=8,this.Ue=null,this.Ve="",this.hf=this.Om=null,this.jf="",this.Xn=null,this.dk=ri,this.wm=0,this.ym=ri,this.zm=NaN,this.kj=v1,this.Sn=.5,this.rd=null,this.Jb=(new q).freeze(),this.ef=this.Eg=null,this.bl=new B,this.sa=new K,this.u=this.m=this.If=this.Mf=null,this.Yt=new P,this.Gp=this.qw=this.pw=null,this.Ys=NaN,this.aa=null,this.j=[],t&&Object.assign(this,t)}function ge(t){var i,e=t.fromNode,n=t.toNode;if(i=null!==e?null!==n?e.Sw(n):e.containingGroup:null!==n?n.containingGroup:null,(n=t.ph)!==(e=i)){null!==n&&Cm(n,t),t.ph=e,null!==e&&w0(e,t);var l=t.containingGroupChanged;if(null!==l){var u=!0,h=t.diagram;null!==h&&(u=h.$,h.$=!0),l(t,n,e),null!==h&&(h.$=u)}!t.xd||t.pw!==n&&t.qw!==n||t.ab()}if(t.isLabeledLink)for(t=t.labelNodes;t.next();)t.value.containingGroup=i}function x0(t,e){null===t.rd&&(t.rd=new Z),t.rd.add(e),t.w()}function al(t,e,n){if(0!==e||0!==n)if(0===t.pointsCount)t.defaultFromPoint&&t.defaultFromPoint.offset(e,n),t.defaultToPoint&&t.defaultToPoint.offset(e,n);else{for(var i=t.xd,l=new q,u=t.Jb.iterator;u.next();){var h=u.value;l.add(new P(h.x+e,h.y+n).freeze())}l.freeze(),u=t.Jb,t.Jb=l,h=t.diagram,isNaN(e)||isNaN(n)||null!==h&&h.animationManager.zb?t.w():(t.de.h(t.de.x+e,t.de.y+n),t.pa.h(t.pa.x+e,t.pa.y+n),zd(t)),i?Mm(t):(t.defaultFromPoint&&(t.defaultFromPoint=t.i(0)),t.defaultToPoint&&(t.defaultToPoint=t.i(t.pointsCount-1))),null!==h&&h.animationManager.zb&&(e=h.animationManager,t.ef=l,e.dl.add(t)),t.g("points",u,l)}}function Mm(t){0===t.Jb.count?t.xd=!1:(t.xd=!0,t.Gp=null,t.Ys=NaN,t.defaultFromPoint=t.i(0),t.defaultToPoint=t.i(t.pointsCount-1),T0(t,!1))}function C0(t,e){return Math.abs(e.x-t.x)>Math.abs(e.y-t.y)?(e.x=e.x>=t.x?t.x+9e9:t.x-9e9,e.y=t.y):(e.y=e.y>=t.y?t.y+9e9:t.y-9e9,e.x=t.x),e}function hp(t,e){var n=e.Hn;return null===n&&((n=new jl).port=e,n.node=e.part,e.Hn=n),Lm(n,t)}function df(t){return t===Ne||.5===t.x&&.5===t.y}function cp(t){return.5===t.x&&.5===t.y?t:ut}function M0(t){if(null===t.diagram||!t.isAvoiding||!Fd(t.diagram))return!1;var e=t.points.s,n=e.length;if(4>n)return!1;t=Sv(t.diagram,!0,t.containingGroup,null);for(var i=1;i<n-2;i++){var l=e[i],u=e[i+1];if(!t.Pj(Math.min(l.x,u.x),Math.min(l.y,u.y),Math.abs(l.x-u.x),Math.abs(l.y-u.y)))return!0}return!1}function D0(t,e,n,i,l,u,h){var f=e.lo,p=e.ko,g=ho(e,n,i),m=n,v=i;for(0===l?m+=f:90===l?v+=p:180===l?m-=f:v-=p,l!==h&&g>Rl&&ho(e,m,v)!==g-1&&(ho(e,n-f,i)===g-1?(l=180,m=n-f,v=i):ho(e,n+f,i)===g-1?(l=0,m=n+f,v=i):ho(e,n,i-p)===g-1?(l=270,m=n,v=i-p):ho(e,n,i+p)===g-1&&(l=90,m=n,v=i+p));g>Rl&&ho(e,m,v)===g-1;)n=m,i=v,0===l?m+=f:90===l?v+=p:180===l?m-=f:v-=p,--g;u?g>Rl&&(180===l||0===l?n=Math.floor(n/f)*f+f/2:(90===l||270===l)&&(i=Math.floor(i/p)*p+p/2)):(n=Math.floor(n/f)*f+f/2,i=Math.floor(i/p)*p+p/2),g>Rl&&(u=l,h=n,m=i,0===l?(u=90,m+=p):90===l?(u=180,h-=f):180===l?(u=270,m-=p):270===l&&(u=0,h+=f),ho(e,h,m)===g-1?D0(t,e,h,m,u,!1,u):(h=n,m=i,0===l?(u=270,m-=p):90===l?(u=0,h+=f):180===l?(u=90,m+=p):270===l&&(u=180,h-=f),ho(e,h,m)===g-1&&D0(t,e,h,m,u,!1,u))),t.mf(n,i)}function S0(t,e,n,i){return t=n-t,isNaN(t)||t===1/0||t===-1/0?NaN:(0>t&&(t=-t),e=i-e,isNaN(e)||e===1/0||e===-1/0?NaN:(0>e&&(e=-e),F.ca(t,0)?e:F.ca(e,0)?t:Math.sqrt(t*t+e*e)))}function Du(t,e,n,i){var l=t.pointsCount;if(2>l)return e;if(n){var u=t.i(1);if(0===(i=S0(e.x,e.y,n=u.x-i.x,u=u.y-i.y)))return e;l=2===l?.5*i:i,(t=t.computeShortLength(!0))>l&&(t=l),l=t*(u-e.y)/i,e.x+=t*(n-e.x)/i,e.y+=l}else{if(u=t.i(l-2),0===(i=S0(e.x,e.y,n=u.x-i.x,u=u.y-i.y)))return e;l=2===l?.5*i:i,(t=t.computeShortLength(!1))>l&&(t=l),l=t*(e.y-u)/i,e.x-=t*(e.x-n)/i,e.y-=l}return e}function Dm(t,e,n,i){for(var l=t.pointsCount,u=e;F.ca(e.x,u.x)&&F.ca(e.y,u.y);){if(n>=l)return l-1;u=t.i(n++)}if(!F.ca(e.x,u.x)&&!F.ca(e.y,u.y))return n-1;for(var h=u;F.ca(e.x,u.x)&&F.ca(u.x,h.x)&&(!i||(e.y>=u.y?u.y>=h.y:u.y<=h.y))||F.ca(e.y,u.y)&&F.ca(u.y,h.y)&&(!i||(e.x>=u.x?u.x>=h.x:u.x<=h.x));){if(n>=l)return l-1;h=t.i(n++)}return n-2}function nr(t,e,n,i,l,u,h){if(!h&&Ll(t)){var f=(h=t.computeJumpLength())/2,p=[],g=0;if(t.isVisible()&&(g=function qM(t,e,n,i){var l=t.diagram;if(null===l||e.C(n))return 0;for(l=l.layers;l.next();){var u=l.value;if(null!==u&&u.visible)for(var h=(u=u.Ma.s).length,f=0;f<h;f++){var p=u[f];if(p instanceof H){if(p===t)return 0<i.length&&i.sort(function(m,v){return m-v}),i.length;if(p.isVisible()&&Ll(p)){var g=p.routeBounds;g.v()&&t.routeBounds.Sc(g)&&!t.usesSamePort(p)&&null!==(g=p.path)&&g.zf()&&_0(e,n,i,p)}}}}return 0<i.length&&i.sort(function(m,v){return m-v}),i.length}(t,l,u,p)),0<g)if(F.B(l.y,u.y))if(l.x<u.x)for(var m=0;m<g;){var v=Math.max(l.x,Math.min(p[m++]-f,u.x-h));e.lineTo(v+n,u.y+i);for(var x=v+n,D=Math.min(v+h,u.x);m<g&&(v=p[m])<D+h;)m++,D=Math.min(v+f,u.x);v=u.y-h+i,D+=n;var M=u.y+i;t.curve===bl?sl(e,D,M,!1):ll(e,x,v,D,v,D,M)}else for(--g;0<=g;){for(m=Math.min(l.x,Math.max(p[g--]+f,u.x+h)),e.lineTo(m+n,u.y+i),x=m+n,v=Math.max(m-h,u.x);0<=g&&(m=p[g])>v-h;)g--,v=Math.max(m-f,u.x);m=u.y-h+i,v+=n,D=u.y+i,t.curve===bl?sl(e,v,D,!1):ll(e,x,m,v,m,v,D)}else if(F.B(l.x,u.x))if(l.y<u.y)for(m=0;m<g;){for(v=Math.max(l.y,Math.min(p[m++]-f,u.y-h)),e.lineTo(u.x+n,v+i),x=v+i,v=Math.min(v+h,u.y);m<g&&(D=p[m])<v+h;)m++,v=Math.min(D+f,u.y);D=u.x-h+n,M=u.x+n,v+=i,t.curve===bl?sl(e,M,v,!1):ll(e,D,x,D,v,M,v)}else for(--g;0<=g;){for(m=Math.min(l.y,Math.max(p[g--]+f,u.y+h)),e.lineTo(u.x+n,m+i),x=m+i,m=Math.max(m-h,u.y);0<=g&&(v=p[g])>m-h;)g--,m=Math.max(v-f,u.y);v=u.x-h+n,D=u.x+n,m+=i,t.curve===bl?sl(e,D,m,!1):ll(e,v,x,v,m,D,m)}}e.lineTo(u.x+n,u.y+i)}function _0(t,e,n,i){for(var l=F.B(t.y,e.y),u=i.pointsCount,h=i.i(0),f=P.alloc(),p=1;p<u;p++){var g=i.i(p);if(p<u-1){var m=i.i(p+1);if(h.y===g.y&&g.y===m.y){if(g.x>h.x&&m.x>=g.x||g.x<h.x&&m.x<=g.x)continue}else if(h.x===g.x&&g.x===m.x&&(g.y>h.y&&m.y>=g.y||g.y<h.y&&m.y<=g.y))continue}t:{var v=t.y,x=e.x,D=e.y,M=h.x;h=h.y;var T=g.x,N=g.y;if(F.B(m=t.x,x)){if(!F.B(v,D)&&F.B(h,N)&&Math.min(v,D)<h&&Math.max(v,D)>h&&Math.min(M,T)<m&&Math.max(M,T)>m&&!F.B(M,T)){f.x=m,f.y=h,m=!0;break t}}else if(F.B(v,D)&&F.B(M,T)&&Math.min(m,x)<M&&Math.max(m,x)>M&&Math.min(h,N)<v&&Math.max(h,N)>v&&!F.B(h,N)){f.x=M,f.y=v,m=!0;break t}f.x=0,f.y=0,m=!1}m&&n.push(l?f.x:f.y),h=g}P.free(f)}function Ll(t){return(t=t.curve)===Th||t===bl}function T0(t,e){(e||Ll(t))&&(null===(e=t.diagram)||e.animationManager.isTicking||e.th.contains(t)||0===t.bl.width&&0===t.bl.height||e.th.add(t,t.bl.copy()))}function tD(t,e,n){if(null!==e&&e.Zl&&e.xd&&Ll(e)){var i=e.routeBounds;i.v()&&(t.routeBounds.Sc(i)||n.Sc(i))&&(t.usesSamePort(e)||e.mc(!1))}}function Sm(t){var e=t.Ue;if(null!==e){var n=t.hf;if(null!==n&&isNaN(t.curviness)){for(var i=t.Ve,l=t.jf,u=t=null,h=e.jb.s,f=h.length,p=0;p<f;p++){var g=h[p];(g.Ue===e&&g.Ve===i&&g.hf===n&&g.jf===l||g.Ue===n&&g.Ve===l&&g.hf===e&&g.jf===i)&&(null===u?u=g:(null===t&&(t=[]).push(u),t.push(g)))}if(null!==t){for(null===(u=g0(e,n,i,l))&&(u1(e,u=new ct(e,i,n,l)),u1(n,u)),u.links=t,e=0;e<t.length;e++)t[e].If=u;u.Al()}}}}function _m(t){var e=t.If;null!==e&&isNaN(t.curviness)&&(t.If=null,0<=(t=e.links.indexOf(t))&&(Ze(e.links,t),e.Al()))}J.className="Node",J.SpreadingNone=g1,J.SpreadingEvenly=xm,J.SpreadingPacked=v0,Ht(yt,J),yt.prototype.cloneProtected=function(t){J.prototype.cloneProtected.call(this,t),this.U=-32769&this.U;var e=t.vl(function(n){return n instanceof mi});t.Xa=e instanceof mi?e:null,null!==this.Kc?(t.Kc=this.Kc.copy(),t.Kc.group=t):(null!==t.Kc&&(t.Kc.group=null),t.Kc=null),null!==this.ib&&(t.ib=this.ib.copy())},(_=yt.prototype).qf=function(t){J.prototype.qf.call(this,t);var e=t.Jj();for(t=t.memberParts;t.next();){var n=t.value;if(n.w(),n.D(8),n.zj(),n instanceof J)n.vd(e);else if(n instanceof H)for(n=n.labelNodes;n.next();)n.value.vd(e)}},_.$j=function(t,e,n,i,l,u,h){if(t===nn&&"elements"===e){if(l instanceof mi)null===this.Xa?this.Xa=l:this.Xa!==l&&Y("Cannot insert a second Placeholder into the visual tree of a Group.");else if(l instanceof $){var f=l.vl(function(p){return p instanceof mi});f instanceof mi&&(null===this.Xa?this.Xa=f:this.Xa!==f&&Y("Cannot insert a second Placeholder into the visual tree of a Group."))}}else t===xe&&"elements"===e&&null!==this.Xa&&(i===this.Xa||i instanceof $&&this.Xa.jg(i))&&(this.Xa=null);J.prototype.$j.call(this,t,e,n,i,l,u,h)},_.Fl=function(t,e){J.prototype.Fl.call(this,t,e),this.isClipping&&this.type!==$.Spot&&this.isSubGraphExpanded&&((t=this.resizeObject)instanceof $&&(t=t.vb()),null===this.ib&&(this.ib=new B),t.gi(this.ib),t instanceof wt&&this.ib.vc(-t.strokeWidth,-t.strokeWidth))},_.Vg=function(t,e,n,i){this.af=this.Xa,J.prototype.Vg.call(this,t,e,n,i)},_.Za=function(){var t=this;t.isSubGraphExpanded&&this.memberParts.each(function(e){!t.computesBoundsIncludingLinks&&e instanceof H||e.Za()}),J.prototype.Za.call(this)},_.mi=function(){if(!J.prototype.mi.call(this))return!1;for(var t=this.memberParts;t.next();){var e=t.value;if(e instanceof J){if(e.isVisible()&&Xn(e))return!1}else if(e instanceof H&&e.isVisible()&&Xn(e)&&e.fromNode!==this&&e.toNode!==this)return!1}return!0},_.Fj=function(){if(0<this.on.count){var t=this.diagram;if(null!==t)for(var e=this.on.copy().iterator;e.next();)t.remove(e.value)}J.prototype.Fj.call(this)},yt.prototype.canAddMembers=function(t){var e=this.diagram;if(null===e)return!1;for(e=e.commandHandler,t=Hd(t).iterator;t.next();)if(!e.isValidMember(this,t.value))return!1;return!0},yt.prototype.addMembers=function(t,e){var n=this.diagram;if(null===n)return!1;n=n.commandHandler;var i=!0;for(t=Hd(t).iterator;t.next();){var l=t.value;!e||n.isValidMember(this,l)?l.containingGroup=this:i=!1}return i},yt.prototype.canUngroup=function(){if(!this.ungroupable)return!1;var t=this.layer;return!(null===t||!t.allowUngroup||null!==(t=t.diagram)&&!t.allowUngroup)},(_=yt.prototype).vd=function(t){var e=0!=(65536&this.U);if(J.prototype.vd.call(this,t),!e)for(0==(65536&this.U)&&(this.U=65536^this.U),e=this.vu();e.next();){var n=e.value;if(void 0===t||!t.contains(n)){var i=n.fromNode;(null!==i&&i!==this&&i.Md(this)&&!i.isVisible()||null!==(i=n.toNode)&&i!==this&&i.Md(this)&&!i.isVisible())&&(er(n.fromPort),er(n.toPort),n.ab())}}},_.vu=function(){var t=null!==this.diagram&&this.diagram.tw;if(t&&null!==this.Dp)return this.Dp.iterator;var e=this.Jj();e.add(this);for(var n=new Z,i=e.iterator;i.next();){var l=i.value;if(l instanceof J)for(l=l.linksConnected;l.next();){var u=l.value;e.contains(u)||n.add(u)}}return t&&(this.Dp=n),n.iterator},_.Ry=function(){var t=this.Jj();t.add(this);for(var e=new Z,n=t.iterator;n.next();){var i=n.value;if(i instanceof J)for(i=i.linksConnected;i.next();){var l=i.value,u=l.fromNode;null===u||t.contains(u)&&u!==this||e.add(u),null===(l=l.toNode)||t.contains(l)&&l!==this||e.add(l)}}return e.iterator},_.Qy=function(){var e=new Z;return function t(n,i){null!==n&&(i.add(n),t(n.containingGroup,i))}(this,e),e},_.Jj=function(){var t=new Z;return bs(t,this,!0,0,!0),t.remove(this),t},_.Ub=function(t){J.prototype.Ub.call(this,t);for(var e=this.memberParts;e.next();)e.value.Ub(t)},yt.prototype.collapseSubGraph=function(){var t=this.diagram;null===t||t.Ie||(t.Ie=!0,m1(this,this.Jj(),t,this),t.Ie=!1)},yt.prototype.expandSubGraph=function(){var t=this.diagram;null===t||t.Ie||(t.Ie=!0,y1(this,this.Jj(),t,this),t.Ie=!1)},yt.prototype.move=function(t,e){void 0===e&&(e=!1);var n=e?this.location:this.position,i=n.x;n=n.y;var l=t.x,u=t.y;if(!(i===l||isNaN(i)&&isNaN(l))||!(n===u||isNaN(n)&&isNaN(u))){for(i=l-(isNaN(i)?0:i),n=u-(isNaN(n)?0:n),u=P.alloc(),J.prototype.move.call(this,t,e),t=new Z,e=this.Jj().iterator;e.next();)(l=e.value)instanceof H&&(l.suspendsRouting&&t.add(l),l.xd||l.fromNode!==this&&l.toNode!==this)&&(l.suspendsRouting=!0);for(e.reset();e.next();)if(!((l=e.value).eh()||l instanceof J&&l.isLinkLabel)){var h=l.position,f=l.location;h.v()?(u.x=h.x+i,u.y=h.y+n,l.position=u):f.v()&&(u.x=f.x+i,u.y=f.y+n,l.location=u)}for(e.reset();e.next();)(l=e.value)instanceof H&&(l.suspendsRouting=t.contains(l),l.xd||l.fromNode!==this&&l.toNode!==this)&&(u.x=(h=l.position).x+i,u.y=h.y+n,u.v()?l.move(u):l.ab(),M0(l)&&l.ab());P.free(u)}},Mt.Object.defineProperties(yt.prototype,{placeholder:{get:function(){return this.Xa}},computesBoundsAfterDrag:{get:function(){return 0!=(2048&this.U)},set:function(t){var e=0!=(2048&this.U);e!==t&&(this.U^=2048,this.g("computesBoundsAfterDrag",e,t))}},computesBoundsIncludingLinks:{get:function(){return 0!=(4096&this.U)},set:function(t){var e=0!=(4096&this.U);e!==t&&(this.U^=4096,this.g("computesBoundsIncludingLinks",e,t))}},computesBoundsIncludingLocation:{get:function(){return 0!=(8192&this.U)},set:function(t){var e=0!=(8192&this.U);e!==t&&(this.U^=8192,this.g("computesBoundsIncludingLocation",e,t))}},handlesDragDropForMembers:{get:function(){return 0!=(16384&this.U)},set:function(t){var e=0!=(16384&this.U);e!==t&&(this.U^=16384,this.g("handlesDragDropForMembers",e,t))}},memberParts:{get:function(){return this.on.iterator}},layout:{get:function(){return this.Kc},set:function(t){var e=this.Kc;if(e!==t){null!==t&&null!==t.diagram&&t.diagram.layout===t&&Y("A layout cannot be both the Diagram.layout and a Group.layout: "+t),null!==e&&(e.diagram=null,e.group=null),this.Kc=t;var n=this.diagram;null!==t&&(t.diagram=n,t.group=this),null!==n&&(n.mh=!0),this.g("layout",e,t),null!==n&&n.Mb()}}},memberAdded:{get:function(){return null!==this.ya?this.ya.lq:null},set:function(t){var e=this.memberAdded;e!==t&&(Oo(this),this.ya.lq=t,this.g("memberAdded",e,t))}},memberRemoved:{get:function(){return null!==this.ya?this.ya.mq:null},set:function(t){var e=this.memberRemoved;e!==t&&(Oo(this),this.ya.mq=t,this.g("memberRemoved",e,t))}},memberValidation:{get:function(){return null!==this.ya?this.ya.dj:null},set:function(t){var e=this.memberValidation;e!==t&&(Oo(this),this.ya.dj=t,this.g("memberValidation",e,t))}},ungroupable:{get:function(){return 0!=(256&this.U)},set:function(t){var e=0!=(256&this.U);e!==t&&(this.U^=256,this.g("ungroupable",e,t))}},isSubGraphExpanded:{get:function(){return 0!=(512&this.U)},set:function(t){var e=0!=(512&this.U);if(e!==t){this.U^=512;var n=this.diagram;if(this.g("isSubGraphExpanded",e,t),null!==(e=this.subGraphExpandedChanged)){var i=!0;null!==n&&(i=n.$,n.$=!0),e(this),null!==n&&(n.$=i)}null!==n&&n.undoManager.isUndoingRedoing?(null!==this.Xa&&this.Xa.w(),this.memberParts.each(function(l){l.updateAdornments()})):t?this.expandSubGraph():this.collapseSubGraph()}}},wasSubGraphExpanded:{get:function(){return 0!=(1024&this.U)},set:function(t){var e=0!=(1024&this.U);e!==t&&(this.U^=1024,this.g("wasSubGraphExpanded",e,t))}},subGraphExpandedChanged:{get:function(){return null!==this.ya?this.ya.gr:null},set:function(t){var e=this.subGraphExpandedChanged;e!==t&&(Oo(this),this.ya.gr=t,this.g("subGraphExpandedChanged",e,t))}},gh:{get:function(){return 0!=(32768&this.U)},set:function(t){0!=(32768&this.U)!==t&&(this.U^=32768)}}}),yt.prototype.expandSubGraph=yt.prototype.expandSubGraph,yt.prototype.collapseSubGraph=yt.prototype.collapseSubGraph,yt.prototype.findSubGraphParts=yt.prototype.Jj,yt.prototype.findContainingGroupChain=yt.prototype.Qy,yt.prototype.findExternalNodesConnected=yt.prototype.Ry,yt.prototype.findExternalLinksConnected=yt.prototype.vu,yt.prototype.ensureBounds=yt.prototype.Za,yt.className="Group",Ht(mi,ot),mi.prototype.cloneProtected=function(t){ot.prototype.cloneProtected.call(this,t),t.ub=this.ub.J(),t.Nn=this.Nn.copy()},mi.prototype.Xg=function(t){if(null===this.background&&null===this.areaBackground)return!1;var e=this.naturalBounds;return ur(0,0,e.width,e.height,t.x,t.y)},mi.prototype.El=function(){var t=this.part;if(null!==t&&(t instanceof yt||t instanceof Pt)||Y("Placeholder is not inside a Group or Adornment."),t instanceof yt){var e=this.computeBorder(this.Nn),n=this.minSize,i=this.bc;for(xl(i,(isFinite(n.width)?Math.max(n.width,e.width):e.width)||0,(isFinite(n.height)?Math.max(n.height,e.height):e.height)||0),this.ve(0,0,i.width,i.height),i=t.memberParts,n=!1;i.next();)if(i.value.isVisible()){n=!0;break}i=t.diagram,!n||null===i||i.animationManager.Ju(t)||isNaN(e.x)||isNaN(e.y)||((n=P.alloc()).oi(e,t.locationSpot),n.C(t.location)||(t.location=n),P.free(n))}else{e=this.bc,i=(n=this.ub).left+n.right;var l=n.top+n.bottom,u=t.adornedObject;t.angle=u.fi();var h=0;u instanceof wt&&(h=u.strokeWidth);var f=u.uf(),p=u.naturalBounds,g=(p.width+h)*f;h=(p.height+h)*f,t.type!==$.Link&&(f=u.ia("Selection"===t.category?Oe:t.locationSpot,P.alloc()),t.location=f,P.free(f)),isNaN(g)||isNaN(h)?(t=u.ia(Oe,P.alloc()),(g=B.allocAt(t.x,t.y,0,0)).Me(u.ia(cr,t)),g.Me(u.ia(hr,t)),g.Me(u.ia(gn,t)),xl(e,g.width+i||0,g.height+l||0),this.ve(-n.left,-n.top,e.width,e.height),P.free(t),B.free(g)):(xl(e,g+i||0,h+l||0),this.ve(-n.left,-n.top,e.width,e.height))}},mi.prototype.Vg=function(t,e,n,i){this.actualBounds.h(t,e,n,i)},mi.prototype.computeBorder=function(t){var e=this.part,n=e.diagram;if(null!==n&&e instanceof yt&&!e.layer.isTemporary&&e.computesBoundsAfterDrag&&this.Nn.v()){var i=n.toolManager.findTool("Dragging");if(i===n.currentTool&&null!==(n=i.computeBorder(e,this.Nn,t)))return n}n=B.alloc(),i=this.computeMemberBounds(n);var l=this.ub;return e instanceof yt&&!e.isSubGraphExpanded?t.h(i.x-l.left,i.y-l.top,0,0):t.h(i.x-l.left,i.y-l.top,Math.max(i.width+l.left+l.right,0),Math.max(i.height+l.top+l.bottom,0)),B.free(n),e instanceof yt&&e.computesBoundsIncludingLocation&&e.location.v()&&t.Me(e.location),t},mi.prototype.computeMemberBounds=function(t){if(!(this.part instanceof yt))return t.h(0,0,0,0),t;for(var e=this.part,n=1/0,i=1/0,l=-1/0,u=-1/0,h=e.memberParts;h.next();){var f=h.value;if(f.isVisible()){if(f instanceof H&&(!e.computesBoundsIncludingLinks||qs(f)||f.fromNode===e||f.toNode===e))continue;(f=f.actualBounds).left<n&&(n=f.left),f.top<i&&(i=f.top),f.right>l&&(l=f.right),f.bottom>u&&(u=f.bottom)}}return isFinite(n)&&isFinite(i)?t.h(n,i,l-n,u-i):t.h((e=e.location).x,e.y,0,0),t},Mt.Object.defineProperties(mi.prototype,{padding:{get:function(){return this.ub},set:function(t){"number"==typeof t&&(t=new Bt(t));var e=this.ub;e.C(t)||(this.ub=t=t.J(),this.g("padding",e,t),this.w())}}}),mi.className="Placeholder",Ht(H,lt),H.prototype.cloneProtected=function(t){lt.prototype.cloneProtected.call(this,t),t.Oa=-113&this.Oa,t.Ve=this.Ve,t.Om=this.Om,t.jf=this.jf,t.Xn=this.Xn,t.dk=this.dk,t.wm=this.wm,t.ym=this.ym,t.zm=this.zm,t.kj=this.kj,t.Sn=this.Sn,null!==this.aa&&(t.aa=this.aa.copy())},(_=H.prototype).qf=function(t){lt.prototype.qf.call(this,t),this.Ve=t.Ve,this.jf=t.jf,t.Eg=null,t.ab(),t.If=this.If;var e=t.fromPort;null!==e&&er(e),null!==(t=t.toPort)&&er(t)},_.ob=function(t){t.classType===H?2==(2&t.value)?this.routing=t:t===Ni||t===bl||t===Th?this.curve=t:t===fp||t===Tm||t===Em?this.adjusting=t:t!==v1&&t!==ri&&Y("Unknown Link enum value for a Link property: "+t):lt.prototype.ob.call(this,t)},_.Rc=function(){null===this.aa&&(this.aa=new jg)},_.mi=function(){var t=this.fromNode;if(null!==t){var e=t.findVisibleNode();if(null!==e&&(t=e),Xn(t)||Da(t))return!1}return!(null!==(t=this.toNode)&&(e=t.findVisibleNode(),null!==e&&(t=e),Xn(t)||Da(t)))},_.fv=function(){return!1},_.ns=function(){},_.Tc=function(){return!1},H.prototype.computeAngle=function(t,e,n){return H.computeAngle(e,n)},H.computeAngle=function(t,e){switch(t){default:case ri:t=0;break;case dp:t=e;break;case pp:t=e+90;break;case gf:t=e-90;break;case E0:t=e+180;break;case gp:90<(t=F.Eo(e))&&270>t&&(t-=180);break;case mf:90<(t=F.Eo(e+90))&&270>t&&(t-=180);break;case Eh:90<(t=F.Eo(e-90))&&270>t&&(t-=180);break;case I0:if(45<(t=F.Eo(e))&&135>t||225<t&&315>t)return 0;90<t&&270>t&&(t-=180)}return F.Eo(t)},(_=H.prototype).dh=function(){var t=this.containingGroup;null!==t&&this.fromNode!==t&&this.toNode!==t&&t.computesBoundsIncludingLinks&&lt.prototype.dh.call(this)},_.wo=function(t){var e=this.fromNode;return t===e?this.toNode:e},_.jz=function(t){var e=this.fromPort;return t===e?this.toPort:e},_.yo=function(t){if(lt.prototype.yo.call(this,t),Ll(this)&&this.Ao(this.actualBounds),!t){var e=null;null!==(t=this.Ue)&&ff(t,this,e=this.fromPort);var n=this.hf;if(null!==n){var i=this.toPort;n===t&&i===e||ff(n,this,i)}Sm(this)}},_.zo=function(t){if(lt.prototype.zo.call(this,t),Ll(this)&&this.Ao(this.actualBounds),!t){var e=null;null!==(t=this.Ue)&&up(t,this,e=this.fromPort);var n=this.hf;if(null!==n){var i=this.toPort;n===t&&i===e||up(n,this,i)}_m(this)}},_.Fj=function(){if(this.xd=!0,null!==this.rd){var t=this.diagram;if(null!==t)for(var e=this.rd.copy().iterator;e.next();)t.remove(e.value)}null!==this.data&&null!==(t=this.diagram)&&t.partManager.removeDataForLink(this)},H.prototype.updateRelationshipsFromData=function(){if(null!==this.data){var t=this.diagram;null!==t&&t.partManager.updateRelationshipsFromData(this)}},H.prototype.move=function(t,e){var n=e?this.location:this.position,i=n.x;isNaN(i)&&(i=0);var l=n.y;for(isNaN(l)&&(l=0),i=t.x-i,l=t.y-l,!0===e?lt.prototype.move.call(this,t,!1):(t=P.allocAt(n.x+i,n.y+l),lt.prototype.move.call(this,t,!1),P.free(t)),al(this,i,l),t=this.labelNodes;t.next();)(e=t.value).moveTo((n=e.position).x+i,n.y+l)},H.prototype.canRelinkFrom=function(){if(!this.relinkableFrom)return!1;var t=this.layer;return null===t||!!t.allowRelink&&!(null!==(t=t.diagram)&&!t.allowRelink)},H.prototype.canRelinkTo=function(){if(!this.relinkableTo)return!1;var t=this.layer;return null===t||!!t.allowRelink&&!(null!==(t=t.diagram)&&!t.allowRelink)},H.prototype.computeMidPoint=function(t){var e=this.pointsCount;if(0===e)return t.assign(dd),t;if(1===e)return t.assign(this.i(0)),t;if(2===e){var n=this.i(0),i=this.i(1);return t.h((n.x+i.x)/2,(n.y+i.y)/2),t}if(this.isOrthogonal&&(15<=this.computeCorner()||this.computeCurve()===Ni))return this.sa.Bu(.5,t),t.add(this.i(0)),n=this.sa.figures.first(),t.offset(-n.startX,-n.startY),t;if(this.computeCurve()===Ni){if(3===e){n=this.i(0),i=this.i(1);var l=this.i(2);return F.Gw(n.x,n.y,i.x,i.y,i.x,i.y,l.x,l.y,t),t}if(n=3*((i=(e-1)/3|0)/2|0),i%2==1){i=this.i(n),l=this.i(n+1);var u=this.i(n+2);n=this.i(n+3),F.Gw(i.x,i.y,l.x,l.y,u.x,u.y,n.x,n.y,t)}else t.assign(this.i(n));return t}var h=this.flattenedLengths;for(n=this.flattenedTotalLength,l=u=i=0;i<n/2&&u<e&&!(i+(l=h[u])>n/2);)i+=l,u++;return e=this.i(u),u=this.i(u+1),1>Math.abs(e.x-u.x)?t.h(e.x,e.y>u.y?e.y-(n/2-i):e.y+(n/2-i)):1>Math.abs(e.y-u.y)?t.h(e.x>u.x?e.x-(n/2-i):e.x+(n/2-i),e.y):t.h(e.x+(n=(n/2-i)/l)*(u.x-e.x),e.y+n*(u.y-e.y)),t},H.prototype.computeMidAngle=function(){var t=this.pointsCount;if(2>t)return NaN;if(2===t)return this.i(0).Ya(this.i(1));if(this.isOrthogonal&&(15<=this.computeCorner()||this.computeCurve()===Ni))return this.sa.Yw(.5);if(this.computeCurve()===Ni&&4<=t){var e=(t-1)/3|0,n=3*(e/2|0);if(e%2==1){n=Math.floor(n),t=this.i(n),e=this.i(n+1);var i=this.i(n+2);return n=this.i(n+3),F.ty(t.x,t.y,e.x,e.y,i.x,i.y,n.x,n.y)}if(0<n&&n+1<t)return this.i(n-1).Ya(this.i(n+1))}e=this.flattenedLengths,i=this.flattenedTotalLength;var u,l=0;for(n=0;l<i/2&&n<t&&!(l+(u=e[n])>i/2);)l+=u,n++;if(e=this.i(n),i=this.i(n+1),1>Math.abs(e.x-i.x)&&1>Math.abs(e.y-i.y)){if(0<n&&n+2<t)return this.i(n-1).Ya(this.i(n+2))}else{if(1>Math.abs(e.x-i.x))return e.y>i.y?270:90;if(1>Math.abs(e.y-i.y))return e.x>i.x?180:0}return e.Ya(i)},(_=H.prototype).i=function(t){return this.Jb.s[t]},_.Wc=function(t,e){this.Jb.Vc(t,e)},_.M=function(t,e,n){this.Jb.Vc(t,new P(e,n))},_.sz=function(t,e){this.Jb.Cb(t,e)},_.l=function(t,e,n){this.Jb.Cb(t,new P(e,n))},_.fe=function(t){this.Jb.add(t)},_.mf=function(t,e){this.Jb.add(new P(t,e))},_.Yu=function(t){this.Jb.mb(t)},_.Aj=function(){this.Jb.clear()},_.jh=function(){null===this.Eg&&(this.Eg=this.Jb,this.Jb=this.Jb.copy())},_.pf=function(){if(null!==this.Eg){for(var t=this.Eg,e=this.Jb,n=1/0,i=1/0,l=t.s,u=l.length,h=0;h<u;h++){var f=l[h];n=Math.min(f.x,n),i=Math.min(f.y,i)}f=h=1/0;for(var p=e.s,g=p.length,m=0;m<g;m++){var v=p[m];h=Math.min(v.x,h),f=Math.min(v.y,f),v.freeze()}if(e.freeze(),g===u){for(u=0;u<g;u++)if((m=l[u]).x-n!=(v=p[u]).x-h||m.y-i!=v.y-f){this.mc(!0);break}}else this.mc(!0);this.Eg=null,null!==(n=this.diagram)&&n.animationManager.zb&&(n=n.animationManager,this.ef=e,n.dl.add(this)),Mm(this),this.g("points",t,e)}},_.$u=function(){null!==this.Eg&&(this.Jb=this.Eg,this.Eg=null)},_.ab=function(){if(!this.suspendsRouting){var t=this.diagram;if(t){if(t.Zr.contains(this)||t.undoManager.isUndoingRedoing||(t=t.animationManager).isTicking&&!t.isAnimating)return;null!==this.ef&&!t.isTicking&&t.isAnimating&&(this.ef=null)}null!==(t=this.path)&&(this.xd=!1,this.w(),t.w())}},_.mg=function(){if(!this.xd&&!this.computingPoints){var t=!0;try{this.computingPoints=!0,this.jh(),t=this.computePoints()}catch{this.computingPoints=!1,this.$u()}finally{this.computingPoints=!1,t?this.pf():this.$u()}}},H.prototype.computePoints=function(){if(null===this.diagram)return!1;var t=this.fromNode,e=null;if(null===t?(_h||((_h=new J).desiredSize=th,_h.Za()),this.defaultFromPoint&&(_h.location=this.defaultFromPoint,_h.Za(),e=t=_h)):e=this.fromPort,null!==e&&!t.isVisible()){var n=t.findVisibleNode();null!==n&&n!==t?(t=n,e=n.port):t=n}if(this.pw=t,null===t||!t.location.v())return!1;for(;!(null===e||e.actualBounds.v()&&e.zf());)e=e.panel;if(null===e)return!1;var i=this.toNode,l=null;if(null===i?(Su||((Su=new J).desiredSize=th,Su.Za()),this.defaultToPoint&&(Su.location=this.defaultToPoint,Su.Za(),l=i=Su)):l=this.toPort,null===l||i.isVisible()||(null!==(n=i.findVisibleNode())&&n!==i?(i=n,l=n.port):i=n),this.qw=i,null===i||!i.location.v())return!1;for(;!(null===l||l.actualBounds.v()&&l.zf());)l=l.panel;if(null===l)return!1;var u=this.pointsCount,h=this.computeSpot(!0,e);n=this.computeSpot(!1,l);var f=df(h),p=df(n),g=e===l&&null!==e,m=this.isOrthogonal,v=this.curve===Ni;this.Mf=!(!g||m)&&(v=!0);var x=this.computeAdjusting()===ri||g;if(!m&&!g&&f&&p){if(f=!1,!x&&3<=u&&(x=this.getLinkPoint(t,e,h,!0,!1,i,l),p=this.getLinkPoint(i,l,n,!1,!1,t,e),f=this.adjustPoints(0,x,u-1,p))&&(x=this.getLinkPoint(t,e,h,!0,!1,i,l),p=this.getLinkPoint(i,l,n,!1,!1,t,e),this.adjustPoints(0,x,u-1,p)),!f)if(this.Aj(),v){u=this.getLinkPoint(t,e,h,!0,!1,i,l),f=(x=this.getLinkPoint(i,l,n,!1,!1,t,e)).x-u.x,p=x.y-u.y,g=this.computeCurviness(),v=m=0;var D=u.x+f/3,M=u.y+p/3,T=D,N=M;F.B(p,0)?N=0<f?N-g:N+g:(m=-f/p,v=Math.sqrt(g*g/(m*m+1)),0>g&&(v=-v),N=m*((T=(0>p?-1:1)*v+D)-D)+M);var I=D=u.x+2*f/3,k=M=u.y+2*p/3;k=F.B(p,0)?0<f?k-g:k+g:m*((I=(0>p?-1:1)*v+D)-D)+M,this.Aj(),this.fe(u),this.mf(T,N),this.mf(I,k),this.fe(x),this.Wc(0,this.getLinkPoint(t,e,h,!0,!1,i,l)),this.Wc(3,this.getLinkPoint(i,l,n,!1,!1,t,e))}else i=this.getLinkPoint(t,e,h,!0,!1,u=i,x=l),l=this.getLinkPoint(u,x,n,!1,!1,t,e),this.hasCurviness()?(x=l.x-i.x,n=l.y-i.y,h=this.computeCurviness(),u=t=i.x+x/2,f=e=i.y+n/2,F.B(n,0)?f=0<x?f-h:f+h:(x=-x/n,u=Math.sqrt(h*h/(x*x+1)),0>h&&(u=-u),f=x*((u=(0>n?-1:1)*u+t)-t)+e),this.fe(i),this.mf(u,f),this.fe(l)):(this.fe(i),this.fe(l),f=B.alloc(),e.gi(f),p=f.ba(l),x.gi(f),g=f.ba(i),(p||g)&&(h=e.ia(cp(h),new P),this.Wc(0,this.getLinkPointFromPoint(t,e,h,l,!0,h)),n=x.ia(cp(n),new P),this.Wc(1,this.getLinkPointFromPoint(u,x,n,i,!1,n))),B.free(f))}else{v=this.isAvoiding,x&&(m&&v||g)&&this.Aj();var O=g?this.computeCurviness():0;v=this.getLinkPoint(t,e,h,!0,m,i,l),D=T=M=0,(m||!f||g)&&(N=this.computeEndSegmentLength(t,e,h,!0),D=this.getLinkDirection(t,e,v,h,!0,m,i,l),g&&(f||h.C(n)||!m&&h.x+n.x===1&&h.y+n.y===1)&&(D-=m?90:30,0>O&&(D-=180)),0>D?D+=360:360<=D&&(D-=360),g&&(N+=Math.abs(O)*(m?1:2)),0===D?M=N:90===D?T=N:180===D?M=-N:270===D?T=-N:(M=N*Math.cos(D*Math.PI/180),T=N*Math.sin(D*Math.PI/180)),h.Fc()&&g&&(N=e.ia(ut,P.alloc()),I=P.allocAt(N.x+1e3*M,N.y+1e3*T),this.getLinkPointFromPoint(t,e,N,I,!0,v),P.free(N),P.free(I))),N=this.getLinkPoint(i,l,n,!1,m,t,e);var L=k=I=0;if(m||!p||g){var b=this.computeEndSegmentLength(i,l,n,!1);L=this.getLinkDirection(i,l,N,n,!1,m,t,e),g&&(p||h.C(n)||!m&&h.x+n.x===1&&h.y+n.y===1)&&(L+=m?0:30,0>O&&(L+=180)),0>L?L+=360:360<=L&&(L-=360),g&&(b+=Math.abs(O)*(m?1:2)),0===L?I=b:90===L?k=b:180===L?I=-b:270===L?k=-b:(I=b*Math.cos(L*Math.PI/180),k=b*Math.sin(L*Math.PI/180)),n.Fc()&&g&&(n=l.ia(ut,P.alloc()),h=P.allocAt(n.x+1e3*I,n.y+1e3*k),this.getLinkPointFromPoint(i,l,n,h,!1,N),P.free(n),P.free(h))}n=v,(m||!f||g)&&(n=new P(v.x+M,v.y+T)),h=N,(m||!p||g)&&(h=new P(N.x+I,N.y+k)),!x&&!m&&f&&3<u&&this.adjustPoints(0,v,u-2,h)?this.Wc(u-1,N):!x&&!m&&p&&3<u&&this.adjustPoints(1,n,u-1,N)?this.Wc(0,v):!x&&(m?6<=u:4<u)&&this.adjustPoints(1,n,u-2,h)?(this.Wc(0,v),this.Wc(u-1,N)):(this.Aj(),this.fe(v),(m||!f||g)&&this.fe(n),m&&this.addOrthoPoints(n,D,h,L,t,i),(m||!p||g)&&this.fe(h),this.fe(N))}return!0},H.prototype.getLinkPointFromPoint=function(t,e,n,i,l,u){if(void 0===u&&(u=new P),null===t||null===e)return u.assign(n),u;if(t.isVisible()||null!==(l=t.findVisibleNode())&&l!==t&&(e=l.port),t=null,null===(l=e.panel)||l.ke()||(l=l.panel),null===l){l=i.x,i=i.y;var h=n.x;n=n.y}else{var f=-(t=l.ge).m12*(l=1/(t.m11*t.m22-t.m12*t.m21)),p=-t.m21*l,g=t.m11*l,m=l*(t.m21*t.dy-t.m22*t.dx),v=l*(t.m12*t.dx-t.m11*t.dy);l=i.x*(h=t.m22*l)+i.y*p+m,i=i.x*f+i.y*g+v,h=n.x*h+n.y*p+m,n=n.x*f+n.y*g+v}return e.Kj(l,i,h,n,u),null!==t&&u.transform(t),u},H.prototype.getLinkPoint=function(t,e,n,i,l,u,h,f){if(void 0===f&&(f=new P),n.pb()&&!df(n))return e.ia(n,f),f;if(n.Uc()){var p=hp(this,e);if(null!==p){if(f.assign(p.Co),l&&this.routing===w1){var g=hp(this,h);if(null!==g&&p.tl<g.tl){p=P.alloc(),g=P.alloc();var m=new B(e.ia(Oe,p),e.ia(cr,g)),v=this.computeSpot(!i,h);t=this.getLinkPoint(u,h,v,!i,l,t,e,g),(n.xf(Ms)||n.xf(En))&&t.y>=m.y&&t.y<=m.y+m.height?f.y=t.y:(n.xf(ii)||n.xf(Cl))&&t.x>=m.x&&t.x<=m.x+m.width&&(f.x=t.x),P.free(p),P.free(g)}}return f}}return n=e.ia(cp(n),P.alloc()),this.pointsCount>(l?6:2)?(h=this.i(i?1:this.pointsCount-2),l&&(h=C0(n,h.copy()))):(p=this.computeSpot(!i,h),u=P.alloc(),h=h.ia(cp(p),u),l&&(h=C0(n,h)),P.free(u)),this.getLinkPointFromPoint(t,e,n,h,i,f),P.free(n),f},H.prototype.getLinkDirection=function(t,e,n,i,l,u,h,f){t:if(i.pb())var p=i.x>i.y?i.x>1-i.y?0:i.x<1-i.y?270:315:i.x<i.y?i.x>1-i.y?90:i.x<1-i.y?180:135:.5>i.x?225:.5<i.x?45:0;else{if(i.Uc()&&null!==(p=hp(this,e)))switch(p.Gc){case 1:p=270;break t;case 2:p=180;break t;default:case 4:p=0;break t;case 8:p=90;break t}p=e.ia(ut,P.alloc()),this.pointsCount>(u?6:2)?(f=this.i(l?1:this.pointsCount-2),f=u?C0(p,f.copy()):n):(n=P.alloc(),f=f.ia(ut,n),P.free(n)),n=Math.abs(f.x-p.x)>Math.abs(f.y-p.y)?f.x>=p.x?0:180:f.y>=p.y?90:270,P.free(p),p=n}return i.Fc()&&h.Md(t)&&360<=(p+=180)&&(p-=360),df(i)||0===(t=e.fi())||(45<=t&&135>t?p+=90:135<=t&&225>t?p+=180:225<=t&&315>t&&(p+=270),360<=p&&(p-=360)),p},H.prototype.computeEndSegmentLength=function(t,e,n,i){return null!==e&&n.Uc()&&null!==(t=hp(this,e))?t.tu:(t=i?this.fromEndSegmentLength:this.toEndSegmentLength,null!==e&&isNaN(t)&&(t=i?e.fromEndSegmentLength:e.toEndSegmentLength),isNaN(t)&&(t=10),t)},H.prototype.computeSpot=function(t,e){return void 0===e&&(e=null),t?null===(t=e||this.fromPort)?t=ut:((e=this.fromSpot).Sb()&&(e=t.fromSpot),t=e===Hn?Ne:e):null===(t=e||this.toPort)?t=ut:((e=this.toSpot).Sb()&&(e=t.toSpot),t=e===Hn?Ne:e),t},H.prototype.computeOtherPoint=function(t,e){return this.computeAdjusting()!==ri&&4<this.pointsCount?this.computeMidPoint(new P):null!==(t=null!==(t=e.Hn)?Lm(t,this):null)?t.Co:e.ia(ut)},H.prototype.computeShortLength=function(t){if(t){if(t=this.fromShortLength,isNaN(t)){var e=this.fromPort;null!==e&&(t=e.fromShortLength)}return isNaN(t)?0:t}return t=this.toShortLength,isNaN(t)&&null!==(e=this.toPort)&&(t=e.toShortLength),isNaN(t)?0:t},H.prototype.tf=function(t,e,n,i,l,u){if(!1===this.pickable)return!1;void 0===e&&(e=null),void 0===n&&(n=null);var h=u;if(void 0===u&&(h=Dt.alloc()).reset(),h.multiply(this.transform),this.Wg(t,h))return Kv(this,e,n,l),void 0===u&&Dt.free(h),!0;if(this.Sc(t,h)){var f=!1;if(!this.isAtomic)for(var p=this.R.s,g=p.length;g--;){var m=p[g];if(m.visible||m===this.locationObject){var v=m.actualBounds,x=this.naturalBounds;if(!(v.x>x.width||v.y>x.height||0>v.x+v.width||0>v.y+v.height)){if((v=Dt.alloc()).set(h),m instanceof $)f=m.tf(t,e,n,i,l,v);else if(this.path===m){if(m instanceof wt)if(f=t,x=i,!1===m.pickable)f=!1;else if(v.multiply(m.transform),x)t:{var D=f,M=v;if(m.Wg(D,M))f=!0;else{if(void 0===M&&(M=m.transform,D.Ee(m.actualBounds))){f=!0;break t}f=D.left,x=D.right;var T=D.top;D=D.bottom;var N=P.alloc(),I=P.alloc(),k=P.alloc(),O=Dt.alloc();O.set(M),O.Ou(m.transform),O.Tr(),I.x=x,I.y=T,I.transform(O),N.x=f,N.y=T,N.transform(O),M=!1,Al(m,N,I,k)?M=!0:(N.x=x,N.y=D,N.transform(O),Al(m,N,I,k)?M=!0:(I.x=f,I.y=D,I.transform(O),Al(m,N,I,k)?M=!0:(N.x=f,N.y=T,N.transform(O),Al(m,N,I,k)&&(M=!0)))),Dt.free(O),P.free(N),P.free(I),P.free(k),f=M}}else f=m.Wg(f,v)}else f=Bx(m,t,i,v);f&&(x=m,null!==e&&(x=e(m)),x&&(null===n||n(x))&&l.add(x)),Dt.free(v)}}}return void 0===u&&Dt.free(h),f||null!==this.background||null!==this.areaBackground}return void 0===u&&Dt.free(h),!1},H.prototype.computeCurve=function(){if(null===this.Mf){var t=this.fromPort;this.Mf=null!==t&&t===this.toPort&&!this.isOrthogonal}return this.Mf?Ni:this.curve},H.prototype.computeCorner=function(){if(this.curve===Ni)return 0;var t=this.corner;return(isNaN(t)||0>t)&&(t=10),t},H.prototype.findMidLabel=function(){for(var t=this.path,e=this.R.s,n=e.length,i=0;i<n;i++){var l=e[i];if(l!==t&&!l.isPanelMain&&(l.segmentIndex===-1/0||isNaN(l.segmentIndex)))return l}for(t=this.labelNodes;t.next();)if((e=t.value).segmentIndex===-1/0||isNaN(e.segmentIndex))return e;return null},H.prototype.computeSpacing=function(){if(!this.isVisible())return 0;var t=x1;t=Math.max(t,this.computeThickness());var e=this.fromPort,n=this.toPort;if(null!==e&&null!==n){var i=this.findMidLabel();if(null!==i){var l=i.naturalBounds,u=i.margin,h=isNaN(l.width)?30:l.width*i.scale+u.left+u.right;l=isNaN(l.height)?14:l.height*i.scale+u.top+u.bottom,(i=i.segmentOrientation)===dp||i===gp||i===E0?t=Math.max(t,l):i===gf||i===Eh||i===pp||i===mf?t=Math.max(t,h):(e=e.ia(ut).Ya(n.ia(ut))/180*Math.PI,t=Math.max(t,Math.abs(Math.sin(e)*h)+Math.abs(Math.cos(e)*l)+1)),this.curve===Ni&&(t*=1.333)}}return t},H.prototype.arrangeBundledLinks=function(t,e){if(e)for(e=0;e<t.length;e++){var n=t[e];n.computeAdjusting()===ri&&n.ab()}},H.prototype.computeCurviness=function(){var t=this.curviness;if(isNaN(t)){t=Im;var e=this.If;if(null!==e){for(var n=oe(),i=0,l=e.links,u=0;u<l.length;u++){var h=l[u].computeSpacing();n.push(h),i+=h}for(i=-i/2,u=0;u<l.length;u++){if(l[u]===this){t=i+n[u]/2;break}i+=n[u]}e.cs===this.fromNode&&(t=-t),Nt(n)}}return t},H.prototype.computeThickness=function(){if(!this.isVisible())return 0;var t=this.path;return null!==t?Math.max(t.strokeWidth,1):1},H.prototype.hasCurviness=function(){return!isNaN(this.curviness)||null!==this.If},H.prototype.adjustPoints=function(t,e,n,i){var l=this.computeAdjusting();if(this.isOrthogonal){if(l===Tm)return!1;l===Em&&(l=fp)}switch(l){case Tm:var u=this.i(t),h=this.i(n);if(!u.$a(e)||!h.$a(i)){var f=h.x-(l=u.x),p=h.y-(u=u.y),g=Math.sqrt(f*f+p*p);if(!F.ca(g,0)){if(F.ca(f,0))var m=0>p?-Math.PI/2:Math.PI/2;else m=Math.atan(p/Math.abs(f)),0>f&&(m=Math.PI-m);var v=e.y;f=i.x-(h=e.x);var x=i.y-v;for(p=Math.sqrt(f*f+x*x),F.ca(f,0)?x=0>x?-Math.PI/2:Math.PI/2:(x=Math.atan(x/Math.abs(f)),0>f&&(x=Math.PI-x)),g=p/g,m=x-m,this.Wc(t,e),t+=1;t<n;t++)f=(e=this.i(t)).x-l,p=e.y-u,e=Math.sqrt(f*f+p*p),F.ca(e,0)||(F.ca(f,0)?p=0>p?-Math.PI/2:Math.PI/2:(p=Math.atan(p/Math.abs(f)),0>f&&(p=Math.PI-p)),f=p+m,this.M(t,h+(e*=g)*Math.cos(f),v+e*Math.sin(f)));this.Wc(n,i)}}return!0;case Em:if(u=this.i(t),v=this.i(n),!u.$a(e)||!v.$a(i)){g=((h=v.x)-(l=u.x))*(h-l)+((v=v.y)-(u=u.y))*(v-u),m=e.y,x=i.y;var D=1;if((p=i.x)-(f=e.x)!=0){var M=(x-m)/(p-f);D=Math.sqrt(1+1/(M*M))}else M=9e9;for(this.Wc(t,e),t+=1;t<n;t++){var T=(e=this.i(t)).x,N=e.y,I=.5;0!==g&&(I=((l-T)*(l-h)+(u-N)*(u-v))/g);var k=l+I*(h-l),O=u+I*(v-u);e=Math.sqrt((T-k)*(T-k)+(N-O)*(N-O)),N<M*(T-k)+O&&(e=-e),0<M&&(e=-e),T=f+I*(p-f),I=m+I*(x-m),0!==M?this.M(t,e=T+e/D,I-(e-T)/M):this.M(t,T,I+e)}this.Wc(n,i)}return!0;case fp:return this.isOrthogonal&&(l=this.i(t),u=this.i(t+1),h=this.i(t+2),v=f=u.x,g=m=u.y,F.B(l.y,u.y)?F.B(u.x,h.x)?m=e.y:F.B(u.y,h.y)&&(f=e.x):F.B(l.x,u.x)&&(F.B(u.y,h.y)?f=e.x:F.B(u.x,h.x)&&(m=e.y)),this.M(t+1,f,m),l=this.i(n),u=this.i(n-1),h=this.i(n-2),p=f=u.x,x=m=u.y,F.B(l.y,u.y)?F.B(u.x,h.x)?m=i.y:F.B(u.y,h.y)&&(f=i.x):F.B(l.x,u.x)&&(F.B(u.y,h.y)?f=i.x:F.B(u.x,h.x)&&(m=i.y)),this.M(n-1,f,m),M0(this))?(this.M(t+1,v,g),this.M(n-1,p,x),n=!1):(this.Wc(t,e),this.Wc(n,i),n=!0),n;default:return!1}},H.prototype.addOrthoPoints=function(t,e,n,i,l,u){0>e?e+=360:360<=e&&(e-=360),0>i?i+=360:360<=i&&(i-=360);var h=i;e=315<=e||45>e?0:45<=e&&135>e?90:135<=e&&225>e?180:270,i=315<=i||45>i?0:45<=i&&135>i?90:135<=i&&225>i?180:270;var f=l.actualBounds.copy(),p=u.actualBounds.copy();if(f.v()&&p.v()){f.vc(Nm,Nm),p.vc(Nm,Nm),f.Me(t),p.Me(n);var g=P.alloc(),m=P.alloc();0===e?n.x>t.x||270===i&&n.y<t.y&&p.right>t.x||90===i&&n.y>t.y&&p.right>t.x?(g.h(n.x,t.y),m.h(n.x,(t.y+n.y)/2),180===i?(g.x=this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!1),m.x=g.x,m.y=n.y):270===i&&n.y<t.y||90===i&&n.y>t.y?(g.x=t.x<p.left?this.computeMidOrthoPosition(t.x,t.y,p.left,n.y,!1):t.x<p.right&&(270===i&&t.y<p.top||90===i&&t.y>p.bottom)?this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!1):p.right,m.x=g.x,m.y=n.y):0===i&&t.x<p.left&&t.y>p.top&&t.y<p.bottom&&(g.x=t.x,g.y=t.y<n.y?Math.min(n.y,p.top):Math.max(n.y,p.bottom),m.y=g.y)):(g.h(t.x,n.y),m.h((t.x+n.x)/2,n.y),(180===i||90===i&&n.y<f.top||270===i&&n.y>f.bottom)&&(180===i&&(p.ba(t)||f.ba(n))?g.y=this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!0):n.y<t.y&&(180===i||90===i)?g.y=this.computeMidOrthoPosition(t.x,f.top,n.x,Math.max(n.y,p.bottom),!0):n.y>t.y&&(180===i||270===i)&&(g.y=this.computeMidOrthoPosition(t.x,f.bottom,n.x,Math.min(n.y,p.top),!0)),m.x=n.x,m.y=g.y),g.y>f.top&&g.y<f.bottom&&(n.x>=f.left&&n.x<=t.x||t.x<=p.right&&t.x>=n.x?(90===i||270===i)&&(g.h(Math.max((t.x+n.x)/2,t.x),t.y),m.h(g.x,n.y)):(g.y=270===i||(0===i||180===i)&&n.y<t.y?Math.min(n.y,0===i?f.top:Math.min(f.top,p.top)):Math.max(n.y,0===i?f.bottom:Math.max(f.bottom,p.bottom)),m.x=n.x,m.y=g.y))):180===e?n.x<t.x||270===i&&n.y<t.y&&p.left<t.x||90===i&&n.y>t.y&&p.left<t.x?(g.h(n.x,t.y),m.h(n.x,(t.y+n.y)/2),0===i?(g.x=this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!1),m.x=g.x,m.y=n.y):270===i&&n.y<t.y||90===i&&n.y>t.y?(g.x=t.x>p.right?this.computeMidOrthoPosition(t.x,t.y,p.right,n.y,!1):t.x>p.left&&(270===i&&t.y<p.top||90===i&&t.y>p.bottom)?this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!1):p.left,m.x=g.x,m.y=n.y):180===i&&t.x>p.right&&t.y>p.top&&t.y<p.bottom&&(g.x=t.x,g.y=t.y<n.y?Math.min(n.y,p.top):Math.max(n.y,p.bottom),m.y=g.y)):(g.h(t.x,n.y),m.h((t.x+n.x)/2,n.y),(0===i||90===i&&n.y<f.top||270===i&&n.y>f.bottom)&&(0===i&&(p.ba(t)||f.ba(n))?g.y=this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!0):n.y<t.y&&(0===i||90===i)?g.y=this.computeMidOrthoPosition(t.x,f.top,n.x,Math.max(n.y,p.bottom),!0):n.y>t.y&&(0===i||270===i)&&(g.y=this.computeMidOrthoPosition(t.x,f.bottom,n.x,Math.min(n.y,p.top),!0)),m.x=n.x,m.y=g.y),g.y>f.top&&g.y<f.bottom&&(n.x<=f.right&&n.x>=t.x||t.x>=p.left&&t.x<=n.x?(90===i||270===i)&&(g.h(Math.min((t.x+n.x)/2,t.x),t.y),m.h(g.x,n.y)):(g.y=270===i||(0===i||180===i)&&n.y<t.y?Math.min(n.y,180===i?f.top:Math.min(f.top,p.top)):Math.max(n.y,180===i?f.bottom:Math.max(f.bottom,p.bottom)),m.x=n.x,m.y=g.y))):90===e?n.y>t.y||180===i&&n.x<t.x&&p.bottom>t.y||0===i&&n.x>t.x&&p.bottom>t.y?(g.h(t.x,n.y),m.h((t.x+n.x)/2,n.y),270===i?(g.y=this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!0),m.x=n.x,m.y=g.y):180===i&&n.x<t.x||0===i&&n.x>t.x?(g.y=t.y<p.top?this.computeMidOrthoPosition(t.x,t.y,n.x,p.top,!0):t.y<p.bottom&&(180===i&&t.x<p.left||0===i&&t.x>p.right)?this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!0):p.bottom,m.x=n.x,m.y=g.y):90===i&&t.y<p.top&&t.x>p.left&&t.x<p.right&&(g.x=t.x<n.x?Math.min(n.x,p.left):Math.max(n.x,p.right),g.y=t.y,m.x=g.x)):(g.h(n.x,t.y),m.h(n.x,(t.y+n.y)/2),(270===i||0===i&&n.x<f.left||180===i&&n.x>f.right)&&(270===i&&(p.ba(t)||f.ba(n))?g.x=this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!1):n.x<t.x&&(270===i||0===i)?g.x=this.computeMidOrthoPosition(f.left,t.y,Math.max(n.x,p.right),n.y,!1):n.x>t.x&&(270===i||180===i)&&(g.x=this.computeMidOrthoPosition(f.right,t.y,Math.min(n.x,p.left),n.y,!1)),m.x=g.x,m.y=n.y),g.x>f.left&&g.x<f.right&&(n.y>=f.top&&n.y<=t.y||t.y<=p.bottom&&t.y>=n.y?(0===i||180===i)&&(g.h(t.x,Math.max((t.y+n.y)/2,t.y)),m.h(n.x,g.y)):(g.x=180===i||(90===i||270===i)&&n.x<t.x?Math.min(n.x,90===i?f.left:Math.min(f.left,p.left)):Math.max(n.x,90===i?f.right:Math.max(f.right,p.right)),m.x=g.x,m.y=n.y))):n.y<t.y||180===i&&n.x<t.x&&p.top<t.y||0===i&&n.x>t.x&&p.top<t.y?(g.h(t.x,n.y),m.h((t.x+n.x)/2,n.y),90===i?(g.y=this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!0),m.x=n.x,m.y=g.y):180===i&&n.x<t.x||0===i&&n.x>=t.x?(g.y=t.y>p.bottom?this.computeMidOrthoPosition(t.x,t.y,n.x,p.bottom,!0):t.y>p.top&&(180===i&&t.x<p.left||0===i&&t.x>p.right)?this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!0):p.top,m.x=n.x,m.y=g.y):270===i&&t.y>p.bottom&&t.x>p.left&&t.x<p.right&&(g.x=t.x<n.x?Math.min(n.x,p.left):Math.max(n.x,p.right),g.y=t.y,m.x=g.x)):(g.h(n.x,t.y),m.h(n.x,(t.y+n.y)/2),(90===i||0===i&&n.x<f.left||180===i&&n.x>f.right)&&(90===i&&(p.ba(t)||f.ba(n))?g.x=this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!1):n.x<t.x&&(90===i||0===i)?g.x=this.computeMidOrthoPosition(f.left,t.y,Math.max(n.x,p.right),n.y,!1):n.x>t.x&&(90===i||180===i)&&(g.x=this.computeMidOrthoPosition(f.right,t.y,Math.min(n.x,p.left),n.y,!1)),m.x=g.x,m.y=n.y),g.x>f.left&&g.x<f.right&&(n.y<=f.bottom&&n.y>=t.y||t.y>=p.top&&t.y<=n.y?(0===i||180===i)&&(g.h(t.x,Math.min((t.y+n.y)/2,t.y)),m.h(n.x,g.y)):(g.x=180===i||(90===i||270===i)&&n.x<t.x?Math.min(n.x,270===i?f.left:Math.min(f.left,p.left)):Math.max(n.x,270===i?f.right:Math.max(f.right,p.right)),m.x=g.x,m.y=n.y)));var v=n;if(this.isAvoiding){var x=this.diagram;if(null===x||l===u||this.layer.isTemporary||!Fd(x)||f.ba(v)&&!u.Md(l)||p.ba(t)&&!l.Md(u))e=!1;else{var D=Sv(x,!0,this.containingGroup,null);if(17!==this.segmentIndex&&D.Pj(Math.min(t.x,g.x),Math.min(t.y,g.y),Math.abs(t.x-g.x),Math.abs(t.y-g.y))&&D.Pj(Math.min(g.x,m.x),Math.min(g.y,m.y),Math.abs(g.x-m.x),Math.abs(g.y-m.y))&&D.Pj(Math.min(m.x,v.x),Math.min(m.y,v.y),Math.abs(m.x-v.x),Math.abs(m.y-v.y)))e=!1;else{l=t,u=v;var M=n=null;if(x.isVirtualized){(x=D.bounds.copy()).vc(-D.lo,-D.ko);var T=P.alloc();Nh(D,t.x,t.y)||(F.wf(x.x,x.y,x.x+x.width,x.y+x.height,t.x,t.y,g.x,g.y,T)?(n=t=T.copy(),e=T.Ya(g)):F.wf(x.x,x.y,x.x+x.width,x.y+x.height,g.x,g.y,m.x,m.y,T)?(n=t=T.copy(),e=T.Ya(m)):F.wf(x.x,x.y,x.x+x.width,x.y+x.height,m.x,m.y,v.x,v.y,T)&&(n=t=T.copy(),e=T.Ya(v))),Nh(D,v.x,v.y)||(F.wf(x.x,x.y,x.x+x.width,x.y+x.height,v.x,v.y,m.x,m.y,T)?(M=v=T.copy(),i=m.Ya(T)):F.wf(x.x,x.y,x.x+x.width,x.y+x.height,m.x,m.y,g.x,g.y,T)?(M=v=T.copy(),i=g.Ya(T)):F.wf(x.x,x.y,x.x+x.width,x.y+x.height,g.x,g.y,t.x,t.y,T)&&(M=v=T.copy(),i=t.Ya(T))),P.free(T)}(f=f.copy().Xc(p)).vc(D.lo*D.ps,D.ko*D.ps),Fl(D,t,e,v,i,f,!0),p=ho(D,v.x,v.y),!D.abort&&p>=mp&&(Rs(D),f.vc(D.lo*D.mx,D.ko*D.nx),Fl(D,t,e,v,i,f,!1),p=ho(D,v.x,v.y)),!D.abort&&p<mp&&ho(D,v.x,v.y)!==ul?(D0(this,D,v.x,v.y,i,!0,h),f=this.i(2),4>this.pointsCount?(0===e||180===e?(f.x=t.x,f.y=v.y):(f.x=v.x,f.y=t.y),this.M(2,f.x,f.y),this.l(3,f.x,f.y)):(h=this.i(3),0===e||180===e?F.B(f.x,h.x)?(f=0===e?Math.max(f.x,t.x):Math.min(f.x,t.x),this.M(2,f,t.y),this.M(3,f,h.y)):F.B(f.y,h.y)?(Math.abs(t.y-f.y)<=D.ko/2&&(this.M(2,f.x,t.y),this.M(3,h.x,t.y)),this.l(2,f.x,t.y)):this.M(2,t.x,f.y):(90===e||270===e)&&(F.B(f.y,h.y)?(f=90===e?Math.max(f.y,t.y):Math.min(f.y,t.y),this.M(2,t.x,f),this.M(3,h.x,f)):F.B(f.x,h.x)?(Math.abs(t.x-f.x)<=D.lo/2&&(this.M(2,t.x,f.y),this.M(3,t.x,h.y)),this.l(2,t.x,f.y)):this.M(2,f.x,t.y))),null!==n&&(t=this.i(1),h=this.i(2),t.x!==h.x&&t.y!==h.y?0===e||180===e?this.l(2,t.x,h.y):this.l(2,h.x,t.y):0===e||180===e?this.l(2,l.x,n.y):this.l(2,n.x,l.y)),null!==M&&(0===i||180===i?this.mf(u.x,M.y):this.mf(M.x,u.y)),e=!0):e=!1}}}else e=!1;e||(this.fe(g.copy()),this.fe(m.copy())),P.free(g),P.free(m)}},H.prototype.computeMidOrthoPosition=function(t,e,n,i,l){var u=0;return!this.hasCurviness()||this.computeSpot(!0,this.fromPort).Uc()||this.computeSpot(!1,this.toPort).Uc()||(u=this.computeCurviness()),l?(e+i)/2+u:(t+n)/2+u},H.prototype.Ny=function(t){var e=t.x;t=t.y;for(var n=this.i(0),i=this.i(1),l=Kn(e,t,n.x,n.y,i.x,i.y),u=0,h=1;h<this.pointsCount-1;h++){n=this.i(h+1);var f=Kn(e,t,i.x,i.y,n.x,n.y);i=n,f<l&&(u=h,l=f)}return u},H.prototype.mc=function(t){this.Zl=!1,t&&this.w()},H.prototype.Rj=function(t){if((t||!1!==this.xd&&(t=this.vb(),!this.Zl||null!==t&&null===t.geometry))&&(this.sa=this.makeGeometry(),null!==(t=this.path))){t.sa=this.sa;for(var e=this.R.s,n=e.length,i=0;i<n;i++){var l=e[i];l!==t&&l.isPanelMain&&l instanceof wt&&(l.sa=this.sa)}}},H.prototype.makeGeometry=function(){var t=this.sa,e=this.pointsCount;if(2>e)return t.type=K.j,this.Zl=!0,t;var n=!1,i=this.diagram;null!==i&&Ll(this)&&i.th.contains(this)&&(0!==this.bl.width||0!==this.bl.height)&&(n=!0);var l=this.i(0).copy(),u=l.copy();i=this.Jb.s;var h=this.computeCurve();if(h===Ni&&3<=e&&!F.ca(this.smoothness,0))if(3===e){var f=this.i(1);i=Math.min(l.x,f.x);var p=Math.min(l.y,f.y);f=this.i(2),i=Math.min(i,f.x),p=Math.min(p,f.y)}else{if(this.isOrthogonal)for(p=0;p<e;p++)f=i[p],u.x=Math.min(f.x,u.x),u.y=Math.min(f.y,u.y);else for(i=3;i<e;i+=3)i+3>=e&&(i=e-1),p=this.i(i),u.x=Math.min(p.x,u.x),u.y=Math.min(p.y,u.y);i=u.x,p=u.y}else{for(p=0;p<e;p++)f=i[p],u.x=Math.min(f.x,u.x),u.y=Math.min(f.y,u.y);i=u.x,p=u.y}if(p-=this.Yt.y,l.x-=i-=this.Yt.x,l.y-=p,2!==e||Ll(this)){if(t.type=K.m,f=a1(t),0!==this.computeShortLength(!0)&&(l=Du(this,l,!0,u)),sl(f,l.x,l.y,!1),h===Ni&&3<=e&&!F.ca(this.smoothness,0))if(3===e)e=(n=this.i(1)).x-i,n=n.y-p,(l=this.i(2).copy()).x-=i,l.y-=p,0!==this.computeShortLength(!1)&&(l=Du(this,l,!1,u)),ll(f,e,n,e,n,l.x,l.y);else if(this.isOrthogonal){e=P.allocAt(i,p),(n=P.alloc()).assign(this.i(1)),u=P.allocAt(i,p),l=P.allocAt(i,p),h=this.i(0);for(var g,m=this.smoothness/3,v=1;v<this.pointsCount-1;v++){var x=h,D=g=this.i(v),M=this.i(Dm(this,g,v,!1));if(!(F.ca(x.x,D.x)&&F.ca(D.x,M.x)||F.ca(x.y,D.y)&&F.ca(D.y,M.y))){var T=m;isNaN(T)&&(T=this.smoothness/3);var N=x.x,I=D.x,k=M.x;M=M.y;var O=T*S0(N,x=x.y,I,D=D.y);T*=S0(I,D,k,M),F.ca(x,D)&&F.ca(I,k)&&(I>N?M>D?(u.x=I-O,u.y=D-O,l.x=I+T,l.y=D+T):(u.x=I-O,u.y=D+O,l.x=I+T,l.y=D-T):M>D?(u.x=I+O,u.y=D-O,l.x=I-T,l.y=D+T):(u.x=I+O,u.y=D+O,l.x=I-T,l.y=D-T)),F.ca(N,I)&&F.ca(D,M)&&(D>x?(k>I?(u.x=I-O,u.y=D-O,l.x=I+T):(u.x=I+O,u.y=D-O,l.x=I-T),l.y=D+T):(k>I?(u.x=I-O,u.y=D+O,l.x=I+T):(u.x=I+O,u.y=D+O,l.x=I-T),l.y=D-T)),(F.ca(N,I)&&F.ca(I,k)||F.ca(x,D)&&F.ca(D,M))&&(x=.5*(x+M),u.x=N=.5*(N+k),u.y=x,l.x=N,l.y=x),(1===v||2===v&&F.ca(h.x,this.i(0).x)&&F.ca(h.y,this.i(0).y))&&(n.x=.5*(h.x+g.x),n.y=.5*(h.y+g.y)),ll(f,n.x-i,n.y-p,u.x-i,u.y-p,g.x-i,g.y-p),e.set(u),n.set(l),h=g}}g=h.x,h=h.y,m=this.i(this.pointsCount-1),0!==this.computeShortLength(!1)&&(m=Du(this,m.copy(),!1,wl)),ll(f,l.x-i,l.y-p,(g=.5*(g+m.x))-i,(h=.5*(h+m.y))-p,m.x-i,m.y-p),P.free(e),P.free(n),P.free(u),P.free(l)}else for(n=3;n<e;n+=3)u=this.i(n-2),n+3>=e&&(n=e-1),l=this.i(n-1),h=this.i(n),n===e-1&&0!==this.computeShortLength(!1)&&(h=Du(this,h.copy(),!1,wl)),ll(f,u.x-i,u.y-p,l.x-i,l.y-p,h.x-i,h.y-p);else{for((u=P.alloc()).assign(this.i(0)),(l=P.alloc()).assign(u),h=this.computeCorner(),v=1,g=0;v<e;){if(v=Dm(this,u,v,1<v),m=this.i(v),v>=e-1){if(u.C(m)){if(0===g)for(v=1;v<e;)l.assign(u),nr(this,f,-i,-p,u,m=this.i(v++),n),u.assign(m)}else 0!==this.computeShortLength(!1)&&(m=Du(this,m.copy(),!1,wl)),nr(this,f,-i,-p,u,m,n);break}if(g=Dm(this,m,v+1,v<e-3),v=-i,N=-p,x=m,I=this.i(g),T=n,F.B(u.y,x.y)&&F.B(x.x,I.x))if(M=Math.min(h,Math.abs(x.x-l.x)/2),M=O=Math.min(M,Math.abs(I.y-x.y)/2),F.B(M,0))nr(this,f,v,N,u,x,T),u.assign(x);else{var L=x.x,b=x.y;D=L,k=b,k=I.y>x.y?x.y+O:x.y-O,nr(this,f,v,N,u,I=P.allocAt(L=x.x>u.x?x.x-M:x.x+M,b),T),P.free(I),hm(f,x.x+v,x.y+N,D+v,k+N),u.h(D,k)}else F.B(u.x,x.x)&&F.B(x.y,I.y)?(M=Math.min(h,Math.abs(x.y-l.y)/2),M=O=Math.min(M,Math.abs(I.x-x.x)/2),F.B(O,0)?(nr(this,f,v,N,u,x,T),u.assign(x)):(D=L=x.x,k=b=x.y,D=I.x>x.x?x.x+O:x.x-O,nr(this,f,v,N,u,I=P.allocAt(L,b=x.y>u.y?x.y-M:x.y+M),T),P.free(I),hm(f,x.x+v,x.y+N,D+v,k+N),u.h(D,k))):(nr(this,f,v,N,u,x,T),u.assign(x));l.assign(m),v=g}P.free(u)}cm=f}else(f=this.i(1).copy()).x-=i,f.y-=p,0!==this.computeShortLength(!0)&&(l=Du(this,l,!0,u)),0!==this.computeShortLength(!1)&&(f=Du(this,f,!1,u)),t.type=K.j,t.startX=l.x,t.startY=l.y,t.endX=f.x,t.endY=f.y;return this.Zl=!0,t},H.prototype.computeJumpLength=function(){return 10},H.prototype.Ao=function(t){var e=this.layer;if(null!==e&&e.visible&&!e.isTemporary){var n=e.diagram;if(null!==n&&!n.animationManager.isTicking){var i=!1;for(n=n.layers;n.next();){var l=n.value;if(l.visible)if(l===e){i=!0;for(var u=!1,h=(l=l.Ma.s).length,f=0;f<h;f++){var p=l[f];p instanceof H&&(p===this?u=!0:u&&tD(this,p,t))}}else if(i)for(l=(u=l.Ma.s).length,h=0;h<l;h++)(f=u[h])instanceof H&&tD(this,f,t)}}}},H.prototype.usesSamePort=function(t){var e=this.pointsCount,n=t.pointsCount;if(0<e&&0<n){var i=this.i(0),l=t.i(0);if(i.$a(l)||(e=this.i(e-1),t=t.i(n-1),e.$a(t)||i.$a(t)||e.$a(l)))return!0}else if(this.fromNode===t.fromNode||this.toNode===t.toNode||this.fromNode===t.toNode||this.toNode===t.fromNode)return!0;return!1},H.prototype.isVisible=function(){if(!lt.prototype.isVisible.call(this))return!1;var t=this.containingGroup,e=!0,n=this.diagram;if(null!==n&&(e=n.isTreePathToChildren),null!==(n=this.fromNode)){if(this.isTreeLink&&e&&!n.isTreeExpanded)return!1;if(n===t)return!0;for(var i=n;null!==i;){if(i.labeledLink===this)return!0;i=i.containingGroup}if(null===(n=n.findVisibleNode())||n===t)return!1}if(null!==(n=this.toNode)){if(this.isTreeLink&&!e&&!n.isTreeExpanded)return!1;if(n===t)return!0;for(e=n;null!==e;){if(e.labeledLink===this)return!0;e=e.containingGroup}if(null===(e=n.findVisibleNode())||e===t)return!1}return!0},H.prototype.Ub=function(t){if(lt.prototype.Ub.call(this,t),null!==this.If&&this.If.Al(),null!==this.rd)for(var e=this.rd.iterator;e.next();)e.value.Ub(t)},H.prototype.computeAdjusting=function(){return this.isAvoiding&&null!==this.diagram&&this.diagram.animationManager.defaultAnimation.isAnimating?fp:this.dk},H.prototype.eh=function(){return!0},Mt.Object.defineProperties(H.prototype,{fromNode:{get:function(){return this.Ue},set:function(t){var e=this.Ue;if(e!==t){var n=this.fromPort;null!==e&&(this.hf!==e&&up(e,this,n),_m(this),this.D(2)),this.Ue=t,null!==t&&this.Ub(t.isVisible()),this.Mf=null,this.ab();var i=this.diagram;null!==i&&i.$&&i.partManager.setFromNodeForLink(this,t,e);var l=this.fromPort,u=this.fromPortChanged;if(null!==u){var h=!0;null!==i&&(h=i.$,i.$=!0),u(this,n,l),null!==i&&(i.$=h)}null!==t&&(this.hf!==t&&ff(t,this,l),Sm(this),this.D(1)),this.g("fromNode",e,t),ge(this)}}},fromPortId:{get:function(){return this.Ve},set:function(t){var e=this.Ve;if(e!==t){var n=this.fromPort;null!==n&&er(n),_m(this),this.Ve=t;var i=this.fromPort;null!==i&&er(i);var l=this.diagram;if(null!==l){var u=this.data,h=l.model;null!==u&&h.ki()&&h.dv(u,t)}n!==i&&(this.Mf=null,this.ab(),null!==(u=this.fromPortChanged)&&(h=!0,null!==l&&(h=l.$,l.$=!0),u(this,n,i),null!==l&&(l.$=h))),Sm(this),this.g("fromPortId",e,t)}}},fromPort:{get:function(){var t=this.Ue;return null===t?null:t.Kr(this.Ve)}},fromPortChanged:{get:function(){return this.Om},set:function(t){var e=this.Om;e!==t&&(this.Om=t,this.g("fromPortChanged",e,t))}},toNode:{get:function(){return this.hf},set:function(t){var e=this.hf;if(e!==t){var n=this.toPort;null!==e&&(this.Ue!==e&&up(e,this,n),_m(this),this.D(2)),this.hf=t,null!==t&&this.Ub(t.isVisible()),this.Mf=null,this.ab();var i=this.diagram;null!==i&&i.$&&i.partManager.setToNodeForLink(this,t,e);var l=this.toPort,u=this.toPortChanged;if(null!==u){var h=!0;null!==i&&(h=i.$,i.$=!0),u(this,n,l),null!==i&&(i.$=h)}null!==t&&(this.Ue!==t&&ff(t,this,l),Sm(this),this.D(1)),this.g("toNode",e,t),ge(this)}}},toPortId:{get:function(){return this.jf},set:function(t){var e=this.jf;if(e!==t){var n=this.toPort;null!==n&&er(n),_m(this),this.jf=t;var i=this.toPort;null!==i&&er(i);var l=this.diagram;if(null!==l){var u=this.data,h=l.model;null!==u&&h.ki()&&h.hv(u,t)}n!==i&&(this.Mf=null,this.ab(),null!==(u=this.toPortChanged)&&(h=!0,null!==l&&(h=l.$,l.$=!0),u(this,n,i),null!==l&&(l.$=h))),Sm(this),this.g("toPortId",e,t)}}},toPort:{get:function(){var t=this.hf;return null===t?null:t.Kr(this.jf)}},toPortChanged:{get:function(){return this.Xn},set:function(t){var e=this.Xn;e!==t&&(this.Xn=t,this.g("toPortChanged",e,t))}},fromSpot:{get:function(){return null!==this.aa?this.aa.Qi:Hn},set:function(t){var e=this.fromSpot;e.C(t)||(t=t.J(),this.Rc(),this.aa.Qi=t,this.g("fromSpot",e,t),(e.Uc()||t.Uc())&&null!==this.fromNode&&er(this.fromPort),this.ab())}},fromEndSegmentLength:{get:function(){return null!==this.aa?this.aa.Oi:NaN},set:function(t){var e=this.fromEndSegmentLength;e!==t&&(0>t&&le(t,">= 0",H,"fromEndSegmentLength"),this.Rc(),this.aa.Oi=t,this.g("fromEndSegmentLength",e,t),this.ab())}},fromShortLength:{get:function(){return null!==this.aa?this.aa.Pi:NaN},set:function(t){var e=this.fromShortLength;e!==t&&(this.Rc(),this.aa.Pi=t,this.mc(!0),this.g("fromShortLength",e,t))}},toSpot:{get:function(){return null!==this.aa?this.aa.tj:Hn},set:function(t){var e=this.toSpot;e.C(t)||(t=t.J(),this.Rc(),this.aa.tj=t,this.g("toSpot",e,t),(e.Uc()||t.Uc())&&null!==this.toNode&&er(this.toPort),this.ab())}},toEndSegmentLength:{get:function(){return null!==this.aa?this.aa.rj:NaN},set:function(t){var e=this.toEndSegmentLength;e!==t&&(0>t&&le(t,">= 0",H,"toEndSegmentLength"),this.Rc(),this.aa.rj=t,this.g("toEndSegmentLength",e,t),this.ab())}},toShortLength:{get:function(){return null!==this.aa?this.aa.sj:NaN},set:function(t){var e=this.toShortLength;e!==t&&(this.Rc(),this.aa.sj=t,this.mc(!0),this.g("toShortLength",e,t))}},isLabeledLink:{get:function(){return null!==this.rd&&0<this.rd.count}},labelNodes:{get:function(){return null===this.rd?So:this.rd.iterator}},relinkableFrom:{get:function(){return 0!=(1&this.Oa)},set:function(t){var e=0!=(1&this.Oa);e!==t&&(this.Oa^=1,this.g("relinkableFrom",e,t),this.Rb())}},relinkableTo:{get:function(){return 0!=(2&this.Oa)},set:function(t){var e=0!=(2&this.Oa);e!==t&&(this.Oa^=2,this.g("relinkableTo",e,t),this.Rb())}},resegmentable:{get:function(){return 0!=(4&this.Oa)},set:function(t){var e=0!=(4&this.Oa);e!==t&&(this.Oa^=4,this.g("resegmentable",e,t),this.Rb())}},isTreeLink:{get:function(){return 0!=(8&this.Oa)},set:function(t){var e=0!=(8&this.Oa);e!==t&&(this.Oa^=8,this.g("isTreeLink",e,t),null!==this.fromNode&&vm(this.fromNode),null!==this.toNode&&vm(this.toNode))}},path:{get:function(){var t=this.vb();return t instanceof wt?t:null}},routeBounds:{get:function(){this.mg();var t=this.bl,e=1/0,n=1/0,i=this.pointsCount;if(0===i)t.h(NaN,NaN,0,0);else{if(1===i)i=this.i(0),e=Math.min(i.x,e),n=Math.min(i.y,n),t.h(i.x,i.y,0,0);else if(2===i){i=this.i(0);var l=this.i(1);e=Math.min(i.x,l.x),n=Math.min(i.y,l.y),t.h(i.x,i.y,0,0),t.Me(l)}else if(this.computeCurve()===Ni&&3<=i&&!this.isOrthogonal)if(l=this.i(0),t.h(e=l.x,n=l.y,0,0),3===i){i=this.i(1),e=Math.min(i.x,e),n=Math.min(i.y,n);var u=this.i(2);e=Math.min(u.x,e),n=Math.min(u.y,n),F.ql(l.x,l.y,i.x,i.y,i.x,i.y,u.x,u.y,.5,t)}else for(u=3;u<i;u+=3){var h=this.i(u-2);u+3>=i&&(u=i-1);var f=this.i(u-1),p=this.i(u);F.ql(l.x,l.y,h.x,h.y,f.x,f.y,p.x,p.y,.5,t),e=Math.min(p.x,e),n=Math.min(p.y,n),l=p}else for(l=this.i(0),u=this.i(1),e=Math.min(l.x,u.x),n=Math.min(l.y,u.y),t.h(l.x,l.y,0,0),t.Me(u),l=2;l<i;l++)u=this.i(l),e=Math.min(u.x,e),n=Math.min(u.y,n),t.Me(u);this.Yt.h(e-t.x,n-t.y)}return t}},midPoint:{get:function(){return this.mg(),this.computeMidPoint(new P)}},midAngle:{get:function(){return this.mg(),this.computeMidAngle()}},flattenedLengths:{get:function(){if(null===this.Gp){this.xd||Mm(this);for(var t=this.Gp=[],e=this.pointsCount,n=0;n<e-1;n++){var i=this.i(n),l=this.i(n+1);F.ca(i.x,l.x)?0>(i=l.y-i.y)&&(i=-i):F.ca(i.y,l.y)?0>(i=l.x-i.x)&&(i=-i):i=Math.sqrt(i.rf(l)),t.push(i)}}return this.Gp}},flattenedTotalLength:{get:function(){var t=this.Ys;if(isNaN(t)){for(var e=this.flattenedLengths,n=e.length,i=t=0;i<n;i++)t+=e[i];this.Ys=t}return t}},points:{get:function(){return this.Jb},set:function(t){var e=this.Jb;if(e!==t){var n=null;if(Array.isArray(t)){var i=t.length%2==0;if(i)for(var l=0;l<t.length;l++)if("number"!=typeof t[l]||isNaN(t[l])){i=!1;break}if(i)for(n=new q,i=0;i<t.length/2;i++)l=new P(t[2*i],t[2*i+1]).freeze(),n.add(l);else{for(i=!0,l=0;l<t.length;l++){var u=t[l];if(!jt(u)||"number"!=typeof u.x||isNaN(u.x)||"number"!=typeof u.y||isNaN(u.y)){i=!1;break}}if(i)for(n=new q,i=0;i<t.length;i++)n.add(new P((l=t[i]).x,l.y).freeze())}}else if(t instanceof q)for(n=t.copy(),t=n.iterator;t.next();)t.value.freeze();else Y("Link.points value is not an instance of List or Array: "+t);n.freeze(),this.Jb=n,this.mc(!0),Mm(this),null!==(t=this.diagram)&&(t.ji||t.undoManager.isUndoingRedoing||t.Zr.add(this),t.animationManager.zb&&(t=t.animationManager,this.ef=n,t.dl.add(this))),this.g("points",e,n)}}},pointsCount:{get:function(){return this.Jb.count}},xd:{get:function(){return 0!=(16&this.Oa)},set:function(t){0!=(16&this.Oa)!==t&&(this.Oa^=16)}},suspendsRouting:{get:function(){return 0!=(32&this.Oa)},set:function(t){0!=(32&this.Oa)!==t&&(this.Oa^=32)}},computingPoints:{get:function(){return 0!=(64&this.Oa)},set:function(t){0!=(64&this.Oa)!==t&&(this.Oa^=64)}},defaultFromPoint:{get:function(){return this.m},set:function(t){this.m=t.copy()}},defaultToPoint:{get:function(){return this.u},set:function(t){this.u=t.copy()}},isOrthogonal:{get:function(){return 2==(2&this.kj.value)}},isAvoiding:{get:function(){return 4==(4&this.kj.value)}},Zl:{get:function(){return 0!=(128&this.Oa)},set:function(t){0!=(128&this.Oa)!==t&&(this.Oa^=128)}},geometry:{get:function(){return this.Zl||(this.mg(),this.sa=this.makeGeometry()),this.sa}},firstPickIndex:{get:function(){return 2>=this.pointsCount?0:this.isOrthogonal||!df(this.computeSpot(!0))?1:0}},lastPickIndex:{get:function(){var t=this.pointsCount;return 0===t?0:2>=t?t-1:this.isOrthogonal||!df(this.computeSpot(!1))?t-2:t-1}},adjusting:{get:function(){return this.dk},set:function(t){var e=this.dk;e!==t&&(this.dk=t,this.g("adjusting",e,t))}},corner:{get:function(){return this.wm},set:function(t){var e=this.wm;e!==t&&(this.wm=t,this.mc(!0),this.g("corner",e,t))}},curve:{get:function(){return this.ym},set:function(t){var e=this.ym;e!==t&&(this.ym=t,this.ab(),this.mc(!0),T0(this,e===bl||e===Th||t===bl||t===Th),this.g("curve",e,t))}},curviness:{get:function(){return this.zm},set:function(t){var e=this.zm;e!==t&&(this.zm=t,this.ab(),this.mc(!1),this.g("curviness",e,t))}},routing:{get:function(){return this.kj},set:function(t){var e=this.kj;e!==t&&(this.kj=t,this.Mf=null,this.ab(),T0(this,2==(2&e.value)||2==(2&t.value)),this.g("routing",e,t))}},smoothness:{get:function(){return this.Sn},set:function(t){var e=this.Sn;e!==t&&(this.Sn=t,this.mc(!0),this.g("smoothness",e,t))}},key:{get:function(){var t=this.diagram;if(null!==t&&t.model.ki())return t.model.uc(this.data)}}}),H.prototype.invalidateOtherJumpOvers=H.prototype.Ao,H.prototype.findClosestSegment=H.prototype.Ny,H.prototype.updateRoute=H.prototype.mg,H.prototype.invalidateRoute=H.prototype.ab,H.prototype.rollbackRoute=H.prototype.$u,H.prototype.commitRoute=H.prototype.pf,H.prototype.startRoute=H.prototype.jh,H.prototype.clearPoints=H.prototype.Aj,H.prototype.removePoint=H.prototype.Yu,H.prototype.addPointAt=H.prototype.mf,H.prototype.addPoint=H.prototype.fe,H.prototype.insertPointAt=H.prototype.l,H.prototype.insertPoint=H.prototype.sz,H.prototype.setPointAt=H.prototype.M,H.prototype.setPoint=H.prototype.Wc,H.prototype.getPoint=H.prototype.i,H.prototype.getOtherPort=H.prototype.jz,H.prototype.getOtherNode=H.prototype.wo;var _h=null,Su=null,v1=new W(H,"Normal",1),eD=new W(H,"Orthogonal",2),pf=new W(H,"AvoidsNodes",6),w1=new W(H,"AvoidsNodesStraight",7),ri=new W(H,"None",0),Ni=new W(H,"Bezier",9),bl=new W(H,"JumpGap",10),Th=new W(H,"JumpOver",11),fp=new W(H,"End",17),Tm=new W(H,"Scale",18),Em=new W(H,"Stretch",19),dp=new W(H,"OrientAlong",21),pp=new W(H,"OrientPlus90",22),gf=new W(H,"OrientMinus90",23),E0=new W(H,"OrientOpposite",24),gp=new W(H,"OrientUpright",25),mf=new W(H,"OrientPlus90Upright",26),Eh=new W(H,"OrientMinus90Upright",27),I0=new W(H,"OrientUpright45",28),Im=16,x1=14,Nm=8;function ct(t,e,n,i){wn(this),this.ue=this.Sp=!1,this.cs=t,this.vx=e,this.Pu=n,this.wx=i,this.links=[]}function Ih(t){wn(this),this.Hx=this.group=null,this.Sr=!0,this.abort=!1,this.Ed=this.Dd=1,this.mn=this.ln=-1,this.nc=t.width,this.oc=t.height,this.Xb=null,this.Xh=this.Wh=0,this.ps=11,this.nx=this.mx=22}function Nh(t,e,n){return t.Dd<=e&&e<=t.ln&&t.Ed<=n&&n<=t.mn}function ho(t,e,n){return Nh(t,e,n)?(e-=t.Dd,n-=t.Ed,t.Xb[0|(e/=t.nc)][0|(n/=t.oc)]):km}function Rs(t){if(null!==t.Xb)for(var e=0;e<=t.Wh;e++)for(var n=t.Xb[e],i=0;i<=t.Xh;i++)n[i]>=Rl&&(n[i]=km)}function as(t,e,n,i,l,u,h,f,p){if(!(e<u||e>h||n<f||n>p)){var g=0|e,m=0|n,v=t.Xb[g][m];if(v>=Rl&&v<mp)for(l?m+=i:g+=i,v+=1;u<=g&&g<=h&&f<=m&&m<=p&&!(v>=t.Xb[g][m]);)t.Xb[g][m]=v,v+=1,l?m+=i:g+=i;if(g=l?m:g,l)if(0<i)for(n+=i;n<g;n+=i)as(t,e,n,1,!l,u,h,f,p),as(t,e,n,-1,!l,u,h,f,p);else for(n+=i;n>g;n+=i)as(t,e,n,1,!l,u,h,f,p),as(t,e,n,-1,!l,u,h,f,p);else if(0<i)for(e+=i;e<g;e+=i)as(t,e,n,1,!l,u,h,f,p),as(t,e,n,-1,!l,u,h,f,p);else for(e+=i;e>g;e+=i)as(t,e,n,1,!l,u,h,f,p),as(t,e,n,-1,!l,u,h,f,p)}}function Pm(t,e,n,i,l,u,h,f,p){var g=ul,m=Rl;for(t.Xb[e|=0][n|=0]=m;g===ul&&e>u&&e<h&&n>f&&n<p;)t.Xb[e][n]=m+=1,l?n+=i:e+=i,g=t.Xb[e][n]}function yf(t,e,n,i,l,u,h,f,p){var g=ul,m=mp;for(t.Xb[e|=0][n|=0]=m;g===ul&&e>u&&e<h&&n>f&&n<p;)t.Xb[e][n]=m,l?n+=i:e+=i,g=t.Xb[e][n]}function Fl(t,e,n,i,l,u,h){if(null!==t.Xb){t.abort=!1;var f=e.x,p=e.y;if(Nh(t,f,p)){f-=t.Dd,f/=t.nc,p-=t.Ed,p/=t.oc;var g=i.x,m=i.y;if(Nh(t,g,m))if(g-=t.Dd,g/=t.nc,m-=t.Ed,m/=t.oc,1>=Math.abs(f-g)&&1>=Math.abs(p-m))t.abort=!0;else{var v=u.x;i=u.y,e=u.x+u.width;var x=u.y+u.height;v-=t.Dd,v/=t.nc,i-=t.Ed,i/=t.oc,e-=t.Dd,e/=t.nc,x-=t.Ed,x/=t.oc,u=Math.max(0,Math.min(t.Wh,0|v)),e=Math.min(t.Wh,Math.max(0,0|e)),v=Math.max(0,Math.min(t.Xh,0|i)),x=Math.min(t.Xh,Math.max(0,0|x)),g|=0,m|=0;var D=0===n||90===n?1:-1;if(n=90===n||270===n,(i=t.Xb)[f|=0][p|=0]===ul?(Pm(t,f,p,D,n,u,e,v,x),Pm(t,f,p,1,!n,u,e,v,x),Pm(t,f,p,-1,!n,u,e,v,x)):Pm(t,f,p,D,n,f,p,f,p),i[g][m]===ul?(yf(t,g,m,0===l||90===l?1:-1,90===l||270===l,u,e,v,x),yf(t,g,m,1,!(90===l||270===l),u,e,v,x),yf(t,g,m,-1,!(90===l||270===l),u,e,v,x)):yf(t,g,m,D,n,g,m,g,m),n=oe(),h&&Am(t,g,m,l,f,p,n))for((n[0]!==g||n[1]!==m)&&(n.unshift(m),n.unshift(g)),(n[n.length-2]!==f||n[n.length-1]!==p)&&(n.push(f),n.push(p)),t=Rl,i[l=n[n.length-2]][h=n[n.length-1]]=t++,u=n.length-4;0<=u;u-=2)for(l=n[u+2],h=n[u+3],e=n[u],g=n[u+1];e>l?l++:e<l?l--:g>h?h++:g<h&&h--,i[l][h]=t++,l!==e||h!==g;);else as(t,f,p,1,!1,u,e,v,x),as(t,f,p,-1,!1,u,e,v,x),as(t,f,p,1,!0,u,e,v,x),as(t,f,p,-1,!0,u,e,v,x);Nt(n)}}}}function Am(t,e,n,i,l,u,h){for(var f=t.Xb,p=e,g=n;;){if(p===l&&g===u)return!0;var m=p,v=g;if(0===i){if(!(m<l))break;m++}else if(90===i){if(!(v<u))break;v++}else if(180===i){if(!(m>l))break;m--}else{if(!(v>u))break;v--}var x=f[m][v];if(0===x||x===C1)break;p=m,g=v}for(;;){if(m=i,v=p,x=g,0===i?x<u?(m=90,x++):x>u&&(m=270,x--):90===i?v<l?(m=0,v++):v>l&&(m=180,v--):180===i?x<u?(m=90,x++):x>u&&(m=270,x--):v<l?(m=0,v++):v>l&&(m=180,v--),v=f[v][x],m!==i&&0!==v&&v!==C1){if(h.push(p),h.push(g),Am(t,p,g,m,l,u,h))return!0;h.pop(),h.pop()}if(f[p][g]=C1,0===i){if(p===e)return!1;p--}else if(90===i){if(g===n)return!1;g--}else if(180===i){if(p===e)return!1;p++}else{if(g===n)return!1;g++}}}H.className="Link",H.Normal=v1,H.Orthogonal=eD,H.AvoidsNodes=pf,H.AvoidsNodesStraight=w1,H.None=ri,H.Bezier=Ni,H.JumpGap=bl,H.JumpOver=Th,H.End=fp,H.Scale=Tm,H.Stretch=Em,H.OrientAlong=dp,H.OrientPlus90=pp,H.OrientMinus90=gf,H.OrientOpposite=E0,H.OrientUpright=gp,H.OrientPlus90Upright=mf,H.OrientMinus90Upright=Eh,H.OrientUpright45=I0,H.EndSegmentStep=8,H.CurvinessStart=Im,H.SpacingMin=x1,H.OrthoShortCut=Nm,ct.prototype.Al=function(){if(!this.Sp){var t=this.links;0<t.length&&null!==(t=t[0].diagram)&&(t.Uv.add(this),this.ue=t.undoManager.isUndoingRedoing)}this.Sp=!0},ct.prototype.rv=function(){if(this.Sp){this.Sp=!1;var t=this.links;if(0<t.length){var e=t[0],n=e.diagram;n=null===n||n.ji&&!this.ue,this.ue=!1,e.arrangeBundledLinks(t,n),1===t.length&&(e.If=null,t.length=0)}0===t.length&&(t=this.cs,null!==this&&null!==t.Qe&&t.Qe.remove(this),t=this.Pu,null!==this&&null!==t.Qe&&t.Qe.remove(this))}},ct.className="LinkBundle",Ih.prototype.initialize=function(t){if(!(0>=t.width||0>=t.height)){var e=t.y,n=t.x+t.width,i=t.y+t.height;if(this.Dd=Math.floor((t.x-this.nc)/this.nc)*this.nc,this.Ed=Math.floor((e-this.oc)/this.oc)*this.oc,this.ln=Math.ceil((n+2*this.nc)/this.nc)*this.nc,this.mn=Math.ceil((i+2*this.oc)/this.oc)*this.oc,t=1+(0|Math.ceil((this.ln-this.Dd)/this.nc)),e=1+(0|Math.ceil((this.mn-this.Ed)/this.oc)),null===this.Xb||this.Wh<t-1||this.Xh<e-1){for(n=[],i=0;i<=t;i++)n[i]=new Uint32Array(e);this.Xb=n,this.Wh=t-1,this.Xh=e-1}if(t=km,null!==this.Xb)for(e=0;e<=this.Wh;e++)if((n=this.Xb[e]).fill)n.fill(t);else for(i=0;i<=this.Xh;i++)n[i]=t}},Ih.prototype.Pj=function(t,e,n,i){if(t>this.ln||t+n<this.Dd||e>this.mn||e+i<this.Ed)return!0;t=(t-this.Dd)/this.nc|0,e=(e-this.Ed)/this.oc|0,n=Math.max(0,n)/this.nc+1|0;var l=Math.max(0,i)/this.oc+1|0;if(0>t&&(n+=t,t=0),0>e&&(l+=e,e=0),0>n||0>l)return!0;for(i=0|Math.min(t+n-1,this.Wh),n=0|Math.min(e+l-1,this.Xh);t<=i;t++){l=this.Xb[t];for(var u=e;u<=n;u++)if(l[u]===ul)return!1}return!0},Mt.Object.defineProperties(Ih.prototype,{bounds:{get:function(){return new B(this.Dd,this.Ed,this.ln-this.Dd,this.mn-this.Ed)}},lo:{get:function(){return this.nc},set:function(t){0<t&&t!==this.nc&&(this.nc=t,this.initialize(this.bounds))}},ko:{get:function(){return this.oc},set:function(t){0<t&&t!==this.oc&&(this.oc=t,this.initialize(this.bounds))}}});var ul=0,Rl=1,mp=999999,km=mp+1,C1=mp+2;function jl(){wn(this),this.port=this.node=null,this.he=[],this.Do=!1}function Om(t,e,n,i){switch(e=e.offsetY){case 8:return 90;case 2:return 180;case 1:return 270;case 4:return 0}switch(e){case 9:return 180<n?270:90;case 6:return 90<n&&270>=n?180:0}switch(t=180*Math.atan2(t.height,t.width)/Math.PI,e){case 3:return n>t&&n<=180+t?180:270;case 5:return n>180-t&&n<=360-t?270:0;case 12:return n>t&&n<=180+t?90:0;case 10:return n>180-t&&n<=360-t?180:90;case 7:return 90<n&&n<=180+t?180:n>180+t&&n<=360-t?270:0;case 13:return 180<n&&n<=360-t?270:n>t&&180>=n?90:0;case 14:return n>t&&n<=180-t?90:n>180-t&&270>=n?180:0;case 11:return n>180-t&&n<=180+t?180:n>180+t?270:90}return i&&15!==e&&0>(n-=15)&&(n+=360),n>t&&n<180-t?90:n>=180-t&&n<=180+t?180:n>180+t&&n<360-t?270:0}function Lm(t,e){var n=t.he;if(0===n.length){t:if(!t.Do){n=t.Do,t.Do=!0;var i=null,l=t.node,u=l instanceof yt?l:null;if(null===u||u.isSubGraphExpanded)var h=l.isTreeExpanded?l.findLinksConnected(t.port.portId):l.Tw();else{if(!u.actualBounds.v()){t.Do=n;break t}h=(i=u).vu()}u=t.he.length=0;var f=t.port.ia(Oe,P.alloc()),p=t.port.ia(cr,P.alloc());for((l=B.allocAt(f.x,f.y,0,0)).Me(p),P.free(f),P.free(p),f=P.allocAt(l.x+l.width/2,l.y+l.height/2),p=t.port.fi(),h=h.iterator;h.next();){var g=h.value;if(g.isVisible()&&g.fromPort!==g.toPort){var m=g.fromPort===t.port||null!==g.fromNode&&g.fromNode.Md(i),v=g.computeSpot(m,t.port);if(v.Uc()&&null!==(m=m?g.toPort:g.fromPort)){var x=m.part;if(null!==x){var D=x.findVisibleNode();null!==D&&D!==x&&(m=(x=D).port),m=g.computeOtherPoint(x,m),x=f.Ya(m),0>(x-=p)?x+=360:360<=x&&(x-=360),0===(v=Om(l,v,x,g.isOrthogonal))?(v=4,180<x&&(x-=360)):90===v?(v=8,270<x&&(x-=360)):180===v?v=2:(v=1,90>x&&(x+=360)),void 0===(D=t.he[u])?(D=new yp(g,x,v),t.he[u]=D):(D.link=g,D.angle=x,D.Gc=v),D.Ru.set(m),u++}}}}for(P.free(f),t.he.sort(jl.prototype.j),p=t.he.length,i=-1,u=f=0;u<p;u++)void 0!==(h=t.he[u])&&(h.Gc!==i&&(i=h.Gc,f=0),h.xo=f,f++);for(i=-1,f=0,u=p-1;0<=u;u--)void 0!==(p=t.he[u])&&(p.Gc!==i&&(i=p.Gc,f=p.xo+1),p.tl=f);if(u=t.he,v=t.port,i=t.node.portSpreading,f=P.alloc(),p=P.alloc(),h=P.alloc(),g=P.alloc(),v.ia(Oe,f),v.ia(hr,p),v.ia(cr,h),v.ia(gn,g),D=x=m=v=0,i===v0)for(var M=0;M<u.length;M++){var T=u[M];if(null!==T){var N=T.link.computeThickness();switch(T.Gc){case 8:x+=N;break;case 2:D+=N;break;case 1:v+=N;break;default:m+=N}}}var I=M=0,k=1,O=T=0;for(N=0;N<u.length;N++){var L=u[N];if(null!==L){if(M!==L.Gc){switch(M=L.Gc){case 8:var b=h;I=g;break;case 2:b=g,I=f;break;case 1:b=f,I=p;break;default:b=p,I=h}switch(T=I.x-b.x,O=I.y-b.y,M){case 8:x>Math.abs(T)?(k=Math.abs(T)/x,x=Math.abs(T)):k=1;break;case 2:D>Math.abs(O)?(k=Math.abs(O)/D,D=Math.abs(O)):k=1;break;case 1:v>Math.abs(T)?(k=Math.abs(T)/v,v=Math.abs(T)):k=1;break;default:m>Math.abs(O)?(k=Math.abs(O)/m,m=Math.abs(O)):k=1}I=0}var U=L.Co;if(i===v0){switch(L=L.link.computeThickness(),L*=k,U.set(b),M){case 8:U.x=b.x+T/2+x/2-I-L/2;break;case 2:U.y=b.y+O/2+D/2-I-L/2;break;case 1:U.x=b.x+T/2-v/2+I+L/2;break;default:U.y=b.y+O/2-m/2+I+L/2}I+=L}else{var X=.5;i===xm&&(X=(L.xo+1)/(L.tl+1)),U.x=b.x+T*X,U.y=b.y+O*X}}}for(P.free(f),P.free(p),P.free(h),P.free(g),b=t.he,u=0;u<b.length;u++)null!==(i=b[u])&&(i.tu=t.computeEndSegmentLength(i));t.Do=n,B.free(l)}n=t.he}for(t=0;t<n.length;t++)if(null!==(l=n[t])&&l.link===e)return l;return null}function yp(t,e,n){this.link=t,this.angle=e,this.Gc=n,this.Ru=new P,this.tl=this.xo=0,this.Co=new P,this.tu=0}function Ot(t){wn(this),this.m=this.H=null,this.wh=this.Zm=!0,this.en=!1,this.im=new P(0,0).freeze(),this.bn=!0,this.mm=this.an=null,this.dn=!1,this.j=null,this.u=0,this.nn=this.ao=null,this.zr=!1,this.dg=this.lj=null,this.ir=!1,t&&Object.assign(this,t)}function _u(t,e,n,i,l,u,h,f){for(n=n.iterator;n.next();){var p=n.value;i&&!p.isTopLevel||null!==l&&!l(p)||!p.canLayout()||(u&&p instanceof J?p.isLinkLabel||(p instanceof yt&&null===p.layout?_u(t,e,p.memberParts,!1,l,u,h,f):(vp(p),e.add(p))):h&&p instanceof H?e.add(p):!f||!p.Tc()||p instanceof J||(vp(p),e.add(p)))}}function vp(t){var e=t.actualBounds;(0===e.width||0===e.height||isNaN(e.width)||isNaN(e.height))&&t.Za()}function bm(t,e){if(null!==t.workerStateChanged){var n={key:t.group?t.group.key:null};void 0!==e&&(n.time=e),null!==t.lj&&(n.running=M1(t.lj)),null!==t.dg&&(n.waiting=M1(t.dg)),t.workerStateChanged(n,t)}}function M1(t){return{vertexes:t.vertexes.count,edges:t.edges.count}}function Fm(t,e){var n=vf(t);if(!n)throw Error("Unknown Layout class: "+t);if(e)for(var i in e)n[i]=e[i]}function vf(t){var e=null;if("function"==typeof t){if(!(e=Ph.get(t))){var n=Ys(t);(e=Ph.get(n))||((e=new P0).pu=t,e.name=n,e.j=t.name,e.hx=N0,Ph.set(n,e),Ph.set(t,e),Ph.set(t.name,e))}}else"string"==typeof t&&(e=Ph.get(t));return e}function nD(t,e){t.zr=!0;var n=vf(t.constructor),i=D1(t,e,!0);i._GoJS="_GoJS",n.Ne.postMessage(i),n.Cl.set(pn(t),t),t.lj=e}function D1(t,e,n){t.onNetworkSerialization(1,n,e,null);var i={};t.serializeLayoutProperties(i,n);var l=[];e.vertexes.each(function(h){var f={};h.serializeVertexProperties(f,n),l.push(f)});var u=[];return e.edges.each(function(h){var f={};h.serializeEdgeProperties(f,n),u.push(f)}),i={id:n?pn(t):t.id,layout:Ys(t.constructor),p:i,hA:l,Ly:u},t.onNetworkSerialization(2,n,e,i),i}function iD(t,e,n){n&&(t.id=e.id);var i=t.diagram,l=t.createNetwork();t.onNetworkSerialization(3,n,l,e);var u=e.hA,h=new vt;u&&u.forEach(function(g){var m=null;null===g.key||null===i||n||(m=i.Lb(g.key)),null!==m?m=l.yj(m):(m=l.createVertex(),l.fg(m)),n&&null!==g.key&&(m.data={yh:g.key}),h.set(g.id,m)});var f=e.Ly,p=new vt;return f&&f.forEach(function(g){var m=null;null===g.key||null===i||n||(m=i.findLinkForKey(g.key));var v=l.createEdge();l.ol(v),v.link=m,n&&null!==g.key&&(v.data={yh:g.key}),p.set(g.id,v)}),u&&u.forEach(function(g){var m=h.get(g.id);m&&m.deserializeVertexProperties(g,h,p,n)}),f&&f.forEach(function(g){var m=p.get(g.id);m&&m.deserializeEdgeProperties(g,h,p,n)}),t.deserializeLayoutProperties(e.p,h,p,n,l),t.onNetworkSerialization(4,n,l,e),l}Ih.className="PositionArray",jl.prototype.toString=function(){for(var t=this.he,e=this.node.toString()+" "+t.length.toString()+":",n=0;n<t.length;n++){var i=t[n];null!==i&&(e+="\n  "+i.toString())}return e},jl.prototype.Al=function(){this.he.length=0},jl.prototype.j=function(t,e){return t===e?0:null===t?-1:null===e?1:t.Gc<e.Gc?-1:t.Gc>e.Gc?1:t.angle<e.angle?-1:t.angle>e.angle?1:0},jl.prototype.computeEndSegmentLength=function(t){var e=t.link,n=e.computeEndSegmentLength(this.node,this.port,Ne,e.fromPort===this.port),i=t.xo;if(0>i)return n;var l=t.tl;if(1>=l||!e.isOrthogonal)return n;e=t.Ru;var u=t.Co;return(2===t.Gc||8===t.Gc)&&(i=l-1-i),((t=2===t.Gc||4===t.Gc)?e.y<u.y:e.x<u.x)?n+8*i:(t?e.y===u.y:e.x===u.x)?n:n+8*(l-1-i)},jl.className="Knot",yp.prototype.toString=function(){return this.link.toString()+" "+this.angle.toString()+" "+this.Gc.toString()+":"+this.xo.toString()+"/"+this.tl.toString()+" "+this.Co.toString()+" "+this.tu.toString()+" "+this.Ru.toString()},yp.className="LinkInfo",Ot.prototype.cloneProtected=function(t){t.Zm=this.Zm,t.wh=this.wh,t.en=this.en,t.im.assign(this.im),t.bn=this.bn,t.an=this.an,t.mm=this.mm,t.dn=!0,t.nn=this.nn,t.ao=this.ao},Ot.prototype.copy=function(){var t=new this.constructor;return this.cloneProtected(t),t},Ot.prototype.serializeLayoutProperties=function(t){t.arrangementOrigin={x:this.arrangementOrigin.x,y:this.arrangementOrigin.y},t.isRouting=this.isRouting},Ot.prototype.deserializeLayoutProperties=function(t){null!==t&&(this.arrangementOrigin=new P(t.arrangementOrigin.x,t.arrangementOrigin.y),this.isRouting=t.isRouting)},Ot.prototype.ob=function(){},Ot.prototype.toString=function(){var t=Ys(this.constructor);return t+="(",null!==this.group&&(t+=" in "+this.group),null!==this.diagram&&(t+=" for "+this.diagram),t+")"},Ot.prototype.D=function(){if(this.isValidLayout){var t=this.diagram;if(null!==t&&!t.undoManager.isUndoingRedoing){var e=t.animationManager;!e.isTicking&&(e.defaultAnimation.isAnimating&&e.wc(),this.isOngoing&&t.ji||this.isInitial&&!t.ji)&&(this.isValidLayout=!1,t.Mb())}}},Ot.prototype.createNetwork=function(){return new Xt(this)},Ot.prototype.makeNetwork=function(t){var e=this.createNetwork();return t instanceof V?(e.eg(t.nodes,!0),e.eg(t.links,!0)):e.eg(t instanceof yt?t.memberParts:t.iterator),e},Ot.prototype.updateParts=function(){if(this.isValidLayout=!0,!this.workerLayout()){var t=this.diagram;if(null===t&&null!==this.network)for(var e=this.network.vertexes.iterator;e.next();){var n=e.value.node;if(null!==n&&null!==(t=n.diagram))break}try{null!==t&&t.Da("Layout"),this.commitLayout()}finally{null!==t&&t.eb("Layout")}}},Ot.prototype.commitLayout=function(){if(null!==this.network){for(var t=this.network.vertexes.iterator;t.next();)t.value.commit();if(this.isRouting)for(t=this.network.edges.iterator;t.next();)t.value.commit()}},Ot.prototype.doLayout=function(t){var e=new Z;t instanceof V?(_u(this,e,t.nodes,!0,this.gh,!0,!1,!0),_u(this,e,t.parts,!0,this.gh,!0,!1,!0)):t instanceof yt?_u(this,e,t.memberParts,!1,this.gh,!0,!1,!0):e.addAll(t.iterator),0<e.count&&(null!==(t=this.diagram)&&t.Da("Layout"),this.doMinimalNoNetworkLayout(e),null!==t&&t.eb("Layout")),this.isValidLayout=!0},Ot.prototype.doMinimalNoNetworkLayout=function(t){var e=Math.ceil(Math.sqrt(t.count));this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin);var n=this.arrangementOrigin.x,i=n,l=this.arrangementOrigin.y,u=0,h=0;for(t=t.iterator;t.next();){var f=t.value;vp(f);var p=f.measuredBounds,g=p.width;p=p.height,f.moveTo(i,l),f instanceof yt&&(f.gh=!1),i+=Math.max(g,50)+20,h=Math.max(h,Math.max(p,50)),u>=e-1?(u=0,i=n,l+=h+20,h=0):u++}},Ot.prototype.doMinimalNetworkLayout=function(){var t=Math.ceil(Math.sqrt(this.network.vertexes.count));this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin);for(var e=this.arrangementOrigin.x,n=e,i=this.arrangementOrigin.y,l=0,u=0,h=this.network.vertexes.iterator;h.next();){var f=h.value.node;if(!(null===f||f instanceof H)&&(vp(f),this.gh(f))){var p=f.measuredBounds,g=p.width;p=p.height,f.moveTo(n,i),f instanceof yt&&(f.gh=!1),n+=Math.max(g,50)+20,u=Math.max(u,Math.max(p,50)),l>=t-1?(l=0,n=e,i+=u+20,u=0):l++}}},Ot.prototype.gh=function(t){return!(t.location.v()&&!(t instanceof yt&&t.gh))},Ot.prototype.hi=function(t,e){var n=this.boundsComputation;return null!==n?(e||(e=new B),n(t,this,e)):e?(e.set(t.actualBounds),e):t.actualBounds},Ot.prototype.Iw=function(t){var e=new Z;return t instanceof V?(_u(this,e,t.nodes,!0,null,!0,!0,!0),_u(this,e,t.links,!0,null,!0,!0,!0),_u(this,e,t.parts,!0,null,!0,!0,!0)):_u(this,e,t instanceof yt?t.memberParts:t.iterator,!1,null,!0,!0,!0),e},Ot.prototype.initialOrigin=function(t){var e=this.group;if(null!==e){var n=e.position.copy();return(isNaN(n.x)||isNaN(n.y))&&n.set(t),null!==(e=e.placeholder)&&(n=e.ia(Oe),(isNaN(n.x)||isNaN(n.y))&&n.set(t),n.x+=(t=e.padding).left,n.y+=t.top),n}return t},Ot.prototype.mayUseWorker=function(){return!!this.mayUseWorkerFunction&&this.mayUseWorkerFunction(this)},Ot.prototype.workerLayout=function(){return!1},Ot.prototype.uy=function(){var t=vf(this.constructor);t&&(null!==t.Ne&&t.Ne.terminate(),t.Ne=null,t.Cl.iteratorValues.each(function(e){e.zr=!1,e.lj=null,e.dg=null,e.ir=!1,bm(e)}),t.Cl.clear())},Ot.prototype.qv=function(){if(typeof Worker>"u"||!S1||typeof self>"u"||typeof self.DedicatedWorkerGlobalScope<"u")return!1;if(!this.mayUseWorker())return this.zr&&(this.ir=!0,this.dg=this.lj=null,bm(this)),!1;var t=vf(this.constructor);return null!==t&&(null===t.Ne&&(t.Ne=new Worker(S1),t.Ne.onerror=function(e){e.preventDefault(),hi("Worker Error at: "+e.filename+" "+e.lineno+" "+e.colno+"\n  "+e.message)},t.Ne.j=function(e){hi("Worker serialization error: "+e)},t.Ne.onmessage=function(e){var n=e.data;if("_GoJS"===n._GoJS)if(n.version&&V.version&&n.version!==V.version)hi("Failure: GoJS v"+V.version+"  Worker v"+n.version);else if(e=t.Cl.get(n.id)){if(t.Cl.remove(n.id),e.zr=!1,e.lj=null,e.ir)e.ir=!1,e.dg=null;else{var i=iD(e,n,!1);e.network=i,e.updateParts(),e.network=null,e.isValidLayout=!0}if(bm(e,n.time),null!==(n=e.dg))e.dg=null;else for(i=t.Cl.iteratorValues;i.next();){var l=i.value;if(null!==(n=l.dg)){l.dg=null;break}}null!==n&&nD(e,n)}},t.Ne.postMessage({_GoJS:"_GoJS",url:t.hx}),Array.isArray(t.scripts)&&t.scripts.forEach(function(e){t.Ne.postMessage({_GoJS:"_GoJS",url:e})}),t.Ne.postMessage({_GoJS:"_GoJS",version:-1})),null!==this.lj?this.dg=this.network:nD(this,this.network),bm(this),this.doMinimalNetworkLayout(),this.network=null,this.isValidLayout=!0)},Ot.prototype.onNetworkSerialization=function(){},Mt.Object.defineProperties(Ot.prototype,{diagram:{get:function(){return this.H},set:function(t){this.H=t}},group:{get:function(){return this.m},set:function(t){this.m!==t&&(this.m=t,null!==t&&(this.H=t.diagram))}},isOngoing:{get:function(){return this.Zm},set:function(t){this.Zm!==t&&(this.Zm=t)}},isInitial:{get:function(){return this.wh},set:function(t){this.wh=t,t||(this.dn=!0)}},isViewportSized:{get:function(){return this.en},set:function(t){this.en!==t&&(this.en=t)&&this.D()}},isRouting:{get:function(){return this.bn},set:function(t){this.bn!==t&&(this.bn=t)}},isRealtime:{get:function(){return this.an},set:function(t){this.an!==t&&(this.an=t)}},isValidLayout:{get:function(){return this.dn},set:function(t){this.dn!==t&&(this.dn=t,t||null!==(t=this.diagram)&&(t.mh=!0))}},network:{get:function(){return this.j},set:function(t){this.j!==t&&(this.j=t,null!==t&&(t.layout=this))}},boundsComputation:{get:function(){return this.mm},set:function(t){this.mm!==t&&(this.mm=t,this.D())}},arrangementOrigin:{get:function(){return this.im},set:function(t){this.im.C(t)||(this.im.assign(t),this.D())}},id:{get:function(){return this.u},set:function(t){this.u=t}},mayUseWorkerFunction:{get:function(){return this.nn},set:function(t){this.nn!==t&&(this.nn=t)}},workerStateChanged:{get:function(){return this.ao},set:function(t){this.ao!==t&&(this.ao=t)}}}),Ot.prototype.useWorker=Ot.prototype.qv,Ot.declareWorkerLayout=Fm,Ot.prototype.cancelWorker=Ot.prototype.uy,Ot.prototype.collectParts=Ot.prototype.Iw,Ot.prototype.getLayoutBounds=Ot.prototype.hi,Ot.prototype.invalidateLayout=Ot.prototype.D;var Ph=new vt,N0="object"==typeof pt.document&&pt.document.currentScript?pt.document.currentScript.src:"",S1=typeof URL<"u"&&"function"==typeof URL.createObjectURL&&"function"==typeof Blob?URL.createObjectURL(new Blob(["self.onmessage=function(e){if(e.data.url){\nimportScripts(e.data.url);}}"],{type:"text/javascript"})):"";function P0(){this.pu=null,this.hx=this.j=this.name="",this.scripts=[],this.Ne=null,this.Cl=new vt}function Xt(t){wn(this),this.Kc=t,this.kf=new Z,this.pe=new Z,this.ds=new vt,this.Yr=new vt}function rD(t,e){if(null===e)return!1;var n=t.kf.remove(e);return n&&null!==(e=e.node)&&t.ds.remove(e),n}function _1(t,e){if(null!==e){t.pe.add(e);var n=e.link;null!==n&&null===t.qo(n)&&t.Yr.add(n,e),e.network=t}}function T1(t,e){null!==e&&t.pe.remove(e)&&null!==(e=e.link)&&t.Yr.remove(e)}function E1(t,e,n){if(null!==n&&n.network!==e){rD(t,n),e.fg(n);for(var i=n.sourceEdges;i.next();){var l=i.value;l.network!==e&&(T1(t,l),_1(e,l),E1(t,e,l.fromVertex))}for(i=n.destinationEdges;i.next();)(n=i.value).network!==e&&(T1(t,n),_1(e,n),E1(t,e,n.toVertex))}}function Xe(t){wn(this),this.nb=t,this.j=new B(0,0,10,10).freeze(),this.m=new P(5,5).freeze(),this.Lh=this.qb=null,this.wd=new q,this.Jd=new q}function I1(t,e){return e=e.Lh,(t=t.Lh)?e?(t=t.text)<(e=e.text)?-1:t>e?1:0:1:null!==e?-1:0}function qn(t){wn(this),this.hb=t,this.jd=this.ad=this.Pk=this.qb=null}function kn(t){Ot.call(this),this.isViewportSized=!0,this.bo=this.co=NaN,this.pg=new dt(NaN,NaN).freeze(),this.gf=new dt(10,10).freeze(),this.Fb=wp,this.Nb=xp,this.fd=Cp,this.Zc=Sa,t&&Object.assign(this,t)}function Sa(t,e){return(t=t.text)<(e=e.text)?-1:t>e?1:0}Ot.className="Layout",Ot.GoJSScriptURL=N0,Ot.declareWorkerLayout=Fm,typeof self<"u"&&typeof self.DedicatedWorkerGlobalScope<"u"&&typeof self<"u"&&typeof self.DedicatedWorkerGlobalScope<"u"&&(self.onmessage=function(t){if("_GoJS"===(t=t.data)._GoJS)if(t.url)importScripts(t.url);else if(t.version)self.postMessage({_GoJS:"_GoJS",version:V.version},void 0);else{var e=performance.now(),n=null;t.layout&&(n=vf(t.layout));var i=null;if(n&&n.pu&&(i=new n.pu),!i)throw Error("no registered Worker Layout: "+t.layout);i.network=iD(i,t,!0),i.workerLayout=function(){var l=D1(i,i.network,!1);return l._GoJS="_GoJS",l.time=performance.now()-e,self.postMessage(l,void 0),!0},i.doLayout(new q)}}),Xt.prototype.clear=function(){if(this.kf)for(var t=this.kf.iterator;t.next();)t.value.clear();if(this.pe)for(t=this.pe.iterator;t.next();)t.value.clear();this.kf=new Z,this.pe=new Z,this.ds=new vt,this.Yr=new vt},Xt.prototype.toString=function(t){void 0===t&&(t=0);var e="LayoutNetwork"+(null!==this.layout?"("+this.layout.toString()+")":"");if(0>=t)return e;if(e+=" vertexes: "+this.kf.count+" edges: "+this.pe.count,1<t){for(var n=this.kf.iterator;n.next();)e+="\n    "+n.value.toString(t-1);for(n=this.pe.iterator;n.next();)e+="\n    "+n.value.toString(t-1)}return e},Xt.prototype.createVertex=function(){return new Xe(this)},Xt.prototype.createEdge=function(){return new qn(this)},Xt.prototype.eg=function(t,e,n){if(null!==t){for(void 0===e&&(e=!1),void 0===n&&(n=null),null===n&&(n=function(h){if(h instanceof J)return!h.isLinkLabel;if(h instanceof H){var f=h.fromNode;return null!==f&&!f.isLinkLabel&&!(null===(h=h.toNode)||h.isLinkLabel)}return!1}),t=t.iterator;t.next();){var i=t.value;if(i instanceof J&&(!e||i.isTopLevel)&&i.canLayout()&&n(i))if(i instanceof yt&&null===i.layout)this.eg(i.memberParts,!1);else if(null===this.ei(i)){var l=this.createVertex();l.node=i,this.fg(l)}}for(t.reset();t.next();)if((i=t.value)instanceof H&&(!e||i.isTopLevel)&&i.canLayout()&&n(i)&&null===this.qo(i)){var u=i.fromNode;l=i.toNode,null!==u&&null!==l&&u!==l&&(u=this.findGroupVertex(u),l=this.findGroupVertex(l),null!==u&&null!==l&&this.Qj(u,l,i))}}},Xt.prototype.findGroupVertex=function(t){if(null===t)return null;var e=t.findVisibleNode();if(null===e)return null;if(null!==(t=this.ei(e)))return t;for(e=e.containingGroup;null!==e;){if(null!==(t=this.ei(e)))return t;e=e.containingGroup}return null},(_=Xt.prototype).fg=function(t){if(null!==t){this.kf.add(t);var e=t.node;null!==e&&this.ds.add(e,t),t.network=this}},_.yj=function(t){if(null===t)return null;var e=this.ei(t);return null===e&&((e=this.createVertex()).node=t,this.fg(e)),e},_.su=function(t){if(null!==t&&rD(this,t)){for(var e=t.wd,n=e.count-1;0<=n;n--){var i=e.K(n);this.Gj(i)}for(t=(e=t.Jd).count-1;0<=t;t--)n=e.K(t),this.Gj(n)}},_.Gy=function(t){null!==t&&null!==(t=this.ei(t))&&this.su(t)},_.ei=function(t){return null===t?null:this.ds.I(t)},_.ol=function(t){if(null!==t){_1(this,t);var e=t.toVertex;null!==e&&e.iu(t),null!==(e=t.fromVertex)&&e.gu(t)}},_.ky=function(t){if(null===t)return null;var e=t.fromNode,n=t.toNode,i=this.qo(t);return null===i?((i=this.createEdge()).link=t,null!==e&&(i.fromVertex=this.yj(e)),null!==n&&(i.toVertex=this.yj(n)),this.ol(i)):(i.fromVertex=null!==e?this.yj(e):null,i.toVertex=null!==n?this.yj(n):null),i},_.Gj=function(t){if(null!==t){var e=t.toVertex;null!==e&&e.ru(t),null!==(e=t.fromVertex)&&e.qu(t),T1(this,t)}},_.Fy=function(t){null!==t&&null!==(t=this.qo(t))&&this.Gj(t)},_.qo=function(t){return null===t?null:this.Yr.I(t)},_.Qj=function(t,e,n){if(null===t||null===e)return null;if(t.network===this&&e.network===this){var i=this.createEdge();return i.link=n,i.fromVertex=t,i.toVertex=e,this.ol(i),i}return null},_.Ol=function(t){if(null!==t){var e=t.fromVertex,n=t.toVertex;null!==e&&null!==n&&(e.qu(t),n.ru(t),t.Ol(),e.iu(t),n.gu(t))}},_.oo=function(){for(var t=oe(),e=this.pe.iterator;e.next();){var n=e.value;n.fromVertex===n.toVertex&&t.push(n)}for(e=t.length,n=0;n<e;n++)this.Gj(t[n]);Nt(t)},Xt.prototype.deleteArtificialVertexes=function(){for(var t=oe(),e=this.kf.iterator;e.next();){var n=e.value;null===n.node&&null===n.data&&t.push(n)}for(n=t.length,e=0;e<n;e++)this.su(t[e]);for(e=oe(),n=this.pe.iterator;n.next();){var i=n.value;null===i.link&&null===i.data&&e.push(i)}for(n=e.length,i=0;i<n;i++)this.Gj(e[i]);Nt(t),Nt(e)},Xt.prototype.Ix=function(t){void 0===t&&(t=!0),t&&(this.deleteArtificialVertexes(),function gT(t){for(var e=oe(),n=t.pe.iterator;n.next();){var i=n.value;null!==i.fromVertex&&null!==i.toVertex||e.push(i)}for(n=e.length,i=0;i<n;i++)t.Gj(e[i]);Nt(e)}(this),this.oo()),t=new q;for(var e=!0;e;){e=!1;for(var n=this.kf.iterator;n.next();){var i=n.value;if(0<i.wd.count||0<i.Jd.count){e=this.layout.createNetwork(),t.add(e),E1(this,e,i),e=!0;break}}}return t.sort(function(l,u){return null===l||null===u||l===u?0:u.vertexes.count-l.vertexes.count}),t},Xt.prototype.My=function(){for(var t=new Z,e=this.kf.iterator;e.next();)t.add(e.value.node);for(e=this.pe.iterator;e.next();)t.add(e.value.link);return t},Mt.Object.defineProperties(Xt.prototype,{layout:{get:function(){return this.Kc},set:function(t){null!==t&&(this.Kc=t)}},vertexes:{get:function(){return this.kf}},edges:{get:function(){return this.pe}}}),Xt.prototype.findAllParts=Xt.prototype.My,Xt.prototype.splitIntoSubNetworks=Xt.prototype.Ix,Xt.prototype.deleteSelfEdges=Xt.prototype.oo,Xt.prototype.reverseEdge=Xt.prototype.Ol,Xt.prototype.linkVertexes=Xt.prototype.Qj,Xt.prototype.findEdge=Xt.prototype.qo,Xt.prototype.deleteLink=Xt.prototype.Fy,Xt.prototype.deleteEdge=Xt.prototype.Gj,Xt.prototype.addLink=Xt.prototype.ky,Xt.prototype.addEdge=Xt.prototype.ol,Xt.prototype.findVertex=Xt.prototype.ei,Xt.prototype.deleteNode=Xt.prototype.Gy,Xt.prototype.deleteVertex=Xt.prototype.su,Xt.prototype.addNode=Xt.prototype.yj,Xt.prototype.addVertex=Xt.prototype.fg,Xt.prototype.addParts=Xt.prototype.eg,Xt.className="LayoutNetwork",Xe.prototype.serializeVertexProperties=function(t){t.id=pn(this),t.key=this.node?this.node.key:this.data?this.data.yh:void 0,void 0===t.key&&(t.key=null),t.x=this.bounds.x,t.y=this.bounds.y,t.iA=this.bounds.width,t.pz=this.bounds.height,t.fx=this.focus.x,t.fy=this.focus.y;var e=[];this.wd.each(function(i){e.push(pn(i))}),t.Gx=e;var n=[];this.Jd.each(function(i){n.push(pn(i))}),t.Ow=n},Xe.prototype.deserializeVertexProperties=function(t,e,n){if(null!==t){this.x=t.x,this.y=t.y,this.width=t.iA,this.height=t.pz,this.focusX=t.fx,this.focusY=t.fy;var i=this;t.Gx&&t.Gx.forEach(function(l){(l=n.get(l))&&i.wd.add(l)}),t.Ow&&t.Ow.forEach(function(l){(l=n.get(l))&&i.Jd.add(l)})}},Xe.prototype.clear=function(){this.Lh=this.qb=null,this.wd=new q,this.Jd=new q},Xe.prototype.toString=function(t){void 0===t&&(t=0);var e="LayoutVertex#"+pn(this);if(0<t&&(e+=null!==this.node?"("+this.node.toString()+")":"",1<t)){t="";for(var n=!0,i=this.wd.iterator;i.next();){var l=i.value;n?n=!1:t+=",",t+=l.toString(0)}for(l="",n=!0,i=this.Jd.iterator;i.next();)n?n=!1:l+=",",l+=i.value.toString(0);e+=" sources: "+t+" destinations: "+l}return e},Xe.prototype.commit=function(){var t=this.qb;if(null!==t){var e=this.bounds,n=t.bounds;jt(n)?(n.x=e.x,n.y=e.y,n.width=e.width,n.height=e.height):t.bounds=e.copy()}else if(null!==(t=this.node)){if(e=this.bounds,!(t instanceof yt)){n=B.alloc();var i=this.network.layout.hi(t,n),l=t.locationObject.ia(ut);if(i.v()&&l.v())return t.moveTo(e.x+this.focusX-(l.x-i.x),e.y+this.focusY-(l.y-i.y)),void B.free(n);B.free(n)}t.moveTo(e.x,e.y)}},Xe.prototype.iu=function(t){null!==t&&(this.wd.contains(t)||this.wd.add(t))},Xe.prototype.ru=function(t){null!==t&&this.wd.remove(t)},Xe.prototype.gu=function(t){null!==t&&(this.Jd.contains(t)||this.Jd.add(t))},Xe.prototype.qu=function(t){null!==t&&this.Jd.remove(t)},Mt.Object.defineProperties(Xe.prototype,{sourceEdgesArrayAccess:{get:function(){return this.wd._dataArray}},destinationEdgesArrayAccess:{get:function(){return this.Jd._dataArray}},data:{get:function(){return this.qb},set:function(t){if(this.qb=t,null!==t&&t.bounds){var e=t.bounds;t=e.x;var n=e.y,i=e.width;this.m.h(i/2,(e=e.height)/2),this.j.h(t,n,i,e)}}},node:{get:function(){return this.Lh},set:function(t){if(this.Lh!==t){this.Lh=t,t.Za();var e=this.network.layout,n=B.alloc(),i=e.hi(t,n);e=i.x;var l=i.y,u=i.width;if(i=i.height,isNaN(e)&&(e=0),isNaN(l)&&(l=0),this.j.h(e,l,u,i),B.free(n),!(t instanceof yt)&&(t=t.locationObject.ia(ut)).v())return void this.m.h(t.x-e,t.y-l);this.m.h(u/2,i/2)}}},bounds:{get:function(){return this.j},set:function(t){this.j.C(t)||this.j.assign(t)}},focus:{get:function(){return this.m},set:function(t){this.m.C(t)||this.m.assign(t)}},centerX:{get:function(){return this.j.x+this.m.x},set:function(t){var e=this.j;e.x+this.m.x!==t&&(e.ja(),e.x=t-this.m.x,e.freeze())}},centerY:{get:function(){return this.j.y+this.m.y},set:function(t){var e=this.j;e.y+this.m.y!==t&&(e.ja(),e.y=t-this.m.y,e.freeze())}},focusX:{get:function(){return this.m.x},set:function(t){var e=this.m;e.x!==t&&(e.ja(),e.x=t,e.freeze())}},focusY:{get:function(){return this.m.y},set:function(t){var e=this.m;e.y!==t&&(e.ja(),e.y=t,e.freeze())}},x:{get:function(){return this.j.x},set:function(t){var e=this.j;e.x!==t&&(e.ja(),e.x=t,e.freeze())}},y:{get:function(){return this.j.y},set:function(t){var e=this.j;e.y!==t&&(e.ja(),e.y=t,e.freeze())}},width:{get:function(){return this.j.width},set:function(t){var e=this.j;e.width!==t&&(e.ja(),e.width=t,e.freeze())}},height:{get:function(){return this.j.height},set:function(t){var e=this.j;e.height!==t&&(e.ja(),e.height=t,e.freeze())}},network:{get:function(){return this.nb},set:function(t){this.nb=t}},sourceVertexes:{get:function(){for(var t=new Z,e=this.sourceEdges;e.next();)t.add(e.value.fromVertex);return t.iterator}},destinationVertexes:{get:function(){for(var t=new Z,e=this.destinationEdges;e.next();)t.add(e.value.toVertex);return t.iterator}},vertexes:{get:function(){for(var t=new Z,e=this.sourceEdges;e.next();)t.add(e.value.fromVertex);for(e=this.destinationEdges;e.next();)t.add(e.value.toVertex);return t.iterator}},sourceEdges:{get:function(){return this.wd.iterator}},destinationEdges:{get:function(){return this.Jd.iterator}},edges:{get:function(){for(var t=new q,e=this.sourceEdges;e.next();)t.add(e.value);for(e=this.destinationEdges;e.next();)t.add(e.value);return t.iterator}},edgesCount:{get:function(){return this.wd.count+this.Jd.count}}}),Xe.prototype.deleteDestinationEdge=Xe.prototype.qu,Xe.prototype.addDestinationEdge=Xe.prototype.gu,Xe.prototype.deleteSourceEdge=Xe.prototype.ru,Xe.prototype.addSourceEdge=Xe.prototype.iu,Xe.className="LayoutVertex",Xe.standardComparer=I1,Xe.smartComparer=function(t,e){if(null!==t){if(null!==e){var n=e.Lh;if(null!==(t=t.Lh)){if(null!==n){for(e=t.text.toLocaleLowerCase().split(/([+-]?[.]?\d+(?:\.\d*)?(?:e[+-]?\d+)?)/),t=n.text.toLocaleLowerCase().split(/([+-]?[.]?\d+(?:\.\d*)?(?:e[+-]?\d+)?)/),n=0;n<e.length;n++)if(""!==t[n]&&void 0!==t[n]){var i=parseFloat(e[n]),l=parseFloat(t[n]);if(isNaN(i)){if(!isNaN(l))return 1;if(0!==e[n].localeCompare(t[n]))return e[n].localeCompare(t[n])}else{if(isNaN(l))return-1;if(i-l!=0)return i-l}}else if(""!==e[n])return 1;return""!==t[n]&&void 0!==t[n]?-1:0}return 1}return null!==n?-1:0}return 1}return null!==e?-1:0},qn.prototype.clear=function(){this.jd=this.ad=this.Pk=this.qb=null},qn.prototype.serializeEdgeProperties=function(t){t.id=pn(this),t.key=this.link?this.link.key:this.data?this.data.yh:void 0,void 0===t.key&&(t.key=null),t.from=this.fromVertex?pn(this.fromVertex):null,t.dA=this.toVertex?pn(this.toVertex):null},qn.prototype.deserializeEdgeProperties=function(t,e){if(null!==t){var n=e.get(t.from);n&&(this.fromVertex=n),(t=e.get(t.dA))&&(this.toVertex=t)}},qn.prototype.toString=function(t){void 0===t&&(t=0);var e="LayoutEdge#"+pn(this);return 0<t&&(e+=null!==this.Pk?"("+this.Pk.toString()+")":"",1<t&&(e+=" "+(this.ad?this.ad.toString():"null")+" --\x3e "+(this.jd?this.jd.toString():"null"))),e},qn.prototype.Ol=function(){var t=this.ad;this.ad=this.jd,this.jd=t},qn.prototype.commit=function(){},qn.prototype.bx=function(t){return this.jd===t?this.ad:this.ad===t?this.jd:null},Mt.Object.defineProperties(qn.prototype,{network:{get:function(){return this.hb},set:function(t){this.hb=t}},data:{get:function(){return this.qb},set:function(t){this.qb!==t&&(this.qb=t)}},link:{get:function(){return this.Pk},set:function(t){this.Pk!==t&&(this.Pk=t)}},fromVertex:{get:function(){return this.ad},set:function(t){this.ad!==t&&(this.ad=t)}},toVertex:{get:function(){return this.jd},set:function(t){this.jd!==t&&(this.jd=t)}}}),qn.prototype.getOtherVertex=qn.prototype.bx,qn.className="LayoutEdge",Ht(kn,Ot),kn.prototype.cloneProtected=function(t){Ot.prototype.cloneProtected.call(this,t),t.co=this.co,t.bo=this.bo,t.pg.assign(this.pg),t.gf.assign(this.gf),t.Fb=this.Fb,t.Nb=this.Nb,t.fd=this.fd,t.Zc=this.Zc},kn.prototype.ob=function(t){t.classType===kn?t===Cp||t===hl||t===Rm||t===xf?this.sorting=t:t===xp||t===Jr?this.arrangement=t:t===wp||t===wf?this.alignment=t:Y("Unknown enum value: "+t):Ot.prototype.ob.call(this,t)},kn.prototype.doLayout=function(t){this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin);var e=this.Iw(t);t=this.diagram;for(var n=e.copy().iterator;n.next();){var i=n.value;if(!i.eh()||null===i.fromNode&&null===i.toNode){if(i.Za(),i instanceof yt)for(i=i.memberParts;i.next();)e.remove(i.value)}else e.remove(i)}var l=e.Ea();if(0!==l.length){switch(this.sorting){case xf:l.reverse();break;case Cp:l.sort(this.comparer);break;case hl:l.sort(this.comparer),l.reverse()}var u=this.wrappingColumn;isNaN(u)&&(u=0);var h=this.wrappingWidth;switch(isNaN(h)&&null!==t?(e=t.padding,h=Math.max(t.viewportBounds.width-e.left-e.right,0)):h=Math.max(this.wrappingWidth,0),0>=u&&0>=h&&(u=1),e=this.spacing.width,isFinite(e)||(e=0),n=this.spacing.height,isFinite(n)||(n=0),null!==t&&t.Da("Layout"),i=[],this.alignment){case wf:var f=e,p=n,g=B.alloc(),m=Math.max(this.cellSize.width,1);if(!isFinite(m))for(var v=m=0;v<l.length;v++){var x=this.hi(l[v],g);m=Math.max(m,x.width)}if(m=Math.max(m+f,1),v=Math.max(this.cellSize.height,1),!isFinite(v))for(x=v=0;x<l.length;x++){var D=this.hi(l[x],g);v=Math.max(v,D.height)}v=Math.max(v+p,1),x=this.arrangement;for(var M=D=this.arrangementOrigin.x,T=this.arrangementOrigin.y,N=0,I=0,k=0;k<l.length;k++){var O=l[k],L=this.hi(O,g),b=Math.ceil((L.width+f)/m)*m,U=Math.ceil((L.height+p)/v)*v;if(x===Jr)var X=Math.abs(M-L.width);else X=M+L.width;(0<u&&N>u-1||0<h&&0<N&&X-D>h)&&(i.push(new B(0,T,h+f,I)),N=0,M=D,T+=I,I=0),I=Math.max(I,U),O.moveTo(M+(L=x===Jr?-L.width:0),T),x===Jr?M-=b:M+=b,N++}i.push(new B(0,T,h+f,I)),B.free(g);break;case wp:for(p=h,m=u,v=e,x=n,h=B.alloc(),D=Math.max(this.cellSize.width,1),u=T=g=0,f=P.alloc(),M=0;M<l.length;M++)N=this.hi(I=l[M],h),I=kl(I,I.locationObject,I.locationSpot,f),g=Math.max(g,I.x),T=Math.max(T,N.width-I.x),u=Math.max(u,I.y);(M=this.arrangement)===Jr?g+=v:T+=v,D=isFinite(D)?Math.max(D+v,1):Math.max(g+T,1);var nt=I=this.arrangementOrigin.x;for(k=this.arrangementOrigin.y,T=0,p>=g&&(p-=g),g=O=0,b=Math.max(this.cellSize.height,1),L=u=0,U=!0,N=P.alloc(),X=0;X<l.length;X++){var et=l[X],Q=this.hi(et,h),G=kl(et,et.locationObject,et.locationSpot,f);if(0<T?M===Jr?(nt=(nt-I-(Q.width-G.x))/D,nt=(nt=F.ca(Math.round(nt),nt)?Math.round(nt):Math.floor(nt))*D+I):(nt=(nt-I+G.x)/D,nt=(nt=F.ca(Math.round(nt),nt)?Math.round(nt):Math.ceil(nt))*D+I):O=M===Jr?nt+G.x+Q.width:nt-G.x,M===Jr)var xt=-(nt+G.x)+O;else xt=nt+Q.width-G.x-O;if(0<m&&T>m-1||0<p&&0<T&&xt>p){for(i.push(new B(0,U?k-u:k,p+v,L+u+x)),nt=0;nt<T&&X!==T;nt++){var ft=kl(xt=l[X-T+nt],xt.locationObject,xt.locationSpot,N);xt.moveTo(xt.position.x,xt.position.y+u-ft.y)}L+=x,k=U?k+L:k+(L+u),T=L=u=0,nt=I,U=!1}nt===I&&(g=M===Jr?Math.max(g,Q.width-G.x):Math.min(g,-G.x)),u=Math.max(u,G.y),L=Math.max(L,Q.height-G.y),isFinite(b)&&(L=Math.max(L,Math.max(Q.height,b)-G.y)),et.moveTo(nt-G.x,U?k-G.y:k),M===Jr?nt-=G.x+v:nt+=Q.width-G.x+v,T++}if(i.push(new B(0,k,p+v,(U?L:L+u)+x)),l.length!==T)for(p=0;p<T;p++)v=kl(m=l[l.length-T+p],m.locationObject,m.locationSpot,f),m.moveTo(m.position.x,m.position.y+u-v.y);if(P.free(f),P.free(N),M===Jr)for(l=0;l<i.length;l++)(u=i[l]).width+=g,u.x-=g;else for(l=0;l<i.length;l++)(u=i[l]).x>g&&(u.width+=u.x-g,u.x=g);B.free(h)}for(f=u=h=l=0;f<i.length;f++)p=i[f],l=Math.min(l,p.x),h=Math.min(h,p.y),u=Math.max(u,p.x+p.width);this.commitLayers(i,new P(this.arrangement===Jr?l+e/2-(u+l):l-e/2,h-n/2)),null!==t&&t.eb("Layout"),this.isValidLayout=!0}},kn.prototype.commitLayers=function(){},Mt.Object.defineProperties(kn.prototype,{wrappingWidth:{get:function(){return this.co},set:function(t){this.co!==t&&(0<t||isNaN(t))&&(this.co=t,this.isViewportSized=isNaN(t),this.D())}},wrappingColumn:{get:function(){return this.bo},set:function(t){this.bo!==t&&(0<t||isNaN(t))&&(this.bo=t,this.D())}},cellSize:{get:function(){return this.pg},set:function(t){this.pg.C(t)||(this.pg.assign(t),this.D())}},spacing:{get:function(){return this.gf},set:function(t){this.gf.C(t)||(this.gf.assign(t),this.D())}},alignment:{get:function(){return this.Fb},set:function(t){this.Fb===t||t!==wp&&t!==wf||(this.Fb=t,this.D())}},arrangement:{get:function(){return this.Nb},set:function(t){this.Nb===t||t!==xp&&t!==Jr||(this.Nb=t,this.D())}},sorting:{get:function(){return this.fd},set:function(t){this.fd===t||t!==Rm&&t!==xf&&t!==Cp&&t!==hl||(this.fd=t,this.D())}},comparer:{get:function(){return this.Zc},set:function(t){this.Zc!==t&&(this.Zc=t,this.D())}}});var wf=new W(kn,"Position",0),wp=new W(kn,"Location",1),xp=new W(kn,"LeftToRight",2),Jr=new W(kn,"RightToLeft",3),Rm=new W(kn,"Forward",4),xf=new W(kn,"Reverse",5),Cp=new W(kn,"Ascending",6),hl=new W(kn,"Descending",7);function Vt(){this.vn=new Z,this.kn=new Z,this.Ma=new Z,this.Se=new vt,this.Re=new vt,this.Wi=new vt,this.H=null,this.Xo=!1}function N1(t,e,n){if(null!=e&&!t.diagram.undoManager.isUndoingRedoing&&!t.Se.contains(e)){void 0===n&&(n=!0);t:{if(null!=e&&!t.H.undoManager.isUndoingRedoing&&!t.Se.contains(e)){var i=t.uo(e),l=P1(t,e,i);if(null!==l&&(uo(l),null!==(l=l.copy()))){var u=t.diagram.skipsModelSourceBindings;t.diagram.skipsModelSourceBindings=!0,l.Jf=i,l.qb=e,t.Xo&&(l.zg="Tool"),t.diagram.add(l),l.qb=null,l.data=e,t.diagram.skipsModelSourceBindings=u,i=l;break t}}i=null}null!==i&&n&&t.resolveReferencesForData(e)}}function P1(t,e,n){var i=(t=t.H).model;return i.Oj()&&i.Ku(e)?null===(e=t.groupTemplateMap.I(n))&&null===(e=t.groupTemplateMap.I(""))&&(Ah||(Ah=!0,hi('No Group template found for category "'+n+'"'),hi("  Using default group template")),e=t.Rx):null===(e=t.nodeTemplateMap.I(n))&&null===(e=t.nodeTemplateMap.I(""))&&(Vm||(Vm=!0,hi('No Node template found for category "'+n+'"'),hi("  Using default node template")),e=t.Tx),e}function jm(t,e,n){for(var i in n){var l=e[i],u=n[i];if(yn(u)){if(!yn(l)||l.length<u.length)return!1;for(var h=0;h<l.length;h++){var f=u[h];if(void 0!==f&&!A1(t,l[h],f))return!1}}else if(!A1(t,l,u))return!1}return!0}function A1(t,e,n){if("function"==typeof n){if(!n(e))return!1}else if(n instanceof RegExp){if(!e||!n.test(e.toString()))return!1}else if(jt(e)&&jt(n)){if(!jm(t,e,n))return!1}else if(e!==n)return!1;return!0}function A0(t,e){var n=e.xh;if(yn(n)){var i=t.Wi.I(n);if(null===i)(i=[]).push(e),t.Wi.add(n,i);else{for(t=0;t<i.length;t++)if(i[t]===e)return;i.push(e)}}}function Cf(t,e,n){Zn(e,function(h){for(var f=(h=h.R.s).length,p=0;p<f;p++)Mv(n,h[p])});var i=e.xh;if(yn(i)){var l=t.Wi.I(i);if(null!==l)for(var u=0;u<l.length;u++)if(l[u]===e){l.splice(u,1),0===l.length&&t.Wi.remove(i);break}}}function _a(t,e,n,i,l){if(null===e||l&&!e.canCopy())return null;if(i.contains(e))return i.I(e);var u=t.copyPartData(e,n);if(!(u instanceof lt))return null;if(u.isSelected=!1,u.isHighlighted=!1,i.add(e,u),e instanceof J){for(var h=e.linksConnected;h.next();){var f=h.value;if(f.fromNode===e){var p=i.I(f);null!==p&&(p.fromNode=u)}f.toNode===e&&null!==(f=i.I(f))&&(f.toNode=u)}if(e instanceof yt&&u instanceof yt)for(e=e.memberParts;e.next();)(h=_a(t,e.value,n,i,l))instanceof H||null===h||(h.containingGroup=u)}else if(e instanceof H&&u instanceof H)for(null!==(h=e.fromNode)&&null!==(h=i.I(h))&&(u.fromNode=h),null!==(h=e.toNode)&&null!==(h=i.I(h))&&(u.toNode=h),e=e.labelNodes;e.next();)null!==(h=_a(t,e.value,n,i,l))&&h instanceof J&&(h.labeledLink=u);return u}kn.className="GridLayout",kn.standardComparer=Sa,kn.smartComparer=function(t,e){if(null!==t){if(null!==e){t=t.text.toLocaleLowerCase().split(/([+-]?[.]?\d+(?:\.\d*)?(?:e[+-]?\d+)?)/),e=e.text.toLocaleLowerCase().split(/([+-]?[.]?\d+(?:\.\d*)?(?:e[+-]?\d+)?)/);for(var n=0;n<t.length;n++)if(""!==e[n]&&void 0!==e[n]){var i=parseFloat(t[n]),l=parseFloat(e[n]);if(isNaN(i)){if(!isNaN(l))return 1;if(0!==t[n].localeCompare(e[n]))return t[n].localeCompare(e[n])}else{if(isNaN(l))return-1;if(i-l!=0)return i-l}}else if(""!==t[n])return 1;return""!==e[n]&&void 0!==e[n]?-1:0}return 1}return null!==e?-1:0},kn.Position=wf,kn.Location=wp,kn.LeftToRight=xp,kn.RightToLeft=Jr,kn.Forward=Rm,kn.Reverse=xf,kn.Ascending=Cp,kn.Descending=hl,(_=Vt.prototype).clear=function(){this.vn.clear(),this.kn.clear(),this.Ma.clear(),this.Se.clear(),this.Re.clear(),this.Wi.clear()},_.Le=function(t){this.H=t},_.ii=function(t){if(t instanceof J){if(this.vn.add(t),t instanceof yt){var e=t.containingGroup;null===e?this.H.Uh.add(t):e.Vk.add(t),null!==(e=t.layout)&&(e.diagram=this.H)}}else t instanceof H?this.kn.add(t):t instanceof Pt||this.Ma.add(t);null===(e=t.data)||t instanceof Pt||(t instanceof H?this.Re.add(e,t):this.Se.add(e,t))},_.lc=function(t){if(t.zj(),t instanceof J){if(this.vn.remove(t),t instanceof yt){var e=t.containingGroup;null===e?this.H.Uh.remove(t):e.Vk.remove(t),null!==(e=t.layout)&&(e.diagram=null)}}else t instanceof H?this.kn.remove(t):t instanceof Pt||this.Ma.remove(t);null===(e=t.data)||t instanceof Pt||(t instanceof H?this.Re.remove(e):this.Se.remove(e))},_.Od=function(){var t=this.H;if(null!==t){for(var e=t.nodeTemplateMap.iterator;e.next();){var n=e.value,i=e.key;(!n.Tc()||n instanceof yt)&&Y('Invalid node template in Diagram.nodeTemplateMap: template for "'+i+'" must be a Node or a simple Part, not a Group or Link: '+n)}for(e=t.groupTemplateMap.iterator;e.next();)i=e.key,(n=e.value)instanceof yt||Y('Invalid group template in Diagram.groupTemplateMap: template for "'+i+'" must be a Group, not a normal Node or Link: '+n);for(e=t.linkTemplateMap.iterator;e.next();)i=e.key,(n=e.value)instanceof H||Y('Invalid link template in Diagram.linkTemplateMap: template for "'+i+'" must be a Link, not a normal Node or simple Part: '+n);for(e=oe(),n=t.selection.iterator;n.next();)(i=n.value.data)&&e.push(i);for(n=oe(),t=t.highlighteds.iterator;t.next();)(i=t.value.data)&&n.push(i);for(t=oe(),i=this.nodes.iterator;i.next();){var l=i.value;null!==l.data&&(t.push(l.data),t.push(l.location))}for(i=this.links.iterator;i.next();)null!==(l=i.value).data&&(t.push(l.data),t.push(l.location));for(i=this.parts.iterator;i.next();)null!==(l=i.value).data&&(t.push(l.data),t.push(l.location));for(this.removeAllModeledParts(),this.addAllModeledParts(),i=0;i<e.length;i++)null!==(l=this.Ec(e[i]))&&(l.isSelected=!0);for(i=0;i<n.length;i++)null!==(l=this.Ec(n[i]))&&(l.isHighlighted=!0);for(i=0;i<t.length;i+=2)null!==(l=this.Ec(t[i]))&&(l.location=t[i+1]);Nt(e),Nt(n),Nt(t)}},Vt.prototype.addAllModeledParts=function(){this.addModeledParts(this.diagram.model.nodeDataArray)},Vt.prototype.addModeledParts=function(t,e){var n=this,i=this.diagram.model;t.forEach(function(l){i.lb(l)&&N1(n,l,!1)}),t.forEach(function(l){i.lb(l)&&n.resolveReferencesForData(l)}),!1!==e&&Og(this.diagram,!1)},Vt.prototype.insertLink=function(){return null},Vt.prototype.resolveReferencesForData=function(){},Vt.prototype.uo=function(t){return this.H.model.uo(t)},Vt.prototype.getLinkCategoryForData=function(){return""},Vt.prototype.setLinkCategoryForData=function(){},Vt.prototype.setFromNodeForLink=function(){},Vt.prototype.setToNodeForLink=function(){},Vt.prototype.findLinkTemplateForCategory=function(t){var e=this.H,n=e.linkTemplateMap.I(t);return null===n&&null===(n=e.linkTemplateMap.I(""))&&(Bm||(Bm=!0,hi('No Link template found for category "'+t+'"'),hi("  Using default link template")),n=e.Sx),n},Vt.prototype.removeAllModeledParts=function(){this.gs(this.diagram.model.nodeDataArray)},Vt.prototype.gs=function(t){var e=this;t.forEach(function(n){e.Lo(n)})},Vt.prototype.Lo=function(t){null!==(t=this.Ec(t))&&(Ig(this.diagram,t,!1),this.unresolveReferencesForPart(t))},Vt.prototype.unresolveReferencesForPart=function(){},Vt.prototype.removeDataForLink=function(){},Vt.prototype.findPartForKey=function(t){return null==t?null:null!==(t=this.H.model.dc(t))?this.Se.I(t):null},Vt.prototype.Lb=function(t){return null==t||null===(t=this.H.model.dc(t))?null:(t=this.Se.I(t))instanceof J?t:null},Vt.prototype.findLinkForKey=function(){return null},(_=Vt.prototype).Ec=function(t){if(null===t)return null;var e=this.Se.I(t);return null!==e?e:e=this.Re.I(t)},_.ci=function(t){return null===t?null:(t=this.Se.I(t))instanceof J?t:null},_.Dc=function(t){return null===t?null:this.Re.I(t)},_.Jr=function(t){for(var e=0;e<arguments.length;++e);e=new Z;for(var n=this.vn.iterator;n.next();){var i=n.value,l=i.data;if(null!==l)for(var u=0;u<arguments.length;u++){var h=arguments[u];if(jt(h)&&jm(this,l,h)){e.add(i);break}}}return e.iterator},_.Ir=function(t){for(var e=0;e<arguments.length;++e);e=new Z;for(var n=this.kn.iterator;n.next();){var i=n.value,l=i.data;if(null!==l)for(var u=0;u<arguments.length;u++){var h=arguments[u];if(jt(h)&&jm(this,l,h)){e.add(i);break}}}return e.iterator},Vt.prototype.doModelChanged=function(t){if(this.H){var e=this.H;if(t.model===e.model){var n=t.change;if(e.doModelChanged(t),e.$){e.$=!1;try{var i=t.modelChange;if(""!==i)if(n===ee){if("nodeCategory"===i){var l=this.Ec(t.object),u=t.newValue;null!==l&&"string"==typeof u&&(l.category=u)}else"nodeDataArray"===i&&(this.gs(t.oldValue),this.addModeledParts(t.newValue));e.isModified=!0}else if(n===nn){var h=t.newValue;"nodeDataArray"===i&&jt(h)&&N1(this,h),e.isModified=!0}else if(n===xe){var f=t.oldValue;"nodeDataArray"===i&&jt(f)&&this.Lo(f),e.isModified=!0}else n===es&&("SourceChanged"===i?null!==t.object?this.updateDataBindings(t.object,t.propertyName):(this.Uo(),this.updateAllTargetBindings()):"ModelDisplaced"===i&&this.Od());else if(n===ee){var p=t.propertyName,g=t.object;g===e.model?("nodeKeyProperty"===p||"nodeCategoryProperty"===p)&&(e.undoManager.isUndoingRedoing||this.Od()):this.updateDataBindings(g,p),e.isModified=!0}else if(n===nn||n===xe){var m=t.change===nn,v=m?t.newParam:t.oldParam,x=m?t.newValue:t.oldValue,D=this.Wi.I(t.object);if(Array.isArray(D))for(t=0;t<D.length;t++){var M=D[t];if(m)Jv(M,x,v,!0);else if(!(0>v)){var T=v+Mh(M);M.lc(T,!0),Xx(M,T,v)}}e.isModified=!0}}finally{e.$=!0}}}}},Vt.prototype.updateAllTargetBindings=function(t){void 0===t&&(t="");for(var e=this.parts.iterator;e.next();)e.value.Ka(t);for(e=this.nodes.iterator;e.next();)e.value.Ka(t);for(e=this.links.iterator;e.next();)e.value.Ka(t)},Vt.prototype.Uo=function(){for(var t=this.H.model,e=new Z,n=t.nodeDataArray,i=0;i<n.length;i++)e.add(n[i]);var l=[];for(this.nodes.each(function(h){null===h.data||e.contains(h.data)||l.push(h.data)}),this.parts.each(function(h){null===h.data||e.contains(h.data)||l.push(h.data)}),l.forEach(function(h){F0(t,h,!1)}),i=0;i<n.length;i++){var u=n[i];null===this.Ec(u)&&Gm(t,u,!1)}for(this.refreshDataBoundLinks(),n=this.parts.iterator;n.next();)n.value.updateRelationshipsFromData();for(n=this.nodes.iterator;n.next();)n.value.updateRelationshipsFromData();for(n=this.links.iterator;n.next();)n.value.updateRelationshipsFromData()},Vt.prototype.refreshDataBoundLinks=function(){},Vt.prototype.updateRelationshipsFromData=function(){},Vt.prototype.updateDataBindings=function(t,e){if("string"==typeof e){var n=this.Ec(t);if(null!==n)n.Ka(e);else{n=null;for(var i=this.Wi.iterator;i.next();){for(var l=i.value,u=0;u<l.length;u++){var h=l[u].Uw(t);null!==h&&(null===n&&(n=oe()),n.push(h))}if(null!==n)break}if(null!==n){for(i=0;i<n.length;i++)n[i].Ka(e);Nt(n)}}t===this.diagram.model.modelData&&this.updateAllTargetBindings(e)}},Vt.prototype.Ej=function(t,e,n){void 0===n&&(n=!1);var i=new vt;if(yn(t))for(var l=0;l<t.length;l++)_a(this,t[l],e,i,n);else for(t=t.iterator;t.next();)_a(this,t.value,e,i,n);if(null!==e){n=e.model,t=null!==(t=e.toolManager.findTool("Dragging"))?t.dragOptions.dragsLink:e.Em.dragsLink,l=new Z;for(var u=new vt,h=i.iterator;h.next();){var f=h.value;if(f instanceof H)t||null!==f.fromNode&&null!==f.toNode||l.add(f);else if(f instanceof J&&null!==f.data&&n.Bl()){var p=f,g=(f=h.key).ig();null!==g&&(null!==(g=i.I(g))?(n.ie(p.data,n.ua(g.data)),p=e.Dc(p.data),null!==(f=f.$g())&&null!==p&&u.add(f,p)):n.ie(p.data,void 0))}}if(0<l.count&&e.hs(l,!1),0<u.count)for(n=u.iterator;n.next();)i.add(n.key,n.value)}if(null!==e&&null!==this.H&&null!==(n=(e=e.model).afterCopyFunction)){var m=new vt;i.each(function(v){null!==v.key.data&&m.add(v.key.data,v.value.data)}),n(m,e,this.H.model)}for(e=i.iterator;e.next();)e.value.Ka();return i},Vt.prototype.copyPartData=function(t,e){var n=null,i=t.data;if(null!==i&&null!==e){var l=e.model;t instanceof H||jt(i=l.copyNodeData(i))&&(l.lf(i),n=e.Ec(i))}else uo(t),null!==(n=t.copy())&&(l=this.H,null!==e?e.add(n):null!==i&&null!==l&&null!==l.commandHandler&&l.commandHandler.copiesClipboardData&&(e=l.model,l=null,n instanceof H||(l=e.copyNodeData(i)),jt(l)&&(n.data=l)));return n},Mt.Object.defineProperties(Vt.prototype,{nodes:{get:function(){return this.vn}},links:{get:function(){return this.kn}},parts:{get:function(){return this.Ma}},diagram:{get:function(){return this.H}},addsToTemporaryLayer:{get:function(){return this.Xo},set:function(t){this.Xo=t}}}),Vt.prototype.updateAllRelationshipsFromData=Vt.prototype.Uo,Vt.prototype.findLinksByExample=Vt.prototype.Ir,Vt.prototype.findNodesByExample=Vt.prototype.Jr,Vt.prototype.findLinkForData=Vt.prototype.Dc,Vt.prototype.findNodeForData=Vt.prototype.ci,Vt.prototype.findPartForData=Vt.prototype.Ec,Vt.prototype.findNodeForKey=Vt.prototype.Lb,Vt.prototype.removeModeledPart=Vt.prototype.Lo,Vt.prototype.removeModeledParts=Vt.prototype.gs,Vt.prototype.rebuildParts=Vt.prototype.Od;var Vm=!1,Ah=!1,Bm=!1;function Qe(t){Vt.apply(this,arguments)}function k0(t,e){e.forEach(function(n){O0(t,n)}),Og(t.diagram,!1)}function O0(t,e){if(null!=e&&!t.diagram.undoManager.isUndoingRedoing&&!t.Re.contains(e)){var n=t.getLinkCategoryForData(e),i=t.findLinkTemplateForCategory(n);if(null!==i){uo(i);var l=i.copy();if(null!==l){i=t.diagram.skipsModelSourceBindings,t.diagram.skipsModelSourceBindings=!0,l.Jf=n,l.qb=e;var u=_f(n=t.diagram.model,e,!0);""!==u&&(l.fromPortId=u),void 0!==(u=xr(n,e,!0))&&(u=t.Lb(u))instanceof J&&(l.fromNode=u),""!==(u=_f(n,e,!1))&&(l.toPortId=u),void 0!==(u=xr(n,e,!1))&&(u=t.Lb(u))instanceof J&&(l.toNode=u),n=n.vf(e),Array.isArray(n)&&n.forEach(function(h){null!==(h=t.Lb(h))&&(h.labeledLink=l)}),t.Xo&&(l.zg="Tool"),t.diagram.add(l),l.qb=null,l.data=e,t.diagram.skipsModelSourceBindings=i}}}}function Um(t,e){e.forEach(function(n){t.Lo(n)})}function ir(){Vt.apply(this,arguments),this.Jg=null}function Mp(t,e,n){if(null!==e&&null!==n&&null===n.$g()){var i=t.diagram.toolManager.findTool("Linking"),l=e,u=n;if(t.diagram.isTreePathToChildren||(l=n,u=e),(null===i||!wd(i,l,u,null,!0))&&(e=t.getLinkCategoryForData(n.data),null!==(i=t.findLinkTemplateForCategory(e))&&(uo(i),null!==(i=i.copy())))){var h=t.diagram.skipsModelSourceBindings;t.diagram.skipsModelSourceBindings=!0,i.Jf=e,i.qb=n.data,i.fromNode=l,i.toNode=u,t.diagram.add(i),i.qb=null,i.data=n.data,t.diagram.skipsModelSourceBindings=h}}}function rt(t,e){this.Zk=new Z,this.Xk=new Z,this.Av=',\n  "insertedNodeKeys": ',this.Px=',\n  "modifiedNodeData": ',this.Cv=',\n  "removedNodeKeys": ',this.kh=null,wn(this),this.Am=this.va="",this.xg=!1,this.j={},this.Mc=[],this.kb=new vt,this.Mh="key",this.pk=this.Rk=null,this.rm=this.sm=!1,this.um=!0,this.fm=null,this.gj="category",this.Lf=new vt,this.ot=new q,this.Mg=!1,this.m=null,this.undoManager=new Pe,void 0!==t&&(yn(t)?this.nodeDataArray=t:Object.assign(this,t)),e&&Object.assign(this,e)}function Mf(t,e,n,i,l,u){function h(v,x){f?(void 0===v.__gohashid&&u.push(v),i.set(v,x)):(v=oa++,i.set(v,x),l.set(v,e))}if(!jt(e))return e;u||(u=[]);var f=Object.isExtensible(e);if(i||(i=new vt),f){var p=i.get(e);if(p)return p}else for(l||(l=new vt),p=l.iterator;p.next();){var g=p.key;if(p.value===e&&(g=i.get(g)))return g}if(Array.isArray(e)){h(e,p=[]);for(var m=0;m<e.length;m++)p.push(Mf(t,e[m],!1,i,l,u))}else if(e instanceof P||e instanceof dt||e instanceof B||e instanceof Bt||e instanceof it)p=e.copy(),h(e,p);else{if(e instanceof bt||e instanceof K||e instanceof W)return e;if(e instanceof q)p=(new q).addAll(Mf(t,e.Ea(),!1,i,l,u)),h(e,p);else if(e instanceof Z)p=(new Z).addAll(Mf(t,e.Ea(),!1,i,l,u)),h(e,p);else if(e instanceof vt)p=(new vt).addAll(Mf(t,e.Ea(),!1,i,l,u)),h(e,p);else if(e instanceof Date)p=new Date(e.getTime()),h(e,p);else if(e instanceof RegExp)p=new RegExp(e),h(e,p),p.lastIndex=e.lastIndex;else if("function"==typeof e.copy)p=e.copy(),h(e,p);else for(m in h(e,p={}),e)"__gohashid"!==m&&(p[m]=Mf(t,e[m],!1,i,l,u))}return n&&u.forEach(function(v){delete v.__gohashid}),p}function oD(t,e){jt(e=e.modelData)&&(t.Ll(e),t.modelData=e)}function k1(t,e){function n(l,u){if((u=u.part)&&l!==(u=u.data)){var h=i.get(l);null===h?((h=new Z).add(u),i.add(l,h)):h.add(u)}}var i=t.kh;null===i&&(i=new vt,e.changes.each(function(l){if(null!==l.diagram){var u=l.change;u===ee?(l=l.object.panel)&&(u=l.data)&&n(u,l):(u===nn||u===xe)&&(u=(l=l.object).itemArray)&&n(u,l)}}),t.kh=i)}function L0(t,e){for(var n=new Z,i=0;i<t.nodeDataArray.length;i++){var l=t.nodeDataArray[i];Hm(t,e,l,l,n)}return n}function Hm(t,e,n,i,l){if(Array.isArray(n))for(var u=0;u<n.length;u++){var h=n[u];if(h===e)return l.add(i),!0;if(Hm(t,e,h,i,l))return!0}else if(jt(n)&&Object.getPrototypeOf(n)===Object.prototype)for(u in n){if((h=n[u])===e)return l.add(i),!0;if(Hm(t,e,h,i,l))return!0}return!1}function Vl(t,e,n){void 0===n&&(n=!1);var i=e.length;if(0>=i)return"[]";var l=new zy;l.add("["),n&&1<i&&l.add("\n");for(var u=0;u<i;u++){var h=e[u];void 0!==h&&(0<u&&(l.add(","),n&&l.add("\n")),l.add(t.bm(h)))}return n&&1<i&&l.add("\n"),l.add("]"),l.toString()}function b0(t,e){return void 0===e||"__gohashid"===t||"_"===t[0]||"function"==typeof e}function yi(t){return isNaN(t)?"NaN":t===1/0?"9e9999":t===-1/0?"-9e9999":t}function co(t,e){var n=e;if(n instanceof P)e={class:"go.Point",x:yi(n.x),y:yi(n.y)};else if(n instanceof dt)e={class:"go.Size",width:yi(n.width),height:yi(n.height)};else if(n instanceof B)e={class:"go.Rect",x:yi(n.x),y:yi(n.y),width:yi(n.width),height:yi(n.height)};else if(n instanceof Bt)e={class:"go.Margin",top:yi(n.top),right:yi(n.right),bottom:yi(n.bottom),left:yi(n.left)};else if(n instanceof it)e=n.pb()?{class:"go.Spot",x:yi(n.x),y:yi(n.y),offsetX:yi(n.offsetX),offsetY:yi(n.offsetY)}:{class:"go.Spot",enum:n.toString()};else if(n instanceof bt){if(e={class:"go.Brush",type:n.type.name},n.type===Yr?e.color=n.color:(n.type===il||n.type===Ui)&&(e.start=n.start,e.end=n.end,n.type===Ui&&(0!==n.startRadius&&(e.startRadius=yi(n.startRadius)),isNaN(n.endRadius)||(e.endRadius=yi(n.endRadius)))),null!==n.colorStops){var i={};for(n=n.colorStops.iterator;n.next();)i[n.key]=n.value;e.colorStops=i}}else n instanceof K?(e={class:"go.Geometry",type:n.type.name},0!==n.startX&&(e.startX=yi(n.startX)),0!==n.startY&&(e.startY=yi(n.startY)),0!==n.endX&&(e.endX=yi(n.endX)),0!==n.endY&&(e.endY=yi(n.endY)),n.spot1.C(Oe)||(e.spot1=n.spot1),n.spot2.C(cr)||(e.spot2=n.spot2),n.type===K.m&&(e.path=K.ga(n))):n instanceof W&&(e={class:"go.EnumValue",classType:Df(t,n.classType),name:n.name});for(var l in i="{",n=!0,e){var u=be(e,l);if(!b0(l,u))if(n?n=!1:i+=",",i+=t.quote(l)+":","points"===l&&u instanceof q){var h="[";for(u=u.iterator;u.next();){var f=u.value;1<h.length&&(h+=","),h+=t.bm(f.x),h+=",",h+=t.bm(f.y)}i+=h+="]"}else i+=t.bm(u)}return i+"}"}function oi(t){return"number"==typeof t?t:"NaN"===t?NaN:"9e9999"===t?1/0:"-9e9999"===t?-1/0:parseFloat(t)}function qe(t,e,n,i,l,u,h,f,p){void 0===f&&(f=null),void 0===p&&(p=null);var g=new Me;g.model=t,g.change=n,g.modelChange=e,g.propertyName=i,g.object=l,g.oldValue=u,g.oldParam=f,g.newValue=h,g.newParam=p,t.Cr(g)}function Ta(t){return"number"==typeof t||"string"==typeof t}function Gm(t,e,n){var i=t.ua(e);(void 0===i||t.kb.I(i)!==e)&&(t.Mu(e),void 0===(i=t.ua(e))&&Y("Model.makeNodeDataKeyUnique failed on "+e+".  Data not added to Model."),t.kb.add(i,e),i=null,n&&Za(t.Mc,i=t.Mc.length,e),qe(t,"nodeDataArray",nn,"nodeDataArray",t,null,e,null,i),t.Nl(e),t.Ml(e))}function F0(t,e,n){var i=t.ua(e);if(void 0!==i&&t.kb.remove(i),i=null,n){t:if(n=t.Mc,Array.isArray(n))i=n.indexOf(e);else{i=n.length;for(var l=0;l<i;l++)if(n[l]===e){i=l;break t}i=-1}if(0>i)return;Ze(t.Mc,i)}qe(t,"nodeDataArray",xe,"nodeDataArray",t,e,null,i,null),t.To(e)}function Lo(t,e,n){if(void 0!==e){var i=t.Lf.I(e);null===i&&(i=new Z,t.Lf.add(e,i)),i.add(n)}}function bo(t,e,n){if(void 0!==e){var i=t.Lf.I(e);i instanceof Z&&(null==n?t.Lf.remove(e):(i.remove(n),0===i.count&&t.Lf.remove(e)))}}function Dp(t,e){return void 0===e?null:(t=t.Lf.I(e))instanceof Z?t:null}function Sp(t,e,n){if(t.copiesArrays&&Array.isArray(e)){var i=[];for(n=0;n<e.length;n++){var l=Sp(t,e[n],t.copiesArrayObjects);i.push(l)}return wn(i),i}if(n&&jt(e)){for(i in n=(n=e.constructor)?new n:{},l=t.copiesKey||"string"!=typeof t.nodeKeyProperty?null:t.nodeKeyProperty,e)if("__gohashid"===i)n.__gohashid=void 0;else if(i===l)n[l]=void 0;else{var u=be(e,i),h=Df(t,u);"GraphObject"===h||"Diagram"===h||"Layer"===h||"RowColumnDefinition"===h||"AnimationManager"===h||"Tool"===h||"CommandHandler"===h||"Layout"===h||"InputEvent"===h||"DiagramEvent"===h||u instanceof rt||u instanceof Pe||u instanceof xn||u instanceof Me||(u=Sp(t,u,!1)),ne(n,i,u)}return wn(n),n}return e instanceof P||e instanceof dt||e instanceof B||e instanceof it||e instanceof Bt?e.copy():e}function R0(){return new rt}function Df(t,e){if("function"==typeof e){if(e.className)return e.className;if(e.name)return e.name}else if("object"==typeof e&&null!==e&&e.constructor)return Df(t,e.constructor);return typeof e}function j0(t){return fo[t]?fo[t]:void 0!==pt.go&&pt.go[t]?pt.go[t]:null}function be(t,e){if(!t||!e)return null;try{if("function"==typeof e)var n=e(t);else"function"==typeof t.getAttribute?null===(n=t.getAttribute(e))&&(n=void 0):n=t[e]}catch{}return n}function ne(t,e,n){if(t&&e)try{"function"==typeof e?e(t,n):"function"==typeof t.setAttribute?t.setAttribute(e,n):t[e]=n}catch{}}Vt.className="PartManager",Ht(Qe,Vt),Qe.prototype.addAllModeledParts=function(){var t=this.diagram.model;this.addModeledParts(t.nodeDataArray),k0(this,t.linkDataArray)},Qe.prototype.addModeledParts=function(t){for(Vt.prototype.addModeledParts.call(this,t,!1),t=this.links.iterator;t.next();)ge(t.value);Og(this.diagram,!1)},Qe.prototype.removeAllModeledParts=function(){var t=this.diagram.model;Um(this,t.linkDataArray),this.gs(t.nodeDataArray)},Qe.prototype.getLinkCategoryForData=function(t){return this.diagram.model.Mr(t)},Qe.prototype.setLinkCategoryForData=function(t,e){return this.diagram.model.Oo(t,e)},Qe.prototype.setFromNodeForLink=function(t,e){var n=this.diagram.model;n.cv(t.data,n.ua(null!==e?e.data:null))},Qe.prototype.setToNodeForLink=function(t,e){var n=this.diagram.model;n.gv(t.data,n.ua(null!==e?e.data:null))},Qe.prototype.removeDataForLink=function(t){this.diagram.model.Jl(t.data)},Qe.prototype.findPartForKey=function(t){var e=Vt.prototype.findPartForKey.call(this,t);return null===e&&null!==(t=this.diagram.model.Zg(t))?this.Re.I(t):e},Qe.prototype.findLinkForKey=function(t){return null==t?null:null!==(t=this.diagram.model.Zg(t))?this.Re.I(t):null},Qe.prototype.doModelChanged=function(t){var e=this;if(Vt.prototype.doModelChanged.call(this,t),this.diagram){var n=this.diagram;if(t.model===n.model){var i=t.change;if(n.$){n.$=!1;try{var l=t.modelChange;if(""!==l){if(i===ee){if("linkFromKey"===l){var u=this.Dc(t.object);if(null!==u){var h=this.Lb(t.newValue);u.fromNode=h}}else if("linkToKey"===l){var f=this.Dc(t.object);if(null!==f){var p=this.Lb(t.newValue);f.toNode=p}}else if("linkFromPortId"===l){var g=this.Dc(t.object);if(null!==g){var m=t.newValue;"string"==typeof m&&(g.fromPortId=m)}}else if("linkToPortId"===l){var v=this.Dc(t.object);if(null!==v){var x=t.newValue;"string"==typeof x&&(v.toPortId=x)}}else if("nodeGroupKey"===l){var D=this.Ec(t.object);if(null!==D){var M=t.newValue;if(void 0!==M){var T=this.Lb(M);D.containingGroup=T instanceof yt?T:null}else D.containingGroup=null}}else if("linkLabelKeys"===l){var N=this.Dc(t.object);if(null!==N){var I=t.oldValue,k=t.newValue;Array.isArray(I)&&I.forEach(function(G){0<=k.indexOf(G)||null!==(G=e.Lb(G))&&(G.labeledLink=null)}),Array.isArray(k)&&k.forEach(function(G){null!==(G=e.Lb(G))&&(G.labeledLink=N)})}}else if("linkCategory"===l){var O=this.Dc(t.object),L=t.newValue;null!==O&&"string"==typeof L&&(O.category=L)}else"linkDataArray"===l&&(Um(this,t.oldValue),k0(this,t.newValue));n.isModified=!0}else if(i===nn){var b=t.newValue;if("linkDataArray"===l&&"object"==typeof b&&null!==b)O0(this,b);else if("linkLabelKeys"===l&&Ta(b)){var U=this.Dc(t.object),X=this.Lb(b);null!==U&&null!==X&&(X.labeledLink=U)}n.isModified=!0}else if(i===xe){var nt=t.oldValue;if("linkDataArray"===l&&"object"==typeof nt&&null!==nt)this.Lo(nt);else if("linkLabelKeys"===l&&Ta(nt)){var et=this.Lb(nt);null!==et&&(et.labeledLink=null)}n.isModified=!0}}else if(i===ee){var Q=t.propertyName;t.object!==n.model||"linkFromKeyProperty"!==Q&&"linkToKeyProperty"!==Q&&"linkFromPortIdProperty"!==Q&&"linkToPortIdProperty"!==Q&&"linkLabelKeysProperty"!==Q&&"nodeIsGroupProperty"!==Q&&"nodeGroupKeyProperty"!==Q&&"linkCategoryProperty"!==Q||n.undoManager.isUndoingRedoing||this.Od(),n.isModified=!0}}finally{n.$=!0}}}}},Qe.prototype.refreshDataBoundLinks=function(){var t=this,e=this.diagram.model,n=new Z,i=e.linkDataArray;i.forEach(function(u){n.add(u)});var l=[];this.links.each(function(u){null===u.data||n.contains(u.data)||l.push(u.data)}),l.forEach(function(u){_p(e,u,!1)}),i.forEach(function(u){null===t.Dc(u)&&b1(e,u,!1)})},Qe.prototype.updateRelationshipsFromData=function(t){var e=t.data;if(null!==e){var n=t.diagram;if(null!==n){var i=n.model;if(t instanceof H){var l=xr(i,e,!0);if(l=n.Lb(l),t.fromNode=l,l=xr(i,e,!1),l=n.Lb(l),t.toNode=l,0<(e=i.vf(e)).length||0<t.labelNodes.count){if(1===e.length&&1===t.labelNodes.count){l=e[0];var u=t.labelNodes.first();if(i.ua(u.data)===l)return}l=(new Z).addAll(e);var h=new Z;t.labelNodes.each(function(f){null!==f.data&&void 0!==(f=i.ua(f.data))&&h.add(f)}),(e=h.copy()).Ko(l),(l=l.copy()).Ko(h),(0<e.count||0<l.count)&&(e.each(function(f){null!==(f=n.Lb(f))&&f.labeledLink===t&&(f.labeledLink=null)}),l.each(function(f){null!==(f=n.Lb(f))&&f.labeledLink!==t&&(f.labeledLink=t)}))}}else!(t instanceof Pt)&&(e=i.ah(e),null===(e=n.findPartForKey(e))||e instanceof yt)&&(t.containingGroup=e)}}},Qe.prototype.resolveReferencesForData=function(t){var e=this.diagram.model,n=e.ua(t);if(void 0!==n){var i=Dp(e,n),l=this.Ec(t);if(null!==i&&null!==l){i=i.iterator;for(var u={};i.next();){var h=i.value;e.lb(h)?l instanceof yt&&e.ah(h)===n&&null!==(h=this.Ec(h))&&(h.containingGroup=l):(u.link=this.Dc(h),null!==u.link&&l instanceof J&&(xr(e,h,!0)===n&&(u.link.fromNode=l),xr(e,h,!1)===n&&(u.link.toNode=l),h=e.vf(h),Array.isArray(h)&&h.some(function(f){return function(p){return p===n&&(l.labeledLink=f.link,!0)}}(u)))),u={link:u.link}}bo(e,n)}void 0!==(t=e.ah(t))&&(t=this.Lb(t))instanceof yt&&(l.containingGroup=t)}},Qe.prototype.unresolveReferencesForPart=function(t){var e=this.diagram.model;if(t instanceof J){var n=e.ua(t.data);if(void 0!==n){for(var i=t.linksConnected;i.next();)Lo(e,n,i.value.data);if(t.isLinkLabel&&null!==(i=t.labeledLink)&&Lo(e,n,i.data),t instanceof yt)for(t=t.memberParts;t.next();)e.lb(i=t.value.data)&&Lo(e,n,i)}}},Qe.prototype.copyPartData=function(t,e){var n=Vt.prototype.copyPartData.call(this,t,e);if(t instanceof H)if(null!==(t=t.data)&&null!==e){var i=e.model;"object"==typeof(t=i.no(t))&&null!==t&&(i.Yh(t),n=e.Dc(t))}else null!==n&&(e=this.diagram,null!==t&&null!==e&&null!==e.commandHandler&&e.commandHandler.copiesClipboardData&&"object"==typeof(e=e.model.no(t))&&null!==e&&(n.data=e));return n},Qe.prototype.insertLink=function(t,e,n,i){var l=this.diagram,u=l.model,h=l.toolManager.findTool("Linking"),f="";if(null!==t&&(null===e&&(e=t),null===(f=e.portId)&&(f="")),e="",null!==n&&(null===i&&(i=n),null===(e=i.portId)&&(e="")),(i=h.archetypeLinkData)instanceof H){if(uo(i),null!==(u=i.copy()))return u.fromNode=t,u.fromPortId=f,u.toNode=n,u.toPortId=e,l.add(u),(t=h.archetypeLabelNodeData)instanceof J&&(uo(t),null!==(t=t.copy())&&(t.labeledLink=u,l.add(t))),u}else if(null!==i&&"object"==typeof(i=u.no(i))&&null!==i)return null!==t&&Sf(u,i,u.ua(t.data),!0),Tf(u,i,f,!0),null!==n&&Sf(u,i,u.ua(n.data),!1),Tf(u,i,e,!1),u.Yh(i),null===(t=h.archetypeLabelNodeData)||t instanceof J||"object"==typeof(t=u.copyNodeData(t))&&null!==t&&(u.lf(t),void 0!==(t=u.ua(t))&&u.hu(i,t)),l.Dc(i);return null},Qe.prototype.findLinkForKey=Qe.prototype.findLinkForKey,Qe.prototype.findPartForKey=Qe.prototype.findPartForKey,Qe.prototype.removeAllModeledParts=Qe.prototype.removeAllModeledParts,Qe.prototype.addModeledParts=Qe.prototype.addModeledParts,Qe.prototype.addAllModeledParts=Qe.prototype.addAllModeledParts,Qe.className="GraphLinksPartManager",Ht(ir,Vt),ir.prototype.getLinkCategoryForData=function(t){return this.diagram.model.Pr(t)},ir.prototype.setLinkCategoryForData=function(t,e){this.diagram.model.ms(t,e)},ir.prototype.setFromNodeForLink=function(t,e,n){var i=this.diagram.model;if(void 0===n&&(n=null),e=null!==e?e.data:null,this.diagram.isTreePathToChildren)i.ie(t.data,i.ua(e));else{var l=this.Jg;this.Jg=t,null!==n&&i.ie(n.data,void 0),i.ie(e,i.ua(null!==t.toNode?t.toNode.data:null)),this.Jg=l}},ir.prototype.setToNodeForLink=function(t,e,n){var i=this.diagram.model;if(void 0===n&&(n=null),e=null!==e?e.data:null,this.diagram.isTreePathToChildren){var l=this.Jg;this.Jg=t,null!==n&&i.ie(n.data,void 0),i.ie(e,i.ua(null!==t.fromNode?t.fromNode.data:null)),this.Jg=l}else i.ie(t.data,i.ua(e))},ir.prototype.removeDataForLink=function(t){this.diagram.model.ie(t.data,void 0)},ir.prototype.findLinkForKey=function(t){return null==t?null:null!==(t=this.diagram.model.dc(t))?this.Re.I(t):null},ir.prototype.doModelChanged=function(t){if(Vt.prototype.doModelChanged.call(this,t),this.diagram){var e=this.diagram;if(t.model===e.model){var n=t.change;if(e.$){e.$=!1;try{var i=t.modelChange;if(""!==i){if(n===ee){if("nodeParentKey"===i){var l=t.object,u=this.Lb(t.newValue),h=this.ci(l);if(null!==this.Jg)null!==u&&(this.Jg.data=l,this.Jg.category=this.getLinkCategoryForData(l));else if(null!==h){var f=h.$g();null!==f?null===u?e.remove(f):e.isTreePathToChildren?f.fromNode=u:f.toNode=u:Mp(this,u,h)}}else if("parentLinkCategory"===i){var p=this.ci(t.object),g=t.newValue;if(null!==p&&"string"==typeof g){var m=p.$g();null!==m&&(m.category=g)}}e.isModified=!0}}else n===ee&&(t.object===e.model&&"nodeParentKeyProperty"===t.propertyName&&(e.undoManager.isUndoingRedoing||this.Od()),e.isModified=!0)}finally{e.$=!0}}}}},ir.prototype.updateRelationshipsFromData=function(t){var e=t.data;if(null!==e){var n=t.diagram;if(null!==n){var i=n.model;t instanceof J&&(e=i.bh(e),(e=n.Lb(e))!==(i=t.ig())&&(i=t.$g(),null!==e?null!==i?n.isTreePathToChildren?i.fromNode=e:i.toNode=e:Mp(this,e,t):null!==i&&Ig(n,i,!1)))}}},ir.prototype.updateDataBindings=function(t,e){Vt.prototype.updateDataBindings.call(this,t,e),"string"==typeof e&&null!==this.Ec(t)&&null!==(t=this.Dc(t))&&t.Ka(e)},ir.prototype.resolveReferencesForData=function(t){var e=this.diagram.model,n=e.ua(t);if(void 0!==n){var i=Dp(e,n),l=this.Ec(t);if(null!==i&&null!==l){for(i=i.iterator;i.next();){var u=i.value;e.lb(u)&&l instanceof J&&e.bh(u)===n&&Mp(this,l,this.ci(u))}bo(e,n)}void 0!==(t=e.bh(t))&&l instanceof J&&Mp(this,t=this.Lb(t),l)}},ir.prototype.unresolveReferencesForPart=function(t){var e=this.diagram.model;if(t instanceof J){var n=e.ua(t.data),i=this.Dc(t.data);if(null!==i){i.isSelected=!1,i.isHighlighted=!1;var l=i.layer;if(null!==l){var u=l.lc(-1,i,!1);0<=u&&this.diagram.bb(xe,"parts",l,i,null,u,null),null!==(u=i.layerChanged)&&u(i,l,null)}}for(i=this.diagram.isTreePathToChildren,t=t.linksConnected;t.next();)l=t.value,e.lb(l=(i?l.toNode:l.fromNode).data)&&Lo(e,n,l)}},ir.prototype.insertLink=function(t,e,n){e=this.diagram.model;var i=t,l=n;return this.diagram.isTreePathToChildren||(i=n,l=t),null!==i&&null!==l?(e.ie(l.data,e.ua(i.data)),l.$g()):null},ir.prototype.findLinkForKey=ir.prototype.findLinkForKey,ir.className="TreePartManager",rt.prototype.cloneProtected=function(t){t.va=this.va,t.Am=this.Am,t.xg=this.xg,t.Mh=this.Mh,t.Rk=this.Rk,t.pk=this.pk,t.sm=this.sm,t.rm=this.rm,t.um=this.um,t.fm=this.fm,t.gj=this.gj},rt.prototype.copy=function(){var t=new this.constructor;return this.cloneProtected(t),t},rt.prototype.clear=function(){this.Mc=[],this.kb.clear(),this.Lf.clear(),this.undoManager.clear()},rt.prototype.toString=function(t){if(void 0===t&&(t=0),1<t)return this.Qo();var e=(""!==this.name?this.name:"")+" Model";if(0<t){e+="\n node data:";for(var n=(t=this.nodeDataArray).length,i=0;i<n;i++){var l=t[i];e+=" "+this.ua(l)+":"+io(l)}}return e},rt.prototype.eA=function(t){t.change!==es&&Y("Model.toIncrementalData argument is not a Transaction ChangedEvent:"+t.toString());var e=t.object;return t.isTransactionFinished&&e instanceof xn?(k1(this,e),t=this.uv(e,"FinishedUndo"===t.propertyName),this.kh=null,t):null},rt.prototype.uv=function(t,e){var n=this,i=!1,l=new Z,u=new Z,h=new Z,f=this.kh;t.changes.each(function(v){v.model===n&&("nodeDataArray"===v.modelChange?v.change===nn?l.add(v.newValue):v.change===xe&&h.add(v.oldValue):n.lb(v.object)?u.add(v.object):v.change!==ee||n.modelData!==v.object&&"modelData"!==v.propertyName?null!==v.object&&(f&&f.contains(v.object)?f.get(v.object).each(function(x){n.lb(x)&&u.add(x)}):v.object instanceof rt||n.ki()&&n.Cc(v.object)||L0(n,v.object).each(function(x){u.add(x)})):i=!0)});var p=this.Xk;p.clear(),l.each(function(v){p.add(n.ua(v)),e||u.add(v)});var g=this.Zk;g.clear(),h.each(function(v){g.add(n.ua(v)),e&&u.add(v)}),t=n.cloneDeep(u.Ea());var m=null;return i&&(null===m&&(m={}),m.modelData=this.cloneDeep(this.modelData)),0<p.count&&(null===m&&(m={}),e?m.removedNodeKeys=p.Ea():m.insertedNodeKeys=p.Ea()),0<t.length&&(null===m&&(m={}),m.modifiedNodeData=t),0<g.count&&(null===m&&(m={}),e?m.insertedNodeKeys=g.Ea():m.removedNodeKeys=g.Ea()),g.clear(),p.clear(),m},rt.prototype.cloneDeep=function(t){return Mf(this,t,!0)},(_=rt.prototype).quote=function(t){return JSON.stringify(t).replace(/[\u007F-\uFFFF]/g,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).substr(-4)})},_.am=function(){var t="";return""!==this.name&&(t+=',\n  "name": '+this.quote(this.name)),""!==this.dataFormat&&(t+=',\n  "dataFormat": '+this.quote(this.dataFormat)),this.isReadOnly&&(t+=',\n  "isReadOnly": '+this.isReadOnly),"key"!==this.nodeKeyProperty&&"string"==typeof this.nodeKeyProperty&&(t+=',\n  "nodeKeyProperty": '+this.quote(this.nodeKeyProperty)),this.copiesArrays&&(t+=',\n  "copiesArrays": true'),this.copiesArrayObjects&&(t+=',\n  "copiesArrayObjects": true'),this.copiesKey||(t+=',\n  "copiesKey": false'),"category"!==this.nodeCategoryProperty&&"string"==typeof this.nodeCategoryProperty&&(t+=',\n  "nodeCategoryProperty": '+this.quote(this.nodeCategoryProperty)),t},_.Io=function(t){t.name&&(this.name=t.name),t.dataFormat&&(this.dataFormat=t.dataFormat),t.isReadOnly&&(this.isReadOnly=!0),t.nodeKeyProperty&&(this.nodeKeyProperty=t.nodeKeyProperty),t.copiesArrays&&(this.copiesArrays=!0),t.copiesArrayObjects&&(this.copiesArrayObjects=!0),!1===t.copiesKey&&(this.copiesKey=!1),t.nodeCategoryProperty&&(this.nodeCategoryProperty=t.nodeCategoryProperty)},_.vv=function(){var n,t=this.modelData,e=!1;for(n in t)if(!b0(n,t[n])){e=!0;break}return t="",e&&(t=',\n  "modelData": '+co(this,this.modelData)),t+',\n  "nodeDataArray": '+Vl(this,this.nodeDataArray,!0)},_.Uu=function(t){oD(this,t),yn(t=t.nodeDataArray)&&(this.Ll(t),this.nodeDataArray=t)},_.tv=function(t,e){var n=this,i=!1,l=new Z,u=new Z,h=new Z,f=this.kh;t.changes.each(function(m){m.model===n&&("nodeDataArray"===m.modelChange?m.change===nn?l.add(m.newValue):m.change===xe&&h.add(m.oldValue):n.lb(m.object)?u.add(m.object):m.change!==ee||n.modelData!==m.object&&"modelData"!==m.propertyName?null!==m.object&&(f&&f.contains(m.object)?f.get(m.object).each(function(v){n.lb(v)&&u.add(v)}):m.object instanceof rt||n.ki()&&n.Cc(m.object)||L0(n,m.object).each(function(v){u.add(v)})):i=!0)});var p=this.Xk;p.clear(),l.each(function(m){p.add(n.ua(m)),e||u.add(m)});var g=this.Zk;return g.clear(),h.each(function(m){g.add(n.ua(m)),e&&u.add(m)}),t="",i&&(t+=',\n  "modelData": '+co(this,this.modelData)),0<p.count&&(t+=(e?this.Cv:this.Av)+Vl(this,p.Ea(),!0)),0<u.count&&(t+=this.Px+Vl(this,u.Ea(),!0)),0<g.count&&(t+=(e?this.Av:this.Cv)+Vl(this,g.Ea(),!0)),g.clear(),p.clear(),t},_.Ho=function(t){(void 0!==t.name&&t.name!==this.name||void 0!==t.dataFormat&&t.dataFormat!==this.dataFormat||void 0!==t.isReadOnly&&t.isReadOnly!==this.isReadOnly||void 0!==t.nodeKeyProperty&&t.nodeKeyProperty!==this.nodeKeyProperty||void 0!==t.copiesArrays&&t.copiesArrays!==this.copiesArrays||void 0!==t.copiesArrayObjects&&t.copiesArrayObjects!==this.copiesArrayObjects||void 0!==t.copiesKey&&t.copiesKey!==this.copiesKey||void 0!==t.nodeCategoryProperty&&t.nodeCategoryProperty!==this.nodeCategoryProperty)&&Y("applyIncrementalJson cannot change Model properties"),oD(this,t);var e=t.insertedNodeKeys,n=t.modifiedNodeData,i=new vt;if(Array.isArray(n))for(var l=0;l<n.length;l++){var u=n[l],h=this.ua(u);null!=h&&i.set(h,u)}if(Array.isArray(e))for(l=e.length,u=0;u<l;u++){var f=this.dc(h=e[u]);null===f&&(f=(f=i.get(h))?f:this.copyNodeData({}),this.Sl(f,h),this.lf(f))}if(Array.isArray(n))for(e=n.length,i=0;i<e;i++)if(u=this.ua(l=n[i]),null!==(u=this.dc(u))){for(var p in l)"__gohashid"===p||p===this.nodeKeyProperty||this.Nj()&&p===this.nodeIsGroupProperty||this.setDataProperty(u,p,l[p]);this.Tl(l,u)}if(t=t.removedNodeKeys,Array.isArray(t))for(n=t.length,p=0;p<n;p++)null!==(e=this.dc(t[p]))&&this.Kl(e)},_.Jx=function(t,e){t.change!==es&&Y("Model.toIncrementalJson argument is not a Transaction ChangedEvent:"+t.toString());var n=t.object;return t.isTransactionFinished&&n instanceof xn?(void 0===e&&(e=Df(this,this)),k1(this,n),t=this.tv(n,"FinishedUndo"===t.propertyName),this.kh=null,"2"===e?'{ "incremental": 2'+t+"}":'{ "class": '+this.quote(e)+', "incremental": 1'+this.am()+t+"}"):'{ "incremental": 0 }'},_.fA=function(t,e){return this.Jx(t,e)},_.Qo=function(t){return void 0===t&&(t=Df(this,this)),'{ "class": '+this.quote(t)+this.am()+this.vv()+"}"},_.toJSON=function(t){return this.Qo(t)},_.Dw=function(t){var e=null;if("string"==typeof t)try{e=pt.JSON.parse(t)}catch{}else"object"==typeof t?e=t:Y("Unable to modify a Model from: "+t);var n=e.incremental;"number"!=typeof n&&Y("Unable to apply non-incremental changes to Model: "+t),0!==n&&(this.Da("applyIncrementalJson"),this.Ho(e),this.eb("applyIncrementalJson"))},_.qy=function(t){return this.Dw(t)},rt.constructGraphLinksModel=function(){return new rt},(_=rt.prototype).Ll=function(t){if(yn(t))for(var e=t.length,n=0;n<e;n++){var i=t[n];if(jt(i)){var l=n;i=this.Ll(i),Array.isArray(t)?t[l]=i:Y("Cannot replace an object in an HTMLCollection or NodeList at "+l)}}else if(jt(t)){for(e in t)if(jt(n=t[e])&&(n=this.Ll(n),t[e]=n,"points"===e&&Array.isArray(n))){for(l=n.length%2==0,i=0;i<n.length;i++)if("number"!=typeof n[i]){l=!1;break}if(l){for(l=new q,i=0;i<n.length/2;i++)l.add(new P(n[2*i],n[2*i+1]));l.freeze(),t[e]=l}}return function sD(t){if("object"!=typeof t)return t;var e=t.class||"";if("NaN"===e)return NaN;if("Date"===e)return new Date(t.value);if(0!==e.indexOf("go."))return t;var n=t;if("Point"===(e=e.substr(3)))n=new P(oi(t.x),oi(t.y));else if("Size"===e)n=new dt(oi(t.width),oi(t.height));else if("Rect"===e)n=new B(oi(t.x),oi(t.y),oi(t.width),oi(t.height));else if("Margin"===e)n=new Bt(oi(t.top),oi(t.right),oi(t.bottom),oi(t.left));else if("Spot"===e)n="string"==typeof t.enum?ts(t.enum):new it(oi(t.x),oi(t.y),oi(t.offsetX),oi(t.offsetY));else if("Brush"===e){if((n=new bt).type=Ks(bt,t.type),"string"==typeof t.color&&(n.color=t.color),t.start instanceof it&&(n.start=t.start),t.end instanceof it&&(n.end=t.end),"number"==typeof t.startRadius&&(n.startRadius=oi(t.startRadius)),"number"==typeof t.endRadius&&(n.endRadius=oi(t.endRadius)),jt(t=t.colorStops))for(var i in t)n.addColorStop(parseFloat(i),t[i])}else"Geometry"===e?(n=null,(n="string"==typeof t.path?K.parse(t.path):new K).type=Ks(K,t.type),"number"==typeof t.startX&&(n.startX=oi(t.startX)),"number"==typeof t.startY&&(n.startY=oi(t.startY)),"number"==typeof t.endX&&(n.endX=oi(t.endX)),"number"==typeof t.endY&&(n.endY=oi(t.endY)),t.spot1 instanceof it&&(n.spot1=t.spot1),t.spot2 instanceof it&&(n.spot2=t.spot2)):"EnumValue"===e&&(0===(i=t.classType).indexOf("go.")&&(i=i.substr(3)),"function"==typeof(i=j0(i))&&(n=Ks(i,t.name)));return n}(t)}return t},_.bm=function(t){return void 0===t?"undefined":null===t?"null":!0===t?"true":!1===t?"false":"string"==typeof t?this.quote(t):"number"==typeof t?t===1/0?"9e9999":t===-1/0?"-9e9999":isNaN(t)?'{"class":"NaN"}':t.toString():t instanceof Date?'{"class":"Date", "value":"'+t.toJSON()+'"}':t instanceof Number?this.bm(t.valueOf()):yn(t)?Vl(this,t):jt(t)?co(this,t):"function"==typeof t?"null":t.toString()},_.Ug=function(t){return this.ot.add(t),this},_.ak=function(t){this.ot.remove(t)},_.Cr=function(t){this.skipsUndoManager||this.undoManager.Fu(t);for(var e=this.ot,n=e.length,i=0;i<n;i++)e.K(i)(t)},_.bb=function(t,e,n,i,l,u,h){qe(this,"",t,e,n,i,l,u,h)},_.g=function(t,e,n,i,l){qe(this,"",ee,t,this,e,n,i,l)},_.fs=function(t,e,n,i,l,u){qe(this,"",ee,e,t,n,i,l,u)},rt.prototype.changeState=function(t,e){if(null!==t&&t.model===this)if(t.change===ee){var n=t.object,i=t.propertyName,l=t.I(e);i===this.nodeKeyProperty&&this.lb(n)&&(void 0!==(e=t.I(!e))&&this.kb.remove(e),void 0!==l&&this.kb.add(l,n)),ne(n,i,l)}else t.change===nn?(n=t.newParam,"nodeDataArray"===t.modelChange?jt(t=t.newValue)&&"number"==typeof n&&(i=this.ua(t),e?(this.Mc[n]===t&&Ze(this.Mc,n),void 0!==i&&this.kb.remove(i)):(this.Mc[n]!==t&&Za(this.Mc,n,t),void 0!==i&&this.kb.add(i,t))):""===t.modelChange?((i=t.object)&&!yn(i)&&t.propertyName&&(i=be(t.object,t.propertyName)),yn(i)&&"number"==typeof n&&(t=t.newValue,e?Ze(i,n):Za(i,n,t))):Y("unknown ChangedEvent.Insert modelChange: "+t.toString())):t.change===xe?(n=t.oldParam,"nodeDataArray"===t.modelChange?jt(t=t.oldValue)&&"number"==typeof n&&(i=this.ua(t),e?(this.Mc[n]!==t&&Za(this.Mc,n,t),void 0!==i&&this.kb.add(i,t)):(this.Mc[n]===t&&Ze(this.Mc,n),void 0!==i&&this.kb.remove(i))):""===t.modelChange?((i=t.object)&&!yn(i)&&t.propertyName&&(i=be(t.object,t.propertyName)),yn(i)&&"number"==typeof n&&(t=t.oldValue,e?Za(i,n,t):Ze(i,n))):Y("unknown ChangedEvent.Remove modelChange: "+t.toString())):t.change!==es&&Y("unknown ChangedEvent: "+t.toString())},rt.prototype.Da=function(t){return this.undoManager.Da(t)},rt.prototype.eb=function(t){return this.undoManager.eb(t)},rt.prototype.Bf=function(){return this.undoManager.Bf()},rt.prototype.commit=function(t,e){void 0===e&&(e="");var n=this.skipsUndoManager;null===e&&(this.skipsUndoManager=!0,e=""),this.undoManager.Da(e);var i=!1;try{t(this),i=!0}finally{i?this.undoManager.eb(e):this.undoManager.Bf(),this.skipsUndoManager=n}},(_=rt.prototype).Ka=function(t,e){void 0===e&&(e=""),qe(this,"SourceChanged",es,e,t,null,null)},_.ua=function(t){if(null!==t){var e=this.Mh;if(""!==e&&void 0!==(e=be(t,e))){if(Ta(e))return e;Y("Key value for node data "+t+" is not a number or a string: "+e)}}},_.Sl=function(t,e){if(null!==t){var n=this.Mh;if(""!==n)if(this.lb(t)){var i=be(t,n);i!==e&&null===this.dc(e)&&(ne(t,n,e),void 0!==i&&this.kb.remove(i),this.kb.add(e,t),qe(this,"nodeKey",ee,n,t,i,e),"string"==typeof n&&this.Ka(t,n),this.Mo(i,e))}else ne(t,n,e)}},_.lb=function(t){var e=this.ua(t);return void 0!==e&&this.kb.I(e)===t},_.dc=function(t){return null===t&&Y("Model.findNodeDataForKey:key must not be null"),void 0!==t&&Ta(t)?this.kb.I(t):null},_.Mu=function(t){if(null!==t){var e=this.Mh;if(""!==e){var n=this.ua(t);if(void 0===n||this.kb.contains(n)){var i=this.Rk;if(null!==i&&null!=(n=i(this,t))&&!this.kb.contains(n))return void ne(t,e,n);if("string"==typeof n){for(i=2;this.kb.contains(n+i);)i++;ne(t,e,n+i)}else if(void 0===n||"number"==typeof n){for(n=-this.kb.count-1;this.kb.contains(n);)n--;ne(t,e,n)}}}}},_.lf=function(t){null!==t&&(qu(t),this.lb(t)||Gm(this,t,!0))},_.my=function(t){if(yn(t))for(var e=t.length,n=0;n<e;n++)this.lf(t[n]);else for(t=t.iterator;t.next();)this.lf(t.value)},_.Kl=function(t){null!==t&&F0(this,t,!0)},_.Uz=function(t){if(yn(t))for(var e=t.length,n=0;n<e;n++)this.Kl(t[n]);else for(t=t.iterator;t.next();)this.Kl(t.value)},_.Hz=function(t){if(t!==this.nodeDataArray&&yn(t)){var e=this.Zk;e.clear(),e.addAll(this.kb.iteratorKeys);var n=this.Xk;n.clear();for(var i=t.length,l=0;l<i;l++){var u=t[l],h=this.ua(u);if(void 0!==h){n.add(h);var f=this.dc(h);f!==u&&(null!==f?(this.ho(f,u),this.Tl(u,f)):(u=this.cloneDeep(u),this.Sl(u,h),this.lf(u)))}else h=this.cloneDeep(u),this.lf(h),n.add(this.ua(h))}for(t=e.iterator;t.next();)n.contains(i=t.value)||(i=this.dc(i))&&this.Kl(i);e.clear(),n.clear()}},_.Mo=function(t,e){void 0!==e&&(t=Dp(this,t))instanceof Z&&this.Lf.add(e,t)},_.ov=function(){},_.Nl=function(){},_.Ml=function(){},_.To=function(){},_.xy=function(t){void 0===t?this.Lf.clear():this.Lf.remove(t)},rt.prototype.copyNodeData=function(t){if(null===t)return null;var e=this.pk;return jt(t=null!==e?e(t,this):Sp(this,t,!0))&&wn(t),t},rt.prototype.setDataProperty=function(t,e,n){if(this.lb(t)){if(e===this.nodeKeyProperty)return void this.Sl(t,n);if(e===this.nodeCategoryProperty)return void this.Rl(t,n)}else!V0&&t instanceof ot&&(V0=!0,hi('Model.setDataProperty is modifying a GraphObject, "'+t.toString()+'"'),hi("  Is that really your intent?"));var i=be(t,e);i!==n&&(ne(t,e,n),this.fs(t,e,i,n))},(_=rt.prototype).set=function(t,e,n){this.setDataProperty(t,e,n)},_.ho=function(t,e){if(e){var i,n=this.lb(t);for(i in e)"__gohashid"===i||n&&i===this.nodeKeyProperty||this.setDataProperty(t,i,e[i])}},_.iy=function(t,e){this.Qr(t,-1,e)},_.Qr=function(t,e,n){0>e&&(e=t.length),Za(t,e,n),qe(this,"",nn,"",t,null,n,null,e)},_.Xu=function(t,e){void 0===e&&(e=-1),t===this.Mc&&Y("Model.removeArrayItem should not be called on the Model.nodeDataArray"),-1===e&&(e=t.length-1);var n=t[e];Ze(t,e),qe(this,"",xe,"",t,n,null,e,null)},_.uo=function(t){if(null===t)return"";var e=this.gj;return""===e||void 0===(e=be(t,e))?"":"string"==typeof e?e:void Y("getCategoryForNodeData found a non-string category for "+t+": "+e)},_.Rl=function(t,e){if(null!==t){var n=this.gj;if(""!==n)if(this.lb(t)){var i=be(t,n);void 0===i&&(i=""),i!==e&&(ne(t,n,e),qe(this,"nodeCategory",ee,n,t,i,e))}else ne(t,n,e)}},_.Tl=function(t,e){this.Rl(e,this.uo(t))},_.Bl=function(){return!1},_.Nj=function(){return!1},_.ki=function(){return!1},_.Vr=function(){return!1},_.Oj=function(){return!1},Mt.Object.defineProperties(rt.prototype,{name:{get:function(){return this.va},set:function(t){var e=this.va;e!==t&&(this.va=t,this.g("name",e,t))}},dataFormat:{get:function(){return this.Am},set:function(t){var e=this.Am;e!==t&&(this.Am=t,this.g("dataFormat",e,t))}},isReadOnly:{get:function(){return this.xg},set:function(t){var e=this.xg;e!==t&&(this.xg=t,this.g("isReadOnly",e,t))}},modelData:{get:function(){return this.j},set:function(t){var e=this.j;e!==t&&(this.j=t,this.g("modelData",e,t),this.Ka(t))}},undoManager:{get:function(){return this.m},set:function(t){var e=this.m;e!==t&&(null!==e&&e.yx(this),this.m=t,null!==t&&t.Bw(this))}},skipsUndoManager:{get:function(){return this.Mg},set:function(t){this.Mg=t}},nodeKeyProperty:{get:function(){return this.Mh},set:function(t){var e=this.Mh;e!==t&&(""===t&&Y("Model.nodeKeyProperty may not be the empty string"),0<this.kb.count&&Y("Cannot set Model.nodeKeyProperty when there is existing node data"),this.Mh=t,this.g("nodeKeyProperty",e,t))}},makeUniqueKeyFunction:{get:function(){return this.Rk},set:function(t){var e=this.Rk;e!==t&&(this.Rk=t,this.g("makeUniqueKeyFunction",e,t))}},nodeDataArray:{get:function(){return this.Mc},set:function(t){var e=this.Mc;if(e!==t){this.kb.clear(),this.ov();for(var n=t.length,i=0;i<n;i++){var l=t[i];jt(l)||Y("Model.nodeDataArray must only contain Objects, not: "+l),qu(l)}for(this.Mc=t,i=new q,l=0;l<n;l++){var u=t[l],h=this.ua(u);void 0===h||null!==this.kb.I(h)?i.add(u):this.kb.add(h,u)}for(i=i.iterator;i.next();)this.Mu(l=i.value),void 0!==(u=this.ua(l))&&this.kb.add(u,l);for(qe(this,"nodeDataArray",ee,"nodeDataArray",this,e,t),e=0;e<n;e++)this.Nl(i=t[e]),this.Ml(i);Array.isArray(t)||(this.isReadOnly=!0)}}},copyNodeDataFunction:{get:function(){return this.pk},set:function(t){var e=this.pk;e!==t&&(this.pk=t,this.g("copyNodeDataFunction",e,t))}},copiesArrays:{get:function(){return this.sm},set:function(t){var e=this.sm;e!==t&&(this.sm=t,this.g("copiesArrays",e,t))}},copiesArrayObjects:{get:function(){return this.rm},set:function(t){var e=this.rm;e!==t&&(this.rm=t,this.g("copiesArrayObjects",e,t))}},copiesKey:{get:function(){return this.um},set:function(t){var e=this.um;e!==t&&(this.um=t,this.g("copiesKey",e,t))}},afterCopyFunction:{get:function(){return this.fm},set:function(t){var e=this.fm;e!==t&&(this.fm=t,this.g("afterCopyFunction",e,t))}},nodeCategoryProperty:{get:function(){return this.gj},set:function(t){var e=this.gj;e!==t&&(this.gj=t,this.g("nodeCategoryProperty",e,t))}},type:{get:function(){return"Model"}}}),rt.prototype.setCategoryForNodeData=rt.prototype.Rl,rt.prototype.getCategoryForNodeData=rt.prototype.uo,rt.prototype.removeArrayItem=rt.prototype.Xu,rt.prototype.insertArrayItem=rt.prototype.Qr,rt.prototype.addArrayItem=rt.prototype.iy,rt.prototype.assignAllDataProperties=rt.prototype.ho,rt.prototype.set=rt.prototype.set,rt.prototype.clearUnresolvedReferences=rt.prototype.xy,rt.prototype.mergeNodeDataArray=rt.prototype.Hz,rt.prototype.removeNodeDataCollection=rt.prototype.Uz,rt.prototype.removeNodeData=rt.prototype.Kl,rt.prototype.addNodeDataCollection=rt.prototype.my,rt.prototype.addNodeData=rt.prototype.lf,rt.prototype.makeNodeDataKeyUnique=rt.prototype.Mu,rt.prototype.findNodeDataForKey=rt.prototype.dc,rt.prototype.containsNodeData=rt.prototype.lb,rt.prototype.setKeyForNodeData=rt.prototype.Sl,rt.prototype.getKeyForNodeData=rt.prototype.ua,rt.prototype.updateTargetBindings=rt.prototype.Ka,rt.prototype.commit=rt.prototype.commit,rt.prototype.rollbackTransaction=rt.prototype.Bf,rt.prototype.commitTransaction=rt.prototype.eb,rt.prototype.startTransaction=rt.prototype.Da,rt.prototype.raiseDataChanged=rt.prototype.fs,rt.prototype.raiseChanged=rt.prototype.g,rt.prototype.raiseChangedEvent=rt.prototype.bb,rt.prototype.removeChangedListener=rt.prototype.ak,rt.prototype.addChangedListener=rt.prototype.Ug,rt.prototype.writeJsonValue=rt.prototype.bm,rt.prototype.replaceJsonObjects=rt.prototype.Ll,rt.prototype.applyIncrementalJSON=rt.prototype.qy,rt.prototype.applyIncrementalJson=rt.prototype.Dw,rt.prototype.toJSON=rt.prototype.toJSON,rt.prototype.toJson=rt.prototype.Qo,rt.prototype.toIncrementalJSON=rt.prototype.fA,rt.prototype.toIncrementalJson=rt.prototype.Jx,rt.prototype.toIncrementalData=rt.prototype.eA,rt.prototype.clear=rt.prototype.clear;var V0=!1,fo={};function de(t,e,n,i){wn(this),this._isFrozen=!1,void 0===t&&(t=""),void 0===e&&(e=t),void 0===n&&(n=null),this.j=-1,this.sd=null,this.ml=t,this.ll=this.Wn=0,this.Zq=null,this.cn=!1,this.hl=e,this.qm=n,void 0===i?(this.Uk=O1,this.jk=null):(this.Uk=$m,this.jk=i),this.Vs=new Z}function zm(t,e,n){return null===(t=t.sourceName)||""===t?e:"/"===t?n.part:"."===t?n:".."===t?n.panel:e.fb(t)}rt.className="Model",rt.fromJSON=rt.fromJson=function(t,e){void 0===e&&(e=null);var n=null;if("string"==typeof t)try{n=pt.JSON.parse(t)}catch{}else"object"==typeof t?n=t:Y("Unable to construct a Model from: "+t);if(null===e){t=null;var i=n.class;if("string"==typeof i)try{var l=null;0===i.indexOf("go.")?l=j0(i=i.substr(3)):null===(l=j0(i))&&(l=pt[i]),"function"==typeof l&&(t=new l)}catch{}null===t||t instanceof rt?e=t:Y("Unable to construct a Model of declared class: "+n.class)}return null===e&&(e=rt.constructGraphLinksModel()),e.Io(n),e.Uu(n),e},rt.safePropertyValue=be,rt.safePropertySet=ne,fo.Brush=bt,fo.ChangedEvent=Me,fo.Geometry=K,fo.Margin=Bt,fo.Panel=$,fo.Point=P,fo.Rect=B,fo.Size=dt,fo.Spot=it,fo.Transaction=xn,fo.UndoManager=Pe,de.prototype.copy=function(){var t=new de;return t.ml=this.ml,t.Wn=this.Wn,t.ll=this.ll,t.Zq=this.Zq,t.cn=this.cn,t.hl=this.hl,t.qm=this.qm,t.Uk=this.Uk,t.jk=this.jk,t},(_=de.prototype).ob=function(t){t.classType===de&&(this.mode=t)},_.toString=function(){return"Binding("+this.targetProperty+":"+this.sourceProperty+(-1!==this.ti?" "+this.ti:"")+" "+this.mode.name+")"},_.freeze=function(){return this._isFrozen=!0,this},_.ja=function(){return this._isFrozen=!1,this},_.px=function(t){return void 0===t&&(t=null),this.mode=$m,this.backConverter=t,this},_.Fo=function(t){return void 0===t&&(t=""),this.sourceName=t,this.isToModel=!1,this},_.Kz=function(){return this.sourceName=null,this.isToModel=!0,this},_.pv=function(t,e,n){var i=this.hl;if(void 0===n||""===i||i===n){n=this.ml;var l=this.qm;if(null===l&&""===n)hi("Binding error: target property is the empty string: "+this.toString());else{var u=e;if(""!==i&&(u=be(e,i)),void 0!==u)if(null===l)""!==n&&ne(t,n,u);else try{""!==n?ne(t,n,l(u,t)):l(u,t)}catch{}}}},_.Vo=function(t,e,n,i){if(this.Uk===$m){var l=this.ml;if(void 0===n||l===n){n=this.hl;var u=this.jk,h=t;if(""!==l&&(h=be(t,l)),void 0!==h&&!this.Vs.contains(t))try{this.Vs.add(t);var f=null!==i?i.diagram:null,p=null!==f?f.model:null;if(null===u){if(""!==n)null!==p?p.setDataProperty(e,n,h):ne(e,n,h);else if(null!==p&&null!==i&&0<=i.itemIndex&&null!==i.panel&&Array.isArray(i.panel.itemArray)){var g=i.itemIndex,m=i.panel.itemArray;p.Xu(m,g),p.Qr(m,g,h)}}else try{if(""!==n){var v=u(h,e,p);null!==p?p.setDataProperty(e,n,v):ne(e,n,v)}else{var x=u(h,e,p);if(void 0!==x&&null!==p&&null!==i&&0<=i.itemIndex&&null!==i.panel&&Array.isArray(i.panel.itemArray)){var D=i.itemIndex,M=i.panel.itemArray;p.Xu(M,D),p.Qr(M,D,x)}}}catch{}}finally{this.Vs.remove(t)}}}},Mt.Object.defineProperties(de.prototype,{ti:{get:function(){return this.j},set:function(t){this._isFrozen&&It(this),this.j=t}},targetProperty:{get:function(){return this.ml},set:function(t){this._isFrozen&&It(this),this.ml=t}},sourceName:{get:function(){return this.Zq},set:function(t){this._isFrozen&&It(this),this.Zq=t,null!==t&&(this.cn=!1)}},isToModel:{get:function(){return this.cn},set:function(t){this._isFrozen&&It(this),this.cn=t}},sourceProperty:{get:function(){return this.hl},set:function(t){this._isFrozen&&It(this),this.hl=t}},converter:{get:function(){return this.qm},set:function(t){this._isFrozen&&It(this),this.qm=t}},backConverter:{get:function(){return this.jk},set:function(t){this._isFrozen&&It(this),this.jk=t}},mode:{get:function(){return this.Uk},set:function(t){this._isFrozen&&It(this),this.Uk=t}}}),de.prototype.updateSource=de.prototype.Vo,de.prototype.updateTarget=de.prototype.pv,de.prototype.ofModel=de.prototype.Kz,de.prototype.ofObject=de.prototype.Fo,de.prototype.makeTwoWay=de.prototype.px;var lD="Binding",O1=new W(de,"OneWay",1),$m=new W(de,"TwoWay",2);function Et(t,e,n){rt.call(this),this.zv=',\n  "insertedLinkKeys": ',this.Ox=',\n  "modifiedLinkData": ',this.Bv=',\n  "removedLinkKeys": ',this.ed=[],this.Rf=new Z,this.rb=new vt,this.Bh="",this.Li=this.nk=this.Sk=null,this.Ze="from",this.$e="to",this.aj=this.$i="",this.Zi="category",this.ce="",this.Yk="isGroup",this.ye="group",this.tm=!1,void 0!==e&&(this.linkDataArray=e),void 0!==t&&(yn(t)?this.nodeDataArray=t:Object.assign(this,t)),n&&Object.assign(this,n)}function L1(t,e){for(var n=new Z,i=0;i<t.linkDataArray.length;i++){var l=t.linkDataArray[i];Hm(t,e,l,l,n)}return n}function xr(t,e,n){if(null!==e&&""!==(t=n?t.Ze:t.$e)&&void 0!==(t=be(e,t))){if(Ta(t))return t;Y((n?"FromKey":"ToKey")+" value for link data "+e+" is not a number or a string: "+t)}}function Sf(t,e,n,i){if(null===n&&(n=void 0),null!==e){var l=i?t.Ze:t.$e;if(""!==l)if(n=t.Dl(n),t.Cc(e)){var u=be(e,l);u!==n&&(bo(t,u,e),ne(e,l,n),null===t.dc(n)&&Lo(t,n,e),qe(t,i?"linkFromKey":"linkToKey",ee,l,e,u,n),"string"==typeof l&&t.Ka(e,l))}else ne(e,l,n)}}function _f(t,e,n){return null===e||""===(t=n?t.$i:t.aj)||void 0===(e=be(e,t))?"":e}function Tf(t,e,n,i){if(null!==e){var l=i?t.$i:t.aj;if(""!==l)if(t.Cc(e)){var u=be(e,l);void 0===u&&(u=""),u!==n&&(ne(e,l,n),qe(t,i?"linkFromPortId":"linkToPortId",ee,l,e,u,n),"string"==typeof l&&t.Ka(e,l))}else ne(e,l,n)}}function b1(t,e,n){if(""!==t.linkKeyProperty){var i=t.uc(e);if(void 0!==i&&t.rb.I(i)===e)return;t.$r(e),void 0===(i=t.uc(e))&&Y("GraphLinksModel.makeLinkDataKeyUnique failed on "+e+". Data not added to model."),t.rb.add(i,e)}t.Rf.add(e),i=null,n&&t.ed.splice(i=t.ed.length,0,e),qe(t,"linkDataArray",nn,"linkDataArray",t,null,e,null,i),Tp(t,e)}function _p(t,e,n){t.Rf.remove(e);var i=t.uc(e);if(void 0!==i&&t.rb.remove(i),i=null,n){if(0>(i=t.ed.indexOf(e)))return;t.ed.splice(i,1)}if(qe(t,"linkDataArray",xe,"linkDataArray",t,e,null,i,null),bo(t,n=xr(t,e,!0),e),bo(t,n=xr(t,e,!1),e),i=t.vf(e),Array.isArray(i))for(var l=i.length,u=0;u<l;u++)bo(t,n=i[u],e)}function Tp(t,e){var n=xr(t,e,!0);n=t.Dl(n),null===t.dc(n)&&Lo(t,n,e),n=xr(t,e,!1),n=t.Dl(n),null===t.dc(n)&&Lo(t,n,e);var i=t.vf(e);if(Array.isArray(i))for(var l=i.length,u=0;u<l;u++)null===t.dc(n=i[u])&&Lo(t,n,e)}function Ep(t,e,n){t.Oo(n,t.Mr(e)),t.cv(n,t.$w(e)),t.gv(n,t.ex(e)),t.ls(n,t.vf(e)),t.dv(n,t.ax(e)),t.hv(n,t.gx(e))}de.className="Binding",de.parseEnum=function(t,e){return function(n){return null===(n=Ks(t,n))?e:n}},de.toString=io,de.OneWay=O1,de.TwoWay=$m,Ht(Et,rt),Et.constructGraphLinksModel=rt.constructGraphLinksModel,Et.prototype.cloneProtected=function(t){rt.prototype.cloneProtected.call(this,t),t.Bh=this.Bh,t.Sk=this.Sk,t.nk=this.nk,t.Ze=this.Ze,t.$e=this.$e,t.$i=this.$i,t.aj=this.aj,t.Zi=this.Zi,t.ce=this.ce,t.Yk=this.Yk,t.ye=this.ye,t.tm=this.tm},(_=Et.prototype).clear=function(){rt.prototype.clear.call(this),this.ed=[],this.rb.clear(),this.Rf.clear()},_.toString=function(t){if(void 0===t&&(t=0),2<=t)return this.Qo();var e=(""!==this.name?this.name:"")+" GraphLinksModel";if(0<t){e+="\n node data:";var i,n=(t=this.nodeDataArray).length;for(i=0;i<n;i++){var l=t[i];e+=" "+this.ua(l)+":"+io(l)}for(e+="\n link data:",n=(t=this.linkDataArray).length,i=0;i<n;i++)e+=" "+xr(this,l=t[i],!0)+"--\x3e"+xr(this,l,!1)}return e},_.uv=function(t,e){""===this.linkKeyProperty&&Y("GraphLinksModel.linkKeyProperty must not be an empty string for .toIncrementalData() to succeed.");var n=rt.prototype.uv.call(this,t,e),i=this,l=new Z,u=new Z,h=new Z,f=this.kh;t.changes.each(function(m){m.model===i&&("linkDataArray"===m.modelChange?m.change===nn?l.add(m.newValue):m.change===xe&&h.add(m.oldValue):i.Cc(m.object)?u.add(m.object):null!==m.object&&(null!==m.object&&f&&f.contains(m.object)?f.get(m.object).each(function(v){i.Cc(v)&&u.add(v)}):m.object instanceof rt||i.lb(m.object)||L1(i,m.object).each(function(v){u.add(v)})))});var p=this.Xk;p.clear(),l.each(function(m){p.add(i.uc(m)),e||u.add(m)});var g=this.Zk;return g.clear(),h.each(function(m){g.add(i.uc(m)),e&&u.add(m)}),t=i.cloneDeep(u.Ea()),0<p.count&&(null===n&&(n={}),e?n.removedLinkKeys=p.Ea():n.insertedLinkKeys=p.Ea()),0<t.length&&(null===n&&(n={}),n.modifiedLinkData=t),0<g.count&&(null===n&&(n={}),e?n.insertedLinkKeys=g.Ea():n.removedLinkKeys=g.Ea()),g.clear(),p.clear(),n},_.am=function(){var t=rt.prototype.am.call(this),e="";return"category"!==this.linkCategoryProperty&&"string"==typeof this.linkCategoryProperty&&(e+=',\n  "linkCategoryProperty": '+this.quote(this.linkCategoryProperty)),""!==this.linkKeyProperty&&"string"==typeof this.linkKeyProperty&&(e+=',\n  "linkKeyProperty": '+this.quote(this.linkKeyProperty)),"from"!==this.linkFromKeyProperty&&"string"==typeof this.linkFromKeyProperty&&(e+=',\n  "linkFromKeyProperty": '+this.quote(this.linkFromKeyProperty)),"to"!==this.linkToKeyProperty&&"string"==typeof this.linkToKeyProperty&&(e+=',\n  "linkToKeyProperty": '+this.quote(this.linkToKeyProperty)),""!==this.linkFromPortIdProperty&&"string"==typeof this.linkFromPortIdProperty&&(e+=',\n  "linkFromPortIdProperty": '+this.quote(this.linkFromPortIdProperty)),""!==this.linkToPortIdProperty&&"string"==typeof this.linkToPortIdProperty&&(e+=',\n  "linkToPortIdProperty": '+this.quote(this.linkToPortIdProperty)),""!==this.linkLabelKeysProperty&&"string"==typeof this.linkLabelKeysProperty&&(e+=',\n  "linkLabelKeysProperty": '+this.quote(this.linkLabelKeysProperty)),"isGroup"!==this.nodeIsGroupProperty&&"string"==typeof this.nodeIsGroupProperty&&(e+=',\n  "nodeIsGroupProperty": '+this.quote(this.nodeIsGroupProperty)),"group"!==this.nodeGroupKeyProperty&&"string"==typeof this.nodeGroupKeyProperty&&(e+=',\n  "nodeGroupKeyProperty": '+this.quote(this.nodeGroupKeyProperty)),t+e},_.Io=function(t){rt.prototype.Io.call(this,t),t.linkKeyProperty&&(this.linkKeyProperty=t.linkKeyProperty),t.linkFromKeyProperty&&(this.linkFromKeyProperty=t.linkFromKeyProperty),t.linkToKeyProperty&&(this.linkToKeyProperty=t.linkToKeyProperty),t.linkFromPortIdProperty&&(this.linkFromPortIdProperty=t.linkFromPortIdProperty),t.linkToPortIdProperty&&(this.linkToPortIdProperty=t.linkToPortIdProperty),t.linkCategoryProperty&&(this.linkCategoryProperty=t.linkCategoryProperty),t.linkLabelKeysProperty&&(this.linkLabelKeysProperty=t.linkLabelKeysProperty),t.nodeIsGroupProperty&&(this.nodeIsGroupProperty=t.nodeIsGroupProperty),t.nodeGroupKeyProperty&&(this.nodeGroupKeyProperty=t.nodeGroupKeyProperty)},_.vv=function(){return rt.prototype.vv.call(this)+',\n  "linkDataArray": '+Vl(this,this.linkDataArray,!0)},_.Uu=function(t){rt.prototype.Uu.call(this,t),t=t.linkDataArray,Array.isArray(t)&&(this.Ll(t),this.linkDataArray=t)},_.tv=function(t,e){""===this.linkKeyProperty&&Y("GraphLinksModel.linkKeyProperty must not be an empty string for .toIncrementalJson() to succeed.");var n=rt.prototype.tv.call(this,t,e),i=this,l=new Z,u=new Z,h=new Z,f=this.kh;t.changes.each(function(m){m.model===i&&("linkDataArray"===m.modelChange?m.change===nn?l.add(m.newValue):m.change===xe&&h.add(m.oldValue):i.Cc(m.object)?u.add(m.object):null!==m.object&&(null!==m.object&&f&&f.contains(m.object)?f.get(m.object).each(function(v){i.Cc(v)&&u.add(v)}):m.object instanceof rt||i.lb(m.object)||L1(i,m.object).each(function(v){u.add(v)})))});var p=this.Xk;p.clear(),l.each(function(m){p.add(i.uc(m)),e||u.add(m)});var g=this.Zk;return g.clear(),h.each(function(m){g.add(i.uc(m)),e&&u.add(m)}),t=n,0<p.count&&(t+=(e?this.Bv:this.zv)+Vl(this,p.Ea(),!0)),0<u.count&&(t+=this.Ox+Vl(this,u.Ea(),!0)),0<g.count&&(t+=(e?this.zv:this.Bv)+Vl(this,g.Ea(),!0)),g.clear(),p.clear(),t},_.Ho=function(t){(void 0!==t.linkCategoryProperty&&t.linkCategoryProperty!==this.linkCategoryProperty||void 0!==t.linkKeyProperty&&t.linkKeyProperty!==this.linkKeyProperty||void 0!==t.linkFromKeyProperty&&t.linkFromKeyProperty!==this.linkFromKeyProperty||void 0!==t.linkToKeyProperty&&t.linkToKeyProperty!==this.linkToKeyProperty||void 0!==t.linkFromPortIdProperty&&t.linkFromPortIdProperty!==this.linkFromPortIdProperty||void 0!==t.linkToPortIdProperty&&t.linkToPortIdProperty!==this.linkToPortIdProperty||void 0!==t.linkLabelKeysProperty&&t.linkLabelKeysProperty!==this.linkLabelKeysProperty||void 0!==t.nodeIsGroupProperty&&t.nodeIsGroupProperty!==this.nodeIsGroupProperty||void 0!==t.nodeGroupKeyProperty&&t.nodeGroupKeyProperty!==this.nodeGroupKeyProperty)&&Y("applyIncrementalJson cannot change Model properties"),rt.prototype.Ho.call(this,t);var e=t.insertedLinkKeys;if(Array.isArray(e))for(var n=e.length,i=0;i<n;i++){var l=e[i],u=this.Zg(l);null===u&&(u=this.no({}),this.ks(u,l),this.Yh(u))}if(e=t.modifiedLinkData,Array.isArray(e))for(n=e.length,i=0;i<n;i++)if(u=this.uc(l=e[i]),null!==(u=this.Zg(u))){for(var h in l)"__gohashid"!==h&&h!==this.linkKeyProperty&&this.setDataProperty(u,h,l[h]);Ep(this,l,u)}if(t=t.removedLinkKeys,Array.isArray(t))for(h=t.length,e=0;e<h;e++)null!==(n=this.Zg(t[e]))&&this.Jl(n)},Et.prototype.changeState=function(t,e){if(null!==t&&t.model===this){if(t.change===ee){var n=t.object,i=t.propertyName;if(i===this.linkKeyProperty&&this.Cc(n)){var l=t.I(e);return void 0!==(e=t.I(!e))&&this.rb.remove(e),void 0!==l&&this.rb.add(l,n),void ne(n,i,l)}}else if(t.change===nn){if(n=t.newParam,"linkDataArray"===t.modelChange)return void(jt(t=t.newValue)&&"number"==typeof n&&(i=this.uc(t),e?(this.Rf.remove(t),this.ed[n]===t&&this.ed.splice(n,1),void 0!==i&&this.rb.remove(i)):(this.Rf.add(t),this.ed[n]!==t&&this.ed.splice(n,0,t),void 0!==i&&this.rb.add(i,t))));if("linkLabelKeys"===t.modelChange)return i=this.vf(t.object),void(Array.isArray(i)&&"number"==typeof n&&(e?(n=i.indexOf(t.newValue),0<=n&&i.splice(n,1)):0>i.indexOf(t.newValue)&&i.splice(n,0,t.newValue)))}else if(t.change===xe){if(n=t.oldParam,"linkDataArray"===t.modelChange)return void(jt(t=t.oldValue)&&"number"==typeof n&&(i=this.uc(t),e?(this.Rf.add(t),this.ed[n]!==t&&this.ed.splice(n,0,t),void 0!==i&&this.rb.add(i,t)):(this.Rf.remove(t),this.ed[n]===t&&this.ed.splice(n,1),void 0!==i&&this.rb.remove(i))));if("linkLabelKeys"===t.modelChange)return i=this.vf(t.object),void(Array.isArray(i)&&"number"==typeof n&&(e?0>i.indexOf(t.newValue)&&i.splice(n,0,t.newValue):(n=i.indexOf(t.newValue),0<=n&&i.splice(n,1))))}rt.prototype.changeState.call(this,t,e)}},(_=Et.prototype).Dl=function(t){if(void 0!==t){var e=this.Li;if(null!==e){var n=this.dc(t);null===n&&(ne(n=this.copyNodeData(e),this.nodeKeyProperty,t),this.lf(n))}return t}},_.$w=function(t){return xr(this,t,!0)},_.cv=function(t,e){Sf(this,t,e,!0)},_.ex=function(t){return xr(this,t,!1)},_.gv=function(t,e){Sf(this,t,e,!1)},_.ax=function(t){return _f(this,t,!0)},_.dv=function(t,e){Tf(this,t,e,!0)},_.gx=function(t){return _f(this,t,!1)},_.hv=function(t,e){Tf(this,t,e,!1)},_.vf=function(t){if(null===t)return B0;var e=this.ce;return""===e||void 0===(t=be(t,e))?B0:t},_.ls=function(t,e){if(null!==t){var n=this.ce;if(""!==n)if(this.Cc(t)){var i=be(t,n);if(void 0===i&&(i=B0),i!==e){if(Array.isArray(i))for(var l=i.length,u=0;u<l;u++)bo(this,i[u],t);for(ne(t,n,e),l=e.length,u=0;u<l;u++){var h=e[u];null===this.dc(h)&&Lo(this,h,t)}qe(this,"linkLabelKeys",ee,n,t,i,e),"string"==typeof n&&this.Ka(t,n)}}else ne(t,n,e)}},_.hu=function(t,e){if(null!=e&&null!==t){var n=this.ce;if(""!==n){var i=be(t,n);if(void 0===i)(n=[]).push(e),this.ls(t,n);else if(Array.isArray(i)){var l=i.indexOf(e);0<=l||(l=i.length,i.push(e),this.Cc(t)&&(null===this.dc(e)&&Lo(this,e,t),qe(this,"linkLabelKeys",nn,n,t,null,e,null,l)))}else Y(n+" property is not an Array; cannot addLabelKeyForLinkData: "+t)}}},_.xx=function(t,e){if(null!=e&&null!==t){var n=this.ce;if(""!==n){var i=be(t,n);if(Array.isArray(i)){var l=i.indexOf(e);0>l||(i.splice(l,1),this.Cc(t)&&(bo(this,e,t),qe(this,"linkLabelKeys",xe,n,t,e,null,l,null)))}else void 0!==i&&Y(n+" property is not an Array; cannot removeLabelKeyforLinkData: "+t)}}},_.uc=function(t){if(null!==t){var e=this.Bh;if(""!==e&&void 0!==(e=be(t,e))){if(Ta(e))return e;Y("Key value for link data "+t+" is not a number or a string: "+e)}}},_.ks=function(t,e){if(null!==t){var n=this.Bh;if(""!==n)if(this.Cc(t)){var i=be(t,n);i!==e&&null===this.Zg(e)&&(ne(t,n,e),void 0!==i&&this.rb.remove(i),this.rb.add(e,t),qe(this,"linkKey",ee,n,t,i,e),"string"==typeof n&&this.Ka(t,n))}else ne(t,n,e)}},_.Zg=function(t){return null===t&&Y("GraphLinksModel.findLinkDataForKey:key must not be null"),void 0!==t&&Ta(t)?this.rb.I(t):null},_.$r=function(t){if(null!==t){var e=this.Bh;if(""!==e){var n=this.uc(t);if(void 0===n||this.rb.contains(n)){var i=this.Sk;if(null!==i&&null!=(n=i(this,t))&&!this.rb.contains(n))return void ne(t,e,n);if("string"==typeof n){for(i=2;this.rb.contains(n+i);)i++;ne(t,e,n+i)}else if(void 0===n||"number"==typeof n){for(n=-this.rb.count-1;this.rb.contains(n);)n--;ne(t,e,n)}}}}},_.Cc=function(t){return null!==t&&this.Rf.contains(t)},_.Yh=function(t){null!==t&&(qu(t),this.Cc(t)||b1(this,t,!0))},_.ly=function(t){if(Array.isArray(t))for(var e=t.length,n=0;n<e;n++)this.Yh(t[n]);else for(t=t.iterator;t.next();)this.Yh(t.value)},_.Jl=function(t){null!==t&&_p(this,t,!0)},_.Sz=function(t){if(Array.isArray(t))for(var e=t.length,n=0;n<e;n++)this.Jl(t[n]);else for(t=t.iterator;t.next();)this.Jl(t.value)},_.Gz=function(t){if(""===this.linkKeyProperty&&Y("GraphLinksModel.linkKeyProperty must not be an empty string for .mergeLinkDataArray() to succeed."),t!==this.linkDataArray&&yn(t)){var e=this.Zk;e.clear(),e.addAll(this.rb.iteratorKeys);var n=this.Xk;n.clear();for(var i=t.length,l=0;l<i;l++){var u=t[l],h=this.uc(u);if(void 0!==h){n.add(h);var f=this.Zg(h);f!==u&&(null!==f?(this.ho(f,u),Ep(this,u,f)):(u=this.cloneDeep(u),this.ks(u,h),this.Yh(u)))}else h=this.cloneDeep(u),this.Yh(h),n.add(this.uc(h))}for(t=e.iterator;t.next();)n.contains(i=t.value)||(i=this.Zg(i))&&this.Jl(i);e.clear(),n.clear()}},_.no=function(t){if(null===t)return null;var e=this.nk;return jt(t=null!==e?e(t,this):Sp(this,t,!0))&&(wn(t),""!==this.Ze&&ne(t,this.Ze,void 0),""!==this.$e&&ne(t,this.$e,void 0),""!==this.ce&&ne(t,this.ce,[])),t},_.Ku=function(t){if(null===t)return!1;var e=this.Yk;return""!==e&&!!be(t,e)},_.ah=function(t){if(null!==t){var e=this.ye;if(""!==e&&void 0!==(e=be(t,e))){if(Ta(e))return e;Y("GroupKey value for node data "+t+" is not a number or a string: "+e)}}},_.Po=function(t,e){if(null===e&&(e=void 0),null!==t){var n=this.ye;if(""!==n)if(this.lb(t)){var i=be(t,n);i!==e&&(bo(this,i,t),ne(t,n,e),null===this.dc(e)&&Lo(this,e,t),qe(this,"nodeGroupKey",ee,n,t,i,e),"string"==typeof n&&this.Ka(t,n))}else ne(t,n,e)}},Et.prototype.copyNodeData=function(t){return null===t?null:(t=rt.prototype.copyNodeData.call(this,t),this.Cj||""===this.ye||void 0===be(t,this.ye)||ne(t,this.ye,void 0),t)},Et.prototype.setDataProperty=function(t,e,n){if(this.lb(t)){if(e===this.nodeKeyProperty)return void this.Sl(t,n);if(e===this.nodeCategoryProperty)return void this.Rl(t,n);if(e===this.nodeGroupKeyProperty)return void this.Po(t,n)}else if(this.Cc(t)){if(e===this.linkFromKeyProperty)return void Sf(this,t,n,!0);if(e===this.linkToKeyProperty)return void Sf(this,t,n,!1);if(e===this.linkFromPortIdProperty)return void Tf(this,t,n,!0);if(e===this.linkToPortIdProperty)return void Tf(this,t,n,!1);if(e===this.linkKeyProperty)return void this.ks(t,n);if(e===this.linkCategoryProperty)return void this.Oo(t,n);if(e===this.linkLabelKeysProperty)return void this.ls(t,n)}var i=be(t,e);i!==n&&(ne(t,e,n),this.fs(t,e,i,n))},(_=Et.prototype).ho=function(t,e){if(e){var l,n=this.lb(t),i=this.Cc(t);for(l in e)"__gohashid"===l||n&&l===this.nodeKeyProperty||n&&l===this.nodeIsGroupProperty&&be(t,l)===e[l]||i&&l===this.linkKeyProperty||this.setDataProperty(t,l,e[l])}},_.Mo=function(t,e){rt.prototype.Mo.call(this,t,e);for(var n=this.kb.iterator;n.next();)this.Zu(n.value,t,e);for(n=this.Rf.iterator;n.next();){var i=n.value,l=t,u=e;if(xr(this,i,!0)===l){var h=this.Ze;ne(i,h,u),qe(this,"linkFromKey",ee,h,i,l,u),"string"==typeof h&&this.Ka(i,h)}if(xr(this,i,!1)===l&&(ne(i,h=this.$e,u),qe(this,"linkToKey",ee,h,i,l,u),"string"==typeof h&&this.Ka(i,h)),h=this.vf(i),Array.isArray(h))for(var f=h.length,p=this.ce,g=0;g<f;g++)h[g]===l&&(h[g]=u,qe(this,"linkLabelKeys",nn,p,i,l,u,g,g))}},_.Zu=function(t,e,n){if(this.ah(t)===e){var i=this.ye;ne(t,i,n),qe(this,"nodeGroupKey",ee,i,t,e,n),"string"==typeof i&&this.Ka(t,i)}},_.ov=function(){rt.prototype.ov.call(this);for(var t=this.linkDataArray,e=t.length,n=0;n<e;n++)Tp(this,t[n])},_.Nl=function(t){rt.prototype.Nl.call(this,t);var e=Dp(this,t=this.ua(t));if(null!==e){var n=oe();for(e=e.iterator;e.next();){var i=e.value;if(this.lb(i)){if(this.ah(i)===t){var l=this.ye;qe(this,"nodeGroupKey",ee,l,i,t,t),"string"==typeof l&&this.Ka(i,l),n.push(i)}}else if(xr(this,i,!0)===t&&(qe(this,"linkFromKey",ee,l=this.Ze,i,t,t),"string"==typeof l&&this.Ka(i,l),n.push(i)),xr(this,i,!1)===t&&(qe(this,"linkToKey",ee,l=this.$e,i,t,t),"string"==typeof l&&this.Ka(i,l),n.push(i)),l=this.vf(i),Array.isArray(l))for(var u=l.length,h=this.ce,f=0;f<u;f++)l[f]===t&&(qe(this,"linkLabelKeys",nn,h,i,t,t,f,f),n.push(i))}for(e=0;e<n.length;e++)bo(this,t,n[e]);Nt(n)}},_.Ml=function(t){rt.prototype.Ml.call(this,t);var e=this.ah(t);null===this.dc(e)&&Lo(this,e,t)},_.To=function(t){rt.prototype.To.call(this,t),bo(this,this.ah(t),t)},_.Mr=function(t){if(null===t)return"";var e=this.Zi;return""===e||void 0===(e=be(t,e))?"":"string"==typeof e?e:void Y("getCategoryForLinkData found a non-string category for "+t+": "+e)},Et.prototype.getLinkCategoryForData=function(t){return this.Mr(t)},Et.prototype.Oo=function(t,e){if(null!==t){var n=this.Zi;if(""!==n)if(this.Cc(t)){var i=be(t,n);void 0===i&&(i=""),i!==e&&(ne(t,n,e),qe(this,"linkCategory",ee,n,t,i,e),"string"==typeof n&&this.Ka(t,n))}else ne(t,n,e)}},Et.prototype.setLinkCategoryForData=function(t,e){this.Oo(t,e)},(_=Et.prototype).Tl=function(t,e){rt.prototype.Tl.call(this,t,e),this.Po(e,this.ah(t))},_.Nj=function(){return!0},_.ki=function(){return!0},_.Vr=function(){return!0},_.Oj=function(){return!0},Mt.Object.defineProperties(Et.prototype,{archetypeNodeData:{get:function(){return this.Li},set:function(t){var e=this.Li;e!==t&&(this.Li=t,this.g("archetypeNodeData",e,t))}},linkFromKeyProperty:{get:function(){return this.Ze},set:function(t){var e=this.Ze;e!==t&&(this.Ze=t,this.g("linkFromKeyProperty",e,t))}},linkToKeyProperty:{get:function(){return this.$e},set:function(t){var e=this.$e;e!==t&&(this.$e=t,this.g("linkToKeyProperty",e,t))}},linkFromPortIdProperty:{get:function(){return this.$i},set:function(t){var e=this.$i;e!==t&&(this.$i=t,this.g("linkFromPortIdProperty",e,t))}},linkToPortIdProperty:{get:function(){return this.aj},set:function(t){var e=this.aj;e!==t&&(this.aj=t,this.g("linkToPortIdProperty",e,t))}},linkLabelKeysProperty:{get:function(){return this.ce},set:function(t){var e=this.ce;e!==t&&(this.ce=t,this.g("linkLabelKeysProperty",e,t))}},linkDataArray:{get:function(){return this.ed},set:function(t){var e=this.ed;if(e!==t){this.rb.clear();for(var n=t.length,i=0;i<n;i++){var l=t[i];jt(l)||Y("GraphLinksModel.linkDataArray must only contain Objects, not: "+l),qu(l)}if(this.ed=t,""!==this.linkKeyProperty){for(i=new q,l=0;l<n;l++){var u=t[l],h=this.uc(u);void 0===h||null!==this.rb.I(h)?i.add(u):this.rb.add(h,u)}for(i=i.iterator;i.next();)this.$r(l=i.value),void 0!==(u=this.uc(l))&&this.rb.add(u,l)}for(i=new Z,l=0;l<n;l++)i.add(t[l]);for(this.Rf=i,qe(this,"linkDataArray",ee,"linkDataArray",this,e,t),e=0;e<n;e++)Tp(this,t[e])}}},linkKeyProperty:{get:function(){return this.Bh},set:function(t){var e=this.Bh;if(e!==t){this.Bh=t,this.rb.clear();for(var n=this.linkDataArray.length,i=0;i<n;i++){var l=this.linkDataArray[i],u=this.uc(l);void 0===u&&(this.$r(l),u=this.uc(l)),void 0!==u&&this.rb.add(u,l)}this.g("linkKeyProperty",e,t)}}},makeUniqueLinkKeyFunction:{get:function(){return this.Sk},set:function(t){var e=this.Sk;e!==t&&(this.Sk=t,this.g("makeUniqueLinkKeyFunction",e,t))}},copyLinkDataFunction:{get:function(){return this.nk},set:function(t){var e=this.nk;e!==t&&(this.nk=t,this.g("copyLinkDataFunction",e,t))}},nodeIsGroupProperty:{get:function(){return this.Yk},set:function(t){var e=this.Yk;e!==t&&(this.Yk=t,this.g("nodeIsGroupProperty",e,t))}},nodeGroupKeyProperty:{get:function(){return this.ye},set:function(t){var e=this.ye;e!==t&&(this.ye=t,this.g("nodeGroupKeyProperty",e,t))}},Cj:{get:function(){return this.tm},set:function(t){this.tm!==t&&(this.tm=t)}},linkCategoryProperty:{get:function(){return this.Zi},set:function(t){var e=this.Zi;e!==t&&(this.Zi=t,this.g("linkCategoryProperty",e,t))}},type:{get:function(){return"GraphLinksModel"}}}),Et.prototype.setCategoryForLinkData=Et.prototype.Oo,Et.prototype.getCategoryForLinkData=Et.prototype.Mr,Et.prototype.assignAllDataProperties=Et.prototype.ho,Et.prototype.setGroupKeyForNodeData=Et.prototype.Po,Et.prototype.getGroupKeyForNodeData=Et.prototype.ah,Et.prototype.isGroupForNodeData=Et.prototype.Ku,Et.prototype.copyLinkData=Et.prototype.no,Et.prototype.mergeLinkDataArray=Et.prototype.Gz,Et.prototype.removeLinkDataCollection=Et.prototype.Sz,Et.prototype.removeLinkData=Et.prototype.Jl,Et.prototype.addLinkDataCollection=Et.prototype.ly,Et.prototype.addLinkData=Et.prototype.Yh,Et.prototype.containsLinkData=Et.prototype.Cc,Et.prototype.makeLinkDataKeyUnique=Et.prototype.$r,Et.prototype.findLinkDataForKey=Et.prototype.Zg,Et.prototype.setKeyForLinkData=Et.prototype.ks,Et.prototype.getKeyForLinkData=Et.prototype.uc,Et.prototype.removeLabelKeyForLinkData=Et.prototype.xx,Et.prototype.addLabelKeyForLinkData=Et.prototype.hu,Et.prototype.setLabelKeysForLinkData=Et.prototype.ls,Et.prototype.getLabelKeysForLinkData=Et.prototype.vf,Et.prototype.setToPortIdForLinkData=Et.prototype.hv,Et.prototype.getToPortIdForLinkData=Et.prototype.gx,Et.prototype.setFromPortIdForLinkData=Et.prototype.dv,Et.prototype.getFromPortIdForLinkData=Et.prototype.ax,Et.prototype.setToKeyForLinkData=Et.prototype.gv,Et.prototype.getToKeyForLinkData=Et.prototype.ex,Et.prototype.setFromKeyForLinkData=Et.prototype.cv,Et.prototype.getFromKeyForLinkData=Et.prototype.$w,Et.prototype.clear=Et.prototype.clear;var B0=Object.freeze([]);function ti(t,e){rt.call(this),this.ze="parent",this.vm=!1,this.ij="parentLinkCategory",void 0!==t&&(yn(t)?this.nodeDataArray=t:Object.assign(this,t)),e&&Object.assign(this,e)}function me(t){Ot.call(this),this.Qv=this.Hm=this.hc=0,this.zp=360,this.Pv=po,this.Ni=0,this.Dv=new P,this.mp=this.ee=0,this.wr=new Ap,this.Is=this.hj=0,this.Zx=600,this.In=NaN,this.km=1,this.Un=0,this.jl=360,this.Nb=po,this.L=Pi,this.fd=kf,this.Zc=I1,this.gf=6,this.un=Of,t&&Object.assign(this,t)}function Ef(t,e,n,i,l){var u=t.zp,h=t.hc;t=t.ee,i=i*Math.PI/180,n=n*Math.PI/180;for(var f=e.length,p=0;p<f;p++){var g=i+(l===Pi?p*n/(360<=u?f:f-1):-p*n/f),m=e.K(p),v=h*Math.tan(g)/t;v=Math.sqrt((h*h+t*t*v*v)/(1+v*v)),m.centerX=v*Math.cos(g),m.centerY=v*Math.sin(g),m.actualAngle=180*g/Math.PI}}function If(t,e,n,i){var l=t.hc,u=t.ee,h=t.Ni;n=n*Math.PI/180;for(var f=e.length,p=0;p<f;p++){var g=e.K(p),m=e.K(p===f-1?0:p+1),v=u*Math.sin(n);g.centerX=l*Math.cos(n),g.centerY=v,g.actualAngle=180*n/Math.PI,isNaN(g.diameter)&&Na(g,0),isNaN(m.diameter)&&Na(m,0),g=Pf(t,l,u,i===Pi?n:-n,(g.diameter+m.diameter)/2+h),n+=i===Pi?g:-g}}function Nf(t,e,n,i){var l=t.hc,u=t.ee,h=t.mp;n=n*Math.PI/180;for(var f=e.length,p=0;p<f;p++){var g=e.K(p);g.centerX=l*Math.cos(n),g.centerY=u*Math.sin(n),g.actualAngle=180*n/Math.PI,g=Pf(t,l,u,i===Pi?n:-n,h),n+=i===Pi?g:-g}}function U0(t,e,n,i,l){var u=t.zp;if(t.hj=0,t.wr=new Ap,360>n){for(u=i+(l===Pi?u:-u);0>u;)u+=360;180<(u%=360)&&(u-=360),u*=Math.PI/180,t.Is=u,Bl(t,e,n,i,l)}else Wm(t,e,n,i,l);t.wr.commit(e)}function Wm(t,e,n,i,l){var u=t.hc,h=t.Ni,f=t.Hm,p=u*Math.cos(i*Math.PI/180),g=t.ee*Math.sin(i*Math.PI/180),m=e.Ea();if(3===m.length)m[0].centerX=u,m[0].centerY=0,m[1].centerX=m[0].centerX-m[0].width/2-m[1].width/2-h,m[1].y=m[0].y,m[2].centerX=(m[0].centerX+m[1].centerX)/2,m[2].y=m[0].y-m[2].height-h;else if(4===m.length)m[0].centerX=u,m[0].centerY=0,m[2].centerX=-m[0].centerX,m[2].centerY=m[0].centerY,m[1].centerX=0,m[1].y=Math.min(m[0].y,m[2].y)-m[1].height-h,m[3].centerX=0,m[3].y=Math.max(m[0].y+m[0].height+h,m[2].y+m[2].height+h);else{u=P.alloc();for(var v=0;v<m.length&&(m[v].centerX=p,m[v].centerY=g,!(v>=m.length-1));v++)Ip(t,p,g,m,v,l,u)||Np(t,p,g,m,v,l,u),p=u.x,g=u.y;if(P.free(u),t.hj++,!(23<t.hj)){p=m[0].centerX,g=m[0].centerY,u=m[m.length-1].centerX,v=m[m.length-1].centerY;var x=Math.abs(p-u)-((m[0].width+m[m.length-1].width)/2+h),D=Math.abs(g-v)-((m[0].height+m[m.length-1].height)/2+h);h=0,1>Math.abs(D)?Math.abs(p-u)<(m[0].width+m[m.length-1].width)/2&&(h=0):h=0<D?D:1>Math.abs(x)?0:x,p=Math.abs(u)>Math.abs(v)?0<u!=g>v:0<v!=p<u,(p=l===Pi?p:!p)&&(h=-Math.abs(h),h=Math.min(h,-m[m.length-1].width),h=Math.min(h,-m[m.length-1].height)),t.wr.compare(h,m),1<Math.abs(h)&&(t.hc=8>t.hj?t.hc-h/(2*Math.PI):5>m.length&&10<h?t.hc/2:t.hc-(0<h?1.7:-2.3),t.ee=t.hc*f,Wm(t,e,n,i,l))}}}function Bl(t,e,n,i,l){for(var u=t.hc,h=t.ee,f=t.Hm,p=u*Math.cos(i*Math.PI/180),g=h*Math.sin(i*Math.PI/180),m=P.alloc(),v=e.Ea(),x=0;x<v.length&&(v[x].centerX=p,v[x].centerY=g,!(x>=v.length-1));x++)Ip(t,p,g,v,x,l,m)||Np(t,p,g,v,x,l,m),p=m.x,g=m.y;if(P.free(m),t.hj++,!(23<t.hj)){if(p=Math.atan2(g,p),p=l===Pi?t.Is-p:p-t.Is,u=(p=Math.abs(p)<Math.abs(p-2*Math.PI)?p:p-2*Math.PI)*(u+h)/2,h=t.wr,Math.abs(u)<Math.abs(h.xl))for(h.xl=u,h.bk=[],h.cm=[],p=0;p<v.length;p++)h.bk[p]=v[p].bounds.x,h.cm[p]=v[p].bounds.y;1<Math.abs(u)&&(t.hc=8>t.hj?t.hc-u/(2*Math.PI):t.hc-(0<u?1.7:-2.3),t.ee=t.hc*f,Bl(t,e,n,i,l))}}function Ip(t,e,n,i,l,u,h){var f=t.hc,p=t.ee,g=0;t=(i[l].width+i[l+1].width)/2+t.Ni;var m=!1;if(0<=n!=(u===Pi)){if((u=e+t)>f){if((u=e-t)<-f)return h.x=u,h.y=g,!1;m=!0}}else if((u=e-t)<-f){if((u=e+t)>f)return h.x=u,h.y=g,!1;m=!0}return g=Math.sqrt(1-Math.min(1,u*u/(f*f)))*p,0>n!==m&&(g=-g),Math.abs(n-g)>(i[l].height+i[l+1].height)/2?(h.x=u,h.y=g,!1):(h.x=u,h.y=g,!0)}function Np(t,e,n,i,l,u,h){var f=t.hc,p=t.ee,g=0;if(t=(i[l].height+i[l+1].height)/2+t.Ni,i=!1,0<=e!=(u===Pi)){if((u=n-t)<-p){if((u=n+t)>p)return h.x=g,void(h.y=u);i=!0}}else if((u=n+t)>p){if((u=n-t)<-p)return h.x=g,void(h.y=u);i=!0}g=Math.sqrt(1-Math.min(1,u*u/(p*p)))*f,0>e!==i&&(g=-g),h.x=g,h.y=u}function kh(t,e,n,i,l){var u=t.Zx;if(.001>Math.abs(t.Hm-1))return void 0!==i&&void 0!==l?l*e:2*Math.PI*e;t=e>n?Math.sqrt(e*e-n*n)/e:Math.sqrt(n*n-e*e)/n;for(var h=0,f=void 0!==i&&void 0!==l?l/(u+1):Math.PI/(2*(u+1)),p=0,g=0;g<=u;g++){p=void 0!==i&&void 0!==l?i+g*l/u:g*Math.PI/(2*u);var m=Math.sin(p);h+=Math.sqrt(1-t*t*m*m)*f}return void 0!==i&&void 0!==l?(e>n?e:n)*h:4*(e>n?e:n)*h}function Ym(t,e,n,i,l){return e/(void 0!==i&&void 0!==l?kh(t,1,n,i,l):kh(t,1,n))}function Pf(t,e,n,i,l){if(.001>Math.abs(t.Hm-1))return l/e;var u=e>n?Math.sqrt(e*e-n*n)/e:Math.sqrt(n*n-e*e)/n,h=0;t=2*Math.PI/(700*t.network.vertexes.count),e>n&&(i+=Math.PI/2);for(var f=0;;f++){var p=Math.sin(i+f*t);if((h+=(e>n?e:n)*Math.sqrt(1-u*u*p*p)*t)>=l)return f*t}}Et.className="GraphLinksModel",fo.GraphLinksModel=Et,rt.constructGraphLinksModel=rt.constructGraphLinksModel=function(){return new Et},rt.initDiagramModel=R0=function(){return new Et},Ht(ti,rt),ti.constructGraphLinksModel=rt.constructGraphLinksModel,ti.prototype.cloneProtected=function(t){rt.prototype.cloneProtected.call(this,t),t.ze=this.ze,t.vm=this.vm,t.ij=this.ij},(_=ti.prototype).toString=function(t){if(void 0===t&&(t=0),2<=t)return this.Qo();var e=(""!==this.name?this.name:"")+" TreeModel";if(0<t){e+="\n node data:";for(var n=(t=this.nodeDataArray).length,i=0;i<n;i++){var l=t[i];e+=" "+this.ua(l)+":"+io(l)}}return e},_.am=function(){var t=rt.prototype.am.call(this),e="";return"parent"!==this.nodeParentKeyProperty&&"string"==typeof this.nodeParentKeyProperty&&(e+=',\n  "nodeParentKeyProperty": '+this.quote(this.nodeParentKeyProperty)),t+e},_.Io=function(t){rt.prototype.Io.call(this,t),t.nodeParentKeyProperty&&(this.nodeParentKeyProperty=t.nodeParentKeyProperty)},_.Ho=function(t){void 0!==t.nodeParentKeyProperty&&t.nodeParentKeyProperty!==this.nodeParentKeyProperty&&Y("applyIncrementalJson cannot change Model properties"),rt.prototype.Ho.call(this,t)},_.Dl=function(t){return t},_.bh=function(t){if(null!==t){var e=this.ze;if(""!==e&&void 0!==(e=be(t,e))){if(Ta(e))return e;Y("ParentKey value for node data "+t+" is not a number or a string: "+e)}}},_.ie=function(t,e){if(null===e&&(e=void 0),null!==t){var n=this.ze;if(""!==n)if(e=this.Dl(e),this.lb(t)){var i=be(t,n);i!==e&&(bo(this,i,t),ne(t,n,e),null===this.dc(e)&&Lo(this,e,t),qe(this,"nodeParentKey",ee,n,t,i,e),"string"==typeof n&&this.Ka(t,n))}else ne(t,n,e)}},_.Pr=function(t){if(null===t)return"";var e=this.ij;return""===e||void 0===(e=be(t,e))?"":"string"==typeof e?e:(Y("getParentLinkCategoryForNodeData found a non-string category for "+t+": "+e),"")},ti.prototype.getLinkCategoryForData=function(t){return this.Pr(t)},ti.prototype.ms=function(t,e){if(null!==t){var n=this.ij;if(""!==n)if(this.lb(t)){var i=be(t,n);void 0===i&&(i=""),i!==e&&(ne(t,n,e),qe(this,"parentLinkCategory",ee,n,t,i,e),"string"==typeof n&&this.Ka(t,n))}else ne(t,n,e)}},ti.prototype.setLinkCategoryForData=function(t,e){this.ms(t,e)},ti.prototype.copyNodeData=function(t){return null===t?null:(t=rt.prototype.copyNodeData.call(this,t),this.Dj||""===this.ze||void 0===be(t,this.ze)||ne(t,this.ze,void 0),t)},ti.prototype.setDataProperty=function(t,e,n){if(this.lb(t)){if(e===this.nodeKeyProperty)return void this.Sl(t,n);if(e===this.nodeCategoryProperty)return void this.Rl(t,n);if(e===this.nodeParentKeyProperty)return void this.ie(t,n)}var i=be(t,e);i!==n&&(ne(t,e,n),this.fs(t,e,i,n))},(_=ti.prototype).Mo=function(t,e){rt.prototype.Mo.call(this,t,e);for(var n=this.kb.iterator;n.next();)this.Zu(n.value,t,e)},_.Zu=function(t,e,n){if(this.bh(t)===e){var i=this.ze;ne(t,i,n),qe(this,"nodeParentKey",ee,i,t,e,n),"string"==typeof i&&this.Ka(t,i)}},_.Nl=function(t){rt.prototype.Nl.call(this,t);var e=Dp(this,t=this.ua(t));if(null!==e){var n=oe();for(e=e.iterator;e.next();){var i=e.value;if(this.lb(i)&&this.bh(i)===t){var l=this.ze;qe(this,"nodeParentKey",ee,l,i,t,t),"string"==typeof l&&this.Ka(i,l),n.push(i)}}for(e=0;e<n.length;e++)bo(this,t,n[e]);Nt(n)}},_.Ml=function(t){rt.prototype.Ml.call(this,t);var e=this.bh(t);e=this.Dl(e),null===this.dc(e)&&Lo(this,e,t)},_.To=function(t){rt.prototype.To.call(this,t),bo(this,this.bh(t),t)},_.Tl=function(t,e){rt.prototype.Tl.call(this,t,e),this.ms(e,this.Pr(t)),this.ie(e,this.bh(t))},_.Bl=function(){return!0},_.Vr=function(){return!0},Mt.Object.defineProperties(ti.prototype,{nodeParentKeyProperty:{get:function(){return this.ze},set:function(t){var e=this.ze;e!==t&&(this.ze=t,this.g("nodeParentKeyProperty",e,t))}},Dj:{get:function(){return this.vm},set:function(t){this.vm!==t&&(this.vm=t)}},parentLinkCategoryProperty:{get:function(){return this.ij},set:function(t){var e=this.ij;e!==t&&(this.ij=t,this.g("parentLinkCategoryProperty",e,t))}},linkCategoryProperty:{get:function(){return this.parentLinkCategoryProperty},set:function(t){this.parentLinkCategoryProperty=t}},type:{get:function(){return"TreeModel"}}}),ti.prototype.setParentLinkCategoryForNodeData=ti.prototype.ms,ti.prototype.getParentLinkCategoryForNodeData=ti.prototype.Pr,ti.prototype.setParentKeyForNodeData=ti.prototype.ie,ti.prototype.getParentKeyForNodeData=ti.prototype.bh,ti.className="TreeModel",fo.TreeModel=ti,Ht(me,Ot),me.prototype.cloneProtected=function(t){Ot.prototype.cloneProtected.call(this,t),t.In=this.In,t.km=this.km,t.Un=this.Un,t.jl=this.jl,t.Nb=this.Nb,t.L=this.L,t.fd=this.fd,t.Zc=this.Zc,t.gf=this.gf,t.un=this.un},me.prototype.ob=function(t){t.classType===me?t===Pp||t===sn||t===Km||t===Xm||t===kf?this.sorting=t:t===Oh||t===Af||t===Pi||t===Ia?this.direction=t:t===Fo||t===Ea||t===po||t===mo?this.arrangement=t:(t===Lh||t===Of)&&(this.nodeDiameterFormula=t):Ot.prototype.ob.call(this,t)},me.prototype.createNetwork=function(){return new Lf(this)},me.prototype.doLayout=function(t){if(null===this.network&&(this.network=this.makeNetwork(t)),this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin),1>=(t=this.network.vertexes).count)1===t.count&&((t=t.first()).centerX=0,t.centerY=0);else{var e=new q;e.addAll(t.iterator),t=new q;var l,u,n=new q,i=this.sort(e),h=this.mp,f=this.arrangement,p=this.nodeDiameterFormula,g=this.radius;(!isFinite(g)||0>=g)&&(g=NaN);var m=this.aspectRatio;(!isFinite(m)||0>=m)&&(m=1);var v=this.startAngle;isFinite(v)||(v=0);var x=this.sweepAngle;if((!isFinite(x)||360<x||1>x)&&(x=360),e=this.spacing,isFinite(e)||(e=NaN),f===mo&&p===Lh?f=po:f===mo&&p!==Lh&&(f=this.arrangement),(this.direction===Oh||this.direction===Af)&&this.sorting!==kf){for(p=0;!(p>=i.length||(t.add(i.K(p)),p+1>=i.length));p+=2)n.add(i.K(p+1));this.direction===Oh?(this.arrangement===mo&&t.reverse(),(i=new q).addAll(t),i.addAll(n)):(this.arrangement===mo&&n.reverse(),(i=new q).addAll(n),i.addAll(t))}p=i.length;for(var D=u=l=0;D<i.length;D++){var M=v+x*u*(this.direction===Pi?1:-1)/p,T=i.K(D).diameter;isNaN(T)&&(T=Na(i.K(D),M)),360>x&&(0===D||D===i.length-1)&&(T/=2),l+=T,u++}if(isNaN(g)||f===mo){if(isNaN(e)&&(e=6),f!==po&&f!==mo){for(u=-1/0,h=0;h<p;h++)D=i.K(h),l=i.K(h===p-1?0:h+1),isNaN(D.diameter)&&Na(D,0),isNaN(l.diameter)&&Na(l,0),u=Math.max(u,(D.diameter+l.diameter)/2);h=u+e,g=f===Fo?(u+e)/(2*Math.PI/p):Ym(this,h*(360<=x?p:p-1),m,v*Math.PI/180,x*Math.PI/180)}else g=Ym(this,l+(360<=x?p:p-1)*(f!==mo?e:1.6*e),m,v*Math.PI/180,x*Math.PI/180);u=g*m}else if(D=kh(this,g,u=g*m,v*Math.PI/180,x*Math.PI/180),isNaN(e))(f===po||f===mo)&&(e=(D-l)/(360<=x?p:p-1));else if(f===po||f===mo)(D=(D-l)/(360<=x?p:p-1))<e?u=(g=Ym(this,l+e*(360<=x?p:p-1),m,v*Math.PI/180,x*Math.PI/180))*m:e=D;else{for(h=-1/0,l=0;l<p;l++)M=i.K(l),T=i.K(l===p-1?0:l+1),isNaN(M.diameter)&&Na(M,0),isNaN(T.diameter)&&Na(T,0),h=Math.max(h,(M.diameter+T.diameter)/2);(l=Ym(this,(h+=e)*(360<=x?p:p-1),m,v*Math.PI/180,x*Math.PI/180))>g?u=(g=l)*m:h=D/(360<=x?p:p-1)}if(this.Pv=f,this.hc=g,this.Hm=m,this.Qv=v,this.zp=x,this.Ni=e,this.ee=u,this.mp=h,e=i,i=this.Pv,f=this.hc,g=this.Qv,m=this.zp,v=this.Ni,x=this.ee,p=this.mp,this.direction!==Oh&&this.direction!==Af||i!==mo)if(this.direction===Oh||this.direction===Af){switch(h=0,i){case Ea:h=180*Pf(this,f,x,g,p)/Math.PI;break;case po:p=e=0,null!==(h=t.first())&&(e=Na(h,Math.PI/2)),null!==(h=n.first())&&(p=Na(h,Math.PI/2)),h=180*Pf(this,f,x,g,v+(e+p)/2)/Math.PI;break;case Fo:h=m/e.length}if(this.direction===Oh){switch(i){case Ea:Nf(this,t,g,Ia);break;case po:If(this,t,g,Ia);break;case Fo:Ef(this,t,m/2,g,Ia)}switch(i){case Ea:Nf(this,n,g+h,Pi);break;case po:If(this,n,g+h,Pi);break;case Fo:Ef(this,n,m/2,g+h,Pi)}}else{switch(i){case Ea:Nf(this,n,g,Ia);break;case po:If(this,n,g,Ia);break;case Fo:Ef(this,n,m/2,g,Ia)}switch(i){case Ea:Nf(this,t,g+h,Pi);break;case po:If(this,t,g+h,Pi);break;case Fo:Ef(this,t,m/2,g+h,Pi)}}}else switch(i){case Ea:Nf(this,e,g,this.direction);break;case po:If(this,e,g,this.direction);break;case Fo:Ef(this,e,m,g,this.direction);break;case mo:U0(this,e,m,g,this.direction)}else U0(this,e,m,g-m/2,Pi)}this.updateParts(),this.network=null,this.isValidLayout=!0},me.prototype.commitLayout=function(){this.commitNodes(),this.isRouting&&this.commitLinks()},me.prototype.commitNodes=function(){var t=null!==this.group&&null!==this.group.placeholder&&this.group.isSubGraphExpanded,e=t?this.group.location.copy():null,n=this.actualCenter;t?n=new P(0,0):(n.x=this.arrangementOrigin.x+this.hc,n.y=this.arrangementOrigin.y+this.ee);for(var i=this.network.vertexes.iterator;i.next();){var l=i.value;l.x+=n.x,l.y+=n.y,l.commit()}t&&(this.group.Za(),t=this.group.position.copy(),n=this.group.location.copy(),e=e.je(n.je(t)),this.group.move(e),this.Dv=e.je(t))},me.prototype.commitLinks=function(){for(var t=this.network.edges.iterator;t.next();)t.value.commit()},me.prototype.sort=function(t){switch(this.sorting){case Km:break;case Xm:t.reverse();break;case Pp:t.sort(this.comparer);break;case sn:t.sort(this.comparer),t.reverse();break;case kf:return this.Vj(function F1(t){for(var e=[],n=0;n<t.length;n++)e.push(0);n=new q;for(var i=0;i<t.length;i++){var l=-1,u=-1;if(0===i)for(var h=0;h<t.length;h++){var f=t.K(h).edgesCount;f>l&&(l=f,u=h)}else for(h=0;h<t.length;h++)(f=e[h])>l&&(l=f,u=h);for(n.add(t.K(u)),e[u]=-1,h=(u=t.K(u)).sourceEdges;h.next();)0>(l=t.indexOf(h.value.fromVertex))||0<=e[l]&&e[l]++;for(u=u.destinationEdges;u.next();)0>(l=t.indexOf(u.value.toVertex))||0<=e[l]&&e[l]++}return n}(t));default:Y("Invalid sorting type.")}return t},me.prototype.Vj=function(t){for(var e=[],n=0;n<t.length;n++){var i=t.K(n);e[n]=[];for(var l,u=i.destinationEdges;u.next();)(l=t.indexOf(u.value.toVertex))!==n&&0>e[n].indexOf(l)&&e[n].push(l);for(i=i.sourceEdges;i.next();)(l=t.indexOf(i.value.fromVertex))!==n&&0>e[n].indexOf(l)&&e[n].push(l)}for(u=[],n=0;n<e.length;n++)u[n]=0;n=[];var h=[],f=[];i=[],l=new q;for(var p=0,g=0;g<e.length;g++){var m=e[g].length;if(1===m)i.push(g);else if(0===m)l.add(t.K(g));else{if(0===p)n.push(g);else{for(var v=m=1/0,x=-1,D=[],M=0;M<n.length;M++)0>e[n[M]].indexOf(n[M===n.length-1?0:M+1])&&D.push(M===n.length-1?0:M+1);if(0===D.length)for(M=0;M<n.length;M++)D.push(M);for(M=0;M<D.length;M++){for(var T=D[M],N=e[g],I=0,k=0;k<h.length;k++){var O=u[h[k]],L=u[f[k]];if(O<L){var b=O;O=L}else b=L;if(b<T&&T<=O)for(L=0;L<N.length;L++){var U=N[L];0>n.indexOf(U)||b<u[U]&&u[U]<O||b===u[U]||O===u[U]||I++}else for(L=0;L<N.length;L++)0>n.indexOf(U=N[L])||b<u[U]&&u[U]<O&&b!==u[U]&&O!==u[U]&&I++}for(N=I,k=I=0;k<e[g].length;k++)0<=(b=n.indexOf(e[g][k]))&&(I+=(b=Math.abs(T-(b>=T?b+1:b)))<n.length+1-b?b:n.length+1-b);for(k=0;k<h.length;k++)(b=u[h[k]])>=T&&b++,(O=u[f[k]])>=T&&O++,b>O&&(L=O,O=b,b=L),O-b<(n.length+2)/2==(b<T&&T<=O)&&I++;(N<m||N===m&&I<v)&&(m=N,v=I,x=T)}for(n.splice(x,0,g),m=0;m<n.length;m++)u[n[m]]=m;for(m=0;m<e[g].length;m++)0<=n.indexOf(v=e[g][m])&&(h.push(g),f.push(v))}p++}}for(h=n.length;;){for(u=!0,f=0;f<i.length;f++)if(0<=(m=n.indexOf(g=e[p=i[f]][0]))){for(x=v=0;x<e[g].length;x++)0>(D=n.indexOf(e[g][x]))||D===m||(v+=D<m!=(M=D>m?D-m:m-D)>h-M?1:-1);n.splice(0>v?m:m+1,0,p),i.splice(f,1),f--}else u=!1;if(u)break;n.push(i[0]),i.splice(0,1)}for(e=0;e<n.length;e++)l.add(t.K(n[e]));return l},Mt.Object.defineProperties(me.prototype,{radius:{get:function(){return this.In},set:function(t){this.In!==t&&(0<t||isNaN(t))&&(this.In=t,this.D())}},aspectRatio:{get:function(){return this.km},set:function(t){this.km!==t&&0<t&&(this.km=t,this.D())}},startAngle:{get:function(){return this.Un},set:function(t){this.Un!==t&&(this.Un=t,this.D())}},sweepAngle:{get:function(){return this.jl},set:function(t){this.jl!==t&&(this.jl=0<t&&360>=t?t:360,this.D())}},arrangement:{get:function(){return this.Nb},set:function(t){this.Nb===t||t!==mo&&t!==po&&t!==Ea&&t!==Fo||(this.Nb=t,this.D())}},direction:{get:function(){return this.L},set:function(t){this.L===t||t!==Pi&&t!==Ia&&t!==Oh&&t!==Af||(this.L=t,this.D())}},sorting:{get:function(){return this.fd},set:function(t){this.fd===t||t!==Km&&t!==Xm&&t!==Pp&&!sn&&t!==kf||(this.fd=t,this.D())}},comparer:{get:function(){return this.Zc},set:function(t){this.Zc!==t&&(this.Zc=t,this.D())}},spacing:{get:function(){return this.gf},set:function(t){this.gf!==t&&(this.gf=t,this.D())}},nodeDiameterFormula:{get:function(){return this.un},set:function(t){this.un===t||t!==Of&&t!==Lh||(this.un=t,this.D())}},actualXRadius:{get:function(){return this.hc}},actualYRadius:{get:function(){return this.ee}},actualSpacing:{get:function(){return this.Ni}},actualCenter:{get:function(){return this.Dv}}});var po=new W(me,"ConstantSpacing",0),Ea=new W(me,"ConstantDistance",1),Fo=new W(me,"ConstantAngle",2),mo=new W(me,"Packed",3),Pi=new W(me,"Clockwise",4),Ia=new W(me,"Counterclockwise",5),Oh=new W(me,"BidirectionalLeft",6),Af=new W(me,"BidirectionalRight",7),Km=new W(me,"Forwards",8),Xm=new W(me,"Reverse",9),Pp=new W(me,"Ascending",10),sn=new W(me,"Descending",11),kf=new W(me,"Optimized",12),Of=new W(me,"Pythagorean",13),Lh=new W(me,"Circular",14);function Ap(){this.xl=-1/0,this.cm=this.bk=null}function Lf(t){Xt.call(this,t)}function kp(t){Xe.call(this,t),this.u=this.Mi=NaN}function Na(t,e){var n=t.network;if(null===n)return NaN;if(null===(n=n.layout))return NaN;if(n.arrangement===mo)if(n.nodeDiameterFormula===Lh)t.Mi=Math.max(t.width,t.height);else{if(n=Math.abs(Math.sin(e)),e=Math.abs(Math.cos(e)),0===n)return t.width;if(0===e)return t.height;t.Mi=Math.min(t.height/n,t.width/e)}else t.Mi=n.nodeDiameterFormula===Lh?Math.max(t.width,t.height):Math.sqrt(t.width*t.width+t.height*t.height);return t.Mi}function Jm(t){qn.call(this,t)}function ln(t){Ot.call(this),this.Sg=null,this.gn=0,this.Td=new dt(100,100).freeze(),this.jm=!1,this.ff=!0,this.od=!1,this.Tk=100,this.Im=1,this.Pf=1e3,this.pn=10,this.Jn=Math,this.vk=.05,this.uk=50,this.sk=150,this.tk=0,this.Dm=10,this.Cm=5,t&&Object.assign(this,t)}function Tu(t,e,n){if(function mT(t,e){if(10<e||3>t.network.vertexes.count)return!1;for(t.Sg=t.network.vertexes.Ea(),(t=t.Sg).sort(function(n,i){return null===n||null===i||n===i?0:i.Nd-n.Nd}),e=t.length-1;0<=e&&1>=t[e].Nd;)e--;return 1<t.length-e}(t,e)){var i=t.Pf;t.Pf*=1+1/(e+1);var l=function Op(t,e){for(var n=t.network,i=new us(t),l=0;l<t.Sg.length;l++){var u=t.Sg[l];if(!(1<u.Nd))break;i.fg(u);var h=new Nr;h.ts=u.Nd,h.us=u.width,h.ss=u.height,h.wv=u.focus.x,h.xv=u.focus.y,null===u.Ke&&(u.Ke=new q),u.Ke.add(h),u.av=u.Ke.count-1}for(u=n.edges.iterator;u.next();){var f=u.value;h=f.toVertex,(l=f.fromVertex).network===i&&h.network===i?i.ol(f):l.network===i?(null===(f=l.Bj)&&(f=new q,l.Bj=f),f.add(h),l.Nd--,l.hh+=h.hh):h.network===i&&(null===(f=h.Bj)&&(f=new q,h.Bj=f),f.add(l),h.Nd--,h.hh+=l.hh)}for(l=i.edges.iterator;l.next();)(u=l.value).length*=Math.max(1,F.sqrt((u.fromVertex.hh+u.toVertex.hh)/(4*e+1)));for(e=i.vertexes.iterator;e.next();){var p=(l=e.value).Bj;if(null!==p&&0<p.count&&!(0>=(h=l.Ke.K(l.Ke.count-1).ts-l.Nd))){for(var g=f=0,m=p.count-h;m<p.count;m++){var v=p.K(m),x=null;for(u=v.edges.iterator;u.next();){var D=u.value;if(D.bx(v)===l){x=D;break}}null!==x&&(g+=x.length,f+=v.width*v.height)}u=l.centerX,p=l.centerY,x=l.focus,1>(D=(m=l.width)*(v=l.height))&&(D=1),f=F.sqrt((f+D+g*g*4/(h*h))/D),l.bounds=new B(u-x.x-(h=(f-1)*m/2),p-x.y-(f=(f-1)*v/2),m+2*h,v+2*f),l.focus=new P(x.x+h,x.y+f)}}return t.network=i,n}(t,e),u=Math.max(0,Math.max(Math.min(t.network.vertexes.count,n*(e+1)/11),10));for(t.maxIterations+=u,Tu(t,e+1,n),cl(t,u),function aD(t,e){for(var n=t.network.vertexes.iterator;n.next();){var i=n.value;if(i.network=e,null!==i.Ke){var l=i.Ke.K(i.av);i.Nd=l.ts;var u=l.wv,h=l.xv;i.bounds=new B(i.centerX-u,i.centerY-h,l.us,l.ss),i.focus=new P(u,h),i.av--}}for(n=t.network.edges.iterator;n.next();)n.value.network=e;t.network=e}(t,l),(e=l.vertexes.Ea()).sort(function(h,f){return null===h||null===f||h===f?0:f.Nd-h.Nd}),n=0;n<e.length;n++)uD(t,e[n]);t.Pf=i}}function uD(t,e){var n=e.Bj;if(null!==n&&0!==n.count){var i=e.centerX,l=e.centerY,u=e.width,h=e.height;null!==e.Ke&&0<e.Ke.count&&(u=(h=e.Ke.K(0)).us,h=h.ss),u=F.sqrt(u*u+h*h)/2;for(var f=!1,p=h=0,g=0,m=e.vertexes.iterator;m.next();){var v=m.value;1>=v.Nd?p++:(f=!0,g++,h+=Math.atan2(e.centerY-v.centerY,e.centerX-v.centerX))}if(0!==p)for(0<g&&(h/=g),g=e=0,e=f?2*Math.PI/(p+1):2*Math.PI/p,p%2==0&&(g=e/2),1<n.count&&n.sort(function(D,M){return null===D||null===M||D===M?0:M.width*M.height-D.width*D.height}),f=p%2==0?0:1,n=n.iterator;n.next();)if(!(1<(p=n.value).Nd||t.isFixed(p))){for(m=null,v=p.edges.iterator;v.next();){m=v.value;break}var x=p.height;v=F.sqrt((v=p.width)*v+x*x)/2,m=u+m.length+v,v=h+(e*(f/2>>1)+g)*(f%2==0?1:-1),p.centerX=i+m*Math.cos(v),p.centerY=l+m*Math.sin(v),f++}}}function Zm(t,e,n,i,l,u,h){var f=9e19,p=-1,g=0;t:for(;g<e;g++){var m=t[g],v=m.x-n,x=m.y-i;if((v=v*v+x*x)<f){for(x=g-1;0<=x;x--)if(t[x].y>m.y&&t[x].x-m.x<l+h.width)continue t;for(x=g+1;x<e;x++)if(t[x].x>m.x&&t[x].y-m.y<u+h.height)continue t;p=g,f=v}}return p}function R1(t,e){var n=t.bounds,i=n.x;t=n.y;var l=n.width;n=n.height;var u=e.bounds,h=u.x;e=u.y;var f=u.width;return u=u.height,i+l<h?t>e+u?F.sqrt((n=i+l-h)*n+(t=t-e-u)*t):t+n<e?F.sqrt((i=i+l-h)*i+(t=t+n-e)*t):h-(i+l):i>h+f?t>e+u?F.sqrt((n=i-h-f)*n+(t=t-e-u)*t):t+n<e?F.sqrt((i=i-h-f)*i+(t=t+n-e)*t):i-(h+f):t>e+u?t-(e+u):t+n<e?e-(t+n):.1}function cl(t,e){for(t.Sg=null,e=t.gn+e;t.gn<e&&(t.gn++,Lp(t)););t.Sg=null}function Lp(t){null===t.Sg&&(t.Sg=t.network.vertexes.Ea());var e=t.Sg;if(0>=e.length)return!1;var n=e[0];n.forceX=0,n.forceY=0;for(var i=n.centerX,l=i,u=n=n.centerY,h=1;h<e.length;h++){var f=e[h];f.forceX=0,f.forceY=0;var p=f.centerX;f=f.centerY,i=Math.min(i,p),l=Math.max(l,p),n=Math.min(n,f),u=Math.max(u,f)}(l=l-i>u-n)?e.sort(function(T,N){return null===T||null===N||T===N?0:T.centerX-N.centerX}):e.sort(function(T,N){return null===T||null===N||T===N?0:T.centerY-N.centerY}),n=t.Pf;var g=i=f=0;for(u=0;u<e.length;u++){var m=(i=(h=e[u]).bounds).y+(f=h.focus).y;i=h.charge*t.electricalFieldX(p=i.x+f.x,m),g=h.charge*t.electricalFieldY(p,m),i+=h.mass*t.gravitationalFieldX(p,m),g+=h.mass*t.gravitationalFieldY(p,m),h.forceX+=i,h.forceY+=g;for(var v=u+1;v<e.length;v++){var x=e[v];if(x!==h){var D=(i=x.bounds).y+(f=x.focus).y;if(p-(g=i.x+f.x)>n||g-p>n){if(l)break}else if(m-D>n||D-m>n){if(!l)break}else{var M=R1(h,x);1>M?(null===(i=t.randomNumberGenerator)&&(t.randomNumberGenerator=i=new Ro),M=i.random(),f=i.random(),i=p>g?(1+(i=Math.abs(x.bounds.right-h.bounds.x)))*M:p<g?-(1+(i=Math.abs(x.bounds.x-h.bounds.right)))*M:(1+(i=Math.max(x.width,h.width)))*M-i/2,g=m>D?(1+(g=Math.abs(x.bounds.bottom-h.bounds.y)))*f:p<g?-(1+(g=Math.abs(x.bounds.y-h.bounds.bottom)))*f:(1+(g=Math.max(x.height,h.height)))*f-g/2):(i=(g-p)/M*(f=-h.charge*x.charge/(M*M)),g=(D-m)/M*f),h.forceX+=i,h.forceY+=g,x.forceX-=i,x.forceY-=g}}}}for(l=t.network.edges.iterator;l.next();)i=(h=(n=(f=l.value).fromVertex).bounds).x+(p=n.focus).x,h=h.y+p.y,p=(m=(u=f.toVertex).bounds).x+(v=u.focus).x,m=m.y+v.y,1>(v=R1(n,u))?(null===(v=t.randomNumberGenerator)&&(t.randomNumberGenerator=v=new Ro),f=v.random(),v=v.random(),i=(i>p?1:-1)*(1+(u.width>n.width?u.width:n.width))*f,g=(h>m?1:-1)*(1+(u.height>n.height?u.height:n.height))*v):(i=(p-i)/v*(f=f.stiffness*(v-f.length)),g=(m-h)/v*f),n.forceX+=i,n.forceY+=g,u.forceX-=i,u.forceY-=g;for(l=i=0;l<e.length;l++)t.isFixed(n=e[l])?t.moveFixedVertex(n):i=Math.max(i,t.moveVertex(n)||0);return i>t.epsilonDistance*t.epsilonDistance}function Nr(){this.xv=this.wv=this.ss=this.us=this.ts=0}function us(t){Xt.call(this,t)}function Ul(t){Xe.call(this,t),this.ga=!1,this.Ga=this.u=NaN,this.hh=this.Nd=this.W=this.F=0,this.Ke=this.Bj=null,this.av=0}function Cr(t){qn.call(this,t),this.j=this.m=NaN}function Ro(){var t=0;void 0===t&&(t=42),this.seed=t,this.Kx=48271,this.Mx=2147483647,this.Q=44488.07041494893,this.Nx=3399,this.Lx=1/2147483647,this.random()}function Ft(t){Ot.call(this),this.gc=this.be=25,this.L=0,this.rk=jo,this.Ok=Rf,this.Fk=ny,this.Xi=4,this.ek=Ae,this.Tf=15,this.ff=!0,this.jn=4,this.Ja=this.Dh=this.wa=-1,this.zc=this.Bg=0,this.Qa=this.Bd=this.Cd=this.ae=this.Hb=null,this.Cg=0,this.qn=this.fj=null,this.Lc=0,this.rn=null,this.Yc=new P,this.we=[],this.we.length=100,t&&Object.assign(this,t)}function Eu(t){var e=t.fromVertex.node||t.fromVertex.data;return t=t.toVertex.node||t.toVertex.data,null===e&&null===t?8:null===e||null===t?4:1}function Bn(t){null===t.fj&&(t.fj=[]);for(var e=0,n=t.network.vertexes.iterator;n.next();){var i=n.value;t.fj[e]=i.layer,e++,t.fj[e]=i.column,e++,t.fj[e]=i.index,e++}return t.fj}function vi(t,e){var n=0;for(t=t.network.vertexes.iterator;t.next();){var i=t.value;i.layer=e[n],n++,i.column=e[n],n++,i.index=e[n],n++}}function bh(t,e,n){var i=fl(t,e),l=t.Hb[e];(null===t.qn||t.qn.length<l*l)&&(t.qn=[]);for(var u=t.qn,h=0;h<l;h++){var x,f=0,p=i[h],g=p.near;if(null!==g&&g.layer===p.layer)if((p=g.index)>h)for(var m=h+1;m<p;m++){var v=i[m];v.near===g&&v.nf===g.nf||f++}else for(m=h-1;m>p;m--)(v=i[m]).near===g&&v.nf===g.nf||f++;if(0<=n)for(p=i[h].sourceEdgesArrayAccess,g=0;g<p.length;g++){var D=p[g];if(D.valid&&D.fromVertex.layer!==e)for(v=D.fromVertex.index,m=D.portToPos,D=D.portFromPos,x=g+1;x<p.length;x++){var M=p[x];if(M.valid&&M.fromVertex.layer!==e){var T=M.fromVertex.index,N=M.portToPos;M=M.portFromPos,m<N&&(v>T||v===T&&D>M)&&f++,N<m&&(T>v||T===v&&M>D)&&f++}}}if(0>=n)for(p=i[h].destinationEdgesArrayAccess,g=0;g<p.length;g++)if((D=p[g]).valid&&D.toVertex.layer!==e)for(v=D.toVertex.index,m=D.portToPos,D=D.portFromPos,x=g+1;x<p.length;x++)(M=p[x]).valid&&M.toVertex.layer!==e&&(T=M.toVertex.index,N=M.portToPos,D<(M=M.portFromPos)&&(v>T||v===T&&m>N)&&f++,M<D&&(T>v||T===v&&N>m)&&f++);for(u[h*l+h]=f,p=h+1;p<l;p++){var I=0,k=0;if(0<=n){f=i[h].sourceEdgesArrayAccess;var O=i[p].sourceEdgesArrayAccess;for(g=0;g<f.length;g++)if((D=f[g]).valid&&D.fromVertex.layer!==e)for(v=D.fromVertex.index,D=D.portFromPos,x=0;x<O.length;x++)(M=O[x]).valid&&M.fromVertex.layer!==e&&(T=M.fromVertex.index,M=M.portFromPos,(v<T||v===T&&D<M)&&k++,(T<v||T===v&&M<D)&&I++)}if(0>=n)for(f=i[h].destinationEdgesArrayAccess,O=i[p].destinationEdgesArrayAccess,g=0;g<f.length;g++)if((D=f[g]).valid&&D.toVertex.layer!==e)for(v=D.toVertex.index,m=D.portToPos,x=0;x<O.length;x++)(M=O[x]).valid&&M.toVertex.layer!==e&&(N=M.portToPos,(v<(T=M.toVertex.index)||v===T&&m<N)&&k++,(T<v||T===v&&N<m)&&I++);u[h*l+p]=I,u[p*l+h]=k}}return yo(t,e,i),u}function Pa(t){for(var e=0,n=0;n<=t.wa;n++){for(var i=t,l=n,u=fl(i,l),h=i.Hb[l],f=0,p=0;p<h;p++){var g=u[p].destinationEdgesArrayAccess;if(null!==g)for(var m=0;m<g.length;m++){var v=g[m];v.valid&&v.toVertex.layer!==l&&(f+=(Math.abs(v.fromVertex.column+v.portFromColOffset-(v.toVertex.column+v.portToColOffset))+1)*Eu(v))}}yo(i,l,u),e+=f}return e}function Iu(t,e,n){for(var i=fl(t,e),l=t.Hb[e],u=[],h=0;h<l;h++){var f=i[h],p=null;0>=n&&(p=f.sourceEdgesArrayAccess);var g=null;0<=n&&(g=f.destinationEdgesArrayAccess);var m=0,v=0,x=f.near;if(null!==x&&x.layer===f.layer&&(m+=x.column-1,v++),null!==p)for(x=0;x<p.length;x++){var D=(f=p[x]).fromVertex;f.valid&&!f.rev&&D.layer!==e&&(m+=D.column,v++)}if(null!==g)for(p=0;p<g.length;p++)x=(f=g[p]).toVertex,f.valid&&!f.rev&&x.layer!==e&&(m+=x.column,v++);u[h]=0===v?-1:m/v}return yo(t,e,i),u}function Fh(t,e,n){for(var i=fl(t,e),l=t.Hb[e],u=[],h=0;h<l;h++){var f=i[h],p=null;0>=n&&(p=f.sourceEdgesArrayAccess);var g=null;0<=n&&(g=f.destinationEdgesArrayAccess);var m=0,v=[],x=f.near;if(null!==x&&x.layer===f.layer&&(v[m]=x.column-1,m++),f=void 0,null!==p)for(x=0;x<p.length;x++){var D=(f=p[x]).fromVertex;f.valid&&!f.rev&&D.layer!==e&&(v[m]=D.column+f.portFromColOffset,m++)}if(null!==g)for(p=0;p<g.length;p++)x=(f=g[p]).toVertex,f.valid&&!f.rev&&x.layer!==e&&(v[m]=x.column+f.portToColOffset,m++);0===m?u[h]=-1:(v.sort(function(M,T){return M-T}),g=m>>1,u[h]=0!=(1&m)?v[g]:v[g-1]+v[g]>>1)}return yo(t,e,i),u}function Hl(t,e,n,i,l,u){if(e.component===i){if(e.component=n,l)for(var h=e.destinationEdges;h.next();){var f=h.value,p=f.toVertex,g=e.layer-p.layer;g===(f=t.linkMinLength(f))&&Hl(t,p,n,i,l,u)}if(u)for(h=e.sourceEdges;h.next();)(g=(p=(f=h.value).fromVertex).layer-e.layer)===(f=t.linkMinLength(f))&&Hl(t,p,n,i,l,u)}}function Qm(t,e,n,i,l,u){if(e.component===i){if(e.component=n,l)for(var h=e.destinationEdges;h.next();)Qm(t,h.value.toVertex,n,i,l,u);if(u)for(e=e.sourceEdges;e.next();)Qm(t,e.value.fromVertex,n,i,l,u)}}function j1(t){for(t=t.vertexes.iterator;t.next();){var e=t.value;if(e.valid)return e}return null}function H0(t){for(t=t.vertexes.iterator;t.next();){var e=t.value;if(e.valid){for(var n=!0,i=e.destinationEdges;i.next();)if(i.value.toVertex.valid){n=!1;break}if(n)return e}}return null}function G0(t){for(t=t.vertexes.iterator;t.next();){var e=t.value;if(e.valid){for(var n=!0,i=e.sourceEdges;i.next();)if(i.value.fromVertex.valid){n=!1;break}if(n)return e}}return null}function qm(t,e){e.gg=t.Cg,t.Cg++;for(var n=e.destinationEdges;n.next();){var i=n.value,l=i.toVertex;-1===l.gg&&(i.forest=!0,qm(t,l))}e.finish=t.Cg,t.Cg++}function z0(t){for(var e=t.network.vertexes.iterator;e.next();){var n=$0(t,e.value);t.wa=Math.max(n,t.wa)}}function $0(t,e){var n=0;if(-1===e.layer){for(var i=e.destinationEdges;i.next();){var l=i.value,u=l.toVertex;l=t.linkMinLength(l),n=Math.max(n,$0(t,u)+l)}e.layer=n}else n=e.layer;return n}function W0(t,e){var n=0;if(-1===e.layer){for(var i=e.sourceEdges;i.next();){var l=i.value,u=l.fromVertex;l=t.linkMinLength(l),n=Math.max(n,W0(t,u)+l)}e.layer=n}else n=e.layer;return n}function Y0(t,e){if(!e.valid){e.valid=!0;for(var n=e.destinationEdges;n.next();)Y0(t,n.value.toVertex);for(n=t.network.vertexes.iterator;n.next();)n.value.component=-1;for(var i=e.sourceEdgesArrayAccess,l=i.length,u=0;u<l;u++){var h=i[u],f=h.fromVertex,p=h.toVertex;h=t.linkMinLength(h),f.layer-p.layer>h&&Hl(t,f,0,-1,!0,!1)}for(Hl(t,e,1,-1,!0,!0);0!==e.component;){for(u=0,i=1/0,f=0,p=null,h=t.network.vertexes.iterator;h.next();){var g=h.value;if(1===g.component){var m=0,v=!1,x=g.sourceEdgesArrayAccess;l=x.length;for(var D=0;D<l;D++){var M=x[D],T=M.fromVertex;m+=1,1!==T.component&&(u+=1,T=T.layer-g.layer,M=t.linkMinLength(M),i=Math.min(i,T-M))}for(l=(x=g.destinationEdgesArrayAccess).length,D=0;D<l;D++)--m,1!==(M=x[D].toVertex).component?--u:v=!0;(null===p||m<f)&&!v&&(p=g,f=m)}}if(0<u){for(n.reset();n.next();)1===(l=n.value).component&&(l.layer+=i);e.component=0}else p.component=0}for(n=t.network.vertexes.iterator;n.next();)n.value.component=-1;for(Hl(t,e,1,-1,!0,!1);0!==e.component;){for(i=0,l=1/0,u=0,f=null,p=t.network.vertexes.iterator;p.next();)if(1===(h=p.value).component){for(g=0,m=!1,v=(x=h.sourceEdgesArrayAccess).length,D=0;D<v;D++)g+=1,1!==(M=x[D].fromVertex).component?i+=1:m=!0;for(v=(x=h.destinationEdgesArrayAccess).length,D=0;D<v;D++)--g,1!==(T=(M=x[D]).toVertex).component&&(--i,T=h.layer-T.layer,M=t.linkMinLength(M),l=Math.min(l,T-M));(null===f||g>u)&&!m&&(f=h,u=g)}if(0>i){for(n.reset();n.next();)1===(i=n.value).component&&(i.layer-=l);e.component=0}else f.component=0}}}function V1(t,e,n){return 90===t.L?n&&!e.rev||!n&&e.rev?270:90:180===t.L?n&&!e.rev||!n&&e.rev?0:180:270===t.L?n&&!e.rev||!n&&e.rev?90:270:n&&!e.rev||!n&&e.rev?180:0}function B1(t,e){var n=e.layer;for(e.index=t.Hb[n],t.Hb[n]++,e=e.destinationEdgesArrayAccess,n=!0;n;){n=!1;for(var i=0;i<e.length-1;i++){var l=e[i],u=e[i+1];l.portFromColOffset>u.portFromColOffset&&(n=!0,e[i]=u,e[i+1]=l)}}for(n=0;n<e.length;n++)(i=e[n]).valid&&-1===(i=i.toVertex).index&&B1(t,i)}function wi(t,e){var n=e.layer;e.index=t.Hb[n],t.Hb[n]++,e=e.sourceEdgesArrayAccess;for(var i=!0;i;)for(i=!1,n=0;n<e.length-1;n++){var l=e[n],u=e[n+1];l.portToColOffset>u.portToColOffset&&(i=!0,e[n]=u,e[n+1]=l)}for(n=0;n<e.length;n++)(i=e[n]).valid&&-1===(i=i.fromVertex).index&&wi(t,i)}function ty(t,e,n){var i=fl(t,e),l=t.Hb[e],u=Fh(t,e,n),h=Iu(t,e,n);for(n=0;n<l;n++)-1===h[n]&&(h[n]=i[n].column),-1===u[n]&&(u[n]=i[n].column);for(var p,f=!0;f;)for(f=!1,n=0;n<l-1;n++)(u[n+1]<u[n]||u[n+1]===u[n]&&h[n+1]<h[n])&&(f=!0,p=u[n],u[n]=u[n+1],u[n+1]=p,p=h[n],h[n]=h[n+1],h[n+1]=p,p=i[n],i[n]=i[n+1],i[n+1]=p);for(n=u=0;n<l;n++)(p=i[n]).index=n,u+=t.nodeMinColumnSpace(p,!0),p.column=u,u+=1,u+=t.nodeMinColumnSpace(p,!1);yo(t,e,i)}function Zr(t,e,n){var i=fl(t,e),l=t.Hb[e];n=bh(t,e,n);var u,h=[];for(u=0;u<l;u++)h[u]=-1;var f=[];for(u=0;u<l;u++)f[u]=-1;for(var p=!1,g=!0;g;)for(g=!1,u=0;u<l-1;u++){var m=n[i[u].index*l+i[u+1].index],v=n[i[u+1].index*l+i[u].index],x=0,D=0,M=i[u].column,T=i[u+1].column,N=t.nodeMinColumnSpace(i[u],!0),I=t.nodeMinColumnSpace(i[u],!1),k=t.nodeMinColumnSpace(i[u+1],!0),O=t.nodeMinColumnSpace(i[u+1],!1);N=M-N+k,I=T-I+O;var L=i[u].sourceEdges.iterator;for(L.reset();L.next();)if(O=(k=L.value).fromVertex,k.valid&&O.layer===e){for(k=0;i[k]!==O;)k++;k<u&&(x+=2*(u-k),D+=2*(u+1-k)),k===u+1&&(x+=1),k>u+1&&(x+=4*(k-u),D+=4*(k-(u+1)))}for((L=i[u].destinationEdges.iterator).reset();L.next();)if(O=(k=L.value).toVertex,k.valid&&O.layer===e){for(k=0;i[k]!==O;)k++;k===u+1&&(D+=1)}for((L=i[u+1].sourceEdges.iterator).reset();L.next();)if(O=(k=L.value).fromVertex,k.valid&&O.layer===e){for(k=0;i[k]!==O;)k++;k<u&&(x+=2*(u+1-k),D+=2*(u-k)),k===u&&(D+=1),k>u+1&&(x+=4*(k-(u+1)),D+=4*(k-u))}for((L=i[u+1].destinationEdges.iterator).reset();L.next();)if(O=(k=L.value).toVertex,k.valid&&O.layer===e){for(k=0;i[k]!==O;)k++;k===u&&(x+=1)}k=O=0;var b=f[i[u].index],U=h[i[u+1].index],X=f[i[u+1].index];-1!==(L=h[i[u].index])&&(O+=Math.abs(L-M),k+=Math.abs(L-I)),-1!==b&&(O+=Math.abs(b-M),k+=Math.abs(b-I)),-1!==U&&(O+=Math.abs(U-T),k+=Math.abs(U-N)),-1!==X&&(O+=Math.abs(X-T),k+=Math.abs(X-N)),(D<x-.5||D===x&&v<m-.5||D===x&&v===m&&k<O-.5)&&(g=p=!0,i[u].column=I,i[u+1].column=N,m=i[u],i[u]=i[u+1],i[u+1]=m)}for(u=0;u<l;u++)i[u].index=u;return yo(t,e,i),p}function Se(t,e,n){for(var i=!1;K0(t,e,n);)i=!0;return i}function K0(t,e,n){var i,l=fl(t,e),u=t.Hb[e],h=Iu(t,e,-1);if(0<n)for(i=0;i<u;i++)h[i]=-1;var f=Iu(t,e,1);if(0>n)for(i=0;i<u;i++)f[i]=-1;for(var p=!1,g=!0;g;)for(g=!1,i=0;i<u;i++){var D,m=l[i].column,v=t.nodeMinColumnSpace(l[i],!0),x=t.nodeMinColumnSpace(l[i],!1);D=0>i-1||m-l[i-1].column-1>v+t.nodeMinColumnSpace(l[i-1],!1)?m-1:m,v=i+1>=u||l[i+1].column-m-1>x+t.nodeMinColumnSpace(l[i+1],!0)?m+1:m;var M=x=0,T=0;if(0>=n)for(var N=l[i].sourceEdges.iterator;N.next();){var I=N.value,k=I.fromVertex;if(I.valid&&k.layer!==e){var O=Eu(I),L=I.portFromColOffset;I=I.portToColOffset,k=k.column,x+=(Math.abs(m+I-(k+L))+1)*O,M+=(Math.abs(D+I-(k+L))+1)*O,T+=(Math.abs(v+I-(k+L))+1)*O}}if(0<=n)for(N=l[i].destinationEdges.iterator;N.next();)k=(I=N.value).toVertex,I.valid&&k.layer!==e&&(O=Eu(I),L=I.portFromColOffset,I=I.portToColOffset,k=k.column,x+=(Math.abs(m+L-(k+I))+1)*O,M+=(Math.abs(D+L-(k+I))+1)*O,T+=(Math.abs(v+L-(k+I))+1)*O);I=L=O=0,k=f[l[i].index],-1!==(N=h[l[i].index])&&(O+=Math.abs(N-m),L+=Math.abs(N-D),I+=Math.abs(N-v)),-1!==k&&(O+=Math.abs(k-m),L+=Math.abs(k-D),I+=Math.abs(k-v)),M<x||M===x&&L<O?(g=p=!0,l[i].column=D):(T<x||T===x&&I<O)&&(g=p=!0,l[i].column=v)}return yo(t,e,l),t.normalize(),p}function X0(t,e,n){var i=fl(t,e),l=t.Hb[e],u=Fh(t,e,n),h=[];for(n=0;n<l;n++)h[n]=u[n];for(u=!0;u;)for(u=!1,n=0;n<l;n++){var f=i[n].column,p=t.nodeMinColumnSpace(i[n],!0),g=t.nodeMinColumnSpace(i[n],!1),m=0;if(-1===h[n])if(0===n&&n===l-1)m=f;else if(0===n){var v=i[n+1].column;m=v-f===g+t.nodeMinColumnSpace(i[n+1],!0)?f-1:f}else m=n===l-1?f-(v=i[n-1].column)===p+t.nodeMinColumnSpace(i[n-1],!1)?f+1:f:((p=(v=i[n-1].column)+t.nodeMinColumnSpace(i[n-1],!1)+p+1)+(g=(v=i[n+1].column)-t.nodeMinColumnSpace(i[n+1],!0)-g-1))/2|0;else 0===n&&n===l-1?m=h[n]:0===n?(g=(v=i[n+1].column)-t.nodeMinColumnSpace(i[n+1],!0)-g-1,m=Math.min(h[n],g)):n===l-1?(p=(v=i[n-1].column)+t.nodeMinColumnSpace(i[n-1],!1)+p+1,m=Math.max(h[n],p)):(p=(v=i[n-1].column)+t.nodeMinColumnSpace(i[n-1],!1)+p+1,g=(v=i[n+1].column)-t.nodeMinColumnSpace(i[n+1],!0)-g-1,p<h[n]&&h[n]<g?m=h[n]:p>=h[n]?m=p:g<=h[n]&&(m=g));m!==f&&(u=!0,i[n].column=m)}yo(t,e,i),t.normalize()}function ye(t,e){for(var n=!0,i=t.network.vertexes.iterator;i.next();){var l=i.value,u=t.nodeMinColumnSpace(l,!0),h=t.nodeMinColumnSpace(l,!1);if(l.column-u<=e&&l.column+h>=e){n=!1;break}}if(t=!1,n)for(i.reset();i.next();)(n=i.value).column>e&&(--n.column,t=!0);return t}function _e(t,e){var i,n=e+1,l=[],u=[];for(i=0;i<=t.wa;i++)l[i]=!1,u[i]=!1;for(var h=t.network.vertexes.iterator;h.next();){var f=(i=h.value).column-t.nodeMinColumnSpace(i,!0),p=i.column+t.nodeMinColumnSpace(i,!1);f<=e&&p>=e&&(l[i.layer]=!0),f<=n&&p>=n&&(u[i.layer]=!0)}for(f=!0,n=!1,i=0;i<=t.wa;i++)f=f&&!(l[i]&&u[i]);if(f)for(h.reset();h.next();)(t=h.value).column>e&&(--t.column,n=!0);return n}function Nu(t,e){for(var n=0;n<=t.Ja;n++)for(;ye(t,n););for(t.normalize(),n=0;n<t.Ja;n++)for(;_e(t,n););var i;if(t.normalize(),0<e)for(n=0;n<=t.Ja;n++){var l=Bn(t),u=Pa(t);for(i=u+1;u<i;){i=u,U1(t,n,1);var h=Pa(t);h>u?vi(t,l):h<u&&(u=h,l=Bn(t))}}if(0>e)for(n=t.Ja;0<=n;n--)for(l=Bn(t),i=(u=Pa(t))+1;u<i;)i=u,U1(t,n,-1),(h=Pa(t))>u?vi(t,l):h<u&&(u=h,l=Bn(t));t.normalize()}function U1(t,e,n){t.Lc=0;for(var i=t.network.vertexes.iterator;i.next();)i.value.component=-1;if(0<n)for(i.reset();i.next();){var l=i.value;l.column-t.nodeMinColumnSpace(l,!0)<=e&&(l.component=t.Lc)}if(0>n)for(i.reset();i.next();)(l=i.value).column+t.nodeMinColumnSpace(l,!1)>=e&&(l.component=t.Lc);for(t.Lc++,i.reset();i.next();)-1===(e=i.value).component&&(Qm(t,e,t.Lc,-1,!0,!0),t.Lc++);var u;for(e=[],u=0;u<t.Lc*t.Lc;u++)e[u]=!1;for(l=[],u=0;u<(t.wa+1)*(t.Ja+1);u++)l[u]=-1;for(i.reset();i.next();)for(var h=(u=i.value).layer,f=Math.max(0,u.column-t.nodeMinColumnSpace(u,!0)),p=Math.min(t.Ja,u.column+t.nodeMinColumnSpace(u,!1));f<=p;f++)l[h*(t.Ja+1)+f]=u.component;for(u=0;u<=t.wa;u++){if(0<n)for(h=0;h<t.Ja;h++)-1!==l[u*(t.Ja+1)+h]&&-1!==l[u*(t.Ja+1)+h+1]&&l[u*(t.Ja+1)+h]!==l[u*(t.Ja+1)+h+1]&&(e[l[u*(t.Ja+1)+h]*t.Lc+l[u*(t.Ja+1)+h+1]]=!0);if(0>n)for(h=t.Ja;0<h;h--)-1!==l[u*(t.Ja+1)+h]&&-1!==l[u*(t.Ja+1)+h-1]&&l[u*(t.Ja+1)+h]!==l[u*(t.Ja+1)+h-1]&&(e[l[u*(t.Ja+1)+h]*t.Lc+l[u*(t.Ja+1)+h-1]]=!0)}for(l=[],u=0;u<t.Lc;u++)l[u]=!0;for((h=[]).push(0);0!==h.length;)if(p=h[h.length-1],h.pop(),l[p])for(l[p]=!1,u=0;u<t.Lc;u++)e[p*t.Lc+u]&&h.splice(0,0,u);if(0<n)for(i.reset();i.next();)l[(t=i.value).component]&&--t.column;if(0>n)for(i.reset();i.next();)l[(n=i.value).component]&&(n.column+=1)}function bf(t,e){return 270===t.L?e?dr:pi:90===t.L?e?pi:dr:180===t.L?e?Ri:di:e?di:Ri}function fl(t,e){var n=t.Hb[e];if(n>=t.we.length){for(var i=[],l=0;l<t.we.length;l++)i[l]=t.we[l];t.we=i}for(null==t.we[n]?i=[]:(i=t.we[n],t.we[n]=null),t=t.rn[e],e=0;e<t.length;e++)i[(n=t[e]).index]=n;return i}function yo(t,e,n){t.we[t.Hb[e]]=n}me.className="CircularLayout",me.ConstantSpacing=po,me.ConstantDistance=Ea,me.ConstantAngle=Fo,me.Packed=mo,me.Clockwise=Pi,me.Counterclockwise=Ia,me.BidirectionalLeft=Oh,me.BidirectionalRight=Af,me.Forwards=Km,me.Reverse=Xm,me.Ascending=Pp,me.Descending=sn,me.Optimized=kf,me.Pythagorean=Of,me.Circular=Lh,Ap.prototype.compare=function(t,e){if(0<t&&0>this.xl||Math.abs(t)<Math.abs(this.xl)&&!(0>t&&0<this.xl))for(this.xl=t,this.bk=[],this.cm=[],t=0;t<e.length;t++)this.bk[t]=e[t].bounds.x,this.cm[t]=e[t].bounds.y},Ap.prototype.commit=function(t){if(null!==this.bk&&null!==this.cm)for(var e=0;e<this.bk.length;e++){var n=t.K(e);n.x=this.bk[e],n.y=this.cm[e]}},Ap.className="VertexArrangement",Ht(Lf,Xt),Lf.prototype.createVertex=function(){return new kp(this)},Lf.prototype.createEdge=function(){return new Jm(this)},Lf.className="CircularNetwork",Ht(kp,Xe),Mt.Object.defineProperties(kp.prototype,{diameter:{get:function(){return this.Mi},set:function(t){this.Mi!==t&&(this.Mi=t)}},actualAngle:{get:function(){return this.u},set:function(t){this.u!==t&&(this.u=t)}}}),kp.className="CircularVertex",Ht(Jm,qn),Jm.className="CircularEdge",Ht(ln,Ot),ln.prototype.cloneProtected=function(t){Ot.prototype.cloneProtected.call(this,t),t.Td.assign(this.Td),t.jm=this.jm,t.ff=this.ff,t.od=this.od,t.Tk=this.Tk,t.Im=this.Im,t.Pf=this.Pf,t.pn=this.pn,t.Jn=this.Jn,t.vk=this.vk,t.uk=this.uk,t.sk=this.sk,t.tk=this.tk,t.Dm=this.Dm,t.Cm=this.Cm},ln.prototype.serializeLayoutProperties=function(t,e){Ot.prototype.serializeLayoutProperties.call(this,t,e),t.arrangementSpacing={width:this.arrangementSpacing.width,height:this.arrangementSpacing.height},t.arrangesToOrigin=this.arrangesToOrigin,t.setsPortSpots=this.setsPortSpots,t.comments=this.comments,t.maxIterations=this.maxIterations,t.epsilonDistance=this.epsilonDistance,t.infinityDistance=this.infinityDistance,t.moveLimit=this.moveLimit,t.defaultSpringStiffness=this.defaultSpringStiffness,t.defaultSpringLength=this.defaultSpringLength,t.defaultElectricalCharge=this.defaultElectricalCharge,t.defaultGravitationalMass=this.defaultGravitationalMass,t.defaultCommentSpringLength=this.defaultCommentSpringLength,t.defaultCommentElectricalCharge=this.defaultCommentElectricalCharge},ln.prototype.deserializeLayoutProperties=function(t,e,n,i,l){Ot.prototype.deserializeLayoutProperties.call(this,t,e,n,i,l),this.arrangementSpacing=new dt(t.arrangementSpacing.width,t.arrangementSpacing.height),this.arrangesToOrigin=t.arrangesToOrigin,this.setsPortSpots=t.setsPortSpots,this.comments=t.comments,this.maxIterations=t.maxIterations,this.epsilonDistance=t.epsilonDistance,this.infinityDistance=t.infinityDistance,this.moveLimit=t.moveLimit,this.defaultSpringStiffness=t.defaultSpringStiffness,this.defaultSpringLength=t.defaultSpringLength,this.defaultElectricalCharge=t.defaultElectricalCharge,this.defaultGravitationalMass=t.defaultGravitationalMass,this.defaultCommentSpringLength=t.defaultCommentSpringLength,this.defaultCommentElectricalCharge=t.defaultCommentElectricalCharge},ln.prototype.createNetwork=function(){return new us(this)},ln.prototype.doLayout=function(t){if(null===this.network&&(this.network=this.makeNetwork(t)),!this.qv()){if(t=this.maxIterations,0<this.network.vertexes.count){this.network.oo();for(var e=this.network.vertexes.iterator;e.next();){var n=e.value;n.charge=this.electricalCharge(n),n.mass=this.gravitationalMass(n)}for(e=this.network.edges.iterator;e.next();)(n=e.value).stiffness=this.springStiffness(n),n.length=this.springLength(n);if(this.ju(),this.gn=0,this.needsClusterLayout()){for(var i=(n=(e=this.network).Ix()).iterator;i.next();){this.network=i.value;for(var l=this.network.vertexes.iterator;l.next();){var u=l.value;u.Nd=u.vertexes.count,u.hh=1,u.Bj=null,u.Ke=null}Tu(this,0,t)}this.network=e;var h=i=n.iterator;i=this.arrangementSpacing;var f=h.count,p=!0;u=l=0;for(var g=oe(),m=0;m<f+e.vertexes.count+2;m++)g[m]=null;f=0,h.reset();for(var v=B.alloc();h.next();)if(this.computeBounds(m=h.value,v),p)p=!1,l=v.x+v.width/2,u=v.y+v.height/2,g[0]=new P(v.x+v.width+i.width,v.y),g[1]=new P(v.x,v.y+v.height+i.height),f=2;else{var x=Zm(g,f,l,u,v.width,v.height,i),D=g[x],M=new P(D.x+v.width+i.width,D.y),T=new P(D.x,D.y+v.height+i.height);for(x+1<f&&g.splice(x+1,0,null),g[x]=M,g[x+1]=T,f++,x=D.x-v.x,D=D.y-v.y,m=m.vertexes.iterator;m.next();)(M=m.value).centerX+=x,M.centerY+=D}for(B.free(v),m=e.vertexes.iterator;m.next();)x=(h=m.value).bounds,2>f?(l=x.x+x.width/2,u=x.y+x.height/2,g[0]=new P(x.x+x.width+i.width,x.y),g[1]=new P(x.x,x.y+x.height+i.height),f=2):(D=new P((v=g[p=Zm(g,f,l,u,x.width,x.height,i)]).x+x.width+i.width,v.y),x=new P(v.x,v.y+x.height+i.height),p+1<f&&g.splice(p+1,0,null),g[p]=D,g[p+1]=x,f++,h.centerX=v.x+h.width/2,h.centerY=v.y+h.height/2);for(Nt(g),i=n.iterator;i.next();){for(l=(n=i.value).vertexes.iterator;l.next();)e.fg(l.value);for(n=n.edges.iterator;n.next();)e.ol(n.value)}}cl(this,t),this.updateParts()}this.Tk=t,this.network=null,this.isValidLayout=!0}},ln.prototype.needsClusterLayout=function(){if(3>this.network.vertexes.count)return!1;for(var t=0,e=0,n=this.network.vertexes.first().bounds,i=this.network.vertexes.iterator;i.next();){if(i.value.bounds.Sc(n)&&2<++t)return!0;if(10<e)break;e++}return!1},ln.prototype.computeBounds=function(t,e){var n=!0;for(t=t.vertexes.iterator;t.next();){var i=t.value;n?(n=!1,e.set(i.bounds)):e.Xc(i.bounds)}return e},ln.prototype.ju=function(){if(this.comments)for(var t=this.network.vertexes.iterator;t.next();)this.addComments(t.value)},ln.prototype.addComments=function(t){var e=t.node;if(null!==e)for(e=e.wu();e.next();){var n=e.value;if("Comment"===n.category&&n.isVisible()){var i=this.network.ei(n);null===i&&(i=this.network.yj(n)),i.charge=this.defaultCommentElectricalCharge,n=null;for(var l=i.destinationEdges;l.next();){var u=l.value;if(u.toVertex===t){n=u;break}}if(null===n)for(l=i.sourceEdges;l.next();)if((u=l.value).fromVertex===t){n=u;break}null===n&&(n=this.network.Qj(t,i,null)),n.length=this.defaultCommentSpringLength}}},ln.prototype.moveVertex=function(t){var e=t.forceX,n=t.forceY,i=this.moveLimit;return e<-i?e=-i:e>i&&(e=i),n<-i?n=-i:n>i&&(n=i),t.centerX+=e,t.centerY+=n,e*e+n*n},ln.prototype.moveFixedVertex=function(){},ln.prototype.commitLayout=function(){this.ev(),this.commitNodes(),this.isRouting&&this.commitLinks()},ln.prototype.ev=function(){if(this.setsPortSpots)for(var t=this.network.edges.iterator;t.next();){var e=t.value.link;null!==e&&(e.fromSpot=Hn,e.toSpot=Hn)}},ln.prototype.commitNodes=function(){var t=0,e=0;if(this.arrangesToOrigin){var n=B.alloc();this.computeBounds(this.network,n),t=(e=this.arrangementOrigin).x-n.x,e=e.y-n.y,B.free(n)}n=B.alloc();for(var i=this.network.vertexes.iterator;i.next();){var l=i.value;(0!==t||0!==e)&&(n.assign(l.bounds),n.x+=t,n.y+=e,l.bounds=n),l.commit()}B.free(n)},ln.prototype.commitLinks=function(){for(var t=this.network.edges.iterator;t.next();)t.value.commit()},ln.prototype.springStiffness=function(t){return t=t.stiffness,isNaN(t)?this.vk:t},ln.prototype.springLength=function(t){return t=t.length,isNaN(t)?this.uk:t},ln.prototype.electricalCharge=function(t){return t=t.charge,isNaN(t)?this.sk:t},ln.prototype.electricalFieldX=function(){return 0},ln.prototype.electricalFieldY=function(){return 0},ln.prototype.gravitationalMass=function(t){return t=t.mass,isNaN(t)?this.tk:t},ln.prototype.gravitationalFieldX=function(){return 0},ln.prototype.gravitationalFieldY=function(){return 0},ln.prototype.isFixed=function(t){return t.isFixed},Mt.Object.defineProperties(ln.prototype,{currentIteration:{get:function(){return this.gn}},arrangementSpacing:{get:function(){return this.Td},set:function(t){this.Td.C(t)||(this.Td.assign(t),this.D())}},arrangesToOrigin:{get:function(){return this.jm},set:function(t){this.jm!==t&&(this.jm=t,this.D())}},setsPortSpots:{get:function(){return this.ff},set:function(t){this.ff!==t&&(this.ff=t,this.D())}},comments:{get:function(){return this.od},set:function(t){this.od!==t&&(this.od=t,this.D())}},maxIterations:{get:function(){return this.Tk},set:function(t){this.Tk!==t&&0<=t&&(this.Tk=t,this.D())}},epsilonDistance:{get:function(){return this.Im},set:function(t){this.Im!==t&&0<t&&(this.Im=t,this.D())}},infinityDistance:{get:function(){return this.Pf},set:function(t){this.Pf!==t&&1<t&&(this.Pf=t,this.D())}},moveLimit:{get:function(){return this.pn},set:function(t){this.pn!==t&&1<t&&(this.pn=t,this.D())}},randomNumberGenerator:{get:function(){return this.Jn},set:function(t){this.Jn!==t&&(null!==t&&"function"!=typeof t.random&&Y('ForceDirectedLayout.randomNumberGenerator must have a "random()" function on it: '+t),this.Jn=t)}},defaultSpringStiffness:{get:function(){return this.vk},set:function(t){this.vk!==t&&(this.vk=t,this.D())}},defaultSpringLength:{get:function(){return this.uk},set:function(t){this.uk!==t&&(this.uk=t,this.D())}},defaultElectricalCharge:{get:function(){return this.sk},set:function(t){this.sk!==t&&(this.sk=t,this.D())}},defaultGravitationalMass:{get:function(){return this.tk},set:function(t){this.tk!==t&&(this.tk=t,this.D())}},defaultCommentSpringLength:{get:function(){return this.Dm},set:function(t){this.Dm!==t&&(this.Dm=t,this.D())}},defaultCommentElectricalCharge:{get:function(){return this.Cm},set:function(t){this.Cm!==t&&(this.Cm=t,this.D())}}}),ln.className="ForceDirectedLayout",Nr.className="ForceDirectedSubnet",Ht(us,Xt),us.prototype.createVertex=function(){return new Ul(this)},us.prototype.createEdge=function(){return new Cr(this)},us.className="ForceDirectedNetwork",Ht(Ul,Xe),Ul.prototype.serializeVertexProperties=function(t,e){Xe.prototype.serializeVertexProperties.call(this,t,e),t.isFixed=this.isFixed,t.charge=this.charge,t.mass=this.mass},Ul.prototype.deserializeVertexProperties=function(t,e,n,i){Xe.prototype.deserializeVertexProperties.call(this,t,e,n,i),this.isFixed=t.isFixed,this.charge=t.charge,this.mass=t.mass},Mt.Object.defineProperties(Ul.prototype,{isFixed:{get:function(){return this.ga},set:function(t){this.ga!==t&&(this.ga=t)}},charge:{get:function(){return this.u},set:function(t){this.u!==t&&(this.u=t)}},mass:{get:function(){return this.Ga},set:function(t){this.Ga!==t&&(this.Ga=t)}},forceX:{get:function(){return this.F},set:function(t){this.F!==t&&(this.F=t)}},forceY:{get:function(){return this.W},set:function(t){this.W!==t&&(this.W=t)}}}),Ul.className="ForceDirectedVertex",Ht(Cr,qn),Cr.prototype.serializeEdgeProperties=function(t,e){qn.prototype.serializeEdgeProperties.call(this,t,e),t.stiffness=this.stiffness,t.length=this.length},Cr.prototype.deserializeEdgeProperties=function(t,e,n,i){qn.prototype.deserializeEdgeProperties.call(this,t,e,n,i),this.stiffness=t.stiffness,this.length=t.length},Mt.Object.defineProperties(Cr.prototype,{stiffness:{get:function(){return this.m},set:function(t){this.m!==t&&(this.m=t)}},length:{get:function(){return this.j},set:function(t){this.j!==t&&(this.j=t)}}}),Cr.className="ForceDirectedEdge",Ro.prototype.random=function(){var t=this.seed%this.Q*this.Kx-this.seed/this.Q*this.Nx;return this.seed=0<t?t:t+this.Mx,this.seed*this.Lx},Ro.className="RandomNumberGenerator",Ht(Ft,Ot),Ft.prototype.cloneProtected=function(t){Ot.prototype.cloneProtected.call(this,t),t.be=this.be,t.gc=this.gc,t.L=this.L,t.rk=this.rk,t.Ok=this.Ok,t.Fk=this.Fk,t.Xi=this.Xi,t.ek=this.ek,t.Tf=this.Tf,t.ff=this.ff,t.jn=this.jn},Ft.prototype.serializeLayoutProperties=function(t,e){Ot.prototype.serializeLayoutProperties.call(this,t,e),t.layerSpacing=this.layerSpacing,t.columnSpacing=this.columnSpacing,t.direction=this.direction,t.cycleRemoveOption=this.cycleRemoveOption.name,t.layeringOption=this.layeringOption.name,t.initializeOption=this.initializeOption.name,t.iterations=this.iterations,t.aggressiveOption=this.aggressiveOption.name,t.packOption=this.packOption,t.setsPortSpots=this.setsPortSpots,t.linkSpacing=this.linkSpacing,t.wa=this.wa,t.Dh=this.Dh,t.Ja=this.Ja,t.Bg=this.Bg,t.zc=this.zc,t.Hb=this.Hb,t.Cg=this.Cg,t.Lc=this.Lc,t.Yc={x:this.Yc.x,y:this.Yc.y}},Ft.prototype.deserializeLayoutProperties=function(t,e,n,i,l){Ot.prototype.deserializeLayoutProperties.call(this,t,e,n,i,l),this.layerSpacing=t.layerSpacing,this.columnSpacing=t.columnSpacing,this.direction=t.direction,this.cycleRemoveOption=Ks(Ft,t.cycleRemoveOption),this.layeringOption=Ks(Ft,t.layeringOption),this.initializeOption=Ks(Ft,t.initializeOption),this.iterations=t.iterations,this.aggressiveOption=Ks(Ft,t.aggressiveOption),this.packOption=t.packOption,this.setsPortSpots=t.setsPortSpots,this.linkSpacing=t.linkSpacing,this.wa=t.wa,this.Dh=t.Dh,this.Ja=t.Ja,this.Bg=t.Bg,this.zc=t.zc,this.Hb=t.Hb,this.Cg=t.Cg,this.Lc=t.Lc,this.Yc=new P(this.Yc.x,this.Yc.y),l&&!i&&l.edges.each(function(u){if(!u.link&&u.fromVertex&&u.toVertex&&(null===u.fromVertex.node||null===u.toVertex.node)){for(var h=u.fromVertex;null!==h&&null===h.node&&0<h.wd.count;){var f=h.wd.K(0);if(f.link){u.link=f.link;break}h=f.fromVertex}if(!u.link){for(f=u.toVertex;null!==f&&null===f.node&&0<f.Jd.count;){var p=f.Jd.K(0);if(p.link){u.link=p.link;break}f=p.toVertex}if(!u.link)for(f=f.wd.iterator;f.next();)if((p=f.value).link&&p.fromVertex===h){u.link=p.link;break}}}})},Ft.prototype.ob=function(t){t.classType===Ft?0===t.name.indexOf("Aggressive")?this.aggressiveOption=t:0===t.name.indexOf("Cycle")?this.cycleRemoveOption=t:0===t.name.indexOf("Init")?this.initializeOption=t:0===t.name.indexOf("Layer")?this.layeringOption=t:Y("Unknown enum value: "+t):Ot.prototype.ob.call(this,t)},Ft.prototype.createNetwork=function(){return new jh(this)},Ft.prototype.doLayout=function(t){for(null===this.network&&(this.network=this.makeNetwork(t)),this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin),this.Dh=-1,this.zc=this.Bg=0,this.rn=this.qn=this.fj=null,t=0;t<this.we.length;t++)this.we[t]=null;if(0<this.network.vertexes.count){if(this.network.oo(),this.qv())return;for(this.cycleRemoveOption!==Ff&&this.removeCycles(),t=this.network.vertexes.iterator;t.next();)t.value.layer=-1;for(this.wa=-1,this.assignLayers(),t.reset();t.next();)this.wa=Math.max(this.wa,t.value.layer);this.cycleRemoveOption===Ff&&this.removeCycles();for(var e=[],n=(t=this.network).edges.iterator;n.next();){var i=n.value;i.valid=!1,e.push(i)}for(n=0;n<e.length;n++){var l=(i=e[n]).fromVertex,u=i.toVertex;if(!(i.valid||(null===l.node&&null===l.data||null===u.node&&null===u.data)&&l.layer===u.layer)){var h=0,f=0,p=0,g=0;if(null!==i.link){if(null===(f=i.link))continue;var m=l.node;if(h=u.node,null===m||null===h)continue;var v=f.fromNode;p=f.toNode;var x=f.fromPort;if(f=f.toPort,i.rev){g=v;var D=x;v=p,x=f,p=g,f=D}var M=l.focus;g=u.focus;var T=i.rev?u.bounds:l.bounds;D=P.alloc(),m!==v?T.v()&&v.isVisible()?v.actualBounds.v()?(kl(v,x,ut,D),D.x+=v.actualBounds.x-T.x,D.y+=v.actualBounds.y-T.y):(kl(v,x,ut,D),D.v()||D.assign(M)):D.assign(M):T.v()?(kl(v,x,ut,D),D.v()||D.assign(M)):D.assign(M),v=i.rev?l.bounds:u.bounds,m=P.alloc(),h!==p?v.v()&&p.isVisible()?p.actualBounds.v()?(kl(p,f,ut,m),m.x+=p.actualBounds.x-v.x,m.y+=p.actualBounds.y-v.y):(kl(p,f,ut,m),m.v()||m.assign(g)):m.assign(g):v.v()?(kl(p,f,ut,m),m.v()||m.assign(g)):m.assign(g),90===this.L||270===this.L?(h=Math.round((D.x-M.x)/this.gc),p=D.x,f=Math.round((m.x-g.x)/this.gc),g=m.x):(h=Math.round((D.y-M.y)/this.gc),p=D.y,f=Math.round((m.y-g.y)/this.gc),g=m.y),P.free(D),P.free(m),i.portFromColOffset=h,i.portFromPos=p,i.portToColOffset=f,i.portToPos=g}else i.portFromColOffset=0,i.portFromPos=0,i.portToColOffset=0,i.portToPos=0;if(D=l.layer,m=u.layer,v=0,null!==(T=i.link)){var N=T.fromPort,I=T.toPort;if(null!==N&&null!==I){var k=T.fromNode;if(x=T.toNode,null!==k&&null!==x){var O=bf(this,!0),L=bf(this,!1),b=this.setsPortSpots?O:T.computeSpot(!0,N);M=this.setsPortSpots?L:T.computeSpot(!1,I);var U=T.isOrthogonal;b.Uc()&&b.xf(L)&&M.Uc()&&M.xf(O)?v=0:(O=T.getLinkPoint(k,N,b,!0,U,x,I,P.alloc()),L=T.getLinkDirection(k,N,O,b,!0,U,x,I),P.free(O),b.Wr()||L!==V1(this,i,!0)?this.setsPortSpots&&null!==k&&1===k.ports.count&&i.rev&&(v+=1):v+=1,b=T.getLinkPoint(x,I,M,!1,U,k,N,P.alloc()),T=T.getLinkDirection(x,I,b,M,!1,U,k,N),P.free(b),M.Wr()||T!==V1(this,i,!1)?this.setsPortSpots&&null!==x&&1===x.ports.count&&i.rev&&(v+=2):v+=2)}}}if(v=1===(x=v)||3===x,(x=2===x||3===x)&&((M=t.createVertex()).node=null,M.nf=1,M.layer=D,M.near=l,t.fg(M),(l=t.Qj(l,M,i.link)).valid=!1,l.rev=i.rev,l.portFromColOffset=h,l.portToColOffset=0,l.portFromPos=p,l.portToPos=0,l=M),T=1,v&&T--,D-m>T&&0<D){for(i.valid=!1,(M=t.createVertex()).node=null,M.nf=2,M.layer=D-1,t.fg(M),(l=t.Qj(l,M,i.link)).valid=!0,l.rev=i.rev,l.portFromColOffset=x?0:h,l.portToColOffset=0,l.portFromPos=x?0:p,l.portToPos=0,l=M,D--;D-m>T&&0<D;)(M=t.createVertex()).node=null,M.nf=3,M.layer=D-1,t.fg(M),(l=t.Qj(l,M,i.link)).valid=!0,l.rev=i.rev,l.portFromColOffset=0,l.portToColOffset=0,l.portFromPos=0,l.portToPos=0,l=M,D--;(l=t.Qj(M,u,i.link)).valid=!v,v&&(M.near=u),l.rev=i.rev,l.portFromColOffset=0,l.portToColOffset=f,l.portFromPos=0,l.portToPos=g}else i.valid=!0}}for(t=this.Hb=[],e=0;e<=this.wa;e++)t[e]=0;for(e=this.network.vertexes.iterator;e.next();)e.value.index=-1;for(this.initializeIndices(),this.Dh=-1,n=this.zc=this.Bg=0;n<=this.wa;n++)t[n]>t[this.zc]&&(this.Dh=t[n]-1,this.zc=n),t[n]<t[this.Bg]&&(this.Bg=n);for(this.rn=[],n=0;n<t.length;n++)this.rn[n]=[];for(e.reset();e.next();)this.rn[(t=e.value).layer][t.index]=t;for(this.Ja=-1,t=0;t<=this.wa;t++){for(e=fl(this,t),n=0,i=this.Hb[t],u=0;u<i;u++)n+=this.nodeMinColumnSpace(l=e[u],!0),l.column=n,n+=1,n+=this.nodeMinColumnSpace(l,!1);this.Ja=Math.max(this.Ja,n-1),yo(this,t,e)}this.reduceCrossings(),this.straightenAndPack(),this.updateParts()}this.network=null,this.isValidLayout=!0},Ft.prototype.linkMinLength=function(){return 1},Ft.prototype.nodeMinLayerSpace=function(t,e){return null===t.node&&null===t.data?0:90===this.L||270===this.L?e?t.focus.y+10:t.bounds.height-t.focus.y+10:e?t.focus.x+10:t.bounds.width-t.focus.x+10},Ft.prototype.nodeMinColumnSpace=function(t,e){if(null===t.node&&null===t.data)return 0;var n=e?t.Uj:t.Tj;return null!==n?n:90===(n=this.L)||270===n?e?t.Uj=t.focus.x/this.gc+1|0:t.Tj=(t.bounds.width-t.focus.x)/this.gc+1|0:e?t.Uj=t.focus.y/this.gc+1|0:t.Tj=(t.bounds.height-t.focus.y)/this.gc+1|0},Ft.prototype.countCrossings=function(){for(var t=0,e=0;e<=this.wa;e++)for(var n=bh(this,e,1),i=this.Hb[e],l=0;l<i;l++)for(var u=l;u<i;u++)t+=n[l*i+u];return t},Ft.prototype.normalize=function(){var t=1/0;this.Ja=-1;for(var e=this.network.vertexes.iterator;e.next();){var n=e.value;t=Math.min(t,n.column-this.nodeMinColumnSpace(n,!0)),this.Ja=Math.max(this.Ja,n.column+this.nodeMinColumnSpace(n,!1))}for(e.reset();e.next();)e.value.column-=t;this.Ja-=t},Ft.prototype.removeCycles=function(){for(var t=this.network.edges.iterator;t.next();)t.value.rev=!1;switch(this.rk){default:case Rh:var e=0,n=(t=this.network).vertexes.count-1,i=[];i.length=n+1;for(var l=t.vertexes.iterator;l.next();)l.value.valid=!0;for(;null!==j1(t);){for(l=H0(t);null!==l;)i[n]=l,n--,l.valid=!1,l=H0(t);for(l=G0(t);null!==l;)i[e]=l,e++,l.valid=!1,l=G0(t);l=null;for(var u=0,h=this.network.vertexes.iterator;h.next();){var f=h.value;if(f.valid){for(var p=0,g=f.destinationEdges;g.next();)g.value.toVertex.valid&&p++;g=0;for(var m=f.sourceEdges;m.next();)m.value.fromVertex.valid&&g++;(null===l||u<p-g)&&(l=f,u=p-g)}}null!==l&&(i[e]=l,e++,l.valid=!1)}for(e=0;e<t.vertexes.count;e++)i[e].index=e;for(i=t.edges.iterator;i.next();)(e=i.value).fromVertex.index>e.toVertex.index&&(t.Ol(e),e.rev=!0);break;case jo:for(i=this.network.vertexes.iterator;i.next();)(t=i.value).gg=-1,t.finish=-1;for(t=this.network.edges.iterator;t.next();)t.value.forest=!1;for(this.Cg=0,i.reset();i.next();)0===(e=i.value).sourceEdges.count&&qm(this,e);for(i.reset();i.next();)-1===(e=i.value).gg&&qm(this,e);for(t.reset();t.next();)(i=t.value).forest||(n=(e=i.fromVertex).finish,u=(l=i.toVertex).finish,l.gg<e.gg&&n<u&&(this.network.Ol(i),i.rev=!0));break;case Ff:for(e=(t=this.network).vertexes.iterator,i=1/0;e.next();)i=Math.min(i,e.value.layer);if(1/0>i){if(0>i)for(e.reset();e.next();)e.value.layer-=i;for(i=[],e.reset();e.next();)void 0===(l=i[(n=e.value).layer])?i[n.layer]=[n]:l.push(n);for(n=e=0;n<i.length;n++)if((l=i[n])&&0!==l.length){if(0<n)for(u=0;u<l.length;u++)l[u].layer-=e}else e++;for(i=t.edges.iterator;i.next();)(e=i.value).fromVertex.layer<e.toVertex.layer&&(t.Ol(e),e.rev=!0)}}},Ft.prototype.assignLayers=function(){switch(this.Ok){case Je:z0(this);break;case ey:for(var t,e=this.network.vertexes.iterator;e.next();)t=W0(this,e.value),this.wa=Math.max(t,this.wa);for(e.reset();e.next();)(t=e.value).layer=this.wa-t.layer;break;default:for(z0(this),e=this.network.vertexes.iterator;e.next();)e.value.valid=!1;for(e.reset();e.next();)0===(t=e.value).sourceEdges.count&&Y0(this,t);for(t=1/0,e.reset();e.next();)t=Math.min(t,e.value.layer);for(this.wa=-1,e.reset();e.next();){var n=e.value;n.layer-=t,this.wa=Math.max(this.wa,n.layer)}}},Ft.prototype.initializeIndices=function(){switch(this.Fk){default:case ry:for(var t=this.network.vertexes.iterator;t.next();){var e=t.value,n=e.layer;e.index=this.Hb[n],this.Hb[n]++}break;case ny:for(t=this.network.vertexes.iterator,e=this.wa;0<=e;e--)for(t.reset();t.next();)(n=t.value).layer===e&&-1===n.index&&B1(this,n);break;case iy:for(t=this.network.vertexes.iterator,e=0;e<=this.wa;e++)for(t.reset();t.next();)(n=t.value).layer===e&&-1===n.index&&wi(this,n)}},Ft.prototype.reduceCrossings=function(){var n,i,u,h,f,t=this.countCrossings(),e=Bn(this);for(n=0;n<this.Xi;n++){for(i=0;i<=this.wa;i++)ty(this,i,1),Zr(this,i,1);var l=this.countCrossings();for(l<t&&(t=l,e=Bn(this)),i=this.wa;0<=i;i--)ty(this,i,-1),Zr(this,i,-1);(l=this.countCrossings())<t&&(t=l,e=Bn(this))}for(vi(this,e),n=0;n<this.Xi;n++){for(i=0;i<=this.wa;i++)ty(this,i,0),Zr(this,i,0);for((l=this.countCrossings())<t&&(t=l,e=Bn(this)),i=this.wa;0<=i;i--)ty(this,i,0),Zr(this,i,0);(l=this.countCrossings())<t&&(t=l,e=Bn(this))}switch(vi(this,e),this.ek){case oy:break;case J0:for(f=t+1;(i=this.countCrossings())<f;)for(f=i,n=this.wa;0<=n;n--)for(h=0;h<=n;h++){for(u=!0;u;)for(u=!1,i=n;i>=h;i--)u=Zr(this,i,-1)||u;for((l=this.countCrossings())>=t?vi(this,e):(t=l,e=Bn(this)),u=!0;u;)for(u=!1,i=n;i>=h;i--)u=Zr(this,i,1)||u;for((l=this.countCrossings())>=t?vi(this,e):(t=l,e=Bn(this)),u=!0;u;)for(u=!1,i=h;i<=n;i++)u=Zr(this,i,1)||u;for(l>=t?vi(this,e):(t=l,e=Bn(this)),u=!0;u;)for(u=!1,i=h;i<=n;i++)u=Zr(this,i,-1)||u;for(l>=t?vi(this,e):(t=l,e=Bn(this)),u=!0;u;)for(u=!1,i=n;i>=h;i--)u=Zr(this,i,0)||u;for(l>=t?vi(this,e):(t=l,e=Bn(this)),u=!0;u;)for(u=!1,i=h;i<=n;i++)u=Zr(this,i,0)||u;l>=t?vi(this,e):(t=l,e=Bn(this))}break;default:for(n=this.wa,h=0,f=t+1;(i=this.countCrossings())<f;){for(f=i,u=!0;u;)for(u=!1,i=n;i>=h;i--)u=Zr(this,i,-1)||u;for((l=this.countCrossings())>=t?vi(this,e):(t=l,e=Bn(this)),u=!0;u;)for(u=!1,i=n;i>=h;i--)u=Zr(this,i,1)||u;for((l=this.countCrossings())>=t?vi(this,e):(t=l,e=Bn(this)),u=!0;u;)for(u=!1,i=h;i<=n;i++)u=Zr(this,i,1)||u;for(l>=t?vi(this,e):(t=l,e=Bn(this)),u=!0;u;)for(u=!1,i=h;i<=n;i++)u=Zr(this,i,-1)||u;for(l>=t?vi(this,e):(t=l,e=Bn(this)),u=!0;u;)for(u=!1,i=n;i>=h;i--)u=Zr(this,i,0)||u;for(l>=t?vi(this,e):(t=l,e=Bn(this)),u=!0;u;)for(u=!1,i=h;i<=n;i++)u=Zr(this,i,0)||u;l>=t?vi(this,e):(t=l,e=Bn(this))}}vi(this,e)},Ft.prototype.straightenAndPack=function(){var t=0!=(1&this.Tf),e=0!=(this.Tf&sy);if(1e3<this.network.edges.count&&e&&(t=!1),t){var n=[];for(e=0;e<=this.wa;e++)n[e]=0;for(var i,l=this.network.vertexes.iterator;l.next();){var u=l.value;e=u.layer,i=u.column,u=this.nodeMinColumnSpace(u,!1),n[e]=Math.max(n[e],i+u)}for(l.reset();l.next();)(u=l.value).column=(8*(this.Ja-n[e=u.layer])>>1)+8*(i=u.column);this.Ja*=8}if(0!=(2&this.Tf))for(n=!0;n;){for(n=!1,e=this.zc+1;e<=this.wa;e++)n=Se(this,e,1)||n;for(e=this.zc-1;0<=e;e--)n=Se(this,e,-1)||n;n=Se(this,this.zc,0)||n}if(0!=(4&this.Tf)){for(e=this.zc+1;e<=this.wa;e++)X0(this,e,1);for(e=this.zc-1;0<=e;e--)X0(this,e,-1);X0(this,this.zc,0)}if(t&&(Nu(this,-1),Nu(this,1)),0!=(2&this.Tf))for(n=!0;n;){for(n=!1,n=Se(this,this.zc,0)||n,e=this.zc+1;e<=this.wa;e++)n=Se(this,e,0)||n;for(e=this.zc-1;0<=e;e--)n=Se(this,e,0)||n}},Ft.prototype.commitLayout=function(){if(this.setsPortSpots)for(var t=bf(this,!0),e=bf(this,!1),n=this.network.edges.iterator;n.next();){var i=n.value.link;null!==i&&(i.fromSpot=t,i.toSpot=e)}this.commitNodes(),this.nu(),this.isRouting&&this.commitLinks()},Ft.prototype.commitNodes=function(){this.ae=[],this.Cd=[],this.Bd=[],this.Qa=[];for(var t=0;t<=this.wa;t++)this.ae[t]=0,this.Cd[t]=0,this.Bd[t]=0,this.Qa[t]=0;for(t=this.network.vertexes.iterator;t.next();){var e=t.value,n=e.layer;this.ae[n]=Math.max(this.ae[n],this.nodeMinLayerSpace(e,!0)),this.Cd[n]=Math.max(this.Cd[n],this.nodeMinLayerSpace(e,!1))}e=0,n=this.be;for(var i=0;i<=this.wa;i++){var l=n;0>=this.ae[i]+this.Cd[i]&&(l=0),0<i&&(e+=l/2),90===this.L||0===this.L?(this.Bd[i]=e+=this.Cd[i],e+=this.ae[i]):(this.Bd[i]=e+=this.ae[i],e+=this.Cd[i]),i<this.wa&&(e+=l/2),this.Qa[i]=e}for(n=e,e=this.arrangementOrigin,i=0;i<=this.wa;i++)270===this.L?this.Bd[i]=e.y+this.Bd[i]:90===this.L?(this.Bd[i]=e.y+n-this.Bd[i],this.Qa[i]=n-this.Qa[i]):180===this.L?this.Bd[i]=e.x+this.Bd[i]:(this.Bd[i]=e.x+n-this.Bd[i],this.Qa[i]=n-this.Qa[i]);for(t.reset(),n=i=1/0;t.next();){var u=(l=t.value).layer,h=0|l.column;if(270===this.L||90===this.L){var f=e.x+this.gc*h;u=this.Bd[u]}else f=this.Bd[u],u=e.y+this.gc*h;l.centerX=f,l.centerY=u,i=Math.min(l.x,i),n=Math.min(l.y,n)}for(this.Yc=new P(i=e.x-i,e=e.y-n),t.reset();t.next();)(n=t.value).x+=i,n.y+=e,n.commit()},Ft.prototype.nu=function(){for(var t=0,e=this.be,n=0;n<=this.wa;n++)t+=this.ae[n],t+=this.Cd[n];t+=this.wa*e,e=[],n=this.gc*this.Ja;for(var i=this.maxLayer;0<=i;i--)e.push(270===this.L?0===i?new B(0,0,n,Math.abs(this.Qa[0])):new B(0,this.Qa[i-1],n,Math.abs(this.Qa[i-1]-this.Qa[i])):90===this.L?0===i?new B(0,this.Qa[0],n,Math.abs(this.Qa[0]-t)):new B(0,this.Qa[i],n,Math.abs(this.Qa[i-1]-this.Qa[i])):180===this.L?0===i?new B(0,0,Math.abs(this.Qa[0]),n):new B(this.Qa[i-1],0,Math.abs(this.Qa[i-1]-this.Qa[i]),n):0===i?new B(this.Qa[0],0,Math.abs(this.Qa[0]-t),n):new B(this.Qa[i],0,Math.abs(this.Qa[i-1]-this.Qa[i]),n));this.commitLayers(e,this.Yc)},Ft.prototype.commitLayers=function(){},Ft.prototype.commitLinks=function(){for(var e,t=this.network.edges.iterator;t.next();)null!==(e=t.value.link)&&(e.jh(),e.Aj(),e.pf());for(t.reset();t.next();)null!==(e=t.value.link)&&e.mg();for(t.reset();t.next();){var n=t.value;if(null!==(e=n.link)){e.jh();var i=e,l=i.fromNode,u=i.toNode,h=i.fromPort,f=i.toPort;if(null!==l){var p=l.findVisibleNode();null!==p&&p!==l&&(l=p,h=p.port)}null!==u&&null!==(p=u.findVisibleNode())&&p!==u&&(u=p,f=p.port);var g=e.computeSpot(!0,h);p=e.computeSpot(!1,f);var m=n.fromVertex,v=n.toVertex;if(n.valid){if(e.curve===Ni&&4===e.pointsCount)if(m.column===v.column)n=e.getLinkPoint(l,h,g,!0,!1,u,f),h=e.getLinkPoint(u,f,p,!1,!1,l,h),n.v()||n.set(l.actualBounds.center),h.v()||h.set(u.actualBounds.center),e.Aj(),e.mf(n.x,n.y),e.mf((2*n.x+h.x)/3,(2*n.y+h.y)/3),e.mf((n.x+2*h.x)/3,(n.y+2*h.y)/3),e.mf(h.x,h.y);else{var x=!1,D=!1;if(null!==h&&g===Ne&&(x=!0),null!==f&&p===Ne&&(D=!0),x||D){var M=e.i(0).x;if(n=e.i(0).y,m=e.i(3).x,i=e.i(3).y,x){if(90===this.L||270===this.L){x=M;var T=(n+i)/2}else x=(M+m)/2,T=n;e.M(1,x,T),(g=e.getLinkPoint(l,h,g,!0,!1,u,f)).v()||g.set(l.actualBounds.center),e.M(0,g.x,g.y)}D&&(90===this.L||270===this.L?(g=m,n=(n+i)/2):(g=(M+m)/2,n=i),e.M(2,g,n),(l=e.getLinkPoint(u,f,p,!1,!1,l,h)).v()||l.set(u.actualBounds.center),e.M(3,l.x,l.y))}}e.pf()}else if(m.layer===v.layer)e.pf();else{if(x=D=!1,T=this.be,M=e.firstPickIndex+1,e.isOrthogonal){x=!0;var N=e.pointsCount;4<N&&e.points.removeRange(2,N-3)}else if(e.curve===Ni)D=!0,4<(N=e.pointsCount)&&e.points.removeRange(2,N-3),4===N&&(M=2);else{var I=g===Ne,k=p===Ne;2<(N=e.pointsCount)&&I&&k?e.points.removeRange(1,N-2):3<N&&I&&!k?e.points.removeRange(1,N-3):3<N&&!I&&k?e.points.removeRange(2,N-2):4<N&&!I&&!k&&e.points.removeRange(2,N-3)}if(n.rev){for(;null!==v&&m!==v;){var O=N=null;for(I=v.sourceEdges.iterator;I.next()&&((k=I.value).link!==n.link||(O=k.toVertex,null!==(N=k.fromVertex).node)););if(null===N)break;if(N!==m){I=e.i(M-1).x,k=e.i(M-1).y;var L=N.centerX,b=N.centerY;if(x)180===this.L||0===this.L?M===e.firstPickIndex+1?(e.l(M++,I,k),e.l(M++,I,b)):(null!==O?O.centerY:k)!==b&&(e.l(M++,O=this.Qa[N.layer-1]+this.Yc.x,k),e.l(M++,O,b)):M===e.firstPickIndex+1?(e.l(M++,I,k),e.l(M++,L,k)):(null!==O?O.centerX:I)!==L&&(e.l(M++,I,O=this.Qa[N.layer-1]+this.Yc.y),e.l(M++,L,O));else if(M===e.firstPickIndex+1){O=Math.max(10,this.ae[v.layer]);var U=Math.max(10,this.Cd[v.layer]);if(D)180===this.L?L<=v.bounds.x?(e.l(M++,(v=v.bounds.x)-O,b),e.l(M++,v,b),e.l(M++,v+U,b)):(e.l(M++,L-O,b),e.l(M++,L,b),e.l(M++,L+U,b)):90===this.L?b>=v.bounds.bottom?(e.l(M++,L,(v=v.bounds.y+v.bounds.height)+U),e.l(M++,L,v),e.l(M++,L,v-O)):(e.l(M++,L,b+U),e.l(M++,L,b),e.l(M++,L,b-O)):270===this.L?b<=v.bounds.y?(e.l(M++,L,(v=v.bounds.y)-O),e.l(M++,L,v),e.l(M++,L,v+U)):(e.l(M++,L,b-O),e.l(M++,L,b),e.l(M++,L,b+U)):0===this.L&&(L>=v.bounds.right?(e.l(M++,(v=v.bounds.x+v.bounds.width)+U,b),e.l(M++,v,b),e.l(M++,v-O,b)):(e.l(M++,L+U,b),e.l(M++,L,b),e.l(M++,L-O,b)));else{e.l(M++,I,k);var X=0;180===this.L||0===this.L?((180===this.L?L>=v.bounds.right:L<=v.bounds.x)&&(X=(0===this.L?-O:U)/2),e.l(M++,I+X,b)):((270===this.L?b>=v.bounds.bottom:b<=v.bounds.y)&&(X=(90===this.L?-O:U)/2),e.l(M++,L,k+X)),e.l(M++,L,b)}}else O=Math.max(10,this.ae[N.layer]),U=Math.max(10,this.Cd[N.layer]),D?180===this.L?(e.l(M++,L-O-T,b),e.l(M++,Math.min(L-O+T/2,L),b),e.l(M++,L,b),e.l(M++,L,b),e.l(M++,Math.max(L+U-T/2,L),b),e.l(M++,L+U+T,b)):90===this.L?(e.l(M++,L,b+U+T),e.l(M++,L,Math.max(b+U-T/2,b)),e.l(M++,L,b),e.l(M++,L,b),e.l(M++,L,Math.min(b-O+T/2,b)),e.l(M++,L,b-O-T)):270===this.L?(e.l(M++,L,b-O-T),e.l(M++,L,Math.min(b-O+T/2,b)),e.l(M++,L,b),e.l(M++,L,b),e.l(M++,L,Math.max(b+U-T/2,b)),e.l(M++,L,b+U+T)):(e.l(M++,L+U+T,b),e.l(M++,Math.max(L+U-T/2,L),b),e.l(M++,L,b),e.l(M++,L,b),e.l(M++,Math.min(L-O+T/2,L),b),e.l(M++,L-O-T,b)):e.l(M++,L,b)}v=N}(null===f||g!==Ne||x)&&(I=e.i(M-1).x,k=e.i(M-1).y,L=e.i(M).x,b=e.i(M).y,x?(T=this.Cd[m.layer],180===this.L||0===this.L?((x=k)>=m.bounds.y&&x<=m.bounds.bottom&&(180===this.L?L>=m.bounds.x:L<=m.bounds.right)&&(x=x<m.bounds.y+m.bounds.height/2?m.bounds.y-this.gc/2:m.bounds.bottom+this.gc/2,e.l(M++,v=m.centerX+(180===this.L?-T:T),k),e.l(M++,v,x)),e.l(M++,L,x)):((x=I)>=m.bounds.x&&x<=m.bounds.right&&(270===this.L?b>=m.bounds.y:b<=m.bounds.bottom)&&(x=x<m.bounds.x+m.bounds.width/2?m.bounds.x-this.gc/2:m.bounds.right+this.gc/2,e.l(M++,I,v=m.centerY+(270===this.L?-T:T)),e.l(M++,x,v)),e.l(M++,x,b)),e.l(M++,L,b)):D?(O=Math.max(10,this.ae[m.layer]),U=Math.max(10,this.Cd[m.layer]),180===this.L&&L>=m.bounds.x?(e.M(M-2,v=m.bounds.x+m.bounds.width,k),e.M(M-1,v+U,k)):90===this.L&&b<=m.bounds.bottom?(e.M(M-2,I,v=m.bounds.y),e.M(M-1,I,v-O)):270===this.L&&b>=m.bounds.y?(e.M(M-2,I,v=m.bounds.y+m.bounds.height),e.M(M-1,I,v+U)):0===this.L&&L<=m.bounds.right&&(e.M(M-2,v=m.bounds.x,k),e.M(M-1,v-O,k))):(O=Math.max(10,this.ae[m.layer]),U=Math.max(10,this.Cd[m.layer]),x=0,180===this.L||0===this.L?((180===this.L?L<=m.bounds.x:L>=m.bounds.right)&&(x=(0===this.L?U:-O)/2),e.l(M++,L+x,k)):((270===this.L?b<=m.bounds.y:b>=m.bounds.bottom)&&(x=(90===this.L?U:-O)/2),e.l(M++,I,b+x)),e.l(M++,L,b)))}else{for(;null!==m&&m!==v;){for(O=N=null,m=m.destinationEdges.iterator;m.next()&&((I=m.value).link!==n.link||(null!==(O=I.fromVertex).node&&(O=null),null!==(N=I.toVertex).node)););if(null===N)break;N!==v&&(I=e.i(M-1).x,k=e.i(M-1).y,L=N.centerX,b=N.centerY,x?180===this.L||0===this.L?(null!==O?O.centerY:k)!==b&&(O=this.Qa[N.layer]+this.Yc.x,M===e.firstPickIndex+1&&(O=0===this.L?Math.max(O,I):Math.min(O,I)),e.l(M++,O,k),e.l(M++,O,b)):(null!==O?O.centerX:I)!==L&&(O=this.Qa[N.layer]+this.Yc.y,M===e.firstPickIndex+1&&(O=90===this.L?Math.max(O,k):Math.min(O,k)),e.l(M++,I,O),e.l(M++,L,O)):(O=Math.max(10,this.ae[N.layer]),U=Math.max(10,this.Cd[N.layer]),D?180===this.L?(e.l(M++,L+U+T,b),e.l(M++,Math.max(L+U-T/2,L),b),e.l(M++,L,b),e.l(M++,L,b),e.l(M++,Math.min(L-O+T/2,L),b),e.l(M++,L-O-T,b)):90===this.L?(e.l(M++,L,b-O-T),e.l(M++,L,Math.min(b-O+T/2,b)),e.l(M++,L,b),e.l(M++,L,b),e.l(M++,L,Math.max(b+U-T/2,b)),e.l(M++,L,b+U+T)):270===this.L?(e.l(M++,L,b+U+T),e.l(M++,L,Math.max(b+U-T/2,b)),e.l(M++,L,b),e.l(M++,L,b),e.l(M++,L,Math.min(b-O+T/2,b)),e.l(M++,L,b-O-T)):(e.l(M++,L-O-T,b),e.l(M++,Math.min(L-O+T/2,L),b),e.l(M++,L,b),e.l(M++,L,b),e.l(M++,Math.max(L+U-T/2,L),b),e.l(M++,L+U+T,b)):180===this.L?(e.l(M++,L+U,b),e.l(M++,L-O,b)):90===this.L?(e.l(M++,L,b-O),e.l(M++,L,b+U)):270===this.L?(e.l(M++,L,b+U),e.l(M++,L,b-O)):(e.l(M++,L-O,b),e.l(M++,L+U,b)))),m=N}x&&(I=e.i(M-1).x,k=e.i(M-1).y,L=e.i(M).x,b=e.i(M).y,180===this.L||0===this.L?k!==b&&(O=0===this.L?Math.min(Math.max((L+I)/2,this.Qa[v.layer]+this.Yc.x),L):Math.max(Math.min((L+I)/2,this.Qa[v.layer]+this.Yc.x),L),e.l(M++,O,k),e.l(M++,O,b)):I!==L&&(O=90===this.L?Math.min(Math.max((b+k)/2,this.Qa[v.layer]+this.Yc.y),b):Math.max(Math.min((b+k)/2,this.Qa[v.layer]+this.Yc.y),b),e.l(M++,I,O),e.l(M++,L,O)))}null!==i&&D&&(null!==h&&(g===Ne&&(g=e.i(0),i=e.i(2),g.C(i)||e.M(1,(g.x+i.x)/2,(g.y+i.y)/2)),(g=e.getLinkPoint(l,h,Ne,!0,!1,u,f)).v()||g.set(l.actualBounds.center),e.M(0,g.x,g.y)),null!==f&&(p===Ne&&(p=e.i(e.pointsCount-1),g=e.i(e.pointsCount-3),p.C(g)||e.M(e.pointsCount-2,(p.x+g.x)/2,(p.y+g.y)/2)),(l=e.getLinkPoint(u,f,Ne,!1,!1,l,h)).v()||l.set(u.actualBounds.center),e.M(e.pointsCount-1,l.x,l.y))),e.pf(),n.commit()}}}this.avoidOrthogonalOverlaps()},Ft.prototype.avoidOrthogonalOverlaps=function(){if(!(0>=this.linkSpacing)){for(var t=new q,e=this.network.edges.iterator;e.next();){var n=e.value.link;null!==n&&n.isOrthogonal&&!t.contains(n)&&t.add(n)}if(0<t.count)if(90===this.L||270===this.L){for(e=0,n=[],t=t.iterator;t.next();){var i=t.value;if(null!==i&&i.isOrthogonal)for(var l=2;l<i.pointsCount-3;l++){var u=i.i(l),h=i.i(l+1);if(this.B(u.y,h.y)&&!this.B(u.x,h.x)){var f=new Vo;f.layer=Math.floor(u.y/2);var p=i.i(0),g=i.i(i.pointsCount-1);if(f.first=p.x*p.x+p.y,f.fc=g.x*g.x+g.y,f.ld=Math.min(u.x,h.x),f.Bc=Math.max(u.x,h.x),f.index=l,f.link=i,l+2<i.pointsCount){p=i.i(l-1),g=i.i(l+2);var m=0;p.y<u.y?m=g.y<u.y?3:u.x<h.x?2:1:p.y>u.y&&(m=g.y>u.y?0:h.x<u.x?2:1),f.j=m}n.push(f)}}}if(1<n.length)for(n.sort(this.Cx),t=0;t<n.length;){for(u=n[t].layer,i=t+1;i<n.length&&n[i].layer===u;)i++;if(1<i-t)for(u=t;u<i;){for(h=n[u].Bc,l=t+1;l<i&&n[l].ld<h;)h=Math.max(h,n[l].Bc),l++;if(1<(h=l-u)){for(this.ri(n,this.js,u,u+h),m=1,f=n[u].fc,p=u;p<l;p++)(g=n[p]).fc!==f&&(m++,f=g.fc);this.ri(n,this.Bx,u,u+h);var v=1;for(f=n[u].first,p=u;p<l;p++)(g=n[p]).first!==f&&(v++,f=g.first);for(p=!0,g=v,m<v?(p=!1,g=m,f=n[u].fc,this.ri(n,this.js,u,u+h)):f=n[u].first,m=0,v=u;v<l;v++){var x=n[v];(p?x.first:x.fc)!==f&&(m++,f=p?x.first:x.fc);var D=x.link;u=D.i(x.index),h=D.i(x.index+1);var M=this.linkSpacing*(m-(g-1)/2);e++,D.jh(),D.M(x.index,u.x,u.y+M),D.M(x.index+1,h.x,h.y+M),D.pf()}}u=l}t=i}}else{for(e=0,n=[],t=t.iterator;t.next();)if(null!==(i=t.value)&&i.isOrthogonal)for(l=2;l<i.pointsCount-3;l++)u=i.i(l),h=i.i(l+1),this.B(u.x,h.x)&&!this.B(u.y,h.y)&&((f=new Vo).layer=Math.floor(u.x/2),p=i.i(0),g=i.i(i.pointsCount-1),f.first=p.x+p.y*p.y,f.fc=g.x+g.y*g.y,f.ld=Math.min(u.y,h.y),f.Bc=Math.max(u.y,h.y),f.index=l,f.link=i,l+2<i.pointsCount&&(p=i.i(l-1),g=i.i(l+2),m=0,p.x<u.x?m=g.x<u.x?3:u.y<h.y?2:1:p.x>u.x&&(m=g.x>u.x?0:h.y<u.y?2:1),f.j=m),n.push(f));if(1<n.length)for(n.sort(this.Cx),t=0;t<n.length;){for(u=n[t].layer,i=t+1;i<n.length&&n[i].layer===u;)i++;if(1<i-t)for(u=t;u<i;){for(h=n[u].Bc,l=t+1;l<i&&n[l].ld<h;)h=Math.max(h,n[l].Bc),l++;if(1<(h=l-u)){for(this.ri(n,this.js,u,u+h),m=1,f=n[u].fc,p=u;p<l;p++)(g=n[p]).fc!==f&&(m++,f=g.fc);for(this.ri(n,this.Bx,u,u+h),v=1,f=n[u].first,p=u;p<l;p++)(g=n[p]).first!==f&&(v++,f=g.first);for(p=!0,g=v,m<v?(p=!1,g=m,f=n[u].fc,this.ri(n,this.js,u,u+h)):f=n[u].first,m=0,v=u;v<l;v++)x=n[v],(p?x.first:x.fc)!==f&&(m++,f=p?x.first:x.fc),u=(D=x.link).i(x.index),h=D.i(x.index+1),M=this.linkSpacing*(m-(g-1)/2),e++,D.jh(),D.M(x.index,u.x+M,u.y),D.M(x.index+1,h.x+M,h.y),D.pf()}u=l}t=i}}}},(_=Ft.prototype).Cx=function(t,e){return t instanceof Vo&&e instanceof Vo&&t!==e?t.layer<e.layer?-1:t.layer>e.layer?1:t.ld<e.ld?-1:t.ld>e.ld?1:t.Bc<e.Bc?-1:t.Bc>e.Bc?1:0:0},_.Bx=function(t,e){return t instanceof Vo&&e instanceof Vo&&t!==e?t.first<e.first?-1:t.first>e.first||t.j<e.j?1:t.j>e.j||t.ld<e.ld?-1:t.ld>e.ld?1:t.Bc<e.Bc?-1:t.Bc>e.Bc?1:0:0},_.js=function(t,e){return t instanceof Vo&&e instanceof Vo&&t!==e?t.fc<e.fc?-1:t.fc>e.fc||t.j<e.j?1:t.j>e.j||t.ld<e.ld?-1:t.ld>e.ld?1:t.Bc<e.Bc?-1:t.Bc>e.Bc?1:0:0},_.B=function(t,e){return-1<(t-=e)&&1>t},_.ri=function(t,e,n,i){var l=t.length,u=i-n;if(!(1>=u))if((0>n||n>=l-1)&&Y("not in range 0 <= from < length: "+n),2===u)0<e(i=t[n],l=t[n+1])&&(t[n]=l,t[n+1]=i);else if(0===n)if(i>=l)t.sort(e);else for((n=t.slice(0,i)).sort(e),e=0;e<i;e++)t[e]=n[e];else if(i>=l)for((i=t.slice(n)).sort(e),e=n;e<l;e++)t[e]=i[e-n];else for((l=t.slice(n,i)).sort(e),e=n;e<i;e++)t[e]=l[e-n]},Mt.Object.defineProperties(Ft.prototype,{layerSpacing:{get:function(){return this.be},set:function(t){this.be!==t&&0<=t&&(this.be=t,this.D())}},columnSpacing:{get:function(){return this.gc},set:function(t){this.gc!==t&&0<t&&(this.gc=t,this.D())}},direction:{get:function(){return this.L},set:function(t){this.L!==t&&(0===t||90===t||180===t||270===t?(this.L=t,this.D()):Y("LayeredDigraphLayout.direction must be 0, 90, 180, or 270"))}},cycleRemoveOption:{get:function(){return this.rk},set:function(t){this.rk===t||t!==Rh&&t!==jo&&t!==Ff||(this.rk=t,this.D())}},layeringOption:{get:function(){return this.Ok},set:function(t){this.Ok===t||t!==Rf&&t!==Je&&t!==ey||(this.Ok=t,this.D())}},initializeOption:{get:function(){return this.Fk},set:function(t){this.Fk===t||t!==ny&&t!==iy&&t!==ry||(this.Fk=t,this.D())}},iterations:{get:function(){return this.Xi},set:function(t){this.Xi!==t&&0<=t&&(this.Xi=t,this.D())}},aggressiveOption:{get:function(){return this.ek},set:function(t){this.ek===t||t!==oy&&t!==Ae&&t!==J0||(this.ek=t,this.D())}},packOption:{get:function(){return this.Tf},set:function(t){this.Tf!==t&&0<=t&&8>t&&(this.Tf=t,this.D())}},setsPortSpots:{get:function(){return this.ff},set:function(t){this.ff!==t&&(this.ff=t,this.D())}},linkSpacing:{get:function(){return this.jn},set:function(t){this.jn!==t&&0<=t&&(this.jn=t,this.D())}},maxLayer:{get:function(){return this.wa}},maxIndex:{get:function(){return this.Dh}},maxColumn:{get:function(){return this.Ja}},minIndexLayer:{get:function(){return this.Bg}},maxIndexLayer:{get:function(){return this.zc}}});var jo=new W(Ft,"CycleDepthFirst",0),Rh=new W(Ft,"CycleGreedy",1),Ff=new W(Ft,"CycleFromLayers",2),Rf=new W(Ft,"LayerOptimalLinkLength",0),Je=new W(Ft,"LayerLongestPathSink",1),ey=new W(Ft,"LayerLongestPathSource",2),ny=new W(Ft,"InitDepthFirstOut",0),iy=new W(Ft,"InitDepthFirstIn",1),ry=new W(Ft,"InitNaive",2),oy=new W(Ft,"AggressiveNone",0),Ae=new W(Ft,"AggressiveLess",1),J0=new W(Ft,"AggressiveMore",2),sy=8;function Vo(){this.index=this.Bc=this.ld=this.fc=this.first=this.layer=0,this.link=null,this.j=0}function jh(t){Xt.call(this,t)}function Aa(t){Xe.call(this,t),this.Wa=this.rg=this.Ah=-1,this.u=NaN,this.F=null,this.valid=!1,this.finish=this.gg=NaN,this.nf=0,this.Tj=this.Uj=null}function Pu(t){qn.call(this,t),this.j=this.ga=this.Ga=!1,this.W=this.u=NaN,this.F=this.m=0}function _t(t){Ot.call(this),this.Qb=new Z,this.En=fs,this.qd=xi,this.Yn=fy,this.aq=gy,this.Ev=[],this.od=!0,this.Nb=$l,this.Td=new dt(10,10).freeze();var e=new ku(this);this.V=new kr(e),this.Y=new kr(e),this.Xt=[],t&&Object.assign(this,t)}function H1(t){var e=new Z;for(t=t.iterator;t.next();){var n=t.value;n.initialized||e.add(n)}return e}function Z0(t,e){var n=999999,i=null;for(e=e.iterator;e.next();){var l=e.value;switch(t.qd){case xi:l.sourceEdges.count<n&&(n=l.sourceEdges.count,i=l);break;case Ar:l.destinationEdges.count<n&&(n=l.destinationEdges.count,i=l);break;default:Y("Unhandled path value "+t.qd.toString())}}return i}function ly(t,e){if(null!==e){switch(t.qd){case xi:if(0<e.destinationEdges.count){for(var n=new q,i=e.destinationVertexes;i.next();){var l=i.value;Q0(t,e,l)&&n.add(l)}0<n.count&&(e.children=n.Ea())}break;case Ar:if(0<e.sourceEdges.count){for(n=new q,i=e.sourceVertexes;i.next();)Q0(t,e,l=i.value)&&n.add(l);0<n.count&&(e.children=n.Ea())}break;default:Y("Unhandled path value"+t.qd.toString())}for(i=(n=e.children).length,l=0;l<i;l++){var u=n[l];u.initialized=!0,u.level=e.level+1,u.parent=e,t.Qb.remove(u)}for(e=0;e<i;e++)ly(t,n[e])}}function Q0(t,e,n){if(n.initialized){if(null===e)var i=!1;else{for(i=e.parent;null!==i&&i!==n;)i=i.parent;i=i===n}if(i||n.level>e.level)return!1;t.removeChild(n.parent,n)}return!0}function q0(t,e){if(null!==e){t.initializeTreeVertexValues(e),e.alignment===ds&&t.sortTreeVertexChildren(e);for(var n=0,i=e.childrenCount,l=0,u=e.children,h=u.length,f=0;f<h;f++){var p=u[f];q0(t,p),n+=p.descendantCount+1,i=Math.max(i,p.maxChildrenCount),l=Math.max(l,p.maxGenerationCount)}e.descendantCount=n,e.maxChildrenCount=i,e.maxGenerationCount=0<i?l+1:0}}function hD(t,e){if(null!==e){t.assignTreeVertexValues(e);for(var n=(e=e.children).length,i=0;i<n;i++)hD(t,e[i])}}function z1(t,e){if(null!==e){e.alignment!==ds&&t.sortTreeVertexChildren(e);for(var n=(e=e.children).length,i=0;i<n;i++)z1(t,e[i])}}function ka(t){return t===Gl||t===ds||t===zl||t===js}function jf(t){return t===Gl||t===ds}function tw(t){var e=t.parent;if(null!==e){var n=e.alignment;if(ka(n)){if(jf(n)){for(e=e.children,n=0;n<e.length&&t!==e[n];)n++;return n%2==0}if(n===zl)return!0}}return!1}function zi(t,e){if(0===e.childrenCount){var n=!1,i=0;null!==e.parent&&(i=e.parent.angle,n=ka(n=e.parent.alignment));var l=tw(e);e.S.h(0,0),e.Ca.h(e.width,e.height),null===e.parent||null===e.comments||(180!==i&&270!==i||n)&&!l?e.ka.h(0,0):180===i&&!n||(90===i||270===i)&&l?e.ka.h(e.width-2*e.focus.x,0):e.ka.h(0,e.height-2*e.focus.y)}else{n=90===(i=an(e))||270===i;for(var u=0,h=(l=e.children).length,f=0;f<h;f++){var p=l[f];u=Math.max(u,n?p.Ca.width:p.Ca.height)}var g=e.alignment,m=g===Bo,v=g===Qr;f=ka(g);var x=Math.max(0,e.breadthLimit);p=Vf(e);var D=e.nodeSpacing,M=Pr(e),T=m||v?0:M/2,N=e.rowSpacing,I=0;(m||v||e.Pl||e.Ql&&1===e.maxGenerationCount)&&(I=Math.max(0,e.rowIndent)),m=e.width;var k=e.height,O=0,L=0,b=0,U=0,X=0,nt=0,et=0,Q=0,G=0;if(f&&!jf(g)&&135<i&&l.reverse(),jf(g))if(1<h)for(var xt=0;xt<h;xt++){var ft=l[xt],At=ft.Ca;xt%2==0&&xt!==h-1&&(G=Math.max(G,(n?At.width:At.height)+Oa(ft)-D))}else 1===h&&(G=n?l[0].Ca.width:l[0].Ca.height);if(f)switch(g){case Gl:case ds:G=(L=135>i?ew(e,l,G,O,L):$1(e,l,G,O,L)).x,O=L.width,L=L.height;break;case zl:for(t=0;t<h;t++)T=(x=l[t]).Ca,b=0===et?0:N,n?(x.S.h(u-T.width,X+b),O=Math.max(O,T.width),L=Math.max(L,X+b+T.height),X+=b+T.height):(x.S.h(U+b,u-T.height),O=Math.max(O,U+b+T.width),L=Math.max(L,T.height),U+=b+T.width),et++;break;case js:for(u=0;u<h;u++)x=(t=l[u]).Ca,T=0===et?0:N,n?(t.S.h(D/2+e.focus.x,X+T),O=Math.max(O,x.width),L=Math.max(L,X+T+x.height),X+=T+x.height):(t.S.h(U+T,D/2+e.focus.y),O=Math.max(O,U+T+x.width),L=Math.max(L,x.height),U+=T+x.width),et++}else for(xt=0;xt<h;xt++){if(At=(ft=l[xt]).Ca,n){0<x&&0<et&&U+D+At.width>x&&(U<u&&hs(e,g,u-U,0,Q,xt-1),nt++,et=0,Q=xt,b=L,U=0,X=135<i?-L-N:L+N);var ie=0===et?T:D;hy(t,ft,0,X),ft.S.h(U+ie,X),O=Math.max(O,U+ie+At.width),L=Math.max(L,b+(0===nt?0:N)+At.height),U+=ie+At.width}else 0<x&&0<et&&X+D+At.height>x&&(X<u&&hs(e,g,0,u-X,Q,xt-1),nt++,et=0,Q=xt,b=O,X=0,U=135<i?-O-N:O+N),ie=0===et?T:D,hy(t,ft,U,0),ft.S.h(U,X+ie),L=Math.max(L,X+ie+At.height),O=Math.max(O,b+(0===nt?0:N)+At.width),X+=ie+At.height;et++}switch(0<nt&&(n?(L+=Math.max(0,p),U<O&&hs(e,g,O-U,0,Q,h-1),0<I&&(v||Vh(e,I,0,0,h-1),O+=I)):(O+=Math.max(0,p),X<L&&hs(e,g,0,L-X,Q,h-1),0<I&&(v||Vh(e,0,I,0,h-1),L+=I))),I=v=0,g){case Uf:n?v+=O/2-e.focus.x-M/2:I+=L/2-e.focus.y-M/2;break;case Hh:0<nt?n?v+=O/2-e.focus.x-M/2:I+=L/2-e.focus.y-M/2:n?v+=(g=l[0].S.x+l[0].ka.x)+(l[h-1].S.x+l[h-1].ka.x+2*l[h-1].focus.x-g)/2-e.focus.x-M/2:I+=(g=l[0].S.y+l[0].ka.y)+(l[h-1].S.y+l[h-1].ka.y+2*l[h-1].focus.y-g)/2-e.focus.y-M/2;break;case Bo:n?(v-=M,O+=M):(I-=M,L+=M);break;case Qr:n?(v+=O-e.width+M,O+=M):(I+=L-e.height+M,L+=M);break;case Gl:case ds:n?v+=1<h?G+D/2-e.focus.x:l[0].focus.x-e.focus.x+l[0].ka.x:I+=1<h?G+D/2-e.focus.y:l[0].focus.y-e.focus.y+l[0].ka.y;break;case zl:n?v+=O+D/2-e.focus.x:I+=L+D/2-e.focus.y;break;case js:break;default:Y("Unhandled alignment value "+g.toString())}for(M=0;M<h;M++)g=l[M],n?g.S.h(g.S.x+g.ka.x-v,g.S.y+(135<i?(f?-L:-g.Ca.height)+g.ka.y-p:k+p+g.ka.y)):g.S.h(g.S.x+(135<i?(f?-O:-g.Ca.width)+g.ka.x-p:m+p+g.ka.x),g.S.y+g.ka.y-I);n?(O=nw(e,O,v),0>v&&(v=0),135<i&&(I+=L+p),L=Math.max(Math.max(L,k),L+k+p)):(135<i&&(v+=O+p),O=Math.max(Math.max(O,m),O+m+p),L=ay(e,L,I),0>I&&(I=0)),e.ka.h(v,I),e.Ca.h(O,L)}}function ew(t,e,n,i,l){var u=e.length;if(0===u)return new B(n,0,i,l);if(1===u)return new B(n,0,i=(t=e[0]).Ca.width,l=t.Ca.height);for(var h=t.nodeSpacing,f=t.rowSpacing,p=90===an(t),g=0,m=0,v=0,x=0;x<u;x++)if(!(x%2!=0||1<u&&x===u-1)){var D=e[x],M=D.Ca,T=0===g?0:f;if(p){var N=Oa(D)-h;D.S.h(n-(M.width+N),v+T),i=Math.max(i,M.width+N),l=Math.max(l,v+T+M.height),v+=T+M.height}else N=Oa(D)-h,D.S.h(m+T,n-(M.height+N)),l=Math.max(l,M.height+N),i=Math.max(i,m+T+M.width),m+=T+M.width;g++}for(g=0,D=m,x=v,p?(m=n+h,v=0):(m=0,v=n+h),M=0;M<u;M++)if(M%2!=0){N=(T=e[M]).Ca;var I=0===g?0:f;if(p){var k=Oa(T)-h;T.S.h(m+k,v+I),i=Math.max(i,m+N.width+k),l=Math.max(l,v+I+N.height),v+=I+N.height}else k=Oa(T)-h,T.S.h(m+I,v+k),i=Math.max(i,m+I+N.width),l=Math.max(l,v+N.height+k),m+=I+N.width;g++}return 1<u&&u%2==1&&(u=(e=e[u-1]).Ca,f=null===e.parent?0:e.parent.rowSpacing,p?(e.S.h(n+h/2-e.focus.x-e.ka.x,l+f),p=n+h/2-e.focus.x-e.ka.x,i=Math.max(i,p+u.width),0>p&&(i-=p),l=Math.max(l,Math.max(x,v)+f+u.height),0>e.S.x&&(n=bp(t,e.S.x,!1,n,h))):(e.S.h(i+f,n+h/2-e.focus.y-e.ka.y),i=Math.max(i,Math.max(D,m)+f+u.width),v=n+h/2-e.focus.y-e.ka.y,l=Math.max(l,v+u.height),0>v&&(l-=v),0>e.S.y&&(n=bp(t,e.S.y,!0,n,h)))),new B(n,0,i,l)}function $1(t,e,n,i,l){var u=e.length;if(0===u)return new B(n,0,i,l);if(1===u)return new B(n,0,i=(e=e[0]).Ca.width,l=e.Ca.height);for(var h=t.nodeSpacing,f=t.rowSpacing,p=270===an(t),g=0,m=0,v=0,x=0;x<u;x++)if(!(x%2!=0||1<u&&x===u-1)){var D=e[x],M=D.Ca,T=0===g?0:f;if(p){var N=Oa(D)-h;D.S.h(n-(M.width+N),v-=T+M.height),i=Math.max(i,M.width+N),l=Math.max(l,Math.abs(v))}else N=Oa(D)-h,D.S.h(m-=T+M.width,n-(M.height+N)),l=Math.max(l,M.height+N),i=Math.max(i,Math.abs(m));g++}for(g=0,D=m,x=v,p?(m=n+h,v=0):(m=0,v=n+h),M=0;M<u;M++)if(M%2!=0){N=(T=e[M]).Ca;var I=0===g?0:f;if(p){var k=Oa(T)-h;T.S.h(m+k,v-=I+N.height),i=Math.max(i,m+N.width+k),l=Math.max(l,Math.abs(v))}else k=Oa(T)-h,T.S.h(m-=I+N.width,v+k),l=Math.max(l,v+N.height+k),i=Math.max(i,Math.abs(m));g++}for(1<u&&u%2==1&&(g=(f=e[u-1]).Ca,M=null===f.parent?0:f.parent.rowSpacing,p?(f.S.h(n+h/2-f.focus.x-f.ka.x,-l-g.height-M),m=n+h/2-f.focus.x-f.ka.x,i=Math.max(i,m+g.width),0>m&&(i-=m),l=Math.max(l,Math.abs(Math.min(x,v))+M+g.height),0>f.S.x&&(n=bp(t,f.S.x,!1,n,h))):(f.S.h(-i-g.width-M,n+h/2-f.focus.y-f.ka.y),i=Math.max(i,Math.abs(Math.min(D,m))+M+g.width),v=n+h/2-f.focus.y-f.ka.y,l=Math.max(l,v+g.height),0>v&&(l-=v),0>f.S.y&&(n=bp(t,f.S.y,!0,n,h)))),t=0;t<u;t++)h=e[t],p?h.S.h(h.S.x,h.S.y+l):h.S.h(h.S.x+i,h.S.y);return new B(n,0,i,l)}function Oa(t){return null===t.parent?0:t.parent.nodeSpacing}function bp(t,e,n,i,l){for(var u=(t=t.children).length,h=0;h<u;h++)n?t[h].S.h(t[h].S.x,t[h].S.y-e):t[h].S.h(t[h].S.x-e,t[h].S.y);return e=t[u-1],Math.max(i,n?e.ka.y+e.focus.y-l/2:e.ka.x+e.focus.x-l/2)}function nw(t,e,n){switch(t.alignment){case Hh:case Uf:return n+t.width>e&&(e=n+t.width),0>n&&(e-=n),e;case Bo:return t.width>e?t.width:e;case Qr:return 2*t.focus.x>e?t.width:e+t.width-2*t.focus.x;case Gl:case ds:return Math.max(t.width,Math.max(e,n+t.width)-Math.min(0,n));case zl:return t.width-t.focus.x+t.nodeSpacing/2+e;case js:return Math.max(t.width,t.focus.x+t.nodeSpacing/2+e);default:return e}}function ay(t,e,n){switch(t.alignment){case Hh:case Uf:return n+t.height>e&&(e=n+t.height),0>n&&(e-=n),e;case Bo:return t.height>e?t.height:e;case Qr:return 2*t.focus.y>e?t.height:e+t.height-2*t.focus.y;case Gl:case ds:return Math.max(t.height,Math.max(e,n+t.height)-Math.min(0,n));case zl:return t.height-t.focus.y+t.nodeSpacing/2+e;case js:return Math.max(t.height,t.focus.y+t.nodeSpacing/2+e);default:return e}}function uy(t,e,n){switch(t){case Uf:case Hh:e/=2,n/=2;break;case Bo:n=e=0;break;case Qr:break;default:Y("Unhandled alignment value "+t.toString())}return new P(e,n)}function hs(t,e,n,i,l,u){Vh(t,(e=uy(e,n,i)).x,e.y,l,u)}function Vh(t,e,n,i,l){if(0!==e||0!==n)for(t=t.children;i<=l;i++){var u=t[i].S;u.x+=e,u.y+=n}}function hy(t,e,n,i){var l=e.parent;switch(t.qd){case xi:for(t=e.sourceEdges;t.next();)(e=t.value).fromVertex===l&&e.relativePoint.h(n,i);break;case Ar:for(t=e.destinationEdges;t.next();)(e=t.value).toVertex===l&&e.relativePoint.h(n,i);break;default:Y("Unhandled path value "+t.qd.toString())}}function Fp(t,e,n){for(var i=0;i<t.length;i++){var l=t[i];l.x+=e,l.y+=n}}function W1(t,e,n,i,l,u,h,f){var p=an(e),g=90===p||270===p,m=e.nodeSpacing;e=i;var v=l;i=u;var x=h,D=n.Bo,M=n.No;h=n.Ca;var T=g?Math.max(x,h.height):Math.max(i,h.width);if((null===D||p!==an(n))&&(D=Ai(t,2),M=Ai(t,2),g?(D[0].h(0,0),D[1].h(0,h.height),M[0].h(h.width,0),M[1].h(M[0].x,D[1].y)):(D[0].h(0,0),D[1].h(h.width,0),M[0].h(0,h.height),M[1].h(D[1].x,M[0].y))),g){if(x=9999999,!(null===v||2>v.length||null===D||2>D.length))for(l=n=0;n<v.length&&l<D.length;){var N=D[l];p=N.x,g=N.y,p+=i;var I=u=v[n];n+1<v.length&&(I=v[n+1]);var k=N;N=k.x,k=k.y,l+1<D.length&&(N=(k=D[l+1]).x,k=k.y,N+=i);var O=x;u.y===g?O=p-u.x:u.y>g&&u.y<k?O=p+(u.y-g)/(k-g)*(N-p)-u.x:g>u.y&&g<I.y&&(O=p-(u.x+(g-u.y)/(I.y-u.y)*(I.x-u.x))),O<x&&(x=O),I.y<=u.y?n++:k<=g?l++:(I.y<=k&&n++,k<=I.y&&l++)}if(x=i-x,n=D,l=x+=m,null===e||2>e.length||null===n||2>n.length)i=null;else{for(m=Ai(t,e.length+n.length),i=u=p=0;u<n.length&&n[u].y<e[0].y;)g=n[u++],m[i++].h(g.x+l,g.y);for(;p<e.length;)g=e[p++],m[i++].h(g.x,g.y);for(p=e[e.length-1].y;u<n.length&&n[u].y<=p;)u++;for(;u<n.length&&n[u].y>p;)g=n[u++],m[i++].h(g.x+l,g.y);for(n=Ai(t,i),p=0;p<i;p++)n[p].assign(m[p]);cs(t,m),i=n}if(u=M,p=x,null===v||2>v.length||null===u||2>u.length)l=null;else{for(m=Ai(t,v.length+u.length),l=g=n=0;n<v.length&&v[n].y<u[0].y;)I=v[n++],m[l++].h(I.x,I.y);for(;g<u.length;)I=u[g++],m[l++].h(I.x+p,I.y);for(u=u[u.length-1].y;n<v.length&&v[n].y<=u;)n++;for(;n<v.length&&v[n].y>u;)p=v[n++],m[l++].h(p.x,p.y);for(u=Ai(t,l),n=0;n<l;n++)u[n].assign(m[n]);cs(t,m),l=u}return u=Math.max(0,x)+h.width,h=T,cs(t,e),cs(t,D),cs(t,v),cs(t,M),f[0]=i,f[1]=l,new B(x,0,u,h)}if(i=9999999,!(null===v||2>v.length||null===D||2>D.length))for(l=n=0;n<v.length&&l<D.length;)p=(N=D[l]).x,g=N.y,g+=x,I=u=v[n],n+1<v.length&&(I=v[n+1]),N=(k=N).x,k=k.y,l+1<D.length&&(N=(k=D[l+1]).x,k=k.y,k+=x),O=i,u.x===p?O=g-u.y:u.x>p&&u.x<N?O=g+(u.x-p)/(N-p)*(k-g)-u.y:p>u.x&&p<I.x&&(O=g-(u.y+(p-u.x)/(I.x-u.x)*(I.y-u.y))),O<i&&(i=O),I.x<=u.x?n++:N<=p?l++:(I.x<=N&&n++,N<=I.x&&l++);if(x-=i,n=D,l=x+=m,null===e||2>e.length||null===n||2>n.length)i=null;else{for(m=Ai(t,e.length+n.length),i=u=p=0;u<n.length&&n[u].x<e[0].x;)g=n[u++],m[i++].h(g.x,g.y+l);for(;p<e.length;)g=e[p++],m[i++].h(g.x,g.y);for(p=e[e.length-1].x;u<n.length&&n[u].x<=p;)u++;for(;u<n.length&&n[u].x>p;)g=n[u++],m[i++].h(g.x,g.y+l);for(n=Ai(t,i),p=0;p<i;p++)n[p].assign(m[p]);cs(t,m),i=n}if(u=M,p=x,null===v||2>v.length||null===u||2>u.length)l=null;else{for(m=Ai(t,v.length+u.length),l=g=n=0;n<v.length&&v[n].x<u[0].x;)I=v[n++],m[l++].h(I.x,I.y);for(;g<u.length;)I=u[g++],m[l++].h(I.x,I.y+p);for(u=u[u.length-1].x;n<v.length&&v[n].x<=u;)n++;for(;n<v.length&&v[n].x>u;)p=v[n++],m[l++].h(p.x,p.y);for(u=Ai(t,l),n=0;n<l;n++)u[n].assign(m[n]);cs(t,m),l=u}return u=T,h=Math.max(0,x)+h.height,cs(t,e),cs(t,D),cs(t,v),cs(t,M),f[0]=i,f[1]=l,new B(x,0,u,h)}function Ai(t,e){if(void 0!==(t=t.Xt[e])&&void 0!==(t=t.pop()))return t;t=[];for(var n=0;n<e;n++)t[n]=new P;return t}function cs(t,e){var n=e.length,i=t.Xt[n];void 0===i&&(t.Xt[n]=i=[]),i.push(e)}function cy(t,e,n,i){if(null!==e){e.x=n,e.y=i;for(var l=(e=e.children).length,u=0;u<l;u++){var h=e[u];cy(t,h,n+h.S.x,i+h.S.y)}}}function Bh(t,e){if(null!==e){t.setPortSpots(e);for(var n=(e=e.children).length,i=0;i<n;i++)Bh(t,e[i])}}function an(t){return 45>=(t=t.angle)?0:135>=t?90:225>=t?180:315>=t?270:0}function Vf(t){var e=an(t);e=90===e||270===e;var n=t.layerSpacing;if(0<t.layerSpacingParentOverlap){var i=Math.min(1,t.layerSpacingParentOverlap);n-=e?t.height*i:t.width*i}return n<(e?-t.height:-t.width)&&(n=e?-t.height:-t.width),n}function Pr(t){var e=an(t),n=t.nodeIndent;if(0<t.nodeIndentPastParent){var i=Math.min(1,t.nodeIndentPastParent);n+=90===e||270===e?t.width*i:t.height*i}return Math.max(0,n)}Ft.className="LayeredDigraphLayout",Ft.CycleDepthFirst=jo,Ft.CycleGreedy=Rh,Ft.CycleFromLayers=Ff,Ft.LayerOptimalLinkLength=Rf,Ft.LayerLongestPathSink=Je,Ft.LayerLongestPathSource=ey,Ft.InitDepthFirstOut=ny,Ft.InitDepthFirstIn=iy,Ft.InitNaive=ry,Ft.AggressiveNone=oy,Ft.AggressiveLess=Ae,Ft.AggressiveMore=J0,Ft.PackNone=0,Ft.PackExpand=1,Ft.PackStraighten=2,Ft.PackMedian=4,Ft.PackAll=15,Vo.className="SegInfo",Ht(jh,Xt),jh.prototype.createVertex=function(){return new Aa(this)},jh.prototype.createEdge=function(){return new Pu(this)},jh.className="LayeredDigraphNetwork",Ht(Aa,Xe),Aa.prototype.serializeVertexProperties=function(t,e){Xe.prototype.serializeVertexProperties.call(this,t,e),t.layer=this.layer,t.column=this.column,t.index=this.index,t.component=this.component,t.near=this.near?pn(this.near):null,t.valid=this.valid,t.gg=this.gg,t.finish=this.finish,t.nf=this.nf,t.Uj=this.Uj,t.Tj=this.Tj},Aa.prototype.deserializeVertexProperties=function(t,e,n,i){Xe.prototype.deserializeVertexProperties.call(this,t,e,n,i),this.layer=t.layer,this.column=t.column,this.index=t.index,this.component=t.component,(e=e.get(t.near))&&(this.near=e),this.valid=t.valid,this.gg=t.gg,this.finish=t.finish,this.nf=t.nf,this.Uj=t.Uj,this.Tj=t.Tj},Mt.Object.defineProperties(Aa.prototype,{layer:{get:function(){return this.Ah},set:function(t){this.Ah!==t&&(this.Ah=t)}},column:{get:function(){return this.rg},set:function(t){this.rg!==t&&(this.rg=t)}},index:{get:function(){return this.Wa},set:function(t){this.Wa!==t&&(this.Wa=t)}},component:{get:function(){return this.u},set:function(t){this.u!==t&&(this.u=t)}},near:{get:function(){return this.F},set:function(t){this.F!==t&&(this.F=t)}}}),Aa.className="LayeredDigraphVertex",Ht(Pu,qn),Pu.prototype.serializeEdgeProperties=function(t,e){qn.prototype.serializeEdgeProperties.call(this,t,e),t.valid=this.valid,t.rev=this.rev,t.forest=this.forest,t.portFromPos=this.portFromPos,t.portToPos=this.portToPos,t.portFromColOffset=this.portFromColOffset,t.portToColOffset=this.portToColOffset},Pu.prototype.deserializeEdgeProperties=function(t,e,n,i){qn.prototype.deserializeEdgeProperties.call(this,t,e,n,i),this.valid=t.valid,this.rev=t.rev,this.forest=t.forest,this.portFromPos=t.portFromPos,this.portToPos=t.portToPos,this.portFromColOffset=t.portFromColOffset,this.portToColOffset=t.portToColOffset},Mt.Object.defineProperties(Pu.prototype,{fromVertex:{get:function(){return this.ad},set:function(t){this.ad!==t&&(this.ad=t)}},toVertex:{get:function(){return this.jd},set:function(t){this.jd!==t&&(this.jd=t)}},valid:{get:function(){return this.Ga},set:function(t){this.Ga!==t&&(this.Ga=t)}},rev:{get:function(){return this.ga},set:function(t){this.ga!==t&&(this.ga=t)}},forest:{get:function(){return this.j},set:function(t){this.j!==t&&(this.j=t)}},portFromPos:{get:function(){return this.u},set:function(t){this.u!==t&&(this.u=t)}},portToPos:{get:function(){return this.W},set:function(t){this.W!==t&&(this.W=t)}},portFromColOffset:{get:function(){return this.m},set:function(t){this.m!==t&&(this.m=t)}},portToColOffset:{get:function(){return this.F},set:function(t){this.F!==t&&(this.F=t)}}}),Pu.className="LayeredDigraphEdge",Ht(_t,Ot),_t.prototype.cloneProtected=function(t){Ot.prototype.cloneProtected.call(this,t),t.En=this.En,t.Yn=this.Yn,t.aq=this.aq,t.od=this.od,t.Nb=this.Nb,t.Td.assign(this.Td),t.V.copyInheritedPropertiesFrom(this.V),t.Y.copyInheritedPropertiesFrom(this.Y)},_t.prototype.ob=function(t){t.classType===_t?0===t.name.indexOf("Alignment")?this.alignment=t:0===t.name.indexOf("Arrangement")?this.arrangement=t:0===t.name.indexOf("Compaction")?this.compaction=t:0===t.name.indexOf("Path")?this.path=t:0===t.name.indexOf("Sorting")?this.sorting=t:0===t.name.indexOf("Style")?this.treeStyle=t:Y("Unknown enum value: "+t):Ot.prototype.ob.call(this,t)},_t.prototype.createNetwork=function(){return new ku(this)},_t.prototype.makeNetwork=function(t){function e(i){if(i instanceof J)return!i.isLinkLabel&&"Comment"!==i.category;if(i instanceof H){var l=i.fromNode;return null!==l&&!l.isLinkLabel&&"Comment"!==l.category&&!(null===(i=i.toNode)||i.isLinkLabel||"Comment"===i.category)}return!1}var n=this.createNetwork();return t instanceof V?(n.eg(t.nodes,!0,e),n.eg(t.links,!0,e)):n.eg(t instanceof yt?t.memberParts:t.iterator,!1,e),n},_t.prototype.doLayout=function(t){null===this.network&&(this.network=this.makeNetwork(t)),this.arrangement!==Up&&(this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin));var e=this.diagram;if(null===e&&t instanceof V&&(e=t),this.qd=this.path===fs&&null!==e?e.isTreePathToChildren?xi:Ar:this.path===fs?xi:this.path,0<this.network.vertexes.count){for(this.network.oo(),t=this.network.vertexes.iterator;t.next();)(e=t.value).initialized=!1,e.level=0,e.parent=null,e.children=[];if(0<this.Qb.count){for(t=new Z,e=this.Qb.iterator;e.next();){var n=e.value;n instanceof J?null!==(n=this.network.ei(n))&&t.add(n):n instanceof kr&&t.add(n)}this.Qb=t}for(0===this.Qb.count&&this.findRoots(),t=this.Qb.copy().iterator;t.next();)(e=t.value).initialized||(e.initialized=!0,ly(this,e));for(e=this.network.vertexes,t=null;0<(t=H1(e)).count;)null!==(e=Z0(this,t))&&this.Qb.add(e),e.initialized=!0,ly(this,e),e=t;for(t=this.Qb.iterator;t.next();)(e=t.value)instanceof kr&&q0(this,e);for(t=this.Qb.iterator;t.next();)(e=t.value)instanceof kr&&hD(this,e);for(t=this.Qb.iterator;t.next();)(e=t.value)instanceof kr&&z1(this,e);if(this.ju(),this.layerStyle===Hp){for(t=[],e=this.network.vertexes.iterator;e.next();){var i=(n=e.value).parent;null===i&&(i=n),i=0===i.angle||180===i.angle;var l=t[n.level];void 0===l&&(l=0),t[n.level]=Math.max(l,i?n.width:n.height)}for(e=0;e<t.length;e++)void 0===t[e]&&(t[e]=0);for(this.Ev=t,e=this.network.vertexes.iterator;e.next();)null===(i=(n=e.value).parent)&&(i=n),0===i.angle||180===i.angle?(180===i.angle&&(n.focusX+=t[n.level]-n.width),n.width=t[n.level]):(270===i.angle&&(n.focusY+=t[n.level]-n.height),n.height=t[n.level])}else if(this.layerStyle===my)for(t=this.network.vertexes.iterator;t.next();){for(n=0===(e=t.value).angle||180===e.angle,i=-1,l=0;l<e.children.length;l++){var u=e.children[l];i=Math.max(i,n?u.width:u.height)}if(0<=i)for(l=0;l<e.children.length;l++)u=e.children[l],n?(180===e.angle&&(u.focusX+=i-u.width),u.width=i):(270===e.angle&&(u.focusY+=i-u.height),u.height=i)}for(t=this.Qb.iterator;t.next();)(e=t.value)instanceof kr&&this.layoutTree(e);this.arrangeTrees(),this.updateParts()}this.network=null,this.Qb=new Z,this.isValidLayout=!0},_t.prototype.findRoots=function(){for(var t=this.network.vertexes,e=t.iterator;e.next();){var n=e.value;switch(this.qd){case xi:0===n.sourceEdges.count&&this.Qb.add(n);break;case Ar:0===n.destinationEdges.count&&this.Qb.add(n);break;default:Y("Unhandled path value "+this.qd.toString())}}0===this.Qb.count&&null!==(t=Z0(this,t))&&this.Qb.add(t)},_t.prototype.removeChild=function(t,e){if(null!==t&&null!==e){for(var n=t.children,i=0,l=0;l<n.length;l++)n[l]===e&&i++;if(0<i){i=Array(n.length-i);for(var u=l=0;u<n.length;u++)n[u]!==e&&(i[l++]=n[u]);t.children=i}}},_t.prototype.initializeTreeVertexValues=function(t){if(t.copyInheritedPropertiesFrom(function G1(t,e){switch(t.Yn){default:case fy:return null!==e.parent?e.parent:t.V;case py:return null===e.parent?t.V:null===e.parent.parent?t.Y:e.parent;case rr:return null!==e.parent?null!==e.parent.parent?e.parent.parent:t.Y:t.V;case dy:var n=!0;if(0===e.childrenCount)n=!1;else for(var i=e.children,l=i.length,u=0;u<l;u++)if(0<i[u].childrenCount){n=!1;break}return n&&null!==e.parent?t.Y:null!==e.parent?e.parent:t.V}}(this,t)),null!==t.parent&&t.parent.alignment===ds){for(var e=t.angle,n=t.parent.children,i=0;i<n.length&&t!==n[i];)i++;i%2==0?i!==n.length-1&&(e=90===e?180:180===e?270:270===e?180:270):e=90===e?0:180===e?90:270===e?0:90,t.angle=e}t.initialized=!0},_t.prototype.assignTreeVertexValues=function(){},_t.prototype.sortTreeVertexChildren=function(t){switch(t.sorting){case Uh:break;case Bf:t.children.reverse();break;case Rp:t.children.sort(t.comparer);break;case jp:t.children.sort(t.comparer),t.children.reverse();break;default:Y("Unhandled sorting value "+t.sorting.toString())}},_t.prototype.ju=function(){if(this.comments)for(var t=this.network.vertexes.iterator;t.next();)this.addComments(t.value)},_t.prototype.addComments=function(t){var e=t.angle,n=t.parent,i=0,l=!1;null!==n&&(i=n.angle,l=ka(l=n.alignment)),e=90===e||270===e,i=90===i||270===i,n=0===t.childrenCount;var u=0,h=0,f=0,p=t.commentSpacing;if(null!==t.node)for(var g=t.node.wu();g.next();){var m=g.value;"Comment"===m.category&&m.canLayout()&&(null===t.comments&&(t.comments=[]),t.comments.push(m),m.Za(),m=m.measuredBounds,e&&!n||!l&&!i&&n||l&&i&&n?(u=Math.max(u,m.width),h+=m.height+Math.abs(f)):(u+=m.width+Math.abs(f),h=Math.max(h,m.height)),f=p)}null!==t.comments&&(e&&!n||!l&&!i&&n||l&&i&&n?(u+=Math.abs(t.commentMargin),h=Math.max(0,h-t.height)):(h+=Math.abs(t.commentMargin),u=Math.max(0,u-t.width)),l=B.allocAt(0,0,t.bounds.width+u,t.bounds.height+h),t.bounds=l,B.free(l))},_t.prototype.layoutComments=function(t){if(null!==t.comments){var e=t.node.measuredBounds,n=t.parent,i=t.angle,l=0,u=!1;null!==n&&(l=n.angle,u=ka(u=n.alignment)),i=90===i||270===i,n=90===l||270===l;for(var h=0===t.childrenCount,f=tw(t),p=0,g=t.comments,m=g.length,v=P.alloc(),x=0;x<m;x++){var D=g[x],M=D.measuredBounds;if(i&&!h||!u&&!n&&h||u&&n&&h){if(135<l&&!u||n&&f)if(0<=t.commentMargin)for(v.h(t.bounds.x-t.commentMargin-M.width,t.bounds.y+p),D.move(v),D=D.Kd();D.next();){var T=D.value;T.fromSpot=Ri,T.toSpot=di}else for(v.h(t.bounds.x+2*t.focus.x-t.commentMargin,t.bounds.y+p),D.move(v),D=D.Kd();D.next();)(T=D.value).fromSpot=di,T.toSpot=Ri;else if(0<=t.commentMargin)for(v.h(t.bounds.x+2*t.focus.x+t.commentMargin,t.bounds.y+p),D.move(v),D=D.Kd();D.next();)(T=D.value).fromSpot=di,T.toSpot=Ri;else for(v.h(t.bounds.x+t.commentMargin-M.width,t.bounds.y+p),D.move(v),D=D.Kd();D.next();)(T=D.value).fromSpot=Ri,T.toSpot=di;p=0<=t.commentSpacing?p+(M.height+t.commentSpacing):p+(t.commentSpacing-M.height)}else{if(135<l&&!u||!n&&f)if(0<=t.commentMargin)for(v.h(t.bounds.x+p,t.bounds.y-t.commentMargin-M.height),D.move(v),D=D.Kd();D.next();)(T=D.value).fromSpot=dr,T.toSpot=pi;else for(v.h(t.bounds.x+p,t.bounds.y+2*t.focus.y-t.commentMargin),D.move(v),D=D.Kd();D.next();)(T=D.value).fromSpot=pi,T.toSpot=dr;else if(0<=t.commentMargin)for(v.h(t.bounds.x+p,t.bounds.y+2*t.focus.y+t.commentMargin),D.move(v),D=D.Kd();D.next();)(T=D.value).fromSpot=pi,T.toSpot=dr;else for(v.h(t.bounds.x+p,t.bounds.y+t.commentMargin-M.height),D.move(v),D=D.Kd();D.next();)(T=D.value).fromSpot=dr,T.toSpot=pi;p=0<=t.commentSpacing?p+(M.width+t.commentSpacing):p+(t.commentSpacing-M.width)}}if(P.free(v),e=p-t.commentSpacing-(i?e.height:e.width),this.qd===xi)for(t=t.destinationEdges;t.next();)null===(l=t.value.link)||l.isAvoiding||(l.fromEndSegmentLength=0<e?e:NaN);else for(t=t.sourceEdges;t.next();)null===(l=t.value.link)||l.isAvoiding||(l.toEndSegmentLength=0<e?e:NaN)}},_t.prototype.layoutTree=function(t){if(null!==t){for(var e=t.children,n=e.length,i=0;i<n;i++)this.layoutTree(e[i]);switch(t.compaction){case Vp:zi(this,t);break;case Au:if(t.alignment===ds)zi(this,t);else if(0===t.childrenCount)n=!1,e=0,null!==(i=t.parent)&&(e=i.angle,n=ka(n=i.alignment)),i=tw(t),t.S.h(0,0),t.Ca.h(t.width,t.height),null===t.parent||null===t.comments||(180!==e&&270!==e||n)&&!i?t.ka.h(0,0):180===e&&!n||(90===e||270===e)&&i?t.ka.h(t.width-2*t.focus.x,0):t.ka.h(0,t.height-2*t.focus.y),t.Bo=null,t.No=null;else{var l=an(t);e=90===l||270===l;var u=0,h=t.children,f=h.length;for(n=0;n<f;n++)i=h[n],u=Math.max(u,e?i.Ca.width:i.Ca.height);var p=t.alignment,g=p===Qr,m=ka(p),v=Math.max(0,t.breadthLimit);n=Vf(t);var x=t.nodeSpacing,D=Pr(t),M=t.rowSpacing,T=0;(p===Bo||g||t.Pl||t.Ql&&1===t.maxGenerationCount)&&(T=Math.max(0,t.rowIndent)),i=t.width;var N=t.height,I=0,k=0,O=0,L=null,b=null,U=0,X=0,nt=0,et=0,Q=0,G=0,xt=0,ft=0;if(m&&!jf(p)&&135<l&&h.reverse(),jf(p))if(1<f)for(var At=0;At<f;At++)At%2==0&&At!==f-1&&(ft=Math.max(ft,e?h[At].Ca.width:h[At].Ca.height));else 1===f&&(ft=e?h[0].Ca.width:h[0].Ca.height);if(m){switch(p){case Gl:ft=(k=135>l?ew(t,h,ft,I,k):$1(t,h,ft,I,k)).x,I=k.width,k=k.height;break;case zl:for(L=0;L<f;L++)v=(b=h[L]).Ca,O=0===G?0:M,e?(b.S.h(u-v.width,et+O),I=Math.max(I,v.width),k=Math.max(k,et+O+v.height),et+=O+v.height):(b.S.h(nt+O,u-v.height),I=Math.max(I,nt+O+v.width),k=Math.max(k,v.height),nt+=O+v.width),G++;break;case js:for(L=0;L<f;L++)u=(b=h[L]).Ca,v=0===G?0:M,e?(b.S.h(x/2+t.focus.x,et+v),I=Math.max(I,u.width),k=Math.max(k,et+v+u.height),et+=v+u.height):(b.S.h(nt+v,x/2+t.focus.y),I=Math.max(I,nt+v+u.width),k=Math.max(k,u.height),nt+=v+u.width),G++}L=Ai(this,2),b=Ai(this,2),e?(L[0].h(0,0),L[1].h(0,k),b[0].h(I,0)):(L[0].h(0,0),L[1].h(I,0),b[0].h(0,k)),b[1].h(I,k)}else for(At=0;At<f;At++){var ie=h[At],pe=ie.Ca;if(e){0<v&&0<G&&nt+x+pe.width>v&&(nt<u&&hs(t,p,u-nt,0,xt,At-1),Q++,G=0,xt=At,O=k,nt=0,et=135<l?-k-M:k+M),hy(this,ie,0,et);var mn=0;if(0===G)b=ie.No,U=pe.width,X=pe.height,(null===(L=ie.Bo)||null===b||l!==an(ie))&&(L=Ai(this,2),b=Ai(this,2),L[0].h(0,0),L[1].h(0,X),b[0].h(U,0),b[1].h(U,X));else{var ei=oe();mn=(X=W1(this,t,ie,L,b,U,X,ei)).x,L=ei[0],b=ei[1],U=X.width,X=X.height,Nt(ei),nt<pe.width&&0>mn&&(Vh(t,-mn,0,xt,At-1),Fp(L,-mn,0),Fp(b,-mn,0),mn=0)}ie.S.h(mn,et),I=Math.max(I,U),k=Math.max(k,O+(0===Q?0:M)+pe.height),nt=U}else 0<v&&0<G&&et+x+pe.height>v&&(et<u&&hs(t,p,0,u-et,xt,At-1),Q++,G=0,xt=At,O=I,et=0,nt=135<l?-I-M:I+M),hy(this,ie,nt,0),mn=0,0===G?(b=ie.No,U=pe.width,X=pe.height,(null===(L=ie.Bo)||null===b||l!==an(ie))&&(L=Ai(this,2),b=Ai(this,2),L[0].h(0,0),L[1].h(U,0),b[0].h(0,X),b[1].h(U,X))):(mn=(X=W1(this,t,ie,L,b,U,X,ei=oe())).x,L=ei[0],b=ei[1],U=X.width,X=X.height,Nt(ei),et<pe.height&&0>mn&&(Vh(t,0,-mn,xt,At-1),Fp(L,0,-mn),Fp(b,0,-mn),mn=0)),ie.S.h(nt,mn),k=Math.max(k,X),I=Math.max(I,O+(0===Q?0:M)+pe.width),et=X;G++}switch(0<Q&&(e?(k+=Math.max(0,n),nt<I&&hs(t,p,I-nt,0,xt,f-1),0<T&&(g||Vh(t,T,0,0,f-1),I+=T)):(I+=Math.max(0,n),et<k&&hs(t,p,0,k-et,xt,f-1),0<T&&(g||Vh(t,0,T,0,f-1),k+=T))),T=g=0,p){case Uf:e?g+=I/2-t.focus.x-D/2:T+=k/2-t.focus.y-D/2;break;case Hh:0<Q?e?g+=I/2-t.focus.x-D/2:T+=k/2-t.focus.y-D/2:e?g+=(ft=h[0].S.x+h[0].ka.x)+(h[f-1].S.x+h[f-1].ka.x+2*h[f-1].focus.x-ft)/2-t.focus.x-D/2:T+=(ft=h[0].S.y+h[0].ka.y)+(h[f-1].S.y+h[f-1].ka.y+2*h[f-1].focus.y-ft)/2-t.focus.y-D/2;break;case Bo:e?(g-=D,I+=D):(T-=D,k+=D);break;case Qr:e?(g+=I-t.width+D,I+=D):(T+=k-t.height+D,k+=D);break;case Gl:e?g+=1<f?ft+x/2-t.focus.x:h[0].focus.x-t.focus.x+h[0].ka.x:T+=1<f?ft+x/2-t.focus.y:h[0].focus.y-t.focus.y+h[0].ka.y;break;case zl:e?g+=I+x/2-t.focus.x:T+=k+x/2-t.focus.y;break;case js:break;default:Y("Unhandled alignment value "+p.toString())}for(D=0;D<f;D++)ft=h[D],e?ft.S.h(ft.S.x+ft.ka.x-g,ft.S.y+(135<l?(m?-k:-ft.Ca.height)+ft.ka.y-n:N+n+ft.ka.y)):ft.S.h(ft.S.x+(135<l?(m?-I:-ft.Ca.width)+ft.ka.x-n:i+n+ft.ka.x),ft.S.y+ft.ka.y-T);if(f=h=0,m?e?(I=nw(t,I,g),0>g&&(g=0),135<l&&(T+=k+n),k+=N+n,p===js&&(h+=x/2+t.focus.x),f+=N+n):(135<l&&(g+=I+n),I+=i+n,k=ay(t,k,T),0>T&&(T=0),p===js&&(f+=x/2+t.focus.y),h+=i+n):e?(null===t.comments?i>I&&(h=(I=uy(p,i-I,0)).x,f=I.y,I=i,g=0):I=nw(t,I,g),0>g&&(h-=g,g=0),135<l&&(T+=k+n),k=Math.max(Math.max(k,N),k+N+n),f+=N+n):(135<l&&(g+=I+n),I=Math.max(Math.max(I,i),I+i+n),null===t.comments?N>k&&(h=(k=uy(p,0,N-k)).x,f=k.y,k=N,T=0):k=ay(t,k,T),0>T&&(f-=T,T=0),h+=i+n),0<Q)l=Ai(this,4),Q=Ai(this,4),e?(l[2].h(0,N+n),l[3].h(l[2].x,k),Q[2].h(I,l[2].y),Q[3].h(Q[2].x,l[3].y)):(l[2].h(i+n,0),l[3].h(I,l[2].y),Q[2].h(l[2].x,k),Q[3].h(l[3].x,Q[2].y));else{for(l=Ai(this,L.length+2),Q=Ai(this,b.length+2),p=0;p<L.length;p++)l[p+2].h((m=L[p]).x+h,m.y+f);for(p=0;p<b.length;p++)Q[p+2].h((m=b[p]).x+h,m.y+f)}e?(l[0].h(g,0),l[1].h(l[0].x,N),l[2].y<l[1].y&&(l[2].x>l[0].x?l[2].assign(l[1]):l[1].assign(l[2])),l[3].y<l[2].y&&(l[3].x>l[0].x?l[3].assign(l[2]):l[2].assign(l[3])),Q[0].h(g+i,0),Q[1].h(Q[0].x,N),Q[2].y<Q[1].y&&(Q[2].x<Q[0].x?Q[2].assign(Q[1]):Q[1].assign(Q[2])),Q[3].y<Q[2].y&&(Q[3].x<Q[0].x?Q[3].assign(Q[2]):Q[2].assign(Q[3])),l[2].y-=n/2,Q[2].y-=n/2):(l[0].h(0,T),l[1].h(i,l[0].y),l[2].x<l[1].x&&(l[2].y>l[0].y?l[2].assign(l[1]):l[1].assign(l[2])),l[3].x<l[2].x&&(l[3].y>l[0].y?l[3].assign(l[2]):l[2].assign(l[3])),Q[0].h(0,T+N),Q[1].h(i,Q[0].y),Q[2].x<Q[1].x&&(Q[2].y<Q[0].y?Q[2].assign(Q[1]):Q[1].assign(Q[2])),Q[3].x<Q[2].x&&(Q[3].y<Q[0].y?Q[3].assign(Q[2]):Q[2].assign(Q[3])),l[2].x-=n/2,Q[2].x-=n/2),cs(this,L),cs(this,b),t.Bo=l,t.No=Q,t.ka.h(g,T),t.Ca.h(I,k)}break;default:Y("Unhandled compaction value "+t.compaction.toString())}}},_t.prototype.arrangeTrees=function(){if(this.Nb===Up)for(var t=this.Qb.iterator;t.next();){var e=t.value;if(e instanceof kr){var n=e.node;if(null!==n){var i=n.position;n=i.x,i=i.y,isFinite(n)||(n=0),isFinite(i)||(i=0),cy(this,e,n,i)}}}else{for(t=[],e=this.Qb.iterator;e.next();)(n=e.value)instanceof kr&&t.push(n);switch(this.sorting){case Uh:break;case Bf:t.reverse();break;case Rp:t.sort(this.comparer);break;case jp:t.sort(this.comparer),t.reverse();break;default:Y("Unhandled sorting value "+this.sorting.toString())}for(e=(n=this.arrangementOrigin).x,n=n.y,i=0;i<t.length;i++){var l=t[i];switch(cy(this,l,e+l.ka.x,n+l.ka.y),this.Nb){case $l:n+=l.Ca.height+this.Td.height;break;case Bp:e+=l.Ca.width+this.Td.width;break;default:Y("Unhandled arrangement value "+this.Nb.toString())}}}},_t.prototype.commitLayout=function(){this.ev(),this.commitNodes(),this.nu(),this.isRouting&&this.commitLinks()},_t.prototype.commitNodes=function(){for(var t=this.network.vertexes.iterator;t.next();)t.value.commit();for(t.reset();t.next();)this.layoutComments(t.value)},_t.prototype.nu=function(){if(this.layerStyle===Hp){for(var t=this.Ev,e=[],n=null,i=this.network.vertexes.iterator;i.next();){var l=i.value;null===n?n=l.bounds.copy():n.Xc(l.bounds);var u=e[l.level];u=void 0===u?Vf(l):Math.max(u,Vf(l)),e[l.level]=u}for(i=0;i<e.length;i++)void 0===e[i]&&(e[i]=0);if(90===this.angle||270===this.angle?(n.vc(this.nodeSpacing/2,this.layerSpacing),i=new P(-this.nodeSpacing/2,-this.layerSpacing/2)):(n.vc(this.layerSpacing,this.nodeSpacing/2),i=new P(-this.layerSpacing/2,-this.nodeSpacing/2)),l=[],n=90===this.angle||270===this.angle?n.width:n.height,u=0,180===this.angle||270===this.angle)for(var h=0;h<t.length;h++)u+=t[h]+e[h];for(h=0;h<t.length;h++){var f=t[h]+e[h];270===this.angle?l.push(new B(0,u-=f,n,f)):90===this.angle?(l.push(new B(0,u,n,f)),u+=f):180===this.angle?l.push(new B(u-=f,0,f,n)):(l.push(new B(u,0,f,n)),u+=f)}this.commitLayers(l,i)}},_t.prototype.commitLayers=function(){},_t.prototype.commitLinks=function(){for(var t=this.network.edges.iterator;t.next();)t.value.commit()},_t.prototype.ev=function(){for(var t=this.Qb.iterator;t.next();){var e=t.value;e instanceof kr&&Bh(this,e)}},_t.prototype.setPortSpots=function(t){var e=t.alignment;if(ka(e)){var n=this.qd===xi,i=an(t);switch(i){case 0:var l=di;break;case 90:l=pi;break;case 180:l=Ri;break;default:l=dr}var u=t.children,h=u.length;switch(e){case Gl:case ds:for(e=0;e<h;e++){var f=u[e];if(null!==(f=(n?f.sourceEdges:f.destinationEdges).first())&&null!==(f=f.link)){var p=90===i||270===i?Ri:dr;if(1===h||e===h-1&&h%2==1)switch(i){case 0:p=Ri;break;case 90:p=dr;break;case 180:p=di;break;default:p=pi}else e%2==0&&(p=90===i||270===i?di:pi);n?(t.setsPortSpot&&(f.fromSpot=l),t.setsChildPortSpot&&(f.toSpot=p)):(t.setsPortSpot&&(f.fromSpot=p),t.setsChildPortSpot&&(f.toSpot=l))}}break;case zl:for(i=90===i||270===i?di:pi,u=n?t.destinationEdges:t.sourceEdges;u.next();)null!==(h=u.value.link)&&(n?(t.setsPortSpot&&(h.fromSpot=l),t.setsChildPortSpot&&(h.toSpot=i)):(t.setsPortSpot&&(h.fromSpot=i),t.setsChildPortSpot&&(h.toSpot=l)));break;case js:for(i=90===i||270===i?Ri:dr,u=n?t.destinationEdges:t.sourceEdges;u.next();)null!==(h=u.value.link)&&(n?(t.setsPortSpot&&(h.fromSpot=l),t.setsChildPortSpot&&(h.toSpot=i)):(t.setsPortSpot&&(h.fromSpot=i),t.setsChildPortSpot&&(h.toSpot=l)))}}else if(n=an(t),this.qd===xi){for(l=t.destinationEdges;l.next();)if(null!==(i=l.value.link)){if(t.setsPortSpot)if(t.portSpot.Sb())switch(n){case 0:i.fromSpot=di;break;case 90:i.fromSpot=pi;break;case 180:i.fromSpot=Ri;break;default:i.fromSpot=dr}else i.fromSpot=t.portSpot;if(t.setsChildPortSpot)if(t.childPortSpot.Sb())switch(n){case 0:i.toSpot=Ri;break;case 90:i.toSpot=dr;break;case 180:i.toSpot=di;break;default:i.toSpot=pi}else i.toSpot=t.childPortSpot}}else for(l=t.sourceEdges;l.next();)if(null!==(i=l.value.link)){if(t.setsPortSpot)if(t.portSpot.Sb())switch(n){case 0:i.toSpot=di;break;case 90:i.toSpot=pi;break;case 180:i.toSpot=Ri;break;default:i.toSpot=dr}else i.toSpot=t.portSpot;if(t.setsChildPortSpot)if(t.childPortSpot.Sb())switch(n){case 0:i.fromSpot=Ri;break;case 90:i.fromSpot=dr;break;case 180:i.fromSpot=di;break;default:i.fromSpot=pi}else i.fromSpot=t.childPortSpot}},Mt.Object.defineProperties(_t.prototype,{roots:{get:function(){return this.Qb},set:function(t){this.Qb!==t&&(this.Qb=t,this.D())}},path:{get:function(){return this.En},set:function(t){this.En!==t&&(this.En=t,this.D())}},treeStyle:{get:function(){return this.Yn},set:function(t){this.Nb===t||t!==fy&&t!==rr&&t!==dy&&t!==py||(this.Yn=t,this.D())}},layerStyle:{get:function(){return this.aq},set:function(t){this.Nb===t||t!==gy&&t!==my&&t!==Hp||(this.aq=t,this.D())}},comments:{get:function(){return this.od},set:function(t){this.od!==t&&(this.od=t,this.D())}},arrangement:{get:function(){return this.Nb},set:function(t){this.Nb===t||t!==$l&&t!==Bp&&t!==Up||(this.Nb=t,this.D())}},arrangementSpacing:{get:function(){return this.Td},set:function(t){this.Td.C(t)||(this.Td.assign(t),this.D())}},rootDefaults:{get:function(){return this.V},set:function(t){this.V!==t&&(this.V=t,this.D())}},alternateDefaults:{get:function(){return this.Y},set:function(t){this.Y!==t&&(this.Y=t,this.D())}},sorting:{get:function(){return this.V.sorting},set:function(t){this.V.sorting===t||t!==Uh&&t!==Bf&&t!==Rp&&!jp||(this.V.sorting=t,this.D())}},comparer:{get:function(){return this.V.comparer},set:function(t){this.V.comparer!==t&&(this.V.comparer=t,this.D())}},angle:{get:function(){return this.V.angle},set:function(t){this.V.angle!==t&&(0===t||90===t||180===t||270===t?(this.V.angle=t,this.D()):Y("TreeLayout.angle must be 0, 90, 180, or 270"))}},alignment:{get:function(){return this.V.alignment},set:function(t){this.V.alignment!==t&&(this.V.alignment=t,this.D())}},nodeIndent:{get:function(){return this.V.nodeIndent},set:function(t){this.V.nodeIndent!==t&&0<=t&&(this.V.nodeIndent=t,this.D())}},nodeIndentPastParent:{get:function(){return this.V.nodeIndentPastParent},set:function(t){this.V.nodeIndentPastParent!==t&&0<=t&&1>=t&&(this.V.nodeIndentPastParent=t,this.D())}},nodeSpacing:{get:function(){return this.V.nodeSpacing},set:function(t){this.V.nodeSpacing!==t&&(this.V.nodeSpacing=t,this.D())}},layerSpacing:{get:function(){return this.V.layerSpacing},set:function(t){this.V.layerSpacing!==t&&(this.V.layerSpacing=t,this.D())}},layerSpacingParentOverlap:{get:function(){return this.V.layerSpacingParentOverlap},set:function(t){this.V.layerSpacingParentOverlap!==t&&0<=t&&1>=t&&(this.V.layerSpacingParentOverlap=t,this.D())}},compaction:{get:function(){return this.V.compaction},set:function(t){this.V.compaction===t||t!==Vp&&t!==Au||(this.V.compaction=t,this.D())}},breadthLimit:{get:function(){return this.V.breadthLimit},set:function(t){this.V.breadthLimit!==t&&0<=t&&(this.V.breadthLimit=t,this.D())}},rowSpacing:{get:function(){return this.V.rowSpacing},set:function(t){this.V.rowSpacing!==t&&(this.V.rowSpacing=t,this.D())}},rowIndent:{get:function(){return this.V.rowIndent},set:function(t){this.V.rowIndent!==t&&0<=t&&(this.V.rowIndent=t,this.D())}},commentSpacing:{get:function(){return this.V.commentSpacing},set:function(t){this.V.commentSpacing!==t&&(this.V.commentSpacing=t,this.D())}},commentMargin:{get:function(){return this.V.commentMargin},set:function(t){this.V.commentMargin!==t&&(this.V.commentMargin=t,this.D())}},setsPortSpot:{get:function(){return this.V.setsPortSpot},set:function(t){this.V.setsPortSpot!==t&&(this.V.setsPortSpot=t,this.D())}},portSpot:{get:function(){return this.V.portSpot},set:function(t){this.V.portSpot.C(t)||(this.V.portSpot=t,this.D())}},setsChildPortSpot:{get:function(){return this.V.setsChildPortSpot},set:function(t){this.V.setsChildPortSpot!==t&&(this.V.setsChildPortSpot=t,this.D())}},childPortSpot:{get:function(){return this.V.childPortSpot},set:function(t){this.V.childPortSpot.C(t)||(this.V.childPortSpot=t,this.D())}},alternateSorting:{get:function(){return this.Y.sorting},set:function(t){this.Y.sorting===t||t!==Uh&&t!==Bf&&t!==Rp&&!jp||(this.Y.sorting=t,this.D())}},alternateComparer:{get:function(){return this.Y.comparer},set:function(t){this.Y.comparer!==t&&(this.Y.comparer=t,this.D())}},alternateAngle:{get:function(){return this.Y.angle},set:function(t){this.Y.angle===t||0!==t&&90!==t&&180!==t&&270!==t||(this.Y.angle=t,this.D())}},alternateAlignment:{get:function(){return this.Y.alignment},set:function(t){this.Y.alignment!==t&&(this.Y.alignment=t,this.D())}},alternateNodeIndent:{get:function(){return this.Y.nodeIndent},set:function(t){this.Y.nodeIndent!==t&&0<=t&&(this.Y.nodeIndent=t,this.D())}},alternateNodeIndentPastParent:{get:function(){return this.Y.nodeIndentPastParent},set:function(t){this.Y.nodeIndentPastParent!==t&&0<=t&&1>=t&&(this.Y.nodeIndentPastParent=t,this.D())}},alternateNodeSpacing:{get:function(){return this.Y.nodeSpacing},set:function(t){this.Y.nodeSpacing!==t&&(this.Y.nodeSpacing=t,this.D())}},alternateLayerSpacing:{get:function(){return this.Y.layerSpacing},set:function(t){this.Y.layerSpacing!==t&&(this.Y.layerSpacing=t,this.D())}},alternateLayerSpacingParentOverlap:{get:function(){return this.Y.layerSpacingParentOverlap},set:function(t){this.Y.layerSpacingParentOverlap!==t&&0<=t&&1>=t&&(this.Y.layerSpacingParentOverlap=t,this.D())}},alternateCompaction:{get:function(){return this.Y.compaction},set:function(t){this.Y.compaction===t||t!==Vp&&t!==Au||(this.Y.compaction=t,this.D())}},alternateBreadthLimit:{get:function(){return this.Y.breadthLimit},set:function(t){this.Y.breadthLimit!==t&&0<=t&&(this.Y.breadthLimit=t,this.D())}},alternateRowSpacing:{get:function(){return this.Y.rowSpacing},set:function(t){this.Y.rowSpacing!==t&&(this.Y.rowSpacing=t,this.D())}},alternateRowIndent:{get:function(){return this.Y.rowIndent},set:function(t){this.Y.rowIndent!==t&&0<=t&&(this.Y.rowIndent=t,this.D())}},alternateCommentSpacing:{get:function(){return this.Y.commentSpacing},set:function(t){this.Y.commentSpacing!==t&&(this.Y.commentSpacing=t,this.D())}},alternateCommentMargin:{get:function(){return this.Y.commentMargin},set:function(t){this.Y.commentMargin!==t&&(this.Y.commentMargin=t,this.D())}},alternateSetsPortSpot:{get:function(){return this.Y.setsPortSpot},set:function(t){this.Y.setsPortSpot!==t&&(this.Y.setsPortSpot=t,this.D())}},alternatePortSpot:{get:function(){return this.Y.portSpot},set:function(t){this.Y.portSpot.C(t)||(this.Y.portSpot=t,this.D())}},alternateSetsChildPortSpot:{get:function(){return this.Y.setsChildPortSpot},set:function(t){this.Y.setsChildPortSpot!==t&&(this.Y.setsChildPortSpot=t,this.D())}},alternateChildPortSpot:{get:function(){return this.Y.childPortSpot},set:function(t){this.Y.childPortSpot.C(t)||(this.Y.childPortSpot=t,this.D())}}});var fs=new W(_t,"PathDefault",-1),xi=new W(_t,"PathDestination",0),Ar=new W(_t,"PathSource",1),Uh=new W(_t,"SortingForwards",10),Bf=new W(_t,"SortingReverse",11),Rp=new W(_t,"SortingAscending",12),jp=new W(_t,"SortingDescending",13),Uf=new W(_t,"AlignmentCenterSubtrees",20),Hh=new W(_t,"AlignmentCenterChildren",21),Bo=new W(_t,"AlignmentStart",22),Qr=new W(_t,"AlignmentEnd",23),Gl=new W(_t,"AlignmentBus",24),ds=new W(_t,"AlignmentBusBranching",25),zl=new W(_t,"AlignmentTopLeftBus",26),js=new W(_t,"AlignmentBottomRightBus",27),Vp=new W(_t,"CompactionNone",30),Au=new W(_t,"CompactionBlock",31),fy=new W(_t,"StyleLayered",40),dy=new W(_t,"StyleLastParents",41),rr=new W(_t,"StyleAlternating",42),py=new W(_t,"StyleRootOnly",43),$l=new W(_t,"ArrangementVertical",50),Bp=new W(_t,"ArrangementHorizontal",51),Up=new W(_t,"ArrangementFixedRoots",52),gy=new W(_t,"LayerIndividual",60),my=new W(_t,"LayerSiblings",61),Hp=new W(_t,"LayerUniform",62);function ku(t){Xt.call(this,t)}function kr(t){Xe.call(this,t),this.W=!1,this.cb=null,this.u=[],this.hb=this.Ga=this.F=this.ga=0,this.od=null,this.S=new P(0,0),this.Ca=new dt(0,0),this.ka=new P(0,0),this.Ql=this.Pl=this.Xz=!1,this.No=this.Bo=null,this.fd=Uh,this.Zc=I1,this.Gb=0,this.Fb=Hh,this.uq=this.tq=0,this.vq=20,this.be=50,this.$p=0,this.kp=Au,this.cp=0,this.Mq=25,this.jp=this.Lq=10,this.ip=20,this.Uq=!0,this.Cq=Hn,this.Tq=!0,this.gp=Hn}function Gh(t){qn.call(this,t),this.Ft=new P(0,0)}_t.className="TreeLayout",_t.PathDefault=fs,_t.PathDestination=xi,_t.PathSource=Ar,_t.SortingForwards=Uh,_t.SortingReverse=Bf,_t.SortingAscending=Rp,_t.SortingDescending=jp,_t.AlignmentCenterSubtrees=Uf,_t.AlignmentCenterChildren=Hh,_t.AlignmentStart=Bo,_t.AlignmentEnd=Qr,_t.AlignmentBus=Gl,_t.AlignmentBusBranching=ds,_t.AlignmentTopLeftBus=zl,_t.AlignmentBottomRightBus=js,_t.CompactionNone=Vp,_t.CompactionBlock=Au,_t.StyleLayered=fy,_t.StyleLastParents=dy,_t.StyleAlternating=rr,_t.StyleRootOnly=py,_t.ArrangementVertical=$l,_t.ArrangementHorizontal=Bp,_t.ArrangementFixedRoots=Up,_t.LayerIndividual=gy,_t.LayerSiblings=my,_t.LayerUniform=Hp,Ht(ku,Xt),ku.prototype.createVertex=function(){return new kr(this)},ku.prototype.createEdge=function(){return new Gh(this)},ku.className="TreeNetwork",Ht(kr,Xe),kr.prototype.copyInheritedPropertiesFrom=function(t){null!==t&&(this.fd=t.sorting,this.Zc=t.comparer,this.Gb=t.angle,this.Fb=t.alignment,this.tq=t.nodeIndent,this.uq=t.nodeIndentPastParent,this.vq=t.nodeSpacing,this.be=t.layerSpacing,this.$p=t.layerSpacingParentOverlap,this.kp=t.compaction,this.cp=t.breadthLimit,this.Mq=t.rowSpacing,this.Lq=t.rowIndent,this.jp=t.commentSpacing,this.ip=t.commentMargin,this.Uq=t.setsPortSpot,this.Cq=t.portSpot,this.Tq=t.setsChildPortSpot,this.gp=t.childPortSpot)},Mt.Object.defineProperties(kr.prototype,{initialized:{get:function(){return this.W},set:function(t){this.W!==t&&(this.W=t)}},parent:{get:function(){return this.cb},set:function(t){this.cb!==t&&(this.cb=t)}},children:{get:function(){return this.u},set:function(t){if(this.u!==t){if(null!==t)for(var e=t.length,n=0;n<e;n++);this.u=t}}},level:{get:function(){return this.ga},set:function(t){this.ga!==t&&(this.ga=t)}},descendantCount:{get:function(){return this.F},set:function(t){this.F!==t&&(this.F=t)}},maxChildrenCount:{get:function(){return this.Ga},set:function(t){this.Ga!==t&&(this.Ga=t)}},maxGenerationCount:{get:function(){return this.hb},set:function(t){this.hb!==t&&(this.hb=t)}},comments:{get:function(){return this.od},set:function(t){if(this.od!==t){if(null!==t)for(var e=t.length,n=0;n<e;n++);this.od=t}}},sorting:{get:function(){return this.fd},set:function(t){this.fd!==t&&(this.fd=t)}},comparer:{get:function(){return this.Zc},set:function(t){this.Zc!==t&&(this.Zc=t)}},angle:{get:function(){return this.Gb},set:function(t){this.Gb!==t&&(this.Gb=t)}},alignment:{get:function(){return this.Fb},set:function(t){this.Fb!==t&&(this.Fb=t)}},nodeIndent:{get:function(){return this.tq},set:function(t){this.tq!==t&&(this.tq=t)}},nodeIndentPastParent:{get:function(){return this.uq},set:function(t){this.uq!==t&&(this.uq=t)}},nodeSpacing:{get:function(){return this.vq},set:function(t){this.vq!==t&&(this.vq=t)}},layerSpacing:{get:function(){return this.be},set:function(t){this.be!==t&&(this.be=t)}},layerSpacingParentOverlap:{get:function(){return this.$p},set:function(t){this.$p!==t&&(this.$p=t)}},compaction:{get:function(){return this.kp},set:function(t){this.kp!==t&&(this.kp=t)}},breadthLimit:{get:function(){return this.cp},set:function(t){this.cp!==t&&(this.cp=t)}},rowSpacing:{get:function(){return this.Mq},set:function(t){this.Mq!==t&&(this.Mq=t)}},rowIndent:{get:function(){return this.Lq},set:function(t){this.Lq!==t&&(this.Lq=t)}},commentSpacing:{get:function(){return this.jp},set:function(t){this.jp!==t&&(this.jp=t)}},commentMargin:{get:function(){return this.ip},set:function(t){this.ip!==t&&(this.ip=t)}},setsPortSpot:{get:function(){return this.Uq},set:function(t){this.Uq!==t&&(this.Uq=t)}},portSpot:{get:function(){return this.Cq},set:function(t){this.Cq.C(t)||(this.Cq=t)}},setsChildPortSpot:{get:function(){return this.Tq},set:function(t){this.Tq!==t&&(this.Tq=t)}},childPortSpot:{get:function(){return this.gp},set:function(t){this.gp.C(t)||(this.gp=t)}},childrenCount:{get:function(){return this.children.length}},relativePosition:{get:function(){return this.S},set:function(t){this.S.set(t)}},subtreeSize:{get:function(){return this.Ca},set:function(t){this.Ca.set(t)}},subtreeOffset:{get:function(){return this.ka},set:function(t){this.ka.set(t)}}}),kr.className="TreeVertex",Ht(Gh,qn),Gh.prototype.commit=function(){var t=this.link;if(null!==t&&!t.isAvoiding){var e=this.network.layout,n=null,i=null;switch(e.qd){case xi:n=this.fromVertex,i=this.toVertex;break;case Ar:n=this.toVertex,i=this.fromVertex;break;default:Y("Unhandled path value "+e.qd.toString())}if(null!==n&&null!==i)if(0!==(e=this.Ft).x||0!==e.y||n.Xz){i=n.bounds;var l=an(n),u=Vf(n),h=n.rowSpacing;t.mg();var g,f=t.curve===Ni,p=t.isOrthogonal;if(t.jh(),p||f){for(g=2;4<t.pointsCount;)t.Yu(2);var m=t.i(1),v=t.i(2)}else{for(g=1;3<t.pointsCount;)t.Yu(1);m=t.i(0),v=t.i(t.pointsCount-1)}var x=t.i(t.pointsCount-1);0===l?(n.alignment===Qr?(l=i.bottom+e.y,0===e.y&&m.y>x.y+n.rowIndent&&(l=Math.min(l,Math.max(m.y,l-Pr(n))))):n.alignment===Bo?(l=i.top+e.y,0===e.y&&m.y<x.y-n.rowIndent&&(l=Math.max(l,Math.min(m.y,l+Pr(n))))):l=n.Pl||n.Ql&&1===n.maxGenerationCount?i.top-n.ka.y+e.y:i.y+i.height/2+e.y,f?(t.l(g,m.x,l),g++,t.l(g,i.right+u,l),g++,t.l(g,i.right+u+(e.x-h)/3,l),g++,t.l(g,i.right+u+2*(e.x-h)/3,l),g++,t.l(g,i.right+u+(e.x-h),l),g++,t.l(g,v.x,l)):(p&&(t.l(g,i.right+u/2,m.y),g++),t.l(g,i.right+u/2,l),g++,t.l(g,i.right+u+e.x-(p?h/2:h),l),g++,p&&t.l(g,t.i(g-1).x,v.y))):90===l?(n.alignment===Qr?(l=i.right+e.x,0===e.x&&m.x>x.x+n.rowIndent&&(l=Math.min(l,Math.max(m.x,l-Pr(n))))):n.alignment===Bo?(l=i.left+e.x,0===e.x&&m.x<x.x-n.rowIndent&&(l=Math.max(l,Math.min(m.x,l+Pr(n))))):l=n.Pl||n.Ql&&1===n.maxGenerationCount?i.left-n.ka.x+e.x:i.x+i.width/2+e.x,f?(t.l(g,l,m.y),g++,t.l(g,l,i.bottom+u),g++,t.l(g,l,i.bottom+u+(e.y-h)/3),g++,t.l(g,l,i.bottom+u+2*(e.y-h)/3),g++,t.l(g,l,i.bottom+u+(e.y-h)),g++,t.l(g,l,v.y)):(p&&(t.l(g,m.x,i.bottom+u/2),g++),t.l(g,l,i.bottom+u/2),g++,t.l(g,l,i.bottom+u+e.y-(p?h/2:h)),g++,p&&t.l(g,v.x,t.i(g-1).y))):180===l?(n.alignment===Qr?(l=i.bottom+e.y,0===e.y&&m.y>x.y+n.rowIndent&&(l=Math.min(l,Math.max(m.y,l-Pr(n))))):n.alignment===Bo?(l=i.top+e.y,0===e.y&&m.y<x.y-n.rowIndent&&(l=Math.max(l,Math.min(m.y,l+Pr(n))))):l=n.Pl||n.Ql&&1===n.maxGenerationCount?i.top-n.ka.y+e.y:i.y+i.height/2+e.y,f?(t.l(g,m.x,l),g++,t.l(g,i.left-u,l),g++,t.l(g,i.left-u+(e.x+h)/3,l),g++,t.l(g,i.left-u+2*(e.x+h)/3,l),g++,t.l(g,i.left-u+(e.x+h),l),g++,t.l(g,v.x,l)):(p&&(t.l(g,i.left-u/2,m.y),g++),t.l(g,i.left-u/2,l),g++,t.l(g,i.left-u+e.x+(p?h/2:h),l),g++,p&&t.l(g,t.i(g-1).x,v.y))):270===l?(n.alignment===Qr?(l=i.right+e.x,0===e.x&&m.x>x.x+n.rowIndent&&(l=Math.min(l,Math.max(m.x,l-Pr(n))))):n.alignment===Bo?(l=i.left+e.x,0===e.x&&m.x<x.x-n.rowIndent&&(l=Math.max(l,Math.min(m.x,l+Pr(n))))):l=n.Pl||n.Ql&&1===n.maxGenerationCount?i.left-n.ka.x+e.x:i.x+i.width/2+e.x,f?(t.l(g,l,m.y),g++,t.l(g,l,i.top-u),g++,t.l(g,l,i.top-u+(e.y+h)/3),g++,t.l(g,l,i.top-u+2*(e.y+h)/3),g++,t.l(g,l,i.top-u+(e.y+h)),g++,t.l(g,l,v.y)):(p&&(t.l(g,m.x,i.top-u/2),g++),t.l(g,l,i.top-u/2),g++,t.l(g,l,i.top-u+e.y+(p?h/2:h)),g++,p&&t.l(g,v.x,t.i(g-1).y))):Y("Invalid angle "+l),t.pf()}else t=this.link,(u=an(n))!==an(i)&&(h=Vf(n),f=n.bounds,n=i.bounds,0===u&&n.left-f.right<h+1||90===u&&n.top-f.bottom<h+1||180===u&&f.left-n.right<h+1||270===u&&f.top-n.bottom<h+1||(t.mg(),n=t.curve===Ni,e=t.isOrthogonal,i=ka(this.fromVertex.alignment),t.jh(),0===u?(u=f.right+h/2,n?4===t.pointsCount&&(n=t.i(3).y,t.M(1,u-20,t.i(1).y),t.l(2,u-20,n),t.l(3,u,n),t.l(4,u+20,n),t.M(5,t.i(5).x,n)):e?i?t.M(3,t.i(2).x,t.i(4).y):6===t.pointsCount&&(t.M(2,u,t.i(2).y),t.M(3,u,t.i(3).y)):4===t.pointsCount?t.l(2,u,t.i(2).y):3===t.pointsCount?t.M(1,u,t.i(2).y):2===t.pointsCount&&t.l(1,u,t.i(1).y)):90===u?(u=f.bottom+h/2,n?4===t.pointsCount&&(n=t.i(3).x,t.M(1,t.i(1).x,u-20),t.l(2,n,u-20),t.l(3,n,u),t.l(4,n,u+20),t.M(5,n,t.i(5).y)):e?i?t.M(3,t.i(2).x,t.i(4).y):6===t.pointsCount&&(t.M(2,t.i(2).x,u),t.M(3,t.i(3).x,u)):4===t.pointsCount?t.l(2,t.i(2).x,u):3===t.pointsCount?t.M(1,t.i(2).x,u):2===t.pointsCount&&t.l(1,t.i(1).x,u)):180===u?(u=f.left-h/2,n?4===t.pointsCount&&(n=t.i(3).y,t.M(1,u+20,t.i(1).y),t.l(2,u+20,n),t.l(3,u,n),t.l(4,u-20,n),t.M(5,t.i(5).x,n)):e?i?t.M(3,t.i(2).x,t.i(4).y):6===t.pointsCount&&(t.M(2,u,t.i(2).y),t.M(3,u,t.i(3).y)):4===t.pointsCount?t.l(2,u,t.i(2).y):3===t.pointsCount?t.M(1,u,t.i(2).y):2===t.pointsCount&&t.l(1,u,t.i(1).y)):270===u&&(u=f.top-h/2,n?4===t.pointsCount&&(n=t.i(3).x,t.M(1,t.i(1).x,u+20),t.l(2,n,u+20),t.l(3,n,u),t.l(4,n,u-20),t.M(5,n,t.i(5).y)):e?i?t.M(3,t.i(2).x,t.i(4).y):6===t.pointsCount&&(t.M(2,t.i(2).x,u),t.M(3,t.i(3).x,u)):4===t.pointsCount?t.l(2,t.i(2).x,u):3===t.pointsCount?t.M(1,t.i(2).x,u):2===t.pointsCount&&t.l(1,t.i(1).x,u)),t.pf()))}},Mt.Object.defineProperties(Gh.prototype,{fromVertex:{get:function(){return this.ad},set:function(t){this.ad!==t&&(this.ad=t)}},toVertex:{get:function(){return this.jd},set:function(t){this.jd!==t&&(this.jd=t)}},relativePoint:{get:function(){return this.Ft},set:function(t){this.Ft.set(t)}}}),Gh.className="TreeEdge",Ce.prototype.initializeStandardTools=function(){this.gb("Action",new ao,this.mouseDownTools),this.gb("Relinking",new Vi,this.mouseDownTools),this.gb("LinkReshaping",new ze,this.mouseDownTools),this.gb("Rotating",new Fn,this.mouseDownTools),this.gb("Resizing",new je,this.mouseDownTools),this.gb("Linking",new ae,this.mouseMoveTools),this.gb("Dragging",new De,this.mouseMoveTools),this.gb("DragSelecting",new Ts,this.mouseMoveTools),this.gb("Panning",new ns,this.mouseMoveTools),this.gb("ContextMenu",new Bi,this.mouseUpTools),this.gb("TextEditing",new se,this.mouseUpTools),this.gb("ClickCreating",new zr,this.mouseUpTools),this.gb("ClickSelecting",new sh,this.mouseUpTools)},Ao("Horizontal",new Jd),Ao("Spot",new Ug),Ao("Table",new Ca),Ao("Viewbox",new zg),Ao("TableRow",new Hg),Ao("TableColumn",new Gg),Ao("Graduated",new qd),Ao("Grid",new Qd),Ut.add("GraphLinksModel",Qe),Ut.add("TreeModel",ir),Fm(ln,null),Fm(Ft,null);var yy=pt.go,iw={get licenseKey(){return V.licenseKey},set licenseKey(t){V.licenseKey=t},get version(){return V.version},Group:yt,EnumValue:W,List:q,Set:Z,Map:vt,Point:P,Size:dt,Rect:B,Margin:Bt,Spot:it,Geometry:K,PathFigure:Nn,PathSegment:Lt,InputEvent:Zi,DiagramEvent:Mc,ChangedEvent:Me,Model:rt,GraphLinksModel:Et,TreeModel:ti,Binding:de,Transaction:xn,UndoManager:Pe,CommandHandler:$t,Tool:kt,DraggingTool:De,DraggingInfo:pa,DraggingOptions:Gc,LinkingBaseTool:Gn,LinkingTool:ae,RelinkingTool:Vi,LinkReshapingTool:ze,ResizingTool:je,RotatingTool:Fn,ClickSelectingTool:sh,ActionTool:ao,ClickCreatingTool:zr,HTMLInfo:Dl,ContextMenuTool:Bi,DragSelectingTool:Ts,PanningTool:ns,TextEditingTool:se,ToolManager:Ce,Animation:Cn,AnimationManager:mr,AnimationTrigger:_i,Layer:Rn,Diagram:V,Palette:Ud,Overview:Ns,Brush:bt,GraphObject:ot,Panel:$,RowColumnDefinition:on,Shape:wt,TextBlock:Wt,Picture:Gi,Part:lt,Adornment:Pt,Node:J,Link:H,Placeholder:mi,Layout:Ot,LayoutNetwork:Xt,LayoutVertex:Xe,LayoutEdge:qn,GridLayout:kn,PanelLayout:Be,CircularLayout:me,CircularNetwork:Lf,CircularVertex:kp,CircularEdge:Jm,ForceDirectedLayout:ln,ForceDirectedNetwork:us,ForceDirectedVertex:Ul,ForceDirectedEdge:Cr,LayeredDigraphLayout:Ft,LayeredDigraphNetwork:jh,LayeredDigraphVertex:Aa,LayeredDigraphEdge:Pu,TreeLayout:_t,TreeNetwork:ku,TreeVertex:kr,TreeEdge:Gh};"object"==typeof yy&&yy.version&&hi("WARNING: a `go` object on the root object is already defined.  "+("Debug"in yy?"debug ":"")+"version: "+yy.version+", replaced with version: "+iw.version),V.prototype.go=iw,pt.go=iw,"object"==typeof dc.exports&&(dc.exports=typeof global<"u"?global.go:self.go)}(),typeof global<"u"?global:self;const St=typeof global<"u"?global.go:self.go,$w=St.Map,Ju=St.Size,Ww=St.Margin,Yw=St.Spot,fM=St.TreeModel,Uy=St.Binding,J_=St.Diagram,vM=St.GraphObject,Z_=St.Panel,qw=St.RowColumnDefinition,Q_=St.Shape,tx=St.TextBlock,Zu=St.Node,Ws=St.TreeLayout}},dc=>{dc(dc.s=761)}]);